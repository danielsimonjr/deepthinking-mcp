{"version":3,"sources":["../node_modules/tsup/assets/esm_shims.js","../src/tools/thinking.ts","../src/types/core.ts","../src/types/session.ts","../src/modes/handlers/ModeHandler.ts","../src/types/modes/recommendations.ts","../src/types/modes/cryptanalytic.ts","../src/types/index.ts","../src/utils/type-guards.ts","../src/modes/handlers/GenericModeHandler.ts","../src/modes/handlers/SequentialHandler.ts","../src/modes/handlers/ShannonHandler.ts","../src/modes/handlers/MathematicsHandler.ts","../src/modes/handlers/PhysicsHandler.ts","../src/modes/handlers/HybridHandler.ts","../src/modes/handlers/InductiveHandler.ts","../src/modes/handlers/DeductiveHandler.ts","../src/modes/handlers/AbductiveHandler.ts","../src/modes/handlers/CausalHandler.ts","../src/modes/handlers/BayesianHandler.ts","../src/modes/handlers/CounterfactualHandler.ts","../src/modes/handlers/TemporalHandler.ts","../src/modes/handlers/GameTheoryHandler.ts","../src/modes/handlers/EvidentialHandler.ts","../src/modes/handlers/AnalogicalHandler.ts","../src/modes/handlers/FirstPrinciplesHandler.ts","../src/modes/handlers/SystemsThinkingHandler.ts","../src/modes/handlers/ScientificMethodHandler.ts","../src/modes/handlers/FormalLogicHandler.ts","../src/modes/handlers/SynthesisHandler.ts","../src/modes/handlers/ArgumentationHandler.ts","../src/modes/handlers/CritiqueHandler.ts","../src/modes/handlers/AnalysisHandler.ts","../src/modes/handlers/EngineeringHandler.ts","../src/modes/handlers/ComputabilityHandler.ts","../src/modes/handlers/CryptanalyticHandler.ts","../src/modes/handlers/AlgorithmicHandler.ts","../src/modes/handlers/MetaReasoningHandler.ts","../src/modes/handlers/RecursiveHandler.ts","../src/modes/handlers/ModalHandler.ts","../src/modes/handlers/StochasticHandler.ts","../src/modes/handlers/ConstraintHandler.ts","../src/modes/handlers/OptimizationHandler.ts","../src/modes/handlers/CustomHandler.ts","../src/modes/registry.ts","../src/modes/index.ts","../src/utils/errors.ts","../src/utils/sanitization.ts","../src/utils/logger-types.ts","../src/utils/logger.ts","../src/cache/lru.ts","../src/config/index.ts","../src/validation/cache.ts","../src/session/SessionMetricsCalculator.ts","../src/services/MetaMonitor.ts","../src/session/manager.ts","../src/session/index.ts","../src/session/storage/interface.ts","../src/utils/file-lock.ts","../src/session/storage/file-store.ts","../src/services/ThoughtFactory.ts","../src/export/visual/utils.ts","../src/export/visual/utils/mermaid.ts","../src/export/visual/utils/dot.ts","../src/export/visual/utils/ascii.ts","../src/export/visual/utils/svg.ts","../src/export/visual/utils/graphml.ts","../src/export/visual/utils/tikz.ts","../src/export/visual/utils/html.ts","../src/export/visual/utils/modelica.ts","../src/export/visual/utils/uml.ts","../src/export/visual/utils/json.ts","../src/export/visual/utils/markdown.ts","../src/export/visual/modes/sequential.ts","../src/export/visual/modes/shannon.ts","../src/export/visual/modes/mathematics.ts","../src/export/visual/modes/physics.ts","../src/export/visual/modes/hybrid.ts","../src/export/visual/modes/causal.ts","../src/export/visual/modes/temporal.ts","../src/export/visual/modes/counterfactual.ts","../src/export/visual/modes/bayesian.ts","../src/export/visual/modes/evidential.ts","../src/export/visual/modes/game-theory.ts","../src/export/visual/modes/optimization.ts","../src/export/visual/modes/abductive.ts","../src/export/visual/modes/analogical.ts","../src/export/visual/modes/first-principles.ts","../src/export/visual/modes/metareasoning.ts","../src/export/visual/modes/systems-thinking.ts","../src/export/visual/modes/scientific-method.ts","../src/export/visual/modes/formal-logic.ts","../src/export/visual/modes/engineering.ts","../src/export/visual/modes/computability.ts","../src/export/visual/modes/proof-decomposition.ts","../src/export/visual/modes/index.ts","../src/export/visual/visual-exporter.ts","../src/export/visual/utils/latex.ts","../src/export/visual/utils/latex-mermaid-integration.ts","../src/export/visual/utils/index.ts","../src/export/visual/index.ts","../src/services/ExportService.ts","../src/services/ModeRouter.ts","../src/services/index.ts","../src/index.ts","../src/tools/definitions.ts","../src/tools/json-schemas.ts","../src/tools/schemas/base.ts","../src/tools/schemas/shared.ts","../src/tools/schemas/modes/core.ts","../src/tools/schemas/modes/mathematics.ts","../src/tools/schemas/modes/temporal.ts","../src/tools/schemas/modes/probabilistic.ts","../src/tools/schemas/modes/causal.ts","../src/tools/schemas/modes/strategic.ts","../src/tools/schemas/modes/analytical.ts","../src/tools/schemas/modes/scientific.ts","../src/tools/schemas/modes/engineering.ts","../src/tools/schemas/modes/academic.ts"],"names":["z","ThinkingMode","randomUUID","VALID_THOUGHT_TYPES","path","VALID_STRATEGIES","stages","LogLevel","DEFAULT_CONFIG","logger","init_session","fs","path2","COLOR_PALETTES","escapeLatex","stageIndex","confounders","nodes","section","sanitizeModelicaId","escapeModelicaString","getNodeColor","escapeSVGText","truncateText","init_modes","init_utils","result","__filename","fileURLToPath","__dirname","dirname","join","SessionManager","FileSessionStore","ThoughtFactory","ExportService","ModeRouter","ThinkingToolSchema","session"],"mappings":"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","file":"index.js","sourcesContent":["// Shim globals in esm bundle\nimport path from 'node:path'\nimport { fileURLToPath } from 'node:url'\n\nconst getFilename = () => fileURLToPath(import.meta.url)\nconst getDirname = () => path.dirname(getFilename())\n\nexport const __dirname = /* @__PURE__ */ getDirname()\nexport const __filename = /* @__PURE__ */ getFilename()\n","/**\n * Legacy thinking tool for DeepThinking MCP v4.4.0\n * DEPRECATED: Use focused tools (deepthinking_*) instead\n *\n * This file provides backward compatibility only.\n * Zod schema kept for runtime validation. JSON schema is hand-written.\n */\n\nimport { z } from 'zod';\n\n/**\n * Zod schema for runtime validation (internal use)\n */\nexport const ThinkingToolSchema = z.object({\n  sessionId: z.string().optional(),\n  mode: z.enum(['sequential', 'shannon', 'mathematics', 'physics', 'hybrid', 'inductive', 'deductive', 'abductive', 'causal', 'bayesian', 'counterfactual', 'analogical', 'temporal', 'gametheory', 'evidential', 'firstprinciples', 'systemsthinking', 'scientificmethod', 'optimization', 'formallogic']).default('hybrid'),\n  thought: z.string(),\n  thoughtNumber: z.number().int().positive(),\n  totalThoughts: z.number().int().positive(),\n  nextThoughtNeeded: z.boolean(),\n  isRevision: z.boolean().optional(),\n  revisesThought: z.string().optional(),\n  revisionReason: z.string().optional(),\n  branchFrom: z.string().optional(),\n  branchId: z.string().optional(),\n  stage: z.enum(['problem_definition', 'constraints', 'model', 'proof', 'implementation']).optional(),\n  uncertainty: z.number().min(0).max(1).optional(),\n  dependencies: z.array(z.string()).optional(),\n  assumptions: z.array(z.string()).optional(),\n  thoughtType: z.string().optional(),\n  mathematicalModel: z.object({\n    latex: z.string(),\n    symbolic: z.string(),\n    ascii: z.string().optional(),\n  }).optional(),\n  proofStrategy: z.object({\n    type: z.enum(['direct', 'contradiction', 'induction', 'construction', 'contrapositive']),\n    steps: z.array(z.string()),\n  }).optional(),\n  tensorProperties: z.object({\n    rank: z.tuple([z.number(), z.number()]),\n    components: z.string(),\n    latex: z.string(),\n    symmetries: z.array(z.string()),\n    invariants: z.array(z.string()),\n    transformation: z.enum(['covariant', 'contravariant', 'mixed']),\n  }).optional(),\n  physicalInterpretation: z.object({\n    quantity: z.string(),\n    units: z.string(),\n    conservationLaws: z.array(z.string()),\n  }).optional(),\n  // Inductive reasoning properties (Phase 5, v5.0.0)\n  pattern: z.string().optional(),\n  generalization: z.string().optional(),\n  confidence: z.number().min(0).max(1).optional(),\n  counterexamples: z.array(z.string()).optional(),\n  sampleSize: z.number().int().min(1).optional(),\n  // Deductive reasoning properties (Phase 5, v5.0.0)\n  premises: z.array(z.string()).optional(),\n  logicForm: z.string().optional(),\n  validityCheck: z.boolean().optional(),\n  soundnessCheck: z.boolean().optional(),\n  // Abductive reasoning properties (v2.0)\n  observations: z.union([\n    z.array(z.string()), // For inductive reasoning - simple strings\n    z.array(z.object({   // For abductive reasoning - structured objects\n      id: z.string(),\n      description: z.string(),\n      confidence: z.number().min(0).max(1),\n    })),\n  ]).optional(),\n  hypotheses: z.array(z.object({\n    id: z.string(),\n    // Abductive fields\n    explanation: z.string().optional(),\n    assumptions: z.array(z.string()).optional(),\n    predictions: z.array(z.string()).optional(),\n    score: z.number().optional(),\n    // Evidential fields\n    name: z.string().optional(),\n    description: z.string().optional(),\n    mutuallyExclusive: z.boolean().optional(),\n    subsets: z.array(z.string()).optional(),\n  })).optional(),\n  evaluationCriteria: z.object({\n    parsimony: z.number(),\n    explanatoryPower: z.number(),\n    plausibility: z.number(),\n    testability: z.boolean(),\n  }).optional(),\n  evidence: z.array(z.object({\n    id: z.string(),\n    description: z.string(),\n    // Abductive fields\n    hypothesisId: z.string().optional(),\n    type: z.enum(['supporting', 'contradicting', 'neutral']).optional(),\n    strength: z.number().min(0).max(1).optional(),\n    // Evidential fields\n    source: z.string().optional(),\n    reliability: z.number().min(0).max(1).optional(),\n    timestamp: z.number().optional(),\n    supports: z.array(z.string()).optional(),\n    contradicts: z.array(z.string()).optional(),\n  })).optional(),\n  bestExplanation: z.object({\n    id: z.string(),\n    explanation: z.string(),\n    assumptions: z.array(z.string()),\n    predictions: z.array(z.string()),\n    score: z.number(),\n  }).optional(),\n  // Causal reasoning properties (v2.0)\n  causalGraph: z.object({\n    nodes: z.array(z.object({\n      id: z.string(),\n      name: z.string(),\n      type: z.enum(['cause', 'effect', 'mediator', 'confounder']),\n      description: z.string(),\n    })),\n    edges: z.array(z.object({\n      from: z.string(),\n      to: z.string(),\n      strength: z.number(),\n      confidence: z.number().min(0).max(1),\n    })),\n  }).optional(),\n  interventions: z.array(z.object({\n    nodeId: z.string(),\n    action: z.string(),\n    expectedEffects: z.array(z.object({\n      nodeId: z.string(),\n      expectedChange: z.string(),\n      confidence: z.number(),\n    })),\n  })).optional(),\n  mechanisms: z.array(z.object({\n    from: z.string(),\n    to: z.string(),\n    description: z.string(),\n    type: z.enum(['direct', 'indirect', 'feedback']),\n  })).optional(),\n  confounders: z.array(z.object({\n    nodeId: z.string(),\n    affects: z.array(z.string()),\n    description: z.string(),\n  })).optional(),\n  // Bayesian reasoning properties (v2.0)\n  hypothesis: z.object({\n    id: z.string(),\n    statement: z.string(),\n  }).optional(),\n  prior: z.object({\n    probability: z.number().min(0).max(1),\n    justification: z.string(),\n  }).optional(),\n  likelihood: z.object({\n    probability: z.number().min(0).max(1),\n    description: z.string(),\n  }).optional(),\n  posterior: z.object({\n    probability: z.number().min(0).max(1),\n    calculation: z.string(),\n  }).optional(),\n  bayesFactor: z.number().optional(),\n  // Counterfactual reasoning properties (v2.0)\n  actual: z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    conditions: z.array(z.object({\n      factor: z.string(),\n      value: z.string(),\n    })),\n    outcomes: z.array(z.object({\n      description: z.string(),\n      impact: z.enum(['positive', 'negative', 'neutral']),\n      magnitude: z.number().optional(),\n    })),\n  }).optional(),\n  counterfactuals: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    conditions: z.array(z.object({\n      factor: z.string(),\n      value: z.string(),\n    })),\n    outcomes: z.array(z.object({\n      description: z.string(),\n      impact: z.enum(['positive', 'negative', 'neutral']),\n      magnitude: z.number().optional(),\n    })),\n  })).optional(),\n  comparison: z.object({\n    differences: z.array(z.object({\n      aspect: z.string(),\n      actual: z.string(),\n      counterfactual: z.string(),\n      significance: z.enum(['high', 'medium', 'low']),\n    })),\n    insights: z.array(z.string()),\n    lessons: z.array(z.string()),\n  }).optional(),\n  interventionPoint: z.object({\n    description: z.string(),\n    alternatives: z.array(z.string()),\n  }).optional(),\n  causalChains: z.array(z.object({\n    intervention: z.string(),\n    steps: z.array(z.string()),\n    finalOutcome: z.string(),\n  })).optional(),\n  // Analogical reasoning properties (v2.0)\n  sourceDomain: z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    entities: z.array(z.object({\n      id: z.string(),\n      name: z.string(),\n      type: z.string(),\n    })),\n    relations: z.array(z.object({\n      id: z.string(),\n      type: z.string(),\n      from: z.string(),\n      to: z.string(),\n    })),\n  }).optional(),\n  targetDomain: z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    entities: z.array(z.object({\n      id: z.string(),\n      name: z.string(),\n      type: z.string(),\n    })),\n    relations: z.array(z.object({\n      id: z.string(),\n      type: z.string(),\n      from: z.string(),\n      to: z.string(),\n    })),\n  }).optional(),\n  mapping: z.array(z.object({\n    sourceEntityId: z.string(),\n    targetEntityId: z.string(),\n    justification: z.string(),\n    confidence: z.number().min(0).max(1),\n  })).optional(),\n  insights: z.array(z.object({\n    description: z.string(),\n    sourceEvidence: z.string(),\n    targetApplication: z.string(),\n  })).optional(),\n  inferences: z.array(z.object({\n    sourcePattern: z.string(),\n    targetPrediction: z.string(),\n    confidence: z.number().min(0).max(1),\n    needsVerification: z.boolean(),\n  })).optional(),\n  limitations: z.array(z.string()).optional(),\n  analogyStrength: z.number().min(0).max(1).optional(),\n  // Temporal reasoning properties (Phase 3, v2.1)\n  timeline: z.object({\n    id: z.string(),\n    name: z.string(),\n    timeUnit: z.enum(['milliseconds', 'seconds', 'minutes', 'hours', 'days', 'months', 'years']),\n    startTime: z.number().optional(),\n    endTime: z.number().optional(),\n    events: z.array(z.string()),\n  }).optional(),\n  events: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    timestamp: z.number(),\n    duration: z.number().optional(),\n    type: z.enum(['instant', 'interval']),\n    properties: z.record(z.string(), z.any()),\n  })).optional(),\n  intervals: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    start: z.number(),\n    end: z.number(),\n    overlaps: z.array(z.string()).optional(),\n    contains: z.array(z.string()).optional(),\n  })).optional(),\n  constraints: z.array(z.object({\n    id: z.string(),\n    type: z.enum(['before', 'after', 'during', 'overlaps', 'meets', 'starts', 'finishes', 'equals']),\n    subject: z.string(),\n    object: z.string(),\n    confidence: z.number().min(0).max(1),\n  })).optional(),\n  relations: z.array(z.object({\n    id: z.string(),\n    from: z.string(),\n    to: z.string(),\n    relationType: z.enum(['causes', 'enables', 'prevents', 'precedes', 'follows']),\n    strength: z.number().min(0).max(1),\n    delay: z.number().optional(),\n  })).optional(),\n  // Game theory properties (Phase 3, v2.2)\n  game: z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    type: z.enum(['normal_form', 'extensive_form', 'cooperative', 'non_cooperative']),\n    numPlayers: z.number().int().min(2),\n    isZeroSum: z.boolean(),\n    isPerfectInformation: z.boolean(),\n  }).optional(),\n  players: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    role: z.string().optional(),\n    isRational: z.boolean(),\n    availableStrategies: z.array(z.string()),\n  })).optional(),\n  strategies: z.array(z.object({\n    id: z.string(),\n    playerId: z.string(),\n    name: z.string(),\n    description: z.string(),\n    isPure: z.boolean(),\n    probability: z.number().min(0).max(1).optional(),\n  })).optional(),\n  payoffMatrix: z.object({\n    players: z.array(z.string()),\n    dimensions: z.array(z.number()),\n    payoffs: z.array(z.object({\n      strategyProfile: z.array(z.string()),\n      payoffs: z.array(z.number()),\n    })),\n  }).optional(),\n  nashEquilibria: z.array(z.object({\n    id: z.string(),\n    strategyProfile: z.array(z.string()),\n    payoffs: z.array(z.number()),\n    type: z.enum(['pure', 'mixed']),\n    isStrict: z.boolean(),\n    stability: z.number().min(0).max(1),\n  })).optional(),\n  dominantStrategies: z.array(z.object({\n    playerId: z.string(),\n    strategyId: z.string(),\n    type: z.enum(['strictly_dominant', 'weakly_dominant']),\n    dominatesStrategies: z.array(z.string()),\n    justification: z.string(),\n  })).optional(),\n  gameTree: z.object({\n    rootNode: z.string(),\n    nodes: z.array(z.object({\n      id: z.string(),\n      type: z.enum(['decision', 'chance', 'terminal']),\n      playerId: z.string().optional(),\n      parentNode: z.string().optional(),\n      childNodes: z.array(z.string()),\n      action: z.string().optional(),\n      probability: z.number().min(0).max(1).optional(),\n      payoffs: z.array(z.number()).optional(),\n    })),\n    informationSets: z.array(z.object({\n      id: z.string(),\n      playerId: z.string(),\n      nodes: z.array(z.string()),\n      availableActions: z.array(z.string()),\n    })).optional(),\n  }).optional(),\n\n  // Evidential properties (Phase 3, v2.3)\n  frameOfDiscernment: z.array(z.string()).optional(),\n  beliefFunctions: z.array(z.object({\n    id: z.string(),\n    source: z.string(),\n    massAssignments: z.array(z.object({\n      hypothesisSet: z.array(z.string()),\n      mass: z.number().min(0).max(1),\n      justification: z.string(),\n    })),\n    conflictMass: z.number().optional(),\n  })).optional(),\n  combinedBelief: z.object({\n    id: z.string(),\n    source: z.string(),\n    massAssignments: z.array(z.object({\n      hypothesisSet: z.array(z.string()),\n      mass: z.number().min(0).max(1),\n      justification: z.string(),\n    })),\n    conflictMass: z.number().optional(),\n  }).optional(),\n  plausibility: z.object({\n    id: z.string(),\n    assignments: z.array(z.object({\n      hypothesisSet: z.array(z.string()),\n      plausibility: z.number().min(0).max(1),\n      belief: z.number().min(0).max(1),\n      uncertaintyInterval: z.tuple([z.number(), z.number()]),\n    })),\n  }).optional(),\n  decisions: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    selectedHypothesis: z.array(z.string()),\n    confidence: z.number().min(0).max(1),\n    reasoning: z.string(),\n    alternatives: z.array(z.object({\n      hypothesis: z.array(z.string()),\n      expectedUtility: z.number(),\n      risk: z.number(),\n    })),\n  })).optional(),\n  // First-Principles properties (Phase 3, v3.1.0)\n  question: z.string().optional(),\n  principles: z.array(z.object({\n    id: z.string(),\n    type: z.enum(['axiom', 'definition', 'observation', 'logical_inference', 'assumption']),\n    statement: z.string(),\n    justification: z.string(),\n    dependsOn: z.array(z.string()).optional(),\n    confidence: z.number().min(0).max(1).optional(),\n  })).optional(),\n  derivationSteps: z.array(z.object({\n    stepNumber: z.number().int().positive(),\n    principle: z.string(),\n    inference: z.string(),\n    logicalForm: z.string().optional(),\n    confidence: z.number().min(0).max(1),\n  })).optional(),\n  conclusion: z.union([\n    z.string(), // For deductive reasoning - simple conclusion\n    z.object({  // For first-principles reasoning - structured conclusion\n      statement: z.string(),\n      derivationChain: z.array(z.number()),\n      certainty: z.number().min(0).max(1),\n      limitations: z.array(z.string()).optional(),\n    }),\n  ]).optional(),\n  alternativeInterpretations: z.array(z.string()).optional(),\n\n  // Systems Thinking properties (Phase 4, v3.2.0)\n  system: z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    boundary: z.string(),\n    purpose: z.string(),\n    timeHorizon: z.string().optional(),\n  }).optional(),\n  components: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    type: z.enum(['stock', 'flow', 'variable', 'parameter', 'delay']),\n    description: z.string(),\n    unit: z.string().optional(),\n    initialValue: z.number().optional(),\n    formula: z.string().optional(),\n    influencedBy: z.array(z.string()).optional(),\n  })).optional(),\n  feedbackLoops: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    type: z.enum(['reinforcing', 'balancing']),\n    description: z.string(),\n    components: z.array(z.string()),\n    polarity: z.enum(['+', '-']),\n    strength: z.number().min(0).max(1),\n    delay: z.number().optional(),\n    dominance: z.enum(['early', 'middle', 'late']).optional(),\n  })).optional(),\n  leveragePoints: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    location: z.string(),\n    description: z.string(),\n    effectiveness: z.number().min(0).max(1),\n    difficulty: z.number().min(0).max(1),\n    type: z.enum(['parameter', 'feedback', 'structure', 'goal', 'paradigm']),\n    interventionExamples: z.array(z.string()),\n  })).optional(),\n  behaviors: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    pattern: z.enum(['growth', 'decline', 'oscillation', 'equilibrium', 'chaos', 'overshoot_collapse']),\n    causes: z.array(z.string()),\n    timeframe: z.string(),\n    unintendedConsequences: z.array(z.string()).optional(),\n  })).optional(),\n\n  // Scientific Method properties (Phase 4, v3.2.0)\n  researchQuestion: z.object({\n    id: z.string(),\n    question: z.string(),\n    background: z.string(),\n    rationale: z.string(),\n    significance: z.string(),\n    variables: z.object({\n      independent: z.array(z.string()),\n      dependent: z.array(z.string()),\n      control: z.array(z.string()),\n    }),\n  }).optional(),\n  scientificHypotheses: z.array(z.object({\n    id: z.string(),\n    type: z.enum(['null', 'alternative', 'directional', 'non_directional']),\n    statement: z.string(),\n    prediction: z.string(),\n    rationale: z.string(),\n    testable: z.boolean(),\n    falsifiable: z.boolean(),\n  })).optional(),\n  experiment: z.object({\n    id: z.string(),\n    type: z.enum(['experimental', 'quasi_experimental', 'observational', 'correlational']),\n    design: z.string(),\n    sampleSize: z.number().int().positive(),\n    sampleSizeJustification: z.string().optional(),\n    randomization: z.boolean(),\n    blinding: z.enum(['none', 'single', 'double', 'triple']).optional(),\n    controls: z.array(z.string()),\n    procedure: z.array(z.string()),\n    materials: z.array(z.string()).optional(),\n    duration: z.string().optional(),\n    ethicalConsiderations: z.array(z.string()).optional(),\n  }).optional(),\n  dataCollection: z.object({\n    id: z.string(),\n    method: z.array(z.string()),\n    instruments: z.array(z.string()),\n    dataQuality: z.object({\n      completeness: z.number().min(0).max(1),\n      reliability: z.number().min(0).max(1),\n      validity: z.number().min(0).max(1),\n    }),\n    limitations: z.array(z.string()).optional(),\n  }).optional(),\n  statisticalAnalysis: z.object({\n    id: z.string(),\n    tests: z.array(z.object({\n      id: z.string(),\n      name: z.string(),\n      hypothesisTested: z.string(),\n      testStatistic: z.number(),\n      pValue: z.number().min(0).max(1),\n      confidenceInterval: z.tuple([z.number(), z.number()]).optional(),\n      alpha: z.number().min(0).max(1),\n      result: z.enum(['reject_null', 'fail_to_reject_null']),\n      interpretation: z.string(),\n    })),\n    summary: z.string(),\n    effectSize: z.object({\n      type: z.string(),\n      value: z.number(),\n      interpretation: z.string(),\n    }).optional(),\n    powerAnalysis: z.object({\n      power: z.number().min(0).max(1),\n      alpha: z.number().min(0).max(1),\n      interpretation: z.string(),\n    }).optional(),\n  }).optional(),\n  scientificConclusion: z.object({\n    id: z.string(),\n    statement: z.string(),\n    supportedHypotheses: z.array(z.string()),\n    rejectedHypotheses: z.array(z.string()),\n    confidence: z.number().min(0).max(1),\n    limitations: z.array(z.string()),\n    alternativeExplanations: z.array(z.string()).optional(),\n    futureDirections: z.array(z.string()),\n    replicationConsiderations: z.array(z.string()),\n    practicalImplications: z.array(z.string()).optional(),\n    theoreticalImplications: z.array(z.string()).optional(),\n  }).optional(),\n\n  // Optimization properties (Phase 4, v3.2.0)\n  optimizationProblem: z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    type: z.enum(['linear', 'nonlinear', 'integer', 'mixed_integer', 'constraint_satisfaction', 'multi_objective']),\n    approach: z.enum(['exact', 'heuristic', 'metaheuristic', 'approximation']).optional(),\n    complexity: z.string().optional(),\n  }).optional(),\n  decisionVariables: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    type: z.enum(['continuous', 'integer', 'binary', 'categorical']),\n    unit: z.string().optional(),\n    semantics: z.string(),\n  })).optional(),\n  optimizationConstraints: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    type: z.enum(['hard', 'soft']),\n    formula: z.string(),\n    variables: z.array(z.string()),\n    penalty: z.number().optional(),\n    rationale: z.string(),\n    priority: z.number().optional(),\n  })).optional(),\n  objectives: z.array(z.object({\n    id: z.string(),\n    name: z.string(),\n    description: z.string(),\n    type: z.enum(['minimize', 'maximize']),\n    formula: z.string(),\n    variables: z.array(z.string()),\n    weight: z.number().min(0).max(1).optional(),\n    units: z.string().optional(),\n    idealValue: z.number().optional(),\n    acceptableRange: z.tuple([z.number(), z.number()]).optional(),\n  })).optional(),\n  solution: z.object({\n    id: z.string(),\n    type: z.enum(['optimal', 'feasible', 'infeasible', 'unbounded', 'approximate']),\n    variableValues: z.record(z.string(), z.union([z.number(), z.string()])),\n    objectiveValues: z.record(z.string(), z.number()),\n    quality: z.number().min(0).max(1),\n    computationTime: z.number().optional(),\n    iterations: z.number().optional(),\n    method: z.string().optional(),\n    guarantees: z.array(z.string()).optional(),\n  }).optional(),\n  sensitivityAnalysis: z.object({\n    id: z.string(),\n    robustness: z.number().min(0).max(1),\n    criticalConstraints: z.array(z.string()),\n    shadowPrices: z.record(z.string(), z.number()).optional(),\n    recommendations: z.array(z.string()),\n  }).optional(),\n\n  // Formal Logic properties (Phase 4, v3.2.0)\n  propositions: z.array(z.object({\n    id: z.string(),\n    symbol: z.string(),\n    statement: z.string(),\n    truthValue: z.boolean().optional(),\n    type: z.enum(['atomic', 'compound']),\n    formula: z.string().optional(),\n  })).optional(),\n  logicalInferences: z.array(z.object({\n    id: z.string(),\n    rule: z.enum(['modus_ponens', 'modus_tollens', 'hypothetical_syllogism', 'disjunctive_syllogism', 'conjunction', 'simplification', 'addition', 'resolution', 'contradiction', 'excluded_middle']),\n    premises: z.array(z.string()),\n    conclusion: z.string(),\n    justification: z.string(),\n    valid: z.boolean(),\n  })).optional(),\n  logicalProof: z.object({\n    id: z.string(),\n    theorem: z.string(),\n    technique: z.enum(['direct', 'contradiction', 'contrapositive', 'cases', 'induction', 'natural_deduction', 'resolution', 'semantic_tableaux']),\n    steps: z.array(z.object({\n      stepNumber: z.number().int().positive(),\n      statement: z.string(),\n      formula: z.string().optional(),\n      justification: z.string(),\n      rule: z.enum(['modus_ponens', 'modus_tollens', 'hypothetical_syllogism', 'disjunctive_syllogism', 'conjunction', 'simplification', 'addition', 'resolution', 'contradiction', 'excluded_middle']).optional(),\n      referencesSteps: z.array(z.number()).optional(),\n      isAssumption: z.boolean().optional(),\n      dischargesAssumption: z.number().optional(),\n    })),\n    conclusion: z.string(),\n    valid: z.boolean(),\n    completeness: z.number().min(0).max(1),\n    assumptions: z.array(z.string()).optional(),\n  }).optional(),\n  truthTable: z.object({\n    id: z.string(),\n    propositions: z.array(z.string()),\n    formula: z.string().optional(),\n    rows: z.array(z.object({\n      rowNumber: z.number().int().positive(),\n      assignments: z.record(z.string(), z.boolean()),\n      result: z.boolean(),\n    })),\n    isTautology: z.boolean(),\n    isContradiction: z.boolean(),\n    isContingent: z.boolean(),\n  }).optional(),\n  satisfiability: z.object({\n    id: z.string(),\n    formula: z.string(),\n    satisfiable: z.boolean(),\n    model: z.record(z.string(), z.boolean()).optional(),\n    method: z.enum(['dpll', 'cdcl', 'resolution', 'truth_table', 'other']),\n    complexity: z.string().optional(),\n    explanation: z.string(),\n  }).optional(),\n\n  action: z.enum(['add_thought', 'summarize', 'export', 'switch_mode', 'get_session', 'recommend_mode', 'delete_session']).default('add_thought'),\n  exportFormat: z.enum(['markdown', 'latex', 'json', 'html', 'jupyter', 'mermaid', 'dot', 'ascii']).optional(),\n  newMode: z.enum(['sequential', 'shannon', 'mathematics', 'physics', 'hybrid', 'inductive', 'deductive', 'abductive', 'causal', 'bayesian', 'counterfactual', 'analogical', 'temporal', 'gametheory', 'evidential', 'firstprinciples', 'systemsthinking', 'scientificmethod', 'optimization', 'formallogic']).optional(),\n  // Mode recommendation parameters (v2.4)\n  problemType: z.string().optional(),\n  problemCharacteristics: z.object({\n    domain: z.string(),\n    complexity: z.enum(['low', 'medium', 'high']),\n    uncertainty: z.enum(['low', 'medium', 'high']),\n    timeDependent: z.boolean(),\n    multiAgent: z.boolean(),\n    requiresProof: z.boolean(),\n    requiresQuantification: z.boolean(),\n    hasIncompleteInfo: z.boolean(),\n    requiresExplanation: z.boolean(),\n    hasAlternatives: z.boolean(),\n  }).optional(),\n  includeCombinations: z.boolean().optional(),\n});\n\nexport type ThinkingToolInput = z.infer<typeof ThinkingToolSchema>;\n\n/**\n * Legacy tool definition - DEPRECATED\n *\n * Use the focused tools instead:\n * - deepthinking_core, deepthinking_mathematics, deepthinking_temporal\n * - deepthinking_probabilistic, deepthinking_causal, deepthinking_strategic\n * - deepthinking_analytical, deepthinking_scientific, deepthinking_session\n *\n * NOTE: This tool accepts a superset of all focused tool properties for backward compatibility.\n * The schema lists all possible properties but most are optional.\n */\nexport const thinkingTool = {\n  name: 'deepthinking',\n  description: '[DEPRECATED] Use deepthinking_* tools instead. Legacy tool supporting 18 reasoning modes with auto-routing to focused tools.',\n  inputSchema: {\n    type: \"object\" as const,\n    properties: {\n      sessionId: { type: \"string\" },\n      mode: {\n        type: \"string\",\n        enum: ['sequential', 'shannon', 'mathematics', 'physics', 'hybrid', 'inductive', 'deductive', 'abductive', 'causal', 'bayesian', 'counterfactual', 'analogical', 'temporal', 'gametheory', 'evidential', 'firstprinciples', 'systemsthinking', 'scientificmethod', 'optimization', 'formallogic'],\n        default: 'hybrid'\n      },\n      thought: { type: \"string\", minLength: 1 },\n      thoughtNumber: { type: \"integer\", minimum: 1 },\n      totalThoughts: { type: \"integer\", minimum: 1 },\n      nextThoughtNeeded: { type: \"boolean\" },\n      isRevision: { type: \"boolean\" },\n      revisesThought: { type: \"string\" },\n      revisionReason: { type: \"string\" },\n      branchFrom: { type: \"string\" },\n      branchId: { type: \"string\" },\n      stage: {\n        type: \"string\",\n        enum: ['problem_definition', 'constraints', 'model', 'proof', 'implementation']\n      },\n      uncertainty: { type: \"number\", minimum: 0, maximum: 1 },\n      dependencies: { type: \"array\", items: { type: \"string\" } },\n      assumptions: { type: \"array\", items: { type: \"string\" } },\n      thoughtType: { type: \"string\" },\n      // Math/Physics properties\n      mathematicalModel: {\n        type: \"object\",\n        properties: {\n          latex: { type: \"string\" },\n          symbolic: { type: \"string\" },\n          ascii: { type: \"string\" }\n        },\n        additionalProperties: false\n      },\n      proofStrategy: {\n        type: \"object\",\n        properties: {\n          type: { type: \"string\", enum: ['direct', 'contradiction', 'induction', 'construction', 'contrapositive'] },\n          steps: { type: \"array\", items: { type: \"string\" } }\n        },\n        additionalProperties: false\n      },\n      tensorProperties: {\n        type: \"object\",\n        properties: {\n          rank: { type: \"array\", items: { type: \"number\" }, minItems: 2, maxItems: 2 },\n          components: { type: \"string\" },\n          latex: { type: \"string\" },\n          symmetries: { type: \"array\", items: { type: \"string\" } },\n          invariants: { type: \"array\", items: { type: \"string\" } },\n          transformation: { type: \"string\", enum: ['covariant', 'contravariant', 'mixed'] }\n        },\n        additionalProperties: false\n      },\n      // All other optional properties from various modes (simplified for legacy compatibility)\n      // Most users should migrate to focused tools for full schema validation\n    },\n    required: [\"thought\", \"thoughtNumber\", \"totalThoughts\", \"nextThoughtNeeded\"],\n    additionalProperties: true  // Allow extra properties for backward compatibility\n  }\n};\n","/**\r\n * Core type definitions for the DeepThinking MCP server v8.5.0\r\n *\r\n * This file contains ONLY:\r\n * - ThinkingMode enum (all 33 mode identifiers)\r\n * - Base types shared by all modes (BaseThought, ShannonStage, ExtendedThoughtType)\r\n * - The fundamental reasoning triad: Inductive, Deductive, Abductive\r\n * - Thought union type (importing from mode-specific files)\r\n * - Type guards\r\n *\r\n * All other mode-specific types are defined in src/types/modes/*.ts\r\n */\r\n\r\n// ============================================================================\r\n// IMPORTS FROM MODE-SPECIFIC FILES\r\n// ============================================================================\r\n\r\n// Core modes\r\nimport type { SequentialThought } from './modes/sequential.js';\r\nimport type { ShannonThought } from './modes/shannon.js';\r\nimport type { MathematicsThought } from './modes/mathematics.js';\r\nimport type { PhysicsThought } from './modes/physics.js';\r\nimport type { HybridThought } from './modes/hybrid.js';\r\n\r\n// Engineering and theory modes\r\nimport type { EngineeringThought } from './modes/engineering.js';\r\nimport type { ComputabilityThought } from './modes/computability.js';\r\nimport type { CryptanalyticThought } from './modes/cryptanalytic.js';\r\nimport type { AlgorithmicThought } from './modes/algorithmic.js';\r\n\r\n// Advanced modes\r\nimport type { MetaReasoningThought } from './modes/metareasoning.js';\r\nimport type { OptimizationThought } from './modes/optimization.js';\r\n\r\n// Causal and probabilistic modes\r\nimport type { CausalThought } from './modes/causal.js';\r\nimport type { BayesianThought } from './modes/bayesian.js';\r\nimport type { CounterfactualThought } from './modes/counterfactual.js';\r\nimport type { TemporalThought } from './modes/temporal.js';\r\nimport type { GameTheoryThought } from './modes/gametheory.js';\r\nimport type { EvidentialThought } from './modes/evidential.js';\r\n\r\n// Analytical modes\r\nimport type { AnalogicalThought } from './modes/analogical.js';\r\nimport type { FirstPrinciplesThought } from './modes/firstprinciples.js';\r\n\r\n// Scientific modes\r\nimport type { SystemsThinkingThought } from './modes/systemsthinking.js';\r\nimport type { ScientificMethodThought } from './modes/scientificmethod.js';\r\nimport type { FormalLogicThought } from './modes/formallogic.js';\r\n\r\n// Academic research modes\r\nimport type { SynthesisThought } from './modes/synthesis.js';\r\nimport type { ArgumentationThought } from './modes/argumentation.js';\r\nimport type { CritiqueThought } from './modes/critique.js';\r\nimport type { AnalysisThought } from './modes/analysis.js';\r\n\r\n// Advanced runtime modes (Phase 10 Sprint 3 v8.4.0)\r\nimport type { RecursiveThought } from './modes/recursive.js';\r\nimport type { ModalThought } from './modes/modal.js';\r\nimport type { StochasticThought } from './modes/stochastic.js';\r\nimport type { ConstraintThought } from './modes/constraint.js';\r\n\r\n// User-defined modes (Phase 10 Sprint 3 v8.4.0)\r\nimport type { CustomThought } from './modes/custom.js';\r\n\r\n// ============================================================================\r\n// THINKING MODE ENUM\r\n// ============================================================================\r\n\r\n/**\r\n * Available thinking modes (33 total)\r\n */\r\nexport enum ThinkingMode {\r\n  // ===== Core Modes =====\r\n  SEQUENTIAL = 'sequential',\r\n  SHANNON = 'shannon',\r\n  MATHEMATICS = 'mathematics',\r\n  PHYSICS = 'physics',\r\n  HYBRID = 'hybrid',\r\n\r\n  // ===== Engineering & Theory Modes =====\r\n  ENGINEERING = 'engineering',\r\n  COMPUTABILITY = 'computability',\r\n  CRYPTANALYTIC = 'cryptanalytic',\r\n  ALGORITHMIC = 'algorithmic',\r\n\r\n  // ===== Advanced Runtime Modes =====\r\n  METAREASONING = 'metareasoning',\r\n  RECURSIVE = 'recursive',\r\n  MODAL = 'modal',\r\n  STOCHASTIC = 'stochastic',\r\n  CONSTRAINT = 'constraint',\r\n  OPTIMIZATION = 'optimization',\r\n\r\n  // ===== Fundamental Reasoning Triad =====\r\n  INDUCTIVE = 'inductive',\r\n  DEDUCTIVE = 'deductive',\r\n  ABDUCTIVE = 'abductive',\r\n\r\n  // ===== Causal & Probabilistic Modes =====\r\n  CAUSAL = 'causal',\r\n  BAYESIAN = 'bayesian',\r\n  COUNTERFACTUAL = 'counterfactual',\r\n  TEMPORAL = 'temporal',\r\n  GAMETHEORY = 'gametheory',\r\n  EVIDENTIAL = 'evidential',\r\n\r\n  // ===== Analytical Modes =====\r\n  ANALOGICAL = 'analogical',\r\n  FIRSTPRINCIPLES = 'firstprinciples',\r\n\r\n  // ===== Scientific Modes =====\r\n  SYSTEMSTHINKING = 'systemsthinking',\r\n  SCIENTIFICMETHOD = 'scientificmethod',\r\n  FORMALLOGIC = 'formallogic',\r\n\r\n  // ===== Academic Research Modes =====\r\n  SYNTHESIS = 'synthesis',\r\n  ARGUMENTATION = 'argumentation',\r\n  CRITIQUE = 'critique',\r\n  ANALYSIS = 'analysis',\r\n\r\n  CUSTOM = 'custom',\r\n}\r\n\r\n// ============================================================================\r\n// MODE CLASSIFICATION\r\n// ============================================================================\r\n\r\n/**\r\n * All modes are fully implemented with specialized handlers (v8.4.0+)\r\n */\r\nexport const FULLY_IMPLEMENTED_MODES: ReadonlyArray<ThinkingMode> = [\r\n  // Core modes\r\n  ThinkingMode.SEQUENTIAL,\r\n  ThinkingMode.SHANNON,\r\n  ThinkingMode.MATHEMATICS,\r\n  ThinkingMode.PHYSICS,\r\n  ThinkingMode.HYBRID,\r\n  // Engineering modes\r\n  ThinkingMode.ENGINEERING,\r\n  ThinkingMode.COMPUTABILITY,\r\n  ThinkingMode.CRYPTANALYTIC,\r\n  ThinkingMode.ALGORITHMIC,\r\n  // Advanced runtime modes\r\n  ThinkingMode.METAREASONING,\r\n  ThinkingMode.RECURSIVE,\r\n  ThinkingMode.MODAL,\r\n  ThinkingMode.STOCHASTIC,\r\n  ThinkingMode.CONSTRAINT,\r\n  ThinkingMode.OPTIMIZATION,\r\n  // Fundamental reasoning modes\r\n  ThinkingMode.INDUCTIVE,\r\n  ThinkingMode.DEDUCTIVE,\r\n  ThinkingMode.ABDUCTIVE,\r\n  // Causal/Temporal modes\r\n  ThinkingMode.CAUSAL,\r\n  ThinkingMode.COUNTERFACTUAL,\r\n  ThinkingMode.TEMPORAL,\r\n  // Probabilistic modes\r\n  ThinkingMode.BAYESIAN,\r\n  ThinkingMode.EVIDENTIAL,\r\n  // Strategic modes\r\n  ThinkingMode.GAMETHEORY,\r\n  // Analytical modes\r\n  ThinkingMode.ANALOGICAL,\r\n  ThinkingMode.FIRSTPRINCIPLES,\r\n  // Scientific modes\r\n  ThinkingMode.SYSTEMSTHINKING,\r\n  ThinkingMode.SCIENTIFICMETHOD,\r\n  ThinkingMode.FORMALLOGIC,\r\n  // Academic research modes\r\n  ThinkingMode.SYNTHESIS,\r\n  ThinkingMode.ARGUMENTATION,\r\n  ThinkingMode.CRITIQUE,\r\n  ThinkingMode.ANALYSIS,\r\n];\r\n\r\n/**\r\n * @deprecated All modes are now fully implemented. Kept for backward compatibility.\r\n */\r\nexport const EXPERIMENTAL_MODES: ReadonlyArray<ThinkingMode> = [];\r\n\r\n/**\r\n * Check if a mode is fully implemented\r\n */\r\nexport function isFullyImplemented(mode: ThinkingMode): boolean {\r\n  return FULLY_IMPLEMENTED_MODES.includes(mode);\r\n}\r\n\r\n// ============================================================================\r\n// SHARED ENUMS AND TYPES\r\n// ============================================================================\r\n\r\n/**\r\n * Shannon methodology stages (used by Shannon and Hybrid modes)\r\n */\r\nexport enum ShannonStage {\r\n  PROBLEM_DEFINITION = 'problem_definition',\r\n  CONSTRAINTS = 'constraints',\r\n  MODEL = 'model',\r\n  PROOF = 'proof',\r\n  IMPLEMENTATION = 'implementation',\r\n}\r\n\r\n/**\r\n * Extended thought types for mathematical and physics reasoning\r\n */\r\nexport type ExtendedThoughtType =\r\n  | 'problem_definition'\r\n  | 'constraints'\r\n  | 'model'\r\n  | 'proof'\r\n  | 'implementation'\r\n  | 'axiom_definition'\r\n  | 'theorem_statement'\r\n  | 'proof_construction'\r\n  | 'lemma_derivation'\r\n  | 'corollary'\r\n  | 'counterexample'\r\n  | 'algebraic_manipulation'\r\n  | 'symbolic_computation'\r\n  | 'numerical_analysis'\r\n  | 'symmetry_analysis'\r\n  | 'gauge_theory'\r\n  | 'field_equations'\r\n  | 'lagrangian'\r\n  | 'hamiltonian'\r\n  | 'conservation_law'\r\n  | 'dimensional_analysis'\r\n  | 'tensor_formulation'\r\n  | 'differential_geometry'\r\n  | 'decomposition'\r\n  | 'synthesis'\r\n  | 'abstraction'\r\n  | 'analogy'\r\n  | 'metacognition'\r\n  // Phase 8: Proof Decomposition Types\r\n  | 'proof_decomposition'\r\n  | 'dependency_analysis'\r\n  | 'consistency_check'\r\n  | 'gap_identification'\r\n  | 'assumption_trace'\r\n  // Phase 10: Hybrid Mode Types\r\n  | 'mode_selection'\r\n  | 'parallel_analysis'\r\n  | 'sequential_analysis'\r\n  | 'convergence_check'\r\n  | 'confidence_assessment'\r\n  | 'mode_switching';\r\n\r\n// ============================================================================\r\n// BASE THOUGHT INTERFACE\r\n// ============================================================================\r\n\r\n/**\r\n * Base thought interface - all mode-specific thoughts extend this\r\n */\r\nexport interface BaseThought {\r\n  id: string;\r\n  sessionId: string;\r\n  thoughtNumber: number;\r\n  totalThoughts: number;\r\n  content: string;\r\n  timestamp: Date;\r\n  mode: ThinkingMode;\r\n  nextThoughtNeeded: boolean;\r\n  isRevision?: boolean;\r\n  revisesThought?: string;\r\n  tags?: string[];\r\n  importance?: number;\r\n}\r\n\r\n// ============================================================================\r\n// FUNDAMENTAL REASONING TRIAD\r\n// These are the three foundational reasoning modes that other modes build upon\r\n// ============================================================================\r\n\r\n// ----- INDUCTIVE REASONING -----\r\n\r\n/**\r\n * Inductive reasoning thought\r\n * Reasoning from specific observations to general principles\r\n */\r\nexport interface InductiveThought extends BaseThought {\r\n  mode: ThinkingMode.INDUCTIVE;\r\n  observations: string[]; // Specific cases observed\r\n  pattern?: string; // Identified pattern\r\n  generalization: string; // General principle formed\r\n  confidence: number; // 0-1: Strength of inference\r\n  counterexamples?: string[]; // Known exceptions\r\n  sampleSize?: number; // Number of observations\r\n}\r\n\r\n// ----- DEDUCTIVE REASONING -----\r\n\r\n/**\r\n * Deductive reasoning thought\r\n * Reasoning from general principles to specific conclusions\r\n */\r\nexport interface DeductiveThought extends BaseThought {\r\n  mode: ThinkingMode.DEDUCTIVE;\r\n  premises: string[]; // General principles\r\n  conclusion: string; // Specific conclusion\r\n  logicForm?: string; // e.g., \"modus ponens\", \"modus tollens\"\r\n  validityCheck: boolean; // Is the deduction logically valid?\r\n  soundnessCheck?: boolean; // Are the premises true?\r\n}\r\n\r\n// ----- ABDUCTIVE REASONING -----\r\n\r\n/**\r\n * Observation requiring explanation\r\n */\r\nexport interface Observation {\r\n  id: string;\r\n  description: string;\r\n  timestamp?: string;\r\n  confidence: number; // 0-1\r\n}\r\n\r\n/**\r\n * Hypothesis explaining observations\r\n */\r\nexport interface Hypothesis {\r\n  id: string;\r\n  explanation: string;\r\n  assumptions: string[];\r\n  predictions: string[];\r\n  score: number; // Overall ranking score\r\n}\r\n\r\n/**\r\n * Evidence supporting or refuting hypotheses\r\n */\r\nexport interface Evidence {\r\n  hypothesisId: string;\r\n  type: 'supporting' | 'contradicting' | 'neutral';\r\n  description: string;\r\n  strength: number; // 0-1\r\n}\r\n\r\n/**\r\n * Criteria for evaluating hypotheses\r\n */\r\nexport interface EvaluationCriteria {\r\n  parsimony: number; // Simplicity score (0-1)\r\n  explanatoryPower: number; // How well it explains observations (0-1)\r\n  plausibility: number; // Prior probability (0-1)\r\n  testability: boolean; // Can it be tested?\r\n}\r\n\r\n/**\r\n * Abductive reasoning thought\r\n * Inference to the best explanation\r\n */\r\nexport interface AbductiveThought extends BaseThought {\r\n  mode: ThinkingMode.ABDUCTIVE;\r\n  observations: Observation[];\r\n  hypotheses: Hypothesis[];\r\n  currentHypothesis?: Hypothesis;\r\n  evaluationCriteria: EvaluationCriteria;\r\n  evidence: Evidence[];\r\n  bestExplanation?: Hypothesis;\r\n}\r\n\r\n// ============================================================================\r\n// THOUGHT UNION TYPE\r\n// ============================================================================\r\n\r\n/**\r\n * Union type of all thought types\r\n */\r\nexport type Thought =\r\n  // Core modes\r\n  | SequentialThought\r\n  | ShannonThought\r\n  | MathematicsThought\r\n  | PhysicsThought\r\n  | HybridThought\r\n  // Engineering and theory\r\n  | EngineeringThought\r\n  | ComputabilityThought\r\n  | CryptanalyticThought\r\n  | AlgorithmicThought\r\n  // Fundamental triad (defined in this file)\r\n  | InductiveThought\r\n  | DeductiveThought\r\n  | AbductiveThought\r\n  // Causal and probabilistic\r\n  | CausalThought\r\n  | BayesianThought\r\n  | CounterfactualThought\r\n  | TemporalThought\r\n  | GameTheoryThought\r\n  | EvidentialThought\r\n  // Analytical\r\n  | AnalogicalThought\r\n  | FirstPrinciplesThought\r\n  // Scientific\r\n  | SystemsThinkingThought\r\n  | ScientificMethodThought\r\n  | OptimizationThought\r\n  | FormalLogicThought\r\n  // Academic research\r\n  | SynthesisThought\r\n  | ArgumentationThought\r\n  | CritiqueThought\r\n  | AnalysisThought\r\n  // Meta\r\n  | MetaReasoningThought\r\n  // Advanced runtime (Phase 10 Sprint 3 v8.4.0)\r\n  | RecursiveThought\r\n  | ModalThought\r\n  | StochasticThought\r\n  | ConstraintThought\r\n  // User-defined\r\n  | CustomThought;\r\n\r\n// ============================================================================\r\n// TYPE GUARDS\r\n// ============================================================================\r\n\r\n// ----- Fundamental Triad -----\r\n\r\nexport function isInductiveThought(thought: Thought): thought is InductiveThought {\r\n  return thought.mode === ThinkingMode.INDUCTIVE;\r\n}\r\n\r\nexport function isDeductiveThought(thought: Thought): thought is DeductiveThought {\r\n  return thought.mode === ThinkingMode.DEDUCTIVE;\r\n}\r\n\r\nexport function isAbductiveThought(thought: Thought): thought is AbductiveThought {\r\n  return thought.mode === ThinkingMode.ABDUCTIVE;\r\n}\r\n\r\n// ----- Core Modes -----\r\n\r\nexport function isSequentialThought(thought: Thought): thought is SequentialThought {\r\n  return thought.mode === ThinkingMode.SEQUENTIAL;\r\n}\r\n\r\nexport function isShannonThought(thought: Thought): thought is ShannonThought {\r\n  return thought.mode === ThinkingMode.SHANNON;\r\n}\r\n\r\nexport function isMathematicsThought(thought: Thought): thought is MathematicsThought {\r\n  return thought.mode === ThinkingMode.MATHEMATICS;\r\n}\r\n\r\nexport function isPhysicsThought(thought: Thought): thought is PhysicsThought {\r\n  return thought.mode === ThinkingMode.PHYSICS;\r\n}\r\n\r\nexport function isHybridThought(thought: Thought): thought is HybridThought {\r\n  return thought.mode === ThinkingMode.HYBRID;\r\n}\r\n\r\n// ----- Engineering & Theory -----\r\n\r\nexport function isEngineeringThought(thought: Thought): thought is EngineeringThought {\r\n  return thought.mode === ThinkingMode.ENGINEERING;\r\n}\r\n\r\nexport function isComputabilityThought(thought: Thought): thought is ComputabilityThought {\r\n  return thought.mode === ThinkingMode.COMPUTABILITY;\r\n}\r\n\r\nexport function isCryptanalyticThought(thought: Thought): thought is CryptanalyticThought {\r\n  return thought.mode === ThinkingMode.CRYPTANALYTIC;\r\n}\r\n\r\nexport function isAlgorithmicThought(thought: Thought): thought is AlgorithmicThought {\r\n  return thought.mode === ThinkingMode.ALGORITHMIC;\r\n}\r\n\r\n// ----- Advanced Modes -----\r\n\r\nexport function isMetaReasoningThought(thought: Thought): thought is MetaReasoningThought {\r\n  return thought.mode === ThinkingMode.METAREASONING;\r\n}\r\n\r\nexport function isOptimizationThought(thought: Thought): thought is OptimizationThought {\r\n  return thought.mode === ThinkingMode.OPTIMIZATION;\r\n}\r\n\r\n// ----- Causal & Probabilistic -----\r\n\r\nexport function isCausalThought(thought: Thought): thought is CausalThought {\r\n  return thought.mode === ThinkingMode.CAUSAL;\r\n}\r\n\r\nexport function isBayesianThought(thought: Thought): thought is BayesianThought {\r\n  return thought.mode === ThinkingMode.BAYESIAN;\r\n}\r\n\r\nexport function isCounterfactualThought(thought: Thought): thought is CounterfactualThought {\r\n  return thought.mode === ThinkingMode.COUNTERFACTUAL;\r\n}\r\n\r\nexport function isTemporalThought(thought: Thought): thought is TemporalThought {\r\n  return thought.mode === ThinkingMode.TEMPORAL;\r\n}\r\n\r\nexport function isGameTheoryThought(thought: Thought): thought is GameTheoryThought {\r\n  return thought.mode === ThinkingMode.GAMETHEORY;\r\n}\r\n\r\nexport function isEvidentialThought(thought: Thought): thought is EvidentialThought {\r\n  return thought.mode === ThinkingMode.EVIDENTIAL;\r\n}\r\n\r\n// ----- Analytical -----\r\n\r\nexport function isAnalogicalThought(thought: Thought): thought is AnalogicalThought {\r\n  return thought.mode === ThinkingMode.ANALOGICAL;\r\n}\r\n\r\nexport function isFirstPrinciplesThought(thought: Thought): thought is FirstPrinciplesThought {\r\n  return thought.mode === ThinkingMode.FIRSTPRINCIPLES;\r\n}\r\n\r\n// ----- Scientific -----\r\n\r\nexport function isSystemsThinkingThought(thought: Thought): thought is SystemsThinkingThought {\r\n  return thought.mode === ThinkingMode.SYSTEMSTHINKING;\r\n}\r\n\r\nexport function isScientificMethodThought(thought: Thought): thought is ScientificMethodThought {\r\n  return thought.mode === ThinkingMode.SCIENTIFICMETHOD;\r\n}\r\n\r\nexport function isFormalLogicThought(thought: Thought): thought is FormalLogicThought {\r\n  return thought.mode === ThinkingMode.FORMALLOGIC;\r\n}\r\n\r\n// ----- Academic Research -----\r\n\r\nexport function isSynthesisThought(thought: Thought): thought is SynthesisThought {\r\n  return thought.mode === ThinkingMode.SYNTHESIS;\r\n}\r\n\r\nexport function isArgumentationThought(thought: Thought): thought is ArgumentationThought {\r\n  return thought.mode === ThinkingMode.ARGUMENTATION;\r\n}\r\n\r\nexport function isCritiqueThought(thought: Thought): thought is CritiqueThought {\r\n  return thought.mode === ThinkingMode.CRITIQUE;\r\n}\r\n\r\nexport function isAnalysisThought(thought: Thought): thought is AnalysisThought {\r\n  return thought.mode === ThinkingMode.ANALYSIS;\r\n}\r\n\r\n// ----- Advanced Runtime (Phase 10 Sprint 3 v8.4.0) -----\r\n\r\nexport function isRecursiveThought(thought: Thought): thought is RecursiveThought {\r\n  return thought.mode === ThinkingMode.RECURSIVE;\r\n}\r\n\r\nexport function isModalThought(thought: Thought): thought is ModalThought {\r\n  return thought.mode === ThinkingMode.MODAL;\r\n}\r\n\r\nexport function isStochasticThought(thought: Thought): thought is StochasticThought {\r\n  return thought.mode === ThinkingMode.STOCHASTIC;\r\n}\r\n\r\nexport function isConstraintThought(thought: Thought): thought is ConstraintThought {\r\n  return thought.mode === ThinkingMode.CONSTRAINT;\r\n}\r\n\r\n// ----- User-Defined -----\r\n\r\nexport function isCustomThought(thought: Thought): thought is CustomThought {\r\n  return thought.mode === ThinkingMode.CUSTOM;\r\n}\r\n\r\n// ============================================================================\r\n// RE-EXPORTS FROM MODE FILES\r\n// This allows importing everything from core.ts for backwards compatibility\r\n// ============================================================================\r\n\r\n// Re-export thought types\r\nexport type {\r\n  SequentialThought,\r\n  ShannonThought,\r\n  MathematicsThought,\r\n  PhysicsThought,\r\n  HybridThought,\r\n  EngineeringThought,\r\n  ComputabilityThought,\r\n  CryptanalyticThought,\r\n  AlgorithmicThought,\r\n  MetaReasoningThought,\r\n  OptimizationThought,\r\n  CausalThought,\r\n  BayesianThought,\r\n  CounterfactualThought,\r\n  TemporalThought,\r\n  GameTheoryThought,\r\n  EvidentialThought,\r\n  AnalogicalThought,\r\n  FirstPrinciplesThought,\r\n  SystemsThinkingThought,\r\n  ScientificMethodThought,\r\n  FormalLogicThought,\r\n  SynthesisThought,\r\n  ArgumentationThought,\r\n  CritiqueThought,\r\n  AnalysisThought,\r\n  // Advanced runtime (Phase 10 Sprint 3 v8.4.0)\r\n  RecursiveThought,\r\n  ModalThought,\r\n  StochasticThought,\r\n  ConstraintThought,\r\n  // User-defined\r\n  CustomThought,\r\n};\r\n","/**\n * Session types for managing thinking sessions\n */\n\nimport { Thought, ThinkingMode } from './core.js';\n\n/**\n * Thinking session\n */\nexport interface ThinkingSession {\n  // Identification\n  id: string;\n  title: string;\n  \n  // Configuration\n  mode: ThinkingMode;\n  domain?: string;\n  config: SessionConfig;\n  \n  // Content\n  thoughts: Thought[];\n  \n  // Metadata\n  createdAt: Date;\n  updatedAt: Date;\n  author?: string;\n  \n  // State\n  currentThoughtNumber: number;\n  isComplete: boolean;\n  \n  // Analytics\n  metrics: SessionMetrics;\n  \n  // Optional features\n  collaborators?: string[];\n  tags?: string[];\n  attachments?: Attachment[];\n}\n\n/**\n * Session configuration\n */\nexport interface SessionConfig {\n  // Mode-specific settings\n  modeConfig: ModeConfig;\n  \n  // Feature flags\n  enableAutoSave: boolean;\n  enableValidation: boolean;\n  enableVisualization: boolean;\n  \n  // Integration settings\n  integrations: {\n    mathMcp?: { url: string; enabled: boolean };\n    wolfram?: { appId: string; enabled: boolean };\n    arxiv?: { enabled: boolean };\n  };\n  \n  // Export preferences\n  exportFormats: ExportFormat[];\n  autoExportOnComplete: boolean;\n  \n  // Performance settings\n  maxThoughtsInMemory: number;\n  compressionThreshold: number;\n}\n\n/**\n * Mode-specific configuration\n */\nexport interface ModeConfig {\n  mode: ThinkingMode;\n  strictValidation?: boolean;\n  allowModeSwitch?: boolean;\n  customSettings?: Record<string, unknown>;\n}\n\n/**\n * Session metrics\n */\nexport interface SessionMetrics {\n  totalThoughts: number;\n  thoughtsByType: Record<string, number>;\n  averageUncertainty: number;\n  revisionCount: number;\n  timeSpent: number;\n  dependencyDepth: number;\n  customMetrics: Map<string, unknown>;\n\n  // Validation cache statistics\n  cacheStats?: {\n    hits: number;\n    misses: number;\n    hitRate: number;\n    size: number;\n    maxSize: number;\n  };\n\n  // Running totals for incremental calculation (internal use)\n  // These fields are internal implementation details for O(1) average calculation\n  _uncertaintySum?: number;\n  _uncertaintyCount?: number;\n}\n\n/**\n * Session metadata for listings\n */\nexport interface SessionMetadata {\n  id: string;\n  title: string;\n  createdAt: Date;\n  updatedAt: Date;\n  thoughtCount: number;\n  mode: ThinkingMode;\n  isComplete: boolean;\n}\n\n/**\n * Export formats\n */\nexport type ExportFormat = 'markdown' | 'latex' | 'json' | 'html' | 'jupyter' | 'mermaid';\n\n/**\n * Attachment\n */\nexport interface Attachment {\n  id: string;\n  filename: string;\n  mimeType: string;\n  size: number;\n  url?: string;\n  data?: Buffer;\n}\n\n/**\n * Validation result\n */\nexport interface ValidationResult {\n  isValid: boolean;\n  confidence: number;\n  \n  issues: ValidationIssue[];\n  \n  strengthMetrics: {\n    logicalSoundness: number;\n    empiricalSupport: number;\n    mathematicalRigor: number;\n    physicalConsistency?: number;\n  };\n  \n  tensorValidation?: {\n    rankCorrect: boolean;\n    symmetriesVerified: boolean;\n    invariantsChecked: boolean;\n    dimensionsConsistent: boolean;\n  };\n  \n  suggestions?: string[];\n}\n\n/**\n * Validation issue\n */\nexport interface ValidationIssue {\n  severity: 'error' | 'warning' | 'info';\n  thoughtNumber: number;\n  description: string;\n  suggestion: string;\n  category: 'logical' | 'mathematical' | 'physical' | 'structural' | 'completeness' | 'interpretation';\n}\n","/**\n * ModeHandler Interface - Phase 10 Sprint 1 (v8.0.0)\n *\n * Defines the contract for mode-specific thought creation handlers.\n * Part of the Strategy Pattern to replace ThoughtFactory's switch statement.\n *\n * Each mode handler encapsulates:\n * - Thought creation logic for a specific mode\n * - Mode-specific validation\n * - Optional enhancements (suggestions, warnings, etc.)\n */\n\nimport type { ThinkingMode, Thought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\n\n/**\n * Result of mode-specific validation\n */\nexport interface ValidationResult {\n  /** Whether the input is valid */\n  valid: boolean;\n  /** Validation errors if any */\n  errors: ValidationError[];\n  /** Non-blocking warnings */\n  warnings: ValidationWarning[];\n}\n\n/**\n * Validation error detail\n */\nexport interface ValidationError {\n  /** Which field has the error */\n  field: string;\n  /** Error message */\n  message: string;\n  /** Error code for programmatic handling */\n  code: string;\n}\n\n/**\n * Validation warning detail\n */\nexport interface ValidationWarning {\n  /** Which field triggered the warning */\n  field: string;\n  /** Warning message */\n  message: string;\n  /** Suggestion for improvement */\n  suggestion?: string;\n}\n\n/**\n * Detected archetype information for systems thinking\n */\nexport interface DetectedArchetype {\n  name: string;\n  confidence: number;\n  matchedPatterns: string[];\n}\n\n/**\n * Mode-specific enhancements to include in responses\n */\nexport interface ModeEnhancements {\n  /** Suggestions for improving the thought */\n  suggestions?: string[];\n  /** Related modes that might be useful */\n  relatedModes?: ThinkingMode[];\n  /** Mode-specific metrics or scores (can be numeric or descriptive) */\n  metrics?: Record<string, number | string>;\n  /** Guiding questions for the next thought */\n  guidingQuestions?: string[];\n  /** Warnings about potential issues */\n  warnings?: string[];\n  /** Mental models relevant to this mode */\n  mentalModels?: string[];\n  /** Socratic questions for critique mode (by category) */\n  socraticQuestions?: Record<string, string[]>;\n  /** Detected archetypes for systems thinking mode */\n  detectedArchetypes?: DetectedArchetype[];\n}\n\n/**\n * ModeHandler Interface\n *\n * Implement this interface to create a specialized handler for a thinking mode.\n * Handlers are registered with ModeHandlerRegistry for use by ThoughtFactory.\n *\n * @example\n * ```typescript\n * class CausalHandler implements ModeHandler {\n *   readonly mode = ThinkingMode.CAUSAL;\n *\n *   createThought(input: ThinkingToolInput, sessionId: string): CausalThought {\n *     // Mode-specific thought creation\n *   }\n *\n *   validate(input: ThinkingToolInput): ValidationResult {\n *     // Validate causal graph structure, detect cycles, etc.\n *   }\n * }\n * ```\n */\nexport interface ModeHandler {\n  /**\n   * The thinking mode this handler processes\n   */\n  readonly mode: ThinkingMode;\n\n  /**\n   * Human-readable name for the mode\n   */\n  readonly modeName: string;\n\n  /**\n   * Brief description of what this mode does\n   */\n  readonly description: string;\n\n  /**\n   * Create a thought object from input\n   *\n   * @param input - Validated input from MCP tool\n   * @param sessionId - Session this thought belongs to\n   * @returns Typed thought object for the mode\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): Thought;\n\n  /**\n   * Validate mode-specific input\n   *\n   * Performs semantic validation beyond schema validation.\n   * For example: checking causal graph for cycles, validating\n   * probability values sum to 1, etc.\n   *\n   * @param input - Input to validate\n   * @returns Validation result with errors and warnings\n   */\n  validate(input: ThinkingToolInput): ValidationResult;\n\n  /**\n   * Get mode-specific enhancements for a thought\n   *\n   * Optional method to provide additional context, suggestions,\n   * or guidance based on the created thought.\n   *\n   * @param thought - The created thought\n   * @returns Enhancements to include in response\n   */\n  getEnhancements?(thought: Thought): ModeEnhancements;\n\n  /**\n   * Check if this handler supports a specific thought type\n   *\n   * Some modes have sub-types (e.g., mathematics has proof_decomposition,\n   * dependency_analysis, etc.). This method checks if a specific\n   * thought type is supported.\n   *\n   * @param thoughtType - The thought type to check\n   * @returns true if supported\n   */\n  supportsThoughtType?(thoughtType: string): boolean;\n}\n\n/**\n * Mode status information for API transparency\n *\n * Included in API responses to inform users about the\n * implementation status of the mode they're using.\n */\nexport interface ModeStatus {\n  /** The mode being used */\n  mode: ThinkingMode;\n  /** Whether this mode has full implementation */\n  isFullyImplemented: boolean;\n  /** Whether this mode has a specialized handler */\n  hasSpecializedHandler: boolean;\n  /** Note about the mode's status */\n  note?: string;\n  /** List of supported thought types */\n  supportedThoughtTypes?: string[];\n}\n\n/**\n * Create a successful validation result\n */\nexport function validationSuccess(warnings: ValidationWarning[] = []): ValidationResult {\n  return {\n    valid: true,\n    errors: [],\n    warnings,\n  };\n}\n\n/**\n * Create a failed validation result\n */\nexport function validationFailure(\n  errors: ValidationError[],\n  warnings: ValidationWarning[] = []\n): ValidationResult {\n  return {\n    valid: false,\n    errors,\n    warnings,\n  };\n}\n\n/**\n * Create a validation error\n */\nexport function createValidationError(\n  field: string,\n  message: string,\n  code: string\n): ValidationError {\n  return { field, message, code };\n}\n\n/**\n * Create a validation warning\n */\nexport function createValidationWarning(\n  field: string,\n  message: string,\n  suggestion?: string\n): ValidationWarning {\n  return { field, message, suggestion };\n}\n","/**\r\n * Mode Recommendation System (v2.4)\r\n * Intelligent system to recommend which reasoning modes to use based on problem characteristics\r\n */\r\n\r\nimport { ThinkingMode } from '../core.js';\r\n\r\nexport interface ProblemCharacteristics {\r\n  domain: string;\r\n  complexity: 'low' | 'medium' | 'high';\r\n  uncertainty: 'low' | 'medium' | 'high';\r\n  timeDependent: boolean;\r\n  multiAgent: boolean;\r\n  requiresProof: boolean;\r\n  requiresQuantification: boolean;\r\n  hasIncompleteInfo: boolean;\r\n  requiresExplanation: boolean;\r\n  hasAlternatives: boolean;\r\n}\r\n\r\nexport interface ModeRecommendation {\r\n  mode: ThinkingMode;\r\n  score: number; // 0-1, how well suited\r\n  reasoning: string;\r\n  strengths: string[];\r\n  limitations: string[];\r\n  examples: string[];\r\n}\r\n\r\nexport interface CombinationRecommendation {\r\n  modes: ThinkingMode[];\r\n  sequence: 'parallel' | 'sequential' | 'hybrid';\r\n  rationale: string;\r\n  benefits: string[];\r\n  synergies: string[];\r\n}\r\n\r\nexport class ModeRecommender {\r\n  /**\r\n   * Recommends reasoning modes based on problem characteristics\r\n   * Returns modes ranked by suitability score\r\n   */\r\n  recommendModes(characteristics: ProblemCharacteristics): ModeRecommendation[] {\r\n    const recommendations: ModeRecommendation[] = [];\r\n\r\n    // Core reasoning modes - prioritize for philosophical/metaphysical domains\r\n    const isPhilosophical = characteristics.domain.toLowerCase().includes('metaphysics') ||\r\n                           characteristics.domain.toLowerCase().includes('theology') ||\r\n                           characteristics.domain.toLowerCase().includes('philosophy') ||\r\n                           characteristics.domain.toLowerCase().includes('epistemology') ||\r\n                           characteristics.domain.toLowerCase().includes('ethics');\r\n\r\n    // Hybrid mode - for complex multi-faceted problems\r\n    if (characteristics.complexity === 'high' &&\r\n        (characteristics.requiresExplanation || characteristics.hasAlternatives || isPhilosophical)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.HYBRID,\r\n        score: 0.92,\r\n        reasoning: 'Complex problem benefits from multi-modal synthesis combining inductive, deductive, and abductive reasoning',\r\n        strengths: ['Comprehensive analysis', 'Combines empirical and logical approaches', 'Maximum evidential strength', 'Convergent validation'],\r\n        limitations: ['Time-intensive', 'Requires understanding of multiple reasoning types'],\r\n        examples: ['Philosophical arguments', 'Scientific theories', 'Complex decision-making', 'Metaphysical questions'],\r\n      });\r\n    }\r\n\r\n    // Inductive reasoning - pattern recognition and generalization\r\n    if (!characteristics.requiresProof &&\r\n        (characteristics.requiresQuantification || characteristics.hasIncompleteInfo || isPhilosophical)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.INDUCTIVE,\r\n        score: isPhilosophical ? 0.85 : 0.80,\r\n        reasoning: 'Problem requires pattern recognition and generalization from observations',\r\n        strengths: ['Empirical grounding', 'Pattern detection', 'Probabilistic reasoning', 'Scientific discovery'],\r\n        limitations: ['Cannot prove with certainty', 'Vulnerable to black swans', 'Sample size dependent'],\r\n        examples: ['Scientific hypotheses', 'Trend analysis', 'Empirical arguments', 'Data-driven insights'],\r\n      });\r\n    }\r\n\r\n    // Deductive reasoning - logical derivation from principles\r\n    if (characteristics.requiresProof || isPhilosophical) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.DEDUCTIVE,\r\n        score: characteristics.requiresProof ? 0.90 : 0.75,\r\n        reasoning: 'Problem requires logical derivation from general principles to specific conclusions',\r\n        strengths: ['Logical validity', 'Rigorous inference', 'Exposes contradictions', 'Formal reasoning'],\r\n        limitations: ['Soundness depends on premise truth', 'Vulnerable to definitional disputes', 'May not handle uncertainty well'],\r\n        examples: ['Logical proofs', 'Mathematical theorems', 'Philosophical arguments', 'Formal verification'],\r\n      });\r\n    }\r\n\r\n    // Abductive reasoning - inference to best explanation\r\n    if (characteristics.requiresExplanation || isPhilosophical) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.ABDUCTIVE,\r\n        score: isPhilosophical ? 0.90 : 0.87,\r\n        reasoning: 'Problem requires finding best explanations through comparative hypothesis evaluation',\r\n        strengths: ['Hypothesis generation', 'Comparative evaluation', 'Explanatory power assessment', 'Handles competing theories'],\r\n        limitations: ['May miss non-obvious explanations', 'Explanatory power is subjective'],\r\n        examples: ['Scientific explanation', 'Debugging', 'Diagnosis', 'Theory selection', 'Metaphysical arguments'],\r\n      });\r\n    }\r\n\r\n    // Meta-reasoning - reasoning about reasoning itself\r\n    if (characteristics.complexity === 'high' ||\r\n        (characteristics.hasAlternatives && characteristics.uncertainty === 'high')) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.METAREASONING,\r\n        score: characteristics.complexity === 'high' ? 0.88 : 0.82,\r\n        reasoning: 'Complex or uncertain problems benefit from strategic monitoring and adaptive reasoning',\r\n        strengths: ['Strategy evaluation', 'Mode switching recommendations', 'Quality monitoring', 'Resource allocation', 'Self-reflection'],\r\n        limitations: ['Meta-level overhead', 'Requires understanding of other modes', 'May not directly solve the problem'],\r\n        examples: ['Strategy selection', 'Debugging stuck reasoning', 'Quality assessment', 'Adaptive problem-solving'],\r\n      });\r\n    }\r\n\r\n    // Temporal reasoning\r\n    if (characteristics.timeDependent) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.TEMPORAL,\r\n        score: 0.9,\r\n        reasoning: 'Problem involves time-dependent events and sequences',\r\n        strengths: ['Event sequencing', 'Temporal causality', 'Timeline construction'],\r\n        limitations: ['Limited strategic reasoning'],\r\n        examples: ['Process modeling', 'Event correlation', 'Timeline debugging'],\r\n      });\r\n    }\r\n\r\n    // Game theory\r\n    if (characteristics.multiAgent) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.GAMETHEORY,\r\n        score: 0.85,\r\n        reasoning: 'Problem involves strategic interactions between agents',\r\n        strengths: ['Equilibrium analysis', 'Strategic reasoning', 'Multi-agent dynamics'],\r\n        limitations: ['Assumes rationality', 'Complex computations'],\r\n        examples: ['Competitive analysis', 'Auction design', 'Negotiation'],\r\n      });\r\n    }\r\n\r\n    // Evidential reasoning\r\n    if (characteristics.hasIncompleteInfo && characteristics.uncertainty === 'high' && !isPhilosophical) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.EVIDENTIAL,\r\n        score: 0.82,\r\n        reasoning: 'Problem has incomplete information and high uncertainty requiring Dempster-Shafer belief functions',\r\n        strengths: ['Handles ignorance', 'Evidence combination', 'Uncertainty intervals'],\r\n        limitations: ['Computational complexity', 'Requires careful mass assignment', 'Better for sensor fusion than philosophical reasoning'],\r\n        examples: ['Sensor fusion', 'Diagnostic reasoning', 'Intelligence analysis'],\r\n      });\r\n    }\r\n\r\n    // Causal reasoning\r\n    if (characteristics.timeDependent && characteristics.requiresExplanation) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.CAUSAL,\r\n        score: 0.86,\r\n        reasoning: 'Problem requires understanding cause-effect relationships',\r\n        strengths: ['Intervention analysis', 'Causal graphs', 'Impact assessment'],\r\n        limitations: ['Requires domain knowledge', 'Difficult to identify confounders'],\r\n        examples: ['Impact analysis', 'System design', 'Policy evaluation'],\r\n      });\r\n    }\r\n\r\n    // Bayesian reasoning\r\n    if (characteristics.requiresQuantification && characteristics.uncertainty !== 'low') {\r\n      recommendations.push({\r\n        mode: ThinkingMode.BAYESIAN,\r\n        score: 0.84,\r\n        reasoning: 'Problem requires probabilistic reasoning with evidence updates',\r\n        strengths: ['Principled uncertainty', 'Evidence integration', 'Prior knowledge'],\r\n        limitations: ['Requires probability estimates', 'Computationally intensive'],\r\n        examples: ['A/B testing', 'Risk assessment', 'Predictive modeling'],\r\n      });\r\n    }\r\n\r\n    // Counterfactual reasoning\r\n    if (characteristics.hasAlternatives) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.COUNTERFACTUAL,\r\n        score: 0.82,\r\n        reasoning: 'Problem benefits from analyzing alternative scenarios',\r\n        strengths: ['What-if analysis', 'Post-mortem insights', 'Decision comparison'],\r\n        limitations: ['Speculative', 'Difficult to validate'],\r\n        examples: ['Post-mortems', 'Strategic planning', 'Architecture decisions'],\r\n      });\r\n    }\r\n\r\n    // Analogical reasoning\r\n    if (characteristics.complexity === 'high' && characteristics.requiresExplanation) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.ANALOGICAL,\r\n        score: 0.80,\r\n        reasoning: 'Problem can benefit from cross-domain analogies',\r\n        strengths: ['Creative insights', 'Knowledge transfer', 'Pattern recognition'],\r\n        limitations: ['Analogies may be superficial', 'Requires diverse knowledge'],\r\n        examples: ['Novel problem solving', 'Design thinking', 'Innovation'],\r\n      });\r\n    }\r\n\r\n    // Mathematical reasoning\r\n    if (characteristics.requiresProof) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.MATHEMATICS,\r\n        score: 0.95,\r\n        reasoning: 'Problem requires formal proofs and symbolic reasoning',\r\n        strengths: ['Rigorous proofs', 'Symbolic computation', 'Theorem proving'],\r\n        limitations: ['Limited to mathematical domains'],\r\n        examples: ['Algorithm correctness', 'Complexity analysis', 'Formal verification'],\r\n      });\r\n    }\r\n\r\n    // Physics reasoning\r\n    if (characteristics.domain === 'physics' || characteristics.domain === 'engineering') {\r\n      recommendations.push({\r\n        mode: ThinkingMode.PHYSICS,\r\n        score: 0.90,\r\n        reasoning: 'Problem involves physical systems or tensor mathematics',\r\n        strengths: ['Field theory', 'Conservation laws', 'Tensor analysis'],\r\n        limitations: ['Specialized to physics domains'],\r\n        examples: ['Physical modeling', 'System dynamics', 'Engineering analysis'],\r\n      });\r\n    }\r\n\r\n    // Shannon methodology\r\n    if (characteristics.complexity === 'high' && characteristics.requiresProof) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.SHANNON,\r\n        score: 0.88,\r\n        reasoning: 'Complex problem requiring systematic decomposition',\r\n        strengths: ['Systematic approach', 'Problem decomposition', 'Rigorous analysis'],\r\n        limitations: ['Time-intensive', 'Requires discipline'],\r\n        examples: ['Complex system design', 'Research problems', 'Novel algorithms'],\r\n      });\r\n    }\r\n\r\n    // ===== NEW MODES (v7.2.0) =====\r\n\r\n    // Engineering reasoning - for design, systems, and implementation problems\r\n    if (characteristics.domain === 'engineering' ||\r\n        characteristics.domain === 'software' ||\r\n        characteristics.domain === 'systems' ||\r\n        (characteristics.requiresQuantification && !characteristics.requiresProof)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.ENGINEERING,\r\n        score: characteristics.domain === 'engineering' ? 0.92 : 0.85,\r\n        reasoning: 'Problem requires systematic engineering analysis with trade-offs and constraints',\r\n        strengths: ['Requirements analysis', 'Trade-off evaluation', 'System design', 'Failure mode analysis', 'Implementation planning'],\r\n        limitations: ['May over-engineer simple problems', 'Requires domain expertise'],\r\n        examples: ['System architecture', 'Design decisions', 'Performance optimization', 'Reliability analysis', 'Technical debt assessment'],\r\n      });\r\n    }\r\n\r\n    // Computability reasoning - for computational limits and algorithmic decidability\r\n    if (characteristics.domain === 'computer science' ||\r\n        characteristics.domain === 'computation' ||\r\n        (characteristics.requiresProof && characteristics.domain.includes('algorithm'))) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.COMPUTABILITY,\r\n        score: 0.88,\r\n        reasoning: 'Problem involves computational complexity, decidability, or algorithmic analysis',\r\n        strengths: ['Turing machine analysis', 'Decidability proofs', 'Complexity classification', 'Halting problem variants'],\r\n        limitations: ['Highly theoretical', 'Requires formal CS background'],\r\n        examples: ['Algorithm decidability', 'Complexity bounds', 'Reduction proofs', 'Computational limits'],\r\n      });\r\n    }\r\n\r\n    // Cryptanalytic reasoning - for security, cryptography, and information analysis\r\n    if (characteristics.domain === 'security' ||\r\n        characteristics.domain === 'cryptography' ||\r\n        characteristics.domain.includes('crypto')) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.CRYPTANALYTIC,\r\n        score: 0.90,\r\n        reasoning: 'Problem involves cryptographic analysis, security assessment, or information-theoretic reasoning',\r\n        strengths: ['Statistical analysis', 'Pattern detection', 'Deciban calculations', 'Key space analysis', 'Attack surface evaluation'],\r\n        limitations: ['Specialized domain', 'Requires mathematical background'],\r\n        examples: ['Cipher analysis', 'Protocol security', 'Key management', 'Attack vectors', 'Information leakage'],\r\n      });\r\n    }\r\n\r\n    // Recursive reasoning - for self-referential and decomposable problems\r\n    if (characteristics.complexity === 'high' &&\r\n        (characteristics.hasAlternatives || characteristics.requiresExplanation)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.RECURSIVE,\r\n        score: 0.82,\r\n        reasoning: 'Problem has recursive structure or can be decomposed into smaller similar subproblems',\r\n        strengths: ['Problem decomposition', 'Self-similar analysis', 'Base case identification', 'Recursive patterns'],\r\n        limitations: ['Stack overflow risk in deep recursion', 'May miss non-recursive solutions'],\r\n        examples: ['Divide and conquer', 'Tree traversal', 'Fractal analysis', 'Self-referential problems'],\r\n      });\r\n    }\r\n\r\n    // Modal reasoning - for possibility, necessity, and possible worlds\r\n    if (characteristics.hasAlternatives && characteristics.uncertainty === 'high') {\r\n      recommendations.push({\r\n        mode: ThinkingMode.MODAL,\r\n        score: 0.80,\r\n        reasoning: 'Problem involves possibility, necessity, or reasoning about alternative scenarios',\r\n        strengths: ['Possible worlds analysis', 'Necessity vs possibility', 'Epistemic reasoning', 'Deontic analysis'],\r\n        limitations: ['Abstract and theoretical', 'May overcomplicate simple choices'],\r\n        examples: ['Modal logic proofs', 'Necessity analysis', 'Epistemic uncertainty', 'Deontic obligations'],\r\n      });\r\n    }\r\n\r\n    // Stochastic reasoning - for probabilistic processes and random events\r\n    if (characteristics.uncertainty === 'high' && characteristics.requiresQuantification) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.STOCHASTIC,\r\n        score: 0.84,\r\n        reasoning: 'Problem involves random processes, probabilistic transitions, or stochastic modeling',\r\n        strengths: ['Markov chains', 'Random process modeling', 'Probabilistic state transitions', 'Monte Carlo methods'],\r\n        limitations: ['Requires probability theory', 'Computationally intensive'],\r\n        examples: ['Queueing systems', 'Random walks', 'Stochastic optimization', 'Process simulation'],\r\n      });\r\n    }\r\n\r\n    // Constraint reasoning - for constraint satisfaction and optimization\r\n    if (characteristics.hasAlternatives && characteristics.requiresQuantification) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.CONSTRAINT,\r\n        score: 0.83,\r\n        reasoning: 'Problem involves multiple constraints that must be satisfied simultaneously',\r\n        strengths: ['Constraint propagation', 'Feasibility analysis', 'SAT solving', 'CSP formulation'],\r\n        limitations: ['NP-hard in general', 'May have no solution'],\r\n        examples: ['Scheduling', 'Resource allocation', 'Configuration', 'Puzzle solving'],\r\n      });\r\n    }\r\n\r\n    // Optimization reasoning - for finding optimal solutions\r\n    if (characteristics.requiresQuantification && characteristics.hasAlternatives) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.OPTIMIZATION,\r\n        score: 0.86,\r\n        reasoning: 'Problem requires finding optimal or near-optimal solutions from alternatives',\r\n        strengths: ['Objective function formulation', 'Gradient methods', 'Convex optimization', 'Meta-heuristics'],\r\n        limitations: ['Local optima', 'Computational complexity', 'May require relaxation'],\r\n        examples: ['Resource optimization', 'Parameter tuning', 'Portfolio optimization', 'Route planning'],\r\n      });\r\n    }\r\n\r\n    // First Principles reasoning - for fundamental analysis from ground truth\r\n    if (isPhilosophical ||\r\n        (characteristics.complexity === 'high' && characteristics.requiresExplanation)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.FIRSTPRINCIPLES,\r\n        score: isPhilosophical ? 0.88 : 0.82,\r\n        reasoning: 'Problem benefits from breaking down to fundamental truths and building up from there',\r\n        strengths: ['Assumption identification', 'Foundational analysis', 'Novel solutions', 'Deep understanding'],\r\n        limitations: ['Time-intensive', 'May rediscover known solutions', 'Requires broad knowledge'],\r\n        examples: ['Innovation challenges', 'Paradigm shifts', 'Root cause analysis', 'Foundational questions'],\r\n      });\r\n    }\r\n\r\n    // Systems Thinking reasoning - for complex interconnected systems\r\n    if (characteristics.complexity === 'high' &&\r\n        (characteristics.timeDependent || characteristics.multiAgent)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.SYSTEMSTHINKING,\r\n        score: 0.85,\r\n        reasoning: 'Problem involves complex systems with interconnected components and feedback loops',\r\n        strengths: ['Holistic view', 'Feedback loop analysis', 'Emergence detection', 'Leverage point identification'],\r\n        limitations: ['Can be overwhelming', 'Requires system boundaries definition'],\r\n        examples: ['Organizational change', 'Ecosystem analysis', 'Market dynamics', 'Social systems'],\r\n      });\r\n    }\r\n\r\n    // Scientific Method reasoning - for empirical investigation\r\n    if (characteristics.hasIncompleteInfo &&\r\n        (characteristics.requiresExplanation || characteristics.requiresQuantification)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.SCIENTIFICMETHOD,\r\n        score: 0.84,\r\n        reasoning: 'Problem requires systematic empirical investigation and hypothesis testing',\r\n        strengths: ['Hypothesis formulation', 'Experimental design', 'Falsification', 'Reproducibility'],\r\n        limitations: ['Requires data collection', 'Time for experiments', 'May not apply to all domains'],\r\n        examples: ['Research questions', 'A/B testing', 'Empirical studies', 'Data-driven decisions'],\r\n      });\r\n    }\r\n\r\n    // Formal Logic reasoning - for rigorous logical analysis\r\n    if (characteristics.requiresProof && !characteristics.requiresQuantification) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.FORMALLOGIC,\r\n        score: 0.87,\r\n        reasoning: 'Problem requires rigorous formal logical analysis and proof construction',\r\n        strengths: ['Propositional logic', 'Predicate logic', 'Proof systems', 'Logical completeness'],\r\n        limitations: ['May be overly formal', 'Limited expressiveness for some domains'],\r\n        examples: ['Formal verification', 'Logical puzzles', 'Argument validity', 'Theorem proving'],\r\n      });\r\n    }\r\n\r\n    // Algorithmic reasoning - for algorithm design, analysis, and optimization\r\n    if (characteristics.domain === 'computer science' ||\r\n        characteristics.domain === 'algorithms' ||\r\n        characteristics.domain === 'data structures' ||\r\n        characteristics.domain === 'software' ||\r\n        (characteristics.requiresProof && characteristics.requiresQuantification)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.ALGORITHMIC,\r\n        score: characteristics.domain === 'algorithms' ? 0.95 : 0.88,\r\n        reasoning: 'Problem involves algorithm design, complexity analysis, or data structure optimization',\r\n        strengths: [\r\n          'Algorithm design patterns (divide-and-conquer, DP, greedy)',\r\n          'Complexity analysis (time, space, amortized)',\r\n          'Correctness proofs (loop invariants, induction)',\r\n          'Data structure selection and analysis',\r\n          'Graph algorithms and optimization',\r\n        ],\r\n        limitations: ['Focused on computational problems', 'Requires algorithmic thinking'],\r\n        examples: [\r\n          'Sorting and searching',\r\n          'Graph traversal (BFS, DFS)',\r\n          'Dynamic programming formulation',\r\n          'Shortest path algorithms',\r\n          'NP-completeness proofs',\r\n        ],\r\n      });\r\n    }\r\n\r\n    // ===== ACADEMIC RESEARCH MODES (v7.4.0) =====\r\n\r\n    // Synthesis mode - for literature review and knowledge integration\r\n    if (characteristics.domain === 'research' ||\r\n        characteristics.domain === 'academic' ||\r\n        characteristics.domain === 'literature' ||\r\n        (characteristics.hasIncompleteInfo && characteristics.requiresExplanation && !characteristics.requiresProof)) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.SYNTHESIS,\r\n        score: characteristics.domain === 'research' || characteristics.domain === 'academic' ? 0.92 : 0.85,\r\n        reasoning: 'Problem requires integrating knowledge from multiple sources and identifying themes',\r\n        strengths: [\r\n          'Literature integration',\r\n          'Theme extraction',\r\n          'Gap identification',\r\n          'Cross-source analysis',\r\n          'Knowledge synthesis',\r\n        ],\r\n        limitations: ['Requires access to multiple sources', 'Time-intensive', 'May miss emerging research'],\r\n        examples: [\r\n          'Literature reviews',\r\n          'Systematic reviews',\r\n          'Meta-analyses',\r\n          'Research synthesis',\r\n          'State-of-the-art surveys',\r\n        ],\r\n      });\r\n    }\r\n\r\n    // Argumentation mode - for academic argumentation and Toulmin model\r\n    if (characteristics.requiresExplanation &&\r\n        (characteristics.hasAlternatives || characteristics.domain === 'academic' || characteristics.domain === 'philosophy')) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.ARGUMENTATION,\r\n        score: characteristics.domain === 'academic' ? 0.90 : 0.84,\r\n        reasoning: 'Problem requires structured argumentation with claims, evidence, and warrants',\r\n        strengths: [\r\n          'Toulmin model support',\r\n          'Claim-evidence structure',\r\n          'Warrant articulation',\r\n          'Rebuttal handling',\r\n          'Qualifier specification',\r\n        ],\r\n        limitations: ['Formal structure may feel rigid', 'Requires clear claim formulation'],\r\n        examples: [\r\n          'Academic papers',\r\n          'Thesis arguments',\r\n          'Policy proposals',\r\n          'Debate preparation',\r\n          'Position papers',\r\n        ],\r\n      });\r\n    }\r\n\r\n    // Critique mode - for critical analysis and peer review\r\n    if (characteristics.requiresExplanation &&\r\n        (characteristics.domain === 'academic' || characteristics.domain === 'research' || characteristics.domain === 'review')) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.CRITIQUE,\r\n        score: characteristics.domain === 'review' ? 0.92 : 0.86,\r\n        reasoning: 'Problem requires critical evaluation of methodology, validity, and limitations',\r\n        strengths: [\r\n          'Methodology assessment',\r\n          'Validity evaluation',\r\n          'Limitation identification',\r\n          'Strength recognition',\r\n          'Constructive feedback',\r\n        ],\r\n        limitations: ['Requires domain expertise', 'May seem overly critical'],\r\n        examples: [\r\n          'Peer review',\r\n          'Paper critiques',\r\n          'Methodology evaluation',\r\n          'Research assessment',\r\n          'Quality analysis',\r\n        ],\r\n      });\r\n    }\r\n\r\n    // Analysis mode - for qualitative analysis methods\r\n    if (characteristics.hasIncompleteInfo &&\r\n        characteristics.requiresExplanation &&\r\n        (characteristics.domain === 'research' || characteristics.domain === 'qualitative' || characteristics.domain === 'social science')) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.ANALYSIS,\r\n        score: characteristics.domain === 'qualitative' ? 0.93 : 0.85,\r\n        reasoning: 'Problem requires systematic qualitative analysis using established methods',\r\n        strengths: [\r\n          'Thematic analysis',\r\n          'Grounded theory',\r\n          'Discourse analysis',\r\n          'Content analysis',\r\n          'Code development',\r\n        ],\r\n        limitations: ['Subjective interpretation', 'Time-intensive coding', 'Requires methodological rigor'],\r\n        examples: [\r\n          'Interview analysis',\r\n          'Document analysis',\r\n          'Ethnographic research',\r\n          'Case study analysis',\r\n          'Narrative analysis',\r\n        ],\r\n      });\r\n    }\r\n\r\n    // Sequential reasoning (default fallback)\r\n    if (recommendations.length === 0) {\r\n      recommendations.push({\r\n        mode: ThinkingMode.SEQUENTIAL,\r\n        score: 0.70,\r\n        reasoning: 'General-purpose iterative reasoning',\r\n        strengths: ['Flexible', 'Adaptable', 'Iterative refinement'],\r\n        limitations: ['May lack structure for complex problems'],\r\n        examples: ['General problem solving', 'Exploration', 'Brainstorming'],\r\n      });\r\n    }\r\n\r\n    // Sort by score (highest first)\r\n    return recommendations.sort((a, b) => b.score - a.score);\r\n  }\r\n\r\n  /**\r\n   * Recommends combinations of reasoning modes that work well together\r\n   */\r\n  recommendCombinations(characteristics: ProblemCharacteristics): CombinationRecommendation[] {\r\n    const combinations: CombinationRecommendation[] = [];\r\n\r\n    const isPhilosophical = characteristics.domain.toLowerCase().includes('metaphysics') ||\r\n                           characteristics.domain.toLowerCase().includes('theology') ||\r\n                           characteristics.domain.toLowerCase().includes('philosophy') ||\r\n                           characteristics.domain.toLowerCase().includes('epistemology') ||\r\n                           characteristics.domain.toLowerCase().includes('ethics');\r\n\r\n    // Inductive + Deductive + Abductive (Hybrid) - for philosophical/complex problems\r\n    if (isPhilosophical || (characteristics.complexity === 'high' && characteristics.requiresExplanation && characteristics.hasAlternatives)) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.INDUCTIVE, ThinkingMode.DEDUCTIVE, ThinkingMode.ABDUCTIVE],\r\n        sequence: 'hybrid',\r\n        rationale: 'Synthesize empirical patterns, logical derivations, and explanatory hypotheses for maximum evidential strength',\r\n        benefits: ['Convergent validation from three independent methods', 'Empirical grounding + logical rigor + explanatory power', 'Highest achievable confidence through multi-modal synthesis', 'Exposes both empirical patterns and logical contradictions'],\r\n        synergies: ['Inductive patterns inform abductive hypotheses', 'Deductive logic tests hypothesis validity', 'Abductive explanations guide inductive search', 'All three methods converge on same conclusion'],\r\n      });\r\n    }\r\n\r\n    // Temporal + Causal\r\n    if (characteristics.timeDependent && characteristics.requiresExplanation) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.TEMPORAL, ThinkingMode.CAUSAL],\r\n        sequence: 'sequential',\r\n        rationale: 'Build timeline first, then analyze causal relationships',\r\n        benefits: ['Complete temporal-causal model', 'Root cause with timeline context'],\r\n        synergies: ['Temporal events inform causal nodes', 'Causal edges explain temporal sequences'],\r\n      });\r\n    }\r\n\r\n    // Abductive + Bayesian\r\n    if (characteristics.requiresExplanation && characteristics.requiresQuantification) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ABDUCTIVE, ThinkingMode.BAYESIAN],\r\n        sequence: 'sequential',\r\n        rationale: 'Generate hypotheses, then quantify with probabilities',\r\n        benefits: ['Systematic hypothesis generation', 'Quantified belief updates'],\r\n        synergies: ['Abductive hypotheses become Bayesian hypotheses', 'Bayesian updates refine explanations'],\r\n      });\r\n    }\r\n\r\n    // Game Theory + Counterfactual\r\n    if (characteristics.multiAgent && characteristics.hasAlternatives) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.GAMETHEORY, ThinkingMode.COUNTERFACTUAL],\r\n        sequence: 'hybrid',\r\n        rationale: 'Analyze equilibria, then explore alternative strategies',\r\n        benefits: ['Strategic analysis + scenario exploration', 'Robustness testing'],\r\n        synergies: ['Equilibria as actual scenarios', 'Strategy changes as interventions'],\r\n      });\r\n    }\r\n\r\n    // Evidential + Causal\r\n    if (characteristics.hasIncompleteInfo && characteristics.timeDependent) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.EVIDENTIAL, ThinkingMode.CAUSAL],\r\n        sequence: 'parallel',\r\n        rationale: 'Combine uncertain evidence while modeling causal structure',\r\n        benefits: ['Handles uncertainty and causality', 'Evidence fusion with causal reasoning'],\r\n        synergies: ['Belief functions inform causal strengths', 'Causal structure guides evidence combination'],\r\n      });\r\n    }\r\n\r\n    // Temporal + Game Theory\r\n    if (characteristics.timeDependent && characteristics.multiAgent) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.TEMPORAL, ThinkingMode.GAMETHEORY],\r\n        sequence: 'sequential',\r\n        rationale: 'Model event sequences, then analyze strategic interactions over time',\r\n        benefits: ['Dynamic game analysis', 'Time-dependent strategies'],\r\n        synergies: ['Temporal events as game stages', 'Strategies evolve over timeline'],\r\n      });\r\n    }\r\n\r\n\r\n    // Mathematics + Shannon (for complex proofs)\r\n    if (characteristics.requiresProof && characteristics.complexity === 'high') {\r\n      combinations.push({\r\n        modes: [ThinkingMode.SHANNON, ThinkingMode.MATHEMATICS],\r\n        sequence: 'hybrid',\r\n        rationale: 'Use Shannon methodology to structure complex mathematical proofs',\r\n        benefits: ['Systematic proof construction', 'Clear problem decomposition'],\r\n        synergies: ['Shannon stages guide proof strategy', 'Mathematical rigor validates each stage'],\r\n      });\r\n    }\r\n\r\n    // ===== NEW MODE COMBINATIONS (v7.2.0) =====\r\n\r\n    // Engineering + Optimization (for system design with optimal solutions)\r\n    if ((characteristics.domain === 'engineering' || characteristics.domain === 'software') &&\r\n        characteristics.hasAlternatives) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ENGINEERING, ThinkingMode.OPTIMIZATION],\r\n        sequence: 'sequential',\r\n        rationale: 'Design system architecture, then optimize for performance/cost',\r\n        benefits: ['Structured design', 'Optimal trade-offs', 'Measurable improvements'],\r\n        synergies: ['Engineering constraints feed optimization', 'Optimization validates design choices'],\r\n      });\r\n    }\r\n\r\n    // Engineering + Constraint (for constrained design problems)\r\n    if (characteristics.requiresQuantification && characteristics.hasAlternatives &&\r\n        (characteristics.domain === 'engineering' || characteristics.domain === 'software')) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.CONSTRAINT, ThinkingMode.ENGINEERING],\r\n        sequence: 'sequential',\r\n        rationale: 'Identify constraints first, then design within those boundaries',\r\n        benefits: ['Feasibility guaranteed', 'Requirements satisfaction', 'Clear boundaries'],\r\n        synergies: ['Constraints define engineering solution space', 'Engineering validates constraint satisfaction'],\r\n      });\r\n    }\r\n\r\n    // First Principles + Systems Thinking (for complex systemic problems)\r\n    if (characteristics.complexity === 'high' && characteristics.requiresExplanation) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.FIRSTPRINCIPLES, ThinkingMode.SYSTEMSTHINKING],\r\n        sequence: 'sequential',\r\n        rationale: 'Build from fundamental truths, then analyze systemic interactions',\r\n        benefits: ['Deep understanding', 'Holistic view', 'Novel insights'],\r\n        synergies: ['First principles reveal core elements', 'Systems thinking shows interconnections'],\r\n      });\r\n    }\r\n\r\n    // Scientific Method + Bayesian (for empirical research with uncertainty)\r\n    if (characteristics.hasIncompleteInfo && characteristics.requiresQuantification) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.SCIENTIFICMETHOD, ThinkingMode.BAYESIAN],\r\n        sequence: 'hybrid',\r\n        rationale: 'Design experiments and update beliefs with Bayesian inference',\r\n        benefits: ['Rigorous methodology', 'Quantified uncertainty', 'Evidence integration'],\r\n        synergies: ['Experiments generate evidence', 'Bayesian updates refine hypotheses'],\r\n      });\r\n    }\r\n\r\n    // Formal Logic + Deductive (for rigorous proofs)\r\n    if (characteristics.requiresProof && !characteristics.hasIncompleteInfo) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.FORMALLOGIC, ThinkingMode.DEDUCTIVE],\r\n        sequence: 'hybrid',\r\n        rationale: 'Use formal logic systems with deductive derivation',\r\n        benefits: ['Maximum rigor', 'Logically valid conclusions', 'Formal verification'],\r\n        synergies: ['Formal logic provides structure', 'Deduction ensures valid inference'],\r\n      });\r\n    }\r\n\r\n    // Recursive + Optimization (for divide-and-conquer optimization)\r\n    if (characteristics.complexity === 'high' && characteristics.hasAlternatives) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.RECURSIVE, ThinkingMode.OPTIMIZATION],\r\n        sequence: 'hybrid',\r\n        rationale: 'Decompose problem recursively, optimize at each level',\r\n        benefits: ['Scalable solutions', 'Local and global optimization', 'Manageable complexity'],\r\n        synergies: ['Recursion breaks down problem', 'Optimization solves subproblems optimally'],\r\n      });\r\n    }\r\n\r\n    // Stochastic + Bayesian (for probabilistic modeling)\r\n    if (characteristics.uncertainty === 'high' && characteristics.requiresQuantification) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.STOCHASTIC, ThinkingMode.BAYESIAN],\r\n        sequence: 'parallel',\r\n        rationale: 'Model random processes while updating beliefs probabilistically',\r\n        benefits: ['Complete uncertainty model', 'Dynamic belief updates', 'Probabilistic predictions'],\r\n        synergies: ['Stochastic models generate distributions', 'Bayesian reasoning integrates evidence'],\r\n      });\r\n    }\r\n\r\n    // Computability + Formal Logic (for theoretical computer science)\r\n    if (characteristics.domain === 'computer science' && characteristics.requiresProof) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.COMPUTABILITY, ThinkingMode.FORMALLOGIC],\r\n        sequence: 'hybrid',\r\n        rationale: 'Analyze computational limits with formal logical proofs',\r\n        benefits: ['Decidability analysis', 'Rigorous complexity proofs', 'Theoretical foundations'],\r\n        synergies: ['Computability defines limits', 'Formal logic proves properties'],\r\n      });\r\n    }\r\n\r\n    // Cryptanalytic + Stochastic (for probabilistic security analysis)\r\n    if (characteristics.domain === 'security' && characteristics.uncertainty === 'high') {\r\n      combinations.push({\r\n        modes: [ThinkingMode.CRYPTANALYTIC, ThinkingMode.STOCHASTIC],\r\n        sequence: 'parallel',\r\n        rationale: 'Analyze cryptographic systems with probabilistic attack modeling',\r\n        benefits: ['Security assessment', 'Attack probability estimation', 'Key space analysis'],\r\n        synergies: ['Cryptanalysis identifies vulnerabilities', 'Stochastic models attack success rates'],\r\n      });\r\n    }\r\n\r\n    // Systems Thinking + Engineering (for complex system design)\r\n    if (characteristics.complexity === 'high' &&\r\n        (characteristics.multiAgent || characteristics.timeDependent)) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.SYSTEMSTHINKING, ThinkingMode.ENGINEERING],\r\n        sequence: 'sequential',\r\n        rationale: 'Understand system dynamics holistically, then engineer solutions',\r\n        benefits: ['Holistic design', 'Feedback-aware engineering', 'Emergent behavior consideration'],\r\n        synergies: ['Systems view informs design', 'Engineering implements systemic solutions'],\r\n      });\r\n    }\r\n\r\n    // Modal + Counterfactual (for possibility analysis)\r\n    if (characteristics.hasAlternatives && characteristics.uncertainty === 'high') {\r\n      combinations.push({\r\n        modes: [ThinkingMode.MODAL, ThinkingMode.COUNTERFACTUAL],\r\n        sequence: 'parallel',\r\n        rationale: 'Analyze possible worlds and counterfactual scenarios together',\r\n        benefits: ['Complete possibility space', 'What-if analysis', 'Robust decision making'],\r\n        synergies: ['Modal logic structures possibilities', 'Counterfactuals explore specific alternatives'],\r\n      });\r\n    }\r\n\r\n    // Metareasoning + Optimization (for strategy optimization)\r\n    if (characteristics.complexity === 'high' && characteristics.hasAlternatives) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.METAREASONING, ThinkingMode.OPTIMIZATION],\r\n        sequence: 'hybrid',\r\n        rationale: 'Monitor reasoning strategies and optimize approach selection',\r\n        benefits: ['Adaptive reasoning', 'Resource optimization', 'Strategy refinement'],\r\n        synergies: ['Metareasoning evaluates strategies', 'Optimization selects best approach'],\r\n      });\r\n    }\r\n\r\n    // Metareasoning + Formal Logic + Abductive (for cognitive bias detection and counter-arguments)\r\n    if (characteristics.requiresExplanation && characteristics.hasAlternatives) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.METAREASONING, ThinkingMode.FORMALLOGIC, ThinkingMode.ABDUCTIVE],\r\n        sequence: 'sequential',\r\n        rationale: 'Detect cognitive biases through meta-analysis, identify logical fallacies, and generate alternative explanations as counter-arguments',\r\n        benefits: ['Comprehensive bias detection', 'Fallacy identification', 'Counter-argument generation', 'Critical analysis'],\r\n        synergies: ['Metareasoning identifies reasoning flaws', 'Formal logic validates argument structure', 'Abductive generates alternative explanations'],\r\n      });\r\n    }\r\n\r\n    // Metareasoning + Counterfactual (for bias mitigation and alternative perspectives)\r\n    if (characteristics.hasAlternatives && characteristics.uncertainty !== 'low') {\r\n      combinations.push({\r\n        modes: [ThinkingMode.METAREASONING, ThinkingMode.COUNTERFACTUAL],\r\n        sequence: 'parallel',\r\n        rationale: 'Self-reflect on reasoning while exploring alternative scenarios to counter biases',\r\n        benefits: ['Bias awareness', 'Alternative perspective generation', 'Decision robustness'],\r\n        synergies: ['Metareasoning detects bias patterns', 'Counterfactual explores what-if scenarios'],\r\n      });\r\n    }\r\n\r\n    // ===== ALGORITHMIC MODE COMBINATIONS (v7.3.0) =====\r\n\r\n    // Algorithmic + Computability (for theoretical algorithm analysis)\r\n    if (characteristics.domain === 'computer science' && characteristics.requiresProof) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ALGORITHMIC, ThinkingMode.COMPUTABILITY],\r\n        sequence: 'hybrid',\r\n        rationale: 'Combine algorithm design with computability analysis for theoretical completeness',\r\n        benefits: ['Algorithm correctness proofs', 'Complexity class analysis', 'Decidability bounds'],\r\n        synergies: ['Algorithmic design informs complexity', 'Computability proves fundamental limits'],\r\n      });\r\n    }\r\n\r\n    // Algorithmic + Optimization (for algorithm optimization)\r\n    if (characteristics.hasAlternatives && characteristics.requiresQuantification) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ALGORITHMIC, ThinkingMode.OPTIMIZATION],\r\n        sequence: 'sequential',\r\n        rationale: 'Design algorithm first, then optimize for performance',\r\n        benefits: ['Correct-by-construction', 'Performance optimization', 'Trade-off analysis'],\r\n        synergies: ['Algorithm provides baseline', 'Optimization improves constants and bounds'],\r\n      });\r\n    }\r\n\r\n    // Algorithmic + Mathematics (for algorithm correctness proofs)\r\n    if (characteristics.requiresProof && characteristics.domain !== 'philosophy') {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ALGORITHMIC, ThinkingMode.MATHEMATICS],\r\n        sequence: 'hybrid',\r\n        rationale: 'Combine algorithm design with mathematical proof techniques',\r\n        benefits: ['Rigorous correctness proofs', 'Loop invariant verification', 'Inductive reasoning'],\r\n        synergies: ['Algorithmic structures guide proof strategy', 'Mathematical rigor ensures correctness'],\r\n      });\r\n    }\r\n\r\n    // Algorithmic + Recursive (for divide-and-conquer problems)\r\n    if (characteristics.complexity === 'high' && characteristics.hasAlternatives) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ALGORITHMIC, ThinkingMode.RECURSIVE],\r\n        sequence: 'parallel',\r\n        rationale: 'Apply divide-and-conquer paradigm with recursive decomposition',\r\n        benefits: ['Natural problem decomposition', 'Recurrence solving', 'Subproblem identification'],\r\n        synergies: ['Algorithmic patterns guide recursion', 'Recursive structure enables Master Theorem'],\r\n      });\r\n    }\r\n\r\n    // Algorithmic + Stochastic (for randomized algorithms)\r\n    if (characteristics.uncertainty !== 'low' && characteristics.requiresQuantification) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ALGORITHMIC, ThinkingMode.STOCHASTIC],\r\n        sequence: 'parallel',\r\n        rationale: 'Design randomized algorithms with probabilistic analysis',\r\n        benefits: ['Expected-case analysis', 'Monte Carlo methods', 'Las Vegas algorithms'],\r\n        synergies: ['Algorithmic framework structures randomization', 'Stochastic analysis proves bounds'],\r\n      });\r\n    }\r\n\r\n    // ===== ACADEMIC RESEARCH MODE COMBINATIONS (v7.4.0) =====\r\n\r\n    // Synthesis + Critique (for comprehensive literature review)\r\n    if (characteristics.domain === 'research' || characteristics.domain === 'academic') {\r\n      combinations.push({\r\n        modes: [ThinkingMode.SYNTHESIS, ThinkingMode.CRITIQUE],\r\n        sequence: 'sequential',\r\n        rationale: 'Synthesize literature first, then critically evaluate the synthesized findings',\r\n        benefits: ['Comprehensive review', 'Critical evaluation', 'Research gap identification'],\r\n        synergies: ['Synthesis identifies patterns', 'Critique validates findings'],\r\n      });\r\n    }\r\n\r\n    // Synthesis + Analysis (for qualitative research synthesis)\r\n    if (characteristics.hasIncompleteInfo && characteristics.requiresExplanation) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.SYNTHESIS, ThinkingMode.ANALYSIS],\r\n        sequence: 'hybrid',\r\n        rationale: 'Combine literature synthesis with qualitative analysis methods',\r\n        benefits: ['Multi-source integration', 'Thematic consistency', 'Methodological rigor'],\r\n        synergies: ['Synthesis provides sources', 'Analysis extracts themes'],\r\n      });\r\n    }\r\n\r\n    // Argumentation + Critique (for academic debate and evaluation)\r\n    if (characteristics.requiresExplanation && characteristics.hasAlternatives) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ARGUMENTATION, ThinkingMode.CRITIQUE],\r\n        sequence: 'parallel',\r\n        rationale: 'Build arguments while critically evaluating opposing views',\r\n        benefits: ['Strong arguments', 'Addressed weaknesses', 'Robust conclusions'],\r\n        synergies: ['Argumentation structures claims', 'Critique strengthens rebuttals'],\r\n      });\r\n    }\r\n\r\n    // Argumentation + Deductive (for rigorous academic arguments)\r\n    if (characteristics.requiresProof && characteristics.requiresExplanation) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ARGUMENTATION, ThinkingMode.DEDUCTIVE],\r\n        sequence: 'hybrid',\r\n        rationale: 'Combine Toulmin argumentation with deductive logical rigor',\r\n        benefits: ['Structured arguments', 'Logical validity', 'Academic rigor'],\r\n        synergies: ['Toulmin provides structure', 'Deduction ensures validity'],\r\n      });\r\n    }\r\n\r\n    // Analysis + Inductive (for qualitative pattern discovery)\r\n    if (characteristics.hasIncompleteInfo && !characteristics.requiresProof) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.ANALYSIS, ThinkingMode.INDUCTIVE],\r\n        sequence: 'sequential',\r\n        rationale: 'Apply qualitative analysis then generalize through inductive reasoning',\r\n        benefits: ['Grounded findings', 'Pattern generalization', 'Theory building'],\r\n        synergies: ['Analysis identifies codes', 'Induction builds theory'],\r\n      });\r\n    }\r\n\r\n    // Critique + Metareasoning (for self-aware critical analysis)\r\n    if (characteristics.complexity === 'high' && characteristics.requiresExplanation) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.CRITIQUE, ThinkingMode.METAREASONING],\r\n        sequence: 'parallel',\r\n        rationale: 'Critically analyze while monitoring own biases and reasoning quality',\r\n        benefits: ['Self-aware critique', 'Bias mitigation', 'Improved objectivity'],\r\n        synergies: ['Critique evaluates content', 'Metareasoning evaluates process'],\r\n      });\r\n    }\r\n\r\n    // Synthesis + Bayesian (for evidence-based literature review)\r\n    if (characteristics.requiresQuantification && characteristics.hasIncompleteInfo) {\r\n      combinations.push({\r\n        modes: [ThinkingMode.SYNTHESIS, ThinkingMode.BAYESIAN],\r\n        sequence: 'hybrid',\r\n        rationale: 'Synthesize literature while quantifying evidence strength',\r\n        benefits: ['Quantified synthesis', 'Evidence weighting', 'Probabilistic conclusions'],\r\n        synergies: ['Synthesis gathers evidence', 'Bayesian weights findings'],\r\n      });\r\n    }\r\n\r\n    return combinations;\r\n  }\r\n\r\n  /**\r\n   * Get a simple mode recommendation based on a few key characteristics\r\n   * Simplified version for quick recommendations\r\n   * Supports all 28 reasoning modes (v7.2.0)\r\n   */\r\n  quickRecommend(problemType: string): ThinkingMode {\r\n    const typeMap: Record<string, ThinkingMode> = {\r\n      // Core reasoning modes\r\n      'explanation': ThinkingMode.ABDUCTIVE,\r\n      'hypothesis': ThinkingMode.ABDUCTIVE,\r\n      'inference': ThinkingMode.ABDUCTIVE,\r\n      'pattern': ThinkingMode.INDUCTIVE,\r\n      'generalization': ThinkingMode.INDUCTIVE,\r\n      'empirical': ThinkingMode.INDUCTIVE,\r\n      'logic': ThinkingMode.DEDUCTIVE,\r\n      'proof': ThinkingMode.DEDUCTIVE,\r\n      'derivation': ThinkingMode.DEDUCTIVE,\r\n      'complex': ThinkingMode.HYBRID,\r\n      'philosophical': ThinkingMode.HYBRID,\r\n      'metaphysical': ThinkingMode.HYBRID,\r\n      // Meta-reasoning\r\n      'meta': ThinkingMode.METAREASONING,\r\n      'strategy-selection': ThinkingMode.METAREASONING,\r\n      'quality-assessment': ThinkingMode.METAREASONING,\r\n      'reflection': ThinkingMode.METAREASONING,\r\n      'self-evaluation': ThinkingMode.METAREASONING,\r\n      // Specialized modes\r\n      'debugging': ThinkingMode.ABDUCTIVE,\r\n      'mathematical': ThinkingMode.MATHEMATICS,\r\n      'timeline': ThinkingMode.TEMPORAL,\r\n      'strategy': ThinkingMode.GAMETHEORY,\r\n      'uncertainty': ThinkingMode.EVIDENTIAL,\r\n      'causality': ThinkingMode.CAUSAL,\r\n      'probability': ThinkingMode.BAYESIAN,\r\n      'what-if': ThinkingMode.COUNTERFACTUAL,\r\n      'analogy': ThinkingMode.ANALOGICAL,\r\n      'physics': ThinkingMode.PHYSICS,\r\n      'systematic': ThinkingMode.SHANNON,\r\n\r\n      // ===== NEW MODES (v7.2.0) =====\r\n      // Engineering reasoning\r\n      'engineering': ThinkingMode.ENGINEERING,\r\n      'design': ThinkingMode.ENGINEERING,\r\n      'architecture': ThinkingMode.ENGINEERING,\r\n      'trade-off': ThinkingMode.ENGINEERING,\r\n      'tradeoff': ThinkingMode.ENGINEERING,\r\n      'system-design': ThinkingMode.ENGINEERING,\r\n      'implementation': ThinkingMode.ENGINEERING,\r\n      'reliability': ThinkingMode.ENGINEERING,\r\n      'scalability': ThinkingMode.ENGINEERING,\r\n      'performance': ThinkingMode.ENGINEERING,\r\n\r\n      // Computability reasoning\r\n      'computability': ThinkingMode.COMPUTABILITY,\r\n      'decidability': ThinkingMode.COMPUTABILITY,\r\n      'turing': ThinkingMode.COMPUTABILITY,\r\n      'halting': ThinkingMode.COMPUTABILITY,\r\n      'complexity-class': ThinkingMode.COMPUTABILITY,\r\n      'undecidable': ThinkingMode.COMPUTABILITY,\r\n\r\n      // Cryptanalytic reasoning\r\n      'cryptanalysis': ThinkingMode.CRYPTANALYTIC,\r\n      'cryptography': ThinkingMode.CRYPTANALYTIC,\r\n      'security': ThinkingMode.CRYPTANALYTIC,\r\n      'cipher': ThinkingMode.CRYPTANALYTIC,\r\n      'encryption': ThinkingMode.CRYPTANALYTIC,\r\n      'decryption': ThinkingMode.CRYPTANALYTIC,\r\n      'attack-vector': ThinkingMode.CRYPTANALYTIC,\r\n      'key-analysis': ThinkingMode.CRYPTANALYTIC,\r\n      'protocol-security': ThinkingMode.CRYPTANALYTIC,\r\n\r\n      // Recursive reasoning\r\n      'recursive': ThinkingMode.RECURSIVE,\r\n      'recursion': ThinkingMode.RECURSIVE,\r\n      'divide-conquer': ThinkingMode.RECURSIVE,\r\n      'self-similar': ThinkingMode.RECURSIVE,\r\n      'decomposition': ThinkingMode.RECURSIVE,\r\n      'fractal': ThinkingMode.RECURSIVE,\r\n      'tree-traversal': ThinkingMode.RECURSIVE,\r\n\r\n      // Modal reasoning\r\n      'modal': ThinkingMode.MODAL,\r\n      'possibility': ThinkingMode.MODAL,\r\n      'necessity': ThinkingMode.MODAL,\r\n      'possible-worlds': ThinkingMode.MODAL,\r\n      'epistemic': ThinkingMode.MODAL,\r\n      'deontic': ThinkingMode.MODAL,\r\n      'alethic': ThinkingMode.MODAL,\r\n\r\n      // Stochastic reasoning\r\n      'stochastic': ThinkingMode.STOCHASTIC,\r\n      'random-process': ThinkingMode.STOCHASTIC,\r\n      'markov': ThinkingMode.STOCHASTIC,\r\n      'monte-carlo': ThinkingMode.STOCHASTIC,\r\n      'probabilistic-process': ThinkingMode.STOCHASTIC,\r\n      'queueing': ThinkingMode.STOCHASTIC,\r\n      'random-walk': ThinkingMode.STOCHASTIC,\r\n\r\n      // Constraint reasoning\r\n      'constraint': ThinkingMode.CONSTRAINT,\r\n      'constraints': ThinkingMode.CONSTRAINT,\r\n      'csp': ThinkingMode.CONSTRAINT,\r\n      'sat': ThinkingMode.CONSTRAINT,\r\n      'scheduling': ThinkingMode.CONSTRAINT,\r\n      'allocation': ThinkingMode.CONSTRAINT,\r\n      'feasibility': ThinkingMode.CONSTRAINT,\r\n      'satisfiability': ThinkingMode.CONSTRAINT,\r\n\r\n      // Optimization reasoning\r\n      'optimization': ThinkingMode.OPTIMIZATION,\r\n      'optimize': ThinkingMode.OPTIMIZATION,\r\n      'optimal': ThinkingMode.OPTIMIZATION,\r\n      'minimize': ThinkingMode.OPTIMIZATION,\r\n      'maximize': ThinkingMode.OPTIMIZATION,\r\n      'gradient': ThinkingMode.OPTIMIZATION,\r\n      'convex': ThinkingMode.OPTIMIZATION,\r\n      'heuristic': ThinkingMode.OPTIMIZATION,\r\n      'search': ThinkingMode.OPTIMIZATION,\r\n\r\n      // First Principles reasoning\r\n      'first-principles': ThinkingMode.FIRSTPRINCIPLES,\r\n      'fundamental': ThinkingMode.FIRSTPRINCIPLES,\r\n      'foundational': ThinkingMode.FIRSTPRINCIPLES,\r\n      'axiom': ThinkingMode.FIRSTPRINCIPLES,\r\n      'ground-truth': ThinkingMode.FIRSTPRINCIPLES,\r\n      'from-scratch': ThinkingMode.FIRSTPRINCIPLES,\r\n      'basic-principles': ThinkingMode.FIRSTPRINCIPLES,\r\n      'root-cause': ThinkingMode.FIRSTPRINCIPLES,\r\n\r\n      // Systems Thinking reasoning\r\n      'systems-thinking': ThinkingMode.SYSTEMSTHINKING,\r\n      'systems': ThinkingMode.SYSTEMSTHINKING,\r\n      'holistic': ThinkingMode.SYSTEMSTHINKING,\r\n      'feedback-loop': ThinkingMode.SYSTEMSTHINKING,\r\n      'emergence': ThinkingMode.SYSTEMSTHINKING,\r\n      'interconnected': ThinkingMode.SYSTEMSTHINKING,\r\n      'ecosystem': ThinkingMode.SYSTEMSTHINKING,\r\n      'leverage-point': ThinkingMode.SYSTEMSTHINKING,\r\n\r\n      // Scientific Method reasoning\r\n      'scientific': ThinkingMode.SCIENTIFICMETHOD,\r\n      'experiment': ThinkingMode.SCIENTIFICMETHOD,\r\n      'research': ThinkingMode.SCIENTIFICMETHOD,\r\n      'falsification': ThinkingMode.SCIENTIFICMETHOD,\r\n      'hypothesis-testing': ThinkingMode.SCIENTIFICMETHOD,\r\n      'a/b-testing': ThinkingMode.SCIENTIFICMETHOD,\r\n      'reproducibility': ThinkingMode.SCIENTIFICMETHOD,\r\n      'control-group': ThinkingMode.SCIENTIFICMETHOD,\r\n\r\n      // Formal Logic reasoning\r\n      'formal-logic': ThinkingMode.FORMALLOGIC,\r\n      'propositional': ThinkingMode.FORMALLOGIC,\r\n      'predicate': ThinkingMode.FORMALLOGIC,\r\n      'theorem-proving': ThinkingMode.FORMALLOGIC,\r\n      'formal-proof': ThinkingMode.FORMALLOGIC,\r\n      'validity': ThinkingMode.FORMALLOGIC,\r\n      'soundness': ThinkingMode.FORMALLOGIC,\r\n      'completeness': ThinkingMode.FORMALLOGIC,\r\n\r\n      // Bias detection and critical analysis\r\n      'bias': ThinkingMode.METAREASONING,\r\n      'bias-detection': ThinkingMode.METAREASONING,\r\n      'cognitive-bias': ThinkingMode.METAREASONING,\r\n      'fallacy': ThinkingMode.FORMALLOGIC,\r\n      'fallacies': ThinkingMode.FORMALLOGIC,\r\n      'logical-fallacy': ThinkingMode.FORMALLOGIC,\r\n      'counter-argument': ThinkingMode.COUNTERFACTUAL,\r\n      'counterargument': ThinkingMode.COUNTERFACTUAL,\r\n      'fact-check': ThinkingMode.EVIDENTIAL,\r\n      'misinformation': ThinkingMode.EVIDENTIAL,\r\n      'disinformation': ThinkingMode.EVIDENTIAL,\r\n      'reasoning-flaw': ThinkingMode.METAREASONING,\r\n      'argument-analysis': ThinkingMode.FORMALLOGIC,\r\n\r\n      // ===== ALGORITHMIC REASONING (v7.3.0) - CLRS Coverage =====\r\n\r\n      // General algorithm terms\r\n      'algorithm': ThinkingMode.ALGORITHMIC,\r\n      'algorithms': ThinkingMode.ALGORITHMIC,\r\n      'algorithmic': ThinkingMode.ALGORITHMIC,\r\n      'data-structure': ThinkingMode.ALGORITHMIC,\r\n      'data-structures': ThinkingMode.ALGORITHMIC,\r\n      'complexity': ThinkingMode.ALGORITHMIC,\r\n      'time-complexity': ThinkingMode.ALGORITHMIC,\r\n      'space-complexity': ThinkingMode.ALGORITHMIC,\r\n      'big-o': ThinkingMode.ALGORITHMIC,\r\n      'asymptotic': ThinkingMode.ALGORITHMIC,\r\n      'correctness-proof': ThinkingMode.ALGORITHMIC,\r\n      'loop-invariant': ThinkingMode.ALGORITHMIC,\r\n      'invariant': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Design patterns\r\n      'divide-and-conquer': ThinkingMode.ALGORITHMIC,\r\n      'dynamic-programming': ThinkingMode.ALGORITHMIC,\r\n      'dp': ThinkingMode.ALGORITHMIC,\r\n      'memoization': ThinkingMode.ALGORITHMIC,\r\n      'greedy-algorithm': ThinkingMode.ALGORITHMIC,\r\n      'backtracking': ThinkingMode.ALGORITHMIC,\r\n      'branch-and-bound': ThinkingMode.ALGORITHMIC,\r\n      'amortized': ThinkingMode.ALGORITHMIC,\r\n      'amortized-analysis': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Sorting algorithms\r\n      'sorting': ThinkingMode.ALGORITHMIC,\r\n      'sort': ThinkingMode.ALGORITHMIC,\r\n      'insertion-sort': ThinkingMode.ALGORITHMIC,\r\n      'merge-sort': ThinkingMode.ALGORITHMIC,\r\n      'mergesort': ThinkingMode.ALGORITHMIC,\r\n      'quicksort': ThinkingMode.ALGORITHMIC,\r\n      'quick-sort': ThinkingMode.ALGORITHMIC,\r\n      'heapsort': ThinkingMode.ALGORITHMIC,\r\n      'heap-sort': ThinkingMode.ALGORITHMIC,\r\n      'counting-sort': ThinkingMode.ALGORITHMIC,\r\n      'radix-sort': ThinkingMode.ALGORITHMIC,\r\n      'bucket-sort': ThinkingMode.ALGORITHMIC,\r\n      'comparison-sort': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Searching and selection\r\n      'binary-search': ThinkingMode.ALGORITHMIC,\r\n      'linear-search': ThinkingMode.ALGORITHMIC,\r\n      'selection-algorithm': ThinkingMode.ALGORITHMIC,\r\n      'median-of-medians': ThinkingMode.ALGORITHMIC,\r\n      'order-statistics': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Data structures\r\n      'heap': ThinkingMode.ALGORITHMIC,\r\n      'binary-heap': ThinkingMode.ALGORITHMIC,\r\n      'priority-queue': ThinkingMode.ALGORITHMIC,\r\n      'hash-table': ThinkingMode.ALGORITHMIC,\r\n      'hashing': ThinkingMode.ALGORITHMIC,\r\n      'binary-search-tree': ThinkingMode.ALGORITHMIC,\r\n      'bst': ThinkingMode.ALGORITHMIC,\r\n      'red-black-tree': ThinkingMode.ALGORITHMIC,\r\n      'avl-tree': ThinkingMode.ALGORITHMIC,\r\n      'b-tree': ThinkingMode.ALGORITHMIC,\r\n      'fibonacci-heap': ThinkingMode.ALGORITHMIC,\r\n      'union-find': ThinkingMode.ALGORITHMIC,\r\n      'disjoint-set': ThinkingMode.ALGORITHMIC,\r\n      'trie': ThinkingMode.ALGORITHMIC,\r\n      'segment-tree': ThinkingMode.ALGORITHMIC,\r\n      'fenwick-tree': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Graph algorithms\r\n      'graph-algorithm': ThinkingMode.ALGORITHMIC,\r\n      'bfs': ThinkingMode.ALGORITHMIC,\r\n      'breadth-first': ThinkingMode.ALGORITHMIC,\r\n      'dfs': ThinkingMode.ALGORITHMIC,\r\n      'depth-first': ThinkingMode.ALGORITHMIC,\r\n      'topological-sort': ThinkingMode.ALGORITHMIC,\r\n      'strongly-connected': ThinkingMode.ALGORITHMIC,\r\n      'scc': ThinkingMode.ALGORITHMIC,\r\n      'minimum-spanning-tree': ThinkingMode.ALGORITHMIC,\r\n      'mst': ThinkingMode.ALGORITHMIC,\r\n      'kruskal': ThinkingMode.ALGORITHMIC,\r\n      'prim': ThinkingMode.ALGORITHMIC,\r\n      'dijkstra': ThinkingMode.ALGORITHMIC,\r\n      'bellman-ford': ThinkingMode.ALGORITHMIC,\r\n      'floyd-warshall': ThinkingMode.ALGORITHMIC,\r\n      'shortest-path': ThinkingMode.ALGORITHMIC,\r\n      'max-flow': ThinkingMode.ALGORITHMIC,\r\n      'ford-fulkerson': ThinkingMode.ALGORITHMIC,\r\n      'edmonds-karp': ThinkingMode.ALGORITHMIC,\r\n      'bipartite-matching': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Dynamic programming problems\r\n      'lcs': ThinkingMode.ALGORITHMIC,\r\n      'longest-common-subsequence': ThinkingMode.ALGORITHMIC,\r\n      'edit-distance': ThinkingMode.ALGORITHMIC,\r\n      'levenshtein': ThinkingMode.ALGORITHMIC,\r\n      'knapsack': ThinkingMode.ALGORITHMIC,\r\n      'matrix-chain': ThinkingMode.ALGORITHMIC,\r\n      'optimal-bst': ThinkingMode.ALGORITHMIC,\r\n      'rod-cutting': ThinkingMode.ALGORITHMIC,\r\n      'coin-change': ThinkingMode.ALGORITHMIC,\r\n\r\n      // String algorithms\r\n      'string-matching': ThinkingMode.ALGORITHMIC,\r\n      'pattern-matching': ThinkingMode.ALGORITHMIC,\r\n      'kmp': ThinkingMode.ALGORITHMIC,\r\n      'knuth-morris-pratt': ThinkingMode.ALGORITHMIC,\r\n      'rabin-karp': ThinkingMode.ALGORITHMIC,\r\n      'boyer-moore': ThinkingMode.ALGORITHMIC,\r\n      'suffix-array': ThinkingMode.ALGORITHMIC,\r\n      'suffix-tree': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Computational geometry\r\n      'convex-hull': ThinkingMode.ALGORITHMIC,\r\n      'graham-scan': ThinkingMode.ALGORITHMIC,\r\n      'jarvis-march': ThinkingMode.ALGORITHMIC,\r\n      'closest-pair': ThinkingMode.ALGORITHMIC,\r\n      'line-intersection': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Number theory algorithms\r\n      'gcd': ThinkingMode.ALGORITHMIC,\r\n      'euclidean': ThinkingMode.ALGORITHMIC,\r\n      'modular-arithmetic': ThinkingMode.ALGORITHMIC,\r\n      'primality': ThinkingMode.ALGORITHMIC,\r\n      'miller-rabin': ThinkingMode.ALGORITHMIC,\r\n      'rsa': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Matrix algorithms\r\n      'strassen': ThinkingMode.ALGORITHMIC,\r\n      'matrix-multiplication': ThinkingMode.ALGORITHMIC,\r\n      'matrix-exponentiation': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Advanced topics\r\n      'fft': ThinkingMode.ALGORITHMIC,\r\n      'fast-fourier': ThinkingMode.ALGORITHMIC,\r\n      'polynomial-multiplication': ThinkingMode.ALGORITHMIC,\r\n      'linear-programming': ThinkingMode.ALGORITHMIC,\r\n      'simplex': ThinkingMode.ALGORITHMIC,\r\n      'approximation-algorithm': ThinkingMode.ALGORITHMIC,\r\n      'np-hard': ThinkingMode.ALGORITHMIC,\r\n      'np-complete': ThinkingMode.ALGORITHMIC,\r\n\r\n      // Recurrences and analysis\r\n      'recurrence': ThinkingMode.ALGORITHMIC,\r\n      'master-theorem': ThinkingMode.ALGORITHMIC,\r\n      'recursion-tree': ThinkingMode.ALGORITHMIC,\r\n      'substitution-method': ThinkingMode.ALGORITHMIC,\r\n\r\n      // ===== ACADEMIC RESEARCH MODES (v7.4.0) =====\r\n\r\n      // Synthesis mode - literature review and knowledge integration\r\n      'synthesis': ThinkingMode.SYNTHESIS,\r\n      'literature-review': ThinkingMode.SYNTHESIS,\r\n      'literature-synthesis': ThinkingMode.SYNTHESIS,\r\n      'systematic-review': ThinkingMode.SYNTHESIS,\r\n      'meta-analysis': ThinkingMode.SYNTHESIS,\r\n      'knowledge-integration': ThinkingMode.SYNTHESIS,\r\n      'research-synthesis': ThinkingMode.SYNTHESIS,\r\n      'state-of-the-art': ThinkingMode.SYNTHESIS,\r\n      'survey-paper': ThinkingMode.SYNTHESIS,\r\n      'theme-extraction': ThinkingMode.SYNTHESIS,\r\n      'gap-analysis': ThinkingMode.SYNTHESIS,\r\n      'cross-study': ThinkingMode.SYNTHESIS,\r\n\r\n      // Argumentation mode - academic argumentation and Toulmin model\r\n      'argumentation': ThinkingMode.ARGUMENTATION,\r\n      'argument': ThinkingMode.ARGUMENTATION,\r\n      'toulmin': ThinkingMode.ARGUMENTATION,\r\n      'toulmin-model': ThinkingMode.ARGUMENTATION,\r\n      'claim-evidence': ThinkingMode.ARGUMENTATION,\r\n      'warrant': ThinkingMode.ARGUMENTATION,\r\n      'backing': ThinkingMode.ARGUMENTATION,\r\n      'qualifier': ThinkingMode.ARGUMENTATION,\r\n      'rebuttal': ThinkingMode.ARGUMENTATION,\r\n      'thesis-argument': ThinkingMode.ARGUMENTATION,\r\n      'position-paper': ThinkingMode.ARGUMENTATION,\r\n      'debate': ThinkingMode.ARGUMENTATION,\r\n      'persuasion': ThinkingMode.ARGUMENTATION,\r\n      'dialectic': ThinkingMode.ARGUMENTATION,\r\n      'rhetorical': ThinkingMode.ARGUMENTATION,\r\n\r\n      // Critique mode - critical analysis and peer review\r\n      'critique': ThinkingMode.CRITIQUE,\r\n      'critical-analysis': ThinkingMode.CRITIQUE,\r\n      'peer-review': ThinkingMode.CRITIQUE,\r\n      'paper-review': ThinkingMode.CRITIQUE,\r\n      'methodology-critique': ThinkingMode.CRITIQUE,\r\n      'validity-assessment': ThinkingMode.CRITIQUE,\r\n      'limitation-analysis': ThinkingMode.CRITIQUE,\r\n      'strength-weakness': ThinkingMode.CRITIQUE,\r\n      'constructive-feedback': ThinkingMode.CRITIQUE,\r\n      'research-critique': ThinkingMode.CRITIQUE,\r\n      'evaluation': ThinkingMode.CRITIQUE,\r\n\r\n      // Analysis mode - qualitative analysis methods\r\n      'qualitative-analysis': ThinkingMode.ANALYSIS,\r\n      'thematic-analysis': ThinkingMode.ANALYSIS,\r\n      'grounded-theory': ThinkingMode.ANALYSIS,\r\n      'discourse-analysis': ThinkingMode.ANALYSIS,\r\n      'content-analysis': ThinkingMode.ANALYSIS,\r\n      'narrative-analysis': ThinkingMode.ANALYSIS,\r\n      'phenomenological': ThinkingMode.ANALYSIS,\r\n      'ethnographic': ThinkingMode.ANALYSIS,\r\n      'coding': ThinkingMode.ANALYSIS,\r\n      'interview-analysis': ThinkingMode.ANALYSIS,\r\n      'document-analysis': ThinkingMode.ANALYSIS,\r\n      'case-study': ThinkingMode.ANALYSIS,\r\n      'qualitative': ThinkingMode.ANALYSIS,\r\n    };\r\n\r\n    return typeMap[problemType.toLowerCase()] || ThinkingMode.SEQUENTIAL;\r\n  }\r\n}\r\n","/**\r\n * Cryptanalytic Reasoning Mode - Type Definitions\r\n * Phase 11 (v7.2.0) - Bayesian cryptanalysis with Turing's deciban system\r\n *\r\n * Historical Note: Alan Turing developed the \"ban\" and \"deciban\" units at\r\n * Bletchley Park during WWII to quantify the weight of evidence for\r\n * cryptographic hypotheses. This work predates much of modern Bayesian\r\n * inference notation.\r\n *\r\n * A \"ban\" is log of the likelihood ratio (odds ratio)\r\n * A \"deciban\" is 1/10 of a ban (hence 10 decibans = 1 ban = factor of 10 in odds)\r\n */\r\n\r\nimport { BaseThought, ThinkingMode } from '../core.js';\r\n\r\n/**\r\n * Cryptanalytic thought types\r\n */\r\nexport type CryptanalyticThoughtType =\r\n  | 'hypothesis_formation'     // Formulate cryptographic hypothesis\r\n  | 'evidence_accumulation'    // Accumulate evidence (decibans)\r\n  | 'frequency_analysis'       // Statistical frequency analysis\r\n  | 'key_elimination'          // Key space elimination\r\n  | 'banburismus'             // Turing's Banburismus technique\r\n  | 'crib_analysis'           // Known plaintext attack\r\n  | 'isomorphism_detection';  // Pattern matching\r\n\r\n/**\r\n * Evidence unit (Turing's deciban system)\r\n *\r\n * 1 ban = log(10) = factor of 10 in odds\r\n * 1 deciban = 0.1 bans = log(10^0.1)  factor of 1.26 in odds\r\n *\r\n * Turing considered 20 decibans (2 bans = 100:1 odds) sufficient for certainty.\r\n */\r\nexport interface DecibanEvidence {\r\n  /** Description of the observation */\r\n  observation: string;\r\n\r\n  /** Deciban contribution (+ve supports hypothesis, -ve refutes) */\r\n  decibans: number;\r\n\r\n  /** The likelihood ratio P(E|H) / P(E|H) */\r\n  likelihoodRatio: number;\r\n\r\n  /** Source of this evidence */\r\n  source: 'frequency' | 'pattern' | 'crib' | 'statistical' | 'structural';\r\n\r\n  /** Confidence in this measurement */\r\n  confidence: number;\r\n\r\n  /** Explanation of the evidence */\r\n  explanation?: string;\r\n}\r\n\r\n/**\r\n * Evidence chain (accumulative)\r\n */\r\nexport interface EvidenceChain {\r\n  /** Hypothesis being tested */\r\n  hypothesis: string;\r\n\r\n  /** Individual pieces of evidence */\r\n  observations: DecibanEvidence[];\r\n\r\n  /** Running total of decibans */\r\n  totalDecibans: number;\r\n\r\n  /** Equivalent odds ratio (10^(decibans/10)) */\r\n  oddsRatio: number;\r\n\r\n  /** Conclusion based on threshold */\r\n  conclusion: 'confirmed' | 'refuted' | 'inconclusive';\r\n\r\n  /** Threshold for confirmation (typically 20 decibans) */\r\n  confirmationThreshold: number;\r\n\r\n  /** Threshold for refutation (typically -20 decibans) */\r\n  refutationThreshold: number;\r\n}\r\n\r\n/**\r\n * Key space analysis\r\n */\r\nexport interface KeySpaceAnalysis {\r\n  /** Total number of possible keys */\r\n  totalKeys: bigint | number;\r\n\r\n  /** Keys eliminated so far */\r\n  eliminatedKeys: bigint | number;\r\n\r\n  /** Remaining candidate keys */\r\n  remainingKeys: bigint | number;\r\n\r\n  /** Reduction factor (total / remaining) */\r\n  reductionFactor: number;\r\n\r\n  /** Methods used for elimination */\r\n  eliminationMethods: {\r\n    method: string;\r\n    keysEliminated: bigint | number;\r\n    explanation?: string;\r\n  }[];\r\n\r\n  /** Estimated work remaining */\r\n  estimatedWorkRemaining?: string;\r\n}\r\n\r\n/**\r\n * Frequency analysis results\r\n */\r\nexport interface FrequencyAnalysis {\r\n  /** Observed frequencies (character -> count) */\r\n  observed: Map<string, number> | Record<string, number>;\r\n\r\n  /** Expected frequencies for target language */\r\n  expected: Map<string, number> | Record<string, number>;\r\n\r\n  /** Chi-squared statistic */\r\n  chiSquared: number;\r\n\r\n  /** Degrees of freedom */\r\n  degreesOfFreedom: number;\r\n\r\n  /** P-value for the test */\r\n  pValue?: number;\r\n\r\n  /** Significant deviations from expected */\r\n  significantDeviations: {\r\n    character: string;\r\n    observed: number;\r\n    expected: number;\r\n    deviation: number;\r\n    isSignificant: boolean;\r\n  }[];\r\n\r\n  /** Index of coincidence */\r\n  indexOfCoincidence: number;\r\n\r\n  /** Expected IC for different languages */\r\n  expectedIC?: {\r\n    language: string;\r\n    ic: number;\r\n  }[];\r\n}\r\n\r\n/**\r\n * Banburismus analysis (Turing's technique for Enigma)\r\n *\r\n * Named after Banbury sheets used at Bletchley Park.\r\n * Used to determine Enigma wheel order and find \"tetragram\" hits.\r\n */\r\nexport interface BanburismusAnalysis {\r\n  /** Messages being compared */\r\n  messageA: string;\r\n  messageB: string;\r\n\r\n  /** Relative offset being tested */\r\n  offset: number;\r\n\r\n  /** Number of letter coincidences at this offset */\r\n  coincidences: number;\r\n\r\n  /** Expected coincidences for random text */\r\n  expectedCoincidences: number;\r\n\r\n  /** Deciban score for this offset */\r\n  decibanScore: number;\r\n\r\n  /** Whether this offset is significant */\r\n  isSignificant: boolean;\r\n\r\n  /** Inferred relationship if significant */\r\n  inference?: string;\r\n}\r\n\r\n/**\r\n * Crib analysis (known plaintext attack)\r\n */\r\nexport interface CribAnalysis {\r\n  /** The known plaintext (crib) */\r\n  crib: string;\r\n\r\n  /** Position of crib in message */\r\n  position: number;\r\n\r\n  /** Corresponding ciphertext segment */\r\n  ciphertext: string;\r\n\r\n  /** Constraints derived from crib */\r\n  constraints: {\r\n    plaintextChar: string;\r\n    ciphertextChar: string;\r\n    possibleMappings: string[];\r\n  }[];\r\n\r\n  /** Contradictions found (if any) */\r\n  contradictions: string[];\r\n\r\n  /** Score for this crib position */\r\n  score: number;\r\n\r\n  /** Whether this position is viable */\r\n  isViable: boolean;\r\n}\r\n\r\n/**\r\n * Cipher classification\r\n */\r\nexport type CipherType =\r\n  | 'substitution_simple'      // Caesar, Atbash\r\n  | 'substitution_polyalphabetic'  // Vigenre\r\n  | 'substitution_polygraphic' // Playfair, Hill\r\n  | 'transposition'            // Rail fence, columnar\r\n  | 'rotor'                    // Enigma, SIGABA\r\n  | 'stream'                   // One-time pad, RC4\r\n  | 'block'                    // DES, AES\r\n  | 'unknown';\r\n\r\n/**\r\n * Cryptographic hypothesis\r\n */\r\nexport interface CryptographicHypothesis {\r\n  /** Hypothesis ID */\r\n  id: string;\r\n\r\n  /** Description of the hypothesis */\r\n  description: string;\r\n\r\n  /** What cipher type is hypothesized */\r\n  cipherType?: CipherType;\r\n\r\n  /** Specific parameters hypothesized */\r\n  parameters?: Record<string, string | number>;\r\n\r\n  /** Prior probability (subjective) */\r\n  priorProbability: number;\r\n\r\n  /** Current posterior probability */\r\n  posteriorProbability: number;\r\n\r\n  /** Current deciban score */\r\n  decibanScore: number;\r\n\r\n  /** Evidence supporting/refuting this hypothesis */\r\n  evidence: DecibanEvidence[];\r\n\r\n  /** Status of the hypothesis */\r\n  status: 'active' | 'confirmed' | 'refuted' | 'superseded';\r\n}\r\n\r\n/**\r\n * Isomorphism pattern\r\n */\r\nexport interface IsomorphismPattern {\r\n  /** Pattern found */\r\n  pattern: string;\r\n\r\n  /** Positions in text */\r\n  positions: number[];\r\n\r\n  /** What this pattern suggests */\r\n  suggestion: string;\r\n\r\n  /** Deciban contribution */\r\n  decibanContribution: number;\r\n}\r\n\r\n/**\r\n * Cryptanalytic thought\r\n */\r\nexport interface CryptanalyticThought extends BaseThought {\r\n  mode: ThinkingMode.CRYPTANALYTIC;\r\n  thoughtType: CryptanalyticThoughtType;\r\n\r\n  /** The ciphertext being analyzed */\r\n  ciphertext?: string;\r\n\r\n  /** Known or suspected plaintext */\r\n  plaintext?: string;\r\n\r\n  /** Active hypotheses */\r\n  hypotheses?: CryptographicHypothesis[];\r\n\r\n  /** Current best hypothesis */\r\n  currentHypothesis?: CryptographicHypothesis;\r\n\r\n  /** Evidence chains */\r\n  evidenceChains?: EvidenceChain[];\r\n\r\n  /** Key space analysis */\r\n  keySpaceAnalysis?: KeySpaceAnalysis;\r\n\r\n  /** Frequency analysis results */\r\n  frequencyAnalysis?: FrequencyAnalysis;\r\n\r\n  /** Banburismus analysis (for Enigma-type ciphers) */\r\n  banburismusAnalysis?: BanburismusAnalysis[];\r\n\r\n  /** Crib analysis results */\r\n  cribAnalysis?: CribAnalysis[];\r\n\r\n  /** Isomorphism patterns found */\r\n  patterns?: IsomorphismPattern[];\r\n\r\n  /** Cipher type determination */\r\n  cipherType?: CipherType;\r\n\r\n  /** Dependencies */\r\n  dependencies: string[];\r\n\r\n  /** Assumptions */\r\n  assumptions: string[];\r\n\r\n  /** Uncertainty (lower when evidence is strong) */\r\n  uncertainty: number;\r\n\r\n  /** Key insight from this analysis */\r\n  keyInsight?: string;\r\n}\r\n\r\n/**\r\n * Type guard for Cryptanalytic thoughts\r\n */\r\nexport function isCryptanalyticThought(thought: BaseThought): thought is CryptanalyticThought {\r\n  return thought.mode === ThinkingMode.CRYPTANALYTIC;\r\n}\r\n\r\n/**\r\n * Convert likelihood ratio to decibans\r\n * decibans = 10  log(likelihood ratio)\r\n */\r\nexport function toDecibans(likelihoodRatio: number): number {\r\n  return 10 * Math.log10(likelihoodRatio);\r\n}\r\n\r\n/**\r\n * Convert decibans to likelihood ratio\r\n * likelihood ratio = 10^(decibans/10)\r\n */\r\nexport function fromDecibans(decibans: number): number {\r\n  return Math.pow(10, decibans / 10);\r\n}\r\n\r\n/**\r\n * Convert decibans to odds ratio\r\n */\r\nexport function decibansToOdds(decibans: number): number {\r\n  return fromDecibans(decibans);\r\n}\r\n\r\n/**\r\n * Convert decibans to probability (assuming prior of 0.5)\r\n */\r\nexport function decibansToProbability(decibans: number, priorProbability: number = 0.5): number {\r\n  const priorOdds = priorProbability / (1 - priorProbability);\r\n  const posteriorOdds = priorOdds * fromDecibans(decibans);\r\n  return posteriorOdds / (1 + posteriorOdds);\r\n}\r\n\r\n/**\r\n * Accumulate evidence and get total decibans\r\n */\r\nexport function accumulateEvidence(observations: DecibanEvidence[]): number {\r\n  return observations.reduce((total, obs) => total + obs.decibans, 0);\r\n}\r\n\r\n/**\r\n * Calculate index of coincidence for a text\r\n * IC = (f_i  (f_i - 1)) / (N  (N - 1))\r\n */\r\nexport function calculateIndexOfCoincidence(text: string): number {\r\n  const cleanText = text.toUpperCase().replace(/[^A-Z]/g, '');\r\n  const n = cleanText.length;\r\n  if (n <= 1) return 0;\r\n\r\n  const frequencies: Record<string, number> = {};\r\n  for (const char of cleanText) {\r\n    frequencies[char] = (frequencies[char] || 0) + 1;\r\n  }\r\n\r\n  let sum = 0;\r\n  for (const count of Object.values(frequencies)) {\r\n    sum += count * (count - 1);\r\n  }\r\n\r\n  return sum / (n * (n - 1));\r\n}\r\n\r\n/**\r\n * Expected index of coincidence for different languages\r\n */\r\nexport const LANGUAGE_IC: Record<string, number> = {\r\n  english: 0.0667,\r\n  german: 0.0762,\r\n  french: 0.0778,\r\n  spanish: 0.0775,\r\n  italian: 0.0738,\r\n  random: 0.0385, // 1/26 for uniform distribution\r\n};\r\n\r\n/**\r\n * Standard English letter frequencies (for frequency analysis)\r\n */\r\nexport const ENGLISH_FREQUENCIES: Record<string, number> = {\r\n  E: 0.127, T: 0.091, A: 0.082, O: 0.075, I: 0.070,\r\n  N: 0.067, S: 0.063, H: 0.061, R: 0.060, D: 0.043,\r\n  L: 0.040, C: 0.028, U: 0.028, M: 0.024, W: 0.024,\r\n  F: 0.022, G: 0.020, Y: 0.020, P: 0.019, B: 0.015,\r\n  V: 0.010, K: 0.008, J: 0.002, X: 0.002, Q: 0.001,\r\n  Z: 0.001,\r\n};\r\n","/**\r\n * Type definitions index (v8.0.0)\r\n * Exports all types for the DeepThinking MCP server\r\n *\r\n * Note: All thought types are exported from core.ts to avoid duplicate exports.\r\n * Mode-specific types are imported by core.ts and re-exported from there.\r\n */\r\n\r\nexport * from './core.js';\r\nexport * from './session.js';\r\n\r\n// Export ModeHandler types (Phase 10 v8.0.0)\r\nexport {\r\n  type ModeHandler,\r\n  type ValidationResult,\r\n  type ValidationError,\r\n  type ValidationWarning,\r\n  type ModeEnhancements,\r\n  type ModeStatus,\r\n  validationSuccess,\r\n  validationFailure,\r\n  createValidationError,\r\n  createValidationWarning,\r\n} from '../modes/handlers/ModeHandler.js';\r\n\r\n// Export mode recommendation types (doesn't conflict with core exports)\r\nexport * from './modes/recommendations.js';\r\n\r\n// Export engineering-specific types (sub-interfaces not in core)\r\nexport {\r\n  type Requirement,\r\n  type RequirementPriority,\r\n  type RequirementSource,\r\n  type RequirementStatus,\r\n  type RequirementsTraceability,\r\n  type TradeAlternative,\r\n  type TradeCriterion,\r\n  type TradeScore,\r\n  type TradeStudy,\r\n  type FailureMode,\r\n  type FailureModeAnalysis,\r\n  type SeverityRating,\r\n  type OccurrenceRating,\r\n  type DetectionRating,\r\n  type DesignDecision,\r\n  type DecisionStatus,\r\n  type DecisionAlternative,\r\n  type DesignDecisionLog,\r\n  type EngineeringAnalysisType,\r\n  isEngineeringThought,\r\n} from './modes/engineering.js';\r\n\r\n// Export computability-specific types (Phase 11 v7.2.0 - Turing's legacy)\r\nexport {\r\n  type ComputabilityThoughtType,\r\n  type TuringTransition,\r\n  type TuringMachine,\r\n  type ComputationStep,\r\n  type ComputationTrace,\r\n  type DecisionProblem,\r\n  type Reduction,\r\n  type DiagonalizationArgument,\r\n  type DecidabilityProof,\r\n  type ComplexityAnalysis,\r\n  type OracleAnalysis,\r\n  type ClassicUndecidableProblem,\r\n  isComputabilityThought,\r\n  createSimpleMachine,\r\n  reductionPreservesDecidability,\r\n  isPolynomialReduction,\r\n} from './modes/computability.js';\r\n\r\n// Export game theory extensions (Phase 11 v7.2.0 - von Neumann's legacy)\r\nexport {\r\n  type MinimaxAnalysis,\r\n  type CooperativeGame,\r\n  type CoalitionValue,\r\n  type CoreAllocation,\r\n  type CoalitionAnalysis,\r\n  type ShapleyValueDetails,\r\n  createCharacteristicFunction,\r\n  checkSuperadditivity,\r\n  calculateShapleyValue,\r\n} from './modes/gametheory.js';\r\n\r\n// Export cryptanalytic-specific types (Phase 11 v7.2.0 - Turing's Bletchley Park work)\r\nexport {\r\n  type CryptanalyticThoughtType,\r\n  type DecibanEvidence,\r\n  type EvidenceChain,\r\n  type KeySpaceAnalysis,\r\n  type FrequencyAnalysis,\r\n  type BanburismusAnalysis,\r\n  type CribAnalysis,\r\n  type CipherType,\r\n  type CryptographicHypothesis,\r\n  type IsomorphismPattern,\r\n  isCryptanalyticThought,\r\n  toDecibans,\r\n  fromDecibans,\r\n  decibansToOdds,\r\n  decibansToProbability,\r\n  accumulateEvidence,\r\n  calculateIndexOfCoincidence,\r\n  LANGUAGE_IC,\r\n  ENGLISH_FREQUENCIES,\r\n} from './modes/cryptanalytic.js';\r\n\r\n// Export synthesis-specific types (Phase 13 v7.4.0 - Academic Research)\r\nexport {\r\n  type SynthesisThoughtType,\r\n  type SourceType,\r\n  type SourceQuality,\r\n  type Source,\r\n  type Concept,\r\n  type Theme,\r\n  type Finding,\r\n  type Pattern,\r\n  type ConceptRelation,\r\n  type LiteratureGap,\r\n  type Contradiction,\r\n  type ConceptualFramework,\r\n  type SynthesisConclusion,\r\n  type ReviewMetadata,\r\n  isSynthesisThought,\r\n} from './modes/synthesis.js';\r\n\r\n// Export argumentation-specific types (Phase 13 v7.4.0 - Academic Research)\r\nexport {\r\n  type ArgumentationThoughtType,\r\n  type Claim,\r\n  type Grounds,\r\n  type Warrant,\r\n  type Backing,\r\n  type Qualifier,\r\n  type Rebuttal,\r\n  type RebuttalResponse,\r\n  type ToulminArgument,\r\n  type ArgumentChain,\r\n  type DialecticPosition,\r\n  type DialecticAnalysis,\r\n  type RhetoricalAppeal,\r\n  type RhetoricalStrategy,\r\n  type AudienceConsideration,\r\n  type LogicalFallacy,\r\n  isArgumentationThought,\r\n} from './modes/argumentation.js';\r\n\r\n// Export critique-specific types (Phase 13 v7.4.0 - Academic Research)\r\nexport {\r\n  type CritiqueThoughtType,\r\n  type WorkType,\r\n  type CritiquedWork,\r\n  type DesignAssessment,\r\n  type SampleAssessment,\r\n  type AnalysisAssessment,\r\n  type MethodologyEvaluation,\r\n  type ValidityAssessment,\r\n  type LogicalStructure,\r\n  type ArgumentCritique,\r\n  type EvidenceQuality,\r\n  type EvidenceUseCritique,\r\n  type NoveltyAssessment,\r\n  type ImpactAssessment,\r\n  type ContributionEvaluation,\r\n  type CritiquePoint,\r\n  type ImprovementSuggestion,\r\n  type CritiqueVerdict,\r\n  isCritiqueThought,\r\n} from './modes/critique.js';\r\n\r\n// Export analysis-specific types (Phase 13 v7.4.0 - Academic Research)\r\nexport {\r\n  type AnalysisThoughtType,\r\n  type AnalysisMethodology,\r\n  type DataSource,\r\n  type DataSegment,\r\n  type CodeType,\r\n  type Code,\r\n  type CodeCooccurrence,\r\n  type Codebook,\r\n  type ThemeLevel,\r\n  type QualitativeTheme,\r\n  type ThematicMap,\r\n  type MemoType,\r\n  type AnalyticalMemo,\r\n  type GTCategory,\r\n  type TheoreticalSampling,\r\n  type DiscoursePattern,\r\n  type QualitativeRigor,\r\n  isAnalysisThought,\r\n} from './modes/analysis.js';\r\n\r\n// Export recursive-specific types (Phase 10 Sprint 3 v8.4.0)\r\nexport {\r\n  type RecursiveStrategy,\r\n  type Subproblem,\r\n  type BaseCase,\r\n  type RecurrenceRelation,\r\n  type RecursiveCall,\r\n  type MemoizationState,\r\n  isRecursiveThought,\r\n} from './modes/recursive.js';\r\n\r\n// Export modal-specific types (Phase 10 Sprint 3 v8.4.0)\r\nexport {\r\n  type ModalLogicSystem,\r\n  type ModalDomain,\r\n  type PossibleWorld,\r\n  type AccessibilityRelation,\r\n  type ModalProposition,\r\n  type ModalOperator,\r\n  type KripkeFrame,\r\n  type KripkeProperty,\r\n  isModalThought,\r\n} from './modes/modal.js';\r\n\r\n// Export stochastic-specific types (Phase 10 Sprint 3 v8.4.0)\r\nexport {\r\n  type StochasticProcessType,\r\n  type StochasticState,\r\n  type StateTransition,\r\n  type MarkovChain,\r\n  type RandomVariable,\r\n  type DistributionType,\r\n  type SimulationResult,\r\n  type SimulationStatistics,\r\n  isStochasticThought,\r\n} from './modes/stochastic.js';\r\n\r\n// Export constraint-specific types (Phase 10 Sprint 3 v8.4.0)\r\nexport {\r\n  type CSPVariable,\r\n  type CSPConstraint,\r\n  type ConstraintType,\r\n  type Arc,\r\n  type PropagationMethod,\r\n  type SearchStrategy,\r\n  type ConsistencyLevel,\r\n  type Assignment,\r\n  isConstraintThought,\r\n} from './modes/constraint.js';\r\n\r\n// Export custom-specific types (Phase 10 Sprint 3 v8.4.0)\r\nexport {\r\n  type CustomField,\r\n  type CustomFieldType,\r\n  type CustomStage,\r\n  type CustomValidationRule,\r\n  isCustomThought,\r\n} from './modes/custom.js';\r\n","/**\r\n * Type guards for runtime type checking\r\n *\r\n * Provides safe type narrowing without using 'as any' assertions\r\n */\r\n\r\nimport { ExtendedThoughtType } from '../types/core.js';\r\n\r\n/**\r\n * Valid ExtendedThoughtType values\r\n */\r\nconst VALID_THOUGHT_TYPES: readonly ExtendedThoughtType[] = [\r\n  'problem_definition',\r\n  'constraints',\r\n  'model',\r\n  'proof',\r\n  'implementation',\r\n  'axiom_definition',\r\n  'theorem_statement',\r\n  'proof_construction',\r\n  'lemma_derivation',\r\n  'corollary',\r\n  'counterexample',\r\n  'algebraic_manipulation',\r\n  'symbolic_computation',\r\n  'numerical_analysis',\r\n  'symmetry_analysis',\r\n  'gauge_theory',\r\n  'field_equations',\r\n  'lagrangian',\r\n  'hamiltonian',\r\n  'conservation_law',\r\n  'dimensional_analysis',\r\n  'tensor_formulation',\r\n  'differential_geometry',\r\n  'decomposition',\r\n  'synthesis',\r\n  'abstraction',\r\n  'analogy',\r\n  'metacognition',\r\n  // Phase 8: Proof Decomposition Types\r\n  'proof_decomposition',\r\n  'dependency_analysis',\r\n  'consistency_check',\r\n  'gap_identification',\r\n  'assumption_trace',\r\n] as const;\r\n\r\n/**\r\n * Type guard for ExtendedThoughtType\r\n *\r\n * @param value - Value to check\r\n * @returns true if value is a valid ExtendedThoughtType\r\n */\r\nexport function isExtendedThoughtType(value: unknown): value is ExtendedThoughtType {\r\n  return typeof value === 'string' && VALID_THOUGHT_TYPES.includes(value as ExtendedThoughtType);\r\n}\r\n\r\n/**\r\n * Validate and cast to ExtendedThoughtType\r\n *\r\n * @param value - Value to validate\r\n * @param fallback - Fallback value if invalid (optional)\r\n * @returns Validated ExtendedThoughtType\r\n * @throws Error if value is invalid and no fallback provided\r\n */\r\nexport function toExtendedThoughtType(\r\n  value: unknown,\r\n  fallback?: ExtendedThoughtType\r\n): ExtendedThoughtType {\r\n  if (isExtendedThoughtType(value)) {\r\n    return value;\r\n  }\r\n\r\n  if (fallback !== undefined) {\r\n    return fallback;\r\n  }\r\n\r\n  throw new Error(\r\n    `Invalid ExtendedThoughtType: ${value}. Must be one of: ${VALID_THOUGHT_TYPES.join(', ')}`\r\n  );\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is a number\r\n */\r\nexport function isNumber(value: unknown): value is number {\r\n  return typeof value === 'number' && !isNaN(value) && isFinite(value);\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is a non-empty string\r\n */\r\nexport function isNonEmptyString(value: unknown): value is string {\r\n  return typeof value === 'string' && value.length > 0;\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is an array\r\n */\r\nexport function isArray<T>(value: unknown, itemGuard?: (item: unknown) => item is T): value is T[] {\r\n  if (!Array.isArray(value)) {\r\n    return false;\r\n  }\r\n\r\n  if (itemGuard) {\r\n    return value.every(itemGuard);\r\n  }\r\n\r\n  return true;\r\n}\r\n\r\n/**\r\n * Type guard for checking if value is a plain object\r\n */\r\nexport function isPlainObject(value: unknown): value is Record<string, unknown> {\r\n  return typeof value === 'object' && value !== null && !Array.isArray(value);\r\n}\r\n\r\n/**\r\n * Safe type cast with runtime validation\r\n *\r\n * @param value - Value to cast\r\n * @param guard - Type guard function\r\n * @param errorMessage - Error message if validation fails\r\n * @returns Validated value\r\n * @throws Error if validation fails\r\n */\r\nexport function safeCast<T>(\r\n  value: unknown,\r\n  guard: (value: unknown) => value is T,\r\n  errorMessage: string\r\n): T {\r\n  if (guard(value)) {\r\n    return value;\r\n  }\r\n  throw new Error(errorMessage);\r\n}\r\n","/**\n * GenericModeHandler - Phase 10 Sprint 1 (v8.0.0)\n *\n * Fallback handler that replicates current ThoughtFactory behavior\n * for modes that don't have specialized handlers yet.\n *\n * This handler:\n * - Provides a default implementation for any mode\n * - Delegates to the original ThoughtFactory logic\n * - Serves as a base class for specialized handlers\n */\n\nimport { randomUUID } from 'crypto';\nimport {\n  ThinkingMode,\n  Thought,\n  ShannonStage,\n  SequentialThought,\n  ShannonThought,\n  MathematicsThought,\n  PhysicsThought,\n  HybridThought,\n  InductiveThought,\n  DeductiveThought,\n  AbductiveThought,\n  CausalThought,\n  isFullyImplemented,\n} from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  ModeStatus,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\nimport { toExtendedThoughtType } from '../../utils/type-guards.js';\n\n/**\n * GenericModeHandler - Default implementation for all modes\n *\n * This handler provides the baseline thought creation logic that was\n * previously in ThoughtFactory's switch statement. It can be used:\n *\n * 1. As a fallback for modes without specialized handlers\n * 2. As a base class for specialized handlers to extend\n * 3. During incremental migration from ThoughtFactory\n *\n * @example\n * ```typescript\n * // Use directly for fallback\n * const handler = new GenericModeHandler(ThinkingMode.HYBRID);\n * const thought = handler.createThought(input, sessionId);\n *\n * // Extend for specialized behavior\n * class CausalHandler extends GenericModeHandler {\n *   constructor() {\n *     super(ThinkingMode.CAUSAL);\n *   }\n *\n *   validate(input: ThinkingToolInput): ValidationResult {\n *     // Add specialized validation\n *   }\n * }\n * ```\n */\nexport class GenericModeHandler implements ModeHandler {\n  readonly mode: ThinkingMode;\n  readonly modeName: string;\n  readonly description: string;\n\n  constructor(mode: ThinkingMode, modeName?: string, description?: string) {\n    this.mode = mode;\n    this.modeName = modeName || this.getDefaultModeName(mode);\n    this.description = description || this.getDefaultDescription(mode);\n  }\n\n  /**\n   * Create a thought object from input\n   *\n   * This replicates the logic from ThoughtFactory.createThought()\n   * for the mode this handler is configured for.\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): Thought {\n    const baseThought = this.createBaseThought(input, sessionId);\n    return this.createModeSpecificThought(input, baseThought);\n  }\n\n  /**\n   * Create the base thought structure common to all modes\n   */\n  protected createBaseThought(input: ThinkingToolInput, sessionId: string) {\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Create mode-specific thought structure\n   *\n   * Override this method in specialized handlers to add\n   * mode-specific logic and validation.\n   */\n  protected createModeSpecificThought(\n    input: ThinkingToolInput,\n    baseThought: ReturnType<typeof this.createBaseThought>\n  ): Thought {\n    const mode = (input.mode as ThinkingMode) || this.mode;\n\n    switch (mode) {\n      case ThinkingMode.SEQUENTIAL:\n        return {\n          ...baseThought,\n          mode: ThinkingMode.SEQUENTIAL,\n          revisionReason: input.revisionReason,\n          branchFrom: input.branchFrom,\n          branchId: input.branchId,\n        } as SequentialThought;\n\n      case ThinkingMode.SHANNON:\n        return {\n          ...baseThought,\n          mode: ThinkingMode.SHANNON,\n          stage: (input.stage as ShannonStage) || ShannonStage.PROBLEM_DEFINITION,\n          uncertainty: input.uncertainty || 0.5,\n          dependencies: input.dependencies || [],\n          assumptions: input.assumptions || [],\n        } as ShannonThought;\n\n      case ThinkingMode.MATHEMATICS:\n        return {\n          ...baseThought,\n          mode: ThinkingMode.MATHEMATICS,\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'model'),\n          mathematicalModel: input.mathematicalModel,\n          proofStrategy: input.proofStrategy,\n          dependencies: input.dependencies || [],\n          assumptions: input.assumptions || [],\n          uncertainty: input.uncertainty || 0.5,\n        } as MathematicsThought;\n\n      case ThinkingMode.PHYSICS:\n        return {\n          ...baseThought,\n          mode: ThinkingMode.PHYSICS,\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'model'),\n          tensorProperties: input.tensorProperties,\n          physicalInterpretation: input.physicalInterpretation,\n          dependencies: input.dependencies || [],\n          assumptions: input.assumptions || [],\n          uncertainty: input.uncertainty || 0.5,\n        } as PhysicsThought;\n\n      case ThinkingMode.INDUCTIVE:\n        return {\n          ...baseThought,\n          mode: ThinkingMode.INDUCTIVE,\n          observations: (input.observations as string[]) || [],\n          pattern: input.pattern,\n          generalization: input.generalization || '',\n          confidence: input.confidence ?? 0.5,\n          counterexamples: input.counterexamples || [],\n          sampleSize: input.sampleSize,\n        } as InductiveThought;\n\n      case ThinkingMode.DEDUCTIVE:\n        return {\n          ...baseThought,\n          mode: ThinkingMode.DEDUCTIVE,\n          premises: input.premises || [],\n          conclusion: (input.conclusion as string) || '',\n          logicForm: input.logicForm,\n          validityCheck: input.validityCheck ?? false,\n          soundnessCheck: input.soundnessCheck,\n        } as DeductiveThought;\n\n      case ThinkingMode.ABDUCTIVE:\n        return {\n          ...baseThought,\n          mode: ThinkingMode.ABDUCTIVE,\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'problem_definition'),\n          observations: (input.observations as any[]) || [],\n          hypotheses: input.hypotheses || [],\n          evaluationCriteria: input.evaluationCriteria,\n          evidence: input.evidence || [],\n          bestExplanation: input.bestExplanation,\n        } as AbductiveThought;\n\n      case ThinkingMode.CAUSAL:\n        return this.createCausalThought(input, baseThought);\n\n      case ThinkingMode.HYBRID:\n      default:\n        return this.createHybridThought(input, baseThought);\n    }\n  }\n\n  /**\n   * Create a causal thought with graph handling\n   */\n  protected createCausalThought(\n    input: ThinkingToolInput,\n    baseThought: ReturnType<typeof this.createBaseThought>\n  ): CausalThought {\n    const inputAny = input as any;\n    const causalGraph = input.causalGraph || {\n      nodes: inputAny.nodes || [],\n      edges: inputAny.edges || [],\n    };\n\n    return {\n      ...baseThought,\n      mode: ThinkingMode.CAUSAL,\n      thoughtType: toExtendedThoughtType(input.thoughtType, 'problem_definition'),\n      causalGraph,\n      interventions: input.interventions || [],\n      mechanisms: input.mechanisms || [],\n      confounders: input.confounders || [],\n    } as CausalThought;\n  }\n\n  /**\n   * Create a hybrid thought (default fallback)\n   */\n  protected createHybridThought(\n    input: ThinkingToolInput,\n    baseThought: ReturnType<typeof this.createBaseThought>\n  ): HybridThought {\n    return {\n      ...baseThought,\n      mode: ThinkingMode.HYBRID,\n      thoughtType: toExtendedThoughtType(input.thoughtType, 'synthesis'),\n      stage: input.stage as ShannonStage,\n      uncertainty: input.uncertainty,\n      dependencies: input.dependencies,\n      assumptions: input.assumptions,\n      mathematicalModel: input.mathematicalModel,\n      tensorProperties: input.tensorProperties,\n      physicalInterpretation: input.physicalInterpretation,\n      primaryMode: (input.mode || ThinkingMode.HYBRID) as any,\n      secondaryFeatures: [],\n    } as HybridThought;\n  }\n\n  /**\n   * Validate mode-specific input\n   *\n   * The generic handler performs basic validation.\n   * Specialized handlers should override for deeper validation.\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const warnings = [];\n\n    // Basic validation - check thought content\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    // Check thought numbers\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Warn about experimental modes\n    const mode = (input.mode as ThinkingMode) || ThinkingMode.HYBRID;\n    if (!isFullyImplemented(mode)) {\n      warnings.push(\n        createValidationWarning(\n          'mode',\n          `Mode '${mode}' is experimental with limited runtime implementation`,\n          'Consider using a fully implemented mode for production use'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   *\n   * The generic handler returns minimal enhancements.\n   * Specialized handlers can provide richer context.\n   */\n  getEnhancements(thought: Thought): ModeEnhancements {\n    return {\n      suggestions: [],\n      relatedModes: this.getRelatedModes(thought.mode),\n    };\n  }\n\n  /**\n   * Get mode status information\n   */\n  getModeStatus(): ModeStatus {\n    return {\n      mode: this.mode,\n      isFullyImplemented: isFullyImplemented(this.mode),\n      hasSpecializedHandler: false, // GenericHandler is not specialized\n      note: isFullyImplemented(this.mode)\n        ? undefined\n        : 'This mode is experimental with limited runtime implementation',\n    };\n  }\n\n  /**\n   * Get related modes for suggestions\n   */\n  protected getRelatedModes(mode: ThinkingMode): ThinkingMode[] {\n    const relatedModes: Record<ThinkingMode, ThinkingMode[]> = {\n      [ThinkingMode.SEQUENTIAL]: [ThinkingMode.HYBRID, ThinkingMode.SHANNON],\n      [ThinkingMode.SHANNON]: [ThinkingMode.SEQUENTIAL, ThinkingMode.MATHEMATICS],\n      [ThinkingMode.MATHEMATICS]: [ThinkingMode.PHYSICS, ThinkingMode.ALGORITHMIC],\n      [ThinkingMode.PHYSICS]: [ThinkingMode.MATHEMATICS, ThinkingMode.ENGINEERING],\n      [ThinkingMode.HYBRID]: [ThinkingMode.SEQUENTIAL, ThinkingMode.METAREASONING],\n      [ThinkingMode.CAUSAL]: [ThinkingMode.BAYESIAN, ThinkingMode.COUNTERFACTUAL],\n      [ThinkingMode.BAYESIAN]: [ThinkingMode.CAUSAL, ThinkingMode.EVIDENTIAL],\n      [ThinkingMode.INDUCTIVE]: [ThinkingMode.DEDUCTIVE, ThinkingMode.ABDUCTIVE],\n      [ThinkingMode.DEDUCTIVE]: [ThinkingMode.INDUCTIVE, ThinkingMode.FORMALLOGIC],\n      [ThinkingMode.ABDUCTIVE]: [ThinkingMode.INDUCTIVE, ThinkingMode.CAUSAL],\n      [ThinkingMode.COUNTERFACTUAL]: [ThinkingMode.CAUSAL, ThinkingMode.GAMETHEORY],\n      [ThinkingMode.ANALOGICAL]: [ThinkingMode.INDUCTIVE, ThinkingMode.FIRSTPRINCIPLES],\n      [ThinkingMode.TEMPORAL]: [ThinkingMode.CAUSAL, ThinkingMode.SEQUENTIAL],\n      [ThinkingMode.GAMETHEORY]: [ThinkingMode.OPTIMIZATION, ThinkingMode.COUNTERFACTUAL],\n      [ThinkingMode.EVIDENTIAL]: [ThinkingMode.BAYESIAN, ThinkingMode.SCIENTIFICMETHOD],\n      [ThinkingMode.FIRSTPRINCIPLES]: [ThinkingMode.DEDUCTIVE, ThinkingMode.ANALOGICAL],\n      [ThinkingMode.SYSTEMSTHINKING]: [ThinkingMode.CAUSAL, ThinkingMode.OPTIMIZATION],\n      [ThinkingMode.SCIENTIFICMETHOD]: [ThinkingMode.EVIDENTIAL, ThinkingMode.SYNTHESIS],\n      [ThinkingMode.FORMALLOGIC]: [ThinkingMode.DEDUCTIVE, ThinkingMode.MATHEMATICS],\n      [ThinkingMode.METAREASONING]: [ThinkingMode.HYBRID, ThinkingMode.CRITIQUE],\n      [ThinkingMode.RECURSIVE]: [ThinkingMode.ALGORITHMIC, ThinkingMode.MATHEMATICS],\n      [ThinkingMode.MODAL]: [ThinkingMode.FORMALLOGIC, ThinkingMode.COUNTERFACTUAL],\n      [ThinkingMode.STOCHASTIC]: [ThinkingMode.BAYESIAN, ThinkingMode.OPTIMIZATION],\n      [ThinkingMode.CONSTRAINT]: [ThinkingMode.OPTIMIZATION, ThinkingMode.FORMALLOGIC],\n      [ThinkingMode.OPTIMIZATION]: [ThinkingMode.CONSTRAINT, ThinkingMode.GAMETHEORY],\n      [ThinkingMode.ENGINEERING]: [ThinkingMode.OPTIMIZATION, ThinkingMode.SYSTEMSTHINKING],\n      [ThinkingMode.COMPUTABILITY]: [ThinkingMode.ALGORITHMIC, ThinkingMode.FORMALLOGIC],\n      [ThinkingMode.CRYPTANALYTIC]: [ThinkingMode.BAYESIAN, ThinkingMode.ALGORITHMIC],\n      [ThinkingMode.ALGORITHMIC]: [ThinkingMode.MATHEMATICS, ThinkingMode.OPTIMIZATION],\n      [ThinkingMode.SYNTHESIS]: [ThinkingMode.CRITIQUE, ThinkingMode.ANALYSIS],\n      [ThinkingMode.ARGUMENTATION]: [ThinkingMode.CRITIQUE, ThinkingMode.FORMALLOGIC],\n      [ThinkingMode.CRITIQUE]: [ThinkingMode.ARGUMENTATION, ThinkingMode.SYNTHESIS],\n      [ThinkingMode.ANALYSIS]: [ThinkingMode.SYNTHESIS, ThinkingMode.SCIENTIFICMETHOD],\n      [ThinkingMode.CUSTOM]: [ThinkingMode.HYBRID],\n    };\n\n    return relatedModes[mode] || [ThinkingMode.HYBRID];\n  }\n\n  /**\n   * Get default mode name\n   */\n  private getDefaultModeName(mode: ThinkingMode): string {\n    const names: Record<ThinkingMode, string> = {\n      [ThinkingMode.SEQUENTIAL]: 'Sequential Thinking',\n      [ThinkingMode.SHANNON]: 'Shannon Problem-Solving',\n      [ThinkingMode.MATHEMATICS]: 'Mathematical Reasoning',\n      [ThinkingMode.PHYSICS]: 'Physics Modeling',\n      [ThinkingMode.HYBRID]: 'Hybrid Mode',\n      [ThinkingMode.INDUCTIVE]: 'Inductive Reasoning',\n      [ThinkingMode.DEDUCTIVE]: 'Deductive Reasoning',\n      [ThinkingMode.ABDUCTIVE]: 'Abductive Reasoning',\n      [ThinkingMode.CAUSAL]: 'Causal Analysis',\n      [ThinkingMode.BAYESIAN]: 'Bayesian Inference',\n      [ThinkingMode.COUNTERFACTUAL]: 'Counterfactual Reasoning',\n      [ThinkingMode.ANALOGICAL]: 'Analogical Reasoning',\n      [ThinkingMode.TEMPORAL]: 'Temporal Reasoning',\n      [ThinkingMode.GAMETHEORY]: 'Game Theory',\n      [ThinkingMode.EVIDENTIAL]: 'Evidential Reasoning',\n      [ThinkingMode.FIRSTPRINCIPLES]: 'First Principles',\n      [ThinkingMode.SYSTEMSTHINKING]: 'Systems Thinking',\n      [ThinkingMode.SCIENTIFICMETHOD]: 'Scientific Method',\n      [ThinkingMode.FORMALLOGIC]: 'Formal Logic',\n      [ThinkingMode.METAREASONING]: 'Meta-Reasoning',\n      [ThinkingMode.RECURSIVE]: 'Recursive Reasoning',\n      [ThinkingMode.MODAL]: 'Modal Logic',\n      [ThinkingMode.STOCHASTIC]: 'Stochastic Reasoning',\n      [ThinkingMode.CONSTRAINT]: 'Constraint Satisfaction',\n      [ThinkingMode.OPTIMIZATION]: 'Optimization',\n      [ThinkingMode.ENGINEERING]: 'Engineering Analysis',\n      [ThinkingMode.COMPUTABILITY]: 'Computability Theory',\n      [ThinkingMode.CRYPTANALYTIC]: 'Cryptanalysis',\n      [ThinkingMode.ALGORITHMIC]: 'Algorithm Design',\n      [ThinkingMode.SYNTHESIS]: 'Literature Synthesis',\n      [ThinkingMode.ARGUMENTATION]: 'Academic Argumentation',\n      [ThinkingMode.CRITIQUE]: 'Critical Analysis',\n      [ThinkingMode.ANALYSIS]: 'Qualitative Analysis',\n      [ThinkingMode.CUSTOM]: 'Custom Mode',\n    };\n\n    return names[mode] || 'Unknown Mode';\n  }\n\n  /**\n   * Get default mode description\n   */\n  private getDefaultDescription(mode: ThinkingMode): string {\n    const descriptions: Record<ThinkingMode, string> = {\n      [ThinkingMode.SEQUENTIAL]: 'Step-by-step logical reasoning',\n      [ThinkingMode.SHANNON]: 'Claude Shannon\\'s 5-stage problem-solving methodology',\n      [ThinkingMode.MATHEMATICS]: 'Mathematical proofs and formal reasoning',\n      [ThinkingMode.PHYSICS]: 'Physical modeling with tensors and conservation laws',\n      [ThinkingMode.HYBRID]: 'Flexible combination of multiple reasoning modes',\n      [ThinkingMode.INDUCTIVE]: 'Reasoning from specific cases to general principles',\n      [ThinkingMode.DEDUCTIVE]: 'Reasoning from general principles to specific conclusions',\n      [ThinkingMode.ABDUCTIVE]: 'Inference to the best explanation',\n      [ThinkingMode.CAUSAL]: 'Causal graph analysis and intervention reasoning',\n      [ThinkingMode.BAYESIAN]: 'Probabilistic reasoning with prior updates',\n      [ThinkingMode.COUNTERFACTUAL]: 'What-if scenario analysis',\n      [ThinkingMode.ANALOGICAL]: 'Reasoning by structural similarity',\n      [ThinkingMode.TEMPORAL]: 'Temporal logic and event sequencing',\n      [ThinkingMode.GAMETHEORY]: 'Strategic interaction and Nash equilibria',\n      [ThinkingMode.EVIDENTIAL]: 'Dempster-Shafer evidence theory',\n      [ThinkingMode.FIRSTPRINCIPLES]: 'Reasoning from fundamental truths',\n      [ThinkingMode.SYSTEMSTHINKING]: 'Feedback loops and system dynamics',\n      [ThinkingMode.SCIENTIFICMETHOD]: 'Hypothesis testing and experimentation',\n      [ThinkingMode.FORMALLOGIC]: 'Propositional and predicate logic',\n      [ThinkingMode.METAREASONING]: 'Reasoning about reasoning strategies',\n      [ThinkingMode.RECURSIVE]: 'Self-similar problem decomposition',\n      [ThinkingMode.MODAL]: 'Possibility and necessity reasoning',\n      [ThinkingMode.STOCHASTIC]: 'Probabilistic state transitions',\n      [ThinkingMode.CONSTRAINT]: 'Constraint satisfaction problems',\n      [ThinkingMode.OPTIMIZATION]: 'Objective function optimization',\n      [ThinkingMode.ENGINEERING]: 'Requirements, trade studies, and FMEA',\n      [ThinkingMode.COMPUTABILITY]: 'Turing machines and decidability',\n      [ThinkingMode.CRYPTANALYTIC]: 'Cryptanalysis with deciban evidence',\n      [ThinkingMode.ALGORITHMIC]: 'CLRS algorithm design and analysis',\n      [ThinkingMode.SYNTHESIS]: 'Literature review and integration',\n      [ThinkingMode.ARGUMENTATION]: 'Toulmin model academic arguments',\n      [ThinkingMode.CRITIQUE]: 'Critical evaluation of scholarly work',\n      [ThinkingMode.ANALYSIS]: 'Qualitative data analysis methods',\n      [ThinkingMode.CUSTOM]: 'User-defined reasoning mode',\n    };\n\n    return descriptions[mode] || 'Unknown reasoning mode';\n  }\n}\n","/**\n * SequentialHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Sequential reasoning mode with:\n * - Iterative thinking with revision tracking\n * - Branching support for alternative reasoning paths\n * - Dependency tracking between thoughts\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, SequentialThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * SequentialHandler - Specialized handler for iterative reasoning\n *\n * Provides:\n * - Step-by-step logical progression\n * - Revision tracking with reasons\n * - Branching for alternative paths\n * - Dependency tracking between thoughts\n */\nexport class SequentialHandler implements ModeHandler {\n  readonly mode = ThinkingMode.SEQUENTIAL;\n  readonly modeName = 'Sequential Thinking';\n  readonly description = 'Step-by-step logical reasoning with revision and branching support';\n\n  /**\n   * Supported thought types for sequential mode\n   */\n  private readonly supportedThoughtTypes = [\n    'initial',\n    'continuation',\n    'revision',\n    'branch',\n    'conclusion',\n  ];\n\n  /**\n   * Create a sequential thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): SequentialThought {\n    const inputAny = input as any;\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.SEQUENTIAL,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      revisionReason: input.revisionReason,\n\n      // Dependency tracking\n      dependencies: input.dependencies || [],\n      buildUpon: inputAny.buildUpon || [],\n\n      // Branching support\n      branchFrom: input.branchFrom,\n      branchId: input.branchId,\n      branchFromThought: inputAny.branchFromThought,\n\n      // Iteration control\n      needsMoreThoughts: input.nextThoughtNeeded,\n    };\n  }\n\n  /**\n   * Validate sequential-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const warnings = [];\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate revision consistency\n    if (input.isRevision && !input.revisesThought) {\n      warnings.push(\n        createValidationWarning(\n          'revisesThought',\n          'Revision marked but no thought ID specified to revise',\n          'Specify which thought this revises using revisesThought field'\n        )\n      );\n    }\n\n    if (input.revisesThought && !input.isRevision) {\n      warnings.push(\n        createValidationWarning(\n          'isRevision',\n          'revisesThought specified but isRevision is not set',\n          'Set isRevision: true when revising a previous thought'\n        )\n      );\n    }\n\n    // Validate branching consistency\n    if (input.branchFrom && !input.branchId) {\n      warnings.push(\n        createValidationWarning(\n          'branchId',\n          'Branching from a thought but no branch ID specified',\n          'Provide a branchId to identify this reasoning branch'\n        )\n      );\n    }\n\n    // Suggest revision reason if revising\n    if (input.isRevision && !input.revisionReason) {\n      warnings.push(\n        createValidationWarning(\n          'revisionReason',\n          'Revision without a stated reason',\n          'Explain why this revision is being made for better tracking'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get sequential-specific enhancements\n   */\n  getEnhancements(thought: SequentialThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.HYBRID, ThinkingMode.SHANNON, ThinkingMode.METAREASONING],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        thoughtNumber: thought.thoughtNumber,\n        totalThoughts: thought.totalThoughts,\n        progress: thought.thoughtNumber / thought.totalThoughts,\n      },\n      mentalModels: [\n        'Iterative Refinement',\n        'Step-by-Step Analysis',\n        'Progressive Elaboration',\n      ],\n    };\n\n    // Progress-based suggestions\n    const progress = thought.thoughtNumber / thought.totalThoughts;\n\n    if (progress < 0.3) {\n      enhancements.guidingQuestions!.push(\n        'What are the key elements to explore in this problem?'\n      );\n      enhancements.suggestions!.push(\n        'Focus on understanding the problem space before diving into solutions'\n      );\n    } else if (progress < 0.7) {\n      enhancements.guidingQuestions!.push(\n        'Are there alternative approaches worth considering?'\n      );\n      if (!thought.branchId) {\n        enhancements.suggestions!.push(\n          'Consider branching to explore alternative reasoning paths'\n        );\n      }\n    } else {\n      enhancements.guidingQuestions!.push(\n        'What conclusions can be drawn from the reasoning so far?'\n      );\n      enhancements.suggestions!.push(\n        'Start synthesizing findings into actionable conclusions'\n      );\n    }\n\n    // Revision tracking\n    if (thought.isRevision) {\n      enhancements.metrics!.isRevision = 1;\n      if (!thought.revisionReason) {\n        enhancements.warnings!.push(\n          'This revision lacks a documented reason - consider adding one for clarity'\n        );\n      }\n    }\n\n    // Branching tracking\n    if (thought.branchId) {\n      enhancements.metrics!.hasBranch = 1;\n      enhancements.suggestions!.push(\n        `Currently on branch: ${thought.branchId}`\n      );\n    }\n\n    // Dependencies tracking\n    if (thought.dependencies && thought.dependencies.length > 0) {\n      enhancements.metrics!.dependencyCount = thought.dependencies.length;\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n}\n","/**\n * ShannonHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Shannon methodology mode with:\n * - 5-stage problem-solving process validation\n * - Stage progression tracking\n * - Uncertainty and confidence assessment\n * - Alternative approach suggestions\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, ShannonStage, ShannonThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Stage order for validation and progression tracking\n */\nconst STAGE_ORDER: ShannonStage[] = [\n  ShannonStage.PROBLEM_DEFINITION,\n  ShannonStage.CONSTRAINTS,\n  ShannonStage.MODEL,\n  ShannonStage.PROOF,\n  ShannonStage.IMPLEMENTATION,\n];\n\n/**\n * ShannonHandler - Specialized handler for Shannon's problem-solving methodology\n *\n * Implements Claude Shannon's systematic approach:\n * 1. Problem Definition - Clearly state the problem\n * 2. Constraints - Identify all constraints and boundaries\n * 3. Model - Create a formal model of the solution\n * 4. Proof - Prove the model is correct\n * 5. Implementation - Translate to practical implementation\n */\nexport class ShannonHandler implements ModeHandler {\n  readonly mode = ThinkingMode.SHANNON;\n  readonly modeName = 'Shannon Problem-Solving';\n  readonly description = \"Claude Shannon's 5-stage systematic problem-solving methodology\";\n\n  /**\n   * Supported thought types for Shannon mode\n   */\n  private readonly supportedThoughtTypes = [\n    'problem_definition',\n    'constraint_identification',\n    'model_construction',\n    'proof_development',\n    'implementation_planning',\n    'recheck',\n    'refinement',\n  ];\n\n  /**\n   * Create a Shannon thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): ShannonThought {\n    const inputAny = input as any;\n\n    // Resolve stage\n    const stage = this.resolveStage(input.stage);\n\n    // Calculate confidence if factors provided\n    const confidenceFactors = inputAny.confidenceFactors || this.calculateConfidenceFactors(inputAny);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.SHANNON,\n\n      // Core Shannon fields\n      stage,\n      uncertainty: input.uncertainty ?? 0.5,\n      dependencies: input.dependencies || [],\n      assumptions: input.assumptions || [],\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n\n      // Extended Shannon fields\n      recheckStep: inputAny.recheckStep,\n      confidenceFactors,\n      alternativeApproaches: inputAny.alternativeApproaches || [],\n      knownLimitations: inputAny.knownLimitations || [],\n    };\n  }\n\n  /**\n   * Validate Shannon-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate stage\n    if (input.stage) {\n      if (!STAGE_ORDER.includes(input.stage as ShannonStage)) {\n        errors.push(\n          createValidationError(\n            'stage',\n            `Invalid Shannon stage: ${input.stage}. Valid stages: ${STAGE_ORDER.join(', ')}`,\n            'INVALID_SHANNON_STAGE'\n          )\n        );\n      }\n    } else {\n      warnings.push(\n        createValidationWarning(\n          'stage',\n          'No stage specified - defaulting to problem_definition',\n          'Specify a stage to track methodology progression'\n        )\n      );\n    }\n\n    // Validate uncertainty\n    if (input.uncertainty !== undefined) {\n      if (input.uncertainty < 0 || input.uncertainty > 1) {\n        errors.push(\n          createValidationError(\n            'uncertainty',\n            `Uncertainty (${input.uncertainty}) must be between 0 and 1`,\n            'UNCERTAINTY_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Validate confidence factors if provided\n    if (inputAny.confidenceFactors) {\n      const cf = inputAny.confidenceFactors;\n      const cfFields = ['dataQuality', 'methodologyRobustness', 'assumptionValidity'];\n      for (const field of cfFields) {\n        if (cf[field] !== undefined && (cf[field] < 0 || cf[field] > 1)) {\n          warnings.push(\n            createValidationWarning(\n              `confidenceFactors.${field}`,\n              `${field} (${cf[field]}) should be between 0 and 1`,\n              'Normalize confidence factors to [0, 1] range'\n            )\n          );\n        }\n      }\n    }\n\n    // Suggest assumptions for early stages\n    if (!input.assumptions || input.assumptions.length === 0) {\n      const stage = input.stage as ShannonStage;\n      if (stage === ShannonStage.PROBLEM_DEFINITION || stage === ShannonStage.CONSTRAINTS) {\n        warnings.push(\n          createValidationWarning(\n            'assumptions',\n            'No assumptions stated in early stage',\n            'Document assumptions early to improve clarity and validation'\n          )\n        );\n      }\n    }\n\n    // Validate recheck step if provided\n    if (inputAny.recheckStep) {\n      if (!inputAny.recheckStep.stepToRecheck || !inputAny.recheckStep.reason) {\n        warnings.push(\n          createValidationWarning(\n            'recheckStep',\n            'Recheck step missing required fields',\n            'Include stepToRecheck and reason for proper tracking'\n          )\n        );\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get Shannon-specific enhancements\n   */\n  getEnhancements(thought: ShannonThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.SEQUENTIAL, ThinkingMode.MATHEMATICS, ThinkingMode.ENGINEERING],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        stageIndex: STAGE_ORDER.indexOf(thought.stage),\n        uncertainty: thought.uncertainty,\n        dependencyCount: thought.dependencies?.length || 0,\n        assumptionCount: thought.assumptions?.length || 0,\n      },\n      mentalModels: [\n        \"Shannon's Problem-Solving\",\n        'Systematic Decomposition',\n        'Constraint-Based Design',\n        'Proof-First Development',\n      ],\n    };\n\n    // Stage-specific guidance\n    switch (thought.stage) {\n      case ShannonStage.PROBLEM_DEFINITION:\n        enhancements.guidingQuestions!.push(\n          'What is the essential problem we are trying to solve?',\n          'What would a solution look like?',\n          'What are the inputs and outputs?'\n        );\n        enhancements.suggestions!.push(\n          'Focus on clearly stating what success looks like before moving to constraints'\n        );\n        break;\n\n      case ShannonStage.CONSTRAINTS:\n        enhancements.guidingQuestions!.push(\n          'What are the hard constraints that cannot be violated?',\n          'What are the soft constraints we should optimize for?',\n          'Are there any hidden constraints we might be missing?'\n        );\n        enhancements.suggestions!.push(\n          'Document all constraints explicitly - implicit constraints often cause problems later'\n        );\n        break;\n\n      case ShannonStage.MODEL:\n        enhancements.guidingQuestions!.push(\n          'Does the model capture all essential aspects of the problem?',\n          'Is the model simple enough to reason about formally?',\n          'What assumptions does the model make?'\n        );\n        enhancements.suggestions!.push(\n          'Consider creating multiple models and comparing their trade-offs'\n        );\n        break;\n\n      case ShannonStage.PROOF:\n        enhancements.guidingQuestions!.push(\n          'What property are we trying to prove?',\n          'What technique is most appropriate for this proof?',\n          'Are there edge cases we need to handle?'\n        );\n        enhancements.suggestions!.push(\n          'Start with the simplest case and build up to the general proof'\n        );\n        enhancements.relatedModes = [ThinkingMode.MATHEMATICS, ThinkingMode.FORMALLOGIC, ThinkingMode.DEDUCTIVE];\n        break;\n\n      case ShannonStage.IMPLEMENTATION:\n        enhancements.guidingQuestions!.push(\n          'How does the implementation map to the formal model?',\n          'What practical constraints affect the implementation?',\n          'How will we verify the implementation matches the proof?'\n        );\n        enhancements.suggestions!.push(\n          'Create a clear mapping between model elements and implementation components'\n        );\n        enhancements.relatedModes = [ThinkingMode.ENGINEERING, ThinkingMode.ALGORITHMIC];\n        break;\n    }\n\n    // Uncertainty-based suggestions\n    if (thought.uncertainty > 0.7) {\n      enhancements.warnings!.push(\n        'High uncertainty detected - consider revisiting assumptions or gathering more information'\n      );\n    } else if (thought.uncertainty < 0.2) {\n      enhancements.suggestions!.push(\n        'Low uncertainty suggests good progress - consider moving to the next stage'\n      );\n    }\n\n    // Confidence factors analysis\n    if (thought.confidenceFactors) {\n      const cf = thought.confidenceFactors;\n      enhancements.metrics!.dataQuality = cf.dataQuality;\n      enhancements.metrics!.methodologyRobustness = cf.methodologyRobustness;\n      enhancements.metrics!.assumptionValidity = cf.assumptionValidity;\n\n      const avgConfidence = (cf.dataQuality + cf.methodologyRobustness + cf.assumptionValidity) / 3;\n      enhancements.metrics!.overallConfidence = avgConfidence;\n\n      if (cf.assumptionValidity < 0.5) {\n        enhancements.warnings!.push(\n          'Low assumption validity - validate assumptions before proceeding'\n        );\n      }\n    }\n\n    // Alternative approaches\n    if (thought.alternativeApproaches && thought.alternativeApproaches.length > 0) {\n      enhancements.metrics!.alternativeCount = thought.alternativeApproaches.length;\n    } else if (thought.stage !== ShannonStage.IMPLEMENTATION) {\n      enhancements.suggestions!.push(\n        'Consider documenting alternative approaches for comparison'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Resolve stage from input\n   */\n  private resolveStage(stage: string | undefined): ShannonStage {\n    if (!stage) {\n      return ShannonStage.PROBLEM_DEFINITION;\n    }\n\n    const stageMap: Record<string, ShannonStage> = {\n      problem_definition: ShannonStage.PROBLEM_DEFINITION,\n      constraints: ShannonStage.CONSTRAINTS,\n      model: ShannonStage.MODEL,\n      proof: ShannonStage.PROOF,\n      implementation: ShannonStage.IMPLEMENTATION,\n    };\n\n    return stageMap[stage.toLowerCase()] || ShannonStage.PROBLEM_DEFINITION;\n  }\n\n  /**\n   * Calculate confidence factors from input if not provided\n   */\n  private calculateConfidenceFactors(input: any): { dataQuality: number; methodologyRobustness: number; assumptionValidity: number } | undefined {\n    // Only calculate if we have relevant data\n    if (!input.assumptions && !input.dependencies) {\n      return undefined;\n    }\n\n    // Heuristic calculation\n    const assumptionCount = input.assumptions?.length || 0;\n    const dependencyCount = input.dependencies?.length || 0;\n\n    return {\n      dataQuality: Math.max(0.3, 1 - (input.uncertainty || 0.5)),\n      methodologyRobustness: Math.min(0.9, 0.5 + (dependencyCount * 0.1)),\n      assumptionValidity: assumptionCount > 0 ? 0.7 : 0.5,\n    };\n  }\n}\n","/**\n * MathematicsHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Mathematics reasoning mode with:\n * - Proof strategy validation and tracking\n * - Mathematical model validation\n * - Proof decomposition support\n * - Consistency checking\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, MathematicsThought } from '../../types/core.js';\nimport type {\n  MathematicsThoughtType,\n  MathematicalModel,\n  ProofStrategy,\n} from '../../types/modes/mathematics.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid mathematics thought types\n */\nconst VALID_THOUGHT_TYPES: MathematicsThoughtType[] = [\n  'axiom_definition',\n  'theorem_statement',\n  'proof_construction',\n  'lemma_derivation',\n  'corollary',\n  'counterexample',\n  'algebraic_manipulation',\n  'symbolic_computation',\n  'numerical_analysis',\n  'proof_decomposition',\n  'dependency_analysis',\n  'consistency_check',\n  'gap_identification',\n  'assumption_trace',\n];\n\n/**\n * Valid proof strategy types\n */\nconst VALID_PROOF_TYPES = ['direct', 'contradiction', 'induction', 'construction', 'contrapositive'];\n\n/**\n * MathematicsHandler - Specialized handler for mathematical reasoning\n *\n * Provides:\n * - Formal proof construction and validation\n * - Mathematical model checking\n * - Proof decomposition analysis\n * - Dependency tracking\n */\nexport class MathematicsHandler implements ModeHandler {\n  readonly mode = ThinkingMode.MATHEMATICS;\n  readonly modeName = 'Mathematical Reasoning';\n  readonly description = 'Formal mathematical proofs, theorems, and symbolic computation';\n\n  /**\n   * Create a mathematics thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): MathematicsThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Validate and normalize mathematical model\n    const mathematicalModel = this.normalizeModel(input.mathematicalModel);\n\n    // Validate proof strategy\n    const proofStrategy = this.normalizeProofStrategy(input.proofStrategy);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.MATHEMATICS,\n\n      // Core mathematics fields\n      thoughtType,\n      mathematicalModel,\n      proofStrategy,\n      dependencies: input.dependencies || [],\n      assumptions: input.assumptions || [],\n      uncertainty: input.uncertainty ?? 0.5,\n\n      // Extended fields\n      theorems: inputAny.theorems || [],\n      logicalForm: inputAny.logicalForm,\n      references: inputAny.references || [],\n\n      // Proof analysis fields (populated by external engine)\n      decomposition: inputAny.decomposition,\n      consistencyReport: inputAny.consistencyReport,\n      gapAnalysis: inputAny.gapAnalysis,\n      assumptionAnalysis: inputAny.assumptionAnalysis,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate mathematics-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate uncertainty\n    if (input.uncertainty !== undefined) {\n      if (input.uncertainty < 0 || input.uncertainty > 1) {\n        errors.push(\n          createValidationError(\n            'uncertainty',\n            `Uncertainty (${input.uncertainty}) must be between 0 and 1`,\n            'UNCERTAINTY_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Validate mathematical model\n    if (input.mathematicalModel) {\n      const modelValidation = this.validateModel(input.mathematicalModel);\n      errors.push(...modelValidation.errors);\n      warnings.push(...modelValidation.warnings);\n    }\n\n    // Validate proof strategy\n    if (input.proofStrategy) {\n      const strategyValidation = this.validateProofStrategy(input.proofStrategy);\n      errors.push(...strategyValidation.errors);\n      warnings.push(...strategyValidation.warnings);\n    }\n\n    // Suggest assumptions for theorem statements\n    if (inputAny.thoughtType === 'theorem_statement' &&\n        (!input.assumptions || input.assumptions.length === 0)) {\n      warnings.push(\n        createValidationWarning(\n          'assumptions',\n          'Theorem stated without explicit assumptions',\n          'Document assumptions to ensure the theorem is well-defined'\n        )\n      );\n    }\n\n    // Suggest proof strategy for proof construction\n    if (inputAny.thoughtType === 'proof_construction' && !input.proofStrategy) {\n      warnings.push(\n        createValidationWarning(\n          'proofStrategy',\n          'Proof construction without explicit strategy',\n          'Specify the proof approach (direct, contradiction, induction, etc.)'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mathematics-specific enhancements\n   */\n  getEnhancements(thought: MathematicsThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.PHYSICS, ThinkingMode.FORMALLOGIC, ThinkingMode.DEDUCTIVE],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        dependencyCount: thought.dependencies?.length || 0,\n        assumptionCount: thought.assumptions?.length || 0,\n        uncertainty: thought.uncertainty,\n      },\n      mentalModels: [\n        'Axiomatic Reasoning',\n        'Proof by Induction',\n        'Proof by Contradiction',\n        'Constructive Proof',\n        'Symbolic Manipulation',\n      ],\n    };\n\n    // Thought type-specific guidance\n    switch (thought.thoughtType) {\n      case 'axiom_definition':\n        enhancements.guidingQuestions!.push(\n          'Is this axiom consistent with existing axioms?',\n          'Is this axiom independent from other axioms?'\n        );\n        break;\n\n      case 'theorem_statement':\n        enhancements.guidingQuestions!.push(\n          'What is the simplest case of this theorem?',\n          'Are there known counterexamples to consider?'\n        );\n        enhancements.suggestions!.push(\n          'State the theorem precisely with all quantifiers explicit'\n        );\n        break;\n\n      case 'proof_construction':\n        if (thought.proofStrategy) {\n          enhancements.suggestions!.push(\n            `Using ${thought.proofStrategy.type} proof strategy`\n          );\n          if (thought.proofStrategy.completeness < 0.5) {\n            enhancements.warnings!.push(\n              'Proof is less than 50% complete - continue developing steps'\n            );\n          }\n        }\n        enhancements.guidingQuestions!.push(\n          'What is the key insight that makes this proof work?'\n        );\n        break;\n\n      case 'lemma_derivation':\n        enhancements.suggestions!.push(\n          'Ensure the lemma is general enough to be reusable'\n        );\n        enhancements.guidingQuestions!.push(\n          'Is this lemma necessary, or can it be simplified?'\n        );\n        break;\n\n      case 'counterexample':\n        enhancements.guidingQuestions!.push(\n          'Does this counterexample apply to the general case?',\n          'What conditions would make the original statement true?'\n        );\n        break;\n\n      case 'proof_decomposition':\n        enhancements.relatedModes = [ThinkingMode.ALGORITHMIC, ThinkingMode.FORMALLOGIC];\n        enhancements.suggestions!.push(\n          'Break the proof into atomic, independently verifiable steps'\n        );\n        break;\n\n      case 'consistency_check':\n        enhancements.guidingQuestions!.push(\n          'Are there any hidden assumptions?',\n          'Do all definitions agree with standard usage?'\n        );\n        break;\n\n      case 'gap_identification':\n        enhancements.suggestions!.push(\n          'Document each gap with its severity and suggested fix'\n        );\n        break;\n    }\n\n    // Mathematical model analysis\n    if (thought.mathematicalModel) {\n      enhancements.metrics!.hasModel = 1;\n      if (thought.mathematicalModel.validated) {\n        enhancements.metrics!.modelValidated = 1;\n      } else {\n        enhancements.suggestions!.push(\n          'Consider validating the mathematical model'\n        );\n      }\n    }\n\n    // Proof strategy analysis\n    if (thought.proofStrategy) {\n      enhancements.metrics!.proofType = thought.proofStrategy.type;\n      enhancements.metrics!.proofCompleteness = thought.proofStrategy.completeness;\n\n      if (thought.proofStrategy.type === 'induction') {\n        if (!thought.proofStrategy.baseCase) {\n          enhancements.warnings!.push('Induction proof missing base case');\n        }\n        if (!thought.proofStrategy.inductiveStep) {\n          enhancements.warnings!.push('Induction proof missing inductive step');\n        }\n      }\n    }\n\n    // Decomposition analysis\n    if (thought.decomposition) {\n      enhancements.metrics!.atomCount = thought.decomposition.atomCount;\n      enhancements.metrics!.completeness = thought.decomposition.completeness;\n      enhancements.metrics!.rigorLevel = thought.decomposition.rigorLevel;\n    }\n\n    // Consistency report\n    if (thought.consistencyReport) {\n      if (!thought.consistencyReport.isConsistent) {\n        enhancements.warnings!.push(\n          `Inconsistency detected: ${thought.consistencyReport.inconsistencies.length} issue(s)`\n        );\n      }\n      enhancements.metrics!.consistencyScore = thought.consistencyReport.overallScore;\n    }\n\n    // Gap analysis\n    if (thought.gapAnalysis) {\n      if (thought.gapAnalysis.gaps.length > 0) {\n        enhancements.warnings!.push(\n          `${thought.gapAnalysis.gaps.length} gap(s) identified in reasoning`\n        );\n      }\n      enhancements.metrics!.gapCount = thought.gapAnalysis.gaps.length;\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return VALID_THOUGHT_TYPES.includes(thoughtType as MathematicsThoughtType);\n  }\n\n  /**\n   * Resolve thought type\n   */\n  private resolveThoughtType(inputType: string | undefined): MathematicsThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as MathematicsThoughtType)) {\n      return inputType as MathematicsThoughtType;\n    }\n    return 'axiom_definition';\n  }\n\n  /**\n   * Normalize mathematical model\n   */\n  private normalizeModel(model: MathematicalModel | undefined): MathematicalModel | undefined {\n    if (!model) return undefined;\n\n    return {\n      latex: model.latex || '',\n      symbolic: model.symbolic || '',\n      ascii: model.ascii,\n      tensorRank: model.tensorRank,\n      dimensions: model.dimensions,\n      invariants: model.invariants || [],\n      symmetries: model.symmetries || [],\n      complexity: model.complexity,\n      stabilityNotes: model.stabilityNotes,\n      validated: model.validated ?? false,\n      validationMethod: model.validationMethod,\n    };\n  }\n\n  /**\n   * Normalize proof strategy\n   */\n  private normalizeProofStrategy(strategy: Partial<ProofStrategy> | undefined): ProofStrategy | undefined {\n    if (!strategy || !strategy.type) return undefined;\n\n    return {\n      type: VALID_PROOF_TYPES.includes(strategy.type) ? strategy.type : 'direct',\n      steps: strategy.steps || [],\n      baseCase: strategy.baseCase,\n      inductiveStep: strategy.inductiveStep,\n      completeness: strategy.completeness ?? 0,\n    };\n  }\n\n  /**\n   * Validate mathematical model\n   */\n  private validateModel(model: MathematicalModel): ValidationResult {\n    const warnings = [];\n\n    if (!model.latex && !model.symbolic) {\n      warnings.push(\n        createValidationWarning(\n          'mathematicalModel',\n          'Model has no LaTeX or symbolic representation',\n          'Provide at least one formal representation'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate proof strategy\n   */\n  private validateProofStrategy(strategy: Partial<ProofStrategy> & { type: string; steps?: string[] }): ValidationResult {\n    const errors: ReturnType<typeof createValidationError>[] = [];\n    const warnings: ReturnType<typeof createValidationWarning>[] = [];\n\n    if (!VALID_PROOF_TYPES.includes(strategy.type)) {\n      errors.push(\n        createValidationError(\n          'proofStrategy.type',\n          `Invalid proof type: ${strategy.type}. Valid types: ${VALID_PROOF_TYPES.join(', ')}`,\n          'INVALID_PROOF_TYPE'\n        )\n      );\n    }\n\n    if (strategy.type === 'induction') {\n      if (!strategy.baseCase) {\n        warnings.push(\n          createValidationWarning(\n            'proofStrategy.baseCase',\n            'Induction proof should specify base case',\n            'Add baseCase field for clarity'\n          )\n        );\n      }\n      if (!strategy.inductiveStep) {\n        warnings.push(\n          createValidationWarning(\n            'proofStrategy.inductiveStep',\n            'Induction proof should specify inductive step',\n            'Add inductiveStep field for clarity'\n          )\n        );\n      }\n    }\n\n    if (strategy.completeness !== undefined && (strategy.completeness < 0 || strategy.completeness > 1)) {\n      warnings.push(\n        createValidationWarning(\n          'proofStrategy.completeness',\n          `Completeness (${strategy.completeness}) should be between 0 and 1`,\n          'Normalize completeness to [0, 1] range'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n}\n","/**\n * PhysicsHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Physics reasoning mode with:\n * - Tensor property validation\n * - Physical interpretation tracking\n * - Conservation law checking\n * - Dimensional analysis support\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, PhysicsThought } from '../../types/core.js';\nimport type {\n  PhysicsThoughtType,\n  TensorProperties,\n  PhysicalInterpretation,\n  FieldTheoryContext,\n} from '../../types/modes/physics.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid physics thought types\n */\nconst VALID_THOUGHT_TYPES: PhysicsThoughtType[] = [\n  'symmetry_analysis',\n  'gauge_theory',\n  'field_equations',\n  'lagrangian',\n  'hamiltonian',\n  'conservation_law',\n  'dimensional_analysis',\n  'tensor_formulation',\n  'differential_geometry',\n];\n\n/**\n * Valid tensor transformation types\n */\nconst VALID_TRANSFORMATIONS = ['covariant', 'contravariant', 'mixed'];\n\n/**\n * PhysicsHandler - Specialized handler for physics reasoning\n *\n * Provides:\n * - Tensor mathematics support\n * - Conservation law tracking\n * - Dimensional analysis validation\n * - Field theory context\n */\nexport class PhysicsHandler implements ModeHandler {\n  readonly mode = ThinkingMode.PHYSICS;\n  readonly modeName = 'Physics Modeling';\n  readonly description = 'Physical modeling with tensor mathematics, conservation laws, and field theory';\n\n  /**\n   * Create a physics thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): PhysicsThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Normalize tensor properties\n    const tensorProperties = this.normalizeTensor(input.tensorProperties);\n\n    // Normalize physical interpretation\n    const physicalInterpretation = this.normalizeInterpretation(input.physicalInterpretation);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.PHYSICS,\n\n      // Core physics fields\n      thoughtType,\n      tensorProperties,\n      physicalInterpretation,\n      dependencies: input.dependencies || [],\n      assumptions: input.assumptions || [],\n      uncertainty: input.uncertainty ?? 0.5,\n\n      // Extended fields\n      fieldTheoryContext: inputAny.fieldTheoryContext,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate physics-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate uncertainty\n    if (input.uncertainty !== undefined) {\n      if (input.uncertainty < 0 || input.uncertainty > 1) {\n        errors.push(\n          createValidationError(\n            'uncertainty',\n            `Uncertainty (${input.uncertainty}) must be between 0 and 1`,\n            'UNCERTAINTY_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Validate tensor properties\n    if (input.tensorProperties) {\n      const tensorValidation = this.validateTensor(input.tensorProperties);\n      errors.push(...tensorValidation.errors);\n      warnings.push(...tensorValidation.warnings);\n    }\n\n    // Validate physical interpretation\n    if (input.physicalInterpretation) {\n      const interpValidation = this.validateInterpretation(input.physicalInterpretation);\n      errors.push(...interpValidation.errors);\n      warnings.push(...interpValidation.warnings);\n    }\n\n    // Validate field theory context\n    if (inputAny.fieldTheoryContext) {\n      const fieldValidation = this.validateFieldTheory(inputAny.fieldTheoryContext);\n      errors.push(...fieldValidation.errors);\n      warnings.push(...fieldValidation.warnings);\n    }\n\n    // Suggest tensor for appropriate thought types\n    if (!input.tensorProperties) {\n      const tensorTypes: PhysicsThoughtType[] = ['tensor_formulation', 'gauge_theory', 'differential_geometry'];\n      if (tensorTypes.includes(inputAny.thoughtType)) {\n        warnings.push(\n          createValidationWarning(\n            'tensorProperties',\n            `${inputAny.thoughtType} typically involves tensor mathematics`,\n            'Consider adding tensorProperties for formal representation'\n          )\n        );\n      }\n    }\n\n    // Suggest conservation laws for physical interpretation\n    if (input.physicalInterpretation &&\n        (!input.physicalInterpretation.conservationLaws ||\n         input.physicalInterpretation.conservationLaws.length === 0)) {\n      warnings.push(\n        createValidationWarning(\n          'physicalInterpretation.conservationLaws',\n          'No conservation laws specified',\n          'Document relevant conservation laws (energy, momentum, charge, etc.)'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get physics-specific enhancements\n   */\n  getEnhancements(thought: PhysicsThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.MATHEMATICS, ThinkingMode.ENGINEERING, ThinkingMode.SYSTEMSTHINKING],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        dependencyCount: thought.dependencies?.length || 0,\n        assumptionCount: thought.assumptions?.length || 0,\n        uncertainty: thought.uncertainty,\n      },\n      mentalModels: [\n        'Tensor Analysis',\n        'Conservation Principles',\n        'Symmetry and Invariance',\n        'Dimensional Analysis',\n        'Lagrangian Mechanics',\n      ],\n    };\n\n    // Thought type-specific guidance\n    switch (thought.thoughtType) {\n      case 'symmetry_analysis':\n        enhancements.guidingQuestions!.push(\n          'What symmetries are present in the system?',\n          'What conservation laws follow from these symmetries (Noether)?'\n        );\n        enhancements.suggestions!.push(\n          \"Apply Noether's theorem to derive conservation laws from symmetries\"\n        );\n        break;\n\n      case 'gauge_theory':\n        enhancements.guidingQuestions!.push(\n          'What is the gauge group?',\n          'What are the gauge fields and their transformations?'\n        );\n        enhancements.relatedModes = [ThinkingMode.MATHEMATICS, ThinkingMode.FORMALLOGIC];\n        break;\n\n      case 'field_equations':\n        enhancements.guidingQuestions!.push(\n          'What are the sources in these field equations?',\n          'Are the equations linear or nonlinear?'\n        );\n        break;\n\n      case 'lagrangian':\n        enhancements.guidingQuestions!.push(\n          'What are the generalized coordinates?',\n          'Are there any constraints on the system?'\n        );\n        enhancements.suggestions!.push(\n          'Derive equations of motion using Euler-Lagrange equations'\n        );\n        break;\n\n      case 'hamiltonian':\n        enhancements.guidingQuestions!.push(\n          'What are the canonical coordinates and momenta?',\n          'Is the Hamiltonian time-independent (energy conserved)?'\n        );\n        break;\n\n      case 'conservation_law':\n        enhancements.guidingQuestions!.push(\n          'What quantity is conserved?',\n          'What symmetry gives rise to this conservation law?'\n        );\n        enhancements.suggestions!.push(\n          'Express the conservation law in both differential and integral forms'\n        );\n        break;\n\n      case 'dimensional_analysis':\n        enhancements.guidingQuestions!.push(\n          'What are the fundamental dimensions involved?',\n          'Are all terms dimensionally consistent?'\n        );\n        enhancements.suggestions!.push(\n          'Use the Buckingham  theorem for non-dimensionalization'\n        );\n        break;\n\n      case 'tensor_formulation':\n        enhancements.guidingQuestions!.push(\n          'What is the tensor rank and index structure?',\n          'Is the tensor covariant under the required transformations?'\n        );\n        break;\n\n      case 'differential_geometry':\n        enhancements.guidingQuestions!.push(\n          'What is the manifold structure?',\n          'What are the relevant curvature invariants?'\n        );\n        enhancements.relatedModes = [ThinkingMode.MATHEMATICS];\n        break;\n    }\n\n    // Tensor analysis\n    if (thought.tensorProperties) {\n      const tp = thought.tensorProperties;\n      enhancements.metrics!.tensorRank = tp.rank[0] + tp.rank[1];\n      enhancements.metrics!.symmetryCount = tp.symmetries?.length || 0;\n      enhancements.metrics!.invariantCount = tp.invariants?.length || 0;\n\n      if (tp.symmetries && tp.symmetries.length > 0) {\n        enhancements.suggestions!.push(\n          `Tensor has ${tp.symmetries.length} symmetr${tp.symmetries.length > 1 ? 'ies' : 'y'}: ${tp.symmetries.slice(0, 3).join(', ')}`\n        );\n      }\n    }\n\n    // Physical interpretation analysis\n    if (thought.physicalInterpretation) {\n      const pi = thought.physicalInterpretation;\n      enhancements.metrics!.conservationLawCount = pi.conservationLaws?.length || 0;\n\n      if (pi.conservationLaws && pi.conservationLaws.length > 0) {\n        enhancements.suggestions!.push(\n          `Conservation laws: ${pi.conservationLaws.join(', ')}`\n        );\n      }\n\n      if (pi.constraints && pi.constraints.length > 0) {\n        enhancements.metrics!.constraintCount = pi.constraints.length;\n      }\n    }\n\n    // Field theory context\n    if (thought.fieldTheoryContext) {\n      const ft = thought.fieldTheoryContext;\n      enhancements.metrics!.fieldCount = ft.fields?.length || 0;\n      enhancements.metrics!.interactionCount = ft.interactions?.length || 0;\n\n      if (ft.symmetryGroup) {\n        enhancements.suggestions!.push(`Symmetry group: ${ft.symmetryGroup}`);\n      }\n    }\n\n    // High uncertainty warning\n    if (thought.uncertainty > 0.7) {\n      enhancements.warnings!.push(\n        'High uncertainty - consider reviewing assumptions or adding constraints'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return VALID_THOUGHT_TYPES.includes(thoughtType as PhysicsThoughtType);\n  }\n\n  /**\n   * Resolve thought type\n   */\n  private resolveThoughtType(inputType: string | undefined): PhysicsThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as PhysicsThoughtType)) {\n      return inputType as PhysicsThoughtType;\n    }\n    return 'symmetry_analysis';\n  }\n\n  /**\n   * Normalize tensor properties\n   */\n  private normalizeTensor(tensor: TensorProperties | undefined): TensorProperties | undefined {\n    if (!tensor) return undefined;\n\n    return {\n      rank: tensor.rank || [0, 0],\n      components: tensor.components || '',\n      latex: tensor.latex || '',\n      symmetries: tensor.symmetries || [],\n      invariants: tensor.invariants || [],\n      transformation: VALID_TRANSFORMATIONS.includes(tensor.transformation)\n        ? tensor.transformation\n        : 'mixed',\n      indexStructure: tensor.indexStructure,\n      coordinateSystem: tensor.coordinateSystem,\n    };\n  }\n\n  /**\n   * Normalize physical interpretation\n   */\n  private normalizeInterpretation(interp: PhysicalInterpretation | undefined): PhysicalInterpretation | undefined {\n    if (!interp) return undefined;\n\n    return {\n      quantity: interp.quantity || '',\n      units: interp.units || '',\n      conservationLaws: interp.conservationLaws || [],\n      constraints: interp.constraints,\n      observables: interp.observables,\n    };\n  }\n\n  /**\n   * Validate tensor properties\n   */\n  private validateTensor(tensor: TensorProperties): ValidationResult {\n    const errors = [];\n    const warnings = [];\n\n    // Validate rank\n    if (!tensor.rank || !Array.isArray(tensor.rank) || tensor.rank.length !== 2) {\n      errors.push(\n        createValidationError(\n          'tensorProperties.rank',\n          'Tensor rank must be a tuple [contravariant, covariant]',\n          'INVALID_TENSOR_RANK'\n        )\n      );\n    } else {\n      if (tensor.rank[0] < 0 || tensor.rank[1] < 0) {\n        errors.push(\n          createValidationError(\n            'tensorProperties.rank',\n            'Tensor rank indices must be non-negative',\n            'NEGATIVE_TENSOR_RANK'\n          )\n        );\n      }\n    }\n\n    // Validate transformation type\n    if (tensor.transformation && !VALID_TRANSFORMATIONS.includes(tensor.transformation)) {\n      warnings.push(\n        createValidationWarning(\n          'tensorProperties.transformation',\n          `Unknown transformation type: ${tensor.transformation}`,\n          `Valid types: ${VALID_TRANSFORMATIONS.join(', ')}`\n        )\n      );\n    }\n\n    // Suggest LaTeX representation\n    if (!tensor.latex) {\n      warnings.push(\n        createValidationWarning(\n          'tensorProperties.latex',\n          'No LaTeX representation provided',\n          'Add LaTeX for clear mathematical presentation'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate physical interpretation\n   */\n  private validateInterpretation(interp: PhysicalInterpretation): ValidationResult {\n    const warnings = [];\n\n    if (!interp.quantity) {\n      warnings.push(\n        createValidationWarning(\n          'physicalInterpretation.quantity',\n          'No physical quantity specified',\n          'Identify what physical quantity this represents'\n        )\n      );\n    }\n\n    if (!interp.units) {\n      warnings.push(\n        createValidationWarning(\n          'physicalInterpretation.units',\n          'No units specified',\n          'Specify units for dimensional consistency'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate field theory context\n   */\n  private validateFieldTheory(context: FieldTheoryContext): ValidationResult {\n    const warnings = [];\n\n    if (!context.fields || context.fields.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'fieldTheoryContext.fields',\n          'No fields specified',\n          'List the fields involved in the theory'\n        )\n      );\n    }\n\n    if (!context.symmetryGroup) {\n      warnings.push(\n        createValidationWarning(\n          'fieldTheoryContext.symmetryGroup',\n          'No symmetry group specified',\n          'Identify the symmetry group (e.g., U(1), SU(2), etc.)'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n}\n","/**\n * HybridHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Hybrid reasoning mode with:\n * - Multi-mode combination based on recommendation engine\n * - Convergent validation across reasoning approaches\n * - 97% confidence target through multi-modal synthesis\n * - Dynamic mode switching based on problem evolution\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport type { HybridThought as BaseHybridThought } from '../../types/modes/hybrid.js';\nimport { ModeRecommender, ProblemCharacteristics, ModeRecommendation } from '../../types/modes/recommendations.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Mode contribution tracking\n */\ninterface ModeContribution {\n  mode: ThinkingMode;\n  confidence: number;\n  insights: string[];\n  evidence: string[];\n  agreementWithOthers: number; // 0-1 correlation with other modes\n}\n\n/**\n * Convergence status for multi-modal synthesis\n */\ninterface ConvergenceStatus {\n  achieved: boolean;\n  targetConfidence: number;\n  currentConfidence: number;\n  modesAgreeing: number;\n  totalModes: number;\n  convergenceScore: number; // 0-1 measure of agreement\n}\n\n/**\n * Extended Hybrid thought with recommendation engine integration\n */\nexport interface HybridThought extends BaseHybridThought {\n  // Multi-mode combination\n  activeModes: ThinkingMode[];\n  modeContributions: ModeContribution[];\n  convergenceStatus: ConvergenceStatus;\n\n  // Recommendation-based selection\n  problemCharacteristics?: ProblemCharacteristics;\n  selectedRecommendations?: ModeRecommendation[];\n\n  // Synthesis tracking\n  synthesisStrategy: 'parallel' | 'sequential' | 'weighted';\n  overallConfidence: number;\n}\n\n/**\n * Valid thought types for hybrid mode\n */\nconst VALID_THOUGHT_TYPES = [\n  'mode_selection',\n  'parallel_analysis',\n  'sequential_analysis',\n  'convergence_check',\n  'synthesis',\n  'confidence_assessment',\n  'mode_switching',\n] as const;\n\ntype HybridThoughtType = (typeof VALID_THOUGHT_TYPES)[number];\n\n/**\n * Valid synthesis strategies\n */\nconst VALID_STRATEGIES = ['parallel', 'sequential', 'weighted'] as const;\n\n/**\n * Target confidence for hybrid mode\n */\nconst TARGET_CONFIDENCE = 0.97;\n\n/**\n * HybridHandler - Specialized handler for hybrid multi-mode reasoning\n *\n * Combines multiple reasoning modes based on the recommendation engine\n * to achieve high confidence through convergent validation. The hybrid\n * mode synthesizes insights from the top 3 recommended modes.\n *\n * Key features:\n * - Uses ModeRecommender to select optimal mode combinations\n * - Tracks confidence contributions from each active mode\n * - Monitors convergence across different reasoning approaches\n * - Targets 97% confidence through multi-modal synthesis\n */\nexport class HybridHandler implements ModeHandler {\n  readonly mode = ThinkingMode.HYBRID;\n  readonly modeName = 'Hybrid Multi-Mode Reasoning';\n  readonly description =\n    'Combines top 3 recommended modes for 97% confidence through multi-modal synthesis';\n\n  private recommender: ModeRecommender;\n\n  /**\n   * Supported thought types for hybrid mode\n   */\n  private readonly supportedThoughtTypes = [...VALID_THOUGHT_TYPES];\n\n  constructor() {\n    this.recommender = new ModeRecommender();\n  }\n\n  /**\n   * Create a hybrid thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): HybridThought {\n    const inputAny = input as any;\n\n    // Get problem characteristics\n    const problemCharacteristics = inputAny.problemCharacteristics\n      ? this.normalizeProblemCharacteristics(inputAny.problemCharacteristics)\n      : this.inferCharacteristics(input);\n\n    // Get mode recommendations\n    const recommendations = this.recommender.recommendModes(problemCharacteristics);\n    const topModes = recommendations.slice(0, 3);\n\n    // Determine active modes\n    const activeModes = inputAny.activeModes\n      ? inputAny.activeModes.map((m: string) => this.resolveMode(m))\n      : topModes.map((r) => r.mode);\n\n    // Process mode contributions\n    const modeContributions = inputAny.modeContributions\n      ? inputAny.modeContributions.map((c: any) => this.normalizeContribution(c))\n      : this.initializeContributions(activeModes);\n\n    // Calculate convergence status\n    const convergenceStatus = this.calculateConvergence(modeContributions, inputAny.convergenceStatus);\n\n    // Determine synthesis strategy\n    const synthesisStrategy = this.resolveSynthesisStrategy(inputAny.synthesisStrategy);\n\n    // Calculate overall confidence\n    const overallConfidence = this.calculateOverallConfidence(\n      modeContributions,\n      convergenceStatus,\n      inputAny.overallConfidence\n    );\n\n    // Resolve primary mode (highest contribution)\n    const primaryMode = this.resolvePrimaryMode(modeContributions, activeModes);\n\n    // Extract secondary features\n    const secondaryFeatures = inputAny.secondaryFeatures ||\n      activeModes\n        .filter((m: ThinkingMode) => m !== primaryMode)\n        .map((m: ThinkingMode) => `${m} reasoning`);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.HYBRID,\n\n      // Base hybrid fields\n      primaryMode: this.mapToPrimaryMode(primaryMode),\n      secondaryFeatures,\n      switchReason: inputAny.switchReason,\n      thoughtType: inputAny.thoughtType,\n      stage: inputAny.stage,\n      uncertainty: inputAny.uncertainty ?? (1 - overallConfidence),\n      dependencies: inputAny.dependencies,\n      assumptions: inputAny.assumptions,\n      mathematicalModel: inputAny.mathematicalModel,\n      tensorProperties: inputAny.tensorProperties,\n      physicalInterpretation: inputAny.physicalInterpretation,\n\n      // Extended hybrid fields\n      activeModes,\n      modeContributions,\n      convergenceStatus,\n      problemCharacteristics,\n      selectedRecommendations: topModes,\n      synthesisStrategy,\n      overallConfidence,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate hybrid-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ReturnType<typeof createValidationWarning>[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate synthesis strategy\n    if (inputAny.synthesisStrategy && !VALID_STRATEGIES.includes(inputAny.synthesisStrategy)) {\n      warnings.push(\n        createValidationWarning(\n          'synthesisStrategy',\n          `Unknown strategy: ${inputAny.synthesisStrategy}`,\n          `Valid strategies: ${VALID_STRATEGIES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate active modes\n    if (inputAny.activeModes) {\n      if (inputAny.activeModes.length < 2) {\n        warnings.push(\n          createValidationWarning(\n            'activeModes',\n            'Hybrid mode typically uses 2+ modes',\n            'Add more modes for multi-modal synthesis'\n          )\n        );\n      }\n      if (inputAny.activeModes.length > 5) {\n        warnings.push(\n          createValidationWarning(\n            'activeModes',\n            `Many active modes (${inputAny.activeModes.length})`,\n            'Consider focusing on 3-4 most relevant modes'\n          )\n        );\n      }\n    }\n\n    // Validate mode contributions\n    if (inputAny.modeContributions) {\n      for (let i = 0; i < inputAny.modeContributions.length; i++) {\n        const c = inputAny.modeContributions[i];\n        if (c.confidence !== undefined && (c.confidence < 0 || c.confidence > 1)) {\n          warnings.push(\n            createValidationWarning(\n              `modeContributions[${i}].confidence`,\n              `Confidence ${c.confidence} out of range`,\n              'Confidence should be between 0 and 1'\n            )\n          );\n        }\n      }\n    }\n\n    // Check for convergence\n    if (inputAny.convergenceStatus) {\n      if (inputAny.convergenceStatus.currentConfidence < TARGET_CONFIDENCE &&\n          inputAny.convergenceStatus.modesAgreeing < 2) {\n        warnings.push(\n          createValidationWarning(\n            'convergenceStatus',\n            'Low convergence - modes are not agreeing',\n            'Review insights from each mode for consistency'\n          )\n        );\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get hybrid-specific enhancements\n   */\n  getEnhancements(thought: HybridThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: thought.activeModes.filter((m) => m !== ThinkingMode.HYBRID),\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        activeModeCount: thought.activeModes.length,\n        overallConfidence: thought.overallConfidence,\n        targetConfidence: TARGET_CONFIDENCE,\n        convergenceScore: thought.convergenceStatus.convergenceScore,\n        modesAgreeing: thought.convergenceStatus.modesAgreeing,\n      },\n      mentalModels: [\n        'Convergent Validation',\n        'Multi-Modal Synthesis',\n        'Triangulation',\n        'Complementary Reasoning',\n        'Confidence Aggregation',\n      ],\n    };\n\n    // Active modes info\n    enhancements.suggestions!.push(\n      `Active modes: ${thought.activeModes.join(', ')}`\n    );\n    enhancements.suggestions!.push(\n      `Strategy: ${thought.synthesisStrategy}`\n    );\n\n    // Confidence progress\n    const confidencePercent = (thought.overallConfidence * 100).toFixed(1);\n    const targetPercent = (TARGET_CONFIDENCE * 100).toFixed(0);\n    enhancements.suggestions!.push(\n      `Confidence: ${confidencePercent}% / ${targetPercent}% target`\n    );\n\n    // Convergence status\n    if (thought.convergenceStatus.achieved) {\n      enhancements.suggestions!.push(\n        `Convergence achieved (${thought.convergenceStatus.modesAgreeing}/${thought.convergenceStatus.totalModes} modes agree)`\n      );\n    } else {\n      enhancements.warnings!.push(\n        `Convergence not yet achieved (${thought.convergenceStatus.modesAgreeing}/${thought.convergenceStatus.totalModes} modes agree)`\n      );\n    }\n\n    // Mode contribution insights\n    for (const contrib of thought.modeContributions) {\n      if (contrib.confidence > 0.7) {\n        enhancements.suggestions!.push(\n          `${contrib.mode}: high confidence (${(contrib.confidence * 100).toFixed(0)}%)`\n        );\n      } else if (contrib.confidence < 0.4) {\n        enhancements.warnings!.push(\n          `${contrib.mode}: low confidence (${(contrib.confidence * 100).toFixed(0)}%)`\n        );\n      }\n    }\n\n    // Thought type-specific guidance\n    switch (thought.thoughtType) {\n      case 'mode_selection':\n        enhancements.guidingQuestions!.push(\n          'Which modes are most relevant for this problem?',\n          'Are there complementary reasoning approaches to combine?',\n          'What are the problem characteristics?'\n        );\n        if (thought.selectedRecommendations) {\n          for (const rec of thought.selectedRecommendations.slice(0, 3)) {\n            enhancements.suggestions!.push(\n              `Recommended: ${rec.mode} (score: ${(rec.score * 100).toFixed(0)}%)`\n            );\n          }\n        }\n        break;\n\n      case 'parallel_analysis':\n        enhancements.guidingQuestions!.push(\n          'What does each mode contribute?',\n          'Are there conflicting conclusions?',\n          'Which mode has the strongest evidence?'\n        );\n        break;\n\n      case 'sequential_analysis':\n        enhancements.guidingQuestions!.push(\n          'What order should modes be applied?',\n          'How does each mode build on previous insights?',\n          'Are there dependencies between modes?'\n        );\n        break;\n\n      case 'convergence_check':\n        enhancements.guidingQuestions!.push(\n          'Do multiple modes reach the same conclusion?',\n          'Where do the modes disagree?',\n          'What would increase confidence?'\n        );\n        break;\n\n      case 'synthesis':\n        enhancements.guidingQuestions!.push(\n          'How can insights be combined?',\n          'What is the synthesized conclusion?',\n          'Does the synthesis preserve key insights from each mode?'\n        );\n        break;\n\n      case 'confidence_assessment':\n        enhancements.guidingQuestions!.push(\n          'What is the overall confidence level?',\n          'Which mode contributes most to confidence?',\n          'Are there gaps that reduce confidence?'\n        );\n        break;\n\n      case 'mode_switching':\n        enhancements.guidingQuestions!.push(\n          'Should we add or remove a mode?',\n          'Is the current combination optimal?',\n          'What would improve the analysis?'\n        );\n        break;\n    }\n\n    // Strategy-specific guidance\n    if (thought.synthesisStrategy === 'parallel') {\n      enhancements.mentalModels!.push('Independence', 'Ensemble Methods');\n    } else if (thought.synthesisStrategy === 'sequential') {\n      enhancements.mentalModels!.push('Bayesian Updating', 'Evidence Chain');\n    } else if (thought.synthesisStrategy === 'weighted') {\n      enhancements.mentalModels!.push('Expert Aggregation', 'Delphi Method');\n    }\n\n    // Recommendations for improving confidence\n    if (thought.overallConfidence < TARGET_CONFIDENCE) {\n      const gap = TARGET_CONFIDENCE - thought.overallConfidence;\n      if (gap > 0.2) {\n        enhancements.suggestions!.push('Consider adding another complementary mode');\n      } else if (gap > 0.1) {\n        enhancements.suggestions!.push('Focus on resolving mode disagreements');\n      } else {\n        enhancements.suggestions!.push('Strengthen evidence in highest-contributing mode');\n      }\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as HybridThoughtType);\n  }\n\n  /**\n   * Normalize problem characteristics\n   */\n  private normalizeProblemCharacteristics(chars: any): ProblemCharacteristics {\n    return {\n      domain: chars.domain || 'general',\n      complexity: chars.complexity || 'medium',\n      uncertainty: chars.uncertainty || 'medium',\n      timeDependent: chars.timeDependent ?? false,\n      multiAgent: chars.multiAgent ?? false,\n      requiresProof: chars.requiresProof ?? false,\n      requiresQuantification: chars.requiresQuantification ?? false,\n      hasIncompleteInfo: chars.hasIncompleteInfo ?? false,\n      requiresExplanation: chars.requiresExplanation ?? true,\n      hasAlternatives: chars.hasAlternatives ?? true,\n    };\n  }\n\n  /**\n   * Infer problem characteristics from input\n   */\n  private inferCharacteristics(input: ThinkingToolInput): ProblemCharacteristics {\n    const content = input.thought.toLowerCase();\n\n    return {\n      domain: 'general',\n      complexity: input.totalThoughts > 5 ? 'high' : 'medium',\n      uncertainty: 'medium',\n      timeDependent: content.includes('time') || content.includes('sequence'),\n      multiAgent: content.includes('agent') || content.includes('player'),\n      requiresProof: content.includes('proof') || content.includes('prove'),\n      requiresQuantification: content.includes('number') || content.includes('calculate'),\n      hasIncompleteInfo: content.includes('unknown') || content.includes('unclear'),\n      requiresExplanation: true,\n      hasAlternatives: true,\n    };\n  }\n\n  /**\n   * Resolve mode from string\n   */\n  private resolveMode(mode: string): ThinkingMode {\n    const modeMap: Record<string, ThinkingMode> = {\n      sequential: ThinkingMode.SEQUENTIAL,\n      shannon: ThinkingMode.SHANNON,\n      mathematics: ThinkingMode.MATHEMATICS,\n      physics: ThinkingMode.PHYSICS,\n      hybrid: ThinkingMode.HYBRID,\n      inductive: ThinkingMode.INDUCTIVE,\n      deductive: ThinkingMode.DEDUCTIVE,\n      abductive: ThinkingMode.ABDUCTIVE,\n      causal: ThinkingMode.CAUSAL,\n      bayesian: ThinkingMode.BAYESIAN,\n      counterfactual: ThinkingMode.COUNTERFACTUAL,\n      temporal: ThinkingMode.TEMPORAL,\n      gametheory: ThinkingMode.GAMETHEORY,\n      evidential: ThinkingMode.EVIDENTIAL,\n      analogical: ThinkingMode.ANALOGICAL,\n      firstprinciples: ThinkingMode.FIRSTPRINCIPLES,\n      systemsthinking: ThinkingMode.SYSTEMSTHINKING,\n      scientificmethod: ThinkingMode.SCIENTIFICMETHOD,\n      formallogic: ThinkingMode.FORMALLOGIC,\n      metareasoning: ThinkingMode.METAREASONING,\n      optimization: ThinkingMode.OPTIMIZATION,\n      engineering: ThinkingMode.ENGINEERING,\n      algorithmic: ThinkingMode.ALGORITHMIC,\n      computability: ThinkingMode.COMPUTABILITY,\n      cryptanalytic: ThinkingMode.CRYPTANALYTIC,\n      synthesis: ThinkingMode.SYNTHESIS,\n      argumentation: ThinkingMode.ARGUMENTATION,\n      critique: ThinkingMode.CRITIQUE,\n      analysis: ThinkingMode.ANALYSIS,\n    };\n\n    return modeMap[mode.toLowerCase()] || ThinkingMode.SEQUENTIAL;\n  }\n\n  /**\n   * Normalize mode contribution\n   */\n  private normalizeContribution(contrib: any): ModeContribution {\n    return {\n      mode: this.resolveMode(contrib.mode || 'sequential'),\n      confidence: Math.max(0, Math.min(1, contrib.confidence ?? 0.5)),\n      insights: contrib.insights || [],\n      evidence: contrib.evidence || [],\n      agreementWithOthers: Math.max(0, Math.min(1, contrib.agreementWithOthers ?? 0.5)),\n    };\n  }\n\n  /**\n   * Initialize contributions for active modes\n   */\n  private initializeContributions(activeModes: ThinkingMode[]): ModeContribution[] {\n    return activeModes.map((mode) => ({\n      mode,\n      confidence: 0.5,\n      insights: [],\n      evidence: [],\n      agreementWithOthers: 0.5,\n    }));\n  }\n\n  /**\n   * Calculate convergence status\n   */\n  private calculateConvergence(\n    contributions: ModeContribution[],\n    explicit?: Partial<ConvergenceStatus>\n  ): ConvergenceStatus {\n    // Calculate agreement between modes\n    const agreementScores = contributions.map((c) => c.agreementWithOthers);\n    const avgAgreement = agreementScores.length > 0\n      ? agreementScores.reduce((a, b) => a + b, 0) / agreementScores.length\n      : 0;\n\n    // Count modes with high agreement\n    const modesAgreeing = contributions.filter((c) => c.agreementWithOthers > 0.7).length;\n\n    // Calculate current confidence from convergence\n    const confidenceFromAgreement = Math.min(\n      avgAgreement * 0.5 + (modesAgreeing / contributions.length) * 0.5,\n      1\n    );\n\n    // Combine with individual mode confidences\n    const avgConfidence = contributions.length > 0\n      ? contributions.reduce((a, b) => a + b.confidence, 0) / contributions.length\n      : 0;\n\n    const currentConfidence = explicit?.currentConfidence ??\n      Math.min(confidenceFromAgreement * 0.6 + avgConfidence * 0.4, 1);\n\n    return {\n      achieved: currentConfidence >= TARGET_CONFIDENCE,\n      targetConfidence: TARGET_CONFIDENCE,\n      currentConfidence,\n      modesAgreeing: explicit?.modesAgreeing ?? modesAgreeing,\n      totalModes: contributions.length,\n      convergenceScore: explicit?.convergenceScore ?? avgAgreement,\n    };\n  }\n\n  /**\n   * Calculate overall confidence from contributions and convergence\n   */\n  private calculateOverallConfidence(\n    contributions: ModeContribution[],\n    convergence: ConvergenceStatus,\n    explicit?: number\n  ): number {\n    if (explicit !== undefined) {\n      return Math.max(0, Math.min(1, explicit));\n    }\n\n    // Base confidence from individual modes (weighted by agreement)\n    let weightedSum = 0;\n    let weightTotal = 0;\n\n    for (const contrib of contributions) {\n      const weight = 0.5 + contrib.agreementWithOthers * 0.5;\n      weightedSum += contrib.confidence * weight;\n      weightTotal += weight;\n    }\n\n    const baseConfidence = weightTotal > 0 ? weightedSum / weightTotal : 0.5;\n\n    // Boost for convergence\n    const convergenceBoost = convergence.convergenceScore * 0.2;\n\n    // Multi-mode bonus (diminishing returns)\n    const modeBonus = Math.min(0.1, (contributions.length - 1) * 0.03);\n\n    return Math.min(1, baseConfidence + convergenceBoost + modeBonus);\n  }\n\n  /**\n   * Resolve primary mode from contributions\n   */\n  private resolvePrimaryMode(\n    contributions: ModeContribution[],\n    activeModes: ThinkingMode[]\n  ): ThinkingMode {\n    if (contributions.length === 0) {\n      return activeModes[0] || ThinkingMode.SEQUENTIAL;\n    }\n\n    // Find mode with highest weighted score\n    let bestMode = contributions[0].mode;\n    let bestScore = 0;\n\n    for (const contrib of contributions) {\n      const score = contrib.confidence * (0.5 + contrib.agreementWithOthers * 0.5);\n      if (score > bestScore) {\n        bestScore = score;\n        bestMode = contrib.mode;\n      }\n    }\n\n    return bestMode;\n  }\n\n  /**\n   * Map to base hybrid primary mode type\n   */\n  private mapToPrimaryMode(\n    mode: ThinkingMode\n  ): 'sequential' | 'shannon' | 'mathematics' | 'physics' {\n    switch (mode) {\n      case ThinkingMode.SHANNON:\n        return 'shannon';\n      case ThinkingMode.MATHEMATICS:\n        return 'mathematics';\n      case ThinkingMode.PHYSICS:\n        return 'physics';\n      default:\n        return 'sequential';\n    }\n  }\n\n  /**\n   * Resolve synthesis strategy\n   */\n  private resolveSynthesisStrategy(\n    strategy: string | undefined\n  ): 'parallel' | 'sequential' | 'weighted' {\n    if (strategy && VALID_STRATEGIES.includes(strategy as any)) {\n      return strategy as 'parallel' | 'sequential' | 'weighted';\n    }\n    return 'parallel';\n  }\n}\n","/**\n * InductiveHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Inductive reasoning mode with:\n * - Pattern recognition from observations\n * - Generalization strength assessment\n * - Counterexample tracking\n * - Sample size and confidence correlation\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, InductiveThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * InductiveHandler - Specialized handler for inductive reasoning\n *\n * Provides:\n * - Reasoning from specific observations to general principles\n * - Pattern identification and validation\n * - Confidence assessment based on sample size\n * - Counterexample management\n */\nexport class InductiveHandler implements ModeHandler {\n  readonly mode = ThinkingMode.INDUCTIVE;\n  readonly modeName = 'Inductive Reasoning';\n  readonly description = 'Reasoning from specific observations to general principles with confidence tracking';\n\n  /**\n   * Supported thought types for inductive mode\n   */\n  private readonly supportedThoughtTypes = [\n    'observation',\n    'pattern_identification',\n    'generalization',\n    'counterexample_analysis',\n    'confidence_assessment',\n    'refinement',\n  ];\n\n  /**\n   * Create an inductive thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): InductiveThought {\n    const inputAny = input as any;\n\n    // Calculate confidence if not provided\n    const confidence = this.calculateConfidence(inputAny);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.INDUCTIVE,\n\n      // Core inductive fields\n      observations: inputAny.observations || [],\n      pattern: inputAny.pattern,\n      generalization: inputAny.generalization || '',\n      confidence,\n      counterexamples: inputAny.counterexamples || [],\n      sampleSize: inputAny.sampleSize,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate inductive-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate confidence\n    if (inputAny.confidence !== undefined) {\n      if (inputAny.confidence < 0 || inputAny.confidence > 1) {\n        errors.push(\n          createValidationError(\n            'confidence',\n            `Confidence (${inputAny.confidence}) must be between 0 and 1`,\n            'CONFIDENCE_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Validate observations\n    if (!inputAny.observations || inputAny.observations.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'observations',\n          'No observations provided for inductive reasoning',\n          'Add specific observations to form the basis of generalization'\n        )\n      );\n    } else if (inputAny.observations.length < 3) {\n      warnings.push(\n        createValidationWarning(\n          'observations',\n          `Only ${inputAny.observations.length} observation(s) provided`,\n          'More observations typically lead to stronger generalizations'\n        )\n      );\n    }\n\n    // Check for generalization without observations\n    if (inputAny.generalization && (!inputAny.observations || inputAny.observations.length === 0)) {\n      warnings.push(\n        createValidationWarning(\n          'generalization',\n          'Generalization stated without supporting observations',\n          'Ensure observations support the generalization'\n        )\n      );\n    }\n\n    // Validate sample size consistency\n    if (inputAny.sampleSize !== undefined && inputAny.observations) {\n      if (inputAny.sampleSize !== inputAny.observations.length) {\n        warnings.push(\n          createValidationWarning(\n            'sampleSize',\n            `Sample size (${inputAny.sampleSize}) differs from observation count (${inputAny.observations.length})`,\n            'Ensure sample size accurately reflects your observations'\n          )\n        );\n      }\n    }\n\n    // High confidence with counterexamples warning\n    if (inputAny.confidence > 0.8 &&\n        inputAny.counterexamples &&\n        inputAny.counterexamples.length > 0) {\n      warnings.push(\n        createValidationWarning(\n          'confidence',\n          'High confidence despite known counterexamples',\n          'Consider whether counterexamples require adjusting confidence'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get inductive-specific enhancements\n   */\n  getEnhancements(thought: InductiveThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.DEDUCTIVE, ThinkingMode.ABDUCTIVE, ThinkingMode.SCIENTIFICMETHOD],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        observationCount: thought.observations?.length || 0,\n        confidence: thought.confidence,\n        counterexampleCount: thought.counterexamples?.length || 0,\n      },\n      mentalModels: [\n        'Pattern Recognition',\n        'Enumeration Induction',\n        'Statistical Generalization',\n        'Analogical Reasoning',\n        'Mill\\'s Methods',\n      ],\n    };\n\n    const obsCount = thought.observations?.length || 0;\n    const counterCount = thought.counterexamples?.length || 0;\n\n    // Observation-based guidance\n    if (obsCount === 0) {\n      enhancements.suggestions!.push(\n        'Start by collecting specific observations or examples'\n      );\n      enhancements.guidingQuestions!.push(\n        'What specific instances or cases have you observed?'\n      );\n    } else if (obsCount < 5) {\n      enhancements.suggestions!.push(\n        'Consider gathering more observations to strengthen the induction'\n      );\n      enhancements.guidingQuestions!.push(\n        'Are there other examples that could confirm or challenge the pattern?'\n      );\n    }\n\n    // Pattern identification guidance\n    if (obsCount >= 3 && !thought.pattern) {\n      enhancements.suggestions!.push(\n        'Look for common features or relationships among observations'\n      );\n      enhancements.guidingQuestions!.push(\n        'What do all these observations have in common?'\n      );\n    }\n\n    // Generalization guidance\n    if (thought.pattern && !thought.generalization) {\n      enhancements.suggestions!.push(\n        'Formulate a general principle from the identified pattern'\n      );\n      enhancements.guidingQuestions!.push(\n        'What general rule or principle does this pattern suggest?'\n      );\n    }\n\n    // Counterexample handling\n    if (counterCount > 0) {\n      enhancements.warnings!.push(\n        `${counterCount} counterexample(s) exist - consider refining the generalization`\n      );\n      enhancements.guidingQuestions!.push(\n        'Can the generalization be modified to account for counterexamples?'\n      );\n\n      // Adjust suggested confidence\n      const suggestedConfidence = Math.max(0.3, thought.confidence - (counterCount * 0.1));\n      if (thought.confidence > suggestedConfidence + 0.2) {\n        enhancements.warnings!.push(\n          `Consider lowering confidence given counterexamples (suggested: ${suggestedConfidence.toFixed(2)})`\n        );\n      }\n    }\n\n    // Confidence analysis\n    if (thought.confidence > 0.9 && obsCount < 10) {\n      enhancements.warnings!.push(\n        'Very high confidence with limited sample size - consider more evidence'\n      );\n    } else if (thought.confidence < 0.3 && obsCount > 10 && counterCount === 0) {\n      enhancements.suggestions!.push(\n        'Low confidence despite good sample size and no counterexamples - pattern may be stronger than assessed'\n      );\n    }\n\n    // Sample size analysis\n    if (thought.sampleSize) {\n      enhancements.metrics!.sampleSize = thought.sampleSize;\n\n      // Suggest statistical significance\n      if (thought.sampleSize >= 30) {\n        enhancements.suggestions!.push(\n          'Sample size sufficient for statistical analysis - consider calculating significance'\n        );\n      }\n    }\n\n    // Suggest deductive validation\n    if (thought.generalization && thought.confidence > 0.7) {\n      enhancements.suggestions!.push(\n        'Consider testing this generalization deductively on new cases'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Calculate confidence based on observations and counterexamples\n   */\n  private calculateConfidence(input: any): number {\n    if (input.confidence !== undefined) {\n      return Math.max(0, Math.min(1, input.confidence));\n    }\n\n    const obsCount = input.observations?.length || 0;\n    const counterCount = input.counterexamples?.length || 0;\n\n    if (obsCount === 0) return 0.3;\n\n    // Base confidence on observation count (diminishing returns)\n    let baseConfidence = Math.min(0.9, 0.4 + (obsCount * 0.05));\n\n    // Reduce for counterexamples\n    baseConfidence -= counterCount * 0.15;\n\n    return Math.max(0.1, Math.min(0.95, baseConfidence));\n  }\n}\n","/**\n * DeductiveHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Deductive reasoning mode with:\n * - Premise-conclusion structure validation\n * - Logical form tracking (modus ponens, modus tollens, etc.)\n * - Validity and soundness assessment\n * - Logical fallacy detection\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, DeductiveThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid logical forms for deductive arguments\n */\nconst VALID_LOGIC_FORMS = [\n  'modus_ponens',\n  'modus_tollens',\n  'hypothetical_syllogism',\n  'disjunctive_syllogism',\n  'constructive_dilemma',\n  'destructive_dilemma',\n  'universal_instantiation',\n  'existential_generalization',\n  'categorical_syllogism',\n  'reductio_ad_absurdum',\n  'proof_by_contradiction',\n  'proof_by_cases',\n  'conditional_proof',\n];\n\n/**\n * DeductiveHandler - Specialized handler for deductive reasoning\n *\n * Provides:\n * - Reasoning from general principles to specific conclusions\n * - Logical form identification\n * - Validity checking (logical structure)\n * - Soundness assessment (premise truth)\n */\nexport class DeductiveHandler implements ModeHandler {\n  readonly mode = ThinkingMode.DEDUCTIVE;\n  readonly modeName = 'Deductive Reasoning';\n  readonly description = 'Reasoning from general principles to specific conclusions with validity checking';\n\n  /**\n   * Supported thought types for deductive mode\n   */\n  private readonly supportedThoughtTypes = [\n    'premise_statement',\n    'inference',\n    'conclusion',\n    'validity_check',\n    'soundness_check',\n    'fallacy_identification',\n  ];\n\n  /**\n   * Create a deductive thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): DeductiveThought {\n    const inputAny = input as any;\n\n    // Auto-assess validity if premises and conclusion provided\n    const validityCheck = this.assessValidity(inputAny);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.DEDUCTIVE,\n\n      // Core deductive fields\n      premises: inputAny.premises || [],\n      conclusion: inputAny.conclusion || '',\n      logicForm: inputAny.logicForm,\n      validityCheck,\n      soundnessCheck: inputAny.soundnessCheck,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate deductive-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ReturnType<typeof createValidationWarning>[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate premises\n    if (!inputAny.premises || inputAny.premises.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'premises',\n          'No premises provided for deductive reasoning',\n          'State the general principles from which to derive the conclusion'\n        )\n      );\n    } else if (inputAny.premises.length === 1) {\n      warnings.push(\n        createValidationWarning(\n          'premises',\n          'Only one premise provided',\n          'Most deductive arguments require at least two premises'\n        )\n      );\n    }\n\n    // Validate conclusion\n    if (!inputAny.conclusion || inputAny.conclusion.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'conclusion',\n          'No conclusion specified',\n          'State the specific conclusion derived from the premises'\n        )\n      );\n    }\n\n    // Validate logical form\n    if (inputAny.logicForm) {\n      const normalizedForm = inputAny.logicForm.toLowerCase().replace(/\\s+/g, '_');\n      if (!VALID_LOGIC_FORMS.includes(normalizedForm)) {\n        warnings.push(\n          createValidationWarning(\n            'logicForm',\n            `Unknown logical form: ${inputAny.logicForm}`,\n            `Common forms: ${VALID_LOGIC_FORMS.slice(0, 5).join(', ')}, ...`\n          )\n        );\n      }\n    }\n\n    // Suggest logical form if not provided\n    if (!inputAny.logicForm && inputAny.premises?.length >= 2 && inputAny.conclusion) {\n      warnings.push(\n        createValidationWarning(\n          'logicForm',\n          'No logical form specified',\n          'Identify the logical form to verify validity'\n        )\n      );\n    }\n\n    // Validity without soundness warning\n    if (inputAny.validityCheck === true && inputAny.soundnessCheck === undefined) {\n      warnings.push(\n        createValidationWarning(\n          'soundnessCheck',\n          'Validity checked but soundness not assessed',\n          'Valid arguments need true premises to be sound'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get deductive-specific enhancements\n   */\n  getEnhancements(thought: DeductiveThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.INDUCTIVE, ThinkingMode.FORMALLOGIC, ThinkingMode.MATHEMATICS],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        premiseCount: thought.premises?.length || 0,\n        isValid: thought.validityCheck ? 1 : 0,\n        isSound: thought.soundnessCheck ? 1 : 0,\n      },\n      mentalModels: [\n        'Syllogistic Logic',\n        'Propositional Logic',\n        'Predicate Logic',\n        'Formal Proof',\n        'Logical Implication',\n      ],\n    };\n\n    const premiseCount = thought.premises?.length || 0;\n\n    // Premise-based guidance\n    if (premiseCount === 0) {\n      enhancements.suggestions!.push(\n        'State the general principles or axioms from which to reason'\n      );\n      enhancements.guidingQuestions!.push(\n        'What general truths or established facts can serve as premises?'\n      );\n    } else if (premiseCount === 1) {\n      enhancements.suggestions!.push(\n        'Consider whether a second premise is needed for the inference'\n      );\n      enhancements.guidingQuestions!.push(\n        'What additional premise connects this to the conclusion?'\n      );\n    }\n\n    // Conclusion guidance\n    if (!thought.conclusion && premiseCount >= 2) {\n      enhancements.suggestions!.push(\n        'Derive the conclusion that logically follows from the premises'\n      );\n      enhancements.guidingQuestions!.push(\n        'What necessarily follows from these premises?'\n      );\n    }\n\n    // Logical form analysis\n    if (thought.logicForm) {\n      enhancements.metrics!.logicForm = thought.logicForm;\n      enhancements.suggestions!.push(`Using ${thought.logicForm} argument form`);\n\n      // Form-specific guidance\n      switch (thought.logicForm.toLowerCase().replace(/\\s+/g, '_')) {\n        case 'modus_ponens':\n          enhancements.suggestions!.push(\n            'Structure: P  Q, P, therefore Q'\n          );\n          break;\n        case 'modus_tollens':\n          enhancements.suggestions!.push(\n            'Structure: P  Q, Q, therefore P'\n          );\n          break;\n        case 'hypothetical_syllogism':\n          enhancements.suggestions!.push(\n            'Structure: P  Q, Q  R, therefore P  R'\n          );\n          break;\n        case 'disjunctive_syllogism':\n          enhancements.suggestions!.push(\n            'Structure: P  Q, P, therefore Q'\n          );\n          break;\n        case 'reductio_ad_absurdum':\n          enhancements.suggestions!.push(\n            'Assume the negation, derive a contradiction'\n          );\n          break;\n      }\n    }\n\n    // Validity assessment\n    if (thought.validityCheck) {\n      enhancements.suggestions!.push(\n        ' Argument is logically valid - conclusion follows from premises'\n      );\n\n      if (thought.soundnessCheck) {\n        enhancements.suggestions!.push(\n          ' Argument is sound - premises are true and conclusion follows'\n        );\n      } else if (thought.soundnessCheck === false) {\n        enhancements.warnings!.push(\n          'Argument is valid but NOT sound - one or more premises may be false'\n        );\n        enhancements.guidingQuestions!.push(\n          'Which premise(s) might be false or questionable?'\n        );\n      } else {\n        enhancements.guidingQuestions!.push(\n          'Are all the premises actually true?'\n        );\n      }\n    } else if (thought.validityCheck === false) {\n      enhancements.warnings!.push(\n        'Argument is NOT valid - conclusion does not follow from premises'\n      );\n      enhancements.guidingQuestions!.push(\n        'What hidden premise would make this argument valid?',\n        'Is there a logical fallacy in the reasoning?'\n      );\n    }\n\n    // Suggest common fallacy checks\n    if (thought.premises?.length >= 2 && thought.conclusion && !thought.validityCheck) {\n      enhancements.suggestions!.push(\n        'Check for common fallacies: affirming the consequent, denying the antecedent'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Assess validity of the argument structure\n   *\n   * This is a heuristic assessment - full validity checking would require\n   * symbolic logic parsing.\n   */\n  private assessValidity(input: any): boolean {\n    // If explicitly provided, use that\n    if (input.validityCheck !== undefined) {\n      return input.validityCheck;\n    }\n\n    const premises = input.premises || [];\n    const conclusion = input.conclusion || '';\n    const logicForm = input.logicForm?.toLowerCase().replace(/\\s+/g, '_');\n\n    // Need at least one premise and a conclusion\n    if (premises.length === 0 || !conclusion) {\n      return false;\n    }\n\n    // If a recognized logical form is specified, assume it's valid\n    // (the user should verify the structure matches)\n    if (logicForm && VALID_LOGIC_FORMS.includes(logicForm)) {\n      return true;\n    }\n\n    // Default to false if we can't determine\n    return false;\n  }\n}\n","/**\n * AbductiveHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for Abductive reasoning (inference to best explanation):\n * - Hypothesis plausibility scoring\n * - Evidence coverage analysis\n * - Competing hypothesis comparison\n * - Occam's razor evaluation\n */\n\nimport { randomUUID } from 'crypto';\nimport {\n  ThinkingMode,\n  AbductiveThought,\n  Observation,\n  Hypothesis,\n  Evidence,\n  EvaluationCriteria,\n} from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * AbductiveHandler - Specialized handler for abductive reasoning\n *\n * Provides semantic validation and enhancement:\n * - Evaluates hypothesis plausibility based on evidence coverage\n * - Applies Occam's razor (simpler explanations preferred)\n * - Identifies gaps in evidence coverage\n * - Suggests additional observations to differentiate hypotheses\n */\nexport class AbductiveHandler implements ModeHandler {\n  readonly mode = ThinkingMode.ABDUCTIVE;\n  readonly modeName = 'Abductive Reasoning';\n  readonly description = 'Inference to best explanation with hypothesis evaluation and evidence coverage';\n\n  /**\n   * Create an abductive thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): AbductiveThought {\n    const inputAny = input as any;\n\n    // Process observations into proper format\n    const observations = this.processObservations(inputAny.observations || []);\n\n    // Process hypotheses into proper format\n    const hypotheses = this.processHypotheses(inputAny.hypotheses || []);\n\n    // Score hypotheses if we have observations\n    if (observations.length > 0 && hypotheses.length > 0) {\n      this.scoreHypotheses(hypotheses, observations);\n    }\n\n    // Auto-select best explanation if not provided\n    const bestExplanation = inputAny.bestExplanation\n      ? this.processHypothesis(inputAny.bestExplanation)\n      : this.selectBestExplanation(hypotheses);\n\n    // Process evidence\n    const evidence = this.processEvidence(inputAny.evidence || []);\n\n    // Process or create evaluation criteria\n    const evaluationCriteria = inputAny.evaluationCriteria\n      ? this.processEvaluationCriteria(inputAny.evaluationCriteria)\n      : this.getDefaultCriteria();\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.ABDUCTIVE,\n      observations,\n      hypotheses,\n      currentHypothesis: hypotheses[0],\n      evaluationCriteria,\n      evidence,\n      bestExplanation,\n    };\n  }\n\n  /**\n   * Validate abductive-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Warn if no observations provided\n    if (!inputAny.observations || inputAny.observations.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'observations',\n          'No observations provided',\n          'Add observations to ground hypothesis generation'\n        )\n      );\n    }\n\n    // Warn if hypotheses lack explanations\n    if (inputAny.hypotheses) {\n      const incompleteHypotheses = inputAny.hypotheses.filter(\n        (h: any) => !h.explanation || h.explanation.trim() === ''\n      );\n      if (incompleteHypotheses.length > 0) {\n        warnings.push(\n          createValidationWarning(\n            'hypotheses',\n            `${incompleteHypotheses.length} hypothesis/hypotheses lack explanations`,\n            'Provide clear explanations for each hypothesis'\n          )\n        );\n      }\n    }\n\n    // Warn if only one hypothesis (no comparison possible)\n    if (inputAny.hypotheses && inputAny.hypotheses.length === 1) {\n      warnings.push(\n        createValidationWarning(\n          'hypotheses',\n          'Only one hypothesis provided',\n          'Consider alternative explanations for robust abductive reasoning'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: AbductiveThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.INDUCTIVE, ThinkingMode.BAYESIAN, ThinkingMode.CAUSAL],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        \"Occam's Razor - prefer simpler explanations\",\n        'Inference to Best Explanation (IBE)',\n        \"Peirce's abductive logic\",\n        'Consilience of inductions',\n      ],\n    };\n\n    // Calculate metrics\n    const hypotheses = thought.hypotheses || [];\n    const observations = thought.observations || [];\n    const evidence = thought.evidence || [];\n\n    enhancements.metrics = {\n      hypothesisCount: hypotheses.length,\n      observationCount: observations.length,\n      evidenceCount: evidence.length,\n      avgScore: this.calculateAverageScore(hypotheses),\n      parsimony: thought.evaluationCriteria?.parsimony || 0,\n      explanatoryPower: thought.evaluationCriteria?.explanatoryPower || 0,\n    };\n\n    // Generate suggestions\n    if (hypotheses.length < 2) {\n      enhancements.suggestions!.push('Generate alternative hypotheses to compare explanatory power');\n    }\n\n    if (observations.length < 3) {\n      enhancements.suggestions!.push('Gather more observations to differentiate between hypotheses');\n    }\n\n    if (evidence.length === 0) {\n      enhancements.suggestions!.push('Collect evidence to support or refute hypotheses');\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions = [\n      'Which hypothesis best explains ALL observations?',\n      'Are there observations that rule out any hypothesis?',\n      'What additional evidence would differentiate the hypotheses?',\n      'Is the simplest explanation sufficient, or is complexity warranted?',\n      'Could multiple hypotheses be combined into a unified explanation?',\n    ];\n\n    return enhancements;\n  }\n\n  /**\n   * Process raw observations into Observation[] format\n   */\n  private processObservations(raw: any[]): Observation[] {\n    return raw.map((obs, index) => {\n      if (typeof obs === 'string') {\n        return {\n          id: `obs-${index}`,\n          description: obs,\n          confidence: 1.0,\n        };\n      }\n      return {\n        id: obs.id || `obs-${index}`,\n        description: obs.description || obs.content || String(obs),\n        timestamp: obs.timestamp,\n        confidence: obs.confidence ?? 1.0,\n      };\n    });\n  }\n\n  /**\n   * Process a single hypothesis\n   */\n  private processHypothesis(raw: any): Hypothesis {\n    return {\n      id: raw.id || randomUUID(),\n      explanation: raw.explanation || raw.description || '',\n      assumptions: raw.assumptions || [],\n      predictions: raw.predictions || [],\n      score: raw.score ?? raw.plausibility ?? 0.5,\n    };\n  }\n\n  /**\n   * Process raw hypotheses into Hypothesis[] format\n   */\n  private processHypotheses(raw: any[]): Hypothesis[] {\n    return raw.map((h) => this.processHypothesis(h));\n  }\n\n  /**\n   * Process raw evidence into Evidence[] format\n   */\n  private processEvidence(raw: any[]): Evidence[] {\n    return raw.map((e) => ({\n      hypothesisId: e.hypothesisId || e.hypothesis || '',\n      type: e.type || 'neutral',\n      description: e.description || e.content || '',\n      strength: e.strength ?? 0.5,\n    }));\n  }\n\n  /**\n   * Process or create evaluation criteria\n   */\n  private processEvaluationCriteria(raw: any): EvaluationCriteria {\n    if (Array.isArray(raw)) {\n      // Convert array of criteria to object\n      return this.getDefaultCriteria();\n    }\n    return {\n      parsimony: raw.parsimony ?? 0.5,\n      explanatoryPower: raw.explanatoryPower ?? 0.5,\n      plausibility: raw.plausibility ?? 0.5,\n      testability: raw.testability ?? true,\n    };\n  }\n\n  /**\n   * Score hypotheses based on observations\n   */\n  private scoreHypotheses(hypotheses: Hypothesis[], observations: Observation[]): void {\n    for (const h of hypotheses) {\n      const coverage = this.calculateCoverage(h, observations);\n      const complexity = this.estimateComplexity(h);\n      // Score = coverage * (1 - complexity/2)\n      h.score = coverage * (1 - complexity / 2);\n    }\n  }\n\n  /**\n   * Calculate how well a hypothesis covers observations\n   */\n  private calculateCoverage(hypothesis: Hypothesis, observations: Observation[]): number {\n    if (observations.length === 0) return 0;\n    const explanation = hypothesis.explanation.toLowerCase();\n    let covered = 0;\n    for (const obs of observations) {\n      const terms = obs.description.toLowerCase().split(/\\s+/);\n      if (terms.some((term) => term.length > 3 && explanation.includes(term))) {\n        covered++;\n      }\n    }\n    return covered / observations.length;\n  }\n\n  /**\n   * Estimate hypothesis complexity (Occam's razor)\n   */\n  private estimateComplexity(hypothesis: Hypothesis): number {\n    const wordCount = hypothesis.explanation.split(/\\s+/).length;\n    const assumptionCount = hypothesis.assumptions.length;\n    return Math.min((wordCount / 100) + (assumptionCount * 0.1), 1);\n  }\n\n  /**\n   * Select the best explanation based on scores\n   */\n  private selectBestExplanation(hypotheses: Hypothesis[]): Hypothesis | undefined {\n    if (hypotheses.length === 0) return undefined;\n    return hypotheses.reduce((a, b) => (a.score > b.score ? a : b));\n  }\n\n  /**\n   * Calculate average score across hypotheses\n   */\n  private calculateAverageScore(hypotheses: Hypothesis[]): number {\n    if (hypotheses.length === 0) return 0;\n    const sum = hypotheses.reduce((acc, h) => acc + h.score, 0);\n    return sum / hypotheses.length;\n  }\n\n  /**\n   * Get default evaluation criteria\n   */\n  private getDefaultCriteria(): EvaluationCriteria {\n    return {\n      parsimony: 0.5,\n      explanatoryPower: 0.5,\n      plausibility: 0.5,\n      testability: true,\n    };\n  }\n}\n","/**\n * CausalHandler - Phase 10 Sprint 2 (v8.1.0)\n *\n * Specialized handler for Causal reasoning mode with:\n * - Semantic validation of causal graph structure\n * - Cycle detection in causal graphs\n * - Intervention propagation analysis\n * - Confounder identification suggestions\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, CausalThought } from '../../types/core.js';\nimport type { CausalGraph, Intervention } from '../../types/modes/causal.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\nimport { toExtendedThoughtType } from '../../utils/type-guards.js';\n\n/**\n * CausalHandler - Specialized handler for causal reasoning\n *\n * Provides semantic validation beyond schema validation:\n * - Validates that all edge references point to existing nodes\n * - Detects cycles in causal graphs (which may indicate feedback loops)\n * - Validates intervention targets exist in the graph\n * - Suggests potential confounders based on graph structure\n */\nexport class CausalHandler implements ModeHandler {\n  readonly mode = ThinkingMode.CAUSAL;\n  readonly modeName = 'Causal Analysis';\n  readonly description = 'Causal graph analysis with intervention reasoning and cycle detection';\n\n  /**\n   * Supported thought types for causal mode\n   */\n  private readonly supportedThoughtTypes = [\n    'problem_definition',\n    'causal_graph_construction',\n    'intervention_analysis',\n    'counterfactual_analysis',\n    'confounder_identification',\n    'mechanism_discovery',\n  ];\n\n  /**\n   * Create a causal thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): CausalThought {\n    const inputAny = input as any;\n\n    // Build causal graph from input\n    const causalGraph: CausalGraph = input.causalGraph || {\n      nodes: inputAny.nodes || [],\n      edges: inputAny.edges || [],\n    };\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.CAUSAL,\n      thoughtType: toExtendedThoughtType(input.thoughtType, 'problem_definition'),\n      causalGraph,\n      interventions: input.interventions || [],\n      mechanisms: input.mechanisms || [],\n      confounders: input.confounders || [],\n    } as CausalThought;\n  }\n\n  /**\n   * Validate causal-specific input\n   *\n   * Performs semantic validation:\n   * 1. Basic input validation\n   * 2. Causal graph structure validation\n   * 3. Cycle detection (warns, doesn't fail - cycles may be intentional feedback loops)\n   * 4. Intervention target validation\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Build causal graph from input\n    const causalGraph: CausalGraph = input.causalGraph || {\n      nodes: inputAny.nodes || [],\n      edges: inputAny.edges || [],\n    };\n\n    // Validate graph structure if provided\n    if (causalGraph.nodes.length > 0 || causalGraph.edges.length > 0) {\n      const graphValidation = this.validateCausalGraph(causalGraph);\n      errors.push(...graphValidation.errors);\n      warnings.push(...graphValidation.warnings);\n    }\n\n    // Validate interventions reference existing nodes\n    if (input.interventions && input.interventions.length > 0) {\n      const interventionValidation = this.validateInterventions(\n        input.interventions,\n        causalGraph\n      );\n      errors.push(...interventionValidation.errors);\n      warnings.push(...interventionValidation.warnings);\n    }\n\n    // Check for cycles (warn, don't fail - might be intentional feedback loops)\n    if (causalGraph.edges.length > 0) {\n      const cycles = this.detectCycles(causalGraph);\n      if (cycles.length > 0) {\n        warnings.push(\n          createValidationWarning(\n            'causalGraph',\n            `Detected ${cycles.length} cycle(s) in causal graph: ${cycles.map(c => c.join(' -> ')).join('; ')}`,\n            'Cycles may indicate feedback loops. Verify this is intentional.'\n          )\n        );\n      }\n    }\n\n    // Suggest confounders if not provided\n    if ((!input.confounders || input.confounders.length === 0) && causalGraph.nodes.length >= 3) {\n      warnings.push(\n        createValidationWarning(\n          'confounders',\n          'No confounders specified in the causal model',\n          'Consider identifying potential confounders that might affect multiple nodes'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get causal-specific enhancements\n   */\n  getEnhancements(thought: CausalThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.BAYESIAN, ThinkingMode.COUNTERFACTUAL],\n      guidingQuestions: [],\n      warnings: [],\n      mentalModels: ['Causal Diagrams', 'Do-Calculus', 'Structural Equation Models'],\n    };\n\n    // Suggest based on graph complexity\n    if (thought.causalGraph) {\n      const nodeCount = thought.causalGraph.nodes.length;\n      const edgeCount = thought.causalGraph.edges.length;\n\n      if (nodeCount > 0 && edgeCount === 0) {\n        enhancements.suggestions!.push(\n          'Add causal edges to connect your nodes and establish causal relationships'\n        );\n      }\n\n      if (edgeCount > nodeCount * 2) {\n        enhancements.suggestions!.push(\n          'Graph is densely connected. Consider identifying the most significant causal paths'\n        );\n      }\n\n      // Calculate graph metrics\n      enhancements.metrics = {\n        nodeCount,\n        edgeCount,\n        density: nodeCount > 1 ? edgeCount / (nodeCount * (nodeCount - 1)) : 0,\n      };\n\n      // Identify potential entry and exit points\n      const entryNodes = this.findEntryNodes(thought.causalGraph);\n      const exitNodes = this.findExitNodes(thought.causalGraph);\n\n      if (entryNodes.length > 0) {\n        enhancements.guidingQuestions!.push(\n          `What external factors influence the root causes: ${entryNodes.join(', ')}?`\n        );\n      }\n\n      if (exitNodes.length > 0) {\n        enhancements.guidingQuestions!.push(\n          `What are the downstream consequences of ${exitNodes.join(', ')}?`\n        );\n      }\n    }\n\n    // Suggest interventions if none provided\n    if (!thought.interventions || thought.interventions.length === 0) {\n      enhancements.guidingQuestions!.push(\n        'What interventions could be tested to verify causal relationships?'\n      );\n    }\n\n    // Add confounders suggestion\n    if (!thought.confounders || thought.confounders.length === 0) {\n      enhancements.guidingQuestions!.push(\n        'Are there any hidden common causes (confounders) that might affect multiple variables?'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Validate causal graph structure\n   */\n  private validateCausalGraph(graph: CausalGraph): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const nodeIds = new Set(graph.nodes.map(n => n.id));\n\n    // Check for duplicate node IDs\n    if (nodeIds.size !== graph.nodes.length) {\n      errors.push(\n        createValidationError(\n          'causalGraph.nodes',\n          'Duplicate node IDs detected in causal graph',\n          'DUPLICATE_NODE_IDS'\n        )\n      );\n    }\n\n    // Validate each edge references existing nodes\n    for (const edge of graph.edges) {\n      if (!nodeIds.has(edge.from)) {\n        errors.push(\n          createValidationError(\n            'causalGraph.edges',\n            `Edge references non-existent source node: ${edge.from}`,\n            'INVALID_EDGE_SOURCE'\n          )\n        );\n      }\n\n      if (!nodeIds.has(edge.to)) {\n        errors.push(\n          createValidationError(\n            'causalGraph.edges',\n            `Edge references non-existent target node: ${edge.to}`,\n            'INVALID_EDGE_TARGET'\n          )\n        );\n      }\n\n      // Validate edge strength and confidence\n      if (edge.strength !== undefined && (edge.strength < -1 || edge.strength > 1)) {\n        warnings.push(\n          createValidationWarning(\n            'causalGraph.edges',\n            `Edge strength ${edge.strength} is outside [-1, 1] range`,\n            'Normalize edge strength to [-1, 1] where negative indicates inhibitory effects'\n          )\n        );\n      }\n\n      if (edge.confidence !== undefined && (edge.confidence < 0 || edge.confidence > 1)) {\n        warnings.push(\n          createValidationWarning(\n            'causalGraph.edges',\n            `Edge confidence ${edge.confidence} is outside [0, 1] range`,\n            'Confidence should be a probability between 0 and 1'\n          )\n        );\n      }\n    }\n\n    // Check for self-loops\n    const selfLoops = graph.edges.filter(e => e.from === e.to);\n    if (selfLoops.length > 0) {\n      warnings.push(\n        createValidationWarning(\n          'causalGraph.edges',\n          `${selfLoops.length} self-loop(s) detected: ${selfLoops.map(e => e.from).join(', ')}`,\n          'Self-loops may indicate self-reinforcing effects. Verify this is intentional.'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate interventions reference existing nodes\n   */\n  private validateInterventions(\n    interventions: Intervention[],\n    graph: CausalGraph\n  ): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const nodeIds = new Set(graph.nodes.map(n => n.id));\n\n    for (const intervention of interventions) {\n      // Check intervention target exists\n      if (!nodeIds.has(intervention.nodeId)) {\n        errors.push(\n          createValidationError(\n            'interventions',\n            `Intervention targets non-existent node: ${intervention.nodeId}`,\n            'INVALID_INTERVENTION_TARGET'\n          )\n        );\n      }\n\n      // Check expected effects reference existing nodes\n      if (intervention.expectedEffects) {\n        for (const effect of intervention.expectedEffects) {\n          if (!nodeIds.has(effect.nodeId)) {\n            warnings.push(\n              createValidationWarning(\n                'interventions.expectedEffects',\n                `Expected effect references non-existent node: ${effect.nodeId}`,\n                'Ensure all expected effect nodes are in the causal graph'\n              )\n            );\n          }\n\n          // Validate effect confidence\n          if (effect.confidence !== undefined && (effect.confidence < 0 || effect.confidence > 1)) {\n            warnings.push(\n              createValidationWarning(\n                'interventions.expectedEffects',\n                `Effect confidence ${effect.confidence} is outside [0, 1] range`,\n                'Confidence should be a probability between 0 and 1'\n              )\n            );\n          }\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Detect cycles in the causal graph using DFS\n   *\n   * Returns list of cycles found, where each cycle is a list of node IDs\n   */\n  private detectCycles(graph: CausalGraph): string[][] {\n    const cycles: string[][] = [];\n    const visited = new Set<string>();\n    const recursionStack = new Set<string>();\n    const path: string[] = [];\n\n    // Build adjacency list\n    const adjacencyList = new Map<string, string[]>();\n    for (const node of graph.nodes) {\n      adjacencyList.set(node.id, []);\n    }\n    for (const edge of graph.edges) {\n      const neighbors = adjacencyList.get(edge.from);\n      if (neighbors) {\n        neighbors.push(edge.to);\n      }\n    }\n\n    // DFS from each unvisited node\n    const dfs = (nodeId: string): void => {\n      visited.add(nodeId);\n      recursionStack.add(nodeId);\n      path.push(nodeId);\n\n      const neighbors = adjacencyList.get(nodeId) || [];\n      for (const neighbor of neighbors) {\n        if (!visited.has(neighbor)) {\n          dfs(neighbor);\n        } else if (recursionStack.has(neighbor)) {\n          // Found a cycle - extract it from the path\n          const cycleStart = path.indexOf(neighbor);\n          const cycle = path.slice(cycleStart);\n          cycle.push(neighbor); // Close the cycle\n          cycles.push(cycle);\n        }\n      }\n\n      path.pop();\n      recursionStack.delete(nodeId);\n    };\n\n    // Run DFS from all nodes\n    for (const node of graph.nodes) {\n      if (!visited.has(node.id)) {\n        dfs(node.id);\n      }\n    }\n\n    return cycles;\n  }\n\n  /**\n   * Find entry nodes (nodes with no incoming edges)\n   */\n  private findEntryNodes(graph: CausalGraph): string[] {\n    const hasIncoming = new Set(graph.edges.map(e => e.to));\n    return graph.nodes\n      .filter(n => !hasIncoming.has(n.id))\n      .map(n => n.name || n.id);\n  }\n\n  /**\n   * Find exit nodes (nodes with no outgoing edges)\n   */\n  private findExitNodes(graph: CausalGraph): string[] {\n    const hasOutgoing = new Set(graph.edges.map(e => e.from));\n    return graph.nodes\n      .filter(n => !hasOutgoing.has(n.id))\n      .map(n => n.name || n.id);\n  }\n}\n","/**\n * BayesianHandler - Phase 10 Sprint 2 (v8.1.0)\n *\n * Specialized handler for Bayesian reasoning mode with:\n * - Automatic posterior probability calculation\n * - Probability value validation (0-1 range, sum constraints)\n * - Bayes factor computation\n * - Evidence strength assessment\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, BayesianThought } from '../../types/core.js';\nimport type {\n  BayesianHypothesis,\n  PriorProbability,\n  Likelihood,\n  BayesianEvidence,\n  PosteriorProbability,\n} from '../../types/modes/bayesian.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * BayesianHandler - Specialized handler for Bayesian inference\n *\n * Provides semantic validation and automatic calculations:\n * - Validates probability values are in [0, 1] range\n * - Checks for probability consistency (alternatives should complement)\n * - Automatically computes posterior from prior and likelihood using Bayes' theorem\n * - Calculates Bayes factor for evidence strength\n */\nexport class BayesianHandler implements ModeHandler {\n  readonly mode = ThinkingMode.BAYESIAN;\n  readonly modeName = 'Bayesian Inference';\n  readonly description = 'Probabilistic reasoning with Bayes theorem and evidence updates';\n\n  /**\n   * Supported thought types for Bayesian mode\n   */\n  private readonly supportedThoughtTypes = [\n    'prior_elicitation',\n    'likelihood_assessment',\n    'posterior_update',\n    'evidence_evaluation',\n    'sensitivity_analysis',\n    'hypothesis_comparison',\n  ];\n\n  /**\n   * Create a Bayesian thought from input\n   *\n   * Automatically calculates posterior if prior and likelihood are provided\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): BayesianThought {\n    const inputAny = input as any;\n\n    // Extract Bayesian components from input\n    const hypothesis: BayesianHypothesis = inputAny.hypothesis || {\n      id: randomUUID(),\n      statement: input.thought,\n      alternatives: [],\n    };\n\n    const prior: PriorProbability = {\n      probability: inputAny.priorProbability ?? 0.5,\n      justification: inputAny.priorJustification || 'Default prior',\n    };\n\n    const likelihood: Likelihood = {\n      probability: inputAny.likelihood ?? 0.5,\n      description: inputAny.likelihoodDescription || 'Default likelihood',\n    };\n\n    const evidence: BayesianEvidence[] = inputAny.evidence || [];\n\n    // Calculate posterior using Bayes' theorem if components provided\n    const posterior = this.calculatePosterior(prior, likelihood, evidence, inputAny);\n\n    // Calculate Bayes factor if evidence provided\n    const bayesFactor = this.calculateBayesFactor(evidence);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.BAYESIAN,\n      hypothesis,\n      prior,\n      likelihood,\n      evidence,\n      posterior,\n      bayesFactor,\n      sensitivity: inputAny.sensitivity,\n    } as BayesianThought;\n  }\n\n  /**\n   * Validate Bayesian-specific input\n   *\n   * Performs semantic validation:\n   * 1. Basic input validation\n   * 2. Probability value range validation\n   * 3. Evidence likelihood ratio validation\n   * 4. Consistency checks\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate prior probability\n    const priorProb = inputAny.priorProbability;\n    if (priorProb !== undefined) {\n      const priorValidation = this.validateProbability(priorProb, 'priorProbability');\n      if (!priorValidation.valid) {\n        errors.push(...priorValidation.errors);\n      }\n      warnings.push(...priorValidation.warnings);\n    }\n\n    // Validate likelihood\n    const likelihoodProb = inputAny.likelihood;\n    if (likelihoodProb !== undefined) {\n      const likelihoodValidation = this.validateProbability(likelihoodProb, 'likelihood');\n      if (!likelihoodValidation.valid) {\n        errors.push(...likelihoodValidation.errors);\n      }\n      warnings.push(...likelihoodValidation.warnings);\n    }\n\n    // Validate posterior if provided\n    const posteriorProb = inputAny.posteriorProbability;\n    if (posteriorProb !== undefined) {\n      const posteriorValidation = this.validateProbability(posteriorProb, 'posteriorProbability');\n      if (!posteriorValidation.valid) {\n        errors.push(...posteriorValidation.errors);\n      }\n      warnings.push(...posteriorValidation.warnings);\n    }\n\n    // Validate evidence array\n    if (inputAny.evidence && Array.isArray(inputAny.evidence)) {\n      for (let i = 0; i < inputAny.evidence.length; i++) {\n        const evidenceItem = inputAny.evidence[i];\n        const evidenceValidation = this.validateEvidence(evidenceItem, i);\n        if (!evidenceValidation.valid) {\n          errors.push(...evidenceValidation.errors);\n        }\n        warnings.push(...evidenceValidation.warnings);\n      }\n    }\n\n    // Validate hypothesis alternatives if provided\n    if (inputAny.hypothesis?.alternatives) {\n      const numAlternatives = inputAny.hypothesis.alternatives.length;\n      if (numAlternatives > 0 && priorProb !== undefined) {\n        // With alternatives, priors should be reasonable\n        if (priorProb > 0.9 && numAlternatives > 2) {\n          warnings.push(\n            createValidationWarning(\n              'priorProbability',\n              `High prior probability (${priorProb}) with ${numAlternatives} alternatives`,\n              'Consider whether prior properly reflects uncertainty across alternatives'\n            )\n          );\n        }\n      }\n    }\n\n    // Suggest evidence if none provided\n    if (!inputAny.evidence || inputAny.evidence.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'evidence',\n          'No evidence provided for Bayesian update',\n          'Add evidence with likelihood ratios to update the posterior'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get Bayesian-specific enhancements\n   */\n  getEnhancements(thought: BayesianThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.CAUSAL, ThinkingMode.EVIDENTIAL],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {},\n      mentalModels: ['Bayes Theorem', 'Prior Updating', 'Likelihood Ratio', 'Base Rate Fallacy'],\n    };\n\n    // Add probability metrics\n    enhancements.metrics = {\n      priorProbability: thought.prior.probability,\n      likelihoodProbability: thought.likelihood.probability,\n      posteriorProbability: thought.posterior.probability,\n      evidenceCount: thought.evidence.length,\n    };\n\n    if (thought.bayesFactor !== undefined) {\n      enhancements.metrics!.bayesFactor = thought.bayesFactor;\n\n      // Interpret Bayes factor strength (Kass & Raftery, 1995)\n      const bf = thought.bayesFactor;\n      let strength: string;\n      if (bf < 1) {\n        strength = bf < 0.1 ? 'Strong evidence against' : bf < 0.33 ? 'Moderate evidence against' : 'Weak evidence against';\n      } else {\n        strength = bf > 10 ? 'Strong evidence for' : bf > 3 ? 'Moderate evidence for' : 'Weak evidence for';\n      }\n\n      enhancements.suggestions!.push(`Bayes factor (${bf.toFixed(2)}) indicates: ${strength} the hypothesis`);\n    }\n\n    // Analyze prior-posterior shift\n    const shift = Math.abs(thought.posterior.probability - thought.prior.probability);\n    if (shift < 0.05) {\n      enhancements.suggestions!.push(\n        'Small prior-to-posterior shift. Consider seeking more diagnostic evidence.'\n      );\n    } else if (shift > 0.4) {\n      enhancements.warnings!.push(\n        'Large belief update. Verify evidence quality and likelihood estimates.'\n      );\n    }\n\n    // Guide questions based on posterior\n    if (thought.posterior.probability > 0.9) {\n      enhancements.guidingQuestions!.push(\n        'What evidence could potentially disconfirm this high-confidence belief?'\n      );\n    } else if (thought.posterior.probability < 0.1) {\n      enhancements.guidingQuestions!.push(\n        'What new evidence would be needed to revive this hypothesis?'\n      );\n    } else {\n      enhancements.guidingQuestions!.push(\n        'What additional evidence could help resolve the remaining uncertainty?'\n      );\n    }\n\n    // Suggest sensitivity analysis if not provided\n    if (!thought.sensitivity) {\n      enhancements.guidingQuestions!.push(\n        'How sensitive is the posterior to changes in the prior probability?'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Calculate posterior probability using Bayes' theorem\n   *\n   * P(H|E) = P(E|H) * P(H) / P(E)\n   * where P(E) = P(E|H) * P(H) + P(E|~H) * P(~H)\n   */\n  private calculatePosterior(\n    prior: PriorProbability,\n    likelihood: Likelihood,\n    evidence: BayesianEvidence[],\n    inputAny: any\n  ): PosteriorProbability {\n    // If posterior explicitly provided, use it\n    if (inputAny.posteriorProbability !== undefined) {\n      return {\n        probability: inputAny.posteriorProbability,\n        calculation: 'Provided directly',\n        confidence: inputAny.posteriorConfidence ?? 0.8,\n      };\n    }\n\n    // Start with prior\n    let currentPosterior = prior.probability;\n\n    // Update with each piece of evidence\n    if (evidence.length > 0) {\n      for (const ev of evidence) {\n        const pEgivenH = ev.likelihoodGivenHypothesis;\n        const pEgivenNotH = ev.likelihoodGivenNotHypothesis;\n\n        // Calculate P(E)\n        const pE = pEgivenH * currentPosterior + pEgivenNotH * (1 - currentPosterior);\n\n        // Apply Bayes' theorem\n        if (pE > 0) {\n          currentPosterior = (pEgivenH * currentPosterior) / pE;\n        }\n      }\n    } else {\n      // Use simple likelihood if no structured evidence\n      const pEgivenH = likelihood.probability;\n      const pEgivenNotH = 1 - likelihood.probability; // Simplified assumption\n      const pE = pEgivenH * prior.probability + pEgivenNotH * (1 - prior.probability);\n\n      if (pE > 0) {\n        currentPosterior = (pEgivenH * prior.probability) / pE;\n      }\n    }\n\n    // Build calculation string\n    const calculation = evidence.length > 0\n      ? `Updated through ${evidence.length} evidence items using Bayes theorem`\n      : `P(H|E) = P(E|H)P(H) / [P(E|H)P(H) + P(E|~H)P(~H)]`;\n\n    return {\n      probability: Math.max(0, Math.min(1, currentPosterior)), // Clamp to [0, 1]\n      calculation,\n      confidence: this.estimatePosteriorConfidence(evidence),\n    };\n  }\n\n  /**\n   * Calculate Bayes factor from evidence\n   *\n   * BF =  P(E_i|H) / P(E_i|~H)\n   */\n  private calculateBayesFactor(evidence: BayesianEvidence[]): number | undefined {\n    if (evidence.length === 0) {\n      return undefined;\n    }\n\n    let bayesFactor = 1;\n    for (const ev of evidence) {\n      if (ev.likelihoodGivenNotHypothesis > 0) {\n        bayesFactor *= ev.likelihoodGivenHypothesis / ev.likelihoodGivenNotHypothesis;\n      }\n    }\n\n    return bayesFactor;\n  }\n\n  /**\n   * Estimate confidence in posterior calculation\n   */\n  private estimatePosteriorConfidence(evidence: BayesianEvidence[]): number {\n    if (evidence.length === 0) {\n      return 0.5; // Low confidence without evidence\n    }\n\n    // More evidence = higher confidence (diminishing returns)\n    const evidenceContribution = Math.min(0.4, evidence.length * 0.1);\n\n    // Quality of evidence (avoid extreme likelihood ratios)\n    let qualityScore = 0;\n    for (const ev of evidence) {\n      const ratio = ev.likelihoodGivenHypothesis / (ev.likelihoodGivenNotHypothesis || 0.01);\n      // Penalize extremely confident evidence (might be overconfident)\n      if (ratio > 100 || ratio < 0.01) {\n        qualityScore += 0.05;\n      } else {\n        qualityScore += 0.1;\n      }\n    }\n    const avgQuality = qualityScore / evidence.length;\n\n    return Math.min(0.95, 0.5 + evidenceContribution + avgQuality);\n  }\n\n  /**\n   * Validate a probability value\n   */\n  private validateProbability(\n    value: number,\n    field: string\n  ): ValidationResult {\n    const errors = [];\n    const warnings = [];\n\n    if (typeof value !== 'number' || isNaN(value)) {\n      errors.push(\n        createValidationError(\n          field,\n          `${field} must be a valid number`,\n          'INVALID_PROBABILITY_TYPE'\n        )\n      );\n    } else if (value < 0 || value > 1) {\n      errors.push(\n        createValidationError(\n          field,\n          `${field} (${value}) must be between 0 and 1`,\n          'PROBABILITY_OUT_OF_RANGE'\n        )\n      );\n    } else if (value === 0 || value === 1) {\n      warnings.push(\n        createValidationWarning(\n          field,\n          `Extreme probability value (${value}) leaves no room for updating`,\n          'Consider using values slightly away from 0 and 1 (e.g., 0.01 or 0.99)'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate an evidence item\n   */\n  private validateEvidence(evidence: BayesianEvidence, index: number): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const prefix = `evidence[${index}]`;\n\n    if (!evidence.id || !evidence.description) {\n      warnings.push(\n        createValidationWarning(\n          prefix,\n          'Evidence item missing id or description',\n          'Add descriptive id and description for better tracking'\n        )\n      );\n    }\n\n    // Validate likelihood given hypothesis\n    const pEH = evidence.likelihoodGivenHypothesis;\n    if (pEH !== undefined) {\n      if (typeof pEH !== 'number' || isNaN(pEH)) {\n        errors.push(\n          createValidationError(\n            `${prefix}.likelihoodGivenHypothesis`,\n            'Likelihood given hypothesis must be a valid number',\n            'INVALID_LIKELIHOOD_TYPE'\n          )\n        );\n      } else if (pEH < 0 || pEH > 1) {\n        errors.push(\n          createValidationError(\n            `${prefix}.likelihoodGivenHypothesis`,\n            `Likelihood given hypothesis (${pEH}) must be between 0 and 1`,\n            'LIKELIHOOD_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Validate likelihood given not hypothesis\n    const pEnH = evidence.likelihoodGivenNotHypothesis;\n    if (pEnH !== undefined) {\n      if (typeof pEnH !== 'number' || isNaN(pEnH)) {\n        errors.push(\n          createValidationError(\n            `${prefix}.likelihoodGivenNotHypothesis`,\n            'Likelihood given not hypothesis must be a valid number',\n            'INVALID_LIKELIHOOD_TYPE'\n          )\n        );\n      } else if (pEnH < 0 || pEnH > 1) {\n        errors.push(\n          createValidationError(\n            `${prefix}.likelihoodGivenNotHypothesis`,\n            `Likelihood given not hypothesis (${pEnH}) must be between 0 and 1`,\n            'LIKELIHOOD_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Check for diagnostic value\n    if (pEH !== undefined && pEnH !== undefined && Math.abs(pEH - pEnH) < 0.1) {\n      warnings.push(\n        createValidationWarning(\n          prefix,\n          `Evidence has low diagnostic value (P(E|H)=${pEH}, P(E|~H)=${pEnH})`,\n          'Evidence is more useful when likelihood ratios differ significantly'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n}\n","/**\n * CounterfactualHandler - Phase 10 Sprint 2B (v8.2.0)\n *\n * Specialized handler for Counterfactual reasoning mode with:\n * - World state tracking and validation\n * - Divergence point identification\n * - Outcome comparison between actual and hypothetical scenarios\n * - Causal chain validation\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport {\n  CounterfactualThought,\n  Scenario,\n  Condition,\n  CounterfactualComparison,\n  InterventionPoint,\n  CausalChain,\n  ScenarioDifference,\n} from '../../types/modes/counterfactual.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Thought types specific to counterfactual mode\n */\ntype CounterfactualThoughtType =\n  | 'problem_definition'\n  | 'scenario_construction'\n  | 'divergence_analysis'\n  | 'outcome_comparison'\n  | 'intervention_identification'\n  | 'causal_chain_analysis';\n\n/**\n * CounterfactualHandler - Specialized handler for counterfactual reasoning\n *\n * Provides semantic validation beyond schema validation:\n * - Validates that actual scenario has required fields\n * - Validates counterfactual scenarios have interventions marked\n * - Detects missing divergence points\n * - Validates outcome probability ranges\n */\nexport class CounterfactualHandler implements ModeHandler {\n  readonly mode = ThinkingMode.COUNTERFACTUAL;\n  readonly modeName = 'Counterfactual Analysis';\n  readonly description = 'What-if analysis with world state tracking and divergence point identification';\n\n  /**\n   * Supported thought types for counterfactual mode\n   */\n  private readonly supportedThoughtTypes: CounterfactualThoughtType[] = [\n    'problem_definition',\n    'scenario_construction',\n    'divergence_analysis',\n    'outcome_comparison',\n    'intervention_identification',\n    'causal_chain_analysis',\n  ];\n\n  /**\n   * Create a counterfactual thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): CounterfactualThought {\n    const inputAny = input as any;\n\n    // Build actual scenario (matching core.ts Scenario type)\n    const actual: Scenario = inputAny.actual || {\n      id: randomUUID().slice(0, 8),\n      name: 'Actual Scenario',\n      description: '',\n      conditions: inputAny.actualConditions || [],\n      outcomes: inputAny.actualOutcomes || [],\n    };\n\n    // Build counterfactual scenarios\n    const counterfactuals: Scenario[] = inputAny.counterfactuals || [];\n\n    // Build comparison\n    const comparison: CounterfactualComparison = inputAny.comparison || {\n      differences: [] as ScenarioDifference[],\n      insights: [],\n      lessons: [],\n    };\n\n    // Build intervention point\n    const interventionPoint: InterventionPoint = inputAny.interventionPoint || {\n      description: '',\n      timing: '',\n      feasibility: 0.5,\n      expectedImpact: 0.5,\n    };\n\n    const thought: CounterfactualThought = {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.COUNTERFACTUAL,\n      actual,\n      counterfactuals,\n      comparison,\n      interventionPoint,\n      causalChains: inputAny.causalChains || [],\n    };\n    return thought;\n  }\n\n  /**\n   * Validate counterfactual-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate actual scenario\n    if (inputAny.actual) {\n      const actualValidation = this.validateScenario(inputAny.actual, 'actual');\n      errors.push(...actualValidation.errors);\n      warnings.push(...actualValidation.warnings);\n    }\n\n    // Validate counterfactual scenarios\n    if (inputAny.counterfactuals && Array.isArray(inputAny.counterfactuals)) {\n      for (let i = 0; i < inputAny.counterfactuals.length; i++) {\n        const cf = inputAny.counterfactuals[i];\n        const cfValidation = this.validateScenario(cf, `counterfactuals[${i}]`);\n        errors.push(...cfValidation.errors);\n        warnings.push(...cfValidation.warnings);\n\n        // Check for intervention markers\n        if (cf.conditions && Array.isArray(cf.conditions)) {\n          const hasIntervention = cf.conditions.some((c: Condition) => c.isIntervention === true);\n          if (!hasIntervention) {\n            warnings.push(\n              createValidationWarning(\n                `counterfactuals[${i}]`,\n                'Counterfactual scenario has no conditions marked as interventions',\n                'Mark changed conditions with isIntervention: true to track divergence points'\n              )\n            );\n          }\n        }\n      }\n\n      // Warn if no counterfactuals provided\n      if (inputAny.counterfactuals.length === 0 && inputAny.actual) {\n        warnings.push(\n          createValidationWarning(\n            'counterfactuals',\n            'No counterfactual scenarios provided',\n            'Add alternative scenarios to explore what-if possibilities'\n          )\n        );\n      }\n    }\n\n    // Validate intervention point\n    if (inputAny.interventionPoint) {\n      const ipValidation = this.validateInterventionPoint(inputAny.interventionPoint);\n      errors.push(...ipValidation.errors);\n      warnings.push(...ipValidation.warnings);\n    }\n\n    // Validate causal chains\n    if (inputAny.causalChains && Array.isArray(inputAny.causalChains)) {\n      for (let i = 0; i < inputAny.causalChains.length; i++) {\n        const chain = inputAny.causalChains[i];\n        const chainValidation = this.validateCausalChain(chain, i);\n        errors.push(...chainValidation.errors);\n        warnings.push(...chainValidation.warnings);\n      }\n    }\n\n    // Validate comparison if present\n    if (inputAny.comparison) {\n      const compValidation = this.validateComparison(inputAny.comparison);\n      warnings.push(...compValidation.warnings);\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get counterfactual-specific enhancements\n   */\n  getEnhancements(thought: CounterfactualThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.CAUSAL, ThinkingMode.BAYESIAN, ThinkingMode.TEMPORAL],\n      guidingQuestions: [],\n      warnings: [],\n      mentalModels: ['Possible Worlds', 'Nearest World Semantics', 'Intervention Calculus'],\n    };\n\n    // Calculate metrics\n    const actualConditions = thought.actual?.conditions?.length || 0;\n    const counterfactualCount = thought.counterfactuals?.length || 0;\n    const totalInterventions = this.countInterventions(thought);\n\n    enhancements.metrics = {\n      actualConditions,\n      counterfactualCount,\n      totalInterventions,\n      comparisonDepth: this.calculateComparisonDepth(thought.comparison),\n    };\n\n    // Suggest based on content\n    if (counterfactualCount === 0) {\n      enhancements.suggestions!.push(\n        'Define at least one counterfactual scenario to explore alternatives'\n      );\n    } else if (counterfactualCount === 1) {\n      enhancements.suggestions!.push(\n        'Consider adding more counterfactual scenarios to explore the decision space'\n      );\n    }\n\n    if (totalInterventions === 0 && counterfactualCount > 0) {\n      enhancements.suggestions!.push(\n        'Mark which conditions were changed from actual using isIntervention: true'\n      );\n    }\n\n    // Add guiding questions\n    if (thought.actual && thought.actual.outcomes && thought.actual.outcomes.length > 0) {\n      enhancements.guidingQuestions!.push(\n        'What single change would have most altered the actual outcome?'\n      );\n    }\n\n    if (thought.interventionPoint && thought.interventionPoint.description) {\n      enhancements.guidingQuestions!.push(\n        `Is the intervention point \"${thought.interventionPoint.description}\" the earliest possible point of change?`\n      );\n    }\n\n    if (!thought.causalChains || thought.causalChains.length === 0) {\n      enhancements.guidingQuestions!.push(\n        'What causal chain led from conditions to outcome?'\n      );\n    }\n\n    // Check for common issues\n    if (thought.comparison) {\n      if (thought.comparison.insights.length === 0) {\n        enhancements.warnings!.push(\n          'No insights extracted from comparison. What did the counterfactual analysis reveal?'\n        );\n      }\n      if (thought.comparison.lessons.length === 0) {\n        enhancements.guidingQuestions!.push(\n          'What actionable lessons can be drawn from this counterfactual analysis?'\n        );\n      }\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as CounterfactualThoughtType);\n  }\n\n  /**\n   * Validate a scenario\n   */\n  private validateScenario(scenario: Scenario, path: string): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    if (!scenario.name || scenario.name.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `${path}.name`,\n          'Scenario has no name',\n          'Add a descriptive name to identify the scenario'\n        )\n      );\n    }\n\n    // Validate conditions\n    if (scenario.conditions && Array.isArray(scenario.conditions)) {\n      for (let i = 0; i < scenario.conditions.length; i++) {\n        const condition = scenario.conditions[i];\n        if (!condition.factor || condition.factor.trim().length === 0) {\n          warnings.push(\n            createValidationWarning(\n              `${path}.conditions[${i}].factor`,\n              'Condition has no factor specified',\n              'Each condition should identify what factor is being set'\n            )\n          );\n        }\n      }\n    }\n\n    // Validate outcomes\n    if (scenario.outcomes && scenario.outcomes.length > 0) {\n      for (let i = 0; i < scenario.outcomes.length; i++) {\n        const outcome = scenario.outcomes[i];\n        if ((outcome as any).magnitude !== undefined) {\n          const magnitude = (outcome as any).magnitude;\n          if (magnitude < 0 || magnitude > 1) {\n            warnings.push(\n              createValidationWarning(\n                `${path}.outcomes[${i}].magnitude`,\n                `Outcome magnitude ${magnitude} is outside [0, 1] range`,\n                'Magnitude should be normalized to [0, 1]'\n              )\n            );\n          }\n        }\n      }\n    }\n\n    if (scenario.likelihood !== undefined) {\n      if (scenario.likelihood < 0 || scenario.likelihood > 1) {\n        warnings.push(\n          createValidationWarning(\n            `${path}.likelihood`,\n            `Scenario likelihood ${scenario.likelihood} is outside [0, 1] range`,\n            'Likelihood must be between 0 and 1'\n          )\n        );\n      }\n    }\n\n    return errors.length > 0 ? validationFailure(errors, warnings) : validationSuccess(warnings);\n  }\n\n  /**\n   * Validate intervention point\n   */\n  private validateInterventionPoint(ip: InterventionPoint): ValidationResult {\n    const warnings = [];\n\n    if (ip.feasibility !== undefined) {\n      if (ip.feasibility < 0 || ip.feasibility > 1) {\n        warnings.push(\n          createValidationWarning(\n            'interventionPoint.feasibility',\n            `Feasibility ${ip.feasibility} is outside [0, 1] range`,\n            'Feasibility should be a probability between 0 and 1'\n          )\n        );\n      }\n    }\n\n    if (ip.expectedImpact !== undefined) {\n      if (ip.expectedImpact < 0 || ip.expectedImpact > 1) {\n        warnings.push(\n          createValidationWarning(\n            'interventionPoint.expectedImpact',\n            `Expected impact ${ip.expectedImpact} is outside [0, 1] range`,\n            'Expected impact should be normalized to [0, 1]'\n          )\n        );\n      }\n    }\n\n    if (!ip.description || ip.description.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'interventionPoint.description',\n          'Intervention point has no description',\n          'Describe what intervention would be made at this point'\n        )\n      );\n    }\n\n    if (!ip.timing || ip.timing.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'interventionPoint.timing',\n          'Intervention point has no timing specified',\n          'Specify when the intervention would occur'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate causal chain\n   */\n  private validateCausalChain(chain: CausalChain, index: number): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    if (!chain.id || chain.id.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `causalChains[${index}].id`,\n          'Causal chain has no ID',\n          'Add an ID to track the causal chain'\n        )\n      );\n    }\n\n    if (!chain.events || chain.events.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `causalChains[${index}].events`,\n          'Causal chain has no events',\n          'Add events to show the causal sequence'\n        )\n      );\n    } else if (chain.events.length < 2) {\n      warnings.push(\n        createValidationWarning(\n          `causalChains[${index}].events`,\n          'Causal chain has only one event',\n          'A causal chain should have at least two events to show causation'\n        )\n      );\n    }\n\n    if (!chain.branchingPoint || chain.branchingPoint.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `causalChains[${index}].branchingPoint`,\n          'Causal chain has no branching point',\n          'Identify where actual and counterfactual paths diverge'\n        )\n      );\n    }\n\n    return errors.length > 0 ? validationFailure(errors, warnings) : validationSuccess(warnings);\n  }\n\n  /**\n   * Validate comparison\n   */\n  private validateComparison(comparison: CounterfactualComparison): ValidationResult {\n    const warnings: ValidationWarning[] = [];\n\n    if (!comparison.differences || comparison.differences.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'comparison.differences',\n          'No differences identified between scenarios',\n          'List key differences between actual and counterfactual scenarios'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Count total interventions across all counterfactual scenarios\n   */\n  private countInterventions(thought: CounterfactualThought): number {\n    let count = 0;\n    if (thought.counterfactuals) {\n      for (const cf of thought.counterfactuals) {\n        if (cf.conditions) {\n          count += cf.conditions.filter(c => c.isIntervention === true).length;\n        }\n      }\n    }\n    return count;\n  }\n\n  /**\n   * Calculate comparison depth based on fields populated\n   */\n  private calculateComparisonDepth(comparison?: CounterfactualComparison): number {\n    if (!comparison) return 0;\n    let depth = 0;\n    if (comparison.differences && comparison.differences.length > 0) depth++;\n    if (comparison.insights && comparison.insights.length > 0) depth++;\n    if (comparison.lessons && comparison.lessons.length > 0) depth++;\n    return depth;\n  }\n}\n","/**\n * TemporalHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for Temporal reasoning:\n * - Timeline validation and consistency checking\n * - Allen's interval algebra relations\n * - Event ordering and sequencing\n * - Duration and overlap analysis\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, TemporalThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\ntype TemporalThoughtType = 'event_definition' | 'interval_analysis' | 'temporal_constraint' | 'sequence_construction' | 'causality_timeline';\n\n/**\n * TemporalHandler - Specialized handler for temporal reasoning\n *\n * Provides semantic validation and enhancement:\n * - Validates timeline consistency (no contradictory orderings)\n * - Detects temporal constraint violations\n * - Infers implicit temporal relations\n * - Suggests missing constraints\n */\nexport class TemporalHandler implements ModeHandler {\n  readonly mode = ThinkingMode.TEMPORAL;\n  readonly modeName = 'Temporal Reasoning';\n  readonly description = \"Timeline analysis with Allen's interval algebra and event sequencing\";\n\n  private readonly supportedThoughtTypes: TemporalThoughtType[] = [\n    'event_definition',\n    'interval_analysis',\n    'temporal_constraint',\n    'sequence_construction',\n    'causality_timeline',\n  ];\n\n  /**\n   * Create a temporal thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): TemporalThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.TEMPORAL,\n      thoughtType,\n      timeline: inputAny.timeline,\n      events: inputAny.events || [],\n      intervals: inputAny.intervals || [],\n      constraints: inputAny.constraints || [],\n      relations: inputAny.relations || [],\n    };\n  }\n\n  /**\n   * Validate temporal-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Check for event reference integrity\n    if (inputAny.relations && inputAny.events) {\n      const eventIds = new Set((inputAny.events || []).map((e: any) => e.id));\n      for (const rel of inputAny.relations) {\n        if (!eventIds.has(rel.from)) {\n          errors.push(\n            createValidationError(\n              'relations',\n              `Relation references unknown event: ${rel.from}`,\n              'INVALID_EVENT_REF'\n            )\n          );\n        }\n        if (!eventIds.has(rel.to)) {\n          errors.push(\n            createValidationError(\n              'relations',\n              `Relation references unknown event: ${rel.to}`,\n              'INVALID_EVENT_REF'\n            )\n          );\n        }\n      }\n    }\n\n    // Check for temporal consistency\n    const inconsistencies = this.detectInconsistencies(inputAny.relations || []);\n    for (const inc of inconsistencies) {\n      warnings.push(\n        createValidationWarning(\n          'relations',\n          `Potential temporal inconsistency: ${inc}`,\n          'Review temporal constraints for contradictions'\n        )\n      );\n    }\n\n    // Warn if no events\n    if (!inputAny.events || inputAny.events.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'events',\n          'No events defined',\n          'Add events to construct a timeline'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: TemporalThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.CAUSAL, ThinkingMode.SEQUENTIAL, ThinkingMode.COUNTERFACTUAL],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        \"Allen's Interval Algebra\",\n        'Timeline Visualization',\n        'Temporal Constraint Propagation',\n        'Event Calculus',\n        'Point vs. Interval Semantics',\n      ],\n    };\n\n    const events = thought.events || [];\n    const relations = thought.relations || [];\n\n    // Calculate metrics\n    enhancements.metrics = {\n      eventCount: events.length,\n      relationCount: relations.length,\n      constraintDensity: events.length > 1 ? relations.length / ((events.length * (events.length - 1)) / 2) : 0,\n      instantEvents: events.filter((e) => e.type === 'instant').length,\n      intervalEvents: events.filter((e) => e.type === 'interval').length,\n    };\n\n    // Suggest missing relations\n    if (events.length > 1 && relations.length === 0) {\n      enhancements.suggestions!.push('Define temporal relations between events');\n    }\n\n    // Check for under-constrained timeline\n    const expectedRelations = (events.length * (events.length - 1)) / 2;\n    if (relations.length < expectedRelations * 0.3 && events.length > 2) {\n      enhancements.suggestions!.push('Timeline may be under-constrained - consider adding more relations');\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions = [\n      'Which events must occur before others?',\n      'Are there events that can overlap or must be disjoint?',\n      'What are the duration constraints on intervals?',\n      'Are there causal dependencies implied by the temporal order?',\n      'What happens if the timeline constraints are violated?',\n    ];\n\n    return enhancements;\n  }\n\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as TemporalThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid TemporalThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): TemporalThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as TemporalThoughtType)) {\n      return inputType as TemporalThoughtType;\n    }\n    return 'event_definition';\n  }\n\n  /**\n   * Detect temporal inconsistencies\n   */\n  private detectInconsistencies(relations: any[]): string[] {\n    const inconsistencies: string[] = [];\n\n    // Check for A before B and B before A\n    const beforeSet = new Map<string, Set<string>>();\n    for (const r of relations) {\n      if (r.relationType === 'precedes' || r.relationType === 'causes') {\n        if (!beforeSet.has(r.from)) beforeSet.set(r.from, new Set());\n        beforeSet.get(r.from)!.add(r.to);\n      }\n    }\n\n    for (const [from, toSet] of beforeSet) {\n      for (const to of toSet) {\n        if (beforeSet.get(to)?.has(from)) {\n          inconsistencies.push(`${from} precedes ${to} and ${to} precedes ${from}`);\n        }\n      }\n    }\n\n    return inconsistencies;\n  }\n}\n","/**\n * GameTheoryHandler - Phase 10 Sprint 2 (v8.1.0)\n *\n * Specialized handler for Game Theory reasoning mode with:\n * - Payoff matrix dimension validation\n * - Player/strategy consistency checks\n * - Basic Nash equilibria computation (pure strategies)\n * - Zero-sum game detection\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, GameTheoryThought } from '../../types/core.js';\nimport type {\n  Game,\n  Player,\n  Strategy,\n  PayoffMatrix,\n  PayoffEntry,\n  NashEquilibrium,\n  DominantStrategy,\n} from '../../types/modes/gametheory.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/** Valid thought types for GameTheory mode */\ntype GameTheoryThoughtType =\n  | 'game_definition'\n  | 'strategy_analysis'\n  | 'equilibrium_finding'\n  | 'payoff_computation'\n  | 'dominance_analysis'\n  | 'minimax_analysis'\n  | 'cooperative_analysis'\n  | 'coalition_formation'\n  | 'shapley_value'\n  | 'core_analysis';\n\n/**\n * GameTheoryHandler - Specialized handler for game-theoretic reasoning\n *\n * Provides semantic validation and strategic analysis:\n * - Validates payoff matrix dimensions match player/strategy counts\n * - Checks player-strategy assignment consistency\n * - Identifies dominant strategies\n * - Finds pure strategy Nash equilibria\n * - Detects zero-sum games\n */\nexport class GameTheoryHandler implements ModeHandler {\n  readonly mode = ThinkingMode.GAMETHEORY;\n  readonly modeName = 'Game Theory';\n  readonly description = 'Strategic interaction analysis with Nash equilibria and payoff matrices';\n\n  /**\n   * Supported thought types for game theory mode\n   */\n  private readonly supportedThoughtTypes = [\n    'game_definition',\n    'strategy_analysis',\n    'equilibrium_finding',\n    'payoff_computation',\n    'dominance_analysis',\n    'minimax_analysis',\n    'cooperative_analysis',\n    'coalition_formation',\n    'shapley_value',\n    'core_analysis',\n  ];\n\n  /**\n   * Create a game theory thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): GameTheoryThought {\n    const inputAny = input as any;\n\n    // Extract game theory components\n    const game: Game | undefined = inputAny.game;\n    const players: Player[] = inputAny.players || [];\n    const strategies: Strategy[] = inputAny.strategies || [];\n    const payoffMatrix: PayoffMatrix | undefined = inputAny.payoffMatrix;\n\n    // Try to find Nash equilibria if payoff matrix is provided\n    let nashEquilibria: NashEquilibrium[] | undefined = inputAny.nashEquilibria;\n    if (!nashEquilibria && payoffMatrix && players.length > 0) {\n      nashEquilibria = this.findPureStrategyNashEquilibria(payoffMatrix, players, strategies);\n    }\n\n    // Find dominant strategies\n    let dominantStrategies: DominantStrategy[] | undefined = inputAny.dominantStrategies;\n    if (!dominantStrategies && payoffMatrix && players.length > 0) {\n      dominantStrategies = this.findDominantStrategies(payoffMatrix, players, strategies);\n    }\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.GAMETHEORY,\n      thoughtType: this.resolveThoughtType(input.thoughtType),\n      game,\n      players,\n      strategies,\n      payoffMatrix,\n      nashEquilibria,\n      dominantStrategies,\n      gameTree: inputAny.gameTree,\n      minimaxAnalysis: inputAny.minimaxAnalysis,\n      cooperativeGame: inputAny.cooperativeGame,\n      coalitionAnalysis: inputAny.coalitionAnalysis,\n    };\n  }\n\n  /**\n   * Validate game theory-specific input\n   *\n   * Performs semantic validation:\n   * 1. Basic input validation\n   * 2. Payoff matrix dimension validation\n   * 3. Player-strategy consistency\n   * 4. Payoff value validation\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate players\n    const players: Player[] = inputAny.players || [];\n    const strategies: Strategy[] = inputAny.strategies || [];\n    const payoffMatrix: PayoffMatrix | undefined = inputAny.payoffMatrix;\n\n    if (players.length > 0) {\n      const playerValidation = this.validatePlayers(players, strategies);\n      if (!playerValidation.valid) {\n        errors.push(...playerValidation.errors);\n      }\n      warnings.push(...playerValidation.warnings);\n    }\n\n    // Validate strategies\n    if (strategies.length > 0) {\n      const strategyValidation = this.validateStrategies(strategies, players);\n      if (!strategyValidation.valid) {\n        errors.push(...strategyValidation.errors);\n      }\n      warnings.push(...strategyValidation.warnings);\n    }\n\n    // Validate payoff matrix\n    if (payoffMatrix) {\n      const matrixValidation = this.validatePayoffMatrix(payoffMatrix, players, strategies);\n      if (!matrixValidation.valid) {\n        errors.push(...matrixValidation.errors);\n      }\n      warnings.push(...matrixValidation.warnings);\n    }\n\n    // Suggest adding game elements if none provided\n    if (players.length === 0 && !payoffMatrix) {\n      warnings.push(\n        createValidationWarning(\n          'players',\n          'No players or payoff matrix defined',\n          'Define players and their strategies for game theory analysis'\n        )\n      );\n    }\n\n    // Check for game definition\n    const game: Game | undefined = inputAny.game;\n    if (!game && players.length > 0) {\n      warnings.push(\n        createValidationWarning(\n          'game',\n          'No formal game definition provided',\n          'Consider adding a Game object with type, name, and properties'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get game theory-specific enhancements\n   */\n  getEnhancements(thought: GameTheoryThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.OPTIMIZATION, ThinkingMode.COUNTERFACTUAL],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {},\n      mentalModels: [\n        \"Nash Equilibrium\",\n        \"Dominant Strategy\",\n        \"Pareto Efficiency\",\n        \"Minimax Theorem\",\n        \"Prisoner's Dilemma\",\n      ],\n    };\n\n    // Add game metrics\n    if (thought.players) {\n      enhancements.metrics!.playerCount = thought.players.length;\n    }\n\n    if (thought.strategies) {\n      enhancements.metrics!.strategyCount = thought.strategies.length;\n    }\n\n    if (thought.payoffMatrix) {\n      enhancements.metrics!.payoffEntries = thought.payoffMatrix.payoffs.length;\n\n      // Check if zero-sum\n      const isZeroSum = this.isZeroSumGame(thought.payoffMatrix);\n      enhancements.metrics!.isZeroSum = isZeroSum ? 1 : 0;\n\n      if (isZeroSum) {\n        enhancements.suggestions!.push(\n          'This is a zero-sum game. Consider minimax strategies.'\n        );\n        enhancements.relatedModes!.unshift(ThinkingMode.OPTIMIZATION);\n      }\n    }\n\n    // Nash equilibria analysis\n    if (thought.nashEquilibria && thought.nashEquilibria.length > 0) {\n      enhancements.metrics!.nashEquilibriaCount = thought.nashEquilibria.length;\n\n      if (thought.nashEquilibria.length > 1) {\n        enhancements.suggestions!.push(\n          `Multiple Nash equilibria found (${thought.nashEquilibria.length}). Consider coordination mechanisms or focal points.`\n        );\n        enhancements.guidingQuestions!.push(\n          'Which equilibrium is most likely to emerge? Are there Schelling focal points?'\n        );\n      }\n\n      // Check for Pareto efficiency of equilibria\n      const paretoOptimal = this.checkParetoOptimality(thought.nashEquilibria, thought.payoffMatrix);\n      if (!paretoOptimal) {\n        enhancements.warnings!.push(\n          \"Nash equilibrium may not be Pareto optimal (like in Prisoner's Dilemma)\"\n        );\n        enhancements.guidingQuestions!.push(\n          'Is there a mechanism to achieve a Pareto-superior outcome through cooperation?'\n        );\n      }\n    } else if (thought.payoffMatrix) {\n      enhancements.suggestions!.push(\n        'No pure strategy Nash equilibria found. Consider mixed strategies.'\n      );\n      enhancements.guidingQuestions!.push(\n        'What are the optimal mixed strategy probabilities for each player?'\n      );\n    }\n\n    // Dominant strategy analysis\n    if (thought.dominantStrategies && thought.dominantStrategies.length > 0) {\n      enhancements.metrics!.dominantStrategyCount = thought.dominantStrategies.length;\n      enhancements.suggestions!.push(\n        `${thought.dominantStrategies.length} dominant strategy(ies) identified. These simplify equilibrium analysis.`\n      );\n    }\n\n    // Guide questions based on game type\n    if (thought.game) {\n      if (thought.game.type === 'cooperative') {\n        enhancements.guidingQuestions!.push(\n          'What coalitions might form? How should payoffs be divided fairly?'\n        );\n        enhancements.mentalModels!.push('Shapley Value', 'Core', 'Coalition Formation');\n      } else if (thought.game.type === 'extensive_form') {\n        enhancements.guidingQuestions!.push(\n          'What is the subgame perfect equilibrium? Use backward induction.'\n        );\n        enhancements.mentalModels!.push('Backward Induction', 'Subgame Perfect Equilibrium');\n      }\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Resolve input thought type to valid GameTheory thought type\n   */\n  private resolveThoughtType(inputType: string | undefined): GameTheoryThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType)) {\n      return inputType as GameTheoryThoughtType;\n    }\n    return 'game_definition';\n  }\n\n  /**\n   * Validate players array\n   */\n  private validatePlayers(players: Player[], strategies: Strategy[]): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const playerIds = new Set<string>();\n\n    for (const player of players) {\n      // Check for duplicate IDs\n      if (playerIds.has(player.id)) {\n        errors.push(\n          createValidationError(\n            'players',\n            `Duplicate player ID: ${player.id}`,\n            'DUPLICATE_PLAYER_ID'\n          )\n        );\n      }\n      playerIds.add(player.id);\n\n      // Check player has strategies\n      if (!player.availableStrategies || player.availableStrategies.length === 0) {\n        warnings.push(\n          createValidationWarning(\n            `players.${player.id}`,\n            `Player ${player.name || player.id} has no available strategies`,\n            'Define available strategies for meaningful game analysis'\n          )\n        );\n      } else {\n        // Validate strategy references\n        for (const stratId of player.availableStrategies) {\n          const strategyExists = strategies.some(s => s.id === stratId);\n          if (!strategyExists && strategies.length > 0) {\n            errors.push(\n              createValidationError(\n                `players.${player.id}.availableStrategies`,\n                `Player references non-existent strategy: ${stratId}`,\n                'INVALID_STRATEGY_REFERENCE'\n              )\n            );\n          }\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate strategies array\n   */\n  private validateStrategies(strategies: Strategy[], players: Player[]): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const strategyIds = new Set<string>();\n    const playerIds = new Set(players.map(p => p.id));\n\n    for (const strategy of strategies) {\n      // Check for duplicate IDs\n      if (strategyIds.has(strategy.id)) {\n        errors.push(\n          createValidationError(\n            'strategies',\n            `Duplicate strategy ID: ${strategy.id}`,\n            'DUPLICATE_STRATEGY_ID'\n          )\n        );\n      }\n      strategyIds.add(strategy.id);\n\n      // Validate player reference\n      if (strategy.playerId && !playerIds.has(strategy.playerId) && players.length > 0) {\n        errors.push(\n          createValidationError(\n            `strategies.${strategy.id}`,\n            `Strategy references non-existent player: ${strategy.playerId}`,\n            'INVALID_PLAYER_REFERENCE'\n          )\n        );\n      }\n\n      // Validate mixed strategy probability\n      if (!strategy.isPure && strategy.probability !== undefined) {\n        if (strategy.probability < 0 || strategy.probability > 1) {\n          errors.push(\n            createValidationError(\n              `strategies.${strategy.id}.probability`,\n              `Mixed strategy probability (${strategy.probability}) must be between 0 and 1`,\n              'INVALID_PROBABILITY'\n            )\n          );\n        }\n      }\n    }\n\n    // Check mixed strategy probabilities sum to 1 per player\n    for (const player of players) {\n      const playerStrategies = strategies.filter(s => s.playerId === player.id && !s.isPure);\n      if (playerStrategies.length > 0) {\n        const probSum = playerStrategies.reduce((sum, s) => sum + (s.probability || 0), 0);\n        if (Math.abs(probSum - 1) > 0.001) {\n          warnings.push(\n            createValidationWarning(\n              `strategies`,\n              `Mixed strategy probabilities for player ${player.id} sum to ${probSum.toFixed(3)}, not 1`,\n              'Ensure mixed strategy probabilities sum to exactly 1'\n            )\n          );\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate payoff matrix\n   */\n  private validatePayoffMatrix(\n    matrix: PayoffMatrix,\n    _players: Player[],\n    strategies: Strategy[]\n  ): ValidationResult {\n    const errors = [];\n    const warnings = [];\n\n    // Validate dimensions match players\n    if (matrix.players.length !== matrix.dimensions.length) {\n      errors.push(\n        createValidationError(\n          'payoffMatrix',\n          `Player count (${matrix.players.length}) doesn't match dimension count (${matrix.dimensions.length})`,\n          'DIMENSION_MISMATCH'\n        )\n      );\n    }\n\n    // Validate expected number of payoff entries\n    const expectedEntries = matrix.dimensions.reduce((a, b) => a * b, 1);\n    if (matrix.payoffs.length !== expectedEntries) {\n      warnings.push(\n        createValidationWarning(\n          'payoffMatrix.payoffs',\n          `Expected ${expectedEntries} payoff entries based on dimensions, got ${matrix.payoffs.length}`,\n          'Ensure all strategy combinations have payoff entries'\n        )\n      );\n    }\n\n    // Validate each payoff entry\n    for (let i = 0; i < matrix.payoffs.length; i++) {\n      const entry = matrix.payoffs[i];\n\n      // Check strategy profile length matches player count\n      if (entry.strategyProfile.length !== matrix.players.length) {\n        errors.push(\n          createValidationError(\n            `payoffMatrix.payoffs[${i}]`,\n            `Strategy profile has ${entry.strategyProfile.length} strategies, expected ${matrix.players.length}`,\n            'INVALID_STRATEGY_PROFILE'\n          )\n        );\n      }\n\n      // Check payoff array length matches player count\n      if (entry.payoffs.length !== matrix.players.length) {\n        errors.push(\n          createValidationError(\n            `payoffMatrix.payoffs[${i}]`,\n            `Payoff entry has ${entry.payoffs.length} values, expected ${matrix.players.length}`,\n            'INVALID_PAYOFF_COUNT'\n          )\n        );\n      }\n\n      // Validate strategy references\n      for (const stratId of entry.strategyProfile) {\n        const strategyExists = strategies.some(s => s.id === stratId);\n        if (!strategyExists && strategies.length > 0) {\n          errors.push(\n            createValidationError(\n              `payoffMatrix.payoffs[${i}].strategyProfile`,\n              `Payoff entry references non-existent strategy: ${stratId}`,\n              'INVALID_STRATEGY_REFERENCE'\n            )\n          );\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Find pure strategy Nash equilibria\n   *\n   * A strategy profile is a Nash equilibrium if no player can\n   * improve their payoff by unilaterally changing their strategy.\n   */\n  private findPureStrategyNashEquilibria(\n    matrix: PayoffMatrix,\n    players: Player[],\n    strategies: Strategy[]\n  ): NashEquilibrium[] {\n    const equilibria: NashEquilibrium[] = [];\n\n    // Only handle 2-player games for now\n    if (matrix.players.length !== 2 || matrix.dimensions.length !== 2) {\n      return equilibria;\n    }\n\n    // Check each strategy combination\n    for (const entry of matrix.payoffs) {\n      if (this.isNashEquilibrium(entry, matrix, players, strategies)) {\n        equilibria.push({\n          id: randomUUID(),\n          strategyProfile: entry.strategyProfile,\n          payoffs: entry.payoffs,\n          type: 'pure',\n          isStrict: this.isStrictEquilibrium(entry, matrix, players, strategies),\n          stability: this.calculateEquilibriumStability(entry, matrix, players, strategies),\n        });\n      }\n    }\n\n    return equilibria;\n  }\n\n  /**\n   * Check if a strategy profile is a Nash equilibrium\n   */\n  private isNashEquilibrium(\n    entry: PayoffEntry,\n    matrix: PayoffMatrix,\n    _players: Player[],\n    _strategies: Strategy[]\n  ): boolean {\n    // For each player, check if they can improve by deviating\n    for (let playerIdx = 0; playerIdx < matrix.players.length; playerIdx++) {\n      const currentPayoff = entry.payoffs[playerIdx];\n\n      // Find all alternative strategy profiles where only this player deviates\n      for (const altEntry of matrix.payoffs) {\n        // Check if only this player's strategy differs\n        let onlyThisPlayerDiffers = true;\n        for (let i = 0; i < matrix.players.length; i++) {\n          if (i === playerIdx) {\n            // This player should differ\n            if (altEntry.strategyProfile[i] === entry.strategyProfile[i]) {\n              onlyThisPlayerDiffers = false;\n              break;\n            }\n          } else {\n            // Other players should be the same\n            if (altEntry.strategyProfile[i] !== entry.strategyProfile[i]) {\n              onlyThisPlayerDiffers = false;\n              break;\n            }\n          }\n        }\n\n        // If only this player differs and they get a better payoff, not an equilibrium\n        if (onlyThisPlayerDiffers && altEntry.payoffs[playerIdx] > currentPayoff) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Check if equilibrium is strict (strictly better than all deviations)\n   */\n  private isStrictEquilibrium(\n    entry: PayoffEntry,\n    matrix: PayoffMatrix,\n    _players: Player[],\n    _strategies: Strategy[]\n  ): boolean {\n    for (let playerIdx = 0; playerIdx < matrix.players.length; playerIdx++) {\n      const currentPayoff = entry.payoffs[playerIdx];\n\n      for (const altEntry of matrix.payoffs) {\n        let onlyThisPlayerDiffers = true;\n        for (let i = 0; i < matrix.players.length; i++) {\n          if (i === playerIdx) {\n            if (altEntry.strategyProfile[i] === entry.strategyProfile[i]) {\n              onlyThisPlayerDiffers = false;\n              break;\n            }\n          } else {\n            if (altEntry.strategyProfile[i] !== entry.strategyProfile[i]) {\n              onlyThisPlayerDiffers = false;\n              break;\n            }\n          }\n        }\n\n        // If deviation gives same payoff, not strict\n        if (onlyThisPlayerDiffers && altEntry.payoffs[playerIdx] >= currentPayoff) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Calculate equilibrium stability score\n   */\n  private calculateEquilibriumStability(\n    entry: PayoffEntry,\n    matrix: PayoffMatrix,\n    _players: Player[],\n    _strategies: Strategy[]\n  ): number {\n    // Calculate average deviation penalty\n    let totalPenalty = 0;\n    let deviationCount = 0;\n\n    for (let playerIdx = 0; playerIdx < matrix.players.length; playerIdx++) {\n      const currentPayoff = entry.payoffs[playerIdx];\n\n      for (const altEntry of matrix.payoffs) {\n        let onlyThisPlayerDiffers = true;\n        for (let i = 0; i < matrix.players.length; i++) {\n          if (i === playerIdx) {\n            if (altEntry.strategyProfile[i] === entry.strategyProfile[i]) {\n              onlyThisPlayerDiffers = false;\n              break;\n            }\n          } else {\n            if (altEntry.strategyProfile[i] !== entry.strategyProfile[i]) {\n              onlyThisPlayerDiffers = false;\n              break;\n            }\n          }\n        }\n\n        if (onlyThisPlayerDiffers) {\n          totalPenalty += currentPayoff - altEntry.payoffs[playerIdx];\n          deviationCount++;\n        }\n      }\n    }\n\n    // Higher penalty = more stable\n    const avgPenalty = deviationCount > 0 ? totalPenalty / deviationCount : 0;\n\n    // Normalize to 0-1 (assuming payoffs are reasonable)\n    return Math.min(1, Math.max(0, 0.5 + avgPenalty / 10));\n  }\n\n  /**\n   * Find dominant strategies\n   */\n  private findDominantStrategies(\n    matrix: PayoffMatrix,\n    players: Player[],\n    strategies: Strategy[]\n  ): DominantStrategy[] {\n    const dominantStrategies: DominantStrategy[] = [];\n\n    // Only handle 2-player games\n    if (matrix.players.length !== 2) {\n      return dominantStrategies;\n    }\n\n    for (let playerIdx = 0; playerIdx < players.length; playerIdx++) {\n      const player = players[playerIdx];\n      const playerStrategies = strategies.filter(s => s.playerId === player.id);\n\n      for (const strategy of playerStrategies) {\n        const dominates = this.checkDominance(strategy, playerIdx, matrix, playerStrategies);\n        if (dominates.length > 0) {\n          dominantStrategies.push({\n            playerId: player.id,\n            strategyId: strategy.id,\n            type: dominates.length === playerStrategies.length - 1 ? 'strictly_dominant' : 'weakly_dominant',\n            dominatesStrategies: dominates,\n            justification: `Strategy ${strategy.name || strategy.id} dominates: ${dominates.join(', ')}`,\n          });\n        }\n      }\n    }\n\n    return dominantStrategies;\n  }\n\n  /**\n   * Check which strategies a given strategy dominates\n   */\n  private checkDominance(\n    strategy: Strategy,\n    playerIdx: number,\n    matrix: PayoffMatrix,\n    playerStrategies: Strategy[]\n  ): string[] {\n    const dominates: string[] = [];\n\n    for (const otherStrategy of playerStrategies) {\n      if (otherStrategy.id === strategy.id) continue;\n\n      // Check if strategy dominates otherStrategy\n      let dominatesAll = true;\n\n      // Group payoffs by opponent's strategy choices\n      const strategyPayoffs = new Map<string, number>();\n      const otherPayoffs = new Map<string, number>();\n\n      for (const entry of matrix.payoffs) {\n        const key = entry.strategyProfile.filter((_, i) => i !== playerIdx).join('-');\n\n        if (entry.strategyProfile[playerIdx] === strategy.id) {\n          strategyPayoffs.set(key, entry.payoffs[playerIdx]);\n        }\n        if (entry.strategyProfile[playerIdx] === otherStrategy.id) {\n          otherPayoffs.set(key, entry.payoffs[playerIdx]);\n        }\n      }\n\n      // Compare payoffs for all opponent strategy combinations\n      for (const [key, payoff] of strategyPayoffs) {\n        const otherPayoff = otherPayoffs.get(key);\n        if (otherPayoff !== undefined && payoff <= otherPayoff) {\n          dominatesAll = false;\n          break;\n        }\n      }\n\n      if (dominatesAll && strategyPayoffs.size > 0) {\n        dominates.push(otherStrategy.id);\n      }\n    }\n\n    return dominates;\n  }\n\n  /**\n   * Check if game is zero-sum\n   */\n  private isZeroSumGame(matrix: PayoffMatrix): boolean {\n    if (matrix.players.length !== 2) {\n      return false; // Only check 2-player games\n    }\n\n    for (const entry of matrix.payoffs) {\n      const sum = entry.payoffs.reduce((a, b) => a + b, 0);\n      if (Math.abs(sum) > 0.001) {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Check if Nash equilibria are Pareto optimal\n   */\n  private checkParetoOptimality(\n    equilibria: NashEquilibrium[],\n    matrix: PayoffMatrix | undefined\n  ): boolean {\n    if (!matrix || equilibria.length === 0) {\n      return true; // Assume optimal if no data\n    }\n\n    for (const eq of equilibria) {\n      // Check if any other outcome Pareto dominates this equilibrium\n      for (const entry of matrix.payoffs) {\n        let paretoDominates = true;\n        let strictlyBetter = false;\n\n        for (let i = 0; i < entry.payoffs.length; i++) {\n          if (entry.payoffs[i] < eq.payoffs[i]) {\n            paretoDominates = false;\n            break;\n          }\n          if (entry.payoffs[i] > eq.payoffs[i]) {\n            strictlyBetter = true;\n          }\n        }\n\n        if (paretoDominates && strictlyBetter) {\n          return false; // Found a Pareto dominating outcome\n        }\n      }\n    }\n\n    return true;\n  }\n}\n","/**\n * EvidentialHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for Evidential/Dempster-Shafer reasoning:\n * - Belief function calculation\n * - Plausibility function computation\n * - Dempster's rule of combination\n * - Uncertainty quantification\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, EvidentialThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\ntype EvidentialThoughtType = 'hypothesis_definition' | 'evidence_collection' | 'belief_assignment' | 'evidence_combination' | 'decision_analysis';\n\n/**\n * EvidentialHandler - Specialized handler for Dempster-Shafer theory\n *\n * Provides semantic validation and enhancement:\n * - Validates mass function sums to 1\n * - Computes belief and plausibility from mass\n * - Applies Dempster's rule for evidence combination\n * - Quantifies uncertainty intervals\n */\nexport class EvidentialHandler implements ModeHandler {\n  readonly mode = ThinkingMode.EVIDENTIAL;\n  readonly modeName = 'Evidential Reasoning';\n  readonly description = 'Dempster-Shafer belief functions with uncertainty quantification';\n\n  private readonly supportedThoughtTypes: EvidentialThoughtType[] = [\n    'hypothesis_definition',\n    'evidence_collection',\n    'belief_assignment',\n    'evidence_combination',\n    'decision_analysis',\n  ];\n\n  /**\n   * Create an evidential thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): EvidentialThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.EVIDENTIAL,\n      thoughtType,\n      frameOfDiscernment: inputAny.frameOfDiscernment || [],\n      hypotheses: inputAny.hypotheses || [],\n      evidence: inputAny.evidence || [],\n      beliefFunctions: inputAny.beliefFunctions || [],\n      combinedBelief: inputAny.combinedBelief,\n      plausibility: inputAny.plausibility,\n      decisions: inputAny.decisions || [],\n    };\n  }\n\n  /**\n   * Validate evidential-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Validate belief functions have valid mass assignments\n    if (inputAny.beliefFunctions) {\n      for (const bf of inputAny.beliefFunctions) {\n        if (bf.massAssignments) {\n          const sum = bf.massAssignments.reduce((acc: number, ma: any) => acc + (ma.mass || 0), 0);\n          if (Math.abs(sum - 1) > 0.001) {\n            errors.push(\n              createValidationError(\n                'beliefFunctions',\n                `Mass function must sum to 1 (currently ${sum.toFixed(3)})`,\n                'INVALID_MASS_SUM'\n              )\n            );\n          }\n        }\n      }\n    }\n\n    // Warn if frame is empty\n    if (!inputAny.frameOfDiscernment || inputAny.frameOfDiscernment.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'frameOfDiscernment',\n          'Frame of discernment is empty',\n          'Define the possible hypotheses in the frame'\n        )\n      );\n    }\n\n    // Check for evidence without reliability scores\n    if (inputAny.evidence) {\n      const unreliableEvidence = inputAny.evidence.filter((e: any) => e.reliability === undefined);\n      if (unreliableEvidence.length > 0) {\n        warnings.push(\n          createValidationWarning(\n            'evidence',\n            `${unreliableEvidence.length} evidence items lack reliability scores`,\n            'Assign reliability scores for proper belief combination'\n          )\n        );\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: EvidentialThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.BAYESIAN, ThinkingMode.ABDUCTIVE],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        'Dempster-Shafer Theory',\n        'Belief vs. Plausibility',\n        'Mass Function Assignment',\n        'Evidence Combination',\n        'Uncertainty Intervals [Bel, Pls]',\n      ],\n    };\n\n    const frame = thought.frameOfDiscernment || [];\n    const evidence = thought.evidence || [];\n    const beliefFunctions = thought.beliefFunctions || [];\n    const hypotheses = thought.hypotheses || [];\n\n    // Calculate metrics\n    enhancements.metrics = {\n      frameSize: frame.length,\n      hypothesisCount: hypotheses.length,\n      evidenceCount: evidence.length,\n      beliefFunctionCount: beliefFunctions.length,\n      hasCombinedBelief: thought.combinedBelief ? 1 : 0,\n    };\n\n    // Suggestions\n    if (hypotheses.length === 0) {\n      enhancements.suggestions!.push('Define hypotheses in the frame of discernment');\n    }\n\n    if (evidence.length === 0) {\n      enhancements.suggestions!.push('Collect evidence supporting or contradicting hypotheses');\n    }\n\n    if (evidence.length > 0 && beliefFunctions.length === 0) {\n      enhancements.suggestions!.push('Assign belief functions based on evidence');\n    }\n\n    if (beliefFunctions.length > 1 && !thought.combinedBelief) {\n      enhancements.suggestions!.push(\"Combine belief functions using Dempster's rule\");\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions = [\n      'What evidence supports each hypothesis?',\n      'How reliable is each piece of evidence?',\n      \"Can evidence from different sources be combined using Dempster's rule?\",\n      'What is the uncertainty interval [Bel(H), Pls(H)] for each hypothesis?',\n      'Is the conflict between evidence sources acceptable?',\n    ];\n\n    return enhancements;\n  }\n\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as EvidentialThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid EvidentialThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): EvidentialThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as EvidentialThoughtType)) {\n      return inputType as EvidentialThoughtType;\n    }\n    return 'hypothesis_definition';\n  }\n}\n","/**\n * AnalogicalHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for Analogical reasoning:\n * - Domain mapping validation\n * - Structural alignment checking\n * - Analogy strength scoring\n * - Transfer inference suggestions\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport {\n  AnalogicalThought,\n  Domain,\n  Entity,\n  Relation,\n  Property,\n  Mapping,\n  Insight,\n  Inference,\n} from '../../types/modes/analogical.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * AnalogicalHandler - Specialized handler for analogical reasoning\n *\n * Provides semantic validation and enhancement:\n * - Validates structural alignment between domains\n * - Scores analogy strength based on mapping coverage\n * - Identifies potential negative transfer\n * - Suggests additional mappings\n */\nexport class AnalogicalHandler implements ModeHandler {\n  readonly mode = ThinkingMode.ANALOGICAL;\n  readonly modeName = 'Analogical Reasoning';\n  readonly description = 'Cross-domain reasoning through structural mapping and analogy transfer';\n\n  /**\n   * Create an analogical thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): AnalogicalThought {\n    const inputAny = input as any;\n\n    // Process source domain\n    const sourceDomain = this.processDomain(\n      inputAny.sourceDomain || inputAny.sourceAnalogy,\n      'source'\n    );\n\n    // Process target domain\n    const targetDomain = this.processDomain(\n      inputAny.targetDomain || inputAny.targetAnalogy,\n      'target'\n    );\n\n    // Process mappings\n    const mapping = this.processMappings(inputAny.mapping || inputAny.mappings || []);\n\n    // Process insights\n    const insights = this.processInsights(inputAny.insights || inputAny.inferredProperties || []);\n\n    // Process inferences\n    const inferences = this.processInferences(inputAny.inferences || []);\n\n    // Process limitations\n    const limitations = inputAny.limitations || this.identifyLimitations(mapping);\n\n    // Calculate analogy strength if not provided\n    const analogyStrength = inputAny.analogyStrength ?? this.calculateAnalogyStrength(\n      sourceDomain,\n      targetDomain,\n      mapping\n    );\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.ANALOGICAL,\n      sourceDomain,\n      targetDomain,\n      mapping,\n      insights,\n      inferences,\n      limitations,\n      analogyStrength,\n    };\n  }\n\n  /**\n   * Validate analogical-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Check source domain\n    const source = inputAny.sourceDomain || inputAny.sourceAnalogy;\n    if (!source || !source.name) {\n      warnings.push(\n        createValidationWarning(\n          'sourceDomain',\n          'Source domain not fully specified',\n          'Define the source domain with name, entities, and relations'\n        )\n      );\n    }\n\n    // Check target domain\n    const target = inputAny.targetDomain || inputAny.targetAnalogy;\n    if (!target || !target.name) {\n      warnings.push(\n        createValidationWarning(\n          'targetDomain',\n          'Target domain not fully specified',\n          'Define the target domain with name, entities, and relations'\n        )\n      );\n    }\n\n    // Check mappings\n    const mappings = inputAny.mapping || inputAny.mappings;\n    if (!mappings || mappings.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'mapping',\n          'No explicit mappings provided',\n          'Specify mappings between source and target entities'\n        )\n      );\n    }\n\n    // Warn about low-confidence mappings\n    if (mappings) {\n      const lowConfidence = mappings.filter((m: any) => (m.confidence || 0) < 0.5);\n      if (lowConfidence.length > 0) {\n        warnings.push(\n          createValidationWarning(\n            'mapping',\n            `${lowConfidence.length} mapping(s) have low confidence`,\n            'Review and strengthen weak mappings or acknowledge limitations'\n          )\n        );\n      }\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: AnalogicalThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.ABDUCTIVE, ThinkingMode.INDUCTIVE, ThinkingMode.CAUSAL],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        'Structure Mapping Theory (Gentner)',\n        'Analogical Transfer',\n        'Surface vs. Structural Similarity',\n        'Negative Transfer Awareness',\n        'Multi-constraint Theory',\n      ],\n    };\n\n    const mapping = thought.mapping || [];\n    const sourceDomain = thought.sourceDomain;\n    const targetDomain = thought.targetDomain;\n\n    // Calculate metrics\n    enhancements.metrics = {\n      mappingCount: mapping.length,\n      avgConfidence: this.calculateAverageConfidence(mapping),\n      sourceEntityCount: sourceDomain?.entities?.length || 0,\n      targetEntityCount: targetDomain?.entities?.length || 0,\n      insightCount: thought.insights?.length || 0,\n      inferenceCount: thought.inferences?.length || 0,\n      analogyStrength: thought.analogyStrength || 0,\n    };\n\n    // Generate suggestions\n    if (sourceDomain?.entities && targetDomain?.entities) {\n      const unmappedSource = this.findUnmappedEntities(sourceDomain.entities, mapping, 'source');\n      const unmappedTarget = this.findUnmappedEntities(targetDomain.entities, mapping, 'target');\n\n      if (unmappedSource.length > 0) {\n        enhancements.suggestions!.push(\n          `Consider mapping source entities: ${unmappedSource.slice(0, 3).join(', ')}`\n        );\n      }\n      if (unmappedTarget.length > 0) {\n        enhancements.suggestions!.push(\n          `Target entities without mappings: ${unmappedTarget.slice(0, 3).join(', ')}`\n        );\n      }\n    }\n\n    // Check for potential negative transfer\n    if ((thought.analogyStrength || 0) < 0.5) {\n      enhancements.warnings = ['Low analogy strength - potential for negative transfer'];\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions = [\n      'What structural relations are preserved across domains?',\n      'Are there systematic mappings or just surface similarities?',\n      \"What aspects of the source domain DON'T transfer?\",\n      'What new inferences can be drawn from the analogy?',\n      'Are there competing analogies that might be more appropriate?',\n    ];\n\n    return enhancements;\n  }\n\n  /**\n   * Process a domain from input\n   */\n  private processDomain(raw: any, type: string): Domain {\n    if (!raw) {\n      return {\n        id: `${type}-domain`,\n        name: '',\n        description: '',\n        entities: [],\n        relations: [],\n        properties: [],\n      };\n    }\n\n    return {\n      id: raw.id || `${type}-domain`,\n      name: raw.name || raw.domain || '',\n      description: raw.description || '',\n      entities: this.processEntities(raw.entities || raw.elements || []),\n      relations: this.processRelations(raw.relations || []),\n      properties: this.processProperties(raw.properties || []),\n    };\n  }\n\n  /**\n   * Process entities\n   */\n  private processEntities(raw: any[]): Entity[] {\n    return raw.map((e, index) => {\n      if (typeof e === 'string') {\n        return {\n          id: `entity-${index}`,\n          name: e,\n          type: 'unknown',\n          description: '',\n        };\n      }\n      return {\n        id: e.id || `entity-${index}`,\n        name: e.name || '',\n        type: e.type || 'unknown',\n        description: e.description || '',\n      };\n    });\n  }\n\n  /**\n   * Process relations\n   */\n  private processRelations(raw: any[]): Relation[] {\n    return raw.map((r, index) => {\n      if (typeof r === 'string') {\n        return {\n          id: `relation-${index}`,\n          type: r,\n          from: '',\n          to: '',\n          description: '',\n        };\n      }\n      return {\n        id: r.id || `relation-${index}`,\n        type: r.type || 'related',\n        from: r.from || '',\n        to: r.to || '',\n        description: r.description || '',\n      };\n    });\n  }\n\n  /**\n   * Process properties\n   */\n  private processProperties(raw: any[]): Property[] {\n    return raw.map((p) => ({\n      entityId: p.entityId || '',\n      name: p.name || '',\n      value: p.value || '',\n    }));\n  }\n\n  /**\n   * Process mappings\n   */\n  private processMappings(raw: any[]): Mapping[] {\n    return raw.map((m) => ({\n      sourceEntityId: m.sourceEntityId || m.source || '',\n      targetEntityId: m.targetEntityId || m.target || '',\n      justification: m.justification || '',\n      confidence: m.confidence ?? 0.5,\n    }));\n  }\n\n  /**\n   * Process insights\n   */\n  private processInsights(raw: any[]): Insight[] {\n    return raw.map((i) => {\n      if (typeof i === 'string') {\n        return {\n          description: i,\n          sourceEvidence: '',\n          targetApplication: '',\n          novelty: 0.5,\n        };\n      }\n      return {\n        description: i.description || '',\n        sourceEvidence: i.sourceEvidence || '',\n        targetApplication: i.targetApplication || '',\n        novelty: i.novelty ?? 0.5,\n      };\n    });\n  }\n\n  /**\n   * Process inferences (using core.ts Inference type)\n   */\n  private processInferences(raw: any[]): Inference[] {\n    return raw.map((inf) => ({\n      sourcePattern: inf.sourcePattern || inf.description || '',\n      targetPrediction: inf.targetPrediction || inf.basedOn || '',\n      confidence: inf.confidence ?? 0.5,\n      needsVerification: inf.needsVerification ?? (inf.testability ? true : false),\n    }));\n  }\n\n  /**\n   * Calculate analogy strength based on mappings\n   */\n  private calculateAnalogyStrength(source: Domain, target: Domain, mappings: Mapping[]): number {\n    if (mappings.length === 0) return 0;\n\n    const sourceCount = source.entities?.length || 1;\n    const targetCount = target.entities?.length || 1;\n    const coverage = mappings.length / Math.max(sourceCount, targetCount);\n\n    const avgConfidence = this.calculateAverageConfidence(mappings);\n\n    return Math.min(coverage * avgConfidence * 1.2, 1);\n  }\n\n  /**\n   * Calculate average confidence of mappings\n   */\n  private calculateAverageConfidence(mappings: Mapping[]): number {\n    if (mappings.length === 0) return 0;\n    const sum = mappings.reduce((acc, m) => acc + (m.confidence || 0.5), 0);\n    return sum / mappings.length;\n  }\n\n  /**\n   * Find entities not yet mapped\n   */\n  private findUnmappedEntities(\n    entities: Entity[],\n    mappings: Mapping[],\n    side: 'source' | 'target'\n  ): string[] {\n    const mappedIds = new Set(\n      mappings.map((m) => (side === 'source' ? m.sourceEntityId : m.targetEntityId))\n    );\n    return entities.filter((e) => !mappedIds.has(e.id)).map((e) => e.name);\n  }\n\n  /**\n   * Identify potential limitations of the analogy\n   */\n  private identifyLimitations(mappings: Mapping[]): string[] {\n    const limitations: string[] = [];\n\n    const lowConfidence = mappings.filter((m) => m.confidence < 0.5);\n    if (lowConfidence.length > 0) {\n      limitations.push('Some mappings have low confidence');\n    }\n\n    if (mappings.length === 0) {\n      limitations.push('No mappings defined - analogy is undefined');\n    }\n\n    return limitations;\n  }\n}\n","/**\n * FirstPrinciplesHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for First Principles reasoning:\n * - Foundational principle identification\n * - Derivation chain validation\n * - Assumption checking\n * - Bottom-up reasoning verification\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, FirstPrinciplesThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * FirstPrinciplesHandler - Specialized handler for first principles reasoning\n *\n * Provides semantic validation and enhancement:\n * - Validates derivation chains from fundamentals\n * - Identifies hidden assumptions\n * - Checks for circular reasoning\n * - Suggests missing logical steps\n */\nexport class FirstPrinciplesHandler implements ModeHandler {\n  readonly mode = ThinkingMode.FIRSTPRINCIPLES;\n  readonly modeName = 'First Principles Reasoning';\n  readonly description = 'Bottom-up reasoning from fundamental truths with derivation chains';\n\n  /**\n   * Create a first principles thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): FirstPrinciplesThought {\n    const inputAny = input as any;\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.FIRSTPRINCIPLES,\n      question: inputAny.question || '',\n      principles: inputAny.principles || [],\n      derivationSteps: inputAny.derivationSteps || [],\n      conclusion: inputAny.conclusion || {\n        statement: '',\n        derivationChain: [],\n        certainty: 0,\n      },\n      alternativeInterpretations: inputAny.alternativeInterpretations || [],\n    };\n  }\n\n  /**\n   * Validate first principles-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Warn if no question defined\n    if (!inputAny.question || inputAny.question.trim() === '') {\n      warnings.push(\n        createValidationWarning(\n          'question',\n          'No question specified',\n          'Define the fundamental question you are trying to answer'\n        )\n      );\n    }\n\n    // Warn if no principles identified\n    if (!inputAny.principles || inputAny.principles.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'principles',\n          'No foundational principles identified',\n          'Identify the basic truths or axioms underlying your reasoning'\n        )\n      );\n    }\n\n    // Check for principles without justification\n    if (inputAny.principles) {\n      const unjustified = inputAny.principles.filter((p: any) => !p.justification || p.justification.trim() === '');\n      if (unjustified.length > 0) {\n        warnings.push(\n          createValidationWarning(\n            'principles',\n            `${unjustified.length} principles lack justification`,\n            'Provide justification for each foundational principle'\n          )\n        );\n      }\n    }\n\n    // Check derivation chain integrity\n    if (inputAny.derivationSteps && inputAny.derivationSteps.length > 0) {\n      const principleIds = new Set((inputAny.principles || []).map((p: any) => p.id));\n      for (const step of inputAny.derivationSteps) {\n        if (step.principle && !principleIds.has(step.principle)) {\n          warnings.push(\n            createValidationWarning(\n              'derivationSteps',\n              `Step references unknown principle: ${step.principle}`,\n              'Ensure all derivation steps reference defined principles'\n            )\n          );\n        }\n      }\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: FirstPrinciplesThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.DEDUCTIVE, ThinkingMode.ABDUCTIVE, ThinkingMode.FORMALLOGIC],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        \"Elon Musk's First Principles Method\",\n        'Socratic Questioning',\n        'Aristotelian Axioms',\n        'Foundationalism',\n        'Decomposition and Reconstruction',\n      ],\n    };\n\n    const principles = thought.principles || [];\n    const derivationSteps = thought.derivationSteps || [];\n\n    // Calculate metrics\n    enhancements.metrics = {\n      principleCount: principles.length,\n      derivationStepCount: derivationSteps.length,\n      conclusionCertainty: thought.conclusion?.certainty || 0,\n      alternativeCount: thought.alternativeInterpretations?.length || 0,\n    };\n\n    // Suggestions\n    if (principles.length === 0) {\n      enhancements.suggestions!.push('Start by asking \"What do we know for certain?\"');\n    }\n\n    if (principles.length > 0 && derivationSteps.length === 0) {\n      enhancements.suggestions!.push('Build up from principles to derive new insights');\n    }\n\n    if (!thought.question) {\n      enhancements.suggestions!.push('Define the fundamental question you are investigating');\n    }\n\n    if (!thought.conclusion || !thought.conclusion.statement) {\n      enhancements.suggestions!.push('Formulate a conclusion based on your derivation');\n    }\n\n    // Guiding questions (Socratic method)\n    enhancements.guidingQuestions = [\n      'What is the most fundamental truth here?',\n      'What assumptions am I making that could be wrong?',\n      'Can this be broken down further?',\n      'What would have to be true for this to work?',\n      'Am I reasoning from facts or from analogy/convention?',\n      'What would someone with no prior knowledge need to understand this?',\n    ];\n\n    return enhancements;\n  }\n\n  supportsThoughtType(_thoughtType: string): boolean {\n    // FirstPrinciplesThought doesn't have a thoughtType field\n    return true;\n  }\n}\n","/**\n * SystemsThinkingHandler - Phase 10 Sprint 2B (v8.2.0)\n *\n * Specialized handler for Systems Thinking mode with:\n * - Systems Archetypes detection (8 classic archetypes)\n * - Feedback loop analysis\n * - Leverage point identification\n * - Warning signs and intervention suggestions\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, SystemsThinkingThought } from '../../types/core.js';\nimport type {\n  SystemDefinition,\n  SystemComponent,\n  FeedbackLoop,\n  LeveragePoint,\n} from '../../types/modes/systemsthinking.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ModeEnhancements,\n  DetectedArchetype,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Systems Archetype definitions\n * Based on Peter Senge's \"The Fifth Discipline\" and other systems thinking literature\n */\ninterface SystemArchetype {\n  name: string;\n  description: string;\n  pattern: string;\n  warningSigns: string[];\n  interventions: string[];\n  loopSignature: {\n    reinforcingCount?: number;\n    balancingCount?: number;\n    hasDelay?: boolean;\n  };\n}\n\nconst SYSTEMS_ARCHETYPES: SystemArchetype[] = [\n  {\n    name: 'Fixes that Fail',\n    description: 'A quick fix creates unintended consequences that make the problem worse',\n    pattern: 'Solution  Short-term relief  Unintended consequences  Original problem worsened',\n    warningSigns: [\n      'Quick fixes that keep recurring',\n      'Side effects appearing after solution',\n      'Escalating interventions required',\n    ],\n    interventions: [\n      'Address root cause instead of symptoms',\n      'Consider long-term consequences before acting',\n      'Monitor for unintended side effects',\n    ],\n    loopSignature: { reinforcingCount: 1, balancingCount: 1, hasDelay: true },\n  },\n  {\n    name: 'Shifting the Burden',\n    description: 'A symptomatic solution undermines the fundamental solution',\n    pattern: 'Symptom  Quick fix AND Fundamental solution, Quick fix erodes capacity for fundamental solution',\n    warningSigns: [\n      'Increasing dependence on quick fixes',\n      'Atrophying fundamental capabilities',\n      'Growing gap between symptoms and root causes',\n    ],\n    interventions: [\n      'Strengthen the fundamental solution',\n      'Reduce reliance on symptomatic solutions',\n      'Build capacity while managing symptoms',\n    ],\n    loopSignature: { reinforcingCount: 1, balancingCount: 2, hasDelay: true },\n  },\n  {\n    name: 'Limits to Growth',\n    description: 'Growth approaches a limit which slows or stops further growth',\n    pattern: 'Growth process  Success  Limiting condition activated  Growth slows/stops',\n    warningSigns: [\n      'Initial rapid growth',\n      'Gradual slowdown despite continued effort',\n      'Diminishing returns on investment',\n    ],\n    interventions: [\n      'Identify and address limiting factors early',\n      'Prepare for growth constraints',\n      'Shift focus from pushing growth to removing limits',\n    ],\n    loopSignature: { reinforcingCount: 1, balancingCount: 1, hasDelay: false },\n  },\n  {\n    name: 'Success to the Successful',\n    description: 'Success breeds more success, starving other activities',\n    pattern: 'Initial advantage  More resources allocated  Greater success  Competitors starved',\n    warningSigns: [\n      'Winner-take-all dynamics',\n      'Declining diversity of options',\n      'Concentration of resources',\n    ],\n    interventions: [\n      'Ensure fair resource allocation',\n      'Support weaker parties',\n      'Maintain diverse options',\n    ],\n    loopSignature: { reinforcingCount: 2, balancingCount: 0, hasDelay: false },\n  },\n  {\n    name: 'Tragedy of the Commons',\n    description: 'Individual overuse depletes a shared resource',\n    pattern: 'Shared resource  Individual exploitation  Resource depletion  Harm to all',\n    warningSigns: [\n      'Declining shared resource',\n      'Increasing individual consumption',\n      'Rational individual behavior leading to collective harm',\n    ],\n    interventions: [\n      'Establish governance mechanisms',\n      'Create feedback on individual impact',\n      'Align individual incentives with collective good',\n    ],\n    loopSignature: { reinforcingCount: 1, balancingCount: 1, hasDelay: true },\n  },\n  {\n    name: 'Escalation',\n    description: 'Two parties compete, each responding to the other\\'s actions',\n    pattern: 'Party A acts  Party B perceives threat  Party B responds  Party A perceives threat  Cycle',\n    warningSigns: [\n      'Competitive actions and reactions',\n      'Each side feeling justified',\n      'Escalating intensity over time',\n    ],\n    interventions: [\n      'Break the cycle unilaterally',\n      'Establish communication channels',\n      'Find mutual benefit solutions',\n    ],\n    loopSignature: { reinforcingCount: 2, balancingCount: 0, hasDelay: false },\n  },\n  {\n    name: 'Growth and Underinvestment',\n    description: 'Growth is limited by underinvestment in capacity',\n    pattern: 'Demand grows  Capacity stretched  Performance drops  Investment deferred  Limits growth',\n    warningSigns: [\n      'Quality declining with growth',\n      'Deferred investment in capacity',\n      'Performance standards lowered',\n    ],\n    interventions: [\n      'Invest in capacity ahead of demand',\n      'Maintain performance standards',\n      'Plan for growth requirements',\n    ],\n    loopSignature: { reinforcingCount: 1, balancingCount: 2, hasDelay: true },\n  },\n  {\n    name: 'Eroding Goals',\n    description: 'Under pressure, goals are lowered rather than addressing the gap',\n    pattern: 'Gap between goals and reality  Pressure  Goals lowered  Gap closed artificially',\n    warningSigns: [\n      'Gradual lowering of standards',\n      'Rationalization of declining performance',\n      'Short-term pressure driving decisions',\n    ],\n    interventions: [\n      'Hold firm on essential goals',\n      'Address root causes of gaps',\n      'Distinguish essential from negotiable goals',\n    ],\n    loopSignature: { reinforcingCount: 1, balancingCount: 1, hasDelay: false },\n  },\n];\n\n/**\n * Thought types specific to systems thinking mode\n */\ntype SystemsThinkingThoughtType =\n  | 'system_definition'\n  | 'component_analysis'\n  | 'feedback_identification'\n  | 'leverage_analysis'\n  | 'behavior_prediction';\n\n/**\n * SystemsThinkingHandler - Specialized handler for systems thinking\n *\n * Provides semantic validation beyond schema validation:\n * - Validates component references in feedback loops\n * - Detects potential systems archetypes based on structure\n * - Identifies leverage points\n * - Suggests warning signs based on detected patterns\n */\nexport class SystemsThinkingHandler implements ModeHandler {\n  readonly mode = ThinkingMode.SYSTEMSTHINKING;\n  readonly modeName = 'Systems Thinking';\n  readonly description = 'Systems analysis with archetype detection, feedback loops, and leverage point identification';\n\n  /**\n   * Supported thought types for systems thinking mode\n   */\n  private readonly supportedThoughtTypes: SystemsThinkingThoughtType[] = [\n    'system_definition',\n    'component_analysis',\n    'feedback_identification',\n    'leverage_analysis',\n    'behavior_prediction',\n  ];\n\n  /**\n   * Create a systems thinking thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): SystemsThinkingThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.SYSTEMSTHINKING,\n      thoughtType,\n      system: inputAny.system,\n      components: inputAny.components || [],\n      feedbackLoops: inputAny.feedbackLoops || [],\n      leveragePoints: inputAny.leveragePoints || [],\n      behaviors: inputAny.behaviors || [],\n    } as SystemsThinkingThought;\n  }\n\n  /**\n   * Validate systems thinking-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Collect component IDs for validation\n    const componentIds = new Set<string>();\n    if (inputAny.components && Array.isArray(inputAny.components)) {\n      for (const component of inputAny.components as SystemComponent[]) {\n        if (component.id) componentIds.add(component.id);\n      }\n\n      // Validate components\n      for (let i = 0; i < inputAny.components.length; i++) {\n        const component = inputAny.components[i] as SystemComponent;\n        const compValidation = this.validateComponent(component, i, componentIds);\n        errors.push(...compValidation.errors);\n        warnings.push(...compValidation.warnings);\n      }\n    }\n\n    // Validate feedback loops\n    if (inputAny.feedbackLoops && Array.isArray(inputAny.feedbackLoops)) {\n      for (let i = 0; i < inputAny.feedbackLoops.length; i++) {\n        const loop = inputAny.feedbackLoops[i] as FeedbackLoop;\n        const loopValidation = this.validateFeedbackLoop(loop, i, componentIds);\n        errors.push(...loopValidation.errors);\n        warnings.push(...loopValidation.warnings);\n      }\n    }\n\n    // Validate leverage points\n    if (inputAny.leveragePoints && Array.isArray(inputAny.leveragePoints)) {\n      for (let i = 0; i < inputAny.leveragePoints.length; i++) {\n        const lp = inputAny.leveragePoints[i] as LeveragePoint;\n        const lpValidation = this.validateLeveragePoint(lp, i, componentIds);\n        errors.push(...lpValidation.errors);\n        warnings.push(...lpValidation.warnings);\n      }\n    }\n\n    // Validate system definition\n    if (inputAny.system) {\n      const sysValidation = this.validateSystem(inputAny.system);\n      warnings.push(...sysValidation.warnings);\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get systems thinking-specific enhancements\n   */\n  getEnhancements(thought: SystemsThinkingThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.CAUSAL, ThinkingMode.OPTIMIZATION, ThinkingMode.SCIENTIFICMETHOD],\n      guidingQuestions: [],\n      warnings: [],\n      mentalModels: [\n        'Feedback Loops',\n        'Stock and Flow',\n        'Systems Archetypes',\n        'Leverage Points',\n        'Emergence',\n      ],\n    };\n\n    // Calculate metrics\n    const componentCount = thought.components?.length || 0;\n    const feedbackLoopCount = thought.feedbackLoops?.length || 0;\n    const leveragePointCount = thought.leveragePoints?.length || 0;\n    const behaviorCount = thought.behaviors?.length || 0;\n\n    // Count loop types\n    const reinforcingLoops = (thought.feedbackLoops || []).filter(l => l.type === 'reinforcing').length;\n    const balancingLoops = (thought.feedbackLoops || []).filter(l => l.type === 'balancing').length;\n\n    enhancements.metrics = {\n      componentCount,\n      feedbackLoopCount,\n      reinforcingLoops,\n      balancingLoops,\n      leveragePointCount,\n      behaviorCount,\n    };\n\n    // Detect archetypes\n    const detectedArchetypesResult = this.detectArchetypes(thought);\n    if (detectedArchetypesResult.length > 0) {\n      enhancements.detectedArchetypes = detectedArchetypesResult.map(a => ({\n        name: a.name,\n        confidence: a.confidence,\n        matchedPatterns: a.archetype.warningSigns,\n      } as DetectedArchetype));\n\n      // Add archetype-specific warnings\n      for (const detected of detectedArchetypesResult) {\n        if (detected.confidence > 0.5) {\n          enhancements.warnings!.push(\n            `Potential \"${detected.name}\" archetype detected. Watch for: ${detected.archetype.warningSigns[0]}`\n          );\n        }\n      }\n    }\n\n    // Suggestions based on content\n    if (componentCount === 0) {\n      enhancements.suggestions!.push(\n        'Define system components (stocks, flows, variables) to model the system'\n      );\n    }\n\n    if (componentCount >= 2 && feedbackLoopCount === 0) {\n      enhancements.suggestions!.push(\n        'Identify feedback loops connecting your components'\n      );\n    }\n\n    if (reinforcingLoops > 0 && balancingLoops === 0) {\n      enhancements.warnings!.push(\n        'Only reinforcing loops detected. System may be unstable without balancing feedback.'\n      );\n    }\n\n    if (feedbackLoopCount >= 2 && leveragePointCount === 0) {\n      enhancements.suggestions!.push(\n        'Identify leverage points where small changes could have large effects'\n      );\n    }\n\n    // Guiding questions\n    if (thought.system) {\n      enhancements.guidingQuestions!.push(\n        'What is the system optimizing for? Is that the intended goal?'\n      );\n    }\n\n    if (feedbackLoopCount > 0) {\n      enhancements.guidingQuestions!.push(\n        'Which feedback loop is currently dominant in the system behavior?'\n      );\n    }\n\n    const delayedLoops = (thought.feedbackLoops || []).filter(l => l.delay && l.delay > 0);\n    if (delayedLoops.length > 0) {\n      enhancements.guidingQuestions!.push(\n        'How do delays in feedback affect system predictability?'\n      );\n    }\n\n    if (componentCount >= 3 && behaviorCount === 0) {\n      enhancements.guidingQuestions!.push(\n        'What emergent behaviors arise from the interaction of these components?'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as SystemsThinkingThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid SystemsThinkingThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): SystemsThinkingThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as SystemsThinkingThoughtType)) {\n      return inputType as SystemsThinkingThoughtType;\n    }\n    return 'system_definition';\n  }\n\n  /**\n   * Validate a system component\n   */\n  private validateComponent(\n    component: SystemComponent,\n    index: number,\n    existingIds: Set<string>\n  ): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    if (!component.id || component.id.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `components[${index}].id`,\n          'Component has no ID',\n          'Add an ID to reference this component in loops'\n        )\n      );\n    }\n\n    if (!component.name || component.name.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `components[${index}].name`,\n          'Component has no name',\n          'Add a descriptive name'\n        )\n      );\n    }\n\n    // Validate influencedBy references\n    if (component.influencedBy) {\n      for (const refId of component.influencedBy) {\n        if (!existingIds.has(refId)) {\n          warnings.push(\n            createValidationWarning(\n              `components[${index}].influencedBy`,\n              `References non-existent component: ${refId}`,\n              'Ensure all component references exist'\n            )\n          );\n        }\n      }\n    }\n\n    return errors.length > 0 ? validationFailure(errors, warnings) : validationSuccess(warnings);\n  }\n\n  /**\n   * Validate a feedback loop\n   */\n  private validateFeedbackLoop(\n    loop: FeedbackLoop,\n    index: number,\n    componentIds: Set<string>\n  ): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    if (!loop.id || loop.id.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `feedbackLoops[${index}].id`,\n          'Feedback loop has no ID',\n          'Add an ID to track this loop'\n        )\n      );\n    }\n\n    // Validate component references\n    if (loop.components && loop.components.length > 0) {\n      for (const compId of loop.components) {\n        if (!componentIds.has(compId)) {\n          warnings.push(\n            createValidationWarning(\n              `feedbackLoops[${index}].components`,\n              `Loop references non-existent component: ${compId}`,\n              'Ensure all components in the loop exist'\n            )\n          );\n        }\n      }\n\n      // Check for minimum loop size\n      if (loop.components.length < 2) {\n        warnings.push(\n          createValidationWarning(\n            `feedbackLoops[${index}].components`,\n            'Feedback loop has fewer than 2 components',\n            'A feedback loop needs at least 2 components to form a cycle'\n          )\n        );\n      }\n    } else {\n      warnings.push(\n        createValidationWarning(\n          `feedbackLoops[${index}].components`,\n          'Feedback loop has no components',\n          'Add components that form the feedback loop'\n        )\n      );\n    }\n\n    // Validate strength\n    if (loop.strength !== undefined && (loop.strength < 0 || loop.strength > 1)) {\n      warnings.push(\n        createValidationWarning(\n          `feedbackLoops[${index}].strength`,\n          `Loop strength (${loop.strength}) is outside [0, 1] range`,\n          'Strength should be normalized to [0, 1]'\n        )\n      );\n    }\n\n    return errors.length > 0 ? validationFailure(errors, warnings) : validationSuccess(warnings);\n  }\n\n  /**\n   * Validate a leverage point\n   */\n  private validateLeveragePoint(\n    lp: LeveragePoint,\n    index: number,\n    componentIds: Set<string>\n  ): ValidationResult {\n    const warnings = [];\n\n    if (!lp.location || lp.location.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `leveragePoints[${index}].location`,\n          'Leverage point has no location',\n          'Specify which component or loop this leverage point targets'\n        )\n      );\n    } else if (!componentIds.has(lp.location)) {\n      // Location might reference a loop ID, so just warn\n      warnings.push(\n        createValidationWarning(\n          `leveragePoints[${index}].location`,\n          `Leverage point location \"${lp.location}\" not found in components`,\n          'Ensure the location references an existing component or loop'\n        )\n      );\n    }\n\n    // Validate effectiveness and difficulty\n    if (lp.effectiveness !== undefined && (lp.effectiveness < 0 || lp.effectiveness > 1)) {\n      warnings.push(\n        createValidationWarning(\n          `leveragePoints[${index}].effectiveness`,\n          `Effectiveness (${lp.effectiveness}) is outside [0, 1] range`,\n          'Effectiveness should be normalized to [0, 1]'\n        )\n      );\n    }\n\n    if (lp.difficulty !== undefined && (lp.difficulty < 0 || lp.difficulty > 1)) {\n      warnings.push(\n        createValidationWarning(\n          `leveragePoints[${index}].difficulty`,\n          `Difficulty (${lp.difficulty}) is outside [0, 1] range`,\n          'Difficulty should be normalized to [0, 1]'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate system definition\n   */\n  private validateSystem(system: SystemDefinition): ValidationResult {\n    const warnings = [];\n\n    if (!system.boundary || system.boundary.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'system.boundary',\n          'System has no boundary defined',\n          'Define what is inside and outside the system'\n        )\n      );\n    }\n\n    if (!system.purpose || system.purpose.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'system.purpose',\n          'System has no purpose defined',\n          'Define what the system is designed to achieve'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Detect systems archetypes based on structure\n   */\n  private detectArchetypes(\n    thought: SystemsThinkingThought\n  ): { name: string; confidence: number; archetype: SystemArchetype }[] {\n    const detected: { name: string; confidence: number; archetype: SystemArchetype }[] = [];\n    const loops = thought.feedbackLoops || [];\n\n    const reinforcingCount = loops.filter(l => l.type === 'reinforcing').length;\n    const balancingCount = loops.filter(l => l.type === 'balancing').length;\n    const hasDelay = loops.some(l => l.delay && l.delay > 0);\n\n    for (const archetype of SYSTEMS_ARCHETYPES) {\n      let confidence = 0;\n      const sig = archetype.loopSignature;\n\n      // Match loop counts (fuzzy matching)\n      if (sig.reinforcingCount !== undefined) {\n        if (reinforcingCount === sig.reinforcingCount) {\n          confidence += 0.4;\n        } else if (Math.abs(reinforcingCount - sig.reinforcingCount) === 1) {\n          confidence += 0.2;\n        }\n      }\n\n      if (sig.balancingCount !== undefined) {\n        if (balancingCount === sig.balancingCount) {\n          confidence += 0.4;\n        } else if (Math.abs(balancingCount - sig.balancingCount) === 1) {\n          confidence += 0.2;\n        }\n      }\n\n      if (sig.hasDelay !== undefined) {\n        if (hasDelay === sig.hasDelay) {\n          confidence += 0.2;\n        }\n      }\n\n      // Only report if confidence is meaningful\n      if (confidence >= 0.4) {\n        detected.push({\n          name: archetype.name,\n          confidence: Math.min(confidence, 1),\n          archetype,\n        });\n      }\n    }\n\n    // Sort by confidence\n    detected.sort((a, b) => b.confidence - a.confidence);\n\n    // Return top 3\n    return detected.slice(0, 3);\n  }\n}\n","/**\n * ScientificMethodHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for Scientific Method reasoning:\n * - Hypothesis formulation validation\n * - Experiment design checking\n * - Falsifiability assessment\n * - Result interpretation analysis\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, ScientificMethodThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  createValidationWarning,\n} from './ModeHandler.js';\n\ntype ScientificMethodThoughtType = 'question_formulation' | 'hypothesis_generation' | 'experiment_design' | 'data_collection' | 'analysis' | 'conclusion';\n\n/**\n * ScientificMethodHandler - Specialized handler for scientific method reasoning\n *\n * Provides semantic validation and enhancement:\n * - Validates hypothesis falsifiability\n * - Checks experiment design quality\n * - Analyzes prediction specificity\n * - Suggests control variables\n */\nexport class ScientificMethodHandler implements ModeHandler {\n  readonly mode = ThinkingMode.SCIENTIFICMETHOD;\n  readonly modeName = 'Scientific Method';\n  readonly description = 'Hypothesis testing with experimental design and falsifiability analysis';\n\n  private readonly supportedThoughtTypes: ScientificMethodThoughtType[] = [\n    'question_formulation',\n    'hypothesis_generation',\n    'experiment_design',\n    'data_collection',\n    'analysis',\n    'conclusion',\n  ];\n\n  /**\n   * Create a scientific method thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): ScientificMethodThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.SCIENTIFICMETHOD,\n      thoughtType,\n      researchQuestion: inputAny.researchQuestion,\n      scientificHypotheses: inputAny.scientificHypotheses || [],\n      experiment: inputAny.experiment,\n      data: inputAny.data,\n      analysis: inputAny.analysis,\n      conclusion: inputAny.conclusion,\n    };\n  }\n\n  /**\n   * Validate scientific method-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Check for research question\n    if (!inputAny.researchQuestion) {\n      warnings.push(\n        createValidationWarning(\n          'researchQuestion',\n          'No research question defined',\n          'Formulate a clear research question'\n        )\n      );\n    }\n\n    // Check hypothesis formulation\n    if (inputAny.scientificHypotheses && inputAny.scientificHypotheses.length > 0) {\n      for (const hyp of inputAny.scientificHypotheses) {\n        if (!hyp.testable) {\n          warnings.push(\n            createValidationWarning(\n              'scientificHypotheses',\n              `Hypothesis \"${hyp.statement?.slice(0, 30)}...\" may not be testable`,\n              'Ensure hypotheses are empirically testable'\n            )\n          );\n        }\n        if (!hyp.falsifiable) {\n          warnings.push(\n            createValidationWarning(\n              'scientificHypotheses',\n              `Hypothesis \"${hyp.statement?.slice(0, 30)}...\" may not be falsifiable`,\n              'Ensure hypotheses can be proven false'\n            )\n          );\n        }\n      }\n    } else {\n      warnings.push(\n        createValidationWarning(\n          'scientificHypotheses',\n          'No hypotheses defined',\n          'Formulate testable hypotheses based on your research question'\n        )\n      );\n    }\n\n    // Check experiment design\n    if (inputAny.experiment) {\n      if (!inputAny.experiment.controls || inputAny.experiment.controls.length === 0) {\n        warnings.push(\n          createValidationWarning(\n            'experiment.controls',\n            'No control conditions specified',\n            'Define control conditions for valid comparison'\n          )\n        );\n      }\n      if (!inputAny.experiment.sampleSize || inputAny.experiment.sampleSize < 10) {\n        warnings.push(\n          createValidationWarning(\n            'experiment.sampleSize',\n            'Sample size may be insufficient',\n            'Consider power analysis for adequate sample size'\n          )\n        );\n      }\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: ScientificMethodThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.ABDUCTIVE, ThinkingMode.INDUCTIVE, ThinkingMode.BAYESIAN],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        'Popperian Falsificationism',\n        'Hypothetico-Deductive Method',\n        'Control Variables',\n        'Reproducibility',\n        'Statistical Significance',\n        'Null Hypothesis Testing',\n      ],\n    };\n\n    const hypotheses = thought.scientificHypotheses || [];\n    const hasExperiment = !!thought.experiment;\n    const hasData = !!thought.data;\n    const hasAnalysis = !!thought.analysis;\n    const hasConclusion = !!thought.conclusion;\n\n    // Calculate metrics\n    enhancements.metrics = {\n      hypothesisCount: hypotheses.length,\n      hasResearchQuestion: thought.researchQuestion ? 1 : 0,\n      hasExperiment: hasExperiment ? 1 : 0,\n      hasData: hasData ? 1 : 0,\n      hasAnalysis: hasAnalysis ? 1 : 0,\n      hasConclusion: hasConclusion ? 1 : 0,\n    };\n\n    // Stage-specific suggestions\n    if (!thought.researchQuestion) {\n      enhancements.suggestions!.push('Start by formulating a clear research question');\n    } else if (hypotheses.length === 0) {\n      enhancements.suggestions!.push('Derive specific, testable hypotheses from your research question');\n    } else if (!hasExperiment) {\n      enhancements.suggestions!.push('Design an experiment to test your hypotheses');\n    } else if (!hasData) {\n      enhancements.suggestions!.push('Collect data according to your experimental design');\n    } else if (!hasAnalysis) {\n      enhancements.suggestions!.push('Analyze data using appropriate statistical methods');\n    } else if (!hasConclusion) {\n      enhancements.suggestions!.push('Draw conclusions based on your analysis results');\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions = [\n      'What would falsify this hypothesis?',\n      'Are there confounding variables to control for?',\n      'Is the experiment reproducible by others?',\n      'What is the null hypothesis?',\n      'How large a sample size is needed for significance?',\n      'Are there alternative hypotheses that explain the same observations?',\n    ];\n\n    return enhancements;\n  }\n\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as ScientificMethodThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid ScientificMethodThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): ScientificMethodThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as ScientificMethodThoughtType)) {\n      return inputType as ScientificMethodThoughtType;\n    }\n    return 'question_formulation';\n  }\n}\n","/**\n * FormalLogicHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for Formal Logic reasoning:\n * - Logical validity checking\n * - Inference rule validation\n * - Proposition-conclusion consistency\n * - Logical fallacy detection\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, FormalLogicThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  createValidationWarning,\n} from './ModeHandler.js';\n\ntype FormalLogicThoughtType = 'proposition_definition' | 'inference_derivation' | 'proof_construction' | 'satisfiability_check' | 'validity_verification';\n\n/**\n * FormalLogicHandler - Specialized handler for formal logic reasoning\n *\n * Provides semantic validation and enhancement:\n * - Validates inference rule applications\n * - Checks logical consistency\n * - Detects common fallacies\n * - Suggests valid derivation steps\n */\nexport class FormalLogicHandler implements ModeHandler {\n  readonly mode = ThinkingMode.FORMALLOGIC;\n  readonly modeName = 'Formal Logic';\n  readonly description = 'Propositional and predicate logic with inference validation';\n\n  private readonly supportedThoughtTypes: FormalLogicThoughtType[] = [\n    'proposition_definition',\n    'inference_derivation',\n    'proof_construction',\n    'satisfiability_check',\n    'validity_verification',\n  ];\n\n  /**\n   * Create a formal logic thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): FormalLogicThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.FORMALLOGIC,\n      thoughtType,\n      propositions: inputAny.propositions || [],\n      logicalInferences: inputAny.logicalInferences || [],\n      proof: inputAny.proof,\n      truthTable: inputAny.truthTable,\n      satisfiability: inputAny.satisfiability,\n    };\n  }\n\n  /**\n   * Validate formal logic-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Check for propositions\n    if (!inputAny.propositions || inputAny.propositions.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'propositions',\n          'No propositions defined',\n          'Define the atomic propositions for your logical argument'\n        )\n      );\n    }\n\n    // Check for inference validity\n    if (inputAny.logicalInferences) {\n      for (const inf of inputAny.logicalInferences) {\n        if (inf.valid === false) {\n          warnings.push(\n            createValidationWarning(\n              'logicalInferences',\n              `Inference \"${inf.id}\" is marked as invalid`,\n              'Review the inference rule application'\n            )\n          );\n        }\n      }\n    }\n\n    // Check proof completeness\n    if (inputAny.proof) {\n      if (inputAny.proof.completeness !== undefined && inputAny.proof.completeness < 1) {\n        warnings.push(\n          createValidationWarning(\n            'proof',\n            `Proof is ${(inputAny.proof.completeness * 100).toFixed(0)}% complete`,\n            'Add missing proof steps to complete the derivation'\n          )\n        );\n      }\n      if (inputAny.proof.valid === false) {\n        warnings.push(\n          createValidationWarning(\n            'proof',\n            'Proof is marked as invalid',\n            'Review the logical steps for errors'\n          )\n        );\n      }\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: FormalLogicThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.DEDUCTIVE, ThinkingMode.MATHEMATICS, ThinkingMode.FIRSTPRINCIPLES],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        'Propositional Logic',\n        'Predicate Logic',\n        'Natural Deduction',\n        'Truth Tables',\n        'Proof by Contradiction',\n        'Logical Equivalences',\n      ],\n    };\n\n    const propositions = thought.propositions || [];\n    const inferences = thought.logicalInferences || [];\n    const proof = thought.proof;\n\n    // Calculate metrics\n    enhancements.metrics = {\n      propositionCount: propositions.length,\n      inferenceCount: inferences.length,\n      validInferences: inferences.filter((i) => i.valid).length,\n      proofStepCount: proof?.steps?.length || 0,\n      proofCompleteness: proof?.completeness || 0,\n    };\n\n    // Stage-specific suggestions\n    if (propositions.length === 0) {\n      enhancements.suggestions!.push('Start by defining atomic propositions');\n    } else if (inferences.length === 0 && !proof) {\n      enhancements.suggestions!.push('Apply inference rules to derive new conclusions');\n    } else if (proof && proof.completeness < 1) {\n      enhancements.suggestions!.push('Continue building the proof with additional steps');\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions = [\n      'Are all propositions clearly stated?',\n      'Which inference rule justifies each step?',\n      'Can the argument be formalized in symbolic logic?',\n      'Is the proof complete and valid?',\n      'What are the truth conditions for the conclusion?',\n    ];\n\n    // Add available inference rules as suggestions\n    enhancements.suggestions!.push(\n      'Available inference rules: modus_ponens, modus_tollens, hypothetical_syllogism, disjunctive_syllogism, conjunction, simplification, addition, resolution'\n    );\n\n    return enhancements;\n  }\n\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as FormalLogicThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid FormalLogicThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): FormalLogicThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as FormalLogicThoughtType)) {\n      return inputType as FormalLogicThoughtType;\n    }\n    return 'proposition_definition';\n  }\n}\n","/**\n * SynthesisHandler - Phase 10 Sprint 2B (v8.2.0)\n *\n * Specialized handler for Synthesis reasoning mode with:\n * - Source coverage tracking\n * - Theme extraction validation\n * - Contradiction detection between sources\n * - Research gap identification\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, SynthesisThought } from '../../types/core.js';\nimport type {\n  Source,\n  Theme,\n  Contradiction,\n  LiteratureGap,\n  SynthesisThoughtType,\n} from '../../types/modes/synthesis.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * SynthesisHandler - Specialized handler for literature synthesis\n *\n * Provides semantic validation beyond schema validation:\n * - Validates source coverage (themes should reference existing sources)\n * - Detects potential contradictions between sources\n * - Identifies gaps in literature coverage\n * - Validates quality metrics are within valid ranges\n */\nexport class SynthesisHandler implements ModeHandler {\n  readonly mode = ThinkingMode.SYNTHESIS;\n  readonly modeName = 'Literature Synthesis';\n  readonly description = 'Multi-source synthesis with theme extraction, contradiction detection, and gap analysis';\n\n  /**\n   * Supported thought types for synthesis mode\n   */\n  private readonly supportedThoughtTypes: SynthesisThoughtType[] = [\n    'source_identification',\n    'source_evaluation',\n    'theme_extraction',\n    'pattern_integration',\n    'gap_identification',\n    'synthesis_construction',\n    'framework_development',\n  ];\n\n  /**\n   * Create a synthesis thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): SynthesisThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Auto-detect contradictions if not provided\n    let contradictions = inputAny.contradictions || [];\n    if (contradictions.length === 0 && inputAny.sources && inputAny.sources.length > 1) {\n      contradictions = this.detectPotentialContradictions(inputAny.sources, inputAny.themes);\n    }\n\n    // Calculate source coverage metrics\n    const sourceCoverage = this.calculateSourceCoverage(\n      inputAny.sources || [],\n      inputAny.themes || []\n    );\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.SYNTHESIS,\n      thoughtType,\n      sources: inputAny.sources || [],\n      reviewMetadata: inputAny.reviewMetadata,\n      concepts: inputAny.concepts || [],\n      themes: inputAny.themes || [],\n      findings: inputAny.findings || [],\n      patterns: inputAny.patterns || [],\n      relations: inputAny.relations || [],\n      gaps: inputAny.gaps || [],\n      contradictions,\n      framework: inputAny.framework,\n      conclusions: inputAny.conclusions || [],\n      dependencies: inputAny.dependencies || [],\n      assumptions: inputAny.assumptions || [],\n      uncertainty: inputAny.uncertainty ?? 0.5,\n      keyInsight: inputAny.keyInsight,\n      // Store calculated metrics in a way accessible to enhancements\n      _sourceCoverage: sourceCoverage,\n    } as SynthesisThought & { _sourceCoverage?: any };\n  }\n\n  /**\n   * Validate synthesis-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate sources\n    if (inputAny.sources && Array.isArray(inputAny.sources)) {\n      const sourceIds = new Set<string>();\n      for (let i = 0; i < inputAny.sources.length; i++) {\n        const source = inputAny.sources[i];\n        const sourceValidation = this.validateSource(source, i, sourceIds);\n        errors.push(...sourceValidation.errors);\n        warnings.push(...sourceValidation.warnings);\n        if (source.id) sourceIds.add(source.id);\n      }\n\n      // Check for duplicate source IDs\n      if (sourceIds.size !== inputAny.sources.filter((s: Source) => s.id).length) {\n        errors.push(\n          createValidationError(\n            'sources',\n            'Duplicate source IDs detected',\n            'DUPLICATE_SOURCE_IDS'\n          )\n        );\n      }\n\n      // Validate themes reference existing sources\n      if (inputAny.themes && Array.isArray(inputAny.themes)) {\n        for (let i = 0; i < inputAny.themes.length; i++) {\n          const theme = inputAny.themes[i];\n          const themeValidation = this.validateTheme(theme, i, sourceIds);\n          errors.push(...themeValidation.errors);\n          warnings.push(...themeValidation.warnings);\n        }\n      }\n\n      // Validate contradictions reference existing sources\n      if (inputAny.contradictions && Array.isArray(inputAny.contradictions)) {\n        for (let i = 0; i < inputAny.contradictions.length; i++) {\n          const contradiction = inputAny.contradictions[i];\n          const contValidation = this.validateContradiction(contradiction, i, sourceIds);\n          errors.push(...contValidation.errors);\n          warnings.push(...contValidation.warnings);\n        }\n      }\n\n      // Warn if only one source\n      if (inputAny.sources.length === 1) {\n        warnings.push(\n          createValidationWarning(\n            'sources',\n            'Only one source provided',\n            'Synthesis typically requires multiple sources for meaningful integration'\n          )\n        );\n      }\n    }\n\n    // Validate gaps reference themes\n    if (inputAny.gaps && Array.isArray(inputAny.gaps) && inputAny.themes) {\n      const themeIds = new Set((inputAny.themes as Theme[]).map(t => t.id).filter(Boolean));\n      for (let i = 0; i < inputAny.gaps.length; i++) {\n        const gap = inputAny.gaps[i] as LiteratureGap;\n        if (gap.relatedThemes) {\n          for (const themeId of gap.relatedThemes) {\n            if (!themeIds.has(themeId)) {\n              warnings.push(\n                createValidationWarning(\n                  `gaps[${i}].relatedThemes`,\n                  `Gap references non-existent theme: ${themeId}`,\n                  'Ensure all gap theme references exist in themes array'\n                )\n              );\n            }\n          }\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get synthesis-specific enhancements\n   */\n  getEnhancements(thought: SynthesisThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.CRITIQUE, ThinkingMode.ARGUMENTATION, ThinkingMode.ANALYSIS],\n      guidingQuestions: [],\n      warnings: [],\n      mentalModels: [\n        'Thematic Analysis',\n        'Systematic Review',\n        'Conceptual Framework',\n        'Evidence Synthesis',\n      ],\n    };\n\n    // Calculate metrics\n    const sourceCount = thought.sources?.length || 0;\n    const themeCount = thought.themes?.length || 0;\n    const contradictionCount = thought.contradictions?.length || 0;\n    const gapCount = thought.gaps?.length || 0;\n\n    // Calculate coverage\n    const coverage = this.calculateSourceCoverage(\n      thought.sources || [],\n      thought.themes || []\n    );\n\n    enhancements.metrics = {\n      sourceCount,\n      themeCount,\n      contradictionCount,\n      gapCount,\n      sourceCoverage: coverage.coverageRatio,\n      uncoveredSources: coverage.uncoveredSources.length,\n    };\n\n    // Suggestions based on content\n    if (sourceCount === 0) {\n      enhancements.suggestions!.push(\n        'Add sources to synthesize. Include bibliographic details and quality assessments.'\n      );\n    } else if (sourceCount < 5) {\n      enhancements.suggestions!.push(\n        'Consider adding more sources for comprehensive synthesis (typically 10+ for reviews)'\n      );\n    }\n\n    if (sourceCount >= 2 && themeCount === 0) {\n      enhancements.suggestions!.push(\n        'Extract common themes across your sources to begin synthesis'\n      );\n    }\n\n    if (coverage.uncoveredSources.length > 0) {\n      enhancements.warnings!.push(\n        `${coverage.uncoveredSources.length} source(s) not referenced in any theme: consider their contribution`\n      );\n    }\n\n    if (sourceCount >= 3 && contradictionCount === 0) {\n      enhancements.guidingQuestions!.push(\n        'Are there any disagreements or contradictions between sources?'\n      );\n    }\n\n    if (themeCount >= 2 && gapCount === 0) {\n      enhancements.guidingQuestions!.push(\n        'What gaps exist in the current literature? What questions remain unanswered?'\n      );\n    }\n\n    // Check theme consensus\n    const weakConsensus = (thought.themes || []).filter(\n      t => t.consensus === 'weak' || t.consensus === 'contested'\n    );\n    if (weakConsensus.length > 0) {\n      enhancements.warnings!.push(\n        `${weakConsensus.length} theme(s) have weak/contested consensus. Consider exploring why.`\n      );\n    }\n\n    // Framework development suggestion\n    if (themeCount >= 3 && !thought.framework) {\n      enhancements.suggestions!.push(\n        'Consider developing a conceptual framework to organize themes and relationships'\n      );\n    }\n\n    // Conclusions suggestion\n    if (themeCount >= 2 && (!thought.conclusions || thought.conclusions.length === 0)) {\n      enhancements.guidingQuestions!.push(\n        'What synthesized conclusions can you draw from the themes identified?'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as SynthesisThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid SynthesisThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): SynthesisThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as SynthesisThoughtType)) {\n      return inputType as SynthesisThoughtType;\n    }\n    return 'source_identification';\n  }\n\n  /**\n   * Validate a source\n   */\n  private validateSource(source: Source, index: number, existingIds: Set<string>): ValidationResult {\n    const errors = [];\n    const warnings = [];\n\n    if (!source.id || source.id.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `sources[${index}].id`,\n          'Source has no ID',\n          'Add an ID to reference this source in themes and contradictions'\n        )\n      );\n    } else if (existingIds.has(source.id)) {\n      errors.push(\n        createValidationError(\n          `sources[${index}].id`,\n          `Duplicate source ID: ${source.id}`,\n          'DUPLICATE_SOURCE_ID'\n        )\n      );\n    }\n\n    if (!source.title || source.title.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `sources[${index}].title`,\n          'Source has no title',\n          'Add a title to identify the source'\n        )\n      );\n    }\n\n    // Validate quality metrics\n    if (source.quality) {\n      const qualityFields = [\n        'methodologicalRigor',\n        'relevance',\n        'recency',\n        'authorCredibility',\n        'overallQuality',\n      ];\n      for (const field of qualityFields) {\n        const value = (source.quality as any)[field];\n        if (value !== undefined && (value < 0 || value > 1)) {\n          warnings.push(\n            createValidationWarning(\n              `sources[${index}].quality.${field}`,\n              `Quality metric ${field} (${value}) is outside [0, 1] range`,\n              'Quality metrics should be normalized to [0, 1]'\n            )\n          );\n        }\n      }\n    }\n\n    return errors.length > 0 ? validationFailure(errors, warnings) : validationSuccess(warnings);\n  }\n\n  /**\n   * Validate a theme\n   */\n  private validateTheme(theme: Theme, index: number, sourceIds: Set<string>): ValidationResult {\n    const warnings = [];\n\n    if (!theme.id || theme.id.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `themes[${index}].id`,\n          'Theme has no ID',\n          'Add an ID to track this theme'\n        )\n      );\n    }\n\n    if (!theme.name || theme.name.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `themes[${index}].name`,\n          'Theme has no name',\n          'Add a descriptive name for the theme'\n        )\n      );\n    }\n\n    // Validate source references\n    if (theme.sourceIds && theme.sourceIds.length > 0) {\n      for (const sourceId of theme.sourceIds) {\n        if (!sourceIds.has(sourceId)) {\n          warnings.push(\n            createValidationWarning(\n              `themes[${index}].sourceIds`,\n              `Theme references non-existent source: ${sourceId}`,\n              'Ensure all source references exist in sources array'\n            )\n          );\n        }\n      }\n    } else {\n      warnings.push(\n        createValidationWarning(\n          `themes[${index}].sourceIds`,\n          'Theme has no source references',\n          'Link the theme to supporting sources'\n        )\n      );\n    }\n\n    // Validate strength\n    if (theme.strength !== undefined && (theme.strength < 0 || theme.strength > 1)) {\n      warnings.push(\n        createValidationWarning(\n          `themes[${index}].strength`,\n          `Theme strength (${theme.strength}) is outside [0, 1] range`,\n          'Strength should be normalized to [0, 1]'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate a contradiction\n   */\n  private validateContradiction(\n    contradiction: Contradiction,\n    index: number,\n    sourceIds: Set<string>\n  ): ValidationResult {\n    const warnings = [];\n\n    // Validate position1 source references\n    if (contradiction.position1?.sourceIds) {\n      for (const sourceId of contradiction.position1.sourceIds) {\n        if (!sourceIds.has(sourceId)) {\n          warnings.push(\n            createValidationWarning(\n              `contradictions[${index}].position1.sourceIds`,\n              `Position 1 references non-existent source: ${sourceId}`,\n              'Ensure source references exist'\n            )\n          );\n        }\n      }\n    }\n\n    // Validate position2 source references\n    if (contradiction.position2?.sourceIds) {\n      for (const sourceId of contradiction.position2.sourceIds) {\n        if (!sourceIds.has(sourceId)) {\n          warnings.push(\n            createValidationWarning(\n              `contradictions[${index}].position2.sourceIds`,\n              `Position 2 references non-existent source: ${sourceId}`,\n              'Ensure source references exist'\n            )\n          );\n        }\n      }\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Calculate source coverage by themes\n   */\n  private calculateSourceCoverage(\n    sources: Source[],\n    themes: Theme[]\n  ): { coverageRatio: number; uncoveredSources: string[]; coveredSources: string[] } {\n    const sourceIds = new Set(sources.map(s => s.id).filter(Boolean));\n    const coveredSourceIds = new Set<string>();\n\n    for (const theme of themes) {\n      if (theme.sourceIds) {\n        for (const sourceId of theme.sourceIds) {\n          coveredSourceIds.add(sourceId);\n        }\n      }\n    }\n\n    const coveredSources = Array.from(coveredSourceIds).filter(id => sourceIds.has(id));\n    const uncoveredSources = Array.from(sourceIds).filter(id => !coveredSourceIds.has(id));\n\n    return {\n      coverageRatio: sourceIds.size > 0 ? coveredSources.length / sourceIds.size : 0,\n      uncoveredSources,\n      coveredSources,\n    };\n  }\n\n  /**\n   * Detect potential contradictions between sources based on themes\n   *\n   * Simple heuristic: sources in themes with 'contested' consensus might contradict\n   */\n  private detectPotentialContradictions(\n    _sources: Source[],\n    themes?: Theme[]\n  ): Contradiction[] {\n    const contradictions: Contradiction[] = [];\n\n    if (!themes || themes.length === 0) return contradictions;\n\n    // Find contested themes\n    const contestedThemes = themes.filter(t => t.consensus === 'contested');\n\n    for (const theme of contestedThemes) {\n      if (theme.sourceIds && theme.sourceIds.length >= 2) {\n        // Create a potential contradiction for investigation\n        const sourceA = theme.sourceIds[0];\n        const sourceB = theme.sourceIds[1];\n\n        contradictions.push({\n          id: `auto-${randomUUID().slice(0, 8)}`,\n          description: `Potential contradiction in contested theme: ${theme.name}`,\n          position1: {\n            statement: `View from source ${sourceA}`,\n            sourceIds: [sourceA],\n            reasoning: 'Auto-detected from contested theme consensus',\n          },\n          position2: {\n            statement: `View from source ${sourceB}`,\n            sourceIds: [sourceB],\n            reasoning: 'Auto-detected from contested theme consensus',\n          },\n          possibleResolution: 'Requires further investigation',\n        });\n      }\n    }\n\n    return contradictions;\n  }\n}\n","/**\n * ArgumentationHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for Argumentation reasoning:\n * - Toulmin model validation\n * - Argument strength calculation\n * - Fallacy detection\n * - Dialectic analysis\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, ArgumentationThought } from '../../types/core.js';\nimport type {\n  ArgumentationThoughtType,\n  ToulminArgument,\n  Warrant,\n  LogicalFallacy,\n  DialecticAnalysis,\n} from '../../types/modes/argumentation.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Common logical fallacies to detect\n */\nconst COMMON_FALLACIES: { name: string; category: 'formal' | 'informal'; patterns: string[] }[] = [\n  { name: 'Ad Hominem', category: 'informal', patterns: ['attacks the person', 'character of'] },\n  { name: 'Straw Man', category: 'informal', patterns: ['misrepresents', 'exaggerated version'] },\n  { name: 'False Dilemma', category: 'informal', patterns: ['either/or', 'only two options'] },\n  { name: 'Circular Reasoning', category: 'formal', patterns: ['because it is', 'self-evident'] },\n  { name: 'Appeal to Authority', category: 'informal', patterns: ['expert says', 'authority claims'] },\n  { name: 'Hasty Generalization', category: 'informal', patterns: ['always', 'never', 'all', 'none'] },\n  { name: 'Red Herring', category: 'informal', patterns: ['but what about', 'changing subject'] },\n  { name: 'Slippery Slope', category: 'informal', patterns: ['will lead to', 'eventually'] },\n  { name: 'Appeal to Emotion', category: 'informal', patterns: ['feel', 'fear', 'outrage'] },\n  { name: 'False Cause', category: 'formal', patterns: ['caused by', 'therefore'] },\n];\n\n/**\n * ArgumentationHandler - Specialized handler for academic argumentation\n *\n * Provides semantic validation and enhancement:\n * - Validates Toulmin argument structure\n * - Calculates argument strength from components\n * - Detects common logical fallacies\n * - Analyzes dialectic positions\n */\nexport class ArgumentationHandler implements ModeHandler {\n  readonly mode = ThinkingMode.ARGUMENTATION;\n  readonly modeName = 'Academic Argumentation';\n  readonly description = 'Toulmin model argumentation with dialectic analysis and fallacy detection';\n\n  private readonly supportedThoughtTypes: ArgumentationThoughtType[] = [\n    'claim_formulation',\n    'grounds_identification',\n    'warrant_construction',\n    'backing_provision',\n    'rebuttal_anticipation',\n    'qualifier_specification',\n    'argument_assembly',\n    'dialectic_analysis',\n  ];\n\n  /**\n   * Create an argumentation thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): ArgumentationThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process arguments and calculate strength\n    const arguments_ = this.processArguments(inputAny.arguments || []);\n    const argumentStrength = this.calculateOverallStrength(arguments_, inputAny);\n\n    // Detect fallacies\n    const detectedFallacies = inputAny.fallacies || this.detectFallacies(inputAny);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.ARGUMENTATION,\n      thoughtType,\n      claims: inputAny.claims || [],\n      currentClaim: inputAny.currentClaim,\n      grounds: inputAny.grounds || [],\n      warrants: inputAny.warrants || [],\n      backings: inputAny.backings || [],\n      qualifiers: inputAny.qualifiers || [],\n      rebuttals: inputAny.rebuttals || [],\n      arguments: arguments_,\n      currentArgument: inputAny.currentArgument,\n      argumentChain: inputAny.argumentChain,\n      dialectic: inputAny.dialectic,\n      rhetoricalStrategies: inputAny.rhetoricalStrategies || [],\n      audienceConsideration: inputAny.audienceConsideration,\n      fallacies: detectedFallacies,\n      argumentStrength,\n      dependencies: inputAny.dependencies || [],\n      assumptions: input.assumptions || [],\n      uncertainty: inputAny.uncertainty ?? 0.5,\n      keyInsight: inputAny.keyInsight,\n    } as ArgumentationThought;\n  }\n\n  /**\n   * Validate argumentation-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Check for claims\n    if ((!inputAny.claims || inputAny.claims.length === 0) && !inputAny.currentClaim) {\n      warnings.push(\n        createValidationWarning(\n          'claims',\n          'No claims specified',\n          'Formulate a clear claim or thesis for your argument'\n        )\n      );\n    }\n\n    // Validate Toulmin structure completeness\n    if (inputAny.currentArgument || (inputAny.arguments && inputAny.arguments.length > 0)) {\n      const args = inputAny.arguments || [inputAny.currentArgument];\n      for (let i = 0; i < args.length; i++) {\n        const arg = args[i];\n        const argValidation = this.validateToulminArgument(arg, i);\n        warnings.push(...argValidation.warnings);\n        errors.push(...argValidation.errors);\n      }\n    }\n\n    // Check grounds-to-claim ratio\n    const groundsCount = inputAny.grounds?.length || 0;\n    const claimsCount = inputAny.claims?.length || (inputAny.currentClaim ? 1 : 0);\n    if (claimsCount > 0 && groundsCount === 0) {\n      warnings.push(\n        createValidationWarning(\n          'grounds',\n          'Claims lack supporting grounds/evidence',\n          'Provide evidence or data to support your claims'\n        )\n      );\n    }\n\n    // Check for warrants\n    if (groundsCount > 0 && (!inputAny.warrants || inputAny.warrants.length === 0)) {\n      warnings.push(\n        createValidationWarning(\n          'warrants',\n          'No warrants connecting grounds to claims',\n          'Explain how your evidence supports your claim'\n        )\n      );\n    }\n\n    // Check warrant strength\n    if (inputAny.warrants) {\n      const weakWarrants = inputAny.warrants.filter((w: Warrant) => w.strength < 0.5);\n      if (weakWarrants.length > inputAny.warrants.length / 2) {\n        warnings.push(\n          createValidationWarning(\n            'warrants',\n            'Many warrants have low strength',\n            'Consider strengthening warrants with additional backing'\n          )\n        );\n      }\n    }\n\n    // Check for rebuttals (thorough argumentation considers counter-arguments)\n    if (inputAny.arguments?.length > 0 && (!inputAny.rebuttals || inputAny.rebuttals.length === 0)) {\n      warnings.push(\n        createValidationWarning(\n          'rebuttals',\n          'No counter-arguments addressed',\n          'Anticipate and address potential rebuttals for stronger argumentation'\n        )\n      );\n    }\n\n    // Check dialectic completeness\n    if (inputAny.dialectic) {\n      const dialecticValidation = this.validateDialectic(inputAny.dialectic);\n      warnings.push(...dialecticValidation.warnings);\n    }\n\n    // Check for detected fallacies\n    if (inputAny.fallacies && inputAny.fallacies.length > 0) {\n      const criticalFallacies = inputAny.fallacies.filter((f: LogicalFallacy) => f.severity === 'critical');\n      if (criticalFallacies.length > 0) {\n        warnings.push(\n          createValidationWarning(\n            'fallacies',\n            `${criticalFallacies.length} critical fallacies detected`,\n            'Address critical logical fallacies before finalizing argument'\n          )\n        );\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: ArgumentationThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.FORMALLOGIC, ThinkingMode.DEDUCTIVE, ThinkingMode.CRITIQUE],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        'Toulmin Model',\n        'Dialectic Method',\n        'Rhetorical Triangle (Ethos, Pathos, Logos)',\n        'Logical Validity',\n        'Counter-argument Analysis',\n      ],\n    };\n\n    const claims = thought.claims || [];\n    const grounds = thought.grounds || [];\n    const warrants = thought.warrants || [];\n    const rebuttals = thought.rebuttals || [];\n    const arguments_ = thought.arguments || [];\n    const fallacies = thought.fallacies || [];\n\n    // Calculate metrics\n    const groundsToClaimRatio = claims.length > 0 ? grounds.length / claims.length : 0;\n    const warrantsPerClaim = claims.length > 0 ? warrants.length / claims.length : 0;\n    const rebuttalCoverage = arguments_.length > 0 ? rebuttals.length / arguments_.length : 0;\n    const avgGroundsReliability = grounds.length > 0\n      ? grounds.reduce((sum, g) => sum + (g.reliability || 0), 0) / grounds.length\n      : 0;\n\n    enhancements.metrics = {\n      claimCount: claims.length,\n      groundsCount: grounds.length,\n      warrantsCount: warrants.length,\n      rebuttalCount: rebuttals.length,\n      argumentCount: arguments_.length,\n      fallacyCount: fallacies.length,\n      argumentStrength: thought.argumentStrength,\n      groundsToClaimRatio,\n      warrantsPerClaim,\n      rebuttalCoverage,\n      avgGroundsReliability,\n    };\n\n    // Stage-specific suggestions\n    const thoughtType = thought.thoughtType;\n\n    if (thoughtType === 'claim_formulation') {\n      enhancements.suggestions!.push('Ensure claim is specific, debatable, and significant');\n      enhancements.guidingQuestions!.push('Is this claim falsifiable and not self-evident?');\n    }\n\n    if (thoughtType === 'grounds_identification') {\n      enhancements.suggestions!.push('Gather diverse types of evidence: empirical, statistical, testimonial');\n      if (avgGroundsReliability < 0.6) {\n        enhancements.suggestions!.push('Consider strengthening evidence reliability');\n      }\n    }\n\n    if (thoughtType === 'warrant_construction') {\n      const implicitWarrants = warrants.filter((w) => w.implicit);\n      if (implicitWarrants.length > warrants.length * 0.5) {\n        enhancements.suggestions!.push('Many warrants are implicit - consider making them explicit');\n      }\n    }\n\n    if (thoughtType === 'rebuttal_anticipation') {\n      enhancements.suggestions!.push('Consider rebuttals targeting each Toulmin element');\n      enhancements.guidingQuestions!.push('What would a skeptic say about this argument?');\n    }\n\n    if (thoughtType === 'dialectic_analysis' && thought.dialectic) {\n      if (!thought.dialectic.synthesis) {\n        enhancements.suggestions!.push('Develop a synthesis that transcends thesis and antithesis');\n      }\n    }\n\n    // Fallacy warnings\n    if (fallacies.length > 0) {\n      enhancements.warnings = enhancements.warnings || [];\n      for (const fallacy of fallacies) {\n        enhancements.warnings.push(`${fallacy.severity} fallacy: ${fallacy.name} - ${fallacy.description}`);\n      }\n    }\n\n    // Argument strength assessment\n    if (thought.argumentStrength < 0.5) {\n      enhancements.suggestions!.push('Argument strength is low - consider adding more grounds or strengthening warrants');\n    } else if (thought.argumentStrength > 0.8) {\n      enhancements.suggestions!.push('Strong argument - consider addressing potential rebuttals');\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions!.push(\n      'Is the evidence sufficient and relevant to the claim?',\n      'Are there unstated assumptions in the warrants?',\n      'What are the strongest counter-arguments?',\n      'Does the qualifier appropriately limit the claim\\'s scope?'\n    );\n\n    return enhancements;\n  }\n\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as ArgumentationThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid ArgumentationThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): ArgumentationThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as ArgumentationThoughtType)) {\n      return inputType as ArgumentationThoughtType;\n    }\n    return 'claim_formulation';\n  }\n\n  /**\n   * Process arguments with defaults\n   */\n  private processArguments(arguments_: ToulminArgument[]): ToulminArgument[] {\n    return arguments_.map((arg) => ({\n      id: arg.id || randomUUID(),\n      name: arg.name,\n      claim: arg.claim,\n      grounds: arg.grounds || [],\n      warrants: arg.warrants || [],\n      backings: arg.backings || [],\n      qualifiers: arg.qualifiers || [],\n      rebuttals: arg.rebuttals || [],\n      overallStrength: arg.overallStrength ?? this.calculateArgumentStrength(arg),\n      validity: arg.validity || 'questionable',\n      soundness: arg.soundness || 'questionable',\n    }));\n  }\n\n  /**\n   * Calculate strength of a single Toulmin argument\n   */\n  private calculateArgumentStrength(arg: ToulminArgument): number {\n    let strength = 0.5;\n\n    // Grounds contribution\n    if (arg.grounds && arg.grounds.length > 0) {\n      const avgReliability = arg.grounds.reduce((sum, g) => sum + (g.reliability || 0.5), 0) / arg.grounds.length;\n      const avgRelevance = arg.grounds.reduce((sum, g) => sum + (g.relevance || 0.5), 0) / arg.grounds.length;\n      strength += (avgReliability + avgRelevance) * 0.15;\n    }\n\n    // Warrants contribution\n    if (arg.warrants && arg.warrants.length > 0) {\n      const avgWarrantStrength = arg.warrants.reduce((sum, w) => sum + (w.strength || 0.5), 0) / arg.warrants.length;\n      strength += avgWarrantStrength * 0.15;\n    }\n\n    // Backing contribution\n    if (arg.backings && arg.backings.length > 0) {\n      strength += 0.1;\n    }\n\n    // Rebuttals addressed\n    if (arg.rebuttals && arg.rebuttals.length > 0) {\n      const addressedRebuttals = arg.rebuttals.filter((r) => r.response).length;\n      strength += (addressedRebuttals / arg.rebuttals.length) * 0.1;\n    }\n\n    return Math.min(Math.max(strength, 0), 1);\n  }\n\n  /**\n   * Calculate overall argument strength for the thought\n   */\n  private calculateOverallStrength(arguments_: ToulminArgument[], input: any): number {\n    if (arguments_.length > 0) {\n      return arguments_.reduce((sum, arg) => sum + arg.overallStrength, 0) / arguments_.length;\n    }\n\n    // Calculate from individual components if no complete arguments\n    let strength = 0.3;\n\n    if (input.grounds?.length > 0) strength += 0.15;\n    if (input.warrants?.length > 0) strength += 0.15;\n    if (input.backings?.length > 0) strength += 0.1;\n    if (input.qualifiers?.length > 0) strength += 0.1;\n    if (input.rebuttals?.length > 0) strength += 0.1;\n\n    return Math.min(strength, 1);\n  }\n\n  /**\n   * Detect potential logical fallacies\n   */\n  private detectFallacies(input: any): LogicalFallacy[] {\n    const fallacies: LogicalFallacy[] = [];\n    const content = input.thought?.toLowerCase() || '';\n\n    // Simple pattern-based fallacy detection\n    for (const fallacy of COMMON_FALLACIES) {\n      for (const pattern of fallacy.patterns) {\n        if (content.includes(pattern.toLowerCase())) {\n          fallacies.push({\n            id: randomUUID(),\n            name: fallacy.name,\n            category: fallacy.category,\n            description: `Potential ${fallacy.name} detected based on language patterns`,\n            location: 'thought content',\n            severity: 'minor',\n          });\n          break;\n        }\n      }\n    }\n\n    // Check for circular reasoning in warrants\n    if (input.warrants && input.claims) {\n      for (const warrant of input.warrants) {\n        for (const claim of input.claims) {\n          if (warrant.statement?.toLowerCase().includes(claim.statement?.toLowerCase().slice(0, 20))) {\n            fallacies.push({\n              id: randomUUID(),\n              name: 'Circular Reasoning',\n              category: 'formal',\n              description: 'Warrant appears to restate the claim',\n              location: `warrant ${warrant.id}`,\n              severity: 'significant',\n            });\n          }\n        }\n      }\n    }\n\n    return fallacies;\n  }\n\n  /**\n   * Validate Toulmin argument structure\n   */\n  private validateToulminArgument(arg: ToulminArgument, index: number): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    if (!arg.claim) {\n      errors.push(\n        createValidationError(\n          `arguments[${index}].claim`,\n          'Argument has no claim',\n          'MISSING_CLAIM'\n        )\n      );\n    }\n\n    if (!arg.grounds || arg.grounds.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `arguments[${index}].grounds`,\n          'Argument has no grounds/evidence',\n          'Add supporting evidence for the claim'\n        )\n      );\n    }\n\n    if (!arg.warrants || arg.warrants.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `arguments[${index}].warrants`,\n          'Argument has no warrants',\n          'Explain the reasoning connecting evidence to claim'\n        )\n      );\n    }\n\n    // Check for weak warrants without backing\n    if (arg.warrants) {\n      const weakWithoutBacking = arg.warrants.filter(\n        (w) => w.strength < 0.6 && !arg.backings?.some((b) => b.warrantId === w.id)\n      );\n      if (weakWithoutBacking.length > 0) {\n        warnings.push(\n          createValidationWarning(\n            `arguments[${index}].warrants`,\n            'Some weak warrants lack backing',\n            'Strengthen weak warrants with additional support'\n          )\n        );\n      }\n    }\n\n    return errors.length > 0 ? validationFailure(errors, warnings) : validationSuccess(warnings);\n  }\n\n  /**\n   * Validate dialectic analysis\n   */\n  private validateDialectic(dialectic: DialecticAnalysis): ValidationResult {\n    const warnings: ValidationWarning[] = [];\n\n    if (!dialectic.thesis) {\n      warnings.push(\n        createValidationWarning(\n          'dialectic.thesis',\n          'No thesis position defined',\n          'Define the initial thesis position'\n        )\n      );\n    }\n\n    if (!dialectic.antithesis) {\n      warnings.push(\n        createValidationWarning(\n          'dialectic.antithesis',\n          'No antithesis position defined',\n          'Define the opposing antithesis position'\n        )\n      );\n    }\n\n    if (dialectic.resolution === 'synthesis_achieved' && !dialectic.synthesis) {\n      warnings.push(\n        createValidationWarning(\n          'dialectic.synthesis',\n          'Resolution claims synthesis but no synthesis defined',\n          'Provide the synthesis that transcends both positions'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n}\n","/**\n * CritiqueHandler - Phase 10 Sprint 2B (v8.2.0)\n *\n * Specialized handler for Critique reasoning mode with:\n * - Socratic question framework (6 categories)\n * - Balanced critique tracking (strengths vs weaknesses)\n * - Methodology evaluation validation\n * - Argument structure analysis\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, CritiqueThought } from '../../types/core.js';\nimport type {\n  CritiqueThoughtType,\n  CritiquedWork,\n  CritiquePoint,\n  MethodologyEvaluation,\n  ArgumentCritique,\n  CritiqueVerdict,\n} from '../../types/modes/critique.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Socratic Question Categories\n * Based on Richard Paul's taxonomy of Socratic questioning\n */\ninterface SocraticCategory {\n  name: string;\n  description: string;\n  purpose: string;\n  exampleQuestions: string[];\n}\n\nconst SOCRATIC_CATEGORIES: SocraticCategory[] = [\n  {\n    name: 'Clarification',\n    description: 'Questions that probe for clarity and understanding',\n    purpose: 'Ensure clear understanding before critique',\n    exampleQuestions: [\n      'What do you mean by...?',\n      'Could you put that another way?',\n      'What is your main point?',\n      'Could you give me an example?',\n      'Can you explain that term?',\n    ],\n  },\n  {\n    name: 'Assumptions',\n    description: 'Questions that probe underlying assumptions',\n    purpose: 'Uncover hidden assumptions that may be flawed',\n    exampleQuestions: [\n      'What are you assuming here?',\n      'Is that always the case?',\n      'Why would you assume that?',\n      'What could we assume instead?',\n      'What if the opposite were true?',\n    ],\n  },\n  {\n    name: 'Evidence',\n    description: 'Questions that probe reasons and evidence',\n    purpose: 'Evaluate the quality and relevance of evidence',\n    exampleQuestions: [\n      'What evidence supports this?',\n      'How do you know this is true?',\n      'What would change your mind?',\n      'Is there counter-evidence?',\n      'How reliable is this source?',\n    ],\n  },\n  {\n    name: 'Perspectives',\n    description: 'Questions that probe viewpoints and perspectives',\n    purpose: 'Consider alternative viewpoints',\n    exampleQuestions: [\n      'What would X say about this?',\n      'How might others view this?',\n      'What is an alternative interpretation?',\n      'Who benefits from this view?',\n      'What perspective is missing?',\n    ],\n  },\n  {\n    name: 'Implications',\n    description: 'Questions that probe implications and consequences',\n    purpose: 'Explore logical consequences of claims',\n    exampleQuestions: [\n      'What follows from this?',\n      'What are the consequences?',\n      'How does this affect...?',\n      'If this is true, what else must be true?',\n      'What are the risks?',\n    ],\n  },\n  {\n    name: 'Meta',\n    description: 'Questions about the question itself',\n    purpose: 'Examine the reasoning process',\n    exampleQuestions: [\n      'Why is this question important?',\n      'What makes this hard to answer?',\n      'What do we need to know to answer this?',\n      'How can we find out?',\n      'What assumptions underlie this question?',\n    ],\n  },\n];\n\n/**\n * CritiqueHandler - Specialized handler for critical analysis\n *\n * Provides semantic validation beyond schema validation:\n * - Validates critique balance (strengths vs weaknesses)\n * - Generates Socratic questions based on critique type\n * - Validates methodology evaluation ratings\n * - Checks argument structure for completeness\n */\nexport class CritiqueHandler implements ModeHandler {\n  readonly mode = ThinkingMode.CRITIQUE;\n  readonly modeName = 'Critical Analysis';\n  readonly description = 'Scholarly critique with Socratic questioning, balanced evaluation, and methodology assessment';\n\n  /**\n   * Supported thought types for critique mode\n   */\n  private readonly supportedThoughtTypes: CritiqueThoughtType[] = [\n    'work_characterization',\n    'methodology_evaluation',\n    'argument_analysis',\n    'evidence_assessment',\n    'contribution_evaluation',\n    'limitation_identification',\n    'strength_recognition',\n    'improvement_suggestion',\n  ];\n\n  /**\n   * Create a critique thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): CritiqueThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Build work being critiqued\n    const work: CritiquedWork = inputAny.work || {\n      id: randomUUID().slice(0, 8),\n      title: 'Untitled Work',\n      authors: [],\n      year: new Date().getFullYear(),\n      type: 'empirical_study',\n      field: 'Unknown',\n      claimedContribution: '',\n    };\n\n    // Calculate balance metrics\n    const critiquePoints = inputAny.critiquePoints || [];\n    const strengthsIdentified = critiquePoints.filter(\n      (p: CritiquePoint) => p.type === 'strength'\n    ).length;\n    const weaknessesIdentified = critiquePoints.filter(\n      (p: CritiquePoint) => p.type === 'weakness' || p.type === 'concern'\n    ).length;\n    const balanceRatio = this.calculateBalanceRatio(strengthsIdentified, weaknessesIdentified);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.CRITIQUE,\n      thoughtType,\n      work,\n      methodologyEvaluation: inputAny.methodologyEvaluation,\n      argumentCritique: inputAny.argumentCritique,\n      evidenceCritique: inputAny.evidenceCritique,\n      contributionEvaluation: inputAny.contributionEvaluation,\n      critiquePoints,\n      improvements: inputAny.improvements || [],\n      verdict: inputAny.verdict,\n      strengthsIdentified,\n      weaknessesIdentified,\n      balanceRatio,\n      dependencies: inputAny.dependencies || [],\n      assumptions: inputAny.assumptions || [],\n      uncertainty: inputAny.uncertainty ?? 0.5,\n      keyInsight: inputAny.keyInsight,\n    } as CritiqueThought;\n  }\n\n  /**\n   * Validate critique-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate work\n    if (inputAny.work) {\n      const workValidation = this.validateWork(inputAny.work);\n      warnings.push(...workValidation.warnings);\n    }\n\n    // Validate methodology evaluation\n    if (inputAny.methodologyEvaluation) {\n      const methValidation = this.validateMethodologyEvaluation(inputAny.methodologyEvaluation);\n      errors.push(...methValidation.errors);\n      warnings.push(...methValidation.warnings);\n    }\n\n    // Validate argument critique\n    if (inputAny.argumentCritique) {\n      const argValidation = this.validateArgumentCritique(inputAny.argumentCritique);\n      warnings.push(...argValidation.warnings);\n    }\n\n    // Validate critique points\n    if (inputAny.critiquePoints && Array.isArray(inputAny.critiquePoints)) {\n      for (let i = 0; i < inputAny.critiquePoints.length; i++) {\n        const point = inputAny.critiquePoints[i] as CritiquePoint;\n        const pointValidation = this.validateCritiquePoint(point, i);\n        warnings.push(...pointValidation.warnings);\n      }\n\n      // Check balance\n      const strengths = inputAny.critiquePoints.filter(\n        (p: CritiquePoint) => p.type === 'strength'\n      ).length;\n      const weaknesses = inputAny.critiquePoints.filter(\n        (p: CritiquePoint) => p.type === 'weakness' || p.type === 'concern'\n      ).length;\n\n      if (inputAny.critiquePoints.length >= 3) {\n        if (strengths === 0) {\n          warnings.push(\n            createValidationWarning(\n              'critiquePoints',\n              'No strengths identified in critique',\n              'A balanced critique should acknowledge strengths as well as weaknesses'\n            )\n          );\n        } else if (weaknesses === 0) {\n          warnings.push(\n            createValidationWarning(\n              'critiquePoints',\n              'No weaknesses or concerns identified',\n              'A thorough critique should identify areas for improvement'\n            )\n          );\n        }\n      }\n    }\n\n    // Validate verdict\n    if (inputAny.verdict) {\n      const verdictValidation = this.validateVerdict(inputAny.verdict);\n      warnings.push(...verdictValidation.warnings);\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get critique-specific enhancements with Socratic questions\n   */\n  getEnhancements(thought: CritiqueThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.ARGUMENTATION, ThinkingMode.SYNTHESIS, ThinkingMode.ANALYSIS],\n      guidingQuestions: [],\n      warnings: [],\n      mentalModels: [\n        'Socratic Questioning',\n        'Peer Review Framework',\n        'Toulmin Model',\n        'Critical Thinking',\n      ],\n    };\n\n    // Calculate metrics\n    const critiquePointCount = thought.critiquePoints?.length || 0;\n    const improvementCount = thought.improvements?.length || 0;\n\n    enhancements.metrics = {\n      strengthsIdentified: thought.strengthsIdentified,\n      weaknessesIdentified: thought.weaknessesIdentified,\n      balanceRatio: thought.balanceRatio,\n      critiquePointCount,\n      improvementCount,\n      hasVerdict: thought.verdict ? 1 : 0,\n    };\n\n    // Add Socratic questions based on thought type\n    const socraticCategories = this.getSocraticQuestions(thought.thoughtType);\n    const socraticQuestionsRecord: Record<string, string[]> = {};\n    for (const category of socraticCategories) {\n      socraticQuestionsRecord[category.name] = category.exampleQuestions;\n    }\n    enhancements.socraticQuestions = socraticQuestionsRecord;\n\n    // Add selected questions to guiding questions\n    for (const category of socraticCategories.slice(0, 2)) {\n      enhancements.guidingQuestions!.push(category.exampleQuestions[0]);\n    }\n\n    // Balance warnings\n    if (thought.balanceRatio < 0.2) {\n      enhancements.warnings!.push(\n        'Critique appears heavily weighted toward weaknesses. Consider identifying strengths.'\n      );\n    } else if (thought.balanceRatio > 0.8) {\n      enhancements.warnings!.push(\n        'Critique appears heavily weighted toward strengths. Consider identifying limitations.'\n      );\n    }\n\n    // Suggestions based on content\n    if (!thought.methodologyEvaluation && thought.work?.type === 'empirical_study') {\n      enhancements.suggestions!.push(\n        'Consider adding methodology evaluation for empirical work'\n      );\n    }\n\n    if (!thought.argumentCritique && thought.work?.type === 'theoretical_paper') {\n      enhancements.suggestions!.push(\n        'Consider adding argument structure analysis for theoretical work'\n      );\n    }\n\n    if (critiquePointCount >= 5 && !thought.verdict) {\n      enhancements.suggestions!.push(\n        'Consider providing an overall verdict summarizing the critique'\n      );\n    }\n\n    if (thought.weaknessesIdentified > 0 && improvementCount === 0) {\n      enhancements.suggestions!.push(\n        'Consider adding constructive improvement suggestions for identified weaknesses'\n      );\n    }\n\n    // Check for common critique completeness\n    if (thought.work) {\n      if (!thought.work.researchQuestion && thought.work.type === 'empirical_study') {\n        enhancements.guidingQuestions!.push(\n          'What is the research question being addressed?'\n        );\n      }\n    }\n\n    // Severity distribution analysis\n    if (thought.critiquePoints && thought.critiquePoints.length > 0) {\n      const criticalCount = thought.critiquePoints.filter(\n        p => p.severity === 'critical'\n      ).length;\n      const majorCount = thought.critiquePoints.filter(\n        p => p.severity === 'major'\n      ).length;\n\n      if (criticalCount > 0 && thought.verdict?.recommendation === 'accept') {\n        enhancements.warnings!.push(\n          'Accept recommendation despite critical issues. Verify this is intentional.'\n        );\n      }\n\n      if (criticalCount === 0 && majorCount === 0 && thought.verdict?.recommendation === 'reject') {\n        enhancements.warnings!.push(\n          'Reject recommendation with no critical/major issues. Consider revising verdict.'\n        );\n      }\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as CritiqueThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid CritiqueThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): CritiqueThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as CritiqueThoughtType)) {\n      return inputType as CritiqueThoughtType;\n    }\n    return 'work_characterization';\n  }\n\n  /**\n   * Calculate balance ratio (0 = all weaknesses, 1 = all strengths, 0.5 = balanced)\n   */\n  private calculateBalanceRatio(strengths: number, weaknesses: number): number {\n    const total = strengths + weaknesses;\n    if (total === 0) return 0.5;\n    return strengths / total;\n  }\n\n  /**\n   * Validate work being critiqued\n   */\n  private validateWork(work: CritiquedWork): ValidationResult {\n    const warnings = [];\n\n    if (!work.title || work.title.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'work.title',\n          'Work has no title',\n          'Add a title to identify the work being critiqued'\n        )\n      );\n    }\n\n    if (!work.authors || work.authors.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'work.authors',\n          'No authors specified',\n          'Add author information for proper attribution'\n        )\n      );\n    }\n\n    if (!work.claimedContribution || work.claimedContribution.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'work.claimedContribution',\n          'No claimed contribution specified',\n          'Identify what contribution the work claims to make'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate methodology evaluation\n   */\n  private validateMethodologyEvaluation(meth: MethodologyEvaluation): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    // Validate rating ranges\n    if (meth.overallRating !== undefined && (meth.overallRating < 0 || meth.overallRating > 1)) {\n      warnings.push(\n        createValidationWarning(\n          'methodologyEvaluation.overallRating',\n          `overallRating (${meth.overallRating}) is outside [0, 1] range`,\n          'Ratings should be normalized to [0, 1]'\n        )\n      );\n    }\n\n    // Validate sub-ratings\n    const subRatings = ['design.rating', 'sample.rating', 'analysis.rating'];\n    for (const path of subRatings) {\n      const [parent, child] = path.split('.');\n      const parentObj = (meth as any)[parent];\n      if (parentObj && parentObj[child] !== undefined) {\n        const value = parentObj[child];\n        if (value < 0 || value > 1) {\n          warnings.push(\n            createValidationWarning(\n              `methodologyEvaluation.${path}`,\n              `${path} (${value}) is outside [0, 1] range`,\n              'Ratings should be normalized to [0, 1]'\n            )\n          );\n        }\n      }\n    }\n\n    return errors.length > 0 ? validationFailure(errors, warnings) : validationSuccess(warnings);\n  }\n\n  /**\n   * Validate argument critique\n   */\n  private validateArgumentCritique(arg: ArgumentCritique): ValidationResult {\n    const warnings = [];\n\n    if (arg.rating !== undefined && (arg.rating < 0 || arg.rating > 1)) {\n      warnings.push(\n        createValidationWarning(\n          'argumentCritique.rating',\n          `Argument rating (${arg.rating}) is outside [0, 1] range`,\n          'Rating should be normalized to [0, 1]'\n        )\n      );\n    }\n\n    if (arg.logicalStructure) {\n      if (arg.logicalStructure.overallCoherence !== undefined) {\n        if (arg.logicalStructure.overallCoherence < 0 || arg.logicalStructure.overallCoherence > 1) {\n          warnings.push(\n            createValidationWarning(\n              'argumentCritique.logicalStructure.overallCoherence',\n              `Coherence (${arg.logicalStructure.overallCoherence}) is outside [0, 1] range`,\n              'Coherence should be normalized to [0, 1]'\n            )\n          );\n        }\n      }\n\n      if (arg.logicalStructure.circularReasoning) {\n        warnings.push(\n          createValidationWarning(\n            'argumentCritique.logicalStructure',\n            'Circular reasoning detected in the argument',\n            'This is a significant logical flaw that should be addressed'\n          )\n        );\n      }\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate a critique point\n   */\n  private validateCritiquePoint(point: CritiquePoint, index: number): ValidationResult {\n    const warnings = [];\n\n    if (!point.description || point.description.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `critiquePoints[${index}].description`,\n          'Critique point has no description',\n          'Add a detailed description of the critique'\n        )\n      );\n    }\n\n    if (point.type === 'weakness' || point.type === 'concern') {\n      if (!point.recommendation) {\n        warnings.push(\n          createValidationWarning(\n            `critiquePoints[${index}].recommendation`,\n            'Weakness has no recommendation for improvement',\n            'Consider adding a constructive suggestion'\n          )\n        );\n      }\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Validate verdict\n   */\n  private validateVerdict(verdict: CritiqueVerdict): ValidationResult {\n    const warnings = [];\n\n    if (verdict.confidence !== undefined && (verdict.confidence < 0 || verdict.confidence > 1)) {\n      warnings.push(\n        createValidationWarning(\n          'verdict.confidence',\n          `Verdict confidence (${verdict.confidence}) is outside [0, 1] range`,\n          'Confidence should be between 0 and 1'\n        )\n      );\n    }\n\n    if (!verdict.summary || verdict.summary.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'verdict.summary',\n          'Verdict has no summary',\n          'Add a summary explaining the recommendation'\n        )\n      );\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get Socratic questions based on thought type\n   */\n  private getSocraticQuestions(thoughtType: CritiqueThoughtType): SocraticCategory[] {\n    // Map thought types to most relevant Socratic categories\n    const typeToCategories: Record<CritiqueThoughtType, string[]> = {\n      work_characterization: ['Clarification', 'Meta'],\n      methodology_evaluation: ['Evidence', 'Assumptions'],\n      argument_analysis: ['Assumptions', 'Implications'],\n      evidence_assessment: ['Evidence', 'Perspectives'],\n      contribution_evaluation: ['Implications', 'Perspectives'],\n      limitation_identification: ['Assumptions', 'Evidence'],\n      strength_recognition: ['Clarification', 'Implications'],\n      improvement_suggestion: ['Perspectives', 'Meta'],\n    };\n\n    const categoryNames = typeToCategories[thoughtType] || ['Clarification', 'Evidence'];\n    return SOCRATIC_CATEGORIES.filter(c => categoryNames.includes(c.name));\n  }\n}\n","/**\n * AnalysisHandler - Phase 15 (v8.4.0)\n *\n * Specialized handler for Qualitative Analysis reasoning:\n * - Codebook validation and inter-rater reliability\n * - Theme saturation assessment\n * - Methodology rigor checking\n * - Data coverage analysis\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, AnalysisThought } from '../../types/core.js';\nimport type {\n  AnalysisThoughtType,\n  AnalysisMethodology,\n  Codebook,\n  QualitativeTheme,\n  QualitativeRigor,\n} from '../../types/modes/analysis.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Methodology-specific guidance\n */\nconst METHODOLOGY_GUIDANCE: Record<AnalysisMethodology, { description: string; keySteps: string[] }> = {\n  thematic_analysis: {\n    description: 'Braun & Clarke\\'s reflexive thematic analysis',\n    keySteps: ['Data familiarization', 'Initial coding', 'Theme development', 'Theme refinement', 'Final analysis'],\n  },\n  grounded_theory: {\n    description: 'Glaser & Strauss, Charmaz grounded theory approach',\n    keySteps: ['Open coding', 'Axial coding', 'Selective coding', 'Theoretical sampling', 'Saturation'],\n  },\n  discourse_analysis: {\n    description: 'Foucauldian or Critical discourse analysis',\n    keySteps: ['Text selection', 'Identify patterns', 'Analyze power relations', 'Interpret social functions'],\n  },\n  content_analysis: {\n    description: 'Qualitative content analysis',\n    keySteps: ['Define categories', 'Create coding scheme', 'Code systematically', 'Analyze patterns'],\n  },\n  phenomenological: {\n    description: 'IPA or Descriptive phenomenological analysis',\n    keySteps: ['Bracket assumptions', 'Describe experience', 'Identify essences', 'Synthesize meanings'],\n  },\n  narrative_analysis: {\n    description: 'Narrative inquiry approach',\n    keySteps: ['Collect stories', 'Analyze structure', 'Identify themes', 'Interpret meanings'],\n  },\n  framework_analysis: {\n    description: 'Ritchie & Spencer framework analysis',\n    keySteps: ['Familiarization', 'Framework identification', 'Indexing', 'Charting', 'Interpretation'],\n  },\n  template_analysis: {\n    description: 'King\\'s template analysis',\n    keySteps: ['Initial template', 'Apply to data', 'Modify template', 'Final template'],\n  },\n  mixed_qualitative: {\n    description: 'Combined qualitative approaches',\n    keySteps: ['Justify combination', 'Apply methods', 'Integrate findings', 'Ensure coherence'],\n  },\n};\n\n/**\n * AnalysisHandler - Specialized handler for qualitative analysis\n *\n * Provides semantic validation and enhancement:\n * - Validates codebook structure and consistency\n * - Assesses theoretical saturation\n * - Checks qualitative rigor criteria\n * - Suggests methodology improvements\n */\nexport class AnalysisHandler implements ModeHandler {\n  readonly mode = ThinkingMode.ANALYSIS;\n  readonly modeName = 'Qualitative Analysis';\n  readonly description = 'Rigorous qualitative analysis with codebook validation and saturation assessment';\n\n  private readonly supportedThoughtTypes: AnalysisThoughtType[] = [\n    'data_familiarization',\n    'initial_coding',\n    'focused_coding',\n    'theme_development',\n    'theme_refinement',\n    'theoretical_integration',\n    'memo_writing',\n    'saturation_assessment',\n  ];\n\n  /**\n   * Create an analysis thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): AnalysisThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process codebook\n    const codebook = this.processCodebook(inputAny.codebook);\n\n    // Calculate coding progress\n    const codingProgress = this.calculateCodingProgress(inputAny.dataSegments, codebook);\n\n    // Assess rigor\n    const rigorAssessment = inputAny.rigorAssessment || this.assessRigor(inputAny);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n      mode: ThinkingMode.ANALYSIS,\n      thoughtType,\n      methodology: inputAny.methodology || 'thematic_analysis',\n      dataSources: inputAny.dataSources || [],\n      dataSegments: inputAny.dataSegments,\n      totalSegments: inputAny.dataSegments?.length || inputAny.totalSegments || 0,\n      codebook,\n      currentCodes: inputAny.currentCodes || codebook?.codes,\n      codingProgress,\n      themes: inputAny.themes,\n      thematicMap: inputAny.thematicMap,\n      memos: inputAny.memos || [],\n      gtCategories: inputAny.gtCategories,\n      theoreticalSampling: inputAny.theoreticalSampling,\n      discoursePatterns: inputAny.discoursePatterns,\n      rigorAssessment,\n      dependencies: inputAny.dependencies || [],\n      assumptions: input.assumptions || [],\n      uncertainty: inputAny.uncertainty ?? 0.5,\n      keyInsight: inputAny.keyInsight,\n    } as AnalysisThought;\n  }\n\n  /**\n   * Validate analysis-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Check data sources\n    if (!inputAny.dataSources || inputAny.dataSources.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'dataSources',\n          'No data sources specified',\n          'Define the data sources for your qualitative analysis'\n        )\n      );\n    }\n\n    // Check methodology\n    if (inputAny.methodology && !Object.keys(METHODOLOGY_GUIDANCE).includes(inputAny.methodology)) {\n      warnings.push(\n        createValidationWarning(\n          'methodology',\n          `Unknown methodology: ${inputAny.methodology}`,\n          'Use a recognized qualitative methodology'\n        )\n      );\n    }\n\n    // Validate codebook\n    if (inputAny.codebook) {\n      const codebookValidation = this.validateCodebook(inputAny.codebook);\n      errors.push(...codebookValidation.errors);\n      warnings.push(...codebookValidation.warnings);\n    }\n\n    // Check for inter-rater reliability\n    if (inputAny.codebook && inputAny.codebook.codes?.length > 5) {\n      if (inputAny.codebook.intercoderReliability === undefined) {\n        warnings.push(\n          createValidationWarning(\n            'codebook.intercoderReliability',\n            'No inter-coder reliability reported',\n            'For rigor, consider having multiple coders and reporting agreement'\n          )\n        );\n      } else if (inputAny.codebook.intercoderReliability < 0.7) {\n        warnings.push(\n          createValidationWarning(\n            'codebook.intercoderReliability',\n            `Inter-coder reliability is low (${(inputAny.codebook.intercoderReliability * 100).toFixed(1)}%)`,\n            'Consider reconciling coding differences or refining code definitions'\n          )\n        );\n      }\n    }\n\n    // Check themes for saturation\n    if (inputAny.themes && inputAny.themes.length > 0) {\n      const saturatedThemes = inputAny.themes.filter((t: QualitativeTheme) => t.prevalence > 0.7);\n      const sparseThemes = inputAny.themes.filter((t: QualitativeTheme) => t.prevalence < 0.2);\n\n      if (sparseThemes.length > saturatedThemes.length) {\n        warnings.push(\n          createValidationWarning(\n            'themes',\n            'Many themes have low prevalence',\n            'Consider whether sparse themes represent meaningful patterns or should be merged'\n          )\n        );\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get mode-specific enhancements\n   */\n  getEnhancements(thought: AnalysisThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.SYNTHESIS, ThinkingMode.CRITIQUE, ThinkingMode.INDUCTIVE],\n      metrics: {},\n      guidingQuestions: [],\n      mentalModels: [\n        'Qualitative Rigor (Guba & Lincoln)',\n        'Theoretical Saturation',\n        'Constant Comparative Method',\n        'Thick Description',\n        'Reflexivity',\n      ],\n    };\n\n    const codebook = thought.codebook;\n    const themes = thought.themes || [];\n    const methodology = thought.methodology;\n\n    // Calculate metrics\n    const codeCount = codebook?.codes?.length || 0;\n    const themeCount = themes.length;\n    const dataSourceCount = thought.dataSources?.length || 0;\n    const segmentsCoded = thought.codingProgress?.segmentsCoded || 0;\n    const totalSegments = thought.codingProgress?.totalSegments || 0;\n\n    enhancements.metrics = {\n      codeCount,\n      themeCount,\n      dataSourceCount,\n      segmentsCoded,\n      codingProgress: totalSegments > 0 ? segmentsCoded / totalSegments : 0,\n      intercoderReliability: codebook?.intercoderReliability || 0,\n      avgThemePrevalence: themes.length > 0 ? themes.reduce((sum, t) => sum + t.prevalence, 0) / themes.length : 0,\n    };\n\n    // Methodology-specific guidance\n    if (methodology && METHODOLOGY_GUIDANCE[methodology]) {\n      const guide = METHODOLOGY_GUIDANCE[methodology];\n      enhancements.suggestions!.push(`Using ${guide.description}`);\n      enhancements.guidingQuestions!.push(`Have you completed: ${guide.keySteps.join('  ')}?`);\n    }\n\n    // Stage-specific suggestions\n    const thoughtType = thought.thoughtType;\n    if (thoughtType === 'initial_coding' && codeCount < 10) {\n      enhancements.suggestions!.push('Continue generating initial codes - aim for breadth');\n    }\n\n    if (thoughtType === 'focused_coding' && codeCount > 50) {\n      enhancements.suggestions!.push('Consider consolidating codes into higher-level categories');\n    }\n\n    if (thoughtType === 'theme_development' && themeCount === 0) {\n      enhancements.suggestions!.push('Group related codes into candidate themes');\n    }\n\n    if (thoughtType === 'saturation_assessment') {\n      const rigor = thought.rigorAssessment;\n      if (rigor?.saturation?.newCodesLastN !== undefined && rigor.saturation.newCodesLastN > 3) {\n        enhancements.suggestions!.push('New codes still emerging - saturation not yet achieved');\n      } else if (rigor?.saturation?.achieved) {\n        enhancements.suggestions!.push('Theoretical saturation achieved - ready for final analysis');\n      }\n    }\n\n    // Rigor assessment warnings\n    if (thought.rigorAssessment) {\n      const rigor = thought.rigorAssessment;\n      if (rigor.credibility.rating < 0.5) {\n        enhancements.warnings = enhancements.warnings || [];\n        enhancements.warnings.push('Low credibility rating - consider member checking or triangulation');\n      }\n      if (!rigor.confirmability.reflexivity) {\n        enhancements.suggestions!.push('Document researcher reflexivity for confirmability');\n      }\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions!.push(\n      'Are the codes consistently applied across all data?',\n      'Do the themes capture the full meaning of the data?',\n      'What alternative interpretations have been considered?',\n      'How does researcher positionality affect the analysis?'\n    );\n\n    return enhancements;\n  }\n\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as AnalysisThoughtType);\n  }\n\n  /**\n   * Resolve thought type to valid AnalysisThoughtType\n   */\n  private resolveThoughtType(inputType: string | undefined): AnalysisThoughtType {\n    if (inputType && this.supportedThoughtTypes.includes(inputType as AnalysisThoughtType)) {\n      return inputType as AnalysisThoughtType;\n    }\n    return 'initial_coding';\n  }\n\n  /**\n   * Process and validate codebook\n   */\n  private processCodebook(codebook: Codebook | undefined): Codebook | undefined {\n    if (!codebook) return undefined;\n\n    return {\n      id: codebook.id || randomUUID(),\n      name: codebook.name || 'Analysis Codebook',\n      version: codebook.version || 1,\n      codes: (codebook.codes || []).map((code) => ({\n        id: code.id || randomUUID(),\n        label: code.label || '',\n        definition: code.definition || '',\n        type: code.type || 'descriptive',\n        examples: code.examples || [],\n        dataSegmentIds: code.dataSegmentIds || [],\n        frequency: code.frequency || 0,\n        parentCodeId: code.parentCodeId,\n        childCodeIds: code.childCodeIds || [],\n        relatedCodeIds: code.relatedCodeIds || [],\n        createdAt: code.createdAt || new Date(),\n        modifiedAt: code.modifiedAt,\n        memoIds: code.memoIds || [],\n      })),\n      codeHierarchy: codebook.codeHierarchy || {\n        rootCodeIds: [],\n        parentChildMap: {},\n      },\n      cooccurrences: codebook.cooccurrences || [],\n      intercoderReliability: codebook.intercoderReliability,\n      lastUpdated: codebook.lastUpdated || new Date(),\n    };\n  }\n\n  /**\n   * Calculate coding progress\n   */\n  private calculateCodingProgress(\n    dataSegments: any[] | undefined,\n    _codebook: Codebook | undefined\n  ): { segmentsCoded: number; totalSegments: number; percentComplete: number } {\n    if (!dataSegments) return { segmentsCoded: 0, totalSegments: 0, percentComplete: 0 };\n\n    const totalSegments = dataSegments.length;\n    const segmentsCoded = dataSegments.filter((seg) => seg.codes && seg.codes.length > 0).length;\n    const percentComplete = totalSegments > 0 ? (segmentsCoded / totalSegments) * 100 : 0;\n\n    return { segmentsCoded, totalSegments, percentComplete };\n  }\n\n  /**\n   * Assess qualitative rigor\n   */\n  private assessRigor(input: any): QualitativeRigor {\n    const hasMultipleCoders = input.codebook?.intercoderReliability !== undefined;\n    const hasThickDescription = input.themes?.some((t: QualitativeTheme) => t.keyQuotes?.length > 2);\n    const hasMemos = input.memos && input.memos.length > 0;\n    const hasReflexiveMemos = input.memos?.some((m: any) => m.type === 'reflective_memo');\n\n    return {\n      credibility: {\n        rating: hasMultipleCoders ? 0.7 : 0.5,\n        strategies: hasMultipleCoders ? ['Multiple coders'] : [],\n      },\n      transferability: {\n        rating: hasThickDescription ? 0.7 : 0.4,\n        thickDescription: hasThickDescription || false,\n        contextProvided: true,\n      },\n      dependability: {\n        rating: hasMemos ? 0.6 : 0.4,\n        auditTrail: hasMemos || false,\n        codebookStability: input.codebook?.version > 1 ? 0.7 : 0.5,\n      },\n      confirmability: {\n        rating: hasReflexiveMemos ? 0.7 : 0.4,\n        reflexivity: hasReflexiveMemos || false,\n        peerDebriefing: false,\n      },\n      saturation: {\n        achieved: false,\n        evidence: '',\n        newCodesLastN: 0,\n      },\n    };\n  }\n\n  /**\n   * Validate codebook structure\n   */\n  private validateCodebook(codebook: Codebook): ValidationResult {\n    const errors: ValidationError[] = [];\n    const warnings: ValidationWarning[] = [];\n\n    // Check for codes without definitions\n    const codesWithoutDefinitions = (codebook.codes || []).filter(\n      (code) => !code.definition || code.definition.trim().length === 0\n    );\n\n    if (codesWithoutDefinitions.length > 0) {\n      warnings.push(\n        createValidationWarning(\n          'codebook.codes',\n          `${codesWithoutDefinitions.length} codes lack definitions`,\n          'All codes should have clear definitions for consistency'\n        )\n      );\n    }\n\n    // Check for orphan codes (no examples)\n    const codesWithoutExamples = (codebook.codes || []).filter(\n      (code) => !code.examples || code.examples.length === 0\n    );\n\n    if (codesWithoutExamples.length > codebook.codes.length * 0.5) {\n      warnings.push(\n        createValidationWarning(\n          'codebook.codes',\n          'Many codes lack example quotes',\n          'Add exemplar quotes to improve codebook reliability'\n        )\n      );\n    }\n\n    // Check hierarchy consistency\n    if (codebook.codeHierarchy) {\n      const allCodeIds = new Set((codebook.codes || []).map((c) => c.id));\n      for (const [parentId, childIds] of Object.entries(codebook.codeHierarchy.parentChildMap || {})) {\n        if (!allCodeIds.has(parentId)) {\n          warnings.push(\n            createValidationWarning(\n              'codebook.codeHierarchy',\n              `Parent code ${parentId} not found in codes`,\n              'Ensure hierarchy references valid codes'\n            )\n          );\n        }\n        for (const childId of childIds) {\n          if (!allCodeIds.has(childId)) {\n            warnings.push(\n              createValidationWarning(\n                'codebook.codeHierarchy',\n                `Child code ${childId} not found in codes`,\n                'Ensure hierarchy references valid codes'\n              )\n            );\n          }\n        }\n      }\n    }\n\n    return errors.length > 0 ? validationFailure(errors, warnings) : validationSuccess(warnings);\n  }\n}\n","/**\n * EngineeringHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Engineering reasoning mode with:\n * - Requirements traceability validation\n * - Trade study matrix evaluation\n * - FMEA (Failure Mode Effects Analysis) support\n * - Design decision record tracking (ADR-style)\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport type { EngineeringThought, EngineeringAnalysisType } from '../../types/modes/engineering.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid engineering analysis types\n */\nconst VALID_ANALYSIS_TYPES: EngineeringAnalysisType[] = [\n  'requirements',\n  'trade-study',\n  'fmea',\n  'design-decision',\n  'comprehensive',\n];\n\n/**\n * EngineeringHandler - Specialized handler for engineering reasoning\n *\n * Provides:\n * - Requirements traceability matrix support\n * - Weighted trade study evaluation\n * - Risk Priority Number (RPN) calculation for FMEA\n * - Architecture Decision Record management\n */\nexport class EngineeringHandler implements ModeHandler {\n  readonly mode = ThinkingMode.ENGINEERING;\n  readonly modeName = 'Engineering Analysis';\n  readonly description = 'Structured engineering analysis with requirements, trade studies, FMEA, and ADRs';\n\n  /**\n   * Supported thought types for engineering mode\n   */\n  private readonly supportedThoughtTypes = [\n    'requirements_analysis',\n    'trade_study',\n    'fmea_analysis',\n    'design_decision',\n    'risk_assessment',\n    'traceability',\n    'verification',\n  ];\n\n  /**\n   * Create an engineering thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): EngineeringThought {\n    const inputAny = input as any;\n\n    // Resolve analysis type\n    const analysisType = this.resolveAnalysisType(inputAny.analysisType);\n\n    // Process requirements traceability\n    const requirements = inputAny.requirements\n      ? this.processRequirements(inputAny.requirements)\n      : undefined;\n\n    // Process trade study\n    const tradeStudy = inputAny.tradeStudy\n      ? this.processTradeStudy(inputAny.tradeStudy)\n      : undefined;\n\n    // Process FMEA\n    const fmea = inputAny.fmea\n      ? this.processFMEA(inputAny.fmea)\n      : undefined;\n\n    // Process design decisions\n    const designDecisions = inputAny.designDecisions\n      ? this.processDesignDecisions(inputAny.designDecisions)\n      : undefined;\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.ENGINEERING,\n\n      // Core engineering fields\n      analysisType,\n      designChallenge: inputAny.designChallenge || '',\n      requirements,\n      tradeStudy,\n      fmea,\n      designDecisions,\n      assessment: inputAny.assessment,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate engineering-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ReturnType<typeof createValidationWarning>[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate analysis type\n    if (inputAny.analysisType && !VALID_ANALYSIS_TYPES.includes(inputAny.analysisType)) {\n      warnings.push(\n        createValidationWarning(\n          'analysisType',\n          `Unknown analysis type: ${inputAny.analysisType}`,\n          `Valid types: ${VALID_ANALYSIS_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate design challenge is specified\n    if (!inputAny.designChallenge || inputAny.designChallenge.trim().length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'designChallenge',\n          'No design challenge specified',\n          'Describe the problem or design challenge being addressed'\n        )\n      );\n    }\n\n    // Validate trade study if provided\n    if (inputAny.tradeStudy) {\n      const tsValidation = this.validateTradeStudy(inputAny.tradeStudy);\n      warnings.push(...tsValidation);\n    }\n\n    // Validate FMEA if provided\n    if (inputAny.fmea) {\n      const fmeaValidation = this.validateFMEA(inputAny.fmea);\n      warnings.push(...fmeaValidation);\n    }\n\n    // Suggest appropriate analysis based on content\n    if (!inputAny.tradeStudy && !inputAny.fmea && !inputAny.requirements && !inputAny.designDecisions) {\n      warnings.push(\n        createValidationWarning(\n          'analysis',\n          'No structured analysis provided',\n          'Include requirements, trade study, FMEA, or design decisions for comprehensive engineering analysis'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get engineering-specific enhancements\n   */\n  getEnhancements(thought: EngineeringThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.ALGORITHMIC, ThinkingMode.SYSTEMSTHINKING, ThinkingMode.OPTIMIZATION],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {},\n      mentalModels: [\n        'Systems Engineering V-Model',\n        'Trade Study Matrix',\n        'FMEA Risk Priority',\n        'Architecture Decision Records',\n        'Requirements Traceability',\n      ],\n    };\n\n    // Analysis type-specific guidance\n    switch (thought.analysisType) {\n      case 'requirements':\n        enhancements.guidingQuestions!.push(\n          'Are all requirements traceable to source?',\n          'What verification method will be used for each requirement?',\n          'Are there any conflicting requirements?'\n        );\n        if (thought.requirements) {\n          enhancements.metrics!.totalRequirements = thought.requirements.requirements.length;\n          const coverage = thought.requirements.coverage;\n          if (coverage) {\n            enhancements.metrics!.coverageTotal = coverage.total;\n            enhancements.metrics!.coverageVerified = coverage.verified;\n          }\n        }\n        break;\n\n      case 'trade-study':\n        enhancements.guidingQuestions!.push(\n          'Do criteria weights sum to 1.0?',\n          'Are all alternatives fairly scored?',\n          'Is sensitivity analysis needed?'\n        );\n        if (thought.tradeStudy) {\n          enhancements.metrics!.alternativeCount = thought.tradeStudy.alternatives.length;\n          enhancements.metrics!.criteriaCount = thought.tradeStudy.criteria.length;\n          enhancements.suggestions!.push(\n            `Recommendation: ${thought.tradeStudy.recommendation}`\n          );\n        }\n        break;\n\n      case 'fmea':\n        enhancements.guidingQuestions!.push(\n          'Are all failure modes identified?',\n          'Are RPN values accurately calculated?',\n          'Do high-RPN items have mitigation plans?'\n        );\n        if (thought.fmea) {\n          const fmea = thought.fmea;\n          enhancements.metrics!.totalModes = fmea.summary.totalModes;\n          enhancements.metrics!.criticalModes = fmea.summary.criticalModes;\n          enhancements.metrics!.maxRPN = fmea.summary.maxRpn;\n          enhancements.metrics!.avgRPN = fmea.summary.averageRpn;\n\n          if (fmea.summary.criticalModes > 0) {\n            enhancements.warnings!.push(\n              `${fmea.summary.criticalModes} failure mode(s) exceed RPN threshold of ${fmea.rpnThreshold}`\n            );\n          }\n        }\n        break;\n\n      case 'design-decision':\n        enhancements.guidingQuestions!.push(\n          'Have all alternatives been considered?',\n          'Are consequences documented?',\n          'Who are the stakeholders affected?'\n        );\n        if (thought.designDecisions) {\n          enhancements.metrics!.decisionCount = thought.designDecisions.decisions.length;\n          const accepted = thought.designDecisions.decisions.filter(d => d.status === 'accepted').length;\n          enhancements.metrics!.acceptedDecisions = accepted;\n        }\n        break;\n\n      case 'comprehensive':\n        enhancements.suggestions!.push(\n          'Comprehensive analysis covers all engineering artifacts'\n        );\n        enhancements.guidingQuestions!.push(\n          'Are all analysis types appropriately addressed?',\n          'Is the design challenge fully characterized?'\n        );\n        break;\n    }\n\n    // Assessment analysis\n    if (thought.assessment) {\n      enhancements.metrics!.confidence = thought.assessment.confidence;\n      enhancements.metrics!.riskCount = thought.assessment.keyRisks.length;\n      enhancements.metrics!.openIssues = thought.assessment.openIssues.length;\n\n      if (thought.assessment.confidence < 0.6) {\n        enhancements.warnings!.push(\n          'Low confidence - consider gathering more data or conducting additional analysis'\n        );\n      }\n\n      if (thought.assessment.keyRisks.length > 0) {\n        enhancements.suggestions!.push(\n          `Key risks identified: ${thought.assessment.keyRisks.length}`\n        );\n      }\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Resolve analysis type from input\n   */\n  private resolveAnalysisType(inputType: string | undefined): EngineeringAnalysisType {\n    if (inputType && VALID_ANALYSIS_TYPES.includes(inputType as EngineeringAnalysisType)) {\n      return inputType as EngineeringAnalysisType;\n    }\n    return 'comprehensive';\n  }\n\n  /**\n   * Process requirements traceability\n   */\n  private processRequirements(raw: any): any {\n    if (!raw.requirements) {\n      return { requirements: [], coverage: { total: 0, verified: 0, tracedToSource: 0, allocatedToDesign: 0 } };\n    }\n\n    const requirements = raw.requirements.map((req: any) => ({\n      id: req.id || `REQ-${randomUUID().slice(0, 8)}`,\n      title: req.title || '',\n      description: req.description || '',\n      source: req.source || 'derived',\n      priority: req.priority || 'should',\n      status: req.status || 'draft',\n      rationale: req.rationale,\n      verificationMethod: req.verificationMethod,\n      verificationCriteria: req.verificationCriteria || [],\n      tracesTo: req.tracesTo || [],\n      satisfiedBy: req.satisfiedBy || [],\n      relatedTo: req.relatedTo || [],\n    }));\n\n    const coverage = raw.coverage || this.calculateCoverage(requirements);\n\n    return { requirements, coverage };\n  }\n\n  /**\n   * Calculate requirements coverage\n   */\n  private calculateCoverage(requirements: any[]): any {\n    return {\n      total: requirements.length,\n      verified: requirements.filter((r: any) => r.verificationMethod).length,\n      tracedToSource: requirements.filter((r: any) => r.tracesTo && r.tracesTo.length > 0).length,\n      allocatedToDesign: requirements.filter((r: any) => r.satisfiedBy && r.satisfiedBy.length > 0).length,\n    };\n  }\n\n  /**\n   * Process trade study\n   */\n  private processTradeStudy(raw: any): any {\n    const scores = raw.scores || [];\n\n    // Calculate weighted scores\n    const criteriaWeights: Record<string, number> = {};\n    (raw.criteria || []).forEach((c: any) => {\n      criteriaWeights[c.id] = c.weight || 0;\n    });\n\n    const enhancedScores = scores.map((s: any) => ({\n      ...s,\n      weightedScore: (s.score || 0) * (criteriaWeights[s.criteriaId] || 0),\n    }));\n\n    return {\n      title: raw.title || '',\n      objective: raw.objective || '',\n      alternatives: raw.alternatives || [],\n      criteria: raw.criteria || [],\n      scores: enhancedScores,\n      recommendation: raw.recommendation || '',\n      justification: raw.justification || '',\n      sensitivityNotes: raw.sensitivityNotes,\n    };\n  }\n\n  /**\n   * Process FMEA\n   */\n  private processFMEA(raw: any): any {\n    const failureModes = (raw.failureModes || []).map((fm: any) => ({\n      ...fm,\n      rpn: (fm.severity || 1) * (fm.occurrence || 1) * (fm.detection || 1),\n    }));\n\n    const rpnThreshold = raw.rpnThreshold || 100;\n    const rpnValues = failureModes.map((fm: any) => fm.rpn);\n\n    return {\n      title: raw.title || '',\n      system: raw.system || '',\n      failureModes,\n      rpnThreshold,\n      summary: {\n        totalModes: failureModes.length,\n        criticalModes: failureModes.filter((fm: any) => fm.rpn > rpnThreshold).length,\n        averageRpn: rpnValues.length > 0 ? rpnValues.reduce((a: number, b: number) => a + b, 0) / rpnValues.length : 0,\n        maxRpn: rpnValues.length > 0 ? Math.max(...rpnValues) : 0,\n      },\n    };\n  }\n\n  /**\n   * Process design decisions\n   */\n  private processDesignDecisions(raw: any): any {\n    return {\n      decisions: (raw.decisions || []).map((d: any) => ({\n        id: d.id || `ADR-${randomUUID().slice(0, 8)}`,\n        title: d.title || '',\n        date: d.date,\n        status: d.status || 'proposed',\n        context: d.context || '',\n        decision: d.decision || '',\n        alternatives: d.alternatives || [],\n        rationale: d.rationale || '',\n        consequences: d.consequences || [],\n        supersededBy: d.supersededBy,\n        relatedDecisions: d.relatedDecisions || [],\n        stakeholders: d.stakeholders || [],\n      })),\n      projectName: raw.projectName,\n    };\n  }\n\n  /**\n   * Validate trade study\n   */\n  private validateTradeStudy(tradeStudy: any): any[] {\n    const warnings = [];\n\n    // Check criteria weights sum to 1\n    const weights = (tradeStudy.criteria || []).map((c: any) => c.weight || 0);\n    const totalWeight = weights.reduce((a: number, b: number) => a + b, 0);\n    if (Math.abs(totalWeight - 1.0) > 0.01) {\n      warnings.push(\n        createValidationWarning(\n          'tradeStudy.criteria',\n          `Criteria weights sum to ${totalWeight.toFixed(2)}, should be 1.0`,\n          'Adjust weights to sum to 1.0 for proper weighted scoring'\n        )\n      );\n    }\n\n    // Check for missing scores\n    const altIds = (tradeStudy.alternatives || []).map((a: any) => a.id);\n    const critIds = (tradeStudy.criteria || []).map((c: any) => c.id);\n    const scoreKeys = (tradeStudy.scores || []).map(\n      (s: any) => `${s.alternativeId}-${s.criteriaId}`\n    );\n\n    const expectedScores = altIds.flatMap((altId: string) =>\n      critIds.map((critId: string) => `${altId}-${critId}`)\n    );\n\n    const missingScores = expectedScores.filter((key: string) => !scoreKeys.includes(key));\n    if (missingScores.length > 0) {\n      warnings.push(\n        createValidationWarning(\n          'tradeStudy.scores',\n          `${missingScores.length} score(s) missing`,\n          'Ensure all alternative-criterion pairs are scored'\n        )\n      );\n    }\n\n    return warnings;\n  }\n\n  /**\n   * Validate FMEA\n   */\n  private validateFMEA(fmea: any): any[] {\n    const warnings = [];\n\n    const failureModes = fmea.failureModes || [];\n\n    // Check for high-RPN items without mitigation\n    const rpnThreshold = fmea.rpnThreshold || 100;\n    const highRpnNoMitigation = failureModes.filter(\n      (fm: any) => fm.rpn > rpnThreshold && !fm.mitigation\n    );\n\n    if (highRpnNoMitigation.length > 0) {\n      warnings.push(\n        createValidationWarning(\n          'fmea.failureModes',\n          `${highRpnNoMitigation.length} high-RPN failure mode(s) lack mitigation plans`,\n          'Document mitigation actions for all critical failure modes'\n        )\n      );\n    }\n\n    // Check for invalid S/O/D ratings\n    const invalidRatings = failureModes.filter(\n      (fm: any) =>\n        fm.severity < 1 || fm.severity > 10 ||\n        fm.occurrence < 1 || fm.occurrence > 10 ||\n        fm.detection < 1 || fm.detection > 10\n    );\n\n    if (invalidRatings.length > 0) {\n      warnings.push(\n        createValidationWarning(\n          'fmea.failureModes',\n          `${invalidRatings.length} failure mode(s) have invalid S/O/D ratings`,\n          'Severity, Occurrence, and Detection must be 1-10'\n        )\n      );\n    }\n\n    return warnings;\n  }\n}\n","/**\n * ComputabilityHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Computability Theory reasoning with:\n * - Turing machine definition and validation\n * - Decidability proof structure\n * - Reduction construction tracking\n * - Diagonalization argument support\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport type {\n  ComputabilityThought,\n  ComputabilityThoughtType,\n  TuringMachine,\n  DecidabilityProof,\n  Reduction,\n  DiagonalizationArgument,\n} from '../../types/modes/computability.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid computability thought types\n */\nconst VALID_THOUGHT_TYPES: ComputabilityThoughtType[] = [\n  'machine_definition',\n  'computation_trace',\n  'decidability_proof',\n  'reduction_construction',\n  'complexity_analysis',\n  'oracle_reasoning',\n  'diagonalization',\n];\n\n// Classic undecidable problems for reference:\n// halting_problem, acceptance_problem, emptiness_problem, equivalence_problem,\n// regularity_problem, ambiguity_problem, post_correspondence, hilberts_tenth\n\n/**\n * ComputabilityHandler - Specialized handler for computability theory\n *\n * Provides:\n * - Turing machine specification validation\n * - Decidability proof structure\n * - Reduction chain tracking\n * - Diagonalization argument patterns\n */\nexport class ComputabilityHandler implements ModeHandler {\n  readonly mode = ThinkingMode.COMPUTABILITY;\n  readonly modeName = 'Computability Theory';\n  readonly description = 'Turing machine analysis, decidability proofs, and reductions';\n\n  /**\n   * Supported thought types for computability mode\n   */\n  private readonly supportedThoughtTypes = [\n    'machine_definition',\n    'computation_trace',\n    'decidability_proof',\n    'reduction_construction',\n    'complexity_analysis',\n    'oracle_reasoning',\n    'diagonalization',\n  ];\n\n  /**\n   * Create a computability thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): ComputabilityThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process Turing machines\n    const machines = inputAny.machines\n      ? inputAny.machines.map((m: any) => this.normalizeMachine(m))\n      : undefined;\n\n    // Process decidability proof\n    const decidabilityProof = inputAny.decidabilityProof\n      ? this.normalizeDecidabilityProof(inputAny.decidabilityProof)\n      : undefined;\n\n    // Process reductions\n    const reductions = inputAny.reductions\n      ? inputAny.reductions.map((r: any) => this.normalizeReduction(r))\n      : undefined;\n\n    // Process diagonalization\n    const diagonalization = inputAny.diagonalization\n      ? this.normalizeDiagonalization(inputAny.diagonalization)\n      : undefined;\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.COMPUTABILITY,\n\n      // Core computability fields\n      thoughtType,\n      machines,\n      currentMachine: machines?.[0],\n      computationTrace: inputAny.computationTrace,\n      problems: inputAny.problems,\n      currentProblem: inputAny.currentProblem,\n      reductions,\n      reductionChain: inputAny.reductionChain,\n      decidabilityProof,\n      diagonalization,\n      complexityAnalysis: inputAny.complexityAnalysis,\n      oracleAnalysis: inputAny.oracleAnalysis,\n      classicProblems: inputAny.classicProblems,\n      keyInsight: inputAny.keyInsight,\n\n      // Dependencies and assumptions\n      dependencies: input.dependencies || [],\n      assumptions: input.assumptions || [],\n      uncertainty: input.uncertainty ?? 0.5,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate computability-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate uncertainty\n    if (input.uncertainty !== undefined) {\n      if (input.uncertainty < 0 || input.uncertainty > 1) {\n        errors.push(\n          createValidationError(\n            'uncertainty',\n            `Uncertainty (${input.uncertainty}) must be between 0 and 1`,\n            'UNCERTAINTY_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Validate Turing machines\n    if (inputAny.machines) {\n      for (let i = 0; i < inputAny.machines.length; i++) {\n        const machineWarnings = this.validateMachine(inputAny.machines[i], i);\n        warnings.push(...machineWarnings);\n      }\n    }\n\n    // Validate decidability proof\n    if (inputAny.decidabilityProof) {\n      const proofWarnings = this.validateDecidabilityProof(inputAny.decidabilityProof);\n      warnings.push(...proofWarnings);\n    }\n\n    // Validate reductions\n    if (inputAny.reductions) {\n      for (let i = 0; i < inputAny.reductions.length; i++) {\n        const reductionWarnings = this.validateReduction(inputAny.reductions[i], i);\n        warnings.push(...reductionWarnings);\n      }\n    }\n\n    // Suggest machine definition for certain thought types\n    if (inputAny.thoughtType === 'machine_definition' && !inputAny.machines) {\n      warnings.push(\n        createValidationWarning(\n          'machines',\n          'Machine definition thought without machines specified',\n          'Include Turing machine specification'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get computability-specific enhancements\n   */\n  getEnhancements(thought: ComputabilityThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.MATHEMATICS, ThinkingMode.ALGORITHMIC, ThinkingMode.FORMALLOGIC],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        machineCount: thought.machines?.length || 0,\n        problemCount: thought.problems?.length || 0,\n        reductionCount: thought.reductions?.length || 0,\n        uncertainty: thought.uncertainty,\n      },\n      mentalModels: [\n        'Turing Machine Model',\n        'Church-Turing Thesis',\n        'Halting Problem',\n        'Diagonalization',\n        'Reduction Technique',\n        \"Rice's Theorem\",\n      ],\n    };\n\n    // Thought type-specific guidance\n    switch (thought.thoughtType) {\n      case 'machine_definition':\n        enhancements.guidingQuestions!.push(\n          'Is the transition function fully specified?',\n          'Are accept and reject states properly defined?',\n          'What language does this machine recognize?'\n        );\n        if (thought.currentMachine) {\n          enhancements.metrics!.stateCount = thought.currentMachine.states.length;\n          enhancements.metrics!.transitionCount = thought.currentMachine.transitions.length;\n          enhancements.suggestions!.push(\n            `Machine type: ${thought.currentMachine.type}`\n          );\n        }\n        break;\n\n      case 'computation_trace':\n        enhancements.guidingQuestions!.push(\n          'Does the computation terminate?',\n          'How many steps are required?',\n          'What is the space usage?'\n        );\n        if (thought.computationTrace) {\n          enhancements.metrics!.totalSteps = thought.computationTrace.totalSteps;\n          enhancements.metrics!.spaceUsed = thought.computationTrace.spaceUsed;\n          enhancements.suggestions!.push(\n            `Result: ${thought.computationTrace.result}`\n          );\n        }\n        break;\n\n      case 'decidability_proof':\n        enhancements.guidingQuestions!.push(\n          'What is the proof method?',\n          'Is the reduction valid?',\n          'Are all cases covered?'\n        );\n        if (thought.decidabilityProof) {\n          enhancements.suggestions!.push(\n            `Conclusion: ${thought.decidabilityProof.conclusion}`,\n            `Method: ${thought.decidabilityProof.method}`\n          );\n        }\n        break;\n\n      case 'reduction_construction':\n        enhancements.guidingQuestions!.push(\n          'Is the reduction computable?',\n          'Does it preserve membership?',\n          'What is the reduction complexity?'\n        );\n        if (thought.reductions && thought.reductions.length > 0) {\n          const r = thought.reductions[0];\n          enhancements.suggestions!.push(\n            `Reduction type: ${r.type}`,\n            `${r.fromProblem}  ${r.toProblem}`\n          );\n        }\n        break;\n\n      case 'complexity_analysis':\n        enhancements.guidingQuestions!.push(\n          'What complexity class does this belong to?',\n          'Is it complete for its class?',\n          'Are there known lower bounds?'\n        );\n        if (thought.complexityAnalysis) {\n          enhancements.metrics!.complexityClass = thought.complexityAnalysis.complexityClass;\n        }\n        break;\n\n      case 'oracle_reasoning':\n        enhancements.guidingQuestions!.push(\n          'What oracle is being used?',\n          'Does the result relativize?',\n          'What are the implications for P vs NP?'\n        );\n        enhancements.suggestions!.push(\n          'Consider Baker-Gill-Solovay relativization barriers'\n        );\n        break;\n\n      case 'diagonalization':\n        enhancements.guidingQuestions!.push(\n          'What is being enumerated?',\n          'How is the diagonal element constructed?',\n          'What contradiction arises?'\n        );\n        if (thought.diagonalization) {\n          enhancements.suggestions!.push(\n            `Pattern: ${thought.diagonalization.pattern}`\n          );\n        }\n        break;\n    }\n\n    // Classic problem references\n    if (thought.classicProblems && thought.classicProblems.length > 0) {\n      enhancements.suggestions!.push(\n        `References: ${thought.classicProblems.join(', ')}`\n      );\n    }\n\n    // Key insight\n    if (thought.keyInsight) {\n      enhancements.suggestions!.push(`Key insight: ${thought.keyInsight}`);\n    }\n\n    // High uncertainty warning\n    if (thought.uncertainty > 0.7) {\n      enhancements.warnings!.push(\n        'High uncertainty - verify proof steps carefully'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Resolve thought type from input\n   */\n  private resolveThoughtType(inputType: string | undefined): ComputabilityThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as ComputabilityThoughtType)) {\n      return inputType as ComputabilityThoughtType;\n    }\n    return 'machine_definition';\n  }\n\n  /**\n   * Normalize Turing machine specification\n   */\n  private normalizeMachine(machine: any): TuringMachine {\n    return {\n      id: machine.id || randomUUID(),\n      name: machine.name || 'Unnamed Machine',\n      description: machine.description,\n      states: machine.states || [],\n      inputAlphabet: machine.inputAlphabet || ['0', '1'],\n      tapeAlphabet: machine.tapeAlphabet || ['0', '1', '_'],\n      blankSymbol: machine.blankSymbol || '_',\n      transitions: machine.transitions || [],\n      initialState: machine.initialState || machine.states?.[0] || 'q0',\n      acceptStates: machine.acceptStates || [],\n      rejectStates: machine.rejectStates || [],\n      type: machine.type || 'deterministic',\n      oracle: machine.oracle,\n    };\n  }\n\n  /**\n   * Normalize decidability proof\n   */\n  private normalizeDecidabilityProof(proof: any): DecidabilityProof {\n    return {\n      id: proof.id || randomUUID(),\n      problem: proof.problem || '',\n      conclusion: proof.conclusion || 'unknown',\n      method: proof.method || 'direct_machine',\n      decidingMachine: proof.decidingMachine,\n      reduction: proof.reduction,\n      knownUndecidableProblem: proof.knownUndecidableProblem,\n      diagonalization: proof.diagonalization,\n      riceApplication: proof.riceApplication,\n      proofSteps: proof.proofSteps || [],\n      keyInsights: proof.keyInsights || [],\n    };\n  }\n\n  /**\n   * Normalize reduction\n   */\n  private normalizeReduction(reduction: any): Reduction {\n    return {\n      id: reduction.id || randomUUID(),\n      fromProblem: reduction.fromProblem || '',\n      toProblem: reduction.toProblem || '',\n      type: reduction.type || 'many_one',\n      reductionFunction: reduction.reductionFunction || {\n        description: '',\n        inputTransformation: '',\n        outputInterpretation: '',\n        preserves: '',\n      },\n      correctnessProof: reduction.correctnessProof || {\n        forwardDirection: '',\n        backwardDirection: '',\n      },\n      reductionComplexity: reduction.reductionComplexity,\n    };\n  }\n\n  /**\n   * Normalize diagonalization argument\n   */\n  private normalizeDiagonalization(diag: any): DiagonalizationArgument {\n    return {\n      id: diag.id || randomUUID(),\n      enumeration: diag.enumeration || {\n        description: '',\n        indexSet: 'natural numbers',\n        enumeratedObjects: '',\n      },\n      diagonalConstruction: diag.diagonalConstruction || {\n        description: '',\n        rule: '',\n        resultingObject: '',\n      },\n      contradiction: diag.contradiction || {\n        assumption: '',\n        consequence: '',\n        impossibility: '',\n      },\n      pattern: diag.pattern || 'custom',\n      historicalNote: diag.historicalNote,\n    };\n  }\n\n  /**\n   * Validate Turing machine specification\n   */\n  private validateMachine(machine: any, index: number): any[] {\n    const warnings = [];\n\n    if (!machine.states || machine.states.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `machines[${index}].states`,\n          'No states defined',\n          'A Turing machine requires at least one state'\n        )\n      );\n    }\n\n    if (!machine.transitions || machine.transitions.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `machines[${index}].transitions`,\n          'No transitions defined',\n          'Define the transition function'\n        )\n      );\n    }\n\n    if (!machine.acceptStates || machine.acceptStates.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `machines[${index}].acceptStates`,\n          'No accept states defined',\n          'Define at least one accept state'\n        )\n      );\n    }\n\n    return warnings;\n  }\n\n  /**\n   * Validate decidability proof\n   */\n  private validateDecidabilityProof(proof: any): any[] {\n    const warnings = [];\n\n    if (!proof.problem) {\n      warnings.push(\n        createValidationWarning(\n          'decidabilityProof.problem',\n          'No problem specified',\n          'Identify the decision problem being analyzed'\n        )\n      );\n    }\n\n    if (!proof.proofSteps || proof.proofSteps.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'decidabilityProof.proofSteps',\n          'No proof steps provided',\n          'Document the proof steps'\n        )\n      );\n    }\n\n    // Method-specific validation\n    if (proof.method === 'reduction' && !proof.reduction && !proof.knownUndecidableProblem) {\n      warnings.push(\n        createValidationWarning(\n          'decidabilityProof',\n          'Reduction proof without reduction details',\n          'Specify the reduction and known undecidable problem'\n        )\n      );\n    }\n\n    return warnings;\n  }\n\n  /**\n   * Validate reduction\n   */\n  private validateReduction(reduction: any, index: number): any[] {\n    const warnings = [];\n\n    if (!reduction.fromProblem || !reduction.toProblem) {\n      warnings.push(\n        createValidationWarning(\n          `reductions[${index}]`,\n          'Reduction missing source or target problem',\n          'Specify both fromProblem and toProblem'\n        )\n      );\n    }\n\n    if (!reduction.correctnessProof) {\n      warnings.push(\n        createValidationWarning(\n          `reductions[${index}].correctnessProof`,\n          'No correctness proof provided',\n          'Prove both directions of the reduction'\n        )\n      );\n    }\n\n    return warnings;\n  }\n}\n","/**\n * CryptanalyticHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Cryptanalytic reasoning with:\n * - Turing's deciban evidence system\n * - Bayesian hypothesis evaluation\n * - Frequency analysis support\n * - Key space elimination tracking\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport type {\n  CryptanalyticThought,\n  CryptanalyticThoughtType,\n  DecibanEvidence,\n  EvidenceChain,\n  CryptographicHypothesis,\n  CipherType,\n} from '../../types/modes/cryptanalytic.js';\nimport { toDecibans, fromDecibans, decibansToProbability } from '../../types/modes/cryptanalytic.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid cryptanalytic thought types\n */\nconst VALID_THOUGHT_TYPES: CryptanalyticThoughtType[] = [\n  'hypothesis_formation',\n  'evidence_accumulation',\n  'frequency_analysis',\n  'key_elimination',\n  'banburismus',\n  'crib_analysis',\n  'isomorphism_detection',\n];\n\n/**\n * Valid cipher types\n */\nconst VALID_CIPHER_TYPES: CipherType[] = [\n  'substitution_simple',\n  'substitution_polyalphabetic',\n  'substitution_polygraphic',\n  'transposition',\n  'rotor',\n  'stream',\n  'block',\n  'unknown',\n];\n\n/**\n * Turing's thresholds for certainty\n * 20 decibans = 100:1 odds (considered sufficient for certainty)\n */\nconst CONFIRMATION_THRESHOLD = 20;\nconst REFUTATION_THRESHOLD = -20;\n\n/**\n * CryptanalyticHandler - Specialized handler for cryptanalytic reasoning\n *\n * Provides:\n * - Deciban evidence accumulation\n * - Hypothesis probability tracking\n * - Key space analysis\n * - Frequency analysis support\n */\nexport class CryptanalyticHandler implements ModeHandler {\n  readonly mode = ThinkingMode.CRYPTANALYTIC;\n  readonly modeName = 'Cryptanalytic Reasoning';\n  readonly description = \"Bayesian cryptanalysis with Turing's deciban evidence system\";\n\n  /**\n   * Supported thought types for cryptanalytic mode\n   */\n  private readonly supportedThoughtTypes = [\n    'hypothesis_formation',\n    'evidence_accumulation',\n    'frequency_analysis',\n    'key_elimination',\n    'banburismus',\n    'crib_analysis',\n    'isomorphism_detection',\n  ];\n\n  /**\n   * Create a cryptanalytic thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): CryptanalyticThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process hypotheses\n    const hypotheses = inputAny.hypotheses\n      ? inputAny.hypotheses.map((h: any) => this.normalizeHypothesis(h))\n      : undefined;\n\n    // Process evidence chains\n    const evidenceChains = inputAny.evidenceChains\n      ? inputAny.evidenceChains.map((e: any) => this.normalizeEvidenceChain(e))\n      : undefined;\n\n    // Determine current hypothesis\n    const currentHypothesis = inputAny.currentHypothesis\n      ? this.normalizeHypothesis(inputAny.currentHypothesis)\n      : hypotheses?.[0];\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.CRYPTANALYTIC,\n\n      // Core cryptanalytic fields\n      thoughtType,\n      ciphertext: inputAny.ciphertext,\n      plaintext: inputAny.plaintext,\n      hypotheses,\n      currentHypothesis,\n      evidenceChains,\n      keySpaceAnalysis: inputAny.keySpaceAnalysis,\n      frequencyAnalysis: inputAny.frequencyAnalysis,\n      banburismusAnalysis: inputAny.banburismusAnalysis,\n      cribAnalysis: inputAny.cribAnalysis,\n      patterns: inputAny.patterns,\n      cipherType: inputAny.cipherType,\n      keyInsight: inputAny.keyInsight,\n\n      // Dependencies and assumptions\n      dependencies: input.dependencies || [],\n      assumptions: input.assumptions || [],\n      uncertainty: input.uncertainty ?? 0.5,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate cryptanalytic-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate cipher type\n    if (inputAny.cipherType && !VALID_CIPHER_TYPES.includes(inputAny.cipherType)) {\n      warnings.push(\n        createValidationWarning(\n          'cipherType',\n          `Unknown cipher type: ${inputAny.cipherType}`,\n          `Valid types: ${VALID_CIPHER_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate uncertainty\n    if (input.uncertainty !== undefined) {\n      if (input.uncertainty < 0 || input.uncertainty > 1) {\n        errors.push(\n          createValidationError(\n            'uncertainty',\n            `Uncertainty (${input.uncertainty}) must be between 0 and 1`,\n            'UNCERTAINTY_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Validate hypotheses\n    if (inputAny.hypotheses) {\n      for (let i = 0; i < inputAny.hypotheses.length; i++) {\n        const hypWarnings = this.validateHypothesis(inputAny.hypotheses[i], i);\n        warnings.push(...hypWarnings);\n      }\n    }\n\n    // Validate evidence chains\n    if (inputAny.evidenceChains) {\n      for (let i = 0; i < inputAny.evidenceChains.length; i++) {\n        const chainWarnings = this.validateEvidenceChain(inputAny.evidenceChains[i], i);\n        warnings.push(...chainWarnings);\n      }\n    }\n\n    // Suggest ciphertext for analysis\n    if (!inputAny.ciphertext && inputAny.thoughtType !== 'hypothesis_formation') {\n      warnings.push(\n        createValidationWarning(\n          'ciphertext',\n          'No ciphertext provided',\n          'Include ciphertext for cryptanalysis'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get cryptanalytic-specific enhancements\n   */\n  getEnhancements(thought: CryptanalyticThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.BAYESIAN, ThinkingMode.EVIDENTIAL, ThinkingMode.INDUCTIVE],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        hypothesisCount: thought.hypotheses?.length || 0,\n        evidenceChainCount: thought.evidenceChains?.length || 0,\n        uncertainty: thought.uncertainty,\n      },\n      mentalModels: [\n        \"Turing's Deciban System\",\n        'Bayesian Hypothesis Testing',\n        'Index of Coincidence',\n        'Banburismus',\n        'Frequency Analysis',\n        'Known-Plaintext Attack',\n      ],\n    };\n\n    // Thought type-specific guidance\n    switch (thought.thoughtType) {\n      case 'hypothesis_formation':\n        enhancements.guidingQuestions!.push(\n          'What cipher system is most likely?',\n          'What are the prior probabilities for each hypothesis?',\n          'What evidence would confirm or refute each hypothesis?'\n        );\n        break;\n\n      case 'evidence_accumulation':\n        enhancements.guidingQuestions!.push(\n          'What is the likelihood ratio for this evidence?',\n          'How many decibans does this evidence contribute?',\n          'Have we reached the confirmation threshold?'\n        );\n        if (thought.evidenceChains) {\n          for (const chain of thought.evidenceChains) {\n            enhancements.metrics![`${chain.hypothesis}_decibans`] = chain.totalDecibans;\n            if (chain.conclusion !== 'inconclusive') {\n              enhancements.suggestions!.push(\n                `Hypothesis \"${chain.hypothesis}\": ${chain.conclusion} (${chain.totalDecibans.toFixed(1)} db)`\n              );\n            }\n          }\n        }\n        break;\n\n      case 'frequency_analysis':\n        enhancements.guidingQuestions!.push(\n          'Does the frequency distribution match any known language?',\n          'What is the index of coincidence?',\n          'Are there significant deviations from expected frequencies?'\n        );\n        if (thought.frequencyAnalysis) {\n          enhancements.metrics!.indexOfCoincidence = thought.frequencyAnalysis.indexOfCoincidence;\n          enhancements.metrics!.chiSquared = thought.frequencyAnalysis.chiSquared;\n        }\n        break;\n\n      case 'key_elimination':\n        enhancements.guidingQuestions!.push(\n          'What portion of the key space has been eliminated?',\n          'What methods were used for elimination?',\n          'How many candidate keys remain?'\n        );\n        if (thought.keySpaceAnalysis) {\n          const ks = thought.keySpaceAnalysis;\n          enhancements.metrics!.reductionFactor = ks.reductionFactor;\n          enhancements.suggestions!.push(\n            `Key space reduced by factor of ${ks.reductionFactor.toFixed(2)}`\n          );\n        }\n        break;\n\n      case 'banburismus':\n        enhancements.guidingQuestions!.push(\n          'Are there significant coincidences at any offset?',\n          'What does this suggest about the wheel order?',\n          'Can we chain multiple Banburismus results?'\n        );\n        if (thought.banburismusAnalysis) {\n          const significant = thought.banburismusAnalysis.filter((b) => b.isSignificant);\n          enhancements.metrics!.significantOffsets = significant.length;\n          for (const b of significant) {\n            enhancements.suggestions!.push(\n              `Significant at offset ${b.offset}: ${b.decibanScore.toFixed(1)} db`\n            );\n          }\n        }\n        break;\n\n      case 'crib_analysis':\n        enhancements.guidingQuestions!.push(\n          'Is the crib position viable?',\n          'Are there any contradictions?',\n          'What constraints does this crib impose?'\n        );\n        if (thought.cribAnalysis) {\n          const viable = thought.cribAnalysis.filter((c) => c.isViable);\n          enhancements.metrics!.viablePositions = viable.length;\n        }\n        break;\n\n      case 'isomorphism_detection':\n        enhancements.guidingQuestions!.push(\n          'What patterns have been detected?',\n          'Do patterns suggest repeated words?',\n          'What deciban contribution do patterns provide?'\n        );\n        if (thought.patterns) {\n          enhancements.metrics!.patternCount = thought.patterns.length;\n        }\n        break;\n    }\n\n    // Current hypothesis analysis\n    if (thought.currentHypothesis) {\n      const h = thought.currentHypothesis;\n      enhancements.metrics!.currentDecibanScore = h.decibanScore;\n      enhancements.metrics!.posteriorProbability = h.posteriorProbability;\n\n      if (h.decibanScore >= CONFIRMATION_THRESHOLD) {\n        enhancements.suggestions!.push(\n          ` Hypothesis \"${h.description}\" CONFIRMED (${h.decibanScore.toFixed(1)} db)`\n        );\n      } else if (h.decibanScore <= REFUTATION_THRESHOLD) {\n        enhancements.warnings!.push(\n          ` Hypothesis \"${h.description}\" REFUTED (${h.decibanScore.toFixed(1)} db)`\n        );\n      } else {\n        enhancements.suggestions!.push(\n          `Hypothesis \"${h.description}\": ${h.decibanScore.toFixed(1)} db (inconclusive, need ${CONFIRMATION_THRESHOLD} db)`\n        );\n      }\n    }\n\n    // Cipher type suggestion\n    if (thought.cipherType) {\n      enhancements.suggestions!.push(`Cipher type: ${thought.cipherType}`);\n    }\n\n    // Key insight\n    if (thought.keyInsight) {\n      enhancements.suggestions!.push(`Key insight: ${thought.keyInsight}`);\n    }\n\n    // High uncertainty warning\n    if (thought.uncertainty > 0.7) {\n      enhancements.warnings!.push(\n        'High uncertainty - gather more evidence'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Resolve thought type from input\n   */\n  private resolveThoughtType(inputType: string | undefined): CryptanalyticThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as CryptanalyticThoughtType)) {\n      return inputType as CryptanalyticThoughtType;\n    }\n    return 'hypothesis_formation';\n  }\n\n  /**\n   * Normalize hypothesis\n   */\n  private normalizeHypothesis(h: any): CryptographicHypothesis {\n    const evidence: DecibanEvidence[] = (h.evidence || []).map((e: any) => this.normalizeEvidence(e));\n    const totalDecibans = evidence.reduce((sum, e) => sum + e.decibans, 0);\n    const posteriorProbability = decibansToProbability(totalDecibans, h.priorProbability || 0.5);\n\n    return {\n      id: h.id || randomUUID(),\n      description: h.description || '',\n      cipherType: h.cipherType,\n      parameters: h.parameters,\n      priorProbability: h.priorProbability ?? 0.5,\n      posteriorProbability,\n      decibanScore: totalDecibans,\n      evidence,\n      status: this.determineHypothesisStatus(totalDecibans),\n    };\n  }\n\n  /**\n   * Normalize evidence\n   */\n  private normalizeEvidence(e: any): DecibanEvidence {\n    const likelihoodRatio = e.likelihoodRatio ?? (e.decibans ? fromDecibans(e.decibans) : 1);\n    const decibans = e.decibans ?? toDecibans(likelihoodRatio);\n\n    return {\n      observation: e.observation || '',\n      decibans,\n      likelihoodRatio,\n      source: e.source || 'statistical',\n      confidence: e.confidence ?? 1.0,\n      explanation: e.explanation,\n    };\n  }\n\n  /**\n   * Normalize evidence chain\n   */\n  private normalizeEvidenceChain(chain: any): EvidenceChain {\n    const observations: DecibanEvidence[] = (chain.observations || []).map((o: any) =>\n      this.normalizeEvidence(o)\n    );\n    const totalDecibans = observations.reduce((sum, o) => sum + o.decibans, 0);\n    const confirmationThreshold = chain.confirmationThreshold ?? CONFIRMATION_THRESHOLD;\n    const refutationThreshold = chain.refutationThreshold ?? REFUTATION_THRESHOLD;\n\n    let conclusion: 'confirmed' | 'refuted' | 'inconclusive';\n    if (totalDecibans >= confirmationThreshold) {\n      conclusion = 'confirmed';\n    } else if (totalDecibans <= refutationThreshold) {\n      conclusion = 'refuted';\n    } else {\n      conclusion = 'inconclusive';\n    }\n\n    return {\n      hypothesis: chain.hypothesis || '',\n      observations,\n      totalDecibans,\n      oddsRatio: fromDecibans(totalDecibans),\n      conclusion,\n      confirmationThreshold,\n      refutationThreshold,\n    };\n  }\n\n  /**\n   * Determine hypothesis status based on deciban score\n   */\n  private determineHypothesisStatus(decibans: number): 'active' | 'confirmed' | 'refuted' | 'superseded' {\n    if (decibans >= CONFIRMATION_THRESHOLD) {\n      return 'confirmed';\n    } else if (decibans <= REFUTATION_THRESHOLD) {\n      return 'refuted';\n    }\n    return 'active';\n  }\n\n  /**\n   * Validate hypothesis\n   */\n  private validateHypothesis(h: any, index: number): any[] {\n    const warnings = [];\n\n    if (!h.description) {\n      warnings.push(\n        createValidationWarning(\n          `hypotheses[${index}].description`,\n          'Hypothesis lacks description',\n          'Describe what the hypothesis proposes'\n        )\n      );\n    }\n\n    if (h.priorProbability !== undefined && (h.priorProbability < 0 || h.priorProbability > 1)) {\n      warnings.push(\n        createValidationWarning(\n          `hypotheses[${index}].priorProbability`,\n          `Prior probability (${h.priorProbability}) out of range`,\n          'Prior probability must be between 0 and 1'\n        )\n      );\n    }\n\n    return warnings;\n  }\n\n  /**\n   * Validate evidence chain\n   */\n  private validateEvidenceChain(chain: any, index: number): any[] {\n    const warnings = [];\n\n    if (!chain.hypothesis) {\n      warnings.push(\n        createValidationWarning(\n          `evidenceChains[${index}].hypothesis`,\n          'Evidence chain lacks hypothesis reference',\n          'Link evidence chain to a hypothesis'\n        )\n      );\n    }\n\n    if (!chain.observations || chain.observations.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          `evidenceChains[${index}].observations`,\n          'Evidence chain has no observations',\n          'Add deciban evidence observations'\n        )\n      );\n    }\n\n    return warnings;\n  }\n}\n","/**\n * AlgorithmicHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Algorithmic reasoning with:\n * - Algorithm design pattern classification\n * - Complexity analysis (time/space)\n * - Correctness proof structures\n * - Dynamic programming and greedy formulations\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport type {\n  AlgorithmicThought,\n  AlgorithmicThoughtType,\n  DesignPattern,\n  TimeComplexity,\n  SpaceComplexity,\n  CorrectnessProof,\n  DPFormulation,\n  GreedyProof,\n} from '../../types/modes/algorithmic.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid algorithmic thought types\n */\nconst VALID_THOUGHT_TYPES: AlgorithmicThoughtType[] = [\n  'algorithm_definition',\n  'complexity_analysis',\n  'recurrence_solving',\n  'correctness_proof',\n  'invariant_identification',\n  'divide_and_conquer',\n  'dynamic_programming',\n  'greedy_choice',\n  'backtracking',\n  'branch_and_bound',\n  'randomized_analysis',\n  'amortized_analysis',\n  'data_structure_design',\n  'data_structure_analysis',\n  'augmentation',\n  'graph_traversal',\n  'shortest_path',\n  'minimum_spanning_tree',\n  'network_flow',\n  'matching',\n  'string_matching',\n  'computational_geometry',\n  'number_theoretic',\n  'approximation',\n  'online_algorithm',\n  'parallel_algorithm',\n];\n\n/**\n * Valid design patterns\n */\nconst VALID_DESIGN_PATTERNS: DesignPattern[] = [\n  'brute_force',\n  'divide_and_conquer',\n  'dynamic_programming',\n  'greedy',\n  'backtracking',\n  'branch_and_bound',\n  'randomized',\n  'approximation',\n  'online',\n  'parallel',\n  'incremental',\n  'prune_and_search',\n];\n\n/**\n * AlgorithmicHandler - Specialized handler for algorithmic reasoning\n *\n * Provides:\n * - Algorithm classification by design pattern\n * - Time and space complexity analysis\n * - Loop invariant and correctness proofs\n * - DP and greedy formulation support\n */\nexport class AlgorithmicHandler implements ModeHandler {\n  readonly mode = ThinkingMode.ALGORITHMIC;\n  readonly modeName = 'Algorithmic Analysis';\n  readonly description = 'Algorithm design, complexity analysis, and correctness proofs (CLRS coverage)';\n\n  /**\n   * Supported thought types for algorithmic mode\n   */\n  private readonly supportedThoughtTypes = VALID_THOUGHT_TYPES;\n\n  /**\n   * Create an algorithmic thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): AlgorithmicThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process time complexity\n    const timeComplexity = inputAny.timeComplexity\n      ? this.normalizeTimeComplexity(inputAny.timeComplexity)\n      : undefined;\n\n    // Process space complexity\n    const spaceComplexity = inputAny.spaceComplexity\n      ? this.normalizeSpaceComplexity(inputAny.spaceComplexity)\n      : undefined;\n\n    // Process correctness proof\n    const correctnessProof = inputAny.correctnessProof\n      ? this.normalizeCorrectnessProof(inputAny.correctnessProof)\n      : undefined;\n\n    // Process DP formulation\n    const dpFormulation = inputAny.dpFormulation\n      ? this.normalizeDPFormulation(inputAny.dpFormulation)\n      : undefined;\n\n    // Process greedy proof\n    const greedyProof = inputAny.greedyProof\n      ? this.normalizeGreedyProof(inputAny.greedyProof)\n      : undefined;\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.ALGORITHMIC,\n\n      // Core algorithmic fields\n      thoughtType,\n      algorithm: inputAny.algorithm,\n      clrsCategory: inputAny.clrsCategory,\n      clrsAlgorithm: inputAny.clrsAlgorithm,\n      designPattern: inputAny.designPattern,\n      timeComplexity,\n      spaceComplexity,\n      recurrence: inputAny.recurrence,\n      correctnessProof,\n      loopInvariants: inputAny.loopInvariants,\n      dpFormulation,\n      greedyProof,\n      graphContext: inputAny.graphContext,\n      dataStructure: inputAny.dataStructure,\n      amortizedAnalysis: inputAny.amortizedAnalysis,\n      comparison: inputAny.comparison,\n      pseudocode: inputAny.pseudocode,\n      executionTrace: inputAny.executionTrace,\n      keyInsight: inputAny.keyInsight,\n\n      // Dependencies and assumptions\n      dependencies: input.dependencies || [],\n      assumptions: input.assumptions || [],\n      uncertainty: input.uncertainty ?? 0.5,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate algorithmic-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors = [];\n    const warnings = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types include: ${VALID_THOUGHT_TYPES.slice(0, 5).join(', ')}...`\n        )\n      );\n    }\n\n    // Validate design pattern\n    if (inputAny.designPattern && !VALID_DESIGN_PATTERNS.includes(inputAny.designPattern)) {\n      warnings.push(\n        createValidationWarning(\n          'designPattern',\n          `Unknown design pattern: ${inputAny.designPattern}`,\n          `Valid patterns: ${VALID_DESIGN_PATTERNS.join(', ')}`\n        )\n      );\n    }\n\n    // Validate uncertainty\n    if (input.uncertainty !== undefined) {\n      if (input.uncertainty < 0 || input.uncertainty > 1) {\n        errors.push(\n          createValidationError(\n            'uncertainty',\n            `Uncertainty (${input.uncertainty}) must be between 0 and 1`,\n            'UNCERTAINTY_OUT_OF_RANGE'\n          )\n        );\n      }\n    }\n\n    // Validate DP formulation\n    if (inputAny.dpFormulation) {\n      const dpWarnings = this.validateDPFormulation(inputAny.dpFormulation);\n      warnings.push(...dpWarnings);\n    }\n\n    // Validate correctness proof\n    if (inputAny.correctnessProof) {\n      const proofWarnings = this.validateCorrectnessProof(inputAny.correctnessProof);\n      warnings.push(...proofWarnings);\n    }\n\n    // Suggest complexity analysis for algorithm definition\n    if (inputAny.thoughtType === 'algorithm_definition' && !inputAny.timeComplexity) {\n      warnings.push(\n        createValidationWarning(\n          'timeComplexity',\n          'Algorithm definition without complexity analysis',\n          'Include time complexity for complete specification'\n        )\n      );\n    }\n\n    // Suggest DP formulation for dynamic programming\n    if (inputAny.thoughtType === 'dynamic_programming' && !inputAny.dpFormulation) {\n      warnings.push(\n        createValidationWarning(\n          'dpFormulation',\n          'DP thought without formulation',\n          'Include the four-step DP formulation'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get algorithmic-specific enhancements\n   */\n  getEnhancements(thought: AlgorithmicThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.MATHEMATICS, ThinkingMode.COMPUTABILITY, ThinkingMode.OPTIMIZATION],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        dependencyCount: thought.dependencies?.length || 0,\n        assumptionCount: thought.assumptions?.length || 0,\n        uncertainty: thought.uncertainty,\n      },\n      mentalModels: [\n        'Divide and Conquer',\n        'Dynamic Programming',\n        'Greedy Choice Property',\n        'Master Theorem',\n        'Loop Invariants',\n        'Amortized Analysis',\n      ],\n    };\n\n    // Thought type-specific guidance\n    switch (thought.thoughtType) {\n      case 'algorithm_definition':\n        enhancements.guidingQuestions!.push(\n          'What is the input/output specification?',\n          'What design pattern does this follow?',\n          'Is the algorithm correct for all valid inputs?'\n        );\n        break;\n\n      case 'complexity_analysis':\n        enhancements.guidingQuestions!.push(\n          'What is the dominant operation?',\n          'Can we apply the Master Theorem?',\n          'Is the analysis tight () or just upper bound (O)?'\n        );\n        if (thought.timeComplexity) {\n          enhancements.metrics!.worstCase = thought.timeComplexity.worstCase;\n          enhancements.suggestions!.push(\n            `Time: ${thought.timeComplexity.worstCase}`\n          );\n        }\n        if (thought.spaceComplexity) {\n          enhancements.metrics!.spaceComplexity = thought.spaceComplexity.auxiliary;\n        }\n        break;\n\n      case 'recurrence_solving':\n        enhancements.guidingQuestions!.push(\n          'Which method applies: Master Theorem, substitution, or recursion tree?',\n          'What is the recurrence relation?',\n          'Is the solution tight?'\n        );\n        if (thought.recurrence) {\n          enhancements.suggestions!.push(\n            `Recurrence: ${thought.recurrence.formula}`,\n            `Solution: ${thought.recurrence.solution}`\n          );\n        }\n        break;\n\n      case 'correctness_proof':\n        enhancements.guidingQuestions!.push(\n          'What are the preconditions and postconditions?',\n          'What is the loop invariant?',\n          'Why does the algorithm terminate?'\n        );\n        if (thought.correctnessProof) {\n          enhancements.suggestions!.push(\n            `Proof method: ${thought.correctnessProof.method}`\n          );\n        }\n        break;\n\n      case 'invariant_identification':\n        enhancements.guidingQuestions!.push(\n          'Does the invariant hold at initialization?',\n          'Is it maintained through each iteration?',\n          'What does the invariant imply at termination?'\n        );\n        if (thought.loopInvariants) {\n          enhancements.metrics!.invariantCount = thought.loopInvariants.length;\n        }\n        break;\n\n      case 'divide_and_conquer':\n        enhancements.guidingQuestions!.push(\n          'How is the problem divided?',\n          'What are the subproblems?',\n          'How are solutions combined?'\n        );\n        enhancements.suggestions!.push(\n          'Apply recurrence analysis using Master Theorem'\n        );\n        break;\n\n      case 'dynamic_programming':\n        enhancements.guidingQuestions!.push(\n          'What is the optimal substructure?',\n          'Are there overlapping subproblems?',\n          'What is the recurrence relation?'\n        );\n        if (thought.dpFormulation) {\n          enhancements.suggestions!.push(\n            `State space: ${thought.dpFormulation.recursiveDefinition.stateSpace}`,\n            `Complexity: ${thought.dpFormulation.complexity.total}`\n          );\n        }\n        break;\n\n      case 'greedy_choice':\n        enhancements.guidingQuestions!.push(\n          'What is the greedy choice?',\n          'Why is the greedy choice safe?',\n          'Is there optimal substructure?'\n        );\n        if (thought.greedyProof) {\n          enhancements.suggestions!.push(\n            'Greedy choice property verified'\n          );\n        }\n        break;\n\n      case 'amortized_analysis':\n        enhancements.guidingQuestions!.push(\n          'Which method: aggregate, accounting, or potential?',\n          'What is the amortized cost per operation?',\n          'Is the credit/potential always non-negative?'\n        );\n        if (thought.amortizedAnalysis) {\n          enhancements.suggestions!.push(\n            `Method: ${thought.amortizedAnalysis.method}`,\n            `Amortized cost: ${thought.amortizedAnalysis.result}`\n          );\n        }\n        break;\n\n      case 'graph_traversal':\n      case 'shortest_path':\n      case 'minimum_spanning_tree':\n      case 'network_flow':\n        if (thought.graphContext) {\n          enhancements.metrics!.graphType = thought.graphContext.graphType;\n          enhancements.metrics!.weighted = thought.graphContext.weighted ? 1 : 0;\n          enhancements.suggestions!.push(\n            `Graph: ${thought.graphContext.graphType}, ${thought.graphContext.weighted ? 'weighted' : 'unweighted'}`\n          );\n        }\n        break;\n    }\n\n    // Design pattern analysis\n    if (thought.designPattern) {\n      enhancements.metrics!.designPattern = thought.designPattern;\n      enhancements.suggestions!.push(`Design pattern: ${thought.designPattern}`);\n    }\n\n    // CLRS reference\n    if (thought.clrsAlgorithm) {\n      enhancements.suggestions!.push(`CLRS Algorithm: ${thought.clrsAlgorithm}`);\n    }\n    if (thought.clrsCategory) {\n      enhancements.metrics!.clrsCategory = thought.clrsCategory;\n    }\n\n    // Algorithm comparison\n    if (thought.comparison) {\n      enhancements.metrics!.alternativeCount = thought.comparison.algorithms.length;\n    }\n\n    // Key insight\n    if (thought.keyInsight) {\n      enhancements.suggestions!.push(`Key insight: ${thought.keyInsight}`);\n    }\n\n    // High uncertainty warning\n    if (thought.uncertainty > 0.7) {\n      enhancements.warnings!.push(\n        'High uncertainty - verify analysis carefully'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as AlgorithmicThoughtType);\n  }\n\n  /**\n   * Resolve thought type from input\n   */\n  private resolveThoughtType(inputType: string | undefined): AlgorithmicThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as AlgorithmicThoughtType)) {\n      return inputType as AlgorithmicThoughtType;\n    }\n    return 'algorithm_definition';\n  }\n\n  /**\n   * Normalize time complexity\n   */\n  private normalizeTimeComplexity(tc: any): TimeComplexity {\n    return {\n      bestCase: tc.bestCase || '(1)',\n      averageCase: tc.averageCase || tc.worstCase || 'O(n)',\n      worstCase: tc.worstCase || 'O(n)',\n      amortized: tc.amortized,\n      recurrence: tc.recurrence,\n      closedForm: tc.closedForm,\n      masterTheorem: tc.masterTheorem,\n      inputSensitive: tc.inputSensitive,\n    };\n  }\n\n  /**\n   * Normalize space complexity\n   */\n  private normalizeSpaceComplexity(sc: any): SpaceComplexity {\n    return {\n      auxiliary: sc.auxiliary || 'O(1)',\n      total: sc.total || sc.auxiliary || 'O(n)',\n      inPlace: sc.inPlace ?? false,\n      stackDepth: sc.stackDepth,\n      cacheEfficiency: sc.cacheEfficiency,\n    };\n  }\n\n  /**\n   * Normalize correctness proof\n   */\n  private normalizeCorrectnessProof(proof: any): CorrectnessProof {\n    return {\n      id: proof.id || randomUUID(),\n      algorithm: proof.algorithm || '',\n      method: proof.method || 'loop_invariant',\n      preconditions: proof.preconditions || [],\n      postconditions: proof.postconditions || [],\n      invariants: proof.invariants,\n      inductionBase: proof.inductionBase,\n      inductionStep: proof.inductionStep,\n      terminationArgument: proof.terminationArgument || {\n        decreasingQuantity: '',\n        lowerBound: '',\n        proof: '',\n      },\n      proofSteps: proof.proofSteps || [],\n      keyInsights: proof.keyInsights || [],\n    };\n  }\n\n  /**\n   * Normalize DP formulation\n   */\n  private normalizeDPFormulation(dp: any): DPFormulation {\n    return {\n      id: dp.id || randomUUID(),\n      problem: dp.problem || '',\n      characterization: dp.characterization || {\n        optimalSubstructure: '',\n        subproblemDefinition: '',\n      },\n      recursiveDefinition: dp.recursiveDefinition || {\n        stateSpace: '',\n        recurrence: '',\n        baseCases: [],\n      },\n      computationOrder: dp.computationOrder || {\n        direction: 'bottom_up',\n        fillOrder: '',\n      },\n      reconstruction: dp.reconstruction || {\n        method: '',\n        traceback: '',\n      },\n      complexity: dp.complexity || {\n        states: '',\n        transitionCost: '',\n        total: '',\n      },\n      optimizations: dp.optimizations,\n    };\n  }\n\n  /**\n   * Normalize greedy proof\n   */\n  private normalizeGreedyProof(proof: any): GreedyProof {\n    return {\n      id: proof.id || randomUUID(),\n      problem: proof.problem || '',\n      greedyChoice: proof.greedyChoice || {\n        description: '',\n        localOptimum: '',\n        globalOptimumProof: '',\n      },\n      optimalSubstructure: proof.optimalSubstructure || {\n        description: '',\n        proof: '',\n      },\n      exchangeArgument: proof.exchangeArgument,\n      matroid: proof.matroid,\n    };\n  }\n\n  /**\n   * Validate DP formulation\n   */\n  private validateDPFormulation(dp: any): any[] {\n    const warnings = [];\n\n    if (!dp.recursiveDefinition?.recurrence) {\n      warnings.push(\n        createValidationWarning(\n          'dpFormulation.recursiveDefinition.recurrence',\n          'DP formulation without recurrence relation',\n          'Specify the recurrence that defines optimal value'\n        )\n      );\n    }\n\n    if (!dp.recursiveDefinition?.baseCases || dp.recursiveDefinition.baseCases.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'dpFormulation.recursiveDefinition.baseCases',\n          'No base cases specified',\n          'Define base cases for the recurrence'\n        )\n      );\n    }\n\n    if (!dp.characterization?.optimalSubstructure) {\n      warnings.push(\n        createValidationWarning(\n          'dpFormulation.characterization.optimalSubstructure',\n          'Optimal substructure not characterized',\n          'Prove that optimal solution contains optimal subproblem solutions'\n        )\n      );\n    }\n\n    return warnings;\n  }\n\n  /**\n   * Validate correctness proof\n   */\n  private validateCorrectnessProof(proof: any): any[] {\n    const warnings = [];\n\n    if (!proof.preconditions || proof.preconditions.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'correctnessProof.preconditions',\n          'No preconditions specified',\n          'Define what the algorithm expects as input'\n        )\n      );\n    }\n\n    if (!proof.postconditions || proof.postconditions.length === 0) {\n      warnings.push(\n        createValidationWarning(\n          'correctnessProof.postconditions',\n          'No postconditions specified',\n          'Define what the algorithm guarantees as output'\n        )\n      );\n    }\n\n    if (!proof.terminationArgument || !proof.terminationArgument.decreasingQuantity) {\n      warnings.push(\n        createValidationWarning(\n          'correctnessProof.terminationArgument',\n          'No termination argument',\n          'Prove that the algorithm terminates'\n        )\n      );\n    }\n\n    if (proof.method === 'loop_invariant' && (!proof.invariants || proof.invariants.length === 0)) {\n      warnings.push(\n        createValidationWarning(\n          'correctnessProof.invariants',\n          'Loop invariant method without invariants',\n          'Define the loop invariant(s)'\n        )\n      );\n    }\n\n    return warnings;\n  }\n}\n","/**\n * MetaReasoningHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Meta-Reasoning mode with:\n * - Strategy evaluation and monitoring\n * - Mode switching recommendations\n * - Resource allocation assessment\n * - Quality metrics tracking\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport type {\n  MetaReasoningThought,\n  CurrentStrategy,\n  StrategyEvaluation,\n  AlternativeStrategy,\n  StrategyRecommendation,\n  ResourceAllocation,\n  QualityMetrics,\n  SessionContext,\n  MetaAction,\n} from '../../types/modes/metareasoning.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid meta actions\n */\nconst VALID_META_ACTIONS: MetaAction[] = ['CONTINUE', 'SWITCH', 'REFINE', 'COMBINE'];\n\n/**\n * MetaReasoningHandler - Specialized handler for meta-reasoning\n *\n * Provides:\n * - Reasoning about reasoning strategy\n * - Mode effectiveness evaluation\n * - Alternative strategy suggestion\n * - Resource allocation guidance\n */\nexport class MetaReasoningHandler implements ModeHandler {\n  readonly mode = ThinkingMode.METAREASONING;\n  readonly modeName = 'Meta-Reasoning';\n  readonly description = 'Reasoning about reasoning itself - strategy monitoring and optimization';\n\n  /**\n   * Supported thought types for meta-reasoning mode\n   */\n  private readonly supportedThoughtTypes = [\n    'strategy_evaluation',\n    'mode_switch',\n    'resource_allocation',\n    'quality_assessment',\n    'progress_monitoring',\n    'strategy_recommendation',\n  ];\n\n  /**\n   * Create a meta-reasoning thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): MetaReasoningThought {\n    const inputAny = input as any;\n\n    // Process current strategy\n    const currentStrategy = this.normalizeCurrentStrategy(inputAny.currentStrategy, sessionId);\n\n    // Process strategy evaluation\n    const strategyEvaluation = this.normalizeStrategyEvaluation(inputAny.strategyEvaluation);\n\n    // Process alternative strategies\n    const alternativeStrategies = (inputAny.alternativeStrategies || []).map(\n      (s: any) => this.normalizeAlternativeStrategy(s)\n    );\n\n    // Generate recommendation if not provided\n    const recommendation = inputAny.recommendation\n      ? this.normalizeRecommendation(inputAny.recommendation)\n      : this.generateRecommendation(strategyEvaluation, alternativeStrategies);\n\n    // Process resource allocation\n    const resourceAllocation = this.normalizeResourceAllocation(inputAny.resourceAllocation, input);\n\n    // Process quality metrics\n    const qualityMetrics = this.normalizeQualityMetrics(inputAny.qualityMetrics);\n\n    // Process session context\n    const sessionContext = this.normalizeSessionContext(inputAny.sessionContext, sessionId);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.METAREASONING,\n\n      // Core meta-reasoning fields\n      currentStrategy,\n      strategyEvaluation,\n      alternativeStrategies,\n      recommendation,\n      resourceAllocation,\n      qualityMetrics,\n      sessionContext,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate meta-reasoning-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ReturnType<typeof createValidationWarning>[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate current strategy\n    if (!inputAny.currentStrategy) {\n      warnings.push(\n        createValidationWarning(\n          'currentStrategy',\n          'No current strategy specified',\n          'Describe the current reasoning strategy being evaluated'\n        )\n      );\n    }\n\n    // Validate strategy evaluation scores\n    if (inputAny.strategyEvaluation) {\n      const se = inputAny.strategyEvaluation;\n      const scoreFields = ['effectiveness', 'efficiency', 'confidence', 'qualityScore'];\n      for (const field of scoreFields) {\n        if (se[field] !== undefined && (se[field] < 0 || se[field] > 1)) {\n          warnings.push(\n            createValidationWarning(\n              `strategyEvaluation.${field}`,\n              `${field} (${se[field]}) should be between 0 and 1`,\n              'Normalize scores to [0, 1] range'\n            )\n          );\n        }\n      }\n    }\n\n    // Validate recommendation action\n    if (inputAny.recommendation?.action && !VALID_META_ACTIONS.includes(inputAny.recommendation.action)) {\n      warnings.push(\n        createValidationWarning(\n          'recommendation.action',\n          `Unknown action: ${inputAny.recommendation.action}`,\n          `Valid actions: ${VALID_META_ACTIONS.join(', ')}`\n        )\n      );\n    }\n\n    // Suggest alternatives for SWITCH recommendation\n    if (inputAny.recommendation?.action === 'SWITCH' &&\n        (!inputAny.alternativeStrategies || inputAny.alternativeStrategies.length === 0)) {\n      warnings.push(\n        createValidationWarning(\n          'alternativeStrategies',\n          'SWITCH recommended but no alternatives provided',\n          'Include alternative strategies to switch to'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get meta-reasoning-specific enhancements\n   */\n  getEnhancements(thought: MetaReasoningThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.HYBRID, ThinkingMode.SEQUENTIAL],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        effectiveness: thought.strategyEvaluation.effectiveness,\n        efficiency: thought.strategyEvaluation.efficiency,\n        confidence: thought.strategyEvaluation.confidence,\n        qualityScore: thought.strategyEvaluation.qualityScore,\n        alternativeCount: thought.alternativeStrategies.length,\n      },\n      mentalModels: [\n        'Metacognition',\n        'Strategy Selection',\n        'Resource Allocation',\n        'Progress Monitoring',\n        'Cognitive Load Management',\n      ],\n    };\n\n    // Current strategy analysis\n    enhancements.suggestions!.push(\n      `Current strategy: ${thought.currentStrategy.mode} (${thought.currentStrategy.approach})`\n    );\n    enhancements.metrics!.thoughtsSpent = thought.currentStrategy.thoughtsSpent;\n\n    // Strategy evaluation feedback\n    if (thought.strategyEvaluation.effectiveness < 0.4) {\n      enhancements.warnings!.push(\n        'Low effectiveness - consider switching strategies'\n      );\n    } else if (thought.strategyEvaluation.effectiveness > 0.8) {\n      enhancements.suggestions!.push(\n        ' Current strategy is highly effective'\n      );\n    }\n\n    if (thought.strategyEvaluation.efficiency < 0.4) {\n      enhancements.warnings!.push(\n        'Low efficiency - consider more direct approaches'\n      );\n    }\n\n    if (thought.strategyEvaluation.issues.length > 0) {\n      enhancements.warnings!.push(\n        `Issues identified: ${thought.strategyEvaluation.issues.slice(0, 2).join(', ')}`\n      );\n    }\n\n    if (thought.strategyEvaluation.strengths.length > 0) {\n      enhancements.suggestions!.push(\n        `Strengths: ${thought.strategyEvaluation.strengths.slice(0, 2).join(', ')}`\n      );\n    }\n\n    // Recommendation analysis\n    enhancements.suggestions!.push(\n      `Recommendation: ${thought.recommendation.action} (confidence: ${(thought.recommendation.confidence * 100).toFixed(0)}%)`\n    );\n\n    if (thought.recommendation.action === 'SWITCH' && thought.recommendation.targetMode) {\n      enhancements.suggestions!.push(\n        `Switch to: ${thought.recommendation.targetMode}`\n      );\n    }\n\n    // Alternative strategies\n    if (thought.alternativeStrategies.length > 0) {\n      const bestAlt = thought.alternativeStrategies.reduce(\n        (a, b) => (a.recommendationScore > b.recommendationScore ? a : b)\n      );\n      enhancements.suggestions!.push(\n        `Best alternative: ${bestAlt.mode} (score: ${(bestAlt.recommendationScore * 100).toFixed(0)}%)`\n      );\n    }\n\n    // Resource allocation\n    enhancements.metrics!.complexityLevel = thought.resourceAllocation.complexityLevel;\n    enhancements.metrics!.urgency = thought.resourceAllocation.urgency;\n    enhancements.metrics!.thoughtsRemaining = thought.resourceAllocation.thoughtsRemaining;\n\n    if (thought.resourceAllocation.thoughtsRemaining < 3) {\n      enhancements.warnings!.push(\n        'Few thoughts remaining - focus on conclusions'\n      );\n    }\n\n    // Quality metrics\n    enhancements.metrics!.overallQuality = thought.qualityMetrics.overallQuality;\n\n    if (thought.qualityMetrics.logicalConsistency < 0.6) {\n      enhancements.warnings!.push(\n        'Low logical consistency - review reasoning chain'\n      );\n    }\n\n    if (thought.qualityMetrics.completeness < 0.5) {\n      enhancements.warnings!.push(\n        'Low completeness - ensure all aspects are addressed'\n      );\n    }\n\n    // Guiding questions\n    enhancements.guidingQuestions = [\n      'Is the current strategy making progress toward the goal?',\n      'Would a different reasoning mode be more effective here?',\n      'Are we allocating cognitive effort optimally?',\n      'What are the key insights so far?',\n      'What remains to be addressed?',\n    ];\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType);\n  }\n\n  /**\n   * Normalize current strategy\n   */\n  private normalizeCurrentStrategy(strategy: any, _sessionId: string): CurrentStrategy {\n    return {\n      mode: strategy?.mode || ThinkingMode.SEQUENTIAL,\n      approach: strategy?.approach || 'default',\n      startedAt: strategy?.startedAt ? new Date(strategy.startedAt) : new Date(),\n      thoughtsSpent: strategy?.thoughtsSpent || 0,\n      progressIndicators: strategy?.progressIndicators || [],\n    };\n  }\n\n  /**\n   * Normalize strategy evaluation\n   */\n  private normalizeStrategyEvaluation(evaluation: any): StrategyEvaluation {\n    return {\n      effectiveness: this.clamp(evaluation?.effectiveness ?? 0.5),\n      efficiency: this.clamp(evaluation?.efficiency ?? 0.5),\n      confidence: this.clamp(evaluation?.confidence ?? 0.5),\n      progressRate: evaluation?.progressRate ?? 0,\n      qualityScore: this.clamp(evaluation?.qualityScore ?? 0.5),\n      issues: evaluation?.issues || [],\n      strengths: evaluation?.strengths || [],\n    };\n  }\n\n  /**\n   * Normalize alternative strategy\n   */\n  private normalizeAlternativeStrategy(alt: any): AlternativeStrategy {\n    return {\n      mode: alt.mode || ThinkingMode.SEQUENTIAL,\n      reasoning: alt.reasoning || '',\n      expectedBenefit: alt.expectedBenefit || '',\n      switchingCost: this.clamp(alt.switchingCost ?? 0.3),\n      recommendationScore: this.clamp(alt.recommendationScore ?? 0.5),\n    };\n  }\n\n  /**\n   * Normalize recommendation\n   */\n  private normalizeRecommendation(rec: any): StrategyRecommendation {\n    return {\n      action: VALID_META_ACTIONS.includes(rec.action) ? rec.action : 'CONTINUE',\n      targetMode: rec.targetMode,\n      justification: rec.justification || '',\n      confidence: this.clamp(rec.confidence ?? 0.5),\n      expectedImprovement: rec.expectedImprovement || '',\n    };\n  }\n\n  /**\n   * Generate recommendation from evaluation\n   */\n  private generateRecommendation(\n    evaluation: StrategyEvaluation,\n    alternatives: AlternativeStrategy[]\n  ): StrategyRecommendation {\n    // If current strategy is effective, continue\n    if (evaluation.effectiveness > 0.7 && evaluation.efficiency > 0.5) {\n      return {\n        action: 'CONTINUE',\n        justification: 'Current strategy is effective and efficient',\n        confidence: evaluation.effectiveness,\n        expectedImprovement: 'Maintain current progress',\n      };\n    }\n\n    // If there's a better alternative, suggest switch\n    const bestAlt = alternatives.reduce(\n      (a, b) => ((a?.recommendationScore || 0) > (b?.recommendationScore || 0) ? a : b),\n      null as AlternativeStrategy | null\n    );\n\n    if (bestAlt && bestAlt.recommendationScore > evaluation.effectiveness + 0.2) {\n      return {\n        action: 'SWITCH',\n        targetMode: bestAlt.mode,\n        justification: `${bestAlt.mode} offers higher expected benefit`,\n        confidence: bestAlt.recommendationScore,\n        expectedImprovement: bestAlt.expectedBenefit,\n      };\n    }\n\n    // If effectiveness is low but no clear alternative, suggest refine\n    if (evaluation.effectiveness < 0.5) {\n      return {\n        action: 'REFINE',\n        justification: 'Current strategy needs adjustment',\n        confidence: 0.6,\n        expectedImprovement: 'Address identified issues',\n      };\n    }\n\n    return {\n      action: 'CONTINUE',\n      justification: 'No clear reason to change strategy',\n      confidence: 0.5,\n      expectedImprovement: 'Gradual progress expected',\n    };\n  }\n\n  /**\n   * Normalize resource allocation\n   */\n  private normalizeResourceAllocation(alloc: any, input: ThinkingToolInput): ResourceAllocation {\n    return {\n      timeSpent: alloc?.timeSpent ?? 0,\n      thoughtsRemaining: alloc?.thoughtsRemaining ?? (input.totalThoughts - input.thoughtNumber),\n      complexityLevel: alloc?.complexityLevel || 'medium',\n      urgency: alloc?.urgency || 'medium',\n      recommendation: alloc?.recommendation || 'Maintain balanced effort allocation',\n    };\n  }\n\n  /**\n   * Normalize quality metrics\n   */\n  private normalizeQualityMetrics(metrics: any): QualityMetrics {\n    return {\n      logicalConsistency: this.clamp(metrics?.logicalConsistency ?? 0.7),\n      evidenceQuality: this.clamp(metrics?.evidenceQuality ?? 0.6),\n      completeness: this.clamp(metrics?.completeness ?? 0.5),\n      originality: this.clamp(metrics?.originality ?? 0.5),\n      clarity: this.clamp(metrics?.clarity ?? 0.7),\n      overallQuality: this.clamp(metrics?.overallQuality ??\n        ((metrics?.logicalConsistency || 0.7) +\n         (metrics?.evidenceQuality || 0.6) +\n         (metrics?.completeness || 0.5) +\n         (metrics?.clarity || 0.7)) / 4),\n    };\n  }\n\n  /**\n   * Normalize session context\n   */\n  private normalizeSessionContext(context: any, sessionId: string): SessionContext {\n    return {\n      sessionId: context?.sessionId || sessionId,\n      totalThoughts: context?.totalThoughts || 0,\n      modesUsed: context?.modesUsed || [],\n      modeSwitches: context?.modeSwitches || 0,\n      problemType: context?.problemType || 'unknown',\n      historicalEffectiveness: context?.historicalEffectiveness,\n    };\n  }\n\n  /**\n   * Clamp value to [0, 1] range\n   */\n  private clamp(value: number): number {\n    return Math.max(0, Math.min(1, value));\n  }\n}\n","/**\n * RecursiveHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Recursive reasoning mode with:\n * - Problem decomposition tracking\n * - Base case identification\n * - Recursion depth monitoring\n * - Subproblem relationship analysis\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, Thought } from '../../types/core.js';\nimport type { RecursiveThought, Subproblem, BaseCase, RecurrenceRelation } from '../../types/modes/recursive.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n// Re-export for backwards compatibility\nexport type { RecursiveThought };\n\n/**\n * Valid thought types for recursive mode\n */\nconst VALID_THOUGHT_TYPES = [\n  'problem_decomposition',\n  'base_case_identification',\n  'recursive_step',\n  'subproblem_solution',\n  'solution_combination',\n  'termination_analysis',\n] as const;\n\ntype RecursiveThoughtType = (typeof VALID_THOUGHT_TYPES)[number];\n\n/**\n * Valid decomposition strategies\n */\nconst VALID_STRATEGIES = [\n  'divide_and_conquer',\n  'decrease_and_conquer',\n  'transform_and_conquer',\n  'dynamic_programming',\n] as const;\n\ntype DecompositionStrategy = (typeof VALID_STRATEGIES)[number];\n\n/**\n * RecursiveHandler - Specialized handler for recursive reasoning\n *\n * Provides:\n * - Problem decomposition into subproblems\n * - Base case identification and verification\n * - Recursion depth tracking\n * - Termination analysis\n */\nexport class RecursiveHandler implements ModeHandler {\n  readonly mode = ThinkingMode.RECURSIVE;\n  readonly modeName = 'Recursive Reasoning';\n  readonly description =\n    'Problem decomposition, base case identification, and recursive solution construction';\n\n  /**\n   * Supported thought types for recursive mode\n   */\n  private readonly supportedThoughtTypes = [...VALID_THOUGHT_TYPES];\n\n  /**\n   * Create a recursive thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): RecursiveThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process subproblems\n    const subproblems = inputAny.subproblems\n      ? inputAny.subproblems.map((s: any) => this.normalizeSubproblem(s, 0))\n      : undefined;\n\n    // Process base cases\n    const baseCases = inputAny.baseCases\n      ? inputAny.baseCases.map((b: any) => this.normalizeBaseCase(b))\n      : undefined;\n\n    // Determine if base case is reached\n    const baseCaseReached = inputAny.baseCaseReached ?? (baseCases?.some((b: BaseCase) => b.verified) || false);\n\n    // Process recurrence\n    const recurrence = inputAny.recurrence\n      ? this.normalizeRecurrence(inputAny.recurrence)\n      : undefined;\n\n    // Resolve strategy\n    const strategy = this.resolveStrategy(inputAny.strategy);\n\n    // Calculate depths\n    const currentDepth = inputAny.currentDepth ?? this.calculateCurrentDepth(subproblems);\n    const maxDepth = inputAny.maxDepth ?? Math.max(10, currentDepth + 5);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.RECURSIVE,\n\n      // Core recursive fields\n      thoughtType,\n      subproblems,\n      currentDepth,\n      maxDepth,\n      baseCases,\n      baseCaseReached,\n      recurrence,\n      strategy,\n      divisionFactor: inputAny.divisionFactor,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate recursive-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate strategy\n    if (inputAny.strategy && !VALID_STRATEGIES.includes(inputAny.strategy)) {\n      warnings.push(\n        createValidationWarning(\n          'strategy',\n          `Unknown strategy: ${inputAny.strategy}`,\n          `Valid strategies: ${VALID_STRATEGIES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate depth limits\n    if (inputAny.currentDepth !== undefined && inputAny.maxDepth !== undefined) {\n      if (inputAny.currentDepth > inputAny.maxDepth) {\n        warnings.push(\n          createValidationWarning(\n            'currentDepth',\n            `Current depth (${inputAny.currentDepth}) exceeds max depth (${inputAny.maxDepth})`,\n            'Recursion may be too deep - check for infinite recursion'\n          )\n        );\n      }\n    }\n\n    // Validate base cases for solution combination\n    if (inputAny.thoughtType === 'solution_combination') {\n      if (!inputAny.baseCases || inputAny.baseCases.length === 0) {\n        warnings.push(\n          createValidationWarning(\n            'baseCases',\n            'Solution combination without base cases',\n            'Define base cases for proper recursion termination'\n          )\n        );\n      }\n    }\n\n    // Warn about missing subproblems for decomposition\n    if (inputAny.thoughtType === 'problem_decomposition') {\n      if (!inputAny.subproblems || inputAny.subproblems.length === 0) {\n        warnings.push(\n          createValidationWarning(\n            'subproblems',\n            'Problem decomposition without subproblems',\n            'Identify subproblems for divide-and-conquer approach'\n          )\n        );\n      }\n    }\n\n    // Validate division factor\n    if (inputAny.divisionFactor !== undefined && inputAny.divisionFactor < 2) {\n      warnings.push(\n        createValidationWarning(\n          'divisionFactor',\n          `Division factor (${inputAny.divisionFactor}) should be >= 2`,\n          'Typical values are 2 (binary) or 3 (ternary)'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get recursive-specific enhancements\n   */\n  getEnhancements(thought: Thought): ModeEnhancements {\n    const recThought = thought as RecursiveThought;\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.ALGORITHMIC, ThinkingMode.MATHEMATICS, ThinkingMode.OPTIMIZATION],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        currentDepth: recThought.currentDepth,\n        maxDepth: recThought.maxDepth,\n        subproblemCount: recThought.subproblems?.length || 0,\n        baseCaseCount: recThought.baseCases?.length || 0,\n        baseCaseReached: recThought.baseCaseReached ? 1 : 0,\n      },\n      mentalModels: [\n        'Divide and Conquer',\n        'Mathematical Induction',\n        'Tree Traversal',\n        'Master Theorem',\n        'Recursive Problem Structure',\n      ],\n    };\n\n    // Strategy-specific guidance\n    enhancements.suggestions!.push(`Strategy: ${recThought.strategy.replace(/_/g, ' ')}`);\n\n    // Thought type-specific guidance\n    switch (recThought.thoughtType) {\n      case 'problem_decomposition':\n        enhancements.guidingQuestions!.push(\n          'Can this problem be divided into smaller similar problems?',\n          'What is the relationship between subproblems?',\n          'Is there overlap between subproblems (memoization opportunity)?'\n        );\n        if (recThought.subproblems) {\n          const pendingCount = recThought.subproblems.filter((s) => s.status === 'pending').length;\n          const solvedCount = recThought.subproblems.filter((s) => s.status === 'solved').length;\n          enhancements.suggestions!.push(\n            `Subproblems: ${solvedCount} solved, ${pendingCount} pending`\n          );\n        }\n        break;\n\n      case 'base_case_identification':\n        enhancements.guidingQuestions!.push(\n          'What are the smallest/simplest instances of the problem?',\n          'Can all base cases be solved directly?',\n          'Do base cases cover all termination conditions?'\n        );\n        if (recThought.baseCases) {\n          const verifiedCount = recThought.baseCases.filter((b) => b.verified).length;\n          enhancements.suggestions!.push(\n            `Base cases: ${verifiedCount}/${recThought.baseCases.length} verified`\n          );\n        }\n        break;\n\n      case 'recursive_step':\n        enhancements.guidingQuestions!.push(\n          'How do we reduce the problem to smaller instances?',\n          'Is progress guaranteed toward base case?',\n          'What is the recurrence relation?'\n        );\n        if (recThought.recurrence) {\n          enhancements.suggestions!.push(`Recurrence: ${recThought.recurrence.formula}`);\n          if (recThought.recurrence.closedForm) {\n            enhancements.suggestions!.push(`Closed form: ${recThought.recurrence.closedForm}`);\n          }\n        }\n        break;\n\n      case 'subproblem_solution':\n        enhancements.guidingQuestions!.push(\n          'Does the subproblem solution satisfy requirements?',\n          'Can this solution be reused (memoization)?',\n          'What is the time/space cost of this solution?'\n        );\n        break;\n\n      case 'solution_combination':\n        enhancements.guidingQuestions!.push(\n          'How are subproblem solutions combined?',\n          'Is the combination step efficient?',\n          'Does the combined solution maintain correctness?'\n        );\n        if (recThought.divisionFactor) {\n          enhancements.suggestions!.push(`Division factor: ${recThought.divisionFactor}`);\n        }\n        break;\n\n      case 'termination_analysis':\n        enhancements.guidingQuestions!.push(\n          'Is termination guaranteed for all inputs?',\n          'What is the maximum recursion depth?',\n          'Are there potential stack overflow risks?'\n        );\n        if (recThought.recurrence?.complexity) {\n          enhancements.suggestions!.push(`Time complexity: ${recThought.recurrence.complexity}`);\n        }\n        break;\n    }\n\n    // Depth warnings\n    if (recThought.currentDepth > recThought.maxDepth * 0.8) {\n      enhancements.warnings!.push(\n        `High recursion depth (${recThought.currentDepth}/${recThought.maxDepth}) - nearing limit`\n      );\n    }\n\n    // Base case warning\n    if (!recThought.baseCaseReached && recThought.currentDepth > 0) {\n      if (!recThought.baseCases || recThought.baseCases.length === 0) {\n        enhancements.warnings!.push('No base cases defined - ensure termination condition exists');\n      }\n    }\n\n    // Strategy-specific suggestions\n    if (recThought.strategy === 'dynamic_programming') {\n      enhancements.suggestions!.push('Consider memoization to avoid redundant computation');\n      enhancements.relatedModes!.push(ThinkingMode.OPTIMIZATION);\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as RecursiveThoughtType);\n  }\n\n  /**\n   * Resolve thought type from input\n   */\n  private resolveThoughtType(inputType: string | undefined): RecursiveThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as RecursiveThoughtType)) {\n      return inputType as RecursiveThoughtType;\n    }\n    return 'problem_decomposition';\n  }\n\n  /**\n   * Resolve strategy from input\n   */\n  private resolveStrategy(inputStrategy: string | undefined): DecompositionStrategy {\n    if (inputStrategy && VALID_STRATEGIES.includes(inputStrategy as DecompositionStrategy)) {\n      return inputStrategy as DecompositionStrategy;\n    }\n    return 'divide_and_conquer';\n  }\n\n  /**\n   * Normalize subproblem\n   */\n  private normalizeSubproblem(sub: any, defaultDepth: number): Subproblem {\n    return {\n      id: sub.id || randomUUID(),\n      name: sub.name || '',\n      description: sub.description || '',\n      size: sub.size ?? 'unknown',\n      depth: sub.depth ?? defaultDepth,\n      parentId: sub.parentId,\n      status: sub.status || 'pending',\n      result: sub.result,\n    };\n  }\n\n  /**\n   * Normalize base case\n   */\n  private normalizeBaseCase(baseCase: any): BaseCase {\n    return {\n      id: baseCase.id || randomUUID(),\n      condition: baseCase.condition || '',\n      result: baseCase.result || '',\n      verified: baseCase.verified ?? false,\n    };\n  }\n\n  /**\n   * Normalize recurrence relation\n   */\n  private normalizeRecurrence(rec: any): RecurrenceRelation {\n    return {\n      formula: rec.formula || '',\n      baseCase: rec.baseCase || '',\n      closedForm: rec.closedForm,\n      complexity: rec.complexity,\n    };\n  }\n\n  /**\n   * Calculate current depth from subproblems\n   */\n  private calculateCurrentDepth(subproblems?: Subproblem[]): number {\n    if (!subproblems || subproblems.length === 0) {\n      return 0;\n    }\n    return Math.max(...subproblems.map((s) => s.depth ?? 0)) + 1;\n  }\n}\n","/**\n * ModalHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Modal reasoning mode with:\n * - Possible worlds semantics\n * - Necessity and possibility operators\n * - Accessibility relations\n * - Multi-modal logic support (epistemic, deontic, alethic, temporal)\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, Thought } from '../../types/core.js';\nimport type {\n  ModalThought,\n  PossibleWorld,\n  ModalProposition,\n  AccessibilityRelation,\n  ModalInference,\n} from '../../types/modes/modal.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n// Re-export for backwards compatibility\nexport type { ModalThought };\n\n/**\n * Valid thought types for modal mode\n */\nconst VALID_THOUGHT_TYPES = [\n  'world_definition',\n  'proposition_analysis',\n  'accessibility_analysis',\n  'necessity_proof',\n  'possibility_proof',\n  'modal_inference',\n  'countermodel',\n] as const;\n\ntype ModalThoughtType = (typeof VALID_THOUGHT_TYPES)[number];\n\n/**\n * Valid modal logic systems\n */\nconst VALID_LOGIC_SYSTEMS = ['K', 'T', 'S4', 'S5', 'D', 'B', 'custom'] as const;\n\n/**\n * Valid modal domains\n */\nconst VALID_MODAL_DOMAINS = ['alethic', 'epistemic', 'deontic', 'temporal'] as const;\n\n/**\n * ModalHandler - Specialized handler for modal reasoning\n *\n * Provides:\n * - Possible worlds model construction\n * - Necessity and possibility evaluation\n * - Modal inference validation\n * - Multi-modal logic support\n */\nexport class ModalHandler implements ModeHandler {\n  readonly mode = ThinkingMode.MODAL;\n  readonly modeName = 'Modal Reasoning';\n  readonly description =\n    'Reasoning about necessity, possibility, and possible worlds semantics';\n\n  /**\n   * Supported thought types for modal mode\n   */\n  private readonly supportedThoughtTypes = [...VALID_THOUGHT_TYPES];\n\n  /**\n   * Create a modal thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): ModalThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process worlds\n    const worlds = (inputAny.worlds || []).map((w: any) => this.normalizeWorld(w));\n\n    // Ensure at least one world exists\n    if (worlds.length === 0) {\n      worlds.push(this.createDefaultWorld());\n    }\n\n    // Determine actual world\n    const actualWorld = inputAny.actualWorld || worlds.find((w: PossibleWorld) => w.isActual)?.id || worlds[0].id;\n\n    // Process propositions\n    const propositions = (inputAny.propositions || []).map((p: any) =>\n      this.normalizeProposition(p, worlds)\n    );\n\n    // Process accessibility relations\n    const accessibilityRelations = (inputAny.accessibilityRelations || []).map((r: any) =>\n      this.normalizeAccessibilityRelation(r, inputAny.modalDomain || 'alethic')\n    );\n\n    // Process inferences\n    const inferences = inputAny.inferences\n      ? inputAny.inferences.map((i: any) => this.normalizeInference(i))\n      : undefined;\n\n    // Resolve modal logic type and domain\n    const modalLogicType = this.resolveLogicSystem(inputAny.modalLogicType);\n    const modalDomain = this.resolveModalDomain(inputAny.modalDomain);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.MODAL,\n\n      // Core modal fields\n      thoughtType,\n      worlds,\n      actualWorld,\n      propositions,\n      accessibilityRelations,\n      modalLogicType,\n      modalDomain,\n      inferences,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate modal-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate logic system\n    if (inputAny.modalLogicType && !VALID_LOGIC_SYSTEMS.includes(inputAny.modalLogicType)) {\n      warnings.push(\n        createValidationWarning(\n          'modalLogicType',\n          `Unknown logic system: ${inputAny.modalLogicType}`,\n          `Valid systems: ${VALID_LOGIC_SYSTEMS.join(', ')}`\n        )\n      );\n    }\n\n    // Validate modal domain\n    if (inputAny.modalDomain && !VALID_MODAL_DOMAINS.includes(inputAny.modalDomain)) {\n      warnings.push(\n        createValidationWarning(\n          'modalDomain',\n          `Unknown modal domain: ${inputAny.modalDomain}`,\n          `Valid domains: ${VALID_MODAL_DOMAINS.join(', ')}`\n        )\n      );\n    }\n\n    // Check for worlds in proof types\n    if (\n      (inputAny.thoughtType === 'necessity_proof' ||\n        inputAny.thoughtType === 'possibility_proof') &&\n      (!inputAny.worlds || inputAny.worlds.length === 0)\n    ) {\n      warnings.push(\n        createValidationWarning(\n          'worlds',\n          'Modal proof without defined worlds',\n          'Define possible worlds for modal evaluation'\n        )\n      );\n    }\n\n    // Validate accessibility relation consistency\n    if (inputAny.accessibilityRelations) {\n      const worldIds = new Set((inputAny.worlds || []).map((w: any) => w.id));\n      for (const rel of inputAny.accessibilityRelations) {\n        if (rel.fromWorld && !worldIds.has(rel.fromWorld)) {\n          warnings.push(\n            createValidationWarning(\n              'accessibilityRelations',\n              `Relation references unknown world: ${rel.fromWorld}`,\n              'Ensure all relation endpoints reference defined worlds'\n            )\n          );\n        }\n        if (rel.toWorld && !worldIds.has(rel.toWorld)) {\n          warnings.push(\n            createValidationWarning(\n              'accessibilityRelations',\n              `Relation references unknown world: ${rel.toWorld}`,\n              'Ensure all relation endpoints reference defined worlds'\n            )\n          );\n        }\n      }\n    }\n\n    // Validate S5 requires all worlds to be mutually accessible\n    if (inputAny.modalLogicType === 'S5' && inputAny.worlds && inputAny.worlds.length > 1) {\n      if (!inputAny.accessibilityRelations || inputAny.accessibilityRelations.length === 0) {\n        warnings.push(\n          createValidationWarning(\n            'accessibilityRelations',\n            'S5 logic requires universal accessibility',\n            'All worlds should be mutually accessible in S5'\n          )\n        );\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get modal-specific enhancements\n   */\n  getEnhancements(thought: Thought): ModeEnhancements {\n    const modalThought = thought as ModalThought;\n    const worlds = modalThought.worlds || [];\n    const propositions = modalThought.propositions || [];\n    const accessibilityRelations = modalThought.accessibilityRelations || [];\n\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.FORMALLOGIC, ThinkingMode.COUNTERFACTUAL, ThinkingMode.DEDUCTIVE],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        worldCount: worlds.length,\n        propositionCount: propositions.length,\n        relationCount: accessibilityRelations.length,\n        inferenceCount: modalThought.inferences?.length || 0,\n      },\n      mentalModels: [\n        'Possible Worlds Semantics',\n        'Kripke Frames',\n        'Necessity vs Possibility',\n        'Accessibility Relations',\n        'Modal Validity',\n      ],\n    };\n\n    // Logic system info\n    const logicType = modalThought.modalLogicType || modalThought.logicSystem || 'K';\n    enhancements.suggestions!.push(\n      `Logic system: ${logicType} (${modalThought.modalDomain})`\n    );\n\n    // Add logic system properties\n    const systemProperties = this.getLogicSystemProperties(logicType);\n    if (systemProperties.length > 0) {\n      enhancements.suggestions!.push(`Properties: ${systemProperties.join(', ')}`);\n    }\n\n    // Thought type-specific guidance\n    switch (modalThought.thoughtType) {\n      case 'world_definition':\n        enhancements.guidingQuestions!.push(\n          'What propositions are true in each world?',\n          'Which world represents the actual state of affairs?',\n          'How are the worlds related (accessibility)?'\n        );\n        enhancements.suggestions!.push(`Defined ${worlds.length} possible world(s)`);\n        break;\n\n      case 'proposition_analysis':\n        enhancements.guidingQuestions!.push(\n          'Is the proposition necessarily true (true in all accessible worlds)?',\n          'Is the proposition possibly true (true in some accessible world)?',\n          'Is the proposition contingent (could be true or false)?'\n        );\n        const necessaryCount = propositions.filter(\n          (p) => p.operator === 'necessary'\n        ).length;\n        const possibleCount = propositions.filter(\n          (p) => p.operator === 'possible'\n        ).length;\n        enhancements.suggestions!.push(\n          `Propositions: ${necessaryCount} necessary, ${possibleCount} possible`\n        );\n        break;\n\n      case 'accessibility_analysis':\n        enhancements.guidingQuestions!.push(\n          'Is the accessibility relation reflexive (every world accesses itself)?',\n          'Is the relation symmetric (if w1 accesses w2, does w2 access w1)?',\n          'Is the relation transitive (if w1w2w3, does w1w3)?'\n        );\n        break;\n\n      case 'necessity_proof':\n        enhancements.guidingQuestions!.push(\n          'Is the proposition true in ALL accessible worlds?',\n          'Are there any counterexample worlds?',\n          'Does necessity hold under the current logic system?'\n        );\n        break;\n\n      case 'possibility_proof':\n        enhancements.guidingQuestions!.push(\n          'Is the proposition true in AT LEAST ONE accessible world?',\n          'Can we construct a world where it holds?',\n          'What makes this possibility genuine vs. merely apparent?'\n        );\n        break;\n\n      case 'modal_inference':\n        enhancements.guidingQuestions!.push(\n          'Is the inference valid in the current modal logic?',\n          'Does the rule preserve truth across all frames?',\n          'Are there countermodels to this inference?'\n        );\n        if (modalThought.inferences) {\n          const validCount = modalThought.inferences.filter((i) => i.valid).length;\n          enhancements.suggestions!.push(\n            `Inferences: ${validCount}/${modalThought.inferences.length} valid`\n          );\n        }\n        break;\n\n      case 'countermodel':\n        enhancements.guidingQuestions!.push(\n          'What world/truth-value assignment falsifies the claim?',\n          'Are the accessibility relations satisfied?',\n          'Is this a minimal countermodel?'\n        );\n        break;\n    }\n\n    // Domain-specific guidance\n    switch (modalThought.modalDomain) {\n      case 'epistemic':\n        enhancements.suggestions!.push('Epistemic: p = agent knows p, p = p is compatible with knowledge');\n        enhancements.mentalModels!.push('Knowledge States', 'Belief Revision');\n        break;\n      case 'deontic':\n        enhancements.suggestions!.push('Deontic: p = p is obligatory, p = p is permissible');\n        enhancements.mentalModels!.push('Moral Obligations', 'Permission Logic');\n        break;\n      case 'temporal':\n        enhancements.suggestions!.push('Temporal: p = always p, p = eventually p');\n        enhancements.mentalModels!.push('Temporal Ordering', 'Future Possibilities');\n        break;\n      case 'alethic':\n        enhancements.suggestions!.push('Alethic: p = necessarily p, p = possibly p');\n        break;\n    }\n\n    // Check for common issues\n    if (worlds.length === 1) {\n      enhancements.warnings!.push(\n        'Only one world defined - modal distinctions may collapse'\n      );\n    }\n\n    // Validate accessibility matches logic system\n    if (logicType === 'S5' && accessibilityRelations.length > 0) {\n      const hasUniversalAccess = this.checkUniversalAccessibility(modalThought);\n      if (!hasUniversalAccess) {\n        enhancements.warnings!.push(\n          'S5 requires universal accessibility - not all worlds are connected'\n        );\n      }\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as ModalThoughtType);\n  }\n\n  /**\n   * Resolve thought type from input\n   */\n  private resolveThoughtType(inputType: string | undefined): ModalThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as ModalThoughtType)) {\n      return inputType as ModalThoughtType;\n    }\n    return 'proposition_analysis';\n  }\n\n  /**\n   * Resolve logic system\n   */\n  private resolveLogicSystem(system: string | undefined): ModalThought['modalLogicType'] {\n    if (system && VALID_LOGIC_SYSTEMS.includes(system as any)) {\n      return system as ModalThought['modalLogicType'];\n    }\n    return 'K';\n  }\n\n  /**\n   * Resolve modal domain\n   */\n  private resolveModalDomain(domain: string | undefined): ModalThought['modalDomain'] {\n    if (domain && VALID_MODAL_DOMAINS.includes(domain as any)) {\n      return domain as ModalThought['modalDomain'];\n    }\n    return 'alethic';\n  }\n\n  /**\n   * Get properties of a logic system\n   */\n  private getLogicSystemProperties(system: string): string[] {\n    const properties: Record<string, string[]> = {\n      K: ['basic modal logic'],\n      T: ['reflexive'],\n      S4: ['reflexive', 'transitive'],\n      S5: ['reflexive', 'symmetric', 'transitive'],\n      D: ['serial'],\n      B: ['reflexive', 'symmetric'],\n      custom: ['user-defined'],\n    };\n    return properties[system] || [];\n  }\n\n  /**\n   * Create a default world\n   */\n  private createDefaultWorld(): PossibleWorld {\n    return {\n      id: randomUUID(),\n      name: 'w0',\n      description: 'Actual world',\n      propositions: {},\n      isActual: true,\n      accessibility: [],\n    };\n  }\n\n  /**\n   * Normalize world\n   */\n  private normalizeWorld(world: any): PossibleWorld {\n    return {\n      id: world.id || randomUUID(),\n      name: world.name || '',\n      description: world.description || '',\n      propositions: world.propositions || {},\n      isActual: world.isActual ?? false,\n      accessibility: world.accessibility || [],\n    };\n  }\n\n  /**\n   * Normalize proposition\n   */\n  private normalizeProposition(prop: any, worlds: PossibleWorld[]): ModalProposition {\n    // Determine which worlds the proposition is true/false in\n    const worldsTrue: string[] = [];\n    const worldsFalse: string[] = [];\n\n    for (const world of worlds) {\n      if (world.propositions?.[prop.content] === true) {\n        worldsTrue.push(world.id);\n      } else if (world.propositions?.[prop.content] === false) {\n        worldsFalse.push(world.id);\n      }\n    }\n\n    return {\n      id: prop.id || randomUUID(),\n      content: prop.content || '',\n      operator: prop.operator || 'contingent',\n      truthValue: prop.truthValue,\n      worldsTrue: prop.worldsTrue || worldsTrue,\n      worldsFalse: prop.worldsFalse || worldsFalse,\n    };\n  }\n\n  /**\n   * Normalize accessibility relation\n   */\n  private normalizeAccessibilityRelation(rel: any, defaultModalType: string): AccessibilityRelation {\n    return {\n      id: rel.id || randomUUID(),\n      fromWorld: rel.fromWorld || '',\n      toWorld: rel.toWorld || '',\n      type: rel.type || 'reflexive',\n      modalType: rel.modalType || defaultModalType,\n    };\n  }\n\n  /**\n   * Normalize inference\n   */\n  private normalizeInference(inf: any): ModalInference {\n    return {\n      id: inf.id || randomUUID(),\n      premises: inf.premises || [],\n      conclusion: inf.conclusion || '',\n      rule: inf.rule || '',\n      valid: inf.valid ?? false,\n      justification: inf.justification || '',\n    };\n  }\n\n  /**\n   * Check if all worlds are mutually accessible (for S5)\n   */\n  private checkUniversalAccessibility(thought: ModalThought): boolean {\n    const worlds = thought.worlds || [];\n    const relations = thought.accessibilityRelations || [];\n\n    const worldIds = new Set(worlds.map((w) => w.id));\n    const accessMap = new Map<string, Set<string>>();\n\n    // Initialize access map with self-loops (reflexive)\n    for (const id of worldIds) {\n      accessMap.set(id, new Set([id]));\n    }\n\n    // Add explicit relations\n    for (const rel of relations) {\n      const fromWorld = rel.fromWorld || '';\n      const toWorld = rel.toWorld || '';\n      if (fromWorld && accessMap.has(fromWorld)) {\n        accessMap.get(fromWorld)!.add(toWorld);\n      }\n      // For S5, make symmetric\n      if (toWorld && accessMap.has(toWorld)) {\n        accessMap.get(toWorld)!.add(fromWorld);\n      }\n    }\n\n    // Check if all pairs are connected\n    for (const w1 of worldIds) {\n      for (const w2 of worldIds) {\n        if (!accessMap.get(w1)?.has(w2)) {\n          return false;\n        }\n      }\n    }\n\n    return true;\n  }\n}\n","/**\n * StochasticHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Stochastic reasoning mode with:\n * - Markov chain analysis\n * - Random process modeling\n * - Probabilistic state transitions\n * - Monte Carlo methods support\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, Thought } from '../../types/core.js';\nimport type { StochasticThought } from '../../types/modes/stochastic.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n// Re-export for backwards compatibility\nexport type { StochasticThought };\n\n/**\n * State in a stochastic process\n */\ninterface StochasticState {\n  id: string;\n  name: string;\n  description?: string;\n  probability?: number; // Current probability of being in this state\n  isAbsorbing?: boolean;\n  isTransient?: boolean;\n}\n\n/**\n * Transition between states\n */\ninterface StateTransition {\n  id: string;\n  fromState: string;\n  toState: string;\n  probability: number;\n  condition?: string;\n}\n\n\n/**\n * Random variable definition\n */\ninterface RandomVariable {\n  id: string;\n  name: string;\n  distribution: string; // e.g., 'uniform', 'normal', 'exponential', 'poisson'\n  parameters: Record<string, number>;\n  expectedValue?: number;\n  variance?: number;\n}\n\n/**\n * Simulation result\n */\ninterface SimulationResult {\n  id: string;\n  iterations: number;\n  mean: number;\n  variance: number;\n  confidenceInterval?: [number, number];\n  samples?: number[];\n}\n\n/**\n * Internal Markov chain representation for handler processing\n */\ninterface HandlerMarkovChain {\n  id: string;\n  name: string;\n  states: StochasticState[];\n  transitions: StateTransition[];\n  initialDistribution: Record<string, number>;\n  isErgodic?: boolean;\n  isIrreducible?: boolean;\n  period?: number;\n}\n\n/**\n * Valid thought types for stochastic mode\n */\nconst VALID_THOUGHT_TYPES = [\n  'process_definition',\n  'transition_analysis',\n  'steady_state_analysis',\n  'random_variable_definition',\n  'monte_carlo_simulation',\n  'convergence_analysis',\n  'hitting_time_analysis',\n] as const;\n\ntype StochasticThoughtType = (typeof VALID_THOUGHT_TYPES)[number];\n\n/**\n * Valid process types\n */\nconst VALID_PROCESS_TYPES = [\n  'discrete_time',\n  'continuous_time',\n  'random_walk',\n  'birth_death',\n  'queueing',\n] as const;\n\ntype ProcessType = (typeof VALID_PROCESS_TYPES)[number];\n\n/**\n * StochasticHandler - Specialized handler for stochastic reasoning\n *\n * Provides:\n * - Markov chain construction and analysis\n * - Random process modeling\n * - Monte Carlo simulation support\n * - Steady state and convergence analysis\n */\nexport class StochasticHandler implements ModeHandler {\n  readonly mode = ThinkingMode.STOCHASTIC;\n  readonly modeName = 'Stochastic Reasoning';\n  readonly description =\n    'Markov chains, random processes, probabilistic state transitions, and Monte Carlo methods';\n\n  /**\n   * Supported thought types for stochastic mode\n   */\n  private readonly supportedThoughtTypes = [...VALID_THOUGHT_TYPES];\n\n  /**\n   * Create a stochastic thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): StochasticThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process Markov chain\n    const markovChain = inputAny.markovChain\n      ? this.normalizeMarkovChain(inputAny.markovChain)\n      : undefined;\n\n    // Process random variables\n    const randomVariables = inputAny.randomVariables\n      ? inputAny.randomVariables.map((rv: any) => this.normalizeRandomVariable(rv))\n      : undefined;\n\n    // Process simulation results\n    const simulations = inputAny.simulations || inputAny.simulationResults\n      ? (inputAny.simulations || inputAny.simulationResults).map((sr: any) => this.normalizeSimulationResult(sr))\n      : undefined;\n\n    // Resolve process type\n    const processType = this.resolveProcessType(inputAny.processType);\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.STOCHASTIC,\n\n      // Core stochastic fields\n      thoughtType,\n      markovChain: markovChain as any, // Handler's MarkovChain has different shape than types file\n      processType,\n      randomVariables,\n      currentState: inputAny.currentState,\n      stateHistory: inputAny.stateHistory,\n      stepCount: inputAny.stepCount ?? 0,\n      simulations,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate stochastic-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate process type\n    if (inputAny.processType && !VALID_PROCESS_TYPES.includes(inputAny.processType)) {\n      warnings.push(\n        createValidationWarning(\n          'processType',\n          `Unknown process type: ${inputAny.processType}`,\n          `Valid types: ${VALID_PROCESS_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate Markov chain transitions sum to 1\n    if (inputAny.markovChain) {\n      const mc = inputAny.markovChain;\n      if (mc.states && mc.transitions) {\n        const transitionSums = new Map<string, number>();\n\n        for (const t of mc.transitions) {\n          const current = transitionSums.get(t.fromState) || 0;\n          transitionSums.set(t.fromState, current + (t.probability || 0));\n        }\n\n        for (const [state, sum] of transitionSums) {\n          if (Math.abs(sum - 1) > 0.01) {\n            warnings.push(\n              createValidationWarning(\n                `markovChain.transitions[${state}]`,\n                `Transition probabilities from state \"${state}\" sum to ${sum.toFixed(3)}, should be 1.0`,\n                'Ensure outgoing transition probabilities sum to 1'\n              )\n            );\n          }\n        }\n      }\n\n      // Validate initial distribution sums to 1\n      if (mc.initialDistribution) {\n        const sum = Object.values(mc.initialDistribution as Record<string, number>).reduce(\n          (a: number, b: number) => a + b,\n          0\n        );\n        if (Math.abs(sum - 1) > 0.01) {\n          warnings.push(\n            createValidationWarning(\n              'markovChain.initialDistribution',\n              `Initial distribution sums to ${sum.toFixed(3)}, should be 1.0`,\n              'Normalize initial state probabilities'\n            )\n          );\n        }\n      }\n    }\n\n    // Validate random variable parameters\n    if (inputAny.randomVariables) {\n      for (let i = 0; i < inputAny.randomVariables.length; i++) {\n        const rv = inputAny.randomVariables[i];\n        const issues = this.validateDistributionParameters(rv.distribution, rv.parameters);\n        for (const issue of issues) {\n          warnings.push(\n            createValidationWarning(`randomVariables[${i}]`, issue, 'Check distribution parameters')\n          );\n        }\n      }\n    }\n\n    // Validate simulation results\n    if (inputAny.simulationResults) {\n      for (let i = 0; i < inputAny.simulationResults.length; i++) {\n        const sr = inputAny.simulationResults[i];\n        if (sr.iterations !== undefined && sr.iterations < 100) {\n          warnings.push(\n            createValidationWarning(\n              `simulationResults[${i}].iterations`,\n              `Low iteration count (${sr.iterations})`,\n              'Use at least 1000 iterations for reliable Monte Carlo estimates'\n            )\n          );\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get stochastic-specific enhancements\n   */\n  getEnhancements(thought: Thought): ModeEnhancements {\n    const stochThought = thought as StochasticThought;\n    // Access markov chain from any input structure\n    const thoughtAny = thought as any;\n    const markovChain = thoughtAny.markovChain as HandlerMarkovChain | undefined;\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.BAYESIAN, ThinkingMode.OPTIMIZATION, ThinkingMode.TEMPORAL],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        stateCount: markovChain?.states.length || 0,\n        transitionCount: markovChain?.transitions.length || 0,\n        randomVariableCount: thoughtAny.randomVariables?.length || 0,\n        stepCount: stochThought.stepCount,\n      },\n      mentalModels: [\n        'Markov Property',\n        'Law of Large Numbers',\n        'Central Limit Theorem',\n        'Ergodic Theory',\n        'Queuing Theory',\n      ],\n    };\n\n    // Process type info\n    enhancements.suggestions!.push(`Process type: ${stochThought.processType.replace(/_/g, ' ')}`);\n\n    // Thought type-specific guidance\n    switch (stochThought.thoughtType) {\n      case 'process_definition':\n        enhancements.guidingQuestions!.push(\n          'What are the states of the process?',\n          'Are transitions time-homogeneous?',\n          'Does the process satisfy the Markov property?'\n        );\n        if (markovChain) {\n          enhancements.suggestions!.push(\n            `States: ${markovChain.states.length}, Transitions: ${markovChain.transitions.length}`\n          );\n        }\n        break;\n\n      case 'transition_analysis':\n        enhancements.guidingQuestions!.push(\n          'What is the probability of transitioning from state A to state B?',\n          'Are there absorbing states?',\n          'What is the expected number of steps to reach a target state?'\n        );\n        if (markovChain) {\n          const absorbingCount = markovChain.states.filter((s) => s.isAbsorbing).length;\n          if (absorbingCount > 0) {\n            enhancements.suggestions!.push(`Absorbing states: ${absorbingCount}`);\n          }\n        }\n        break;\n\n      case 'steady_state_analysis':\n        enhancements.guidingQuestions!.push(\n          'Does a stationary distribution exist?',\n          'Is the chain irreducible and aperiodic?',\n          'What are the long-run probabilities?'\n        );\n        if (markovChain) {\n          if (markovChain.isErgodic) {\n            enhancements.suggestions!.push('Chain is ergodic - unique stationary distribution exists');\n          } else if (markovChain.isIrreducible === false) {\n            enhancements.warnings!.push('Chain is reducible - multiple stationary distributions possible');\n          }\n          if (markovChain.period && markovChain.period > 1) {\n            enhancements.warnings!.push(\n              `Chain is periodic (period=${markovChain.period}) - no stationary distribution`\n            );\n          }\n        }\n        break;\n\n      case 'random_variable_definition':\n        enhancements.guidingQuestions!.push(\n          'What is the expected value of the random variable?',\n          'What is the variance?',\n          'Are there any constraints on the variable?'\n        );\n        if (thoughtAny.randomVariables) {\n          for (const rv of thoughtAny.randomVariables) {\n            if (rv.expectedValue !== undefined) {\n              enhancements.suggestions!.push(\n                `${rv.name}: E[X] = ${rv.expectedValue.toFixed(4)}, Var[X] = ${rv.variance?.toFixed(4) || 'unknown'}`\n              );\n            }\n          }\n        }\n        break;\n\n      case 'monte_carlo_simulation':\n        enhancements.guidingQuestions!.push(\n          'How many iterations are sufficient?',\n          'What is the confidence interval?',\n          'Has the simulation converged?'\n        );\n        if (thoughtAny.simulationResults) {\n          for (const sr of thoughtAny.simulationResults) {\n            enhancements.suggestions!.push(\n              `Simulation (n=${sr.iterations}): mean=${sr.mean.toFixed(4)}, var=${sr.variance.toFixed(4)}`\n            );\n            if (sr.confidenceInterval) {\n              enhancements.suggestions!.push(\n                `95% CI: [${sr.confidenceInterval[0].toFixed(4)}, ${sr.confidenceInterval[1].toFixed(4)}]`\n              );\n            }\n          }\n        }\n        break;\n\n      case 'convergence_analysis':\n        enhancements.guidingQuestions!.push(\n          'At what rate does the process converge?',\n          'Is convergence guaranteed?',\n          'What is the mixing time?'\n        );\n        if (thoughtAny.convergenceRate !== undefined) {\n          enhancements.suggestions!.push(`Convergence rate: ${thoughtAny.convergenceRate.toFixed(4)}`);\n        }\n        break;\n\n      case 'hitting_time_analysis':\n        enhancements.guidingQuestions!.push(\n          'What is the expected time to reach a target state?',\n          'What is the probability of reaching the target before returning to start?',\n          'Are there multiple paths to consider?'\n        );\n        break;\n    }\n\n    // Process-specific suggestions\n    switch (stochThought.processType) {\n      case 'queueing':\n        enhancements.mentalModels!.push(\"Little's Law\", 'M/M/1 Queue', 'Birth-Death Process');\n        enhancements.suggestions!.push('Consider arrival rate  and service rate ');\n        break;\n      case 'random_walk':\n        enhancements.mentalModels!.push('Gambler\\'s Ruin', 'Recurrence', 'Transience');\n        break;\n      case 'birth_death':\n        enhancements.mentalModels!.push('Population Dynamics', 'Balance Equations');\n        break;\n    }\n\n    // Warn about low step counts\n    if (stochThought.stepCount < 10 && stochThought.thoughtType === 'convergence_analysis') {\n      enhancements.warnings!.push('Low step count - convergence analysis may be unreliable');\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as StochasticThoughtType);\n  }\n\n  /**\n   * Resolve thought type from input\n   */\n  private resolveThoughtType(inputType: string | undefined): StochasticThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as StochasticThoughtType)) {\n      return inputType as StochasticThoughtType;\n    }\n    return 'process_definition';\n  }\n\n  /**\n   * Resolve process type from input\n   */\n  private resolveProcessType(inputType: string | undefined): ProcessType {\n    if (inputType && VALID_PROCESS_TYPES.includes(inputType as ProcessType)) {\n      return inputType as ProcessType;\n    }\n    return 'discrete_time';\n  }\n\n  /**\n   * Normalize Markov chain\n   */\n  private normalizeMarkovChain(mc: any): HandlerMarkovChain {\n    const states = (mc.states || []).map((s: any) => this.normalizeState(s));\n    const transitions = (mc.transitions || []).map((t: any) => this.normalizeTransition(t));\n\n    // Determine chain properties\n    const isIrreducible = mc.isIrreducible ?? this.checkIrreducibility(states, transitions);\n    const period = mc.period ?? 1;\n    const isErgodic = mc.isErgodic ?? (isIrreducible && period === 1);\n\n    return {\n      id: mc.id || randomUUID(),\n      name: mc.name || '',\n      states,\n      transitions,\n      initialDistribution: mc.initialDistribution || {},\n      isErgodic,\n      isIrreducible,\n      period,\n    };\n  }\n\n  /**\n   * Normalize state\n   */\n  private normalizeState(state: any): StochasticState {\n    return {\n      id: state.id || randomUUID(),\n      name: state.name || '',\n      description: state.description,\n      probability: state.probability,\n      isAbsorbing: state.isAbsorbing ?? false,\n      isTransient: state.isTransient,\n    };\n  }\n\n  /**\n   * Normalize transition\n   */\n  private normalizeTransition(transition: any): StateTransition {\n    return {\n      id: transition.id || randomUUID(),\n      fromState: transition.fromState || '',\n      toState: transition.toState || '',\n      probability: Math.max(0, Math.min(1, transition.probability ?? 0)),\n      condition: transition.condition,\n    };\n  }\n\n  /**\n   * Normalize random variable\n   */\n  private normalizeRandomVariable(rv: any): RandomVariable {\n    const normalized: RandomVariable = {\n      id: rv.id || randomUUID(),\n      name: rv.name || '',\n      distribution: rv.distribution || 'uniform',\n      parameters: rv.parameters || {},\n      expectedValue: rv.expectedValue,\n      variance: rv.variance,\n    };\n\n    // Calculate expected value and variance if not provided\n    if (normalized.expectedValue === undefined || normalized.variance === undefined) {\n      const stats = this.calculateDistributionStats(normalized.distribution, normalized.parameters);\n      if (normalized.expectedValue === undefined) normalized.expectedValue = stats.mean;\n      if (normalized.variance === undefined) normalized.variance = stats.variance;\n    }\n\n    return normalized;\n  }\n\n  /**\n   * Normalize simulation result\n   */\n  private normalizeSimulationResult(sr: any): SimulationResult {\n    return {\n      id: sr.id || randomUUID(),\n      iterations: sr.iterations || 0,\n      mean: sr.mean || 0,\n      variance: sr.variance || 0,\n      confidenceInterval: sr.confidenceInterval,\n      samples: sr.samples,\n    };\n  }\n\n  /**\n   * Check if chain is irreducible (simplified check)\n   */\n  private checkIrreducibility(states: StochasticState[], transitions: StateTransition[]): boolean {\n    if (states.length === 0) return true;\n    if (states.length === 1) return true;\n\n    // Build adjacency map\n    const adj = new Map<string, Set<string>>();\n    for (const s of states) {\n      adj.set(s.id, new Set());\n    }\n    for (const t of transitions) {\n      if (t.probability > 0 && adj.has(t.fromState)) {\n        adj.get(t.fromState)!.add(t.toState);\n      }\n    }\n\n    // Check if all states reachable from first state\n    const visited = new Set<string>();\n    const queue = [states[0].id];\n    visited.add(states[0].id);\n\n    while (queue.length > 0) {\n      const current = queue.shift()!;\n      for (const next of adj.get(current) || []) {\n        if (!visited.has(next)) {\n          visited.add(next);\n          queue.push(next);\n        }\n      }\n    }\n\n    return visited.size === states.length;\n  }\n\n  /**\n   * Validate distribution parameters\n   */\n  private validateDistributionParameters(distribution: string, params: Record<string, number>): string[] {\n    const issues: string[] = [];\n\n    switch (distribution) {\n      case 'normal':\n      case 'gaussian':\n        if (params.variance !== undefined && params.variance < 0) {\n          issues.push('Normal distribution variance must be non-negative');\n        }\n        break;\n      case 'exponential':\n        if (params.lambda !== undefined && params.lambda <= 0) {\n          issues.push('Exponential distribution lambda must be positive');\n        }\n        break;\n      case 'poisson':\n        if (params.lambda !== undefined && params.lambda < 0) {\n          issues.push('Poisson distribution lambda must be non-negative');\n        }\n        break;\n      case 'uniform':\n        if (params.a !== undefined && params.b !== undefined && params.a >= params.b) {\n          issues.push('Uniform distribution requires a < b');\n        }\n        break;\n      case 'binomial':\n        if (params.n !== undefined && params.n < 0) {\n          issues.push('Binomial n must be non-negative');\n        }\n        if (params.p !== undefined && (params.p < 0 || params.p > 1)) {\n          issues.push('Binomial p must be in [0, 1]');\n        }\n        break;\n    }\n\n    return issues;\n  }\n\n  /**\n   * Calculate distribution statistics\n   */\n  private calculateDistributionStats(\n    distribution: string,\n    params: Record<string, number>\n  ): { mean?: number; variance?: number } {\n    switch (distribution) {\n      case 'normal':\n      case 'gaussian':\n        return { mean: params.mu || params.mean || 0, variance: params.variance || params.sigma2 || 1 };\n      case 'exponential':\n        const lambda = params.lambda || params.rate || 1;\n        return { mean: 1 / lambda, variance: 1 / (lambda * lambda) };\n      case 'poisson':\n        const poissonLambda = params.lambda || 1;\n        return { mean: poissonLambda, variance: poissonLambda };\n      case 'uniform':\n        const a = params.a ?? params.min ?? 0;\n        const b = params.b ?? params.max ?? 1;\n        return { mean: (a + b) / 2, variance: ((b - a) ** 2) / 12 };\n      case 'binomial':\n        const n = params.n || 1;\n        const p = params.p || 0.5;\n        return { mean: n * p, variance: n * p * (1 - p) };\n      default:\n        return {};\n    }\n  }\n}\n","/**\n * ConstraintHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Constraint reasoning mode with:\n * - Constraint Satisfaction Problem (CSP) formulation\n * - Variable domain tracking\n * - Constraint propagation support\n * - Feasibility analysis\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, Thought } from '../../types/core.js';\nimport type {\n  ConstraintThought,\n  CSPVariable,\n  CSPConstraint,\n  Arc,\n} from '../../types/modes/constraint.js';\n\n/**\n * Assignment history entry (local type for handler)\n */\ninterface Assignment {\n  variableId: string;\n  value: string | number;\n  step: number;\n  backtracked: boolean;\n}\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ValidationWarning,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n// Re-export for backwards compatibility\nexport type { ConstraintThought };\n\n/**\n * Valid thought types for constraint mode\n */\nconst VALID_THOUGHT_TYPES = [\n  'problem_formulation',\n  'variable_definition',\n  'constraint_definition',\n  'domain_reduction',\n  'arc_consistency',\n  'propagation',\n  'solution_search',\n  'backtracking',\n  'feasibility_check',\n] as const;\n\ntype ConstraintThoughtType = (typeof VALID_THOUGHT_TYPES)[number];\n\n/**\n * Valid constraint types\n */\nconst VALID_CONSTRAINT_TYPES = ['unary', 'binary', 'n_ary', 'global'] as const;\n\n/**\n * Valid constraint priorities\n */\nconst VALID_PRIORITIES = ['required', 'soft', 'preference'] as const;\n\n/**\n * ConstraintHandler - Specialized handler for constraint reasoning\n *\n * Provides:\n * - CSP problem formulation\n * - Domain tracking and reduction\n * - Constraint propagation support\n * - Solution search with backtracking\n */\nexport class ConstraintHandler implements ModeHandler {\n  readonly mode = ThinkingMode.CONSTRAINT;\n  readonly modeName = 'Constraint Reasoning';\n  readonly description =\n    'Constraint satisfaction, domain reduction, propagation, and feasibility analysis';\n\n  /**\n   * Supported thought types for constraint mode\n   */\n  private readonly supportedThoughtTypes = [...VALID_THOUGHT_TYPES];\n\n  /**\n   * Create a constraint thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): ConstraintThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process variables\n    const variables = (inputAny.variables || []).map((v: any) => this.normalizeVariable(v));\n\n    // Process constraints\n    const constraints = (inputAny.constraints || inputAny.cspConstraints || []).map((c: any) =>\n      this.normalizeConstraint(c)\n    );\n\n    // Process arcs\n    const arcs = inputAny.arcs\n      ? inputAny.arcs.map((a: any) => this.normalizeArc(a))\n      : this.generateArcs(variables, constraints);\n\n    // Process assignments\n    const currentAssignments = inputAny.currentAssignments || {};\n    const assignmentHistory = (inputAny.assignmentHistory || []).map((a: any) =>\n      this.normalizeAssignment(a)\n    );\n\n    // Check arc consistency\n    const isArcConsistent = inputAny.isArcConsistent ?? this.checkArcConsistency(variables, constraints);\n\n    // Determine solution status\n    const solutionStatus = this.determineSolutionStatus(\n      inputAny.solutionStatus,\n      variables,\n      constraints,\n      currentAssignments\n    );\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.CONSTRAINT,\n\n      // Core constraint fields\n      thoughtType,\n      variables,\n      constraints,\n      currentAssignments,\n      assignmentHistory,\n      searchStep: inputAny.searchStep ?? assignmentHistory.length,\n      backtracks: inputAny.backtracks ?? assignmentHistory.filter((a: Assignment) => a.backtracked).length,\n      arcs,\n      isArcConsistent,\n      solutionStatus,\n      solutionCount: inputAny.solutionCount ?? 0,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate constraint-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ValidationWarning[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate variables have domains\n    if (inputAny.variables) {\n      for (let i = 0; i < inputAny.variables.length; i++) {\n        const v = inputAny.variables[i];\n        if (!v.domain || v.domain.length === 0) {\n          warnings.push(\n            createValidationWarning(\n              `variables[${i}].domain`,\n              `Variable \"${v.name || v.id}\" has empty domain`,\n              'Empty domains indicate infeasibility'\n            )\n          );\n        }\n      }\n    }\n\n    // Validate constraints reference valid variables\n    const varIds = new Set((inputAny.variables || []).map((v: any) => v.id || v.name));\n    const cspConstraints = inputAny.constraints || inputAny.cspConstraints || [];\n\n    for (let i = 0; i < cspConstraints.length; i++) {\n      const c = cspConstraints[i];\n      if (c.variables) {\n        for (const varRef of c.variables) {\n          if (!varIds.has(varRef)) {\n            warnings.push(\n              createValidationWarning(\n                `constraints[${i}].variables`,\n                `Constraint references unknown variable: ${varRef}`,\n                'Ensure all constraint variables are defined'\n              )\n            );\n          }\n        }\n      }\n\n      // Validate constraint type\n      if (c.type && !VALID_CONSTRAINT_TYPES.includes(c.type)) {\n        warnings.push(\n          createValidationWarning(\n            `constraints[${i}].type`,\n            `Unknown constraint type: ${c.type}`,\n            `Valid types: ${VALID_CONSTRAINT_TYPES.join(', ')}`\n          )\n        );\n      }\n\n      // Validate priority\n      if (c.priority && !VALID_PRIORITIES.includes(c.priority)) {\n        warnings.push(\n          createValidationWarning(\n            `constraints[${i}].priority`,\n            `Unknown priority: ${c.priority}`,\n            `Valid priorities: ${VALID_PRIORITIES.join(', ')}`\n          )\n        );\n      }\n\n      // Warn about missing expression\n      if (!c.expression) {\n        warnings.push(\n          createValidationWarning(\n            `constraints[${i}].expression`,\n            'Constraint lacks expression',\n            'Define the constraint condition'\n          )\n        );\n      }\n    }\n\n    // Check for conflicting assignments\n    if (inputAny.currentAssignments && inputAny.variables) {\n      for (const [varId, value] of Object.entries(inputAny.currentAssignments)) {\n        const variable = inputAny.variables.find((v: any) => (v.id || v.name) === varId);\n        if (variable && variable.domain && !variable.domain.includes(value)) {\n          warnings.push(\n            createValidationWarning(\n              `currentAssignments[${varId}]`,\n              `Assigned value ${value} not in domain`,\n              'Assignment violates domain constraint'\n            )\n          );\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get constraint-specific enhancements\n   */\n  getEnhancements(thought: Thought): ModeEnhancements {\n    const cspThought = thought as ConstraintThought;\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.OPTIMIZATION, ThinkingMode.ALGORITHMIC, ThinkingMode.FORMALLOGIC],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        variableCount: cspThought.variables.length,\n        constraintCount: cspThought.constraints.length,\n        assignedCount: Object.keys(cspThought.currentAssignments).length,\n        backtrackCount: cspThought.backtracks,\n        searchStep: cspThought.searchStep || 0,\n        solutionCount: cspThought.solutionCount || 0,\n      },\n      mentalModels: [\n        'Constraint Propagation',\n        'Arc Consistency',\n        'Backtracking Search',\n        'Domain Reduction',\n        'Conflict-Directed Backjumping',\n      ],\n    };\n\n    // Solution status\n    enhancements.suggestions!.push(`Status: ${cspThought.solutionStatus || 'unknown'}`);\n\n    // Arc consistency info\n    if (cspThought.isArcConsistent) {\n      enhancements.suggestions!.push('Problem is arc-consistent');\n    } else {\n      enhancements.warnings!.push('Problem is not arc-consistent - consider propagation');\n    }\n\n    // Thought type-specific guidance\n    switch (cspThought.thoughtType) {\n      case 'problem_formulation':\n        enhancements.guidingQuestions!.push(\n          'What are the decision variables?',\n          'What constraints must be satisfied?',\n          'Are there any global constraints?'\n        );\n        break;\n\n      case 'variable_definition':\n        enhancements.guidingQuestions!.push(\n          'What is the domain of each variable?',\n          'Are domains finite and discrete?',\n          'Can domains be reduced initially?'\n        );\n        const avgDomainSize =\n          cspThought.variables.length > 0\n            ? cspThought.variables.reduce((sum, v) => sum + v.domain.length, 0) / cspThought.variables.length\n            : 0;\n        enhancements.suggestions!.push(`Average domain size: ${avgDomainSize.toFixed(1)}`);\n        break;\n\n      case 'constraint_definition':\n        enhancements.guidingQuestions!.push(\n          'Are all constraints necessary?',\n          'Are there redundant constraints?',\n          'Can constraints be tightened?'\n        );\n        const requiredCount = cspThought.constraints.filter((c) => c.priority === 'required').length;\n        const softCount = cspThought.constraints.length - requiredCount;\n        enhancements.suggestions!.push(`Constraints: ${requiredCount} required, ${softCount} soft`);\n        break;\n\n      case 'domain_reduction':\n        enhancements.guidingQuestions!.push(\n          'Which values can be pruned?',\n          'Are there singleton domains?',\n          'Has propagation been exhausted?'\n        );\n        const reducedCount = cspThought.variables.filter((v) => v.domainReduced).length;\n        enhancements.suggestions!.push(`Variables with reduced domains: ${reducedCount}`);\n        break;\n\n      case 'arc_consistency':\n        enhancements.guidingQuestions!.push(\n          'Are all arcs consistent?',\n          'Which arcs need revision?',\n          'Has a fixpoint been reached?'\n        );\n        if (cspThought.arcs) {\n          enhancements.suggestions!.push(`Arcs: ${cspThought.arcs.length}`);\n        }\n        break;\n\n      case 'propagation':\n        enhancements.guidingQuestions!.push(\n          'What can be inferred from current assignments?',\n          'Are there forced assignments?',\n          'Can we detect early failure?'\n        );\n        break;\n\n      case 'solution_search':\n        enhancements.guidingQuestions!.push(\n          'Which variable should be assigned next?',\n          'What value should be tried first?',\n          'Is the current partial solution extensible?'\n        );\n        const progress = cspThought.variables.length > 0\n          ? (Object.keys(cspThought.currentAssignments).length / cspThought.variables.length) * 100\n          : 0;\n        enhancements.suggestions!.push(`Search progress: ${progress.toFixed(1)}%`);\n        break;\n\n      case 'backtracking':\n        enhancements.guidingQuestions!.push(\n          'Why did the current assignment fail?',\n          'What is the most recent decision point?',\n          'Can we learn from this failure (nogood)?'\n        );\n        enhancements.suggestions!.push(`Backtracks so far: ${cspThought.backtracks}`);\n        break;\n\n      case 'feasibility_check':\n        enhancements.guidingQuestions!.push(\n          'Is the problem satisfiable?',\n          'Are there inconsistent constraints?',\n          'What is the minimal unsatisfiable subset?'\n        );\n        break;\n    }\n\n    // Check for empty domains\n    const emptyDomainVars = cspThought.variables.filter((v) => v.domain.length === 0);\n    if (emptyDomainVars.length > 0) {\n      enhancements.warnings!.push(\n        `${emptyDomainVars.length} variable(s) have empty domains - problem is infeasible`\n      );\n    }\n\n    // Check for high backtrack rate\n    const searchStep = cspThought.searchStep || 0;\n    if (searchStep > 0 && cspThought.backtracks / searchStep > 0.5) {\n      enhancements.warnings!.push(\n        'High backtrack rate - consider better variable/value ordering'\n      );\n    }\n\n    // Suggest heuristics\n    if (cspThought.thoughtType === 'solution_search') {\n      enhancements.mentalModels!.push(\n        'MRV (Minimum Remaining Values)',\n        'Degree Heuristic',\n        'LCV (Least Constraining Value)'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as ConstraintThoughtType);\n  }\n\n  /**\n   * Resolve thought type from input\n   */\n  private resolveThoughtType(inputType: string | undefined): ConstraintThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as ConstraintThoughtType)) {\n      return inputType as ConstraintThoughtType;\n    }\n    return 'problem_formulation';\n  }\n\n  /**\n   * Normalize variable\n   */\n  private normalizeVariable(variable: any): CSPVariable {\n    return {\n      id: variable.id || randomUUID(),\n      name: variable.name || '',\n      domain: variable.domain || [],\n      currentValue: variable.currentValue,\n      domainReduced: variable.domainReduced ?? false,\n      assignedAt: variable.assignedAt,\n    };\n  }\n\n  /**\n   * Normalize constraint\n   */\n  private normalizeConstraint(constraint: any): CSPConstraint {\n    // Determine constraint type from arity if not specified\n    let type = constraint.type;\n    if (!type && constraint.variables) {\n      const arity = constraint.variables.length;\n      if (arity === 1) type = 'unary';\n      else if (arity === 2) type = 'binary';\n      else type = 'n_ary';\n    }\n\n    return {\n      id: constraint.id || randomUUID(),\n      name: constraint.name || '',\n      type: VALID_CONSTRAINT_TYPES.includes(type) ? type : 'binary',\n      variables: constraint.variables || [],\n      expression: constraint.expression || '',\n      satisfied: constraint.satisfied,\n      priority: VALID_PRIORITIES.includes(constraint.priority) ? constraint.priority : 'required',\n      weight: constraint.weight,\n    };\n  }\n\n  /**\n   * Normalize arc\n   */\n  private normalizeArc(arc: any): Arc {\n    return {\n      from: arc.from || '',\n      to: arc.to || '',\n      constraintId: arc.constraintId || '',\n    };\n  }\n\n  /**\n   * Normalize assignment\n   */\n  private normalizeAssignment(assignment: any): Assignment {\n    return {\n      variableId: assignment.variableId || '',\n      value: assignment.value,\n      step: assignment.step || 0,\n      backtracked: assignment.backtracked ?? false,\n    };\n  }\n\n  /**\n   * Generate arcs from binary constraints\n   */\n  private generateArcs(_variables: CSPVariable[], constraints: CSPConstraint[]): Arc[] {\n    const arcs: Arc[] = [];\n\n    for (const constraint of constraints) {\n      if (constraint.type === 'binary' && constraint.variables.length === 2) {\n        const [v1, v2] = constraint.variables;\n        arcs.push({ from: v1, to: v2, constraintId: constraint.id });\n        arcs.push({ from: v2, to: v1, constraintId: constraint.id });\n      }\n    }\n\n    return arcs;\n  }\n\n  /**\n   * Check basic arc consistency (simplified)\n   */\n  private checkArcConsistency(variables: CSPVariable[], constraints: CSPConstraint[]): boolean {\n    // Simplified check - if any variable has empty domain, not consistent\n    for (const v of variables) {\n      if (v.domain.length === 0) {\n        return false;\n      }\n    }\n\n    // Check if any constraint is definitely unsatisfied\n    for (const c of constraints) {\n      if (c.satisfied === false && c.priority === 'required') {\n        return false;\n      }\n    }\n\n    return true;\n  }\n\n  /**\n   * Determine solution status\n   */\n  private determineSolutionStatus(\n    explicit: string | undefined,\n    variables: CSPVariable[],\n    constraints: CSPConstraint[],\n    assignments: Record<string, string | number>\n  ): ConstraintThought['solutionStatus'] {\n    // Use explicit status if provided and valid\n    const validStatuses = ['searching', 'found', 'infeasible', 'timeout'] as const;\n    if (explicit && validStatuses.includes(explicit as any)) {\n      return explicit as ConstraintThought['solutionStatus'];\n    }\n\n    // Check for empty domains (infeasible)\n    if (variables.some((v) => v.domain.length === 0)) {\n      return 'infeasible';\n    }\n\n    // Check if all variables are assigned\n    const allAssigned = variables.every((v) => assignments[v.id] !== undefined || assignments[v.name] !== undefined);\n    if (allAssigned && variables.length > 0) {\n      // Check if all required constraints are satisfied\n      const allSatisfied = constraints\n        .filter((c) => c.priority === 'required')\n        .every((c) => c.satisfied !== false);\n      if (allSatisfied) {\n        return 'found';\n      }\n    }\n\n    return 'searching';\n  }\n}\n","/**\n * OptimizationHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Optimization reasoning mode with:\n * - Problem formulation validation\n * - Constraint satisfaction checking\n * - Objective function analysis\n * - Solution quality assessment\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode } from '../../types/core.js';\nimport type {\n  OptimizationThought,\n  OptimizationProblem,\n  DecisionVariable,\n  Constraint,\n  Objective,\n  Solution,\n  SensitivityAnalysis,\n} from '../../types/modes/optimization.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Valid optimization thought types\n */\nconst VALID_THOUGHT_TYPES = [\n  'problem_formulation',\n  'variable_definition',\n  'constraint_identification',\n  'objective_setting',\n  'solution_search',\n  'sensitivity_analysis',\n] as const;\n\ntype OptimizationThoughtType = typeof VALID_THOUGHT_TYPES[number];\n\n/**\n * Valid problem types\n */\nconst VALID_PROBLEM_TYPES = [\n  'linear',\n  'nonlinear',\n  'integer',\n  'mixed_integer',\n  'constraint_satisfaction',\n  'multi_objective',\n] as const;\n\n/**\n * Valid solution types\n */\nconst VALID_SOLUTION_TYPES = ['optimal', 'feasible', 'infeasible', 'unbounded', 'approximate'] as const;\n\n/**\n * OptimizationHandler - Specialized handler for optimization reasoning\n *\n * Provides:\n * - Problem structure validation\n * - Constraint consistency checking\n * - Solution quality assessment\n * - Sensitivity analysis support\n */\nexport class OptimizationHandler implements ModeHandler {\n  readonly mode = ThinkingMode.OPTIMIZATION;\n  readonly modeName = 'Optimization Analysis';\n  readonly description = 'Constraint optimization, objective functions, and solution search';\n\n  /**\n   * Supported thought types for optimization mode\n   */\n  private readonly supportedThoughtTypes = [...VALID_THOUGHT_TYPES];\n\n  /**\n   * Create an optimization thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): OptimizationThought {\n    const inputAny = input as any;\n\n    // Resolve thought type\n    const thoughtType = this.resolveThoughtType(inputAny.thoughtType);\n\n    // Process problem\n    const problem = inputAny.problem\n      ? this.normalizeProblem(inputAny.problem)\n      : undefined;\n\n    // Process variables\n    const variables = inputAny.variables\n      ? inputAny.variables.map((v: any) => this.normalizeVariable(v))\n      : undefined;\n\n    // Process constraints\n    const optimizationConstraints = inputAny.optimizationConstraints || inputAny.constraints\n      ? (inputAny.optimizationConstraints || inputAny.constraints).map((c: any) => this.normalizeConstraint(c))\n      : undefined;\n\n    // Process objectives\n    const objectives = inputAny.objectives\n      ? inputAny.objectives.map((o: any) => this.normalizeObjective(o))\n      : undefined;\n\n    // Process solution\n    const solution = inputAny.solution\n      ? this.normalizeSolution(inputAny.solution, optimizationConstraints)\n      : undefined;\n\n    // Process analysis\n    const analysis = inputAny.analysis\n      ? this.normalizeAnalysis(inputAny.analysis)\n      : undefined;\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.OPTIMIZATION,\n\n      // Core optimization fields\n      thoughtType,\n      problem,\n      variables,\n      optimizationConstraints,\n      objectives,\n      solution,\n      analysis,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate optimization-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ReturnType<typeof createValidationWarning>[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Validate thought type\n    if (inputAny.thoughtType && !VALID_THOUGHT_TYPES.includes(inputAny.thoughtType)) {\n      warnings.push(\n        createValidationWarning(\n          'thoughtType',\n          `Unknown thought type: ${inputAny.thoughtType}`,\n          `Valid types: ${VALID_THOUGHT_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate problem type\n    if (inputAny.problem?.type && !VALID_PROBLEM_TYPES.includes(inputAny.problem.type)) {\n      warnings.push(\n        createValidationWarning(\n          'problem.type',\n          `Unknown problem type: ${inputAny.problem.type}`,\n          `Valid types: ${VALID_PROBLEM_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate solution type\n    if (inputAny.solution?.type && !VALID_SOLUTION_TYPES.includes(inputAny.solution.type)) {\n      warnings.push(\n        createValidationWarning(\n          'solution.type',\n          `Unknown solution type: ${inputAny.solution.type}`,\n          `Valid types: ${VALID_SOLUTION_TYPES.join(', ')}`\n        )\n      );\n    }\n\n    // Validate constraints\n    const constraints = inputAny.optimizationConstraints || inputAny.constraints;\n    if (constraints) {\n      for (let i = 0; i < constraints.length; i++) {\n        const c = constraints[i];\n        if (!c.formula) {\n          warnings.push(\n            createValidationWarning(\n              `constraints[${i}].formula`,\n              'Constraint lacks formula',\n              'Specify the mathematical constraint expression'\n            )\n          );\n        }\n      }\n    }\n\n    // Validate objectives\n    if (inputAny.objectives) {\n      let totalWeight = 0;\n      for (let i = 0; i < inputAny.objectives.length; i++) {\n        const o = inputAny.objectives[i];\n        if (!o.formula) {\n          warnings.push(\n            createValidationWarning(\n              `objectives[${i}].formula`,\n              'Objective lacks formula',\n              'Specify the objective function'\n            )\n          );\n        }\n        if (o.weight !== undefined) {\n          totalWeight += o.weight;\n        }\n      }\n\n      if (inputAny.objectives.length > 1 && Math.abs(totalWeight - 1) > 0.01 && totalWeight > 0) {\n        warnings.push(\n          createValidationWarning(\n            'objectives',\n            `Objective weights sum to ${totalWeight.toFixed(2)}, should be 1.0`,\n            'Normalize weights for multi-objective optimization'\n          )\n        );\n      }\n    }\n\n    // Suggest missing components\n    if (!inputAny.variables && inputAny.thoughtType !== 'problem_formulation') {\n      warnings.push(\n        createValidationWarning(\n          'variables',\n          'No decision variables defined',\n          'Define the variables to be optimized'\n        )\n      );\n    }\n\n    if (!inputAny.objectives && inputAny.thoughtType === 'solution_search') {\n      warnings.push(\n        createValidationWarning(\n          'objectives',\n          'Solution search without objectives',\n          'Define objective functions to optimize'\n        )\n      );\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get optimization-specific enhancements\n   */\n  getEnhancements(thought: OptimizationThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: [ThinkingMode.MATHEMATICS, ThinkingMode.ALGORITHMIC, ThinkingMode.ENGINEERING],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        variableCount: thought.variables?.length || 0,\n        constraintCount: thought.optimizationConstraints?.length || 0,\n        objectiveCount: thought.objectives?.length || 0,\n      },\n      mentalModels: [\n        'Linear Programming',\n        'Constraint Satisfaction',\n        'Pareto Optimality',\n        'Sensitivity Analysis',\n        'Lagrangian Relaxation',\n      ],\n    };\n\n    // Thought type-specific guidance\n    switch (thought.thoughtType) {\n      case 'problem_formulation':\n        enhancements.guidingQuestions!.push(\n          'What are we trying to optimize?',\n          'What constraints must be satisfied?',\n          'Is this a single or multi-objective problem?'\n        );\n        if (thought.problem) {\n          enhancements.suggestions!.push(\n            `Problem type: ${thought.problem.type}`,\n            `Approach: ${thought.problem.approach || 'not specified'}`\n          );\n          if (thought.problem.complexity) {\n            enhancements.metrics!.complexity = thought.problem.complexity;\n          }\n        }\n        break;\n\n      case 'variable_definition':\n        enhancements.guidingQuestions!.push(\n          'Are all decision variables identified?',\n          'What are the variable domains?',\n          'Are there any implicit variables?'\n        );\n        if (thought.variables) {\n          const types = thought.variables.map(v => v.type);\n          const uniqueTypes = [...new Set(types)];\n          enhancements.suggestions!.push(\n            `Variable types: ${uniqueTypes.join(', ')}`\n          );\n        }\n        break;\n\n      case 'constraint_identification':\n        enhancements.guidingQuestions!.push(\n          'Are all constraints identified?',\n          'Which constraints are hard vs soft?',\n          'Are the constraints consistent?'\n        );\n        if (thought.optimizationConstraints) {\n          const hard = thought.optimizationConstraints.filter(c => c.type === 'hard').length;\n          const soft = thought.optimizationConstraints.length - hard;\n          enhancements.suggestions!.push(\n            `Constraints: ${hard} hard, ${soft} soft`\n          );\n        }\n        break;\n\n      case 'objective_setting':\n        enhancements.guidingQuestions!.push(\n          'Is the objective function well-defined?',\n          'Are there conflicting objectives?',\n          'How will trade-offs be handled?'\n        );\n        if (thought.objectives) {\n          const maxCount = thought.objectives.filter(o => o.type === 'maximize').length;\n          const minCount = thought.objectives.length - maxCount;\n          enhancements.suggestions!.push(\n            `Objectives: ${maxCount} maximize, ${minCount} minimize`\n          );\n        }\n        break;\n\n      case 'solution_search':\n        enhancements.guidingQuestions!.push(\n          'Is the solution feasible?',\n          'Is the solution optimal or approximate?',\n          'What method was used to find it?'\n        );\n        if (thought.solution) {\n          enhancements.suggestions!.push(\n            `Solution type: ${thought.solution.type}`\n          );\n          enhancements.metrics!.solutionQuality = thought.solution.quality;\n\n          if (thought.solution.type === 'infeasible') {\n            enhancements.warnings!.push(\n              'Solution is infeasible - check constraint compatibility'\n            );\n          } else if (thought.solution.type === 'unbounded') {\n            enhancements.warnings!.push(\n              'Problem is unbounded - add missing constraints'\n            );\n          }\n\n          if (thought.solution.guarantees) {\n            enhancements.suggestions!.push(\n              `Guarantees: ${thought.solution.guarantees.join(', ')}`\n            );\n          }\n        }\n        break;\n\n      case 'sensitivity_analysis':\n        enhancements.guidingQuestions!.push(\n          'How robust is the solution?',\n          'Which constraints are binding?',\n          'What are the shadow prices?'\n        );\n        if (thought.analysis) {\n          enhancements.metrics!.robustness = thought.analysis.robustness;\n          enhancements.metrics!.criticalConstraintCount = thought.analysis.criticalConstraints.length;\n\n          if (thought.analysis.robustness < 0.5) {\n            enhancements.warnings!.push(\n              'Low solution robustness - small changes may significantly affect results'\n            );\n          }\n\n          if (thought.analysis.criticalConstraints.length > 0) {\n            enhancements.suggestions!.push(\n              `Critical constraints: ${thought.analysis.criticalConstraints.length}`\n            );\n          }\n        }\n        break;\n    }\n\n    // Problem-specific suggestions\n    if (thought.problem?.type === 'multi_objective' && !thought.objectives?.some(o => o.weight !== undefined)) {\n      enhancements.warnings!.push(\n        'Multi-objective problem without weights - consider Pareto analysis'\n      );\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   */\n  supportsThoughtType(thoughtType: string): boolean {\n    return this.supportedThoughtTypes.includes(thoughtType as OptimizationThoughtType);\n  }\n\n  /**\n   * Resolve thought type from input\n   */\n  private resolveThoughtType(inputType: string | undefined): OptimizationThoughtType {\n    if (inputType && VALID_THOUGHT_TYPES.includes(inputType as OptimizationThoughtType)) {\n      return inputType as OptimizationThoughtType;\n    }\n    return 'problem_formulation';\n  }\n\n  /**\n   * Normalize problem\n   */\n  private normalizeProblem(problem: any): OptimizationProblem {\n    return {\n      id: problem.id || randomUUID(),\n      name: problem.name || '',\n      description: problem.description || '',\n      type: VALID_PROBLEM_TYPES.includes(problem.type) ? problem.type : 'linear',\n      approach: problem.approach,\n      complexity: problem.complexity,\n    };\n  }\n\n  /**\n   * Normalize variable\n   */\n  private normalizeVariable(variable: any): DecisionVariable {\n    return {\n      id: variable.id || randomUUID(),\n      name: variable.name || '',\n      description: variable.description || '',\n      type: variable.type || 'continuous',\n      domain: variable.domain || { type: 'continuous', lowerBound: 0, upperBound: Infinity },\n      unit: variable.unit,\n      semantics: variable.semantics || '',\n    };\n  }\n\n  /**\n   * Normalize constraint\n   */\n  private normalizeConstraint(constraint: any): Constraint {\n    return {\n      id: constraint.id || randomUUID(),\n      name: constraint.name || '',\n      description: constraint.description || '',\n      type: constraint.type || 'hard',\n      formula: constraint.formula || '',\n      latex: constraint.latex,\n      variables: constraint.variables || [],\n      penalty: constraint.penalty,\n      rationale: constraint.rationale || '',\n      priority: constraint.priority,\n    };\n  }\n\n  /**\n   * Normalize objective\n   */\n  private normalizeObjective(objective: any): Objective {\n    return {\n      id: objective.id || randomUUID(),\n      name: objective.name || '',\n      description: objective.description || '',\n      type: objective.type || 'minimize',\n      formula: objective.formula || '',\n      latex: objective.latex,\n      variables: objective.variables || [],\n      weight: objective.weight,\n      units: objective.units,\n      idealValue: objective.idealValue,\n      acceptableRange: objective.acceptableRange,\n    };\n  }\n\n  /**\n   * Normalize solution\n   */\n  private normalizeSolution(solution: any, constraints?: Constraint[]): Solution {\n    // Calculate constraint satisfaction if not provided\n    let constraintSatisfaction = solution.constraintSatisfaction;\n    if (!constraintSatisfaction && constraints) {\n      constraintSatisfaction = constraints.map(c => ({\n        constraintId: c.id,\n        satisfied: true, // Default assumption\n        violation: undefined,\n      }));\n    }\n\n    return {\n      id: solution.id || randomUUID(),\n      type: VALID_SOLUTION_TYPES.includes(solution.type) ? solution.type : 'feasible',\n      variableValues: solution.variableValues || {},\n      objectiveValues: solution.objectiveValues || {},\n      constraintSatisfaction: constraintSatisfaction || [],\n      quality: Math.max(0, Math.min(1, solution.quality ?? 0.5)),\n      computationTime: solution.computationTime,\n      iterations: solution.iterations,\n      method: solution.method,\n      guarantees: solution.guarantees,\n    };\n  }\n\n  /**\n   * Normalize analysis\n   */\n  private normalizeAnalysis(analysis: any): SensitivityAnalysis {\n    return {\n      id: analysis.id || randomUUID(),\n      parameters: analysis.parameters || [],\n      robustness: Math.max(0, Math.min(1, analysis.robustness ?? 0.5)),\n      criticalConstraints: analysis.criticalConstraints || [],\n      shadowPrices: analysis.shadowPrices,\n      recommendations: analysis.recommendations || [],\n    };\n  }\n}\n","/**\n * CustomHandler - Phase 10 Sprint 3 (v8.4.0)\n *\n * Specialized handler for Custom reasoning mode with:\n * - User-defined reasoning structures\n * - Flexible field definitions\n * - Custom validation rules\n * - Extensible thought types\n */\n\nimport { randomUUID } from 'crypto';\nimport { ThinkingMode, BaseThought } from '../../types/core.js';\nimport type { ThinkingToolInput } from '../../tools/thinking.js';\nimport {\n  ModeHandler,\n  ValidationResult,\n  ModeEnhancements,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './ModeHandler.js';\n\n/**\n * Custom field definition\n */\ninterface CustomField {\n  name: string;\n  type: 'string' | 'number' | 'boolean' | 'array' | 'object';\n  value: unknown;\n  description?: string;\n  required?: boolean;\n}\n\n/**\n * Custom validation rule\n */\ninterface CustomValidationRule {\n  field: string;\n  rule: string;\n  message: string;\n}\n\n/**\n * Custom stage definition\n */\ninterface CustomStage {\n  id: string;\n  name: string;\n  description: string;\n  order: number;\n  completed: boolean;\n}\n\n/**\n * Custom thought extending base thought\n */\nexport interface CustomThought extends BaseThought {\n  mode: ThinkingMode.CUSTOM;\n  thoughtType: string;\n\n  // Custom configuration\n  customModeName: string;\n  customModeDescription?: string;\n\n  // User-defined fields\n  customFields: CustomField[];\n\n  // Custom stages\n  stages?: CustomStage[];\n  currentStage?: string;\n\n  // Custom validation\n  validationRules?: CustomValidationRule[];\n\n  // Extension data\n  metadata: Record<string, unknown>;\n\n  // Related modes for suggestions\n  basedOnModes?: ThinkingMode[];\n}\n\n/**\n * CustomHandler - Specialized handler for custom user-defined reasoning\n *\n * Provides:\n * - Flexible structure for user-defined reasoning patterns\n * - Custom field definitions and validation\n * - Stage-based progress tracking\n * - Metadata support for extensibility\n */\nexport class CustomHandler implements ModeHandler {\n  readonly mode = ThinkingMode.CUSTOM;\n  readonly modeName = 'Custom Reasoning';\n  readonly description =\n    'User-defined reasoning patterns with flexible structure and custom validation';\n\n  /**\n   * Create a custom thought from input\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): CustomThought {\n    const inputAny = input as any;\n\n    // Process custom fields\n    const customFields = inputAny.customFields\n      ? inputAny.customFields.map((f: any) => this.normalizeField(f))\n      : [];\n\n    // Process stages\n    const stages = inputAny.stages\n      ? inputAny.stages.map((s: any, idx: number) => this.normalizeStage(s, idx))\n      : undefined;\n\n    // Process validation rules\n    const validationRules = inputAny.validationRules\n      ? inputAny.validationRules.map((r: any) => this.normalizeValidationRule(r))\n      : undefined;\n\n    // Process based-on modes\n    const basedOnModes = inputAny.basedOnModes\n      ? inputAny.basedOnModes.map((m: string) => this.resolveMode(m))\n      : undefined;\n\n    return {\n      id: randomUUID(),\n      sessionId,\n      thoughtNumber: input.thoughtNumber,\n      totalThoughts: input.totalThoughts,\n      content: input.thought,\n      timestamp: new Date(),\n      nextThoughtNeeded: input.nextThoughtNeeded,\n      mode: ThinkingMode.CUSTOM,\n\n      // Custom configuration\n      thoughtType: inputAny.thoughtType || 'custom_analysis',\n      customModeName: inputAny.customModeName || 'Custom Mode',\n      customModeDescription: inputAny.customModeDescription,\n\n      // User-defined fields\n      customFields,\n\n      // Custom stages\n      stages,\n      currentStage: inputAny.currentStage,\n\n      // Custom validation\n      validationRules,\n\n      // Extension data\n      metadata: inputAny.metadata || {},\n\n      // Related modes\n      basedOnModes,\n\n      // Revision tracking\n      isRevision: input.isRevision,\n      revisesThought: input.revisesThought,\n    };\n  }\n\n  /**\n   * Validate custom-specific input\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const errors: { field: string; message: string; code: string }[] = [];\n    const warnings: ReturnType<typeof createValidationWarning>[] = [];\n    const inputAny = input as any;\n\n    // Basic validation\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    if (input.thoughtNumber > input.totalThoughts) {\n      return validationFailure([\n        createValidationError(\n          'thoughtNumber',\n          `Thought number (${input.thoughtNumber}) exceeds total thoughts (${input.totalThoughts})`,\n          'INVALID_THOUGHT_NUMBER'\n        ),\n      ]);\n    }\n\n    // Suggest providing custom mode name\n    if (!inputAny.customModeName) {\n      warnings.push(\n        createValidationWarning(\n          'customModeName',\n          'No custom mode name provided',\n          'Define a name for your custom reasoning mode'\n        )\n      );\n    }\n\n    // Validate custom fields\n    if (inputAny.customFields) {\n      for (let i = 0; i < inputAny.customFields.length; i++) {\n        const field = inputAny.customFields[i];\n\n        // Check required fields have values\n        if (field.required && (field.value === undefined || field.value === null)) {\n          warnings.push(\n            createValidationWarning(\n              `customFields[${i}]`,\n              `Required field \"${field.name}\" has no value`,\n              'Provide a value for required fields'\n            )\n          );\n        }\n\n        // Type validation\n        if (field.type && field.value !== undefined) {\n          const actualType = Array.isArray(field.value) ? 'array' : typeof field.value;\n          if (actualType !== field.type && field.type !== 'object') {\n            warnings.push(\n              createValidationWarning(\n                `customFields[${i}].value`,\n                `Field \"${field.name}\" type mismatch: expected ${field.type}, got ${actualType}`,\n                'Ensure field value matches declared type'\n              )\n            );\n          }\n        }\n      }\n    }\n\n    // Validate stages\n    if (inputAny.stages) {\n      const stageIds = new Set<string>();\n      for (let i = 0; i < inputAny.stages.length; i++) {\n        const stage = inputAny.stages[i];\n        if (stageIds.has(stage.id)) {\n          warnings.push(\n            createValidationWarning(\n              `stages[${i}].id`,\n              `Duplicate stage ID: ${stage.id}`,\n              'Each stage should have a unique ID'\n            )\n          );\n        }\n        stageIds.add(stage.id);\n      }\n\n      // Check current stage exists\n      if (inputAny.currentStage && !stageIds.has(inputAny.currentStage)) {\n        warnings.push(\n          createValidationWarning(\n            'currentStage',\n            `Current stage \"${inputAny.currentStage}\" not found in stages`,\n            'Set currentStage to a valid stage ID'\n          )\n        );\n      }\n    }\n\n    // Run custom validation rules\n    if (inputAny.validationRules && inputAny.customFields) {\n      const fieldMap = new Map<string, unknown>(\n        inputAny.customFields.map((f: any) => [f.name, f.value])\n      );\n\n      for (const rule of inputAny.validationRules) {\n        const value = fieldMap.get(rule.field);\n        if (!this.evaluateRule(rule.rule, value, fieldMap)) {\n          warnings.push(\n            createValidationWarning(\n              rule.field,\n              rule.message || `Validation failed: ${rule.rule}`,\n              'Check field value against rule'\n            )\n          );\n        }\n      }\n    }\n\n    if (errors.length > 0) {\n      return validationFailure(errors, warnings);\n    }\n\n    return validationSuccess(warnings);\n  }\n\n  /**\n   * Get custom-specific enhancements\n   */\n  getEnhancements(thought: CustomThought): ModeEnhancements {\n    const enhancements: ModeEnhancements = {\n      suggestions: [],\n      relatedModes: thought.basedOnModes || [ThinkingMode.SEQUENTIAL],\n      guidingQuestions: [],\n      warnings: [],\n      metrics: {\n        fieldCount: thought.customFields.length,\n        stageCount: thought.stages?.length || 0,\n        completedStages: thought.stages?.filter((s) => s.completed).length || 0,\n        metadataKeys: Object.keys(thought.metadata).length,\n      },\n      mentalModels: [\n        'Domain-Specific Reasoning',\n        'Custom Frameworks',\n        'Flexible Analysis',\n        'User-Defined Logic',\n      ],\n    };\n\n    // Mode info\n    enhancements.suggestions!.push(`Custom mode: ${thought.customModeName}`);\n    if (thought.customModeDescription) {\n      enhancements.suggestions!.push(`Description: ${thought.customModeDescription}`);\n    }\n\n    // Stage progress\n    if (thought.stages && thought.stages.length > 0) {\n      const completed = thought.stages.filter((s) => s.completed).length;\n      const total = thought.stages.length;\n      const progress = ((completed / total) * 100).toFixed(0);\n      enhancements.suggestions!.push(`Stage progress: ${completed}/${total} (${progress}%)`);\n\n      // Current stage info\n      if (thought.currentStage) {\n        const current = thought.stages.find((s) => s.id === thought.currentStage);\n        if (current) {\n          enhancements.suggestions!.push(`Current stage: ${current.name}`);\n          enhancements.guidingQuestions!.push(`What is needed to complete \"${current.name}\"?`);\n        }\n      }\n\n      // Next incomplete stage\n      const nextStage = thought.stages.find((s) => !s.completed);\n      if (nextStage && nextStage.id !== thought.currentStage) {\n        enhancements.suggestions!.push(`Next stage: ${nextStage.name}`);\n      }\n    }\n\n    // Custom field summary\n    if (thought.customFields.length > 0) {\n      const filledFields = thought.customFields.filter(\n        (f) => f.value !== undefined && f.value !== null\n      ).length;\n      enhancements.suggestions!.push(`Fields: ${filledFields}/${thought.customFields.length} populated`);\n\n      // Warn about required fields without values\n      const missingRequired = thought.customFields.filter(\n        (f) => f.required && (f.value === undefined || f.value === null)\n      );\n      if (missingRequired.length > 0) {\n        enhancements.warnings!.push(\n          `Missing required fields: ${missingRequired.map((f) => f.name).join(', ')}`\n        );\n      }\n    }\n\n    // Guiding questions for custom mode\n    enhancements.guidingQuestions!.push(\n      'Are all necessary fields defined?',\n      'Does the custom structure fit the problem?',\n      'Would predefined modes work better?'\n    );\n\n    // Based-on modes suggestions\n    if (thought.basedOnModes && thought.basedOnModes.length > 0) {\n      enhancements.suggestions!.push(\n        `Based on: ${thought.basedOnModes.join(', ')}`\n      );\n      enhancements.mentalModels!.push('Mode Composition');\n    }\n\n    // Metadata info\n    if (Object.keys(thought.metadata).length > 0) {\n      enhancements.metrics!.metadataKeys = Object.keys(thought.metadata).length;\n    }\n\n    return enhancements;\n  }\n\n  /**\n   * Check if this handler supports a specific thought type\n   * Custom handler supports any thought type\n   */\n  supportsThoughtType(_thoughtType: string): boolean {\n    return true; // Custom mode supports any thought type\n  }\n\n  /**\n   * Normalize custom field\n   */\n  private normalizeField(field: any): CustomField {\n    return {\n      name: field.name || 'unnamed',\n      type: this.resolveFieldType(field.type),\n      value: field.value,\n      description: field.description,\n      required: field.required ?? false,\n    };\n  }\n\n  /**\n   * Resolve field type\n   */\n  private resolveFieldType(type: string | undefined): CustomField['type'] {\n    const validTypes = ['string', 'number', 'boolean', 'array', 'object'];\n    if (type && validTypes.includes(type)) {\n      return type as CustomField['type'];\n    }\n    return 'string';\n  }\n\n  /**\n   * Normalize custom stage\n   */\n  private normalizeStage(stage: any, defaultOrder: number): CustomStage {\n    return {\n      id: stage.id || randomUUID(),\n      name: stage.name || `Stage ${defaultOrder + 1}`,\n      description: stage.description || '',\n      order: stage.order ?? defaultOrder,\n      completed: stage.completed ?? false,\n    };\n  }\n\n  /**\n   * Normalize validation rule\n   */\n  private normalizeValidationRule(rule: any): CustomValidationRule {\n    return {\n      field: rule.field || '',\n      rule: rule.rule || '',\n      message: rule.message || 'Validation failed',\n    };\n  }\n\n  /**\n   * Resolve mode from string\n   */\n  private resolveMode(mode: string): ThinkingMode {\n    const modeMap: Record<string, ThinkingMode> = {\n      sequential: ThinkingMode.SEQUENTIAL,\n      shannon: ThinkingMode.SHANNON,\n      mathematics: ThinkingMode.MATHEMATICS,\n      physics: ThinkingMode.PHYSICS,\n      hybrid: ThinkingMode.HYBRID,\n      inductive: ThinkingMode.INDUCTIVE,\n      deductive: ThinkingMode.DEDUCTIVE,\n      abductive: ThinkingMode.ABDUCTIVE,\n      causal: ThinkingMode.CAUSAL,\n      bayesian: ThinkingMode.BAYESIAN,\n      counterfactual: ThinkingMode.COUNTERFACTUAL,\n      temporal: ThinkingMode.TEMPORAL,\n      gametheory: ThinkingMode.GAMETHEORY,\n      evidential: ThinkingMode.EVIDENTIAL,\n      analogical: ThinkingMode.ANALOGICAL,\n      firstprinciples: ThinkingMode.FIRSTPRINCIPLES,\n      systemsthinking: ThinkingMode.SYSTEMSTHINKING,\n      scientificmethod: ThinkingMode.SCIENTIFICMETHOD,\n      formallogic: ThinkingMode.FORMALLOGIC,\n      metareasoning: ThinkingMode.METAREASONING,\n      optimization: ThinkingMode.OPTIMIZATION,\n      engineering: ThinkingMode.ENGINEERING,\n      algorithmic: ThinkingMode.ALGORITHMIC,\n      computability: ThinkingMode.COMPUTABILITY,\n      cryptanalytic: ThinkingMode.CRYPTANALYTIC,\n      synthesis: ThinkingMode.SYNTHESIS,\n      argumentation: ThinkingMode.ARGUMENTATION,\n      critique: ThinkingMode.CRITIQUE,\n      analysis: ThinkingMode.ANALYSIS,\n      custom: ThinkingMode.CUSTOM,\n    };\n\n    return modeMap[mode.toLowerCase()] || ThinkingMode.SEQUENTIAL;\n  }\n\n  /**\n   * Evaluate a simple validation rule\n   */\n  private evaluateRule(\n    rule: string,\n    value: unknown,\n    _allFields: Map<string, unknown>\n  ): boolean {\n    try {\n      // Simple rule evaluation (for safety, only support basic operations)\n      if (rule === 'required') {\n        return value !== undefined && value !== null && value !== '';\n      }\n\n      if (rule.startsWith('min:')) {\n        const min = parseFloat(rule.substring(4));\n        return typeof value === 'number' && value >= min;\n      }\n\n      if (rule.startsWith('max:')) {\n        const max = parseFloat(rule.substring(4));\n        return typeof value === 'number' && value <= max;\n      }\n\n      if (rule.startsWith('minLength:')) {\n        const min = parseInt(rule.substring(10));\n        return typeof value === 'string' && value.length >= min;\n      }\n\n      if (rule.startsWith('maxLength:')) {\n        const max = parseInt(rule.substring(10));\n        return typeof value === 'string' && value.length <= max;\n      }\n\n      if (rule.startsWith('pattern:')) {\n        const pattern = rule.substring(8);\n        return typeof value === 'string' && new RegExp(pattern).test(value);\n      }\n\n      if (rule.startsWith('in:')) {\n        const options = rule.substring(3).split(',');\n        return options.includes(String(value));\n      }\n\n      if (rule === 'positive') {\n        return typeof value === 'number' && value > 0;\n      }\n\n      if (rule === 'negative') {\n        return typeof value === 'number' && value < 0;\n      }\n\n      if (rule === 'integer') {\n        return typeof value === 'number' && Number.isInteger(value);\n      }\n\n      // Default to true for unknown rules\n      return true;\n    } catch {\n      return true; // Don't fail on rule evaluation errors\n    }\n  }\n}\n","/**\n * ModeHandlerRegistry - Phase 10 Sprint 1 (v8.0.0)\n *\n * Central registry for mode handlers. Manages registration, lookup,\n * and delegation to appropriate handlers.\n *\n * Part of the Strategy Pattern implementation to replace the\n * monolithic ThoughtFactory switch statement.\n */\n\nimport { ThinkingMode, Thought, isFullyImplemented } from '../types/core.js';\nimport type { ThinkingToolInput } from '../tools/thinking.js';\nimport {\n  ModeHandler,\n  ModeStatus,\n  ValidationResult,\n  validationFailure,\n  createValidationError,\n} from './handlers/ModeHandler.js';\nimport { GenericModeHandler } from './handlers/GenericModeHandler.js';\n\n/**\n * Registry statistics\n */\nexport interface RegistryStats {\n  /** Total number of registered handlers */\n  totalHandlers: number;\n  /** Number of specialized (non-generic) handlers */\n  specializedHandlers: number;\n  /** List of modes with specialized handlers */\n  modesWithHandlers: ThinkingMode[];\n  /** List of modes using generic handler */\n  modesWithGenericHandler: ThinkingMode[];\n}\n\n/**\n * ModeHandlerRegistry\n *\n * Singleton registry that manages mode handlers. Provides:\n * - Handler registration and lookup\n * - Fallback to GenericModeHandler for unregistered modes\n * - Validation delegation\n * - Statistics and introspection\n *\n * @example\n * ```typescript\n * const registry = ModeHandlerRegistry.getInstance();\n *\n * // Register a specialized handler\n * registry.register(new CausalHandler());\n *\n * // Create a thought (delegates to appropriate handler)\n * const thought = registry.createThought(input, sessionId);\n *\n * // Check if mode has specialized handler\n * if (registry.hasSpecializedHandler(ThinkingMode.CAUSAL)) {\n *   // Use specialized features\n * }\n * ```\n */\nexport class ModeHandlerRegistry {\n  private static instance: ModeHandlerRegistry | null = null;\n  private handlers: Map<ThinkingMode, ModeHandler> = new Map();\n\n  private constructor() {\n    // Singleton constructor - handlers are registered externally\n  }\n\n  /**\n   * Get the singleton instance\n   */\n  static getInstance(): ModeHandlerRegistry {\n    if (!ModeHandlerRegistry.instance) {\n      ModeHandlerRegistry.instance = new ModeHandlerRegistry();\n    }\n    return ModeHandlerRegistry.instance;\n  }\n\n  /**\n   * Reset the singleton (for testing)\n   */\n  static resetInstance(): void {\n    ModeHandlerRegistry.instance = null;\n  }\n\n  /**\n   * Register a mode handler\n   *\n   * @param handler - The handler to register\n   * @throws Error if handler for mode is already registered\n   */\n  register(handler: ModeHandler): void {\n    if (this.handlers.has(handler.mode)) {\n      throw new Error(\n        `Handler for mode '${handler.mode}' is already registered. ` +\n          'Use replace() to override an existing handler.'\n      );\n    }\n    this.handlers.set(handler.mode, handler);\n  }\n\n  /**\n   * Replace an existing handler or register a new one\n   *\n   * @param handler - The handler to register/replace\n   */\n  replace(handler: ModeHandler): void {\n    this.handlers.set(handler.mode, handler);\n  }\n\n  /**\n   * Unregister a handler\n   *\n   * @param mode - The mode to unregister\n   * @returns true if handler was removed, false if not found\n   */\n  unregister(mode: ThinkingMode): boolean {\n    return this.handlers.delete(mode);\n  }\n\n  /**\n   * Get handler for a mode\n   *\n   * Returns the specialized handler if registered,\n   * otherwise returns the generic handler.\n   *\n   * @param mode - The thinking mode\n   * @returns The handler for the mode\n   */\n  getHandler(mode: ThinkingMode): ModeHandler {\n    return this.handlers.get(mode) || this.createGenericHandlerForMode(mode);\n  }\n\n  /**\n   * Check if a specialized handler is registered for a mode\n   *\n   * @param mode - The thinking mode\n   * @returns true if a specialized handler exists\n   */\n  hasSpecializedHandler(mode: ThinkingMode): boolean {\n    return this.handlers.has(mode);\n  }\n\n  /**\n   * Get all registered modes\n   *\n   * @returns Array of modes with specialized handlers\n   */\n  getRegisteredModes(): ThinkingMode[] {\n    return Array.from(this.handlers.keys());\n  }\n\n  /**\n   * Create a thought using the appropriate handler\n   *\n   * This is the main entry point for thought creation.\n   * Delegates to specialized handler if registered,\n   * otherwise uses generic handler.\n   *\n   * @param input - The tool input\n   * @param sessionId - The session ID\n   * @returns Created thought\n   */\n  createThought(input: ThinkingToolInput, sessionId: string): Thought {\n    const mode = (input.mode as ThinkingMode) || ThinkingMode.HYBRID;\n    const handler = this.getHandler(mode);\n    return handler.createThought(input, sessionId);\n  }\n\n  /**\n   * Validate input using the appropriate handler\n   *\n   * @param input - The tool input\n   * @returns Validation result\n   */\n  validate(input: ThinkingToolInput): ValidationResult {\n    const mode = (input.mode as ThinkingMode) || ThinkingMode.HYBRID;\n\n    // Basic validation first\n    if (!input.thought || input.thought.trim().length === 0) {\n      return validationFailure([\n        createValidationError('thought', 'Thought content is required', 'EMPTY_THOUGHT'),\n      ]);\n    }\n\n    const handler = this.getHandler(mode);\n    return handler.validate(input);\n  }\n\n  /**\n   * Get mode status information\n   *\n   * @param mode - The thinking mode\n   * @returns Mode status for API response\n   */\n  getModeStatus(mode: ThinkingMode): ModeStatus {\n    const hasSpecialized = this.hasSpecializedHandler(mode);\n    const handler = this.getHandler(mode);\n\n    return {\n      mode,\n      isFullyImplemented: isFullyImplemented(mode),\n      hasSpecializedHandler: hasSpecialized,\n      note: this.getModeNote(mode, hasSpecialized),\n      supportedThoughtTypes: this.getSupportedThoughtTypes(handler, mode),\n    };\n  }\n\n  /**\n   * Get registry statistics\n   *\n   * @returns Statistics about registered handlers\n   */\n  getStats(): RegistryStats {\n    const allModes = Object.values(ThinkingMode).filter(\n      (v) => typeof v === 'string'\n    ) as ThinkingMode[];\n\n    const modesWithHandlers = this.getRegisteredModes();\n    const modesWithGenericHandler = allModes.filter(\n      (mode) => !this.handlers.has(mode)\n    );\n\n    return {\n      totalHandlers: this.handlers.size,\n      specializedHandlers: this.handlers.size,\n      modesWithHandlers,\n      modesWithGenericHandler,\n    };\n  }\n\n  /**\n   * Create a generic handler configured for a specific mode\n   */\n  private createGenericHandlerForMode(mode: ThinkingMode): GenericModeHandler {\n    return new GenericModeHandler(mode);\n  }\n\n  /**\n   * Get appropriate note for mode status\n   */\n  private getModeNote(mode: ThinkingMode, hasSpecialized: boolean): string | undefined {\n    if (!isFullyImplemented(mode)) {\n      return 'This mode is experimental with limited runtime implementation';\n    }\n    if (!hasSpecialized) {\n      return 'Using generic handler - specialized validation not available';\n    }\n    return undefined;\n  }\n\n  /**\n   * Get supported thought types for a mode\n   */\n  private getSupportedThoughtTypes(_handler: ModeHandler, mode: ThinkingMode): string[] {\n    // Default thought types by mode category\n    const thoughtTypes: Record<string, string[]> = {\n      mathematics: [\n        'problem_definition',\n        'constraints',\n        'model',\n        'proof',\n        'implementation',\n        'proof_decomposition',\n        'dependency_analysis',\n        'consistency_check',\n        'gap_identification',\n        'assumption_trace',\n      ],\n      physics: [\n        'problem_definition',\n        'model',\n        'tensor_formulation',\n        'conservation_law',\n        'dimensional_analysis',\n      ],\n      causal: ['problem_definition', 'graph_construction', 'intervention_analysis', 'mechanism_identification'],\n      bayesian: ['prior_definition', 'likelihood_assessment', 'posterior_calculation', 'sensitivity_analysis'],\n      temporal: ['event_definition', 'interval_analysis', 'constraint_checking', 'timeline_construction'],\n      gametheory: ['game_definition', 'strategy_analysis', 'equilibrium_finding', 'payoff_calculation'],\n      synthesis: ['source_identification', 'theme_extraction', 'gap_analysis', 'framework_construction'],\n      argumentation: ['claim_formulation', 'grounds_development', 'warrant_construction', 'rebuttal_analysis'],\n      critique: ['work_characterization', 'methodology_evaluation', 'argument_critique', 'contribution_assessment'],\n      analysis: ['data_familiarization', 'coding', 'theme_development', 'pattern_analysis'],\n    };\n\n    const modeKey = mode.toLowerCase();\n    return thoughtTypes[modeKey] || ['general'];\n  }\n\n  /**\n   * Clear all registered handlers (for testing)\n   */\n  clear(): void {\n    this.handlers.clear();\n  }\n}\n\n/**\n * Get the global registry instance\n */\nexport function getRegistry(): ModeHandlerRegistry {\n  return ModeHandlerRegistry.getInstance();\n}\n\n/**\n * Register a handler with the global registry\n */\nexport function registerHandler(handler: ModeHandler): void {\n  getRegistry().register(handler);\n}\n\n/**\n * Create a thought using the global registry\n */\nexport function createThought(input: ThinkingToolInput, sessionId: string): Thought {\n  return getRegistry().createThought(input, sessionId);\n}\n","/**\n * Mode Handlers Index - Phase 10 Sprint 3 (v8.4.0)\n *\n * Exports for the ModeHandler pattern implementation.\n * Part of the Strategy Pattern to replace ThoughtFactory's switch statement.\n * All 33 reasoning modes now have fully implemented handlers.\n *\n * Handler Categories:\n * - Core (5): Sequential, Shannon, Mathematics, Physics, Hybrid\n * - Fundamental Triad (3): Inductive, Deductive, Abductive\n * - Causal/Probabilistic (6): Causal, Bayesian, Counterfactual, Temporal, GameTheory, Evidential\n * - Analogical/First Principles (2): Analogical, FirstPrinciples\n * - Systems/Scientific (3): SystemsThinking, ScientificMethod, FormalLogic\n * - Academic (4): Synthesis, Argumentation, Critique, Analysis\n * - Engineering (4): Engineering, Computability, Cryptanalytic, Algorithmic\n * - Advanced Runtime (6): MetaReasoning, Recursive, Modal, Stochastic, Constraint, Optimization\n * - User-Defined (1): Custom\n */\n\n// Core interface and types\nexport {\n  ModeHandler,\n  ValidationResult,\n  ValidationError,\n  ValidationWarning,\n  ModeEnhancements,\n  ModeStatus,\n  DetectedArchetype,\n  validationSuccess,\n  validationFailure,\n  createValidationError,\n  createValidationWarning,\n} from './handlers/ModeHandler.js';\n\n// Generic handler (fallback implementation - deprecated, kept for backwards compatibility)\nexport { GenericModeHandler } from './handlers/GenericModeHandler.js';\n\n// ===== CORE HANDLERS (5) =====\nexport { SequentialHandler } from './handlers/SequentialHandler.js';\nexport { ShannonHandler } from './handlers/ShannonHandler.js';\nexport { MathematicsHandler } from './handlers/MathematicsHandler.js';\nexport { PhysicsHandler } from './handlers/PhysicsHandler.js';\nexport { HybridHandler } from './handlers/HybridHandler.js';\n\n// ===== FUNDAMENTAL TRIAD HANDLERS (3) =====\nexport { InductiveHandler } from './handlers/InductiveHandler.js';\nexport { DeductiveHandler } from './handlers/DeductiveHandler.js';\nexport { AbductiveHandler } from './handlers/AbductiveHandler.js';\n\n// ===== CAUSAL/PROBABILISTIC HANDLERS (6) =====\nexport { CausalHandler } from './handlers/CausalHandler.js';\nexport { BayesianHandler } from './handlers/BayesianHandler.js';\nexport { CounterfactualHandler } from './handlers/CounterfactualHandler.js';\nexport { TemporalHandler } from './handlers/TemporalHandler.js';\nexport { GameTheoryHandler } from './handlers/GameTheoryHandler.js';\nexport { EvidentialHandler } from './handlers/EvidentialHandler.js';\n\n// ===== ANALOGICAL/FIRST PRINCIPLES HANDLERS (2) =====\nexport { AnalogicalHandler } from './handlers/AnalogicalHandler.js';\nexport { FirstPrinciplesHandler } from './handlers/FirstPrinciplesHandler.js';\n\n// ===== SYSTEMS/SCIENTIFIC HANDLERS (3) =====\nexport { SystemsThinkingHandler } from './handlers/SystemsThinkingHandler.js';\nexport { ScientificMethodHandler } from './handlers/ScientificMethodHandler.js';\nexport { FormalLogicHandler } from './handlers/FormalLogicHandler.js';\n\n// ===== ACADEMIC HANDLERS (4) =====\nexport { SynthesisHandler } from './handlers/SynthesisHandler.js';\nexport { ArgumentationHandler } from './handlers/ArgumentationHandler.js';\nexport { CritiqueHandler } from './handlers/CritiqueHandler.js';\nexport { AnalysisHandler } from './handlers/AnalysisHandler.js';\n\n// ===== ENGINEERING HANDLERS (4) =====\nexport { EngineeringHandler } from './handlers/EngineeringHandler.js';\nexport { ComputabilityHandler } from './handlers/ComputabilityHandler.js';\nexport { CryptanalyticHandler } from './handlers/CryptanalyticHandler.js';\nexport { AlgorithmicHandler } from './handlers/AlgorithmicHandler.js';\n\n// ===== ADVANCED RUNTIME HANDLERS (6) =====\nexport { MetaReasoningHandler } from './handlers/MetaReasoningHandler.js';\nexport { RecursiveHandler } from './handlers/RecursiveHandler.js';\nexport { ModalHandler } from './handlers/ModalHandler.js';\nexport { StochasticHandler } from './handlers/StochasticHandler.js';\nexport { ConstraintHandler } from './handlers/ConstraintHandler.js';\nexport { OptimizationHandler } from './handlers/OptimizationHandler.js';\n\n// ===== USER-DEFINED HANDLER (1) =====\nexport { CustomHandler } from './handlers/CustomHandler.js';\n\n// Registry\nexport {\n  ModeHandlerRegistry,\n  RegistryStats,\n  getRegistry,\n  registerHandler,\n  createThought,\n} from './registry.js';\n\n/**\n * Register all specialized handlers with the registry\n *\n * Call this function to initialize the registry with all 33 specialized handlers.\n * This eliminates the need for GenericModeHandler fallback.\n * Should be called once at startup.\n */\nexport function registerAllHandlers(): void {\n  const registry = getRegistry();\n\n  // ===== CORE HANDLERS (5) =====\n  registry.replace(new SequentialHandler());\n  registry.replace(new ShannonHandler());\n  registry.replace(new MathematicsHandler());\n  registry.replace(new PhysicsHandler());\n  registry.replace(new HybridHandler());\n\n  // ===== FUNDAMENTAL TRIAD HANDLERS (3) =====\n  registry.replace(new InductiveHandler());\n  registry.replace(new DeductiveHandler());\n  registry.replace(new AbductiveHandler());\n\n  // ===== CAUSAL/PROBABILISTIC HANDLERS (6) =====\n  registry.replace(new CausalHandler());\n  registry.replace(new BayesianHandler());\n  registry.replace(new CounterfactualHandler());\n  registry.replace(new TemporalHandler());\n  registry.replace(new GameTheoryHandler());\n  registry.replace(new EvidentialHandler());\n\n  // ===== ANALOGICAL/FIRST PRINCIPLES HANDLERS (2) =====\n  registry.replace(new AnalogicalHandler());\n  registry.replace(new FirstPrinciplesHandler());\n\n  // ===== SYSTEMS/SCIENTIFIC HANDLERS (3) =====\n  registry.replace(new SystemsThinkingHandler());\n  registry.replace(new ScientificMethodHandler());\n  registry.replace(new FormalLogicHandler());\n\n  // ===== ACADEMIC HANDLERS (4) =====\n  registry.replace(new SynthesisHandler());\n  registry.replace(new ArgumentationHandler());\n  registry.replace(new CritiqueHandler());\n  registry.replace(new AnalysisHandler());\n\n  // ===== ENGINEERING HANDLERS (4) =====\n  registry.replace(new EngineeringHandler());\n  registry.replace(new ComputabilityHandler());\n  registry.replace(new CryptanalyticHandler());\n  registry.replace(new AlgorithmicHandler());\n\n  // ===== ADVANCED RUNTIME HANDLERS (6) =====\n  registry.replace(new MetaReasoningHandler());\n  registry.replace(new RecursiveHandler());\n  registry.replace(new ModalHandler());\n  registry.replace(new StochasticHandler());\n  registry.replace(new ConstraintHandler());\n  registry.replace(new OptimizationHandler());\n\n  // ===== USER-DEFINED HANDLER (1) =====\n  registry.replace(new CustomHandler());\n}\n\n// Import all handlers for registerAllHandlers\n// Core handlers\nimport { SequentialHandler } from './handlers/SequentialHandler.js';\nimport { ShannonHandler } from './handlers/ShannonHandler.js';\nimport { MathematicsHandler } from './handlers/MathematicsHandler.js';\nimport { PhysicsHandler } from './handlers/PhysicsHandler.js';\nimport { HybridHandler } from './handlers/HybridHandler.js';\n\n// Fundamental triad handlers\nimport { InductiveHandler } from './handlers/InductiveHandler.js';\nimport { DeductiveHandler } from './handlers/DeductiveHandler.js';\nimport { AbductiveHandler } from './handlers/AbductiveHandler.js';\n\n// Causal/Probabilistic handlers\nimport { CausalHandler } from './handlers/CausalHandler.js';\nimport { BayesianHandler } from './handlers/BayesianHandler.js';\nimport { CounterfactualHandler } from './handlers/CounterfactualHandler.js';\nimport { TemporalHandler } from './handlers/TemporalHandler.js';\nimport { GameTheoryHandler } from './handlers/GameTheoryHandler.js';\nimport { EvidentialHandler } from './handlers/EvidentialHandler.js';\n\n// Analogical/First Principles handlers\nimport { AnalogicalHandler } from './handlers/AnalogicalHandler.js';\nimport { FirstPrinciplesHandler } from './handlers/FirstPrinciplesHandler.js';\n\n// Systems/Scientific handlers\nimport { SystemsThinkingHandler } from './handlers/SystemsThinkingHandler.js';\nimport { ScientificMethodHandler } from './handlers/ScientificMethodHandler.js';\nimport { FormalLogicHandler } from './handlers/FormalLogicHandler.js';\n\n// Academic handlers\nimport { SynthesisHandler } from './handlers/SynthesisHandler.js';\nimport { ArgumentationHandler } from './handlers/ArgumentationHandler.js';\nimport { CritiqueHandler } from './handlers/CritiqueHandler.js';\nimport { AnalysisHandler } from './handlers/AnalysisHandler.js';\n\n// Engineering handlers\nimport { EngineeringHandler } from './handlers/EngineeringHandler.js';\nimport { ComputabilityHandler } from './handlers/ComputabilityHandler.js';\nimport { CryptanalyticHandler } from './handlers/CryptanalyticHandler.js';\nimport { AlgorithmicHandler } from './handlers/AlgorithmicHandler.js';\n\n// Advanced runtime handlers\nimport { MetaReasoningHandler } from './handlers/MetaReasoningHandler.js';\nimport { RecursiveHandler } from './handlers/RecursiveHandler.js';\nimport { ModalHandler } from './handlers/ModalHandler.js';\nimport { StochasticHandler } from './handlers/StochasticHandler.js';\nimport { ConstraintHandler } from './handlers/ConstraintHandler.js';\nimport { OptimizationHandler } from './handlers/OptimizationHandler.js';\n\n// User-defined handler\nimport { CustomHandler } from './handlers/CustomHandler.js';\n\nimport { getRegistry } from './registry.js';\n","/**\n * Custom error classes for DeepThinking MCP\n * Provides structured error handling with proper error codes and context\n *\n * STANDARDIZED ERROR FORMAT:\n * All errors extend DeepThinkingError and include:\n * - message: Human-readable error description\n * - code: Machine-readable error code (SCREAMING_SNAKE_CASE)\n * - context: Additional error context (sanitized, no PII)\n * - timestamp: When the error occurred\n * - stack: Stack trace for debugging\n *\n * USAGE GUIDELINES:\n * 1. Use specific error classes when available (e.g., SessionNotFoundError)\n * 2. Use ErrorFactory for common error patterns\n * 3. Never expose sensitive data in error messages or context\n * 4. Include relevant context for debugging (IDs, not content)\n * 5. Log errors with appropriate severity level\n *\n * ERROR CODE CONVENTIONS:\n * - SESSION_*: Session lifecycle errors\n * - VALIDATION_*: Input/data validation errors\n * - RESOURCE_*: Resource limits and availability\n * - SECURITY_*: Security and authentication errors\n * - RATE_LIMIT_*: Rate limiting errors\n * - EXPORT_*: Export and serialization errors\n */\n\n/**\n * Base error class for all DeepThinking MCP errors\n */\nexport class DeepThinkingError extends Error {\n  public readonly code: string;\n  public readonly context?: Record<string, unknown>;\n  public readonly timestamp: Date;\n\n  constructor(message: string, code: string, context?: Record<string, unknown>) {\n    super(message);\n    this.name = this.constructor.name;\n    this.code = code;\n    this.context = context;\n    this.timestamp = new Date();\n\n    // Maintains proper stack trace for where our error was thrown (only available on V8)\n    if (Error.captureStackTrace) {\n      Error.captureStackTrace(this, this.constructor);\n    }\n  }\n\n  /**\n   * Convert error to JSON for logging/serialization\n   */\n  toJSON(): Record<string, unknown> {\n    return {\n      name: this.name,\n      message: this.message,\n      code: this.code,\n      context: this.context,\n      timestamp: this.timestamp.toISOString(),\n      stack: this.stack,\n    };\n  }\n}\n\n/**\n * Session-related errors\n */\nexport class SessionError extends DeepThinkingError {\n  constructor(message: string, context?: Record<string, unknown>) {\n    super(message, 'SESSION_ERROR', context);\n  }\n}\n\n/**\n * Session not found error\n */\nexport class SessionNotFoundError extends DeepThinkingError {\n  constructor(sessionId: string) {\n    super(`Session not found: ${sessionId}`, 'SESSION_NOT_FOUND', { sessionId });\n  }\n}\n\n/**\n * Session already exists error\n */\nexport class SessionAlreadyExistsError extends DeepThinkingError {\n  constructor(sessionId: string) {\n    super(`Session already exists: ${sessionId}`, 'SESSION_ALREADY_EXISTS', { sessionId });\n  }\n}\n\n/**\n * Validation errors\n */\nexport class ValidationError extends DeepThinkingError {\n  constructor(message: string, context?: Record<string, unknown>) {\n    super(message, 'VALIDATION_ERROR', context);\n  }\n}\n\n/**\n * Input validation error\n */\nexport class InputValidationError extends DeepThinkingError {\n  constructor(fieldName: string, reason: string, value?: unknown) {\n    super(`Invalid ${fieldName}: ${reason}`, 'INPUT_VALIDATION_ERROR', {\n      fieldName,\n      reason,\n      value: typeof value === 'object' ? '[object]' : value,\n    });\n  }\n}\n\n/**\n * Configuration errors\n */\nexport class ConfigurationError extends DeepThinkingError {\n  constructor(message: string, context?: Record<string, unknown>) {\n    super(message, 'CONFIGURATION_ERROR', context);\n  }\n}\n\n/**\n * Invalid mode error\n */\nexport class InvalidModeError extends DeepThinkingError {\n  constructor(mode: string, validModes: string[]) {\n    super(`Invalid thinking mode: ${mode}`, 'INVALID_MODE', { mode, validModes });\n  }\n}\n\n/**\n * Thought processing errors\n */\nexport class ThoughtProcessingError extends DeepThinkingError {\n  constructor(message: string, context?: Record<string, unknown>) {\n    super(message, 'THOUGHT_PROCESSING_ERROR', context);\n  }\n}\n\n/**\n * Export errors\n */\nexport class ExportError extends DeepThinkingError {\n  constructor(message: string, format: string, context?: Record<string, unknown>) {\n    super(message, 'EXPORT_ERROR', { ...context, format });\n  }\n}\n\n/**\n * Resource limit errors\n */\nexport class ResourceLimitError extends DeepThinkingError {\n  constructor(resource: string, limit: number, actual: number) {\n    super(\n      `Resource limit exceeded for ${resource}: ${actual} > ${limit}`,\n      'RESOURCE_LIMIT_EXCEEDED',\n      { resource, limit, actual }\n    );\n  }\n}\n\n/**\n * Error factory for creating appropriate error types\n */\nexport class ErrorFactory {\n  static sessionNotFound(sessionId: string): SessionNotFoundError {\n    return new SessionNotFoundError(sessionId);\n  }\n\n  static invalidInput(fieldName: string, reason: string, value?: unknown): InputValidationError {\n    return new InputValidationError(fieldName, reason, value);\n  }\n\n  static invalidMode(mode: string, validModes: string[]): InvalidModeError {\n    return new InvalidModeError(mode, validModes);\n  }\n\n  static resourceLimit(resource: string, limit: number, actual: number): ResourceLimitError {\n    return new ResourceLimitError(resource, limit, actual);\n  }\n\n  static exportFailed(format: string, reason: string): ExportError {\n    return new ExportError(`Export failed: ${reason}`, format);\n  }\n}\n\n/**\n * Rate limiting errors\n */\nexport class RateLimitError extends DeepThinkingError {\n  constructor(operation: string, limit?: number, windowMs?: number) {\n    const message = limit\n      ? `Rate limit exceeded for ${operation}: ${limit} requests per ${windowMs}ms`\n      : `Rate limit exceeded for ${operation}`;\n\n    super(message, 'RATE_LIMIT_EXCEEDED', { operation, limit, windowMs });\n  }\n}\n\n/**\n * Security-related errors\n */\nexport class SecurityError extends DeepThinkingError {\n  constructor(message: string, context?: Record<string, unknown>) {\n    super(message, 'SECURITY_ERROR', context);\n  }\n}\n\n/**\n * Path traversal security error\n */\nexport class PathTraversalError extends DeepThinkingError {\n  constructor(attemptedPath: string) {\n    super('Path traversal attempt detected', 'PATH_TRAVERSAL_DETECTED', { attemptedPath });\n  }\n}\n\n/**\n * Storage and persistence errors\n */\nexport class StorageError extends DeepThinkingError {\n  constructor(message: string, context?: Record<string, unknown>) {\n    super(message, 'STORAGE_ERROR', context);\n  }\n}\n\n/**\n * Backup operation errors\n */\nexport class BackupError extends DeepThinkingError {\n  constructor(message: string, backupId?: string, context?: Record<string, unknown>) {\n    super(message, 'BACKUP_ERROR', { ...context, backupId });\n  }\n}\n","/**\n * Input sanitization utilities for DeepThinking MCP\n * Provides basic security and validation for user inputs\n */\n\n/**\n * Maximum allowed lengths for string inputs\n */\nexport const MAX_LENGTHS = {\n  THOUGHT_CONTENT: 100000, // 100KB for thought content\n  TITLE: 500,\n  DOMAIN: 200,\n  AUTHOR: 300,\n  SESSION_ID: 100,\n  HYPOTHESIS: 5000,\n  DESCRIPTION: 10000,\n  STRING_FIELD: 1000,\n};\n\n/**\n * Sanitize and validate a string input\n * @param input - The string to sanitize\n * @param maxLength - Maximum allowed length (default: MAX_LENGTHS.STRING_FIELD)\n * @param fieldName - Name of the field for error messages\n * @returns Sanitized string\n * @throws Error if input is invalid\n */\nexport function sanitizeString(\n  input: string,\n  maxLength: number = MAX_LENGTHS.STRING_FIELD,\n  fieldName: string = 'input'\n): string {\n  if (typeof input !== 'string') {\n    throw new Error(`${fieldName} must be a string`);\n  }\n\n  // Trim whitespace\n  const trimmed = input.trim();\n\n  // Check length\n  if (trimmed.length === 0) {\n    throw new Error(`${fieldName} cannot be empty`);\n  }\n\n  if (trimmed.length > maxLength) {\n    throw new Error(`${fieldName} exceeds maximum length of ${maxLength} characters`);\n  }\n\n  // Check for null bytes (potential injection)\n  if (trimmed.includes('\\0')) {\n    throw new Error(`${fieldName} contains invalid null bytes`);\n  }\n\n  return trimmed;\n}\n\n/**\n * Sanitize an optional string input\n */\nexport function sanitizeOptionalString(\n  input: string | undefined,\n  maxLength: number = MAX_LENGTHS.STRING_FIELD,\n  fieldName: string = 'input'\n): string | undefined {\n  if (input === undefined || input === null || input === '') {\n    return undefined;\n  }\n  return sanitizeString(input, maxLength, fieldName);\n}\n\n/**\n * Validate a session ID (should be a valid UUID v4)\n */\nexport function validateSessionId(sessionId: string): string {\n  const uuidRegex = /^[0-9a-f]{8}-[0-9a-f]{4}-4[0-9a-f]{3}-[89ab][0-9a-f]{3}-[0-9a-f]{12}$/i;\n\n  if (!uuidRegex.test(sessionId)) {\n    throw new Error(`Invalid session ID format: ${sessionId}`);\n  }\n\n  return sessionId;\n}\n\n/**\n * Sanitize numeric input and ensure it's within range\n */\nexport function sanitizeNumber(\n  input: number,\n  min: number = -Infinity,\n  max: number = Infinity,\n  fieldName: string = 'number'\n): number {\n  if (typeof input !== 'number' || isNaN(input)) {\n    throw new Error(`${fieldName} must be a valid number`);\n  }\n\n  if (!isFinite(input)) {\n    throw new Error(`${fieldName} must be a finite number`);\n  }\n\n  if (input < min || input > max) {\n    throw new Error(`${fieldName} must be between ${min} and ${max}`);\n  }\n\n  return input;\n}\n\n/**\n * Sanitize an array of strings\n */\nexport function sanitizeStringArray(\n  input: string[],\n  maxLength: number = MAX_LENGTHS.STRING_FIELD,\n  maxItems: number = 1000,\n  fieldName: string = 'array'\n): string[] {\n  if (!Array.isArray(input)) {\n    throw new Error(`${fieldName} must be an array`);\n  }\n\n  if (input.length > maxItems) {\n    throw new Error(`${fieldName} exceeds maximum of ${maxItems} items`);\n  }\n\n  return input.map((item, index) =>\n    sanitizeString(item, maxLength, `${fieldName}[${index}]`)\n  );\n}\n\n/**\n * Sanitize thought content (allows larger size)\n */\nexport function sanitizeThoughtContent(content: string): string {\n  return sanitizeString(content, MAX_LENGTHS.THOUGHT_CONTENT, 'thought content');\n}\n\n/**\n * Sanitize session title\n */\nexport function sanitizeTitle(title: string | undefined): string {\n  if (!title) {\n    return 'Untitled Session';\n  }\n  return sanitizeString(title, MAX_LENGTHS.TITLE, 'title');\n}\n\n/**\n * Sanitize domain name\n */\nexport function sanitizeDomain(domain: string | undefined): string | undefined {\n  return sanitizeOptionalString(domain, MAX_LENGTHS.DOMAIN, 'domain');\n}\n\n/**\n * Sanitize author name\n */\nexport function sanitizeAuthor(author: string | undefined): string | undefined {\n  return sanitizeOptionalString(author, MAX_LENGTHS.AUTHOR, 'author');\n}\n\n/**\n * Escape HTML special characters to prevent XSS\n * @param text - Text to escape\n * @returns HTML-safe string\n */\nexport function escapeHtml(text: string): string {\n  const htmlEscapeMap: Record<string, string> = {\n    '&': '&amp;',\n    '<': '&lt;',\n    '>': '&gt;',\n    '\"': '&quot;',\n    \"'\": '&#39;',\n    '/': '&#x2F;',\n  };\n\n  return text.replace(/[&<>\"'\\/]/g, (char) => htmlEscapeMap[char] || char);\n}\n\n/**\n * Escape LaTeX special characters to prevent injection\n * @param text - Text to escape\n * @returns LaTeX-safe string\n */\nexport function escapeLatex(text: string): string {\n  const latexEscapeMap: Record<string, string> = {\n    '\\\\': '\\\\textbackslash{}',\n    '{': '\\\\{',\n    '}': '\\\\}',\n    '$': '\\\\$',\n    '&': '\\\\&',\n    '%': '\\\\%',\n    '#': '\\\\#',\n    '_': '\\\\_',\n    '~': '\\\\textasciitilde{}',\n    '^': '\\\\textasciicircum{}',\n  };\n\n  return text.replace(/[\\\\{}$&%#_~^]/g, (char) => latexEscapeMap[char] || char);\n}\n","/**\n * Logger Types (v6.1.0)\n * Shared types for logging - extracted to break circular dependency\n */\n\n/**\n * Log levels\n */\nexport enum LogLevel {\n  DEBUG = 0,\n  INFO = 1,\n  WARN = 2,\n  ERROR = 3,\n  SILENT = 4,\n}\n\n/**\n * Log entry structure\n */\nexport interface LogEntry {\n  level: LogLevel;\n  message: string;\n  timestamp: Date;\n  context?: Record<string, unknown>;\n  error?: Error;\n}\n\n/**\n * Logger configuration\n */\nexport interface LoggerConfig {\n  minLevel: LogLevel;\n  enableConsole: boolean;\n  enableTimestamps: boolean;\n  prettyPrint: boolean;\n}\n","/**\n * Logging utility for DeepThinking MCP\n * Provides structured logging with levels and context\n */\n\nimport type { ILogger } from '../interfaces/ILogger.js';\nimport { LogLevel, type LogEntry, type LoggerConfig } from './logger-types.js';\n\n// Re-export types for backwards compatibility\nexport { LogLevel, type LogEntry, type LoggerConfig } from './logger-types.js';\n\n/**\n * Default logger configuration\n */\nconst DEFAULT_CONFIG: LoggerConfig = {\n  minLevel: LogLevel.INFO,\n  enableConsole: true,\n  enableTimestamps: true,\n  prettyPrint: true,\n};\n\n/**\n * Simple logger implementation\n */\nexport class Logger implements ILogger {\n  private config: LoggerConfig;\n  private logs: LogEntry[] = [];\n\n  constructor(config?: Partial<LoggerConfig>) {\n    this.config = { ...DEFAULT_CONFIG, ...config };\n  }\n\n  /**\n   * Log a debug message\n   */\n  debug(message: string, context?: Record<string, unknown>): void {\n    this.log(LogLevel.DEBUG, message, context);\n  }\n\n  /**\n   * Log an info message\n   */\n  info(message: string, context?: Record<string, unknown>): void {\n    this.log(LogLevel.INFO, message, context);\n  }\n\n  /**\n   * Log a warning message\n   */\n  warn(message: string, context?: Record<string, unknown>): void {\n    this.log(LogLevel.WARN, message, context);\n  }\n\n  /**\n   * Log an error message\n   */\n  error(message: string, error?: Error, context?: Record<string, unknown>): void {\n    this.log(LogLevel.ERROR, message, context, error);\n  }\n\n  /**\n   * Internal log method\n   */\n  private log(\n    level: LogLevel,\n    message: string,\n    context?: Record<string, unknown>,\n    error?: Error\n  ): void {\n    if (level < this.config.minLevel) {\n      return;\n    }\n\n    const entry: LogEntry = {\n      level,\n      message,\n      timestamp: new Date(),\n      context,\n      error,\n    };\n\n    this.logs.push(entry);\n\n    if (this.config.enableConsole) {\n      this.writeToConsole(entry);\n    }\n  }\n\n  /**\n   * Write log entry to console\n   */\n  private writeToConsole(entry: LogEntry): void {\n    const levelName = LogLevel[entry.level];\n    const timestamp = this.config.enableTimestamps\n      ? `[${entry.timestamp.toISOString()}] `\n      : '';\n\n    let message = `${timestamp}${levelName}: ${entry.message}`;\n\n    if (entry.context && this.config.prettyPrint) {\n      message += `\\n  Context: ${JSON.stringify(entry.context, null, 2)}`;\n    }\n\n    if (entry.error) {\n      message += `\\n  Error: ${entry.error.message}`;\n      if (entry.error.stack && this.config.prettyPrint) {\n        message += `\\n  Stack: ${entry.error.stack}`;\n      }\n    }\n\n    switch (entry.level) {\n      case LogLevel.DEBUG:\n      case LogLevel.INFO:\n        console.log(message);\n        break;\n      case LogLevel.WARN:\n        console.warn(message);\n        break;\n      case LogLevel.ERROR:\n        console.error(message);\n        break;\n    }\n  }\n\n  /**\n   * Get all log entries\n   */\n  getLogs(minLevel?: LogLevel): LogEntry[] {\n    if (minLevel !== undefined) {\n      return this.logs.filter(log => log.level >= minLevel);\n    }\n    return [...this.logs];\n  }\n\n  /**\n   * Clear all logs\n   */\n  clearLogs(): void {\n    this.logs = [];\n  }\n\n  /**\n   * Set minimum log level\n   */\n  setLevel(level: LogLevel): void {\n    this.config.minLevel = level;\n  }\n\n  /**\n   * Export logs as JSON\n   */\n  exportLogs(): string {\n    return JSON.stringify(this.logs.map(log => ({\n      ...log,\n      level: LogLevel[log.level],\n      timestamp: log.timestamp.toISOString(),\n    })), null, 2);\n  }\n}\n\n/**\n * Global logger instance\n */\nexport const logger = new Logger();\n\n/**\n * Create a logger instance with custom config\n */\nexport function createLogger(config?: Partial<LoggerConfig>): Logger {\n  return new Logger(config);\n}\n","/**\n * LRU Cache (v3.4.0)\n * Phase 4 Task 9.6: Least Recently Used cache implementation\n */\n\nimport type { Cache, CacheConfig, CacheEntry, CacheStats } from './types.js';\n\n/**\n * LRU (Least Recently Used) cache\n */\nexport class LRUCache<T> implements Cache<T> {\n  private cache: Map<string, CacheEntry<T>>;\n  private config: Required<CacheConfig>;\n  private stats: CacheStats;\n\n  constructor(config: Partial<CacheConfig> = {}) {\n    this.cache = new Map();\n    this.config = {\n      /**\n       * Default max cache size: 100 entries\n       * Reasoning:\n       * - Validation cache typically stores session/thought validation results\n       * - Average entry size: ~1-2KB (validation result + metadata)\n       * - 100 entries = ~100-200KB memory usage\n       * - Sufficient for most use cases (covers recent validations)\n       * - Prevents unbounded memory growth in long-running processes\n       * - Can be overridden via config parameter for high-traffic scenarios\n       */\n      maxSize: config.maxSize || 100,\n      strategy: 'lru',\n      ttl: config.ttl || 0,\n      enableStats: config.enableStats !== false,\n      onEvict: config.onEvict || (() => {}),\n    };\n\n    this.stats = {\n      size: 0,\n      maxSize: this.config.maxSize,\n      hits: 0,\n      misses: 0,\n      hitRate: 0,\n      evictions: 0,\n      sets: 0,\n      deletes: 0,\n      memoryUsage: 0,\n      avgAccessTime: 0,\n    };\n  }\n\n  /**\n   * Get value by key\n   */\n  get(key: string): T | undefined {\n    const entry = this.cache.get(key);\n\n    if (!entry) {\n      if (this.config.enableStats) {\n        this.stats.misses++;\n        this.updateHitRate();\n      }\n      return undefined;\n    }\n\n    // Check expiration\n    if (entry.expiresAt && entry.expiresAt < new Date()) {\n      this.delete(key);\n      if (this.config.enableStats) {\n        this.stats.misses++;\n        this.updateHitRate();\n      }\n      return undefined;\n    }\n\n    // Update access time (LRU behavior)\n    entry.lastAccessedAt = new Date();\n    entry.accessCount++;\n\n    // Move to end (most recently used)\n    this.cache.delete(key);\n    this.cache.set(key, entry);\n\n    if (this.config.enableStats) {\n      this.stats.hits++;\n      this.updateHitRate();\n    }\n\n    return entry.value;\n  }\n\n  /**\n   * Set value for key\n   */\n  set(key: string, value: T, ttl?: number): void {\n    // Check if key exists\n    const existing = this.cache.get(key);\n    if (existing) {\n      this.cache.delete(key);\n    } else if (this.cache.size >= this.config.maxSize) {\n      // Evict least recently used (first entry)\n      this.evictLRU();\n    }\n\n    // Create entry\n    const now = new Date();\n    const effectiveTtl = ttl ?? this.config.ttl;\n    const entry: CacheEntry<T> = {\n      key,\n      value,\n      createdAt: now,\n      lastAccessedAt: now,\n      accessCount: 0,\n      expiresAt: effectiveTtl ? new Date(now.getTime() + effectiveTtl) : undefined,\n      size: this.estimateSize(value),\n    };\n\n    this.cache.set(key, entry);\n\n    if (this.config.enableStats) {\n      this.stats.sets++;\n      this.stats.size = this.cache.size;\n      this.stats.memoryUsage += entry.size || 0;\n    }\n  }\n\n  /**\n   * Check if key exists\n   */\n  has(key: string): boolean {\n    const entry = this.cache.get(key);\n    if (!entry) return false;\n\n    // Check expiration\n    if (entry.expiresAt && entry.expiresAt < new Date()) {\n      this.delete(key);\n      return false;\n    }\n\n    return true;\n  }\n\n  /**\n   * Delete entry by key\n   */\n  delete(key: string): boolean {\n    const entry = this.cache.get(key);\n    if (!entry) return false;\n\n    this.cache.delete(key);\n\n    if (this.config.enableStats) {\n      this.stats.deletes++;\n      this.stats.size = this.cache.size;\n      this.stats.memoryUsage -= entry.size || 0;\n    }\n\n    return true;\n  }\n\n  /**\n   * Clear all entries\n   */\n  clear(): void {\n    this.cache.clear();\n\n    if (this.config.enableStats) {\n      this.stats.size = 0;\n      this.stats.memoryUsage = 0;\n    }\n  }\n\n  /**\n   * Get cache size\n   */\n  size(): number {\n    return this.cache.size;\n  }\n\n  /**\n   * Get cache statistics\n   */\n  getStats(): CacheStats {\n    return { ...this.stats };\n  }\n\n  /**\n   * Get all keys\n   */\n  keys(): string[] {\n    return Array.from(this.cache.keys());\n  }\n\n  /**\n   * Get all values\n   */\n  values(): T[] {\n    return Array.from(this.cache.values()).map(e => e.value);\n  }\n\n  /**\n   * Get all entries\n   */\n  entries(): Array<[string, T]> {\n    return Array.from(this.cache.entries()).map(([k, v]) => [k, v.value]);\n  }\n\n  /**\n   * Evict least recently used entry\n   */\n  private evictLRU(): void {\n    // First entry is least recently used\n    const firstKey = this.cache.keys().next().value;\n    if (firstKey) {\n      const entry = this.cache.get(firstKey);\n      this.cache.delete(firstKey);\n\n      if (this.config.onEvict && entry) {\n        this.config.onEvict(firstKey, entry.value);\n      }\n\n      if (this.config.enableStats) {\n        this.stats.evictions++;\n        this.stats.size = this.cache.size;\n        if (entry) {\n          this.stats.memoryUsage -= entry.size || 0;\n        }\n      }\n    }\n  }\n\n  /**\n   * Update hit rate\n   */\n  private updateHitRate(): void {\n    const total = this.stats.hits + this.stats.misses;\n    this.stats.hitRate = total > 0 ? this.stats.hits / total : 0;\n  }\n\n  /**\n   * Estimate entry size\n   */\n  private estimateSize(value: T): number {\n    try {\n      return JSON.stringify(value).length * 2; // Rough estimate (UTF-16)\n    } catch {\n      return 0;\n    }\n  }\n\n  /**\n   * Clean expired entries\n   */\n  cleanExpired(): number {\n    let cleaned = 0;\n    const now = new Date();\n\n    for (const [key, entry] of this.cache) {\n      if (entry.expiresAt && entry.expiresAt < now) {\n        this.delete(key);\n        cleaned++;\n      }\n    }\n\n    return cleaned;\n  }\n}\n","/**\n * Centralized configuration for DeepThinking MCP Server\n *\n * All configurable values should be defined here to enable\n * easy environment-based configuration and deployment flexibility.\n */\n\n/**\n * Server configuration\n */\nexport interface ServerConfig {\n  /** Maximum number of thoughts to keep in memory per session */\n  maxThoughtsInMemory: number;\n\n  /** Threshold for compressing old thoughts */\n  compressionThreshold: number;\n\n  /** Maximum content length in characters */\n  maxContentLength: number;\n\n  /** Validation tolerance for mathematical checks (e.g., mass sum) */\n  validationTolerance: number;\n\n  /** Maximum number of active sessions to keep in memory */\n  maxActiveSessions: number;\n\n  /** Session timeout in milliseconds (0 = no timeout) */\n  sessionTimeoutMs: number;\n\n  /** Enable validation result caching */\n  enableValidationCache: boolean;\n\n  /** Validation cache max size (number of entries) */\n  validationCacheMaxSize: number;\n\n  /** Enable session persistence to disk */\n  enablePersistence: boolean;\n\n  /** Directory for session persistence (if enabled) */\n  persistenceDir: string;\n\n  /** Log level: 'debug' | 'info' | 'warn' | 'error' */\n  logLevel: 'debug' | 'info' | 'warn' | 'error';\n\n  /** Enable performance metrics logging */\n  enablePerformanceMetrics: boolean;\n}\n\n/**\n * Default configuration values\n */\nconst defaultConfig: ServerConfig = {\n  maxThoughtsInMemory: parseInt(process.env.MCP_MAX_THOUGHTS || '1000', 10),\n  compressionThreshold: parseInt(process.env.MCP_COMPRESSION_THRESHOLD || '500', 10),\n  maxContentLength: parseInt(process.env.MCP_MAX_CONTENT_LENGTH || '10000', 10),\n  validationTolerance: parseFloat(process.env.MCP_VALIDATION_TOLERANCE || '0.01'),\n  maxActiveSessions: parseInt(process.env.MCP_MAX_SESSIONS || '100', 10),\n  sessionTimeoutMs: parseInt(process.env.MCP_SESSION_TIMEOUT_MS || '0', 10),\n  enableValidationCache: process.env.MCP_ENABLE_VALIDATION_CACHE !== 'false',\n  validationCacheMaxSize: parseInt(process.env.MCP_VALIDATION_CACHE_SIZE || '1000', 10),\n  enablePersistence: process.env.MCP_ENABLE_PERSISTENCE === 'true',\n  persistenceDir: process.env.MCP_PERSISTENCE_DIR || './.deepthinking-sessions',\n  logLevel: (process.env.MCP_LOG_LEVEL || 'info') as ServerConfig['logLevel'],\n  enablePerformanceMetrics: process.env.MCP_ENABLE_PERF_METRICS === 'true',\n};\n\n/**\n * Current active configuration (can be overridden)\n */\nlet activeConfig: ServerConfig = { ...defaultConfig };\n\n/**\n * Get the current configuration\n */\nexport function getConfig(): Readonly<ServerConfig> {\n  return Object.freeze({ ...activeConfig });\n}\n\n/**\n * Update configuration (for testing or runtime changes)\n *\n * @param updates - Partial configuration to merge with existing config\n * @returns The updated configuration\n */\nexport function updateConfig(updates: Partial<ServerConfig>): Readonly<ServerConfig> {\n  activeConfig = { ...activeConfig, ...updates };\n  return getConfig();\n}\n\n/**\n * Reset configuration to defaults\n */\nexport function resetConfig(): void {\n  activeConfig = { ...defaultConfig };\n}\n\n/**\n * Validate configuration values\n *\n * @throws Error if configuration is invalid\n */\nexport function validateConfig(config: ServerConfig): void {\n  if (config.maxThoughtsInMemory < 1) {\n    throw new Error('maxThoughtsInMemory must be at least 1');\n  }\n\n  if (config.compressionThreshold < 0) {\n    throw new Error('compressionThreshold must be non-negative');\n  }\n\n  if (config.maxContentLength < 1) {\n    throw new Error('maxContentLength must be at least 1');\n  }\n\n  if (config.validationTolerance < 0 || config.validationTolerance > 1) {\n    throw new Error('validationTolerance must be between 0 and 1');\n  }\n\n  if (config.maxActiveSessions < 1) {\n    throw new Error('maxActiveSessions must be at least 1');\n  }\n\n  if (config.sessionTimeoutMs < 0) {\n    throw new Error('sessionTimeoutMs must be non-negative');\n  }\n\n  if (config.validationCacheMaxSize < 0) {\n    throw new Error('validationCacheMaxSize must be non-negative');\n  }\n\n  if (!['debug', 'info', 'warn', 'error'].includes(config.logLevel)) {\n    throw new Error('logLevel must be one of: debug, info, warn, error');\n  }\n}\n\n// Validate default config on load\nvalidateConfig(activeConfig);\n\n/**\n * Export constants for common use\n */\nexport const CONFIG = getConfig();\n","/**\n * Validation result caching for performance optimization\n *\n * Caches validation results to avoid redundant validation of unchanging content.\n * Uses content-based hashing for cache keys to ensure correctness.\n */\n\nimport { getConfig } from '../config/index.js';\nimport { ValidationResult } from '../types/session.js';\nimport { createHash } from 'crypto';\n\n/**\n * Validation result entry\n */\nexport interface ValidationCacheEntry {\n  /** Cached validation result */\n  result: ValidationResult;\n\n  /** Timestamp of validation */\n  timestamp: number;\n\n  /** Number of times this cache entry was hit */\n  hitCount: number;\n}\n\n/**\n * LRU Cache for validation results\n */\nexport class ValidationCache {\n  private cache: Map<string, ValidationCacheEntry>;\n  private maxSize: number;\n  private hits: number = 0;\n  private misses: number = 0;\n\n  constructor(maxSize?: number) {\n    const config = getConfig();\n    this.maxSize = maxSize || config.validationCacheMaxSize;\n    this.cache = new Map();\n  }\n\n  /**\n   * Generate a cache key from thought content\n   *\n   * Uses SHA-256 hash of JSON-serialized content for reliable cache keys\n   *\n   * @param content - Content to hash\n   * @returns Cache key\n   */\n  private generateKey(content: unknown): string {\n    const json = JSON.stringify(content);\n    return createHash('sha256').update(json).digest('hex');\n  }\n\n  /**\n   * Get validation result from cache\n   *\n   * @param content - Content to look up\n   * @returns Cached result or undefined if not found\n   */\n  get(content: unknown): ValidationCacheEntry | undefined {\n    const key = this.generateKey(content);\n    const entry = this.cache.get(key);\n\n    if (entry) {\n      this.hits++;\n      entry.hitCount++;\n\n      // Move to end (LRU)\n      this.cache.delete(key);\n      this.cache.set(key, entry);\n\n      return entry;\n    }\n\n    this.misses++;\n    return undefined;\n  }\n\n  /**\n   * Store validation result in cache\n   *\n   * @param content - Content that was validated\n   * @param result - Validation result to cache\n   */\n  set(content: unknown, result: ValidationResult): void {\n    const key = this.generateKey(content);\n\n    // If cache is full, remove least recently used (first entry)\n    if (this.cache.size >= this.maxSize) {\n      const firstKey = this.cache.keys().next().value;\n      if (firstKey !== undefined) {\n        this.cache.delete(firstKey);\n      }\n    }\n\n    const entry: ValidationCacheEntry = {\n      result,\n      timestamp: Date.now(),\n      hitCount: 0,\n    };\n\n    this.cache.set(key, entry);\n  }\n\n  /**\n   * Check if content is in cache\n   *\n   * @param content - Content to check\n   * @returns true if cached\n   */\n  has(content: unknown): boolean {\n    const key = this.generateKey(content);\n    return this.cache.has(key);\n  }\n\n  /**\n   * Clear all cached validation results\n   */\n  clear(): void {\n    this.cache.clear();\n    this.hits = 0;\n    this.misses = 0;\n  }\n\n  /**\n   * Get cache statistics\n   */\n  getStats(): {\n    size: number;\n    maxSize: number;\n    hits: number;\n    misses: number;\n    hitRate: number;\n  } {\n    const total = this.hits + this.misses;\n    return {\n      size: this.cache.size,\n      maxSize: this.maxSize,\n      hits: this.hits,\n      misses: this.misses,\n      hitRate: total > 0 ? this.hits / total : 0,\n    };\n  }\n\n  /**\n   * Resize the cache\n   *\n   * @param newSize - New maximum cache size\n   */\n  resize(newSize: number): void {\n    this.maxSize = newSize;\n\n    // If cache is now too large, trim it\n    if (this.cache.size > newSize) {\n      const keysToDelete = this.cache.size - newSize;\n      const keys = Array.from(this.cache.keys());\n\n      for (let i = 0; i < keysToDelete; i++) {\n        this.cache.delete(keys[i]);\n      }\n    }\n  }\n\n  /**\n   * Get entries sorted by hit count (most used first)\n   */\n  getTopEntries(limit: number = 10): Array<{ key: string; entry: ValidationCacheEntry }> {\n    const entries = Array.from(this.cache.entries())\n      .map(([key, entry]) => ({ key, entry }))\n      .sort((a, b) => b.entry.hitCount - a.entry.hitCount);\n\n    return entries.slice(0, limit);\n  }\n\n  /**\n   * Remove entries older than a certain age\n   *\n   * @param maxAgeMs - Maximum age in milliseconds\n   * @returns Number of entries removed\n   */\n  evictOld(maxAgeMs: number): number {\n    const now = Date.now();\n    let removed = 0;\n\n    for (const [key, entry] of this.cache.entries()) {\n      if (now - entry.timestamp > maxAgeMs) {\n        this.cache.delete(key);\n        removed++;\n      }\n    }\n\n    return removed;\n  }\n}\n\n/**\n * Global validation cache instance\n */\nexport const validationCache = new ValidationCache();\n","/**\n * Session Metrics Calculator (v3.4.5)\n * Sprint 3 Task 3.4: Extract metrics logic from SessionManager\n *\n * Handles all session metrics calculations including:\n * - Basic metrics (thought counts, revisions, time spent)\n * - Mode-specific metrics (temporal, game theory, evidential)\n * - Incremental calculations for performance (O(1) updates)\n * - Cache statistics tracking\n *\n * RESPONSIBILITY:\n * - Initialize session metrics\n * - Update metrics incrementally as thoughts are added\n * - Calculate mode-specific custom metrics\n * - Track validation cache statistics\n *\n * EXTRACTED FROM: src/session/manager.ts (metrics methods)\n */\n\nimport { ThinkingSession, SessionMetrics, Thought } from '../types/index.js';\nimport { isTemporalThought, isGameTheoryThought, isEvidentialThought } from '../types/core.js';\nimport { validationCache } from '../validation/cache.js';\n\n/**\n * Session Metrics Calculator - Handles all metrics computations\n *\n * Provides efficient, incremental metrics updates using O(1) algorithms\n * where possible. Tracks both generic and mode-specific metrics.\n *\n * @example\n * ```typescript\n * const calculator = new SessionMetricsCalculator();\n *\n * // Initialize metrics for new session\n * session.metrics = calculator.initializeMetrics();\n *\n * // Update metrics after adding thought\n * calculator.updateMetrics(session, newThought);\n * ```\n */\nexport class SessionMetricsCalculator {\n  /**\n   * Initialize metrics for a new session\n   *\n   * Creates a fresh metrics object with all counters set to zero\n   * and cache statistics initialized.\n   *\n   * @returns Initialized session metrics\n   *\n   * @example\n   * ```typescript\n   * const metrics = calculator.initializeMetrics();\n   * session.metrics = metrics;\n   * ```\n   */\n  initializeMetrics(): SessionMetrics {\n    return {\n      totalThoughts: 0,\n      thoughtsByType: {},\n      averageUncertainty: 0,\n      revisionCount: 0,\n      timeSpent: 0,\n      dependencyDepth: 0,\n      customMetrics: new Map(),\n      cacheStats: {\n        hits: 0,\n        misses: 0,\n        hitRate: 0,\n        size: 0,\n        maxSize: 0,\n      },\n    };\n  }\n\n  /**\n   * Update session metrics after adding a thought\n   *\n   * Performs incremental updates using O(1) algorithms for performance.\n   * Handles mode-specific metrics for temporal, game theory, and evidential modes.\n   *\n   * **Performance Optimizations**:\n   * - Incremental thoughtsByType counter (O(1) vs O(n) recalculation)\n   * - Running average for uncertainty (O(1) vs O(n) recalculation)\n   * - Max dependency depth tracking (O(1) comparison)\n   *\n   * @param session - Session to update (modified in-place)\n   * @param thought - Newly added thought\n   *\n   * @example\n   * ```typescript\n   * calculator.updateMetrics(session, newThought);\n   * console.log(session.metrics.totalThoughts); // Incremented\n   * ```\n   */\n  updateMetrics(session: ThinkingSession, thought: Thought): void {\n    const metrics = session.metrics;\n\n    // Update total thoughts\n    metrics.totalThoughts = session.thoughts.length;\n\n    // Update thoughtsByType incrementally (O(1) instead of recalculating)\n    const thoughtType = thought.mode || 'unknown';\n    metrics.thoughtsByType[thoughtType] = (metrics.thoughtsByType[thoughtType] || 0) + 1;\n\n    // Update revision count\n    if (thought.isRevision) {\n      metrics.revisionCount++;\n    }\n\n    // Update time spent (in milliseconds)\n    metrics.timeSpent = session.updatedAt.getTime() - session.createdAt.getTime();\n\n    // Update average uncertainty incrementally (O(1) instead of O(n))\n    if ('uncertainty' in thought && typeof (thought as any).uncertainty === 'number') {\n      const uncertaintyValue = (thought as any).uncertainty;\n      const currentSum = metrics._uncertaintySum || 0;\n      const currentCount = metrics._uncertaintyCount || 0;\n\n      const newSum = currentSum + uncertaintyValue;\n      const newCount = currentCount + 1;\n\n      metrics._uncertaintySum = newSum;\n      metrics._uncertaintyCount = newCount;\n      metrics.averageUncertainty = newSum / newCount;\n    }\n\n    // Update dependency depth\n    if ('dependencies' in thought && thought.dependencies) {\n      const deps = (thought as any).dependencies as string[];\n      if (deps && deps.length > metrics.dependencyDepth) {\n        metrics.dependencyDepth = deps.length;\n      }\n    }\n\n    // Update mode-specific metrics\n    this.updateModeSpecificMetrics(metrics, thought);\n\n    // Update validation cache statistics\n    this.updateCacheStats(session);\n  }\n\n  /**\n   * Update mode-specific custom metrics\n   *\n   * Calculates and stores metrics unique to specific thinking modes:\n   * - Temporal: events, timeline, relations, constraints, intervals\n   * - Game Theory: players, strategies, equilibria, game type\n   * - Evidential: hypotheses, evidence, belief functions, decisions\n   *\n   * @param metrics - Session metrics to update\n   * @param thought - Thought to analyze\n   */\n  private updateModeSpecificMetrics(metrics: SessionMetrics, thought: Thought): void {\n    // Temporal-specific metrics (Phase 3, v2.1)\n    if (isTemporalThought(thought)) {\n      if (thought.events) {\n        metrics.customMetrics.set('totalEvents', thought.events.length);\n      }\n      if (thought.timeline) {\n        metrics.customMetrics.set('timelineUnit', thought.timeline.timeUnit);\n      }\n      if (thought.relations) {\n        const causalRelations = thought.relations.filter(r => r.relationType === 'causes');\n        metrics.customMetrics.set('causalRelations', causalRelations.length);\n      }\n      if (thought.constraints) {\n        metrics.customMetrics.set('temporalConstraints', thought.constraints.length);\n      }\n      if (thought.intervals) {\n        metrics.customMetrics.set('timeIntervals', thought.intervals.length);\n      }\n    }\n\n    // Game theory-specific metrics (Phase 3, v2.2)\n    if (isGameTheoryThought(thought)) {\n      if (thought.players) {\n        metrics.customMetrics.set('numPlayers', thought.players.length);\n      }\n      if (thought.strategies) {\n        metrics.customMetrics.set('totalStrategies', thought.strategies.length);\n        const mixedStrategies = thought.strategies.filter(s => !s.isPure);\n        metrics.customMetrics.set('mixedStrategies', mixedStrategies.length);\n      }\n      if (thought.nashEquilibria) {\n        metrics.customMetrics.set('nashEquilibria', thought.nashEquilibria.length);\n        const pureEquilibria = thought.nashEquilibria.filter(e => e.type === 'pure');\n        metrics.customMetrics.set('pureNashEquilibria', pureEquilibria.length);\n      }\n      if (thought.dominantStrategies) {\n        metrics.customMetrics.set('dominantStrategies', thought.dominantStrategies.length);\n      }\n      if (thought.game) {\n        metrics.customMetrics.set('gameType', thought.game.type);\n        metrics.customMetrics.set('isZeroSum', thought.game.isZeroSum);\n      }\n    }\n\n    // Evidential-specific metrics (Phase 3, v2.3)\n    if (isEvidentialThought(thought)) {\n      if (thought.hypotheses) {\n        metrics.customMetrics.set('totalHypotheses', thought.hypotheses.length);\n      }\n      if (thought.evidence) {\n        metrics.customMetrics.set('totalEvidence', thought.evidence.length);\n        const avgReliability = thought.evidence.reduce((sum, e) => sum + e.reliability, 0) / thought.evidence.length;\n        metrics.customMetrics.set('avgEvidenceReliability', avgReliability);\n      }\n      if (thought.beliefFunctions) {\n        metrics.customMetrics.set('beliefFunctions', thought.beliefFunctions.length);\n      }\n      if (thought.combinedBelief) {\n        metrics.customMetrics.set('hasCombinedBelief', true);\n        if (thought.combinedBelief.conflictMass !== undefined) {\n          metrics.customMetrics.set('conflictMass', thought.combinedBelief.conflictMass);\n        }\n      }\n      if (thought.decisions) {\n        metrics.customMetrics.set('decisions', thought.decisions.length);\n      }\n    }\n  }\n\n  /**\n   * Update validation cache statistics in session metrics\n   *\n   * Retrieves current validation cache statistics and updates the\n   * session metrics with the latest values.\n   *\n   * @param session - Session to update\n   *\n   * @example\n   * ```typescript\n   * calculator.updateCacheStats(session);\n   * console.log(session.metrics.cacheStats.hitRate); // Updated\n   * ```\n   */\n  private updateCacheStats(session: ThinkingSession): void {\n    const cacheStats = validationCache.getStats();\n    session.metrics.cacheStats = {\n      hits: cacheStats.hits,\n      misses: cacheStats.misses,\n      hitRate: cacheStats.hitRate,\n      size: cacheStats.size,\n      maxSize: cacheStats.maxSize,\n    };\n  }\n}\n","/**\n * Meta-Reasoning Monitor Service (v6.0.0)\n * Phase 6: Session monitoring and strategy evaluation\n *\n * Tracks reasoning sessions, evaluates strategy effectiveness,\n * and provides meta-level insights for adaptive reasoning.\n */\n\nimport { Thought, ThinkingMode } from '../types/core.js';\nimport {\n  StrategyEvaluation,\n  AlternativeStrategy,\n  QualityMetrics,\n  SessionContext,\n} from '../types/modes/metareasoning.js';\n\n/**\n * Session history entry\n */\ninterface SessionHistoryEntry {\n  thoughtId: string;\n  mode: ThinkingMode;\n  timestamp: Date;\n  content: string;\n  uncertainty?: number;\n}\n\n/**\n * Strategy performance metrics\n */\ninterface StrategyPerformance {\n  mode: ThinkingMode;\n  thoughtsSpent: number;\n  startTime: Date;\n  endTime?: Date;\n  progressIndicators: string[];\n  issuesEncountered: string[];\n}\n\n/**\n * Meta-Monitoring Service\n * Tracks and evaluates reasoning sessions for meta-reasoning insights\n */\nexport class MetaMonitor {\n  private sessionHistory: Map<string, SessionHistoryEntry[]> = new Map();\n  private currentStrategies: Map<string, StrategyPerformance> = new Map();\n  private modeTransitions: Map<string, ThinkingMode[]> = new Map();\n\n  /**\n   * Record a thought in session history\n   */\n  recordThought(sessionId: string, thought: Thought): void {\n    if (!this.sessionHistory.has(sessionId)) {\n      this.sessionHistory.set(sessionId, []);\n    }\n\n    const history = this.sessionHistory.get(sessionId)!;\n    history.push({\n      thoughtId: thought.id,\n      mode: thought.mode,\n      timestamp: thought.timestamp,\n      content: thought.content,\n      uncertainty: 'uncertainty' in thought ? (thought as any).uncertainty : undefined,\n    });\n\n    // Track mode transitions\n    if (!this.modeTransitions.has(sessionId)) {\n      this.modeTransitions.set(sessionId, []);\n    }\n    const transitions = this.modeTransitions.get(sessionId)!;\n    if (transitions.length === 0 || transitions[transitions.length - 1] !== thought.mode) {\n      transitions.push(thought.mode);\n    }\n  }\n\n  /**\n   * Start tracking a new strategy\n   */\n  startStrategy(sessionId: string, mode: ThinkingMode): void {\n    this.currentStrategies.set(sessionId, {\n      mode,\n      thoughtsSpent: 0,\n      startTime: new Date(),\n      progressIndicators: [],\n      issuesEncountered: [],\n    });\n  }\n\n  /**\n   * Update current strategy progress\n   */\n  updateStrategyProgress(sessionId: string, indicator: string): void {\n    const strategy = this.currentStrategies.get(sessionId);\n    if (strategy) {\n      strategy.progressIndicators.push(indicator);\n      strategy.thoughtsSpent++;\n    }\n  }\n\n  /**\n   * Record an issue with current strategy\n   */\n  recordStrategyIssue(sessionId: string, issue: string): void {\n    const strategy = this.currentStrategies.get(sessionId);\n    if (strategy) {\n      strategy.issuesEncountered.push(issue);\n    }\n  }\n\n  /**\n   * Evaluate current strategy effectiveness\n   */\n  evaluateStrategy(sessionId: string): StrategyEvaluation {\n    const strategy = this.currentStrategies.get(sessionId);\n\n    if (!strategy) {\n      // No active strategy - return baseline evaluation\n      return {\n        effectiveness: 0.5,\n        efficiency: 0.5,\n        confidence: 0.5,\n        progressRate: 0,\n        qualityScore: 0.5,\n        issues: ['No active strategy being tracked'],\n        strengths: [],\n      };\n    }\n\n    // Calculate metrics\n    const thoughtsSpent = strategy.thoughtsSpent;\n    const progressMade = strategy.progressIndicators.length;\n    const issuesCount = strategy.issuesEncountered.length;\n    const timeElapsed = new Date().getTime() - strategy.startTime.getTime();\n\n    // Effectiveness: progress relative to effort\n    const effectiveness = Math.min(1.0, progressMade / Math.max(1, thoughtsSpent));\n\n    // Efficiency: progress per unit time\n    const efficiency = timeElapsed > 0 ? Math.min(1.0, progressMade / (timeElapsed / 60000)) : 0.5;\n\n    // Confidence: based on issues encountered\n    const confidence = Math.max(0.1, 1.0 - issuesCount * 0.15);\n\n    // Progress rate: insights per thought\n    const progressRate = thoughtsSpent > 0 ? progressMade / thoughtsSpent : 0;\n\n    // Quality score: weighted combination\n    const qualityScore = effectiveness * 0.4 + efficiency * 0.2 + confidence * 0.4;\n\n    return {\n      effectiveness,\n      efficiency,\n      confidence,\n      progressRate,\n      qualityScore,\n      issues: [...strategy.issuesEncountered],\n      strengths: strategy.progressIndicators.slice(-3), // Recent progress\n    };\n  }\n\n  /**\n   * Suggest alternative strategies based on current performance\n   */\n  suggestAlternatives(sessionId: string, currentMode: ThinkingMode): AlternativeStrategy[] {\n    const evaluation = this.evaluateStrategy(sessionId);\n    const alternatives: AlternativeStrategy[] = [];\n\n    // If current strategy is failing, suggest fundamental alternatives\n    if (evaluation.effectiveness < 0.4) {\n      // Suggest switching to a different core reasoning mode\n      if (currentMode !== ThinkingMode.HYBRID) {\n        alternatives.push({\n          mode: ThinkingMode.HYBRID,\n          reasoning: 'Low effectiveness detected - hybrid multi-modal approach may provide better results',\n          expectedBenefit: 'Combines multiple reasoning types for comprehensive analysis',\n          switchingCost: 0.3,\n          recommendationScore: 0.85,\n        });\n      }\n\n      if (currentMode !== ThinkingMode.INDUCTIVE) {\n        alternatives.push({\n          mode: ThinkingMode.INDUCTIVE,\n          reasoning: 'Consider gathering more empirical observations',\n          expectedBenefit: 'Build stronger generalizations from specific cases',\n          switchingCost: 0.2,\n          recommendationScore: 0.70,\n        });\n      }\n    }\n\n    // If making progress but slowly, suggest refinements\n    if (evaluation.effectiveness >= 0.4 && evaluation.efficiency < 0.5) {\n      alternatives.push({\n        mode: currentMode, // Same mode, but recommend refinement\n        reasoning: 'Progress detected but efficiency is low - consider refining current approach',\n        expectedBenefit: 'Improved efficiency while maintaining progress',\n        switchingCost: 0.1,\n        recommendationScore: 0.65,\n      });\n    }\n\n    return alternatives;\n  }\n\n  /**\n   * Calculate quality metrics for current session\n   */\n  calculateQualityMetrics(sessionId: string): QualityMetrics {\n    const history = this.sessionHistory.get(sessionId) || [];\n    const strategy = this.currentStrategies.get(sessionId);\n\n    if (history.length === 0) {\n      // No history - return neutral metrics\n      return {\n        logicalConsistency: 0.5,\n        evidenceQuality: 0.5,\n        completeness: 0.5,\n        originality: 0.5,\n        clarity: 0.5,\n        overallQuality: 0.5,\n      };\n    }\n\n    // Logical consistency: fewer contradictions and issues\n    const issuesCount = strategy?.issuesEncountered.length || 0;\n    const logicalConsistency = Math.max(0.1, 1.0 - issuesCount * 0.1);\n\n    // Evidence quality: based on uncertainty levels\n    const avgUncertainty =\n      history.reduce((sum, entry) => sum + (entry.uncertainty || 0.5), 0) / history.length;\n    const evidenceQuality = 1.0 - avgUncertainty;\n\n    // Completeness: thoughts addressing multiple aspects\n    const completeness = Math.min(1.0, history.length / 5); // Normalize to 5 thoughts\n\n    // Originality: mode diversity\n    const uniqueModes = new Set(history.map((h) => h.mode)).size;\n    const originality = Math.min(1.0, uniqueModes / 3); // Normalize to 3 unique modes\n\n    // Clarity: based on progress indicators\n    const progressCount = strategy?.progressIndicators.length || 0;\n    const clarity = Math.min(1.0, progressCount / Math.max(1, history.length));\n\n    // Overall quality: weighted average\n    const overallQuality =\n      logicalConsistency * 0.25 +\n      evidenceQuality * 0.2 +\n      completeness * 0.15 +\n      originality * 0.15 +\n      clarity * 0.25;\n\n    return {\n      logicalConsistency,\n      evidenceQuality,\n      completeness,\n      originality,\n      clarity,\n      overallQuality,\n    };\n  }\n\n  /**\n   * Get session context for meta-reasoning\n   */\n  getSessionContext(sessionId: string, problemType: string): SessionContext {\n    const history = this.sessionHistory.get(sessionId) || [];\n    const transitions = this.modeTransitions.get(sessionId) || [];\n\n    return {\n      sessionId,\n      totalThoughts: history.length,\n      modesUsed: transitions,\n      modeSwitches: Math.max(0, transitions.length - 1),\n      problemType,\n      historicalEffectiveness: this.getHistoricalEffectiveness(problemType),\n    };\n  }\n\n  /**\n   * Get historical effectiveness for similar problems (simplified)\n   */\n  private getHistoricalEffectiveness(_problemType: string): number | undefined {\n    // In a full implementation, this would query past sessions\n    // For now, return undefined to indicate no historical data\n    return undefined;\n  }\n\n  /**\n   * Clear session data (for cleanup)\n   */\n  clearSession(sessionId: string): void {\n    this.sessionHistory.delete(sessionId);\n    this.currentStrategies.delete(sessionId);\n    this.modeTransitions.delete(sessionId);\n  }\n\n  /**\n   * Get all tracked sessions\n   */\n  getActiveSessions(): string[] {\n    return Array.from(this.sessionHistory.keys());\n  }\n}\n\n/**\n * Global meta-monitor instance\n */\nexport const metaMonitor = new MetaMonitor();\n","/**\n * Session Manager for DeepThinking MCP (v6.0.0)\n * Sprint 3 Task 3.4: Refactored to use SessionMetricsCalculator\n * Phase 6 Sprint 2: Integrated with MetaMonitor for meta-reasoning tracking\n *\n * Manages thinking sessions, persistence, and coordinates with metrics calculator.\n * Tracks session thoughts for meta-reasoning insights and adaptive mode switching.\n */\n\nimport { randomUUID } from 'crypto';\nimport {\n  ThinkingSession,\n  SessionConfig,\n  SessionMetadata,\n  Thought,\n  ThinkingMode\n} from '../types/index.js';\nimport { SessionNotFoundError } from '../utils/errors.js';\nimport { sanitizeString, sanitizeThoughtContent, validateSessionId, MAX_LENGTHS } from '../utils/sanitization.js';\nimport { createLogger, LogLevel } from '../utils/logger.js';\nimport { ILogger } from '../interfaces/ILogger.js';\nimport { SessionStorage } from './storage/interface.js';\nimport { LRUCache } from '../cache/lru.js';\nimport { SessionMetricsCalculator } from './SessionMetricsCalculator.js';\nimport { metaMonitor, MetaMonitor } from '../services/MetaMonitor.js';\n\n/**\n * Default session configuration\n */\nconst DEFAULT_CONFIG: SessionConfig = {\n  modeConfig: {\n    mode: ThinkingMode.HYBRID,\n    strictValidation: false,\n    allowModeSwitch: true\n  },\n  enableAutoSave: true,\n  enableValidation: true,\n  enableVisualization: true,\n  integrations: {},\n  exportFormats: ['markdown', 'latex', 'json'],\n  autoExportOnComplete: false,\n  maxThoughtsInMemory: 1000,\n  compressionThreshold: 500\n};\n\n/**\n * Session Manager - Manages thinking session lifecycle and analytics\n *\n * The SessionManager provides a centralized interface for creating, managing,\n * and analyzing deep thinking sessions across all 13 reasoning modes.\n *\n * @example\n * ```typescript\n * const manager = new SessionManager();\n * const session = await manager.createSession({\n *   title: 'Problem Analysis',\n *   mode: ThinkingMode.SEQUENTIAL\n * });\n *\n * await manager.addThought(session.id, {\n *   thought: 'Initial analysis...',\n *   thoughtNumber: 1,\n *   totalThoughts: 5,\n *   nextThoughtNeeded: true\n * });\n * ```\n */\nexport class SessionManager {\n  private activeSessions: LRUCache<ThinkingSession>;\n  private config: Partial<SessionConfig>;\n  private logger: ILogger;\n  private storage?: SessionStorage;\n  private metricsCalculator: SessionMetricsCalculator;\n  private monitor: MetaMonitor;\n\n  /**\n   * Creates a new SessionManager instance\n   *\n   * @param config - Optional default configuration applied to all new sessions\n   * @param logger - Optional logger instance or log level (default: INFO level logger)\n   * @param storage - Optional persistent storage backend for sessions\n   * @param monitor - Optional MetaMonitor instance for dependency injection\n   *\n   * @example\n   * ```typescript\n   * // Memory-only mode with default logger\n   * const manager = new SessionManager({\n   *   enableAutoSave: true,\n   *   maxThoughtsInMemory: 500\n   * });\n   *\n   * // With custom logger (DI)\n   * import { createLogger, LogLevel } from './utils/logger.js';\n   * const logger = createLogger({ minLevel: LogLevel.DEBUG });\n   * const manager = new SessionManager({}, logger);\n   *\n   * // With file-based persistence (backward compatible)\n   * import { FileSessionStore } from './storage/file-store.js';\n   * const storage = new FileSessionStore('./sessions');\n   * await storage.initialize();\n   * const manager = new SessionManager({}, LogLevel.INFO, storage);\n   * ```\n   */\n  constructor(\n    config?: Partial<SessionConfig>,\n    logger?: ILogger | LogLevel,\n    storage?: SessionStorage,\n    monitor?: MetaMonitor\n  ) {\n    // Initialize LRU cache for sessions (max 1000 sessions, ~10-50MB)\n    this.activeSessions = new LRUCache<ThinkingSession>({\n      maxSize: 1000,\n      enableStats: true,\n      onEvict: async (key: string, session: ThinkingSession) => {\n        // Auto-save evicted sessions to persistent storage if available\n        if (this.storage && session.config.enableAutoSave) {\n          try {\n            await this.storage.saveSession(session);\n            this.logger.debug('Evicted session saved to storage', { sessionId: key });\n          } catch (error) {\n            this.logger.error('Failed to save evicted session', error as Error, { sessionId: key });\n          }\n        }\n        // Clear meta-monitoring data for evicted session\n        if (this.monitor) {\n          this.monitor.clearSession(key);\n        }\n      }\n    });\n    this.config = config || {};\n    this.storage = storage;\n    this.monitor = monitor || metaMonitor;\n\n    // Support both ILogger injection (DI) and LogLevel (backward compatibility)\n    if (logger && typeof logger === 'object' && 'info' in logger) {\n      this.logger = logger;\n    } else {\n      this.logger = createLogger({\n        minLevel: (logger as LogLevel) || LogLevel.INFO,\n        enableConsole: true\n      });\n    }\n    this.metricsCalculator = new SessionMetricsCalculator();\n  }\n\n  /**\n   * Create a new thinking session\n   *\n   * Creates and initializes a new thinking session with the specified configuration.\n   * Sessions are stored in memory and tracked until explicitly deleted.\n   *\n   * @param options - Session creation options\n   * @param options.title - Session title (default: 'Untitled Session')\n   * @param options.mode - Thinking mode to use (default: HYBRID)\n   * @param options.domain - Problem domain (e.g., 'mathematics', 'physics')\n   * @param options.author - Session creator/author\n   * @param options.config - Session-specific configuration overrides\n   * @returns Promise resolving to the created session\n   *\n   * @example\n   * ```typescript\n   * const session = await manager.createSession({\n   *   title: 'Mathematical Proof',\n   *   mode: ThinkingMode.MATHEMATICS,\n   *   domain: 'number-theory',\n   *   author: 'user@example.com'\n   * });\n   * ```\n   */\n  async createSession(options: {\n    title?: string;\n    mode?: ThinkingMode;\n    domain?: string;\n    author?: string;\n    config?: Partial<SessionConfig>;\n  } = {}): Promise<ThinkingSession> {\n    // Validate inputs\n    const title = options.title\n      ? sanitizeString(options.title, MAX_LENGTHS.TITLE, 'title')\n      : 'Untitled Session';\n\n    const domain = options.domain\n      ? sanitizeString(options.domain, MAX_LENGTHS.DOMAIN, 'domain')\n      : undefined;\n\n    const author = options.author\n      ? sanitizeString(options.author, MAX_LENGTHS.AUTHOR, 'author')\n      : undefined;\n\n    const sessionId = randomUUID();\n    const now = new Date();\n\n    const session: ThinkingSession = {\n      id: sessionId,\n      title,\n      mode: options.mode || ThinkingMode.HYBRID,\n      domain,\n      config: this.mergeConfig(options.config),\n      thoughts: [],\n      createdAt: now,\n      updatedAt: now,\n      author,\n      currentThoughtNumber: 0,\n      isComplete: false,\n      metrics: this.metricsCalculator.initializeMetrics(),\n      tags: [],\n      collaborators: author ? [author] : []\n    };\n\n    this.activeSessions.set(sessionId, session);\n\n    // Auto-save to storage if enabled\n    if (this.storage && session.config.enableAutoSave) {\n      try {\n        await this.storage.saveSession(session);\n        this.logger.debug('Session persisted to storage', { sessionId });\n      } catch (error) {\n        this.logger.error('Failed to persist session', error as Error, { sessionId });\n        // Don't throw - session is still created in memory\n      }\n    }\n\n    // Start meta-monitoring strategy tracking\n    this.monitor.startStrategy(sessionId, session.mode);\n\n    this.logger.info('Session created', {\n      sessionId,\n      title,\n      mode: session.mode,\n      domain,\n      author\n    });\n\n    return session;\n  }\n\n  /**\n   * Get a session by ID\n   *\n   * Retrieves a session by its unique identifier. If the session is not in memory\n   * but storage is available, it will attempt to load from storage.\n   *\n   * @param sessionId - Unique UUID v4 identifier of the session\n   * @returns Promise resolving to the session, or null if not found\n   *\n   * @example\n   * ```typescript\n   * const session = await manager.getSession('550e8400-e29b-41d4-a716-446655440000');\n   * if (session) {\n   *   console.log(`Session: ${session.title}`);\n   *   console.log(`Thoughts: ${session.thoughts.length}`);\n   * }\n   * ```\n   */\n  async getSession(sessionId: string): Promise<ThinkingSession | null> {\n    // Check memory first\n    let session = this.activeSessions.get(sessionId);\n\n    // If not in memory and storage is available, try loading from storage\n    if (!session && this.storage) {\n      try {\n        session = (await this.storage.loadSession(sessionId)) ?? undefined;\n        if (session) {\n          // Add to active sessions cache\n          this.activeSessions.set(sessionId, session);\n          this.logger.debug('Session loaded from storage', { sessionId });\n        }\n      } catch (error) {\n        this.logger.error('Failed to load session from storage', error as Error, { sessionId });\n      }\n    }\n\n    return session || null;\n  }\n\n  /**\n   * Add a thought to a session\n   *\n   * Adds a new thought to an existing session and automatically updates:\n   * - Session metrics (uses O(1) incremental calculation)\n   * - Thought timestamps\n   * - Session completion status\n   * - Mode-specific analytics\n   *\n   * @param sessionId - ID of the session to add thought to\n   * @param thought - The thought object to add\n   * @returns Promise resolving to the updated session\n   * @throws Error if session is not found\n   *\n   * @example\n   * ```typescript\n   * await manager.addThought(session.id, {\n   *   thought: 'Initial hypothesis: the problem can be solved using...',\n   *   thoughtNumber: 1,\n   *   totalThoughts: 5,\n   *   nextThoughtNeeded: true,\n   *   uncertainty: 0.3\n   * });\n   * ```\n   */\n  async addThought(sessionId: string, thought: Thought): Promise<ThinkingSession> {\n    // Validate session ID\n    validateSessionId(sessionId);\n\n    const session = this.activeSessions.get(sessionId);\n    if (!session) {\n      this.logger.error('Session not found', undefined, { sessionId });\n      throw new SessionNotFoundError(sessionId);\n    }\n\n    // Validate thought content\n    if (thought.content) {\n      thought.content = sanitizeThoughtContent(thought.content);\n    }\n\n    // Update thought with session metadata\n    thought.sessionId = sessionId;\n    thought.timestamp = new Date();\n\n    // Add thought to session\n    session.thoughts.push(thought);\n    session.currentThoughtNumber = thought.thoughtNumber;\n    session.updatedAt = new Date();\n\n    // Update metrics\n    this.metricsCalculator.updateMetrics(session, thought);\n\n    // Record thought for meta-reasoning insights\n    this.monitor.recordThought(sessionId, thought);\n\n    // Check if session is complete\n    if (!thought.nextThoughtNeeded) {\n      session.isComplete = true;\n      this.logger.info('Session completed', {\n        sessionId,\n        title: session.title,\n        totalThoughts: session.thoughts.length\n      });\n    }\n\n    // Auto-save to storage if enabled\n    if (this.storage && session.config.enableAutoSave) {\n      try {\n        await this.storage.saveSession(session);\n        this.logger.debug('Session persisted after thought added', { sessionId });\n      } catch (error) {\n        this.logger.error('Failed to persist session', error as Error, { sessionId });\n        // Don't throw - thought is still added in memory\n      }\n    }\n\n    this.logger.debug('Thought added', {\n      sessionId,\n      thoughtNumber: thought.thoughtNumber,\n      totalThoughts: session.thoughts.length\n    });\n\n    return session;\n  }\n\n  /**\n   * Update session mode (switch reasoning approach mid-session)\n   *\n   * Changes the thinking mode of an active session. This is useful when\n   * the problem requires a different reasoning approach.\n   *\n   * @param sessionId - ID of the session to update\n   * @param newMode - New thinking mode to switch to\n   * @param reason - Optional reason for the mode switch\n   * @returns Promise resolving to the updated session\n   * @throws Error if session is not found\n   *\n   * @example\n   * ```typescript\n   * await manager.switchMode(\n   *   session.id,\n   *   ThinkingMode.CAUSAL,\n   *   'Need to analyze cause-effect relationships'\n   * );\n   * ```\n   */\n  async switchMode(\n    sessionId: string,\n    newMode: ThinkingMode,\n    reason?: string\n  ): Promise<ThinkingSession> {\n    // Validate session ID\n    validateSessionId(sessionId);\n\n    const session = this.activeSessions.get(sessionId);\n    if (!session) {\n      this.logger.error('Session not found', undefined, { sessionId });\n      throw new SessionNotFoundError(sessionId);\n    }\n\n    const oldMode = session.mode;\n    session.mode = newMode;\n    session.config.modeConfig.mode = newMode;\n    session.updatedAt = new Date();\n\n    // Auto-save to storage if enabled\n    if (this.storage && session.config.enableAutoSave) {\n      try {\n        await this.storage.saveSession(session);\n        this.logger.debug('Session persisted after mode switch', { sessionId });\n      } catch (error) {\n        this.logger.error('Failed to persist session', error as Error, { sessionId });\n      }\n    }\n\n    this.logger.info('Session mode switched', {\n      sessionId,\n      oldMode,\n      newMode,\n      reason\n    });\n\n    return session;\n  }\n\n  /**\n   * List all active sessions with metadata\n   *\n   * Returns summary information for all sessions. If storage is available,\n   * includes both in-memory sessions and persisted sessions.\n   *\n   * @param includeStoredSessions - Whether to include sessions from storage (default: true)\n   * @returns Promise resolving to array of session metadata\n   *\n   * @example\n   * ```typescript\n   * const sessions = await manager.listSessions();\n   * sessions.forEach(s => {\n   *   console.log(`${s.title}: ${s.thoughtCount} thoughts (${s.mode})`);\n   * });\n   * ```\n   */\n  async listSessions(includeStoredSessions: boolean = true): Promise<SessionMetadata[]> {\n    const memoryMetadata = Array.from(this.activeSessions.values()).map(session => ({\n      id: session.id,\n      title: session.title,\n      createdAt: session.createdAt,\n      updatedAt: session.updatedAt,\n      thoughtCount: session.thoughts.length,\n      mode: session.mode,\n      isComplete: session.isComplete\n    }));\n\n    // If no storage or not including stored sessions, return memory sessions only\n    if (!this.storage || !includeStoredSessions) {\n      return memoryMetadata;\n    }\n\n    // Get stored sessions and merge with memory sessions\n    try {\n      const storedMetadata = await this.storage.listSessions();\n      const memoryIds = new Set(memoryMetadata.map(s => s.id));\n\n      // Combine memory sessions with stored sessions (avoiding duplicates)\n      const combined = [\n        ...memoryMetadata,\n        ...storedMetadata.filter(s => !memoryIds.has(s.id))\n      ];\n\n      return combined;\n    } catch (error) {\n      this.logger.error('Failed to list stored sessions', error as Error);\n      return memoryMetadata; // Return memory sessions if storage fails\n    }\n  }\n\n  /**\n   * Delete a session\n   *\n   * Removes a session from memory and storage (if available).\n   * This operation cannot be undone.\n   *\n   * @param sessionId - ID of the session to delete\n   * @returns Promise that resolves when deletion is complete\n   *\n   * @example\n   * ```typescript\n   * await manager.deleteSession('old-session-id');\n   * ```\n   */\n  async deleteSession(sessionId: string): Promise<void> {\n    const session = this.activeSessions.get(sessionId);\n    const deletedFromMemory = this.activeSessions.delete(sessionId);\n\n    // Also delete from storage if available\n    if (this.storage) {\n      try {\n        await this.storage.deleteSession(sessionId);\n        this.logger.debug('Session deleted from storage', { sessionId });\n      } catch (error) {\n        this.logger.error('Failed to delete session from storage', error as Error, { sessionId });\n      }\n    }\n\n    if (deletedFromMemory && session) {\n      this.logger.info('Session deleted', {\n        sessionId,\n        title: session.title,\n        thoughtCount: session.thoughts.length\n      });\n    } else {\n      this.logger.warn('Attempted to delete non-existent session from memory', { sessionId });\n    }\n  }\n\n  /**\n   * Generate a text summary of a session\n   *\n   * Creates a markdown-formatted summary including:\n   * - Session metadata (title, mode, status)\n   * - Total thought count\n   * - Key thoughts (first 100 characters of each)\n   *\n   * @param sessionId - ID of the session to summarize\n   * @returns Promise resolving to markdown-formatted summary\n   * @throws Error if session is not found\n   *\n   * @example\n   * ```typescript\n   * const summary = await manager.generateSummary(session.id);\n   * console.log(summary);\n   * // Output:\n   * // # Mathematical Proof\n   * // Mode: mathematics\n   * // Total Thoughts: 15\n   * // Status: Complete\n   * // ...\n   * ```\n   */\n  async generateSummary(sessionId: string): Promise<string> {\n    // Validate session ID\n    validateSessionId(sessionId);\n\n    const session = this.activeSessions.get(sessionId);\n    if (!session) {\n      throw new SessionNotFoundError(sessionId);\n    }\n\n    let summary = `# ${session.title}\\n\\n`;\n    summary += `Mode: ${session.mode}\\n`;\n    summary += `Total Thoughts: ${session.thoughts.length}\\n`;\n    summary += `Status: ${session.isComplete ? 'Complete' : 'In Progress'}\\n\\n`;\n\n    summary += `## Key Thoughts:\\n\\n`;\n    for (const thought of session.thoughts) {\n      summary += `${thought.thoughtNumber}. ${thought.content.substring(0, 100)}...\\n`;\n    }\n\n    return summary;\n  }\n\n  /**\n   * Merge configurations (private helper)\n   *\n   * Combines default config, instance config, and user config\n   * with proper precedence: user > instance > default\n   */\n  private mergeConfig(userConfig?: Partial<SessionConfig>): SessionConfig {\n    return {\n      ...DEFAULT_CONFIG,\n      ...this.config,\n      ...userConfig\n    } as SessionConfig;\n  }\n\n}\n","/**\n * Session module exports (v4.3.0)\n * Sprint 9.2: Explicit exports for tree-shaking\n */\n\nexport { SessionManager } from './manager.js';\n","/**\n * Storage Interface for Session Persistence\n *\n * Defines the contract for session storage backends. Implementations can use\n * file systems, databases, or other storage mechanisms.\n */\n\nimport { ThinkingSession, SessionMetadata } from '../../types/index.js';\n\n/**\n * Session storage interface\n *\n * Provides CRUD operations for session persistence. All operations are async\n * to support various storage backends (files, databases, remote storage).\n */\nexport interface SessionStorage {\n  /**\n   * Initialize the storage backend\n   * Creates necessary directories, tables, or connections\n   */\n  initialize(): Promise<void>;\n\n  /**\n   * Save a session to storage\n   * Overwrites existing session if it exists\n   *\n   * @param session - The session to save\n   */\n  saveSession(session: ThinkingSession): Promise<void>;\n\n  /**\n   * Load a session from storage\n   *\n   * @param sessionId - The session ID to load\n   * @returns The session, or null if not found\n   */\n  loadSession(sessionId: string): Promise<ThinkingSession | null>;\n\n  /**\n   * Delete a session from storage\n   *\n   * @param sessionId - The session ID to delete\n   * @returns true if deleted, false if not found\n   */\n  deleteSession(sessionId: string): Promise<boolean>;\n\n  /**\n   * List all sessions (metadata only for performance)\n   *\n   * @returns Array of session metadata\n   */\n  listSessions(): Promise<SessionMetadata[]>;\n\n  /**\n   * Check if a session exists\n   *\n   * @param sessionId - The session ID to check\n   * @returns true if exists, false otherwise\n   */\n  exists(sessionId: string): Promise<boolean>;\n\n  /**\n   * Get storage statistics\n   *\n   * @returns Storage metrics and health information\n   */\n  getStats(): Promise<StorageStats>;\n\n  /**\n   * Clean up old or incomplete sessions\n   *\n   * @param maxAgeMs - Maximum age in milliseconds\n   * @returns Number of sessions cleaned up\n   */\n  cleanup(maxAgeMs: number): Promise<number>;\n\n  /**\n   * Close storage connections and release resources\n   */\n  close(): Promise<void>;\n}\n\n/**\n * Storage statistics\n */\nexport interface StorageStats {\n  totalSessions: number;\n  totalThoughts: number;\n  storageSize: number; // in bytes\n  oldestSession?: Date;\n  newestSession?: Date;\n  averageSessionSize: number;\n  storageHealth: 'healthy' | 'warning' | 'critical';\n}\n\n/**\n * Storage configuration options\n */\nexport interface StorageConfig {\n  /**\n   * Enable automatic persistence on session updates\n   */\n  autoSave: boolean;\n\n  /**\n   * Debounce interval for auto-save (ms)\n   */\n  autoSaveDelay: number;\n\n  /**\n   * Enable compression for stored sessions\n   */\n  enableCompression: boolean;\n\n  /**\n   * Maximum number of sessions to keep in storage\n   */\n  maxSessions: number;\n\n  /**\n   * Maximum age of sessions before auto-cleanup (ms)\n   */\n  maxSessionAge: number;\n\n  /**\n   * Enable storage encryption\n   */\n  enableEncryption: boolean;\n\n  /**\n   * Custom serialization options\n   */\n  serialization?: {\n    prettyPrint: boolean;\n    includeMetadata: boolean;\n  };\n}\n\n/**\n * Default storage configuration\n */\nexport const DEFAULT_STORAGE_CONFIG: StorageConfig = {\n  autoSave: true,\n  autoSaveDelay: 1000, // 1 second\n  enableCompression: false,\n  maxSessions: 1000,\n  maxSessionAge: 30 * 24 * 60 * 60 * 1000, // 30 days\n  enableEncryption: false,\n  serialization: {\n    prettyPrint: false,\n    includeMetadata: true,\n  },\n};\n","/**\n * Cross-Process File Locking Utility\n *\n * Provides file-based locking for multi-instance MCP server support.\n * Uses .lock files with process ID and timestamp for stale lock detection.\n *\n * Features:\n * - Exclusive locks for writes\n * - Shared locks for reads (multiple readers allowed)\n * - Automatic stale lock detection and cleanup\n * - Retry with exponential backoff\n * - Cross-platform (Windows/Linux/Mac)\n */\n\nimport { promises as fs } from 'fs';\nimport * as path from 'path';\n\n/**\n * Lock file content structure\n */\ninterface LockInfo {\n  pid: number;\n  hostname: string;\n  timestamp: number;\n  type: 'exclusive' | 'shared';\n  instanceId: string;\n}\n\n/**\n * Lock acquisition options\n */\nexport interface LockOptions {\n  /** Maximum time to wait for lock (ms). Default: 10000 */\n  timeout?: number;\n  /** Time between retry attempts (ms). Default: 50 */\n  retryInterval?: number;\n  /** Maximum age before lock is considered stale (ms). Default: 30000 */\n  staleThreshold?: number;\n  /** Lock type: 'exclusive' for writes, 'shared' for reads. Default: 'exclusive' */\n  type?: 'exclusive' | 'shared';\n}\n\nconst DEFAULT_OPTIONS: Required<LockOptions> = {\n  timeout: 10000,\n  retryInterval: 50,\n  staleThreshold: 30000,\n  type: 'exclusive',\n};\n\n// Unique instance ID for this process\nconst INSTANCE_ID = `${process.pid}-${Date.now()}-${Math.random().toString(36).slice(2, 8)}`;\n\n/**\n * Get the lock file path for a given file\n */\nfunction getLockPath(filePath: string): string {\n  return `${filePath}.lock`;\n}\n\n/**\n * Get the shared lock directory path\n */\nfunction getSharedLockDir(filePath: string): string {\n  return `${filePath}.locks`;\n}\n\n/**\n * Create lock info object\n */\nfunction createLockInfo(type: 'exclusive' | 'shared'): LockInfo {\n  return {\n    pid: process.pid,\n    hostname: require('os').hostname(),\n    timestamp: Date.now(),\n    type,\n    instanceId: INSTANCE_ID,\n  };\n}\n\n/**\n * Check if a lock is stale (holder process may have crashed)\n */\nfunction isLockStale(lockInfo: LockInfo, staleThreshold: number): boolean {\n  const age = Date.now() - lockInfo.timestamp;\n  return age > staleThreshold;\n}\n\n/**\n * Try to read lock info from a lock file\n */\nasync function readLockInfo(lockPath: string): Promise<LockInfo | null> {\n  try {\n    const content = await fs.readFile(lockPath, 'utf-8');\n    return JSON.parse(content) as LockInfo;\n  } catch {\n    return null;\n  }\n}\n\n/**\n * Write lock info to a lock file atomically\n */\nasync function writeLockInfo(lockPath: string, lockInfo: LockInfo): Promise<boolean> {\n  const tempPath = `${lockPath}.${INSTANCE_ID}.tmp`;\n  try {\n    // Write to temp file first\n    await fs.writeFile(tempPath, JSON.stringify(lockInfo), { flag: 'wx' });\n\n    // Atomic rename\n    await fs.rename(tempPath, lockPath);\n    return true;\n  } catch (error: any) {\n    // Clean up temp file if it exists\n    try {\n      await fs.unlink(tempPath);\n    } catch {\n      // Ignore cleanup errors\n    }\n\n    // EEXIST means another process created the lock\n    // EPERM can happen on Windows during concurrent renames\n    // ENOENT can happen if temp file was cleaned up by concurrent process\n    if (error.code === 'EEXIST' || error.code === 'EPERM' || error.code === 'ENOENT') {\n      return false;\n    }\n    throw error;\n  }\n}\n\n/**\n * Acquire an exclusive lock on a file\n */\nasync function acquireExclusiveLock(\n  filePath: string,\n  options: Required<LockOptions>\n): Promise<() => Promise<void>> {\n  const lockPath = getLockPath(filePath);\n  const sharedLockDir = getSharedLockDir(filePath);\n  const startTime = Date.now();\n\n  while (Date.now() - startTime < options.timeout) {\n    // Check for existing exclusive lock\n    const existingLock = await readLockInfo(lockPath);\n\n    if (existingLock) {\n      // Check if it's our own lock (re-entrant)\n      if (existingLock.instanceId === INSTANCE_ID) {\n        // Already hold the lock\n        return async () => {\n          await fs.unlink(lockPath).catch(() => {});\n        };\n      }\n\n      // Check if stale\n      if (isLockStale(existingLock, options.staleThreshold)) {\n        // Remove stale lock\n        await fs.unlink(lockPath).catch(() => {});\n      } else {\n        // Lock is held by another process, wait and retry\n        await sleep(options.retryInterval);\n        continue;\n      }\n    }\n\n    // Check for shared locks\n    try {\n      const sharedLocks = await fs.readdir(sharedLockDir);\n      const validSharedLocks = [];\n\n      for (const lockFile of sharedLocks) {\n        const sharedLockPath = path.join(sharedLockDir, lockFile);\n        const sharedLockInfo = await readLockInfo(sharedLockPath);\n\n        if (sharedLockInfo && !isLockStale(sharedLockInfo, options.staleThreshold)) {\n          validSharedLocks.push(sharedLockInfo);\n        } else {\n          // Clean up stale shared lock\n          await fs.unlink(sharedLockPath).catch(() => {});\n        }\n      }\n\n      if (validSharedLocks.length > 0) {\n        // Active shared locks exist, wait\n        await sleep(options.retryInterval);\n        continue;\n      }\n    } catch (error: any) {\n      // Directory doesn't exist = no shared locks\n      if (error.code !== 'ENOENT') {\n        throw error;\n      }\n    }\n\n    // Try to acquire exclusive lock\n    const lockInfo = createLockInfo('exclusive');\n    if (await writeLockInfo(lockPath, lockInfo)) {\n      // Successfully acquired lock\n      return async () => {\n        await fs.unlink(lockPath).catch(() => {});\n      };\n    }\n\n    // Failed to acquire, retry\n    await sleep(options.retryInterval);\n  }\n\n  throw new Error(`Timeout acquiring exclusive lock on ${filePath} after ${options.timeout}ms`);\n}\n\n/**\n * Acquire a shared lock on a file (allows multiple readers)\n */\nasync function acquireSharedLock(\n  filePath: string,\n  options: Required<LockOptions>\n): Promise<() => Promise<void>> {\n  const exclusiveLockPath = getLockPath(filePath);\n  const sharedLockDir = getSharedLockDir(filePath);\n  const sharedLockPath = path.join(sharedLockDir, `${INSTANCE_ID}.lock`);\n  const startTime = Date.now();\n\n  while (Date.now() - startTime < options.timeout) {\n    // Check for existing exclusive lock\n    const exclusiveLock = await readLockInfo(exclusiveLockPath);\n\n    if (exclusiveLock) {\n      if (isLockStale(exclusiveLock, options.staleThreshold)) {\n        // Remove stale exclusive lock\n        await fs.unlink(exclusiveLockPath).catch(() => {});\n      } else {\n        // Exclusive lock is held, wait\n        await sleep(options.retryInterval);\n        continue;\n      }\n    }\n\n    // Create shared lock directory if needed\n    await fs.mkdir(sharedLockDir, { recursive: true });\n\n    // Create our shared lock\n    const lockInfo = createLockInfo('shared');\n    try {\n      await fs.writeFile(sharedLockPath, JSON.stringify(lockInfo), { flag: 'wx' });\n\n      // Double-check no exclusive lock was acquired while we were creating ours\n      const recheck = await readLockInfo(exclusiveLockPath);\n      if (recheck && !isLockStale(recheck, options.staleThreshold)) {\n        // Exclusive lock appeared, release our shared lock and retry\n        await fs.unlink(sharedLockPath).catch(() => {});\n        await sleep(options.retryInterval);\n        continue;\n      }\n\n      // Successfully acquired shared lock\n      return async () => {\n        await fs.unlink(sharedLockPath).catch(() => {});\n        // Clean up empty shared lock directory\n        try {\n          const remaining = await fs.readdir(sharedLockDir);\n          if (remaining.length === 0) {\n            await fs.rmdir(sharedLockDir);\n          }\n        } catch {\n          // Ignore cleanup errors\n        }\n      };\n    } catch (error: any) {\n      if (error.code === 'EEXIST') {\n        // Our lock already exists (shouldn't happen but handle it)\n        return async () => {\n          await fs.unlink(sharedLockPath).catch(() => {});\n        };\n      }\n      throw error;\n    }\n  }\n\n  throw new Error(`Timeout acquiring shared lock on ${filePath} after ${options.timeout}ms`);\n}\n\n/**\n * Sleep utility\n */\nfunction sleep(ms: number): Promise<void> {\n  return new Promise(resolve => setTimeout(resolve, ms));\n}\n\n/**\n * Acquire a lock on a file\n *\n * @param filePath - Path to the file to lock\n * @param options - Lock options\n * @returns A release function to call when done with the lock\n *\n * @example\n * ```typescript\n * // Exclusive lock for writing\n * const release = await acquireLock('./data/session.json', { type: 'exclusive' });\n * try {\n *   await fs.writeFile('./data/session.json', data);\n * } finally {\n *   await release();\n * }\n *\n * // Shared lock for reading\n * const release = await acquireLock('./data/session.json', { type: 'shared' });\n * try {\n *   const data = await fs.readFile('./data/session.json');\n * } finally {\n *   await release();\n * }\n * ```\n */\nexport async function acquireLock(\n  filePath: string,\n  options?: LockOptions\n): Promise<() => Promise<void>> {\n  const opts = { ...DEFAULT_OPTIONS, ...options };\n\n  if (opts.type === 'shared') {\n    return acquireSharedLock(filePath, opts);\n  }\n  return acquireExclusiveLock(filePath, opts);\n}\n\n/**\n * Execute a function with an exclusive lock\n *\n * @param filePath - Path to the file to lock\n * @param fn - Function to execute while holding the lock\n * @param options - Lock options\n * @returns The result of the function\n */\nexport async function withLock<T>(\n  filePath: string,\n  fn: () => Promise<T>,\n  options?: Omit<LockOptions, 'type'>\n): Promise<T> {\n  const release = await acquireLock(filePath, { ...options, type: 'exclusive' });\n  try {\n    return await fn();\n  } finally {\n    await release();\n  }\n}\n\n/**\n * Execute a function with a shared (read) lock\n *\n * @param filePath - Path to the file to lock\n * @param fn - Function to execute while holding the lock\n * @param options - Lock options\n * @returns The result of the function\n */\nexport async function withSharedLock<T>(\n  filePath: string,\n  fn: () => Promise<T>,\n  options?: Omit<LockOptions, 'type'>\n): Promise<T> {\n  const release = await acquireLock(filePath, { ...options, type: 'shared' });\n  try {\n    return await fn();\n  } finally {\n    await release();\n  }\n}\n\n/**\n * Check if a file is currently locked\n *\n * @param filePath - Path to check\n * @param staleThreshold - Time in ms before lock is considered stale\n * @returns Lock status\n */\nexport async function isLocked(\n  filePath: string,\n  staleThreshold: number = DEFAULT_OPTIONS.staleThreshold\n): Promise<{ locked: boolean; type?: 'exclusive' | 'shared'; holders?: number }> {\n  const exclusiveLockPath = getLockPath(filePath);\n  const sharedLockDir = getSharedLockDir(filePath);\n\n  // Check exclusive lock\n  const exclusiveLock = await readLockInfo(exclusiveLockPath);\n  if (exclusiveLock && !isLockStale(exclusiveLock, staleThreshold)) {\n    return { locked: true, type: 'exclusive', holders: 1 };\n  }\n\n  // Check shared locks\n  try {\n    const sharedLocks = await fs.readdir(sharedLockDir);\n    let validCount = 0;\n\n    for (const lockFile of sharedLocks) {\n      const sharedLockPath = path.join(sharedLockDir, lockFile);\n      const sharedLockInfo = await readLockInfo(sharedLockPath);\n\n      if (sharedLockInfo && !isLockStale(sharedLockInfo, staleThreshold)) {\n        validCount++;\n      }\n    }\n\n    if (validCount > 0) {\n      return { locked: true, type: 'shared', holders: validCount };\n    }\n  } catch (error: any) {\n    if (error.code !== 'ENOENT') {\n      throw error;\n    }\n  }\n\n  return { locked: false };\n}\n\n/**\n * Force remove all locks on a file (use with caution!)\n *\n * @param filePath - Path to the file\n */\nexport async function forceUnlock(filePath: string): Promise<void> {\n  const exclusiveLockPath = getLockPath(filePath);\n  const sharedLockDir = getSharedLockDir(filePath);\n\n  // Remove exclusive lock\n  await fs.unlink(exclusiveLockPath).catch(() => {});\n\n  // Remove all shared locks\n  try {\n    const sharedLocks = await fs.readdir(sharedLockDir);\n    for (const lockFile of sharedLocks) {\n      await fs.unlink(path.join(sharedLockDir, lockFile)).catch(() => {});\n    }\n    await fs.rmdir(sharedLockDir).catch(() => {});\n  } catch (error: any) {\n    if (error.code !== 'ENOENT') {\n      throw error;\n    }\n  }\n}\n","/**\r\n * File-based Session Storage Implementation\r\n *\r\n * Stores sessions as JSON files in a directory structure:\r\n * - {baseDir}/sessions/{sessionId}.json\r\n * - {baseDir}/metadata/index.json (for fast listings)\r\n *\r\n * Supports multi-instance MCP servers via file locking:\r\n * - Exclusive locks for write operations\r\n * - Shared locks for read operations\r\n * - Automatic stale lock detection and cleanup\r\n */\r\n\r\nimport { promises as fs } from 'fs';\r\nimport * as path from 'path';\r\nimport { ThinkingSession, SessionMetadata } from '../../types/index.js';\r\nimport {\r\n  SessionStorage,\r\n  StorageStats,\r\n  StorageConfig,\r\n  DEFAULT_STORAGE_CONFIG,\r\n} from './interface.js';\r\nimport { logger } from '../../utils/logger.js';\r\nimport { withLock, withSharedLock, type LockOptions } from '../../utils/file-lock.js';\r\n\r\n/**\r\n * Default lock options for file operations\r\n */\r\nconst DEFAULT_LOCK_OPTIONS: LockOptions = {\r\n  timeout: 10000,      // 10 seconds\r\n  retryInterval: 50,   // 50ms between retries\r\n  staleThreshold: 30000, // 30 seconds before lock is considered stale\r\n};\r\n\r\n/**\r\n * File-based session storage with multi-instance support\r\n */\r\nexport class FileSessionStore implements SessionStorage {\r\n  private baseDir: string;\r\n  private sessionsDir: string;\r\n  private metadataFile: string;\r\n  private config: StorageConfig;\r\n  private metadataCache: Map<string, SessionMetadata>;\r\n  private initialized: boolean = false;\r\n  private lockOptions: LockOptions;\r\n\r\n  /**\r\n   * Create a new FileSessionStore\r\n   *\r\n   * @param baseDir - Base directory for session storage\r\n   * @param config - Storage configuration options\r\n   */\r\n  constructor(baseDir: string, config?: Partial<StorageConfig>) {\r\n    this.baseDir = baseDir;\r\n    this.sessionsDir = path.join(baseDir, 'sessions');\r\n    this.metadataFile = path.join(baseDir, 'metadata', 'index.json');\r\n    this.config = { ...DEFAULT_STORAGE_CONFIG, ...config };\r\n    this.metadataCache = new Map();\r\n    this.lockOptions = { ...DEFAULT_LOCK_OPTIONS };\r\n  }\r\n\r\n  /**\r\n   * Initialize storage directories\r\n   */\r\n  async initialize(): Promise<void> {\r\n    if (this.initialized) {\r\n      return;\r\n    }\r\n\r\n    try {\r\n      // Create directories\r\n      await fs.mkdir(this.sessionsDir, { recursive: true });\r\n      await fs.mkdir(path.dirname(this.metadataFile), { recursive: true });\r\n\r\n      // Load metadata index (with shared lock for reading)\r\n      await this.loadMetadataIndex();\r\n\r\n      this.initialized = true;\r\n      logger.info('FileSessionStore initialized', {\r\n        baseDir: this.baseDir,\r\n        config: this.config,\r\n      });\r\n    } catch (error) {\r\n      logger.error('Failed to initialize FileSessionStore', error instanceof Error ? error : new Error(String(error)), {\r\n        baseDir: this.baseDir,\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Save a session to disk (with exclusive lock)\r\n   */\r\n  async saveSession(session: ThinkingSession): Promise<void> {\r\n    await this.ensureInitialized();\r\n\r\n    const sessionPath = this.getSessionPath(session.id);\r\n\r\n    try {\r\n      // Use exclusive lock for writing session file\r\n      await withLock(sessionPath, async () => {\r\n        // Prepare session for serialization (convert special types)\r\n        const serializable = this.prepareForSerialization(session);\r\n\r\n        // Serialize session\r\n        const json = this.config.serialization?.prettyPrint\r\n          ? JSON.stringify(serializable, null, 2)\r\n          : JSON.stringify(serializable);\r\n\r\n        // Write session file\r\n        await fs.writeFile(sessionPath, json, 'utf-8');\r\n      }, this.lockOptions);\r\n\r\n      // Update metadata (with exclusive lock on metadata file)\r\n      await this.updateMetadata(session);\r\n\r\n      logger.debug('Session saved', { sessionId: session.id, path: sessionPath });\r\n    } catch (error) {\r\n      logger.error('Failed to save session', error instanceof Error ? error : new Error(String(error)), {\r\n        sessionId: session.id,\r\n      });\r\n      throw error;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Load a session from disk (with shared lock)\r\n   */\r\n  async loadSession(sessionId: string): Promise<ThinkingSession | null> {\r\n    await this.ensureInitialized();\r\n\r\n    const sessionPath = this.getSessionPath(sessionId);\r\n\r\n    try {\r\n      // Check if file exists\r\n      try {\r\n        await fs.access(sessionPath);\r\n      } catch {\r\n        return null; // File doesn't exist\r\n      }\r\n\r\n      // Use shared lock for reading (allows concurrent reads)\r\n      const session = await withSharedLock(sessionPath, async () => {\r\n        // Read and parse session\r\n        const json = await fs.readFile(sessionPath, 'utf-8');\r\n        const parsed = JSON.parse(json);\r\n\r\n        // Restore special types\r\n        return this.restoreFromSerialization(parsed) as ThinkingSession;\r\n      }, this.lockOptions);\r\n\r\n      logger.debug('Session loaded', { sessionId });\r\n      return session;\r\n    } catch (error) {\r\n      logger.error('Failed to load session', error instanceof Error ? error : new Error(String(error)), { sessionId });\r\n      return null;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Delete a session from disk (with exclusive lock)\r\n   */\r\n  async deleteSession(sessionId: string): Promise<boolean> {\r\n    await this.ensureInitialized();\r\n\r\n    const sessionPath = this.getSessionPath(sessionId);\r\n\r\n    try {\r\n      // Check if file exists\r\n      try {\r\n        await fs.access(sessionPath);\r\n      } catch {\r\n        return false; // File doesn't exist\r\n      }\r\n\r\n      // Use exclusive lock for deleting\r\n      await withLock(sessionPath, async () => {\r\n        // Delete session file\r\n        await fs.unlink(sessionPath);\r\n      }, this.lockOptions);\r\n\r\n      // Remove from metadata (with exclusive lock on metadata file)\r\n      this.metadataCache.delete(sessionId);\r\n      await this.saveMetadataIndex();\r\n\r\n      logger.info('Session deleted', { sessionId });\r\n      return true;\r\n    } catch (error) {\r\n      logger.error('Failed to delete session', error instanceof Error ? error : new Error(String(error)), { sessionId });\r\n      return false;\r\n    }\r\n  }\r\n\r\n  /**\r\n   * List all sessions (metadata only)\r\n   * Refreshes from disk to get updates from other instances\r\n   */\r\n  async listSessions(): Promise<SessionMetadata[]> {\r\n    await this.ensureInitialized();\r\n\r\n    // Refresh metadata from disk to see changes from other instances\r\n    await this.loadMetadataIndex();\r\n\r\n    return Array.from(this.metadataCache.values());\r\n  }\r\n\r\n  /**\r\n   * Check if a session exists\r\n   */\r\n  async exists(sessionId: string): Promise<boolean> {\r\n    await this.ensureInitialized();\r\n\r\n    // Refresh metadata to check for updates from other instances\r\n    await this.loadMetadataIndex();\r\n\r\n    return this.metadataCache.has(sessionId);\r\n  }\r\n\r\n  /**\r\n   * Get storage statistics\r\n   */\r\n  async getStats(): Promise<StorageStats> {\r\n    await this.ensureInitialized();\r\n\r\n    // Refresh metadata\r\n    await this.loadMetadataIndex();\r\n\r\n    const sessions = Array.from(this.metadataCache.values());\r\n    const totalSessions = sessions.length;\r\n    const totalThoughts = sessions.reduce((sum, s) => sum + s.thoughtCount, 0);\r\n\r\n    // Calculate storage size\r\n    let storageSize = 0;\r\n    try {\r\n      const files = await fs.readdir(this.sessionsDir);\r\n      for (const file of files) {\r\n        if (file.endsWith('.json')) {\r\n          const filePath = path.join(this.sessionsDir, file);\r\n          const stats = await fs.stat(filePath);\r\n          storageSize += stats.size;\r\n        }\r\n      }\r\n    } catch (error) {\r\n      logger.warn('Failed to calculate storage size', { error });\r\n    }\r\n\r\n    const dates = sessions\r\n      .map((s) => new Date(s.createdAt))\r\n      .sort((a, b) => a.getTime() - b.getTime());\r\n\r\n    const averageSessionSize = totalSessions > 0 ? storageSize / totalSessions : 0;\r\n\r\n    // Determine storage health\r\n    let storageHealth: 'healthy' | 'warning' | 'critical' = 'healthy';\r\n    if (totalSessions > this.config.maxSessions * 0.9) {\r\n      storageHealth = 'critical';\r\n    } else if (totalSessions > this.config.maxSessions * 0.7) {\r\n      storageHealth = 'warning';\r\n    }\r\n\r\n    return {\r\n      totalSessions,\r\n      totalThoughts,\r\n      storageSize,\r\n      oldestSession: dates[0],\r\n      newestSession: dates[dates.length - 1],\r\n      averageSessionSize,\r\n      storageHealth,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Clean up old sessions\r\n   */\r\n  async cleanup(maxAgeMs: number): Promise<number> {\r\n    await this.ensureInitialized();\r\n\r\n    // Refresh metadata first\r\n    await this.loadMetadataIndex();\r\n\r\n    const now = Date.now();\r\n    const sessions = Array.from(this.metadataCache.values());\r\n    let cleanedCount = 0;\r\n\r\n    for (const session of sessions) {\r\n      const age = now - new Date(session.createdAt).getTime();\r\n      if (age > maxAgeMs) {\r\n        await this.deleteSession(session.id);\r\n        cleanedCount++;\r\n      }\r\n    }\r\n\r\n    if (cleanedCount > 0) {\r\n      logger.info('Cleanup completed', {\r\n        cleanedCount,\r\n        maxAgeMs,\r\n        remaining: sessions.length - cleanedCount,\r\n      });\r\n    }\r\n\r\n    return cleanedCount;\r\n  }\r\n\r\n  /**\r\n   * Close storage (no-op for file storage)\r\n   */\r\n  async close(): Promise<void> {\r\n    logger.info('FileSessionStore closed');\r\n    this.initialized = false;\r\n  }\r\n\r\n  /**\r\n   * Get file path for a session\r\n   */\r\n  private getSessionPath(sessionId: string): string {\r\n    return path.join(this.sessionsDir, `${sessionId}.json`);\r\n  }\r\n\r\n  /**\r\n   * Update metadata cache and index (with exclusive lock)\r\n   */\r\n  private async updateMetadata(session: ThinkingSession): Promise<void> {\r\n    const metadata: SessionMetadata = {\r\n      id: session.id,\r\n      title: session.title,\r\n      createdAt: session.createdAt,\r\n      updatedAt: session.updatedAt,\r\n      thoughtCount: session.thoughts.length,\r\n      mode: session.mode,\r\n      isComplete: session.isComplete,\r\n    };\r\n\r\n    this.metadataCache.set(session.id, metadata);\r\n    await this.saveMetadataIndex();\r\n  }\r\n\r\n  /**\r\n   * Load metadata index from disk (with shared lock)\r\n   */\r\n  private async loadMetadataIndex(): Promise<void> {\r\n    try {\r\n      await fs.access(this.metadataFile);\r\n\r\n      // Use shared lock for reading metadata\r\n      const metadata = await withSharedLock(this.metadataFile, async () => {\r\n        const json = await fs.readFile(this.metadataFile, 'utf-8');\r\n        const parsed = JSON.parse(json) as any[];\r\n        return parsed.map((item) =>\r\n          this.restoreFromSerialization(item)\r\n        ) as SessionMetadata[];\r\n      }, this.lockOptions);\r\n\r\n      this.metadataCache.clear();\r\n      for (const meta of metadata) {\r\n        this.metadataCache.set(meta.id, meta);\r\n      }\r\n\r\n      logger.debug('Metadata index loaded', {\r\n        sessionCount: metadata.length,\r\n      });\r\n    } catch {\r\n      // File doesn't exist yet - start with empty cache\r\n      this.metadataCache.clear();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Save metadata index to disk (with exclusive lock)\r\n   */\r\n  private async saveMetadataIndex(): Promise<void> {\r\n    // First, reload to merge with any changes from other instances\r\n    try {\r\n      await fs.access(this.metadataFile);\r\n      const existingJson = await fs.readFile(this.metadataFile, 'utf-8');\r\n      const existingParsed = JSON.parse(existingJson) as any[];\r\n      const existingMetadata = existingParsed.map((item) =>\r\n        this.restoreFromSerialization(item)\r\n      ) as SessionMetadata[];\r\n\r\n      // Merge: our cache takes precedence, but include items we don't have\r\n      for (const meta of existingMetadata) {\r\n        if (!this.metadataCache.has(meta.id)) {\r\n          // Check if the session file still exists\r\n          const sessionPath = this.getSessionPath(meta.id);\r\n          try {\r\n            await fs.access(sessionPath);\r\n            this.metadataCache.set(meta.id, meta);\r\n          } catch {\r\n            // Session file was deleted, don't include in cache\r\n          }\r\n        }\r\n      }\r\n    } catch {\r\n      // File doesn't exist yet, continue with current cache\r\n    }\r\n\r\n    // Now save with exclusive lock\r\n    await withLock(this.metadataFile, async () => {\r\n      const metadata = Array.from(this.metadataCache.values());\r\n      const serializable = metadata.map((item) => this.prepareForSerialization(item));\r\n      const json = JSON.stringify(serializable, null, 2);\r\n\r\n      await fs.writeFile(this.metadataFile, json, 'utf-8');\r\n    }, this.lockOptions);\r\n  }\r\n\r\n  /**\r\n   * Ensure storage is initialized\r\n   */\r\n  private async ensureInitialized(): Promise<void> {\r\n    if (!this.initialized) {\r\n      await this.initialize();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Prepare an object for serialization by converting special types\r\n   * Recursively processes the object tree to handle Date and Map objects\r\n   */\r\n  private prepareForSerialization(obj: any): any {\r\n    if (obj === null || obj === undefined) {\r\n      return obj;\r\n    }\r\n\r\n    // Handle Date objects\r\n    if (obj instanceof Date) {\r\n      return {\r\n        _type: 'Date',\r\n        value: obj.toISOString(),\r\n      };\r\n    }\r\n\r\n    // Handle Map objects\r\n    if (obj instanceof Map) {\r\n      return {\r\n        _type: 'Map',\r\n        value: Array.from(obj.entries()),\r\n      };\r\n    }\r\n\r\n    // Handle arrays\r\n    if (Array.isArray(obj)) {\r\n      return obj.map((item) => this.prepareForSerialization(item));\r\n    }\r\n\r\n    // Handle plain objects\r\n    if (typeof obj === 'object') {\r\n      const result: any = {};\r\n      for (const [key, value] of Object.entries(obj)) {\r\n        result[key] = this.prepareForSerialization(value);\r\n      }\r\n      return result;\r\n    }\r\n\r\n    // Primitive types\r\n    return obj;\r\n  }\r\n\r\n  /**\r\n   * Restore an object from serialization by reconstructing special types\r\n   * Recursively processes the object tree to restore Date and Map objects\r\n   */\r\n  private restoreFromSerialization(obj: any): any {\r\n    if (obj === null || obj === undefined) {\r\n      return obj;\r\n    }\r\n\r\n    // Check for special type markers\r\n    if (typeof obj === 'object' && obj._type) {\r\n      if (obj._type === 'Date') {\r\n        return new Date(obj.value);\r\n      }\r\n      if (obj._type === 'Map') {\r\n        return new Map(obj.value);\r\n      }\r\n    }\r\n\r\n    // Handle arrays\r\n    if (Array.isArray(obj)) {\r\n      return obj.map((item) => this.restoreFromSerialization(item));\r\n    }\r\n\r\n    // Handle plain objects\r\n    if (typeof obj === 'object') {\r\n      const result: any = {};\r\n      for (const [key, value] of Object.entries(obj)) {\r\n        result[key] = this.restoreFromSerialization(value);\r\n      }\r\n      return result;\r\n    }\r\n\r\n    // Primitive types\r\n    return obj;\r\n  }\r\n}\r\n","/**\r\n * Thought Factory Service (v8.4.0)\r\n * Phase 10 Sprint 3: Full ModeHandler Integration\r\n *\r\n * Centralizes thought creation logic for all thinking modes.\r\n * Provides type-safe thought construction based on mode-specific requirements.\r\n *\r\n * RESPONSIBILITY:\r\n * - Create properly typed thought objects for all 33 thinking modes\r\n * - Delegate to specialized ModeHandlers via registry\r\n * - Apply mode-specific defaults and transformations\r\n * - Ensure thought structure consistency across modes\r\n *\r\n * ARCHITECTURE:\r\n * - Uses ModeHandlerRegistry for all mode handling (v8.4.0)\r\n * - All 33 modes have dedicated handlers\r\n * - Legacy switch statement kept for backward compatibility (deprecated)\r\n */\r\n\r\nimport { randomUUID } from 'crypto';\r\nimport {\r\n  ThinkingMode,\r\n  ShannonStage,\r\n  SequentialThought,\r\n  ShannonThought,\r\n  MathematicsThought,\r\n  PhysicsThought,\r\n  InductiveThought,\r\n  DeductiveThought,\r\n  AbductiveThought,\r\n  CausalThought,\r\n  Thought,\r\n  EngineeringThought,\r\n  ComputabilityThought,\r\n  CryptanalyticThought,\r\n  AlgorithmicThought,\r\n  SystemsThinkingThought,\r\n  ScientificMethodThought,\r\n  FormalLogicThought,\r\n  OptimizationThought,\r\n  SynthesisThought,\r\n  ArgumentationThought,\r\n  CritiqueThought,\r\n  AnalysisThought,\r\n} from '../types/index.js';\r\nimport { ThinkingToolInput } from '../tools/thinking.js';\r\nimport { toExtendedThoughtType } from '../utils/type-guards.js';\r\nimport { ILogger } from '../interfaces/ILogger.js';\r\nimport { createLogger, LogLevel } from '../utils/logger.js';\r\nimport {\r\n  ModeHandlerRegistry,\r\n  ModeStatus,\r\n  ValidationResult,\r\n  registerAllHandlers,\r\n} from '../modes/index.js';\r\n\r\n/**\r\n * Configuration for ThoughtFactory\r\n */\r\nexport interface ThoughtFactoryConfig {\r\n  /**\r\n   * Whether to use the registry for all modes (true)\r\n   * or fall back to switch statement for non-migrated modes (false)\r\n   *\r\n   * Default: true (v8.4.0 - all 33 modes have handlers)\r\n   */\r\n  useRegistryForAll?: boolean;\r\n\r\n  /**\r\n   * Whether to automatically register specialized handlers on construction\r\n   *\r\n   * Default: true\r\n   */\r\n  autoRegisterHandlers?: boolean;\r\n\r\n  /**\r\n   * Logger instance\r\n   */\r\n  logger?: ILogger;\r\n}\r\n\r\n/**\r\n * Thought Factory - Creates mode-specific thought objects\r\n *\r\n * Handles the complexity of creating properly structured thought objects\r\n * for all 33 thinking modes via the ModeHandler registry.\r\n *\r\n * As of v8.4.0, all modes have dedicated handlers:\r\n * - Core (5): Sequential, Shannon, Mathematics, Physics, Hybrid\r\n * - Fundamental Triad (3): Inductive, Deductive, Abductive\r\n * - Causal/Probabilistic (6): Causal, Bayesian, Counterfactual, Temporal, GameTheory, Evidential\r\n * - Analogical/First Principles (2): Analogical, FirstPrinciples\r\n * - Systems/Scientific (3): SystemsThinking, ScientificMethod, FormalLogic\r\n * - Academic (4): Synthesis, Argumentation, Critique, Analysis\r\n * - Engineering (4): Engineering, Computability, Cryptanalytic, Algorithmic\r\n * - Advanced Runtime (6): MetaReasoning, Recursive, Modal, Stochastic, Constraint, Optimization\r\n * - User-Defined (1): Custom\r\n *\r\n * @example\r\n * ```typescript\r\n * const factory = new ThoughtFactory();\r\n * const thought = factory.createThought(input, sessionId);\r\n * await sessionManager.addThought(sessionId, thought);\r\n * ```\r\n */\r\nexport class ThoughtFactory {\r\n  private logger: ILogger;\r\n  private registry: ModeHandlerRegistry;\r\n  private useRegistryForAll: boolean;\r\n\r\n  constructor(config: ThoughtFactoryConfig = {}) {\r\n    this.logger = config.logger || createLogger({ minLevel: LogLevel.INFO, enableConsole: true });\r\n    this.registry = ModeHandlerRegistry.getInstance();\r\n    this.useRegistryForAll = config.useRegistryForAll ?? true; // v8.4.0: all 33 modes have handlers\r\n\r\n    // Auto-register all 33 handlers (Phase 10 Sprint 3)\r\n    if (config.autoRegisterHandlers !== false) {\r\n      this.registerAllModeHandlers();\r\n    }\r\n  }\r\n\r\n  /**\r\n   * Register all 33 mode handlers (Phase 10 Sprint 3 v8.4.0)\r\n   *\r\n   * Uses the centralized registerAllHandlers() function from modes/index.ts\r\n   * which registers handlers for all ThinkingModes:\r\n   * - Core (5): Sequential, Shannon, Mathematics, Physics, Hybrid\r\n   * - Fundamental Triad (3): Inductive, Deductive, Abductive\r\n   * - Causal/Probabilistic (6): Causal, Bayesian, Counterfactual, Temporal, GameTheory, Evidential\r\n   * - Analogical/First Principles (2): Analogical, FirstPrinciples\r\n   * - Systems/Scientific (3): SystemsThinking, ScientificMethod, FormalLogic\r\n   * - Academic (4): Synthesis, Argumentation, Critique, Analysis\r\n   * - Engineering (4): Engineering, Computability, Cryptanalytic, Algorithmic\r\n   * - Advanced Runtime (6): MetaReasoning, Recursive, Modal, Stochastic, Constraint, Optimization\r\n   * - User-Defined (1): Custom\r\n   */\r\n  private registerAllModeHandlers(): void {\r\n    registerAllHandlers();\r\n\r\n    const stats = this.registry.getStats();\r\n    this.logger.debug('All mode handlers registered', {\r\n      count: stats.specializedHandlers,\r\n      categories: [\r\n        'Core (5)',\r\n        'Fundamental Triad (3)',\r\n        'Causal/Probabilistic (6)',\r\n        'Analogical/First Principles (2)',\r\n        'Systems/Scientific (3)',\r\n        'Academic (4)',\r\n        'Engineering (4)',\r\n        'Advanced Runtime (6)',\r\n        'User-Defined (1)',\r\n      ],\r\n    });\r\n  }\r\n\r\n  // @deprecated registerSpecializedHandlers() - use registerAllModeHandlers() instead\r\n\r\n  /**\r\n   * Check if a mode has a specialized handler\r\n   */\r\n  hasSpecializedHandler(mode: ThinkingMode): boolean {\r\n    return this.registry.hasSpecializedHandler(mode);\r\n  }\r\n\r\n  /**\r\n   * Get stats about registered handlers\r\n   */\r\n  getStats(): { specializedHandlers: number; modesWithHandlers: ThinkingMode[] } {\r\n    const stats = this.registry.getStats();\r\n    return {\r\n      specializedHandlers: stats.specializedHandlers,\r\n      modesWithHandlers: stats.modesWithHandlers,\r\n    };\r\n  }\r\n\r\n  /**\r\n   * Validate input using appropriate handler\r\n   *\r\n   * @param input - Tool input to validate\r\n   * @returns Validation result\r\n   */\r\n  validate(input: ThinkingToolInput): ValidationResult {\r\n    return this.registry.validate(input);\r\n  }\r\n\r\n  /**\r\n   * Get mode status for API response\r\n   *\r\n   * @param mode - The thinking mode\r\n   * @returns Mode status information\r\n   */\r\n  getModeStatus(mode: ThinkingMode): ModeStatus {\r\n    return this.registry.getModeStatus(mode);\r\n  }\r\n\r\n  /**\r\n   * Get the underlying registry for direct access\r\n   *\r\n   * Use this to register new handlers or access registry stats.\r\n   *\r\n   * @returns The ModeHandlerRegistry instance\r\n   */\r\n  getRegistry(): ModeHandlerRegistry {\r\n    return this.registry;\r\n  }\r\n\r\n  /**\r\n   * Determine if registry should be used for a mode\r\n   */\r\n  private shouldUseRegistry(mode: ThinkingMode): boolean {\r\n    // Always use registry if specialized handler exists\r\n    if (this.registry.hasSpecializedHandler(mode)) {\r\n      return true;\r\n    }\r\n\r\n    // Use registry for all modes if configured\r\n    if (this.useRegistryForAll) {\r\n      return true;\r\n    }\r\n\r\n    // Otherwise fall back to switch statement\r\n    return false;\r\n  }\r\n\r\n  /**\r\n   * Create a thought object based on input and mode\r\n   *\r\n   * Generates a properly typed thought object with mode-specific fields\r\n   * and default values. Each mode has unique required and optional fields.\r\n   *\r\n   * @param input - Thought input from MCP tool\r\n   * @param sessionId - Session ID this thought belongs to\r\n   * @returns Typed thought object ready for session storage\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const thought = factory.createThought({\r\n   *   mode: 'mathematics',\r\n   *   thought: 'Analyzing the problem...',\r\n   *   thoughtNumber: 1,\r\n   *   totalThoughts: 5,\r\n   *   nextThoughtNeeded: true,\r\n   *   mathematicalModel: { equations: ['E = mc^2'] }\r\n   * }, 'session-123');\r\n   * ```\r\n   */\r\n  createThought(input: ThinkingToolInput, sessionId: string): Thought {\r\n    const mode = (input.mode as ThinkingMode) || ThinkingMode.HYBRID;\r\n\r\n    this.logger.debug('Creating thought', {\r\n      sessionId,\r\n      mode,\r\n      thoughtNumber: input.thoughtNumber,\r\n      totalThoughts: input.totalThoughts,\r\n      isRevision: input.isRevision,\r\n      hasSpecializedHandler: this.registry.hasSpecializedHandler(mode),\r\n      useRegistryForAll: this.useRegistryForAll,\r\n    });\r\n\r\n    // Use registry handler if appropriate (Phase 10 Sprint 2/2B)\r\n    if (this.shouldUseRegistry(mode)) {\r\n      this.logger.debug('Using registry handler', { mode });\r\n      return this.registry.createThought(input, sessionId);\r\n    }\r\n\r\n    // @deprecated: Legacy switch statement (v8.4.0 - should never be reached)\r\n    // All 33 modes now have handlers. This code path only runs if:\r\n    // 1. useRegistryForAll is explicitly set to false, AND\r\n    // 2. A mode somehow lacks a handler\r\n    // Kept for backward compatibility only.\r\n    this.logger.warn('Using legacy switch statement - mode handler not found', { mode });\r\n    const baseThought = {\r\n      id: randomUUID(),\r\n      sessionId,\r\n      thoughtNumber: input.thoughtNumber,\r\n      totalThoughts: input.totalThoughts,\r\n      content: input.thought,\r\n      timestamp: new Date(),\r\n      nextThoughtNeeded: input.nextThoughtNeeded,\r\n      isRevision: input.isRevision,\r\n      revisesThought: input.revisesThought,\r\n    };\r\n\r\n    switch (input.mode as string) {\r\n      case 'sequential':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.SEQUENTIAL,\r\n          revisionReason: input.revisionReason,\r\n          branchFrom: input.branchFrom,\r\n          branchId: input.branchId,\r\n        } as SequentialThought;\r\n\r\n      case 'shannon':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.SHANNON,\r\n          stage: (input.stage as ShannonStage) || ShannonStage.PROBLEM_DEFINITION,\r\n          uncertainty: input.uncertainty || 0.5,\r\n          dependencies: input.dependencies || [],\r\n          assumptions: input.assumptions || [],\r\n        } as ShannonThought;\r\n\r\n      case 'mathematics':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.MATHEMATICS,\r\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'model'),\r\n          mathematicalModel: input.mathematicalModel,\r\n          proofStrategy: input.proofStrategy,\r\n          dependencies: input.dependencies || [],\r\n          assumptions: input.assumptions || [],\r\n          uncertainty: input.uncertainty || 0.5,\r\n        } as MathematicsThought;\r\n\r\n      case 'physics':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.PHYSICS,\r\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'model'),\r\n          tensorProperties: input.tensorProperties,\r\n          physicalInterpretation: input.physicalInterpretation,\r\n          dependencies: input.dependencies || [],\r\n          assumptions: input.assumptions || [],\r\n          uncertainty: input.uncertainty || 0.5,\r\n        } as PhysicsThought;\r\n\r\n      case 'inductive':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.INDUCTIVE,\r\n          observations: input.observations || [],\r\n          pattern: input.pattern,\r\n          generalization: input.generalization || '',\r\n          confidence: input.confidence ?? 0.5,\r\n          counterexamples: input.counterexamples || [],\r\n          sampleSize: input.sampleSize,\r\n        } as InductiveThought;\r\n\r\n      case 'deductive':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.DEDUCTIVE,\r\n          premises: input.premises || [],\r\n          conclusion: input.conclusion || '',\r\n          logicForm: input.logicForm,\r\n          validityCheck: input.validityCheck ?? false,\r\n          soundnessCheck: input.soundnessCheck,\r\n        } as DeductiveThought;\r\n\r\n      case 'abductive':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.ABDUCTIVE,\r\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'problem_definition'),\r\n          observations: input.observations || [],\r\n          hypotheses: input.hypotheses || [],\r\n          evaluationCriteria: input.evaluationCriteria,\r\n          evidence: input.evidence || [],\r\n          bestExplanation: input.bestExplanation,\r\n        } as AbductiveThought;\r\n\r\n      case 'causal':\r\n        // Build causalGraph from either input.causalGraph or top-level nodes/edges\r\n        // (JSON schema sends nodes/edges at top level, Zod schema nests them in causalGraph)\r\n        const inputAny = input as any;\r\n        const causalGraph = input.causalGraph || {\r\n          nodes: inputAny.nodes || [],\r\n          edges: inputAny.edges || [],\r\n        };\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.CAUSAL,\r\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'problem_definition'),\r\n          causalGraph,\r\n          interventions: input.interventions || [],\r\n          mechanisms: input.mechanisms || [],\r\n          confounders: input.confounders || [],\r\n        } as CausalThought;\r\n\r\n      case 'bayesian':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.BAYESIAN,\r\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'problem_definition'),\r\n          hypothesis: input.hypothesis,\r\n          prior: input.prior,\r\n          likelihood: input.likelihood,\r\n          evidence: input.evidence || [],\r\n          posterior: input.posterior,\r\n          bayesFactor: input.bayesFactor,\r\n        } as any;\r\n\r\n      case 'counterfactual':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.COUNTERFACTUAL,\r\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'problem_definition'),\r\n          actual: input.actual,\r\n          counterfactuals: input.counterfactuals || [],\r\n          comparison: input.comparison,\r\n          interventionPoint: input.interventionPoint,\r\n          causalChains: input.causalChains || [],\r\n        } as any;\r\n\r\n      case 'analogical':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.ANALOGICAL,\r\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'analogy'),\r\n          sourceDomain: input.sourceDomain,\r\n          targetDomain: input.targetDomain,\r\n          mapping: input.mapping || [],\r\n          insights: input.insights || [],\r\n          inferences: input.inferences || [],\r\n          limitations: input.limitations || [],\r\n          analogyStrength: input.analogyStrength,\r\n        } as any;\r\n\r\n      case 'temporal':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.TEMPORAL,\r\n          thoughtType: input.thoughtType || 'event_definition',\r\n          timeline: input.timeline,\r\n          events: input.events || [],\r\n          intervals: input.intervals || [],\r\n          constraints: input.constraints || [],\r\n          relations: input.relations || [],\r\n        } as any;\r\n\r\n      case 'gametheory':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.GAMETHEORY,\r\n          thoughtType: input.thoughtType || 'game_definition',\r\n          game: input.game,\r\n          players: input.players || [],\r\n          strategies: input.strategies || [],\r\n          payoffMatrix: input.payoffMatrix,\r\n          nashEquilibria: input.nashEquilibria || [],\r\n          dominantStrategies: input.dominantStrategies || [],\r\n          gameTree: input.gameTree,\r\n        } as any;\r\n\r\n      case 'evidential':\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.EVIDENTIAL,\r\n          thoughtType: input.thoughtType || 'hypothesis_definition',\r\n          frameOfDiscernment: input.frameOfDiscernment,\r\n          hypotheses: input.hypotheses || [],\r\n          evidence: input.evidence || [],\r\n          beliefFunctions: input.beliefFunctions || [],\r\n          combinedBelief: input.combinedBelief,\r\n          plausibility: input.plausibility,\r\n          decisions: input.decisions || [],\r\n        } as any;\r\n\r\n      case ThinkingMode.FIRSTPRINCIPLES:\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.FIRSTPRINCIPLES,\r\n          question: input.question || '',\r\n          principles: input.principles || [],\r\n          derivationSteps: input.derivationSteps || [],\r\n          conclusion: input.conclusion || { statement: '', derivationChain: [], certainty: 0 },\r\n          alternativeInterpretations: input.alternativeInterpretations || [],\r\n        } as any;\r\n\r\n      case 'metareasoning':\r\n        {\r\n          const metaInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.METAREASONING,\r\n            currentStrategy: metaInput.currentStrategy || {\r\n              mode: ThinkingMode.SEQUENTIAL,\r\n              approach: 'Default sequential approach',\r\n              startedAt: new Date(),\r\n              thoughtsSpent: 0,\r\n              progressIndicators: [],\r\n            },\r\n            strategyEvaluation: metaInput.strategyEvaluation || {\r\n              effectiveness: 0.5,\r\n              efficiency: 0.5,\r\n              confidence: 0.5,\r\n              progressRate: 0,\r\n              qualityScore: 0.5,\r\n              issues: [],\r\n              strengths: [],\r\n            },\r\n            alternativeStrategies: metaInput.alternativeStrategies || [],\r\n            recommendation: metaInput.recommendation || {\r\n              action: 'CONTINUE',\r\n              justification: 'No specific recommendation yet',\r\n              confidence: 0.5,\r\n              expectedImprovement: 'Monitor progress',\r\n            },\r\n            resourceAllocation: metaInput.resourceAllocation || {\r\n              timeSpent: 0,\r\n              thoughtsRemaining: input.totalThoughts - input.thoughtNumber,\r\n              complexityLevel: 'medium',\r\n              urgency: 'medium',\r\n              recommendation: 'Continue with current approach',\r\n            },\r\n            qualityMetrics: metaInput.qualityMetrics || {\r\n              logicalConsistency: 0.5,\r\n              evidenceQuality: 0.5,\r\n              completeness: 0.5,\r\n              originality: 0.5,\r\n              clarity: 0.5,\r\n              overallQuality: 0.5,\r\n            },\r\n            sessionContext: metaInput.sessionContext || {\r\n              sessionId,\r\n              totalThoughts: input.thoughtNumber,\r\n              modesUsed: [input.mode as ThinkingMode],\r\n              modeSwitches: 0,\r\n              problemType: 'general',\r\n            },\r\n          } as any;\r\n        }\r\n\r\n      case 'engineering':\r\n        {\r\n          const engInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.ENGINEERING,\r\n            analysisType: engInput.analysisType || 'comprehensive',\r\n            designChallenge: engInput.designChallenge || input.thought,\r\n            requirements: engInput.requirements,\r\n            tradeStudy: engInput.tradeStudy,\r\n            fmea: engInput.fmea,\r\n            designDecisions: engInput.designDecisions,\r\n            assessment: engInput.assessment,\r\n          } as EngineeringThought;\r\n        }\r\n\r\n      // ===== Phase 11 v7.2.0 - Turing's legacy =====\r\n      case 'computability':\r\n        {\r\n          const compInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.COMPUTABILITY,\r\n            thoughtType: compInput.thoughtType || 'machine_definition',\r\n            machines: compInput.machines || [],\r\n            currentMachine: compInput.currentMachine,\r\n            computationTrace: compInput.computationTrace,\r\n            problems: compInput.problems || [],\r\n            currentProblem: compInput.currentProblem,\r\n            reductions: compInput.reductions || [],\r\n            reductionChain: compInput.reductionChain || [],\r\n            decidabilityProof: compInput.decidabilityProof,\r\n            diagonalization: compInput.diagonalization,\r\n            complexityAnalysis: compInput.complexityAnalysis,\r\n            oracleAnalysis: compInput.oracleAnalysis,\r\n            dependencies: compInput.dependencies || [],\r\n            assumptions: compInput.assumptions || [],\r\n            uncertainty: compInput.uncertainty ?? 0.5,\r\n            classicProblems: compInput.classicProblems || [],\r\n            keyInsight: compInput.keyInsight,\r\n          } as ComputabilityThought;\r\n        }\r\n\r\n      case 'cryptanalytic':\r\n        {\r\n          const cryptInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.CRYPTANALYTIC,\r\n            thoughtType: cryptInput.thoughtType || 'hypothesis_formation',\r\n            ciphertext: cryptInput.ciphertext,\r\n            plaintext: cryptInput.plaintext,\r\n            hypotheses: cryptInput.hypotheses || [],\r\n            currentHypothesis: cryptInput.currentHypothesis,\r\n            evidenceChains: cryptInput.evidenceChains || [],\r\n            keySpaceAnalysis: cryptInput.keySpaceAnalysis,\r\n            frequencyAnalysis: cryptInput.frequencyAnalysis,\r\n            banburismusAnalysis: cryptInput.banburismusAnalysis || [],\r\n            cribAnalysis: cryptInput.cribAnalysis || [],\r\n            patterns: cryptInput.patterns || [],\r\n            cipherType: cryptInput.cipherType,\r\n            dependencies: cryptInput.dependencies || [],\r\n            assumptions: cryptInput.assumptions || [],\r\n            uncertainty: cryptInput.uncertainty ?? 0.5,\r\n            keyInsight: cryptInput.keyInsight,\r\n          } as CryptanalyticThought;\r\n        }\r\n\r\n      // ===== Phase 12 v7.3.0 - CLRS algorithms =====\r\n      case 'algorithmic':\r\n        {\r\n          const algoInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.ALGORITHMIC,\r\n            thoughtType: algoInput.thoughtType || 'algorithm_definition',\r\n            algorithm: algoInput.algorithm,\r\n            clrsCategory: algoInput.clrsCategory,\r\n            clrsAlgorithm: algoInput.clrsAlgorithm,\r\n            designPattern: algoInput.designPattern,\r\n            timeComplexity: algoInput.timeComplexity,\r\n            spaceComplexity: algoInput.spaceComplexity,\r\n            recurrence: algoInput.recurrence,\r\n            correctnessProof: algoInput.correctnessProof,\r\n            loopInvariants: algoInput.loopInvariants || [],\r\n            dpFormulation: algoInput.dpFormulation,\r\n            greedyProof: algoInput.greedyProof,\r\n            graphContext: algoInput.graphContext,\r\n            dataStructure: algoInput.dataStructure,\r\n            amortizedAnalysis: algoInput.amortizedAnalysis,\r\n            comparison: algoInput.comparison,\r\n            dependencies: algoInput.dependencies || [],\r\n            assumptions: algoInput.assumptions || [],\r\n            uncertainty: algoInput.uncertainty ?? 0.5,\r\n            keyInsight: algoInput.keyInsight,\r\n            pseudocode: algoInput.pseudocode,\r\n            executionTrace: algoInput.executionTrace,\r\n          } as AlgorithmicThought;\r\n        }\r\n\r\n      // ===== Phase 4 v3.2.0 - Scientific modes =====\r\n      case 'systemsthinking':\r\n        {\r\n          const sysInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.SYSTEMSTHINKING,\r\n            thoughtType: sysInput.thoughtType || 'system_definition',\r\n            system: sysInput.system,\r\n            components: sysInput.components || [],\r\n            feedbackLoops: sysInput.feedbackLoops || [],\r\n            leveragePoints: sysInput.leveragePoints || [],\r\n            behaviors: sysInput.behaviors || [],\r\n          } as SystemsThinkingThought;\r\n        }\r\n\r\n      case 'scientificmethod':\r\n        {\r\n          const sciInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.SCIENTIFICMETHOD,\r\n            thoughtType: sciInput.thoughtType || 'question_formulation',\r\n            researchQuestion: sciInput.researchQuestion,\r\n            scientificHypotheses: sciInput.scientificHypotheses || [],\r\n            experiment: sciInput.experiment,\r\n            data: sciInput.data,\r\n            analysis: sciInput.analysis,\r\n            conclusion: sciInput.conclusion,\r\n          } as ScientificMethodThought;\r\n        }\r\n\r\n      case 'formallogic':\r\n        {\r\n          const logicInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.FORMALLOGIC,\r\n            thoughtType: logicInput.thoughtType || 'proposition_definition',\r\n            propositions: logicInput.propositions || [],\r\n            logicalInferences: logicInput.logicalInferences || [],\r\n            proof: logicInput.proof,\r\n            truthTable: logicInput.truthTable,\r\n            satisfiability: logicInput.satisfiability,\r\n          } as FormalLogicThought;\r\n        }\r\n\r\n      case 'optimization':\r\n        {\r\n          const optInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.OPTIMIZATION,\r\n            thoughtType: optInput.thoughtType || 'problem_formulation',\r\n            objectiveFunction: optInput.objectiveFunction,\r\n            constraints: optInput.constraints || [],\r\n            variables: optInput.variables || [],\r\n            solution: optInput.solution,\r\n            method: optInput.method,\r\n            convergence: optInput.convergence,\r\n            sensitivity: optInput.sensitivity,\r\n          } as OptimizationThought;\r\n        }\r\n\r\n      // ===== Phase 13 v7.4.0 - Academic Research modes =====\r\n      case 'synthesis':\r\n        {\r\n          const synthInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.SYNTHESIS,\r\n            thoughtType: synthInput.thoughtType || 'source_identification',\r\n            sources: synthInput.sources || [],\r\n            reviewMetadata: synthInput.reviewMetadata,\r\n            concepts: synthInput.concepts || [],\r\n            themes: synthInput.themes || [],\r\n            findings: synthInput.findings || [],\r\n            patterns: synthInput.patterns || [],\r\n            relations: synthInput.relations || [],\r\n            gaps: synthInput.gaps || [],\r\n            contradictions: synthInput.contradictions || [],\r\n            framework: synthInput.framework,\r\n            conclusions: synthInput.conclusions || [],\r\n            dependencies: synthInput.dependencies || [],\r\n            assumptions: synthInput.assumptions || [],\r\n            uncertainty: synthInput.uncertainty ?? 0.5,\r\n            keyInsight: synthInput.keyInsight,\r\n          } as SynthesisThought;\r\n        }\r\n\r\n      case 'argumentation':\r\n        {\r\n          const argInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.ARGUMENTATION,\r\n            thoughtType: argInput.thoughtType || 'claim_formulation',\r\n            claims: argInput.claims || [],\r\n            currentClaim: argInput.currentClaim,\r\n            grounds: argInput.grounds || [],\r\n            warrants: argInput.warrants || [],\r\n            backings: argInput.backings || [],\r\n            qualifiers: argInput.qualifiers || [],\r\n            rebuttals: argInput.rebuttals || [],\r\n            arguments: argInput.arguments || [],\r\n            currentArgument: argInput.currentArgument,\r\n            argumentChain: argInput.argumentChain,\r\n            dialectic: argInput.dialectic,\r\n            rhetoricalStrategies: argInput.rhetoricalStrategies || [],\r\n            audienceConsideration: argInput.audienceConsideration,\r\n            fallacies: argInput.fallacies || [],\r\n            argumentStrength: argInput.argumentStrength ?? 0.5,\r\n            dependencies: argInput.dependencies || [],\r\n            assumptions: argInput.assumptions || [],\r\n            uncertainty: argInput.uncertainty ?? 0.5,\r\n            keyInsight: argInput.keyInsight,\r\n          } as ArgumentationThought;\r\n        }\r\n\r\n      case 'critique':\r\n        {\r\n          const critInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.CRITIQUE,\r\n            thoughtType: critInput.thoughtType || 'work_characterization',\r\n            work: critInput.work || {\r\n              id: randomUUID(),\r\n              title: 'Untitled Work',\r\n              authors: [],\r\n              year: new Date().getFullYear(),\r\n              type: 'empirical_study',\r\n              field: 'Unknown',\r\n              claimedContribution: '',\r\n            },\r\n            methodologyEvaluation: critInput.methodologyEvaluation,\r\n            argumentCritique: critInput.argumentCritique,\r\n            evidenceCritique: critInput.evidenceCritique,\r\n            contributionEvaluation: critInput.contributionEvaluation,\r\n            critiquePoints: critInput.critiquePoints || [],\r\n            improvements: critInput.improvements || [],\r\n            verdict: critInput.verdict,\r\n            strengthsIdentified: critInput.strengthsIdentified ?? 0,\r\n            weaknessesIdentified: critInput.weaknessesIdentified ?? 0,\r\n            balanceRatio: critInput.balanceRatio ?? 1,\r\n            dependencies: critInput.dependencies || [],\r\n            assumptions: critInput.assumptions || [],\r\n            uncertainty: critInput.uncertainty ?? 0.5,\r\n            keyInsight: critInput.keyInsight,\r\n          } as CritiqueThought;\r\n        }\r\n\r\n      case 'analysis':\r\n        {\r\n          const analInput = input as any;\r\n          return {\r\n            ...baseThought,\r\n            mode: ThinkingMode.ANALYSIS,\r\n            thoughtType: analInput.thoughtType || 'data_familiarization',\r\n            methodology: analInput.methodology || 'thematic_analysis',\r\n            dataSources: analInput.dataSources || [],\r\n            dataSegments: analInput.dataSegments || [],\r\n            totalSegments: analInput.totalSegments,\r\n            codebook: analInput.codebook,\r\n            currentCodes: analInput.currentCodes || [],\r\n            codingProgress: analInput.codingProgress,\r\n            themes: analInput.themes || [],\r\n            thematicMap: analInput.thematicMap,\r\n            memos: analInput.memos || [],\r\n            gtCategories: analInput.gtCategories || [],\r\n            theoreticalSampling: analInput.theoreticalSampling || [],\r\n            discoursePatterns: analInput.discoursePatterns || [],\r\n            rigorAssessment: analInput.rigorAssessment,\r\n            dependencies: analInput.dependencies || [],\r\n            assumptions: analInput.assumptions || [],\r\n            uncertainty: analInput.uncertainty ?? 0.5,\r\n            keyInsight: analInput.keyInsight,\r\n          } as AnalysisThought;\r\n        }\r\n\r\n      case 'hybrid':\r\n      default:\r\n        return {\r\n          ...baseThought,\r\n          mode: ThinkingMode.HYBRID,\r\n          thoughtType: toExtendedThoughtType(input.thoughtType, 'synthesis'),\r\n          stage: input.stage as ShannonStage,\r\n          uncertainty: input.uncertainty,\r\n          dependencies: input.dependencies,\r\n          assumptions: input.assumptions,\r\n          mathematicalModel: input.mathematicalModel,\r\n          tensorProperties: input.tensorProperties,\r\n          physicalInterpretation: input.physicalInterpretation,\r\n          primaryMode: (input.mode || ThinkingMode.HYBRID) as any,\r\n          secondaryFeatures: [],\r\n        } as any;\r\n    }\r\n  }\r\n}\r\n\r\n","/**\n * Visual Export Utilities (v4.3.0)\n * Sprint 8 Task 8.1: Shared utilities for visual exporters\n */\n\n/**\n * Sanitize ID for use in diagram formats\n */\nexport function sanitizeId(id: string): string {\n  return id.replace(/[^a-zA-Z0-9_]/g, '_');\n}\n","/**\r\n * Mermaid Utilities (v7.1.0)\r\n * Shared utility functions for Mermaid diagram generation across all visual exporters\r\n */\r\n\r\n// =============================================================================\r\n// Types\r\n// =============================================================================\r\n\r\n/** Mermaid graph direction */\r\nexport type MermaidDirection = 'TD' | 'TB' | 'LR' | 'RL' | 'BT';\r\n\r\n/** Mermaid node shape identifiers */\r\nexport type MermaidNodeShape =\r\n  | 'rectangle'      // [label]\r\n  | 'rounded'        // (label)\r\n  | 'stadium'        // ([label])\r\n  | 'subroutine'     // [[label]]\r\n  | 'cylinder'       // [(label)]\r\n  | 'circle'         // ((label))\r\n  | 'asymmetric'     // >label]\r\n  | 'rhombus'        // {label}\r\n  | 'hexagon'        // {{label}}\r\n  | 'parallelogram'  // [/label/]\r\n  | 'parallelogram-alt' // [\\label\\]\r\n  | 'trapezoid'      // [/label\\]\r\n  | 'trapezoid-alt'  // [\\label/]\r\n  | 'double-circle'; // (((label)))\r\n\r\n/** Mermaid edge/link style */\r\nexport type MermaidEdgeStyle =\r\n  | 'arrow'          // -->\r\n  | 'open'           // ---\r\n  | 'dotted'         // -.->\r\n  | 'thick'          // ==>\r\n  | 'invisible';     // ~~~\r\n\r\n/** Mermaid node definition */\r\nexport interface MermaidNode {\r\n  id: string;\r\n  label: string;\r\n  shape?: MermaidNodeShape;\r\n  style?: {\r\n    fill?: string;\r\n    stroke?: string;\r\n    strokeWidth?: string;\r\n    color?: string;\r\n  };\r\n  className?: string;\r\n}\r\n\r\n/** Mermaid edge definition */\r\nexport interface MermaidEdge {\r\n  source: string;\r\n  target: string;\r\n  style?: MermaidEdgeStyle;\r\n  label?: string;\r\n  labelPosition?: 'middle' | 'start' | 'end';\r\n}\r\n\r\n/** Mermaid subgraph definition */\r\nexport interface MermaidSubgraph {\r\n  id: string;\r\n  label: string;\r\n  nodes: string[];\r\n  direction?: MermaidDirection;\r\n}\r\n\r\n/** Mermaid diagram options */\r\nexport interface MermaidOptions {\r\n  direction?: MermaidDirection;\r\n  title?: string;\r\n  includeLabels?: boolean;\r\n  colorScheme?: 'default' | 'pastel' | 'monochrome';\r\n}\r\n\r\n// =============================================================================\r\n// ID and String Utilities\r\n// =============================================================================\r\n\r\n/**\r\n * Sanitize an ID for use in Mermaid diagrams\r\n * Mermaid IDs should be alphanumeric with underscores\r\n */\r\nexport function sanitizeMermaidId(id: string): string {\r\n  return id\r\n    .replace(/[^a-zA-Z0-9_]/g, '_')\r\n    .replace(/^(\\d)/, '_$1')\r\n    .replace(/__+/g, '_')\r\n    .replace(/^_+|_+$/g, '') || 'node';\r\n}\r\n\r\n/**\r\n * Escape special characters in Mermaid labels\r\n * Handles quotes and special markdown characters\r\n */\r\nexport function escapeMermaidLabel(label: string): string {\r\n  return label\r\n    .replace(/\"/g, '#quot;')\r\n    .replace(/</g, '#lt;')\r\n    .replace(/>/g, '#gt;')\r\n    .replace(/\\[/g, '#91;')\r\n    .replace(/\\]/g, '#93;')\r\n    .replace(/\\{/g, '#123;')\r\n    .replace(/\\}/g, '#125;')\r\n    .replace(/\\(/g, '#40;')\r\n    .replace(/\\)/g, '#41;')\r\n    .replace(/\\|/g, '#124;')\r\n    .replace(/\\n/g, '<br/>');\r\n}\r\n\r\n/**\r\n * Truncate a label to a maximum length\r\n */\r\nexport function truncateLabel(label: string, maxLength: number = 40): string {\r\n  if (label.length <= maxLength) return label;\r\n  return label.substring(0, maxLength - 3) + '...';\r\n}\r\n\r\n// =============================================================================\r\n// Node Shape Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Get the opening and closing brackets for a node shape\r\n */\r\nexport function getNodeShapeBrackets(shape: MermaidNodeShape): [string, string] {\r\n  switch (shape) {\r\n    case 'rectangle':\r\n      return ['[', ']'];\r\n    case 'rounded':\r\n      return ['(', ')'];\r\n    case 'stadium':\r\n      return ['([', '])'];\r\n    case 'subroutine':\r\n      return ['[[', ']]'];\r\n    case 'cylinder':\r\n      return ['[(', ')]'];\r\n    case 'circle':\r\n      return ['((', '))'];\r\n    case 'asymmetric':\r\n      return ['>', ']'];\r\n    case 'rhombus':\r\n      return ['{', '}'];\r\n    case 'hexagon':\r\n      return ['{{', '}}'];\r\n    case 'parallelogram':\r\n      return ['[/', '/]'];\r\n    case 'parallelogram-alt':\r\n      return ['[\\\\', '\\\\]'];\r\n    case 'trapezoid':\r\n      return ['[/', '\\\\]'];\r\n    case 'trapezoid-alt':\r\n      return ['[\\\\', '/]'];\r\n    case 'double-circle':\r\n      return ['(((', ')))'];\r\n    default:\r\n      return ['[', ']'];\r\n  }\r\n}\r\n\r\n/**\r\n * Render a single Mermaid node\r\n */\r\nexport function renderMermaidNode(node: MermaidNode): string {\r\n  const id = sanitizeMermaidId(node.id);\r\n  const label = escapeMermaidLabel(node.label);\r\n  const [open, close] = getNodeShapeBrackets(node.shape || 'rectangle');\r\n\r\n  let nodeStr = `  ${id}${open}\"${label}\"${close}`;\r\n\r\n  if (node.className) {\r\n    nodeStr += `:::${node.className}`;\r\n  }\r\n\r\n  return nodeStr;\r\n}\r\n\r\n/**\r\n * Render a node style definition\r\n */\r\nexport function renderMermaidNodeStyle(nodeId: string, style: MermaidNode['style']): string {\r\n  if (!style) return '';\r\n\r\n  const id = sanitizeMermaidId(nodeId);\r\n  const styles: string[] = [];\r\n\r\n  if (style.fill) styles.push(`fill:${style.fill}`);\r\n  if (style.stroke) styles.push(`stroke:${style.stroke}`);\r\n  if (style.strokeWidth) styles.push(`stroke-width:${style.strokeWidth}`);\r\n  if (style.color) styles.push(`color:${style.color}`);\r\n\r\n  if (styles.length === 0) return '';\r\n  return `  style ${id} ${styles.join(',')}`;\r\n}\r\n\r\n// =============================================================================\r\n// Edge Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Get the arrow syntax for an edge style\r\n */\r\nexport function getEdgeArrow(style: MermaidEdgeStyle): string {\r\n  switch (style) {\r\n    case 'arrow':\r\n      return '-->';\r\n    case 'open':\r\n      return '---';\r\n    case 'dotted':\r\n      return '-.->';\r\n    case 'thick':\r\n      return '==>';\r\n    case 'invisible':\r\n      return '~~~';\r\n    default:\r\n      return '-->';\r\n  }\r\n}\r\n\r\n/**\r\n * Render a single Mermaid edge\r\n */\r\nexport function renderMermaidEdge(edge: MermaidEdge): string {\r\n  const source = sanitizeMermaidId(edge.source);\r\n  const target = sanitizeMermaidId(edge.target);\r\n  const arrow = getEdgeArrow(edge.style || 'arrow');\r\n\r\n  if (edge.label) {\r\n    const label = escapeMermaidLabel(edge.label);\r\n    return `  ${source} ${arrow}|${label}| ${target}`;\r\n  }\r\n\r\n  return `  ${source} ${arrow} ${target}`;\r\n}\r\n\r\n// =============================================================================\r\n// Subgraph Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Render a Mermaid subgraph\r\n */\r\nexport function renderMermaidSubgraph(subgraph: MermaidSubgraph): string {\r\n  const lines: string[] = [];\r\n  const id = sanitizeMermaidId(subgraph.id);\r\n  const label = escapeMermaidLabel(subgraph.label);\r\n\r\n  lines.push(`  subgraph ${id}[\"${label}\"]`);\r\n\r\n  if (subgraph.direction) {\r\n    lines.push(`    direction ${subgraph.direction}`);\r\n  }\r\n\r\n  for (const nodeId of subgraph.nodes) {\r\n    lines.push(`    ${sanitizeMermaidId(nodeId)}`);\r\n  }\r\n\r\n  lines.push('  end');\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// Color Utilities\r\n// =============================================================================\r\n\r\n/** Color palettes for different schemes */\r\nexport const MERMAID_COLORS = {\r\n  default: {\r\n    primary: '#a8d5ff',\r\n    secondary: '#ffd699',\r\n    success: '#81c784',\r\n    warning: '#ffb74d',\r\n    danger: '#e57373',\r\n    info: '#4fc3f7',\r\n    neutral: '#e0e0e0',\r\n  },\r\n  pastel: {\r\n    primary: '#e1f5ff',\r\n    secondary: '#fff3e0',\r\n    success: '#c8e6c9',\r\n    warning: '#ffecb3',\r\n    danger: '#ffcdd2',\r\n    info: '#b3e5fc',\r\n    neutral: '#f5f5f5',\r\n  },\r\n  monochrome: {\r\n    primary: '#e0e0e0',\r\n    secondary: '#bdbdbd',\r\n    success: '#9e9e9e',\r\n    warning: '#757575',\r\n    danger: '#616161',\r\n    info: '#424242',\r\n    neutral: '#f5f5f5',\r\n  },\r\n};\r\n\r\n/**\r\n * Get a color from the specified scheme\r\n */\r\nexport function getMermaidColor(\r\n  type: keyof typeof MERMAID_COLORS.default,\r\n  scheme: 'default' | 'pastel' | 'monochrome' = 'default'\r\n): string {\r\n  return MERMAID_COLORS[scheme][type];\r\n}\r\n\r\n// =============================================================================\r\n// Complete Diagram Generation\r\n// =============================================================================\r\n\r\n/**\r\n * Generate a complete Mermaid flowchart diagram\r\n */\r\nexport function generateMermaidFlowchart(\r\n  nodes: MermaidNode[],\r\n  edges: MermaidEdge[],\r\n  options: MermaidOptions = {}\r\n): string {\r\n  const { direction = 'TD', colorScheme = 'default' } = options;\r\n  const lines: string[] = [];\r\n\r\n  // Header\r\n  lines.push(`graph ${direction}`);\r\n\r\n  // Nodes\r\n  if (nodes.length > 0) {\r\n    lines.push('');\r\n    for (const node of nodes) {\r\n      lines.push(renderMermaidNode(node));\r\n    }\r\n  }\r\n\r\n  // Edges\r\n  if (edges.length > 0) {\r\n    lines.push('');\r\n    for (const edge of edges) {\r\n      lines.push(renderMermaidEdge(edge));\r\n    }\r\n  }\r\n\r\n  // Styles\r\n  if (colorScheme !== 'monochrome') {\r\n    const styledNodes = nodes.filter(n => n.style);\r\n    if (styledNodes.length > 0) {\r\n      lines.push('');\r\n      for (const node of styledNodes) {\r\n        const styleStr = renderMermaidNodeStyle(node.id, node.style);\r\n        if (styleStr) lines.push(styleStr);\r\n      }\r\n    }\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a linear flow diagram (start -> step1 -> step2 -> ... -> end)\r\n */\r\nexport function generateLinearFlowMermaid(\r\n  steps: string[],\r\n  options: MermaidOptions = {}\r\n): string {\r\n  const { direction = 'TD', colorScheme = 'default' } = options;\r\n\r\n  if (steps.length === 0) {\r\n    return `graph ${direction}\\n  Empty[\"No steps\"]`;\r\n  }\r\n\r\n  const nodes: MermaidNode[] = steps.map((step, index) => ({\r\n    id: `step_${index}`,\r\n    label: truncateLabel(step),\r\n    shape: index === 0 ? 'stadium' : index === steps.length - 1 ? 'stadium' : 'rectangle',\r\n    style: {\r\n      fill: index === 0\r\n        ? getMermaidColor('primary', colorScheme)\r\n        : index === steps.length - 1\r\n          ? getMermaidColor('success', colorScheme)\r\n          : undefined,\r\n    },\r\n  }));\r\n\r\n  const edges: MermaidEdge[] = [];\r\n  for (let i = 0; i < steps.length - 1; i++) {\r\n    edges.push({\r\n      source: `step_${i}`,\r\n      target: `step_${i + 1}`,\r\n      style: 'arrow',\r\n    });\r\n  }\r\n\r\n  return generateMermaidFlowchart(nodes, edges, options);\r\n}\r\n\r\n/**\r\n * Generate a hierarchical/tree diagram\r\n */\r\nexport function generateHierarchyMermaid(\r\n  root: { id: string; label: string; children?: Array<{ id: string; label: string; children?: unknown[] }> },\r\n  options: MermaidOptions = {}\r\n): string {\r\n  const { direction = 'TD' } = options;\r\n  const nodes: MermaidNode[] = [];\r\n  const edges: MermaidEdge[] = [];\r\n\r\n  function traverse(\r\n    node: { id: string; label: string; children?: unknown[] },\r\n    parentId?: string\r\n  ): void {\r\n    nodes.push({\r\n      id: node.id,\r\n      label: truncateLabel(node.label),\r\n      shape: parentId ? 'rectangle' : 'stadium',\r\n    });\r\n\r\n    if (parentId) {\r\n      edges.push({\r\n        source: parentId,\r\n        target: node.id,\r\n        style: 'arrow',\r\n      });\r\n    }\r\n\r\n    if (node.children && Array.isArray(node.children)) {\r\n      for (const child of node.children as Array<{ id: string; label: string; children?: unknown[] }>) {\r\n        traverse(child, node.id);\r\n      }\r\n    }\r\n  }\r\n\r\n  traverse(root);\r\n  return generateMermaidFlowchart(nodes, edges, { ...options, direction });\r\n}\r\n\r\n/**\r\n * Generate a state diagram\r\n */\r\nexport function generateMermaidStateDiagram(\r\n  states: Array<{ id: string; label: string; type?: 'start' | 'end' | 'normal' | 'choice' }>,\r\n  transitions: Array<{ from: string; to: string; label?: string }>\r\n): string {\r\n  const lines: string[] = ['stateDiagram-v2'];\r\n\r\n  // Define states\r\n  for (const state of states) {\r\n    if (state.type === 'start') {\r\n      lines.push(`  [*] --> ${sanitizeMermaidId(state.id)}`);\r\n    } else if (state.type === 'end') {\r\n      lines.push(`  ${sanitizeMermaidId(state.id)} --> [*]`);\r\n    }\r\n\r\n    if (state.type !== 'start' && state.type !== 'end') {\r\n      lines.push(`  ${sanitizeMermaidId(state.id)} : ${escapeMermaidLabel(state.label)}`);\r\n    }\r\n  }\r\n\r\n  // Define transitions\r\n  lines.push('');\r\n  for (const trans of transitions) {\r\n    const from = sanitizeMermaidId(trans.from);\r\n    const to = sanitizeMermaidId(trans.to);\r\n    if (trans.label) {\r\n      lines.push(`  ${from} --> ${to} : ${escapeMermaidLabel(trans.label)}`);\r\n    } else {\r\n      lines.push(`  ${from} --> ${to}`);\r\n    }\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a class diagram\r\n */\r\nexport function generateMermaidClassDiagram(\r\n  classes: Array<{\r\n    name: string;\r\n    attributes?: string[];\r\n    methods?: string[];\r\n  }>,\r\n  relationships: Array<{\r\n    from: string;\r\n    to: string;\r\n    type: 'inheritance' | 'composition' | 'aggregation' | 'association' | 'dependency';\r\n    label?: string;\r\n  }>\r\n): string {\r\n  const lines: string[] = ['classDiagram'];\r\n\r\n  // Define classes\r\n  for (const cls of classes) {\r\n    lines.push(`  class ${sanitizeMermaidId(cls.name)} {`);\r\n    if (cls.attributes) {\r\n      for (const attr of cls.attributes) {\r\n        lines.push(`    ${attr}`);\r\n      }\r\n    }\r\n    if (cls.methods) {\r\n      for (const method of cls.methods) {\r\n        lines.push(`    ${method}`);\r\n      }\r\n    }\r\n    lines.push('  }');\r\n  }\r\n\r\n  // Define relationships\r\n  lines.push('');\r\n  for (const rel of relationships) {\r\n    const from = sanitizeMermaidId(rel.from);\r\n    const to = sanitizeMermaidId(rel.to);\r\n    let arrow: string;\r\n    switch (rel.type) {\r\n      case 'inheritance':\r\n        arrow = '<|--';\r\n        break;\r\n      case 'composition':\r\n        arrow = '*--';\r\n        break;\r\n      case 'aggregation':\r\n        arrow = 'o--';\r\n        break;\r\n      case 'association':\r\n        arrow = '-->';\r\n        break;\r\n      case 'dependency':\r\n        arrow = '..>';\r\n        break;\r\n      default:\r\n        arrow = '-->';\r\n    }\r\n    if (rel.label) {\r\n      lines.push(`  ${from} ${arrow} ${to} : ${escapeMermaidLabel(rel.label)}`);\r\n    } else {\r\n      lines.push(`  ${from} ${arrow} ${to}`);\r\n    }\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n","/**\r\n * DOT/GraphViz Utilities (v7.1.0)\r\n * Shared utility functions for DOT graph generation across all visual exporters\r\n */\r\n\r\n// =============================================================================\r\n// Types\r\n// =============================================================================\r\n\r\n/** DOT rank direction */\r\nexport type DotRankDir = 'TB' | 'BT' | 'LR' | 'RL';\r\n\r\n/** DOT node shapes */\r\nexport type DotNodeShape =\r\n  | 'box'\r\n  | 'ellipse'\r\n  | 'circle'\r\n  | 'oval'\r\n  | 'diamond'\r\n  | 'trapezium'\r\n  | 'parallelogram'\r\n  | 'house'\r\n  | 'pentagon'\r\n  | 'hexagon'\r\n  | 'septagon'\r\n  | 'octagon'\r\n  | 'doublecircle'\r\n  | 'doubleoctagon'\r\n  | 'tripleoctagon'\r\n  | 'invtriangle'\r\n  | 'triangle'\r\n  | 'star'\r\n  | 'cylinder'\r\n  | 'note'\r\n  | 'tab'\r\n  | 'folder'\r\n  | 'component'\r\n  | 'plaintext'\r\n  | 'plain'\r\n  | 'point'\r\n  | 'record'\r\n  | 'Mrecord';\r\n\r\n/** DOT edge arrow shapes */\r\nexport type DotArrowHead =\r\n  | 'normal'\r\n  | 'inv'\r\n  | 'dot'\r\n  | 'invdot'\r\n  | 'odot'\r\n  | 'invodot'\r\n  | 'none'\r\n  | 'tee'\r\n  | 'empty'\r\n  | 'invempty'\r\n  | 'diamond'\r\n  | 'odiamond'\r\n  | 'ediamond'\r\n  | 'crow'\r\n  | 'box'\r\n  | 'obox'\r\n  | 'open'\r\n  | 'halfopen'\r\n  | 'vee';\r\n\r\n/** DOT edge style */\r\nexport type DotEdgeStyle = 'solid' | 'dashed' | 'dotted' | 'bold' | 'invis';\r\n\r\n/** DOT node style */\r\nexport type DotNodeStyle =\r\n  | 'solid'\r\n  | 'dashed'\r\n  | 'dotted'\r\n  | 'bold'\r\n  | 'rounded'\r\n  | 'diagonals'\r\n  | 'filled'\r\n  | 'striped'\r\n  | 'wedged';\r\n\r\n/** DOT node definition */\r\nexport interface DotNode {\r\n  id: string;\r\n  label?: string;\r\n  shape?: DotNodeShape;\r\n  style?: DotNodeStyle | DotNodeStyle[];\r\n  fillColor?: string;\r\n  color?: string;\r\n  fontColor?: string;\r\n  fontName?: string;\r\n  fontSize?: number;\r\n  width?: number;\r\n  height?: number;\r\n  tooltip?: string;\r\n  url?: string;\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\n/** DOT edge definition */\r\nexport interface DotEdge {\r\n  source: string;\r\n  target: string;\r\n  label?: string;\r\n  style?: DotEdgeStyle;\r\n  color?: string;\r\n  fontColor?: string;\r\n  arrowHead?: DotArrowHead;\r\n  arrowTail?: DotArrowHead;\r\n  constraint?: boolean;\r\n  weight?: number;\r\n  penWidth?: number;\r\n  tooltip?: string;\r\n}\r\n\r\n/** DOT subgraph definition */\r\nexport interface DotSubgraph {\r\n  id: string;\r\n  label?: string;\r\n  nodes: string[];\r\n  style?: 'filled' | 'rounded' | 'dashed';\r\n  fillColor?: string;\r\n  color?: string;\r\n  rank?: 'same' | 'min' | 'max' | 'source' | 'sink';\r\n}\r\n\r\n/** DOT graph options */\r\nexport interface DotOptions {\r\n  graphType?: 'digraph' | 'graph';\r\n  graphName?: string;\r\n  rankDir?: DotRankDir;\r\n  splines?: 'ortho' | 'polyline' | 'curved' | 'line' | 'spline' | 'true' | 'false';\r\n  overlap?: boolean | 'scale' | 'false' | 'true' | 'compress';\r\n  concentrate?: boolean;\r\n  compound?: boolean;\r\n  bgcolor?: string;\r\n  fontName?: string;\r\n  fontSize?: number;\r\n  nodeDefaults?: Partial<DotNode>;\r\n  edgeDefaults?: Partial<DotEdge>;\r\n  includeLabels?: boolean;\r\n}\r\n\r\n// =============================================================================\r\n// ID and String Utilities\r\n// =============================================================================\r\n\r\n/**\r\n * Sanitize an ID for use in DOT graphs\r\n * DOT IDs can be alphanumeric or quoted strings\r\n */\r\nexport function sanitizeDotId(id: string): string {\r\n  // If ID is simple alphanumeric, return as-is\r\n  if (/^[a-zA-Z_][a-zA-Z0-9_]*$/.test(id)) {\r\n    return id;\r\n  }\r\n  // Otherwise, quote it\r\n  return `\"${escapeDotString(id)}\"`;\r\n}\r\n\r\n/**\r\n * Escape special characters in DOT strings\r\n */\r\nexport function escapeDotString(str: string): string {\r\n  return str\r\n    .replace(/\\\\/g, '\\\\\\\\')\r\n    .replace(/\"/g, '\\\\\"')\r\n    .replace(/\\n/g, '\\\\n')\r\n    .replace(/\\r/g, '\\\\r')\r\n    .replace(/\\t/g, '\\\\t');\r\n}\r\n\r\n/**\r\n * Truncate a label to a maximum length\r\n */\r\nexport function truncateDotLabel(label: string, maxLength: number = 50): string {\r\n  if (label.length <= maxLength) return label;\r\n  return label.substring(0, maxLength - 3) + '...';\r\n}\r\n\r\n// =============================================================================\r\n// Attribute Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Render node attributes as a DOT attribute string\r\n */\r\nexport function renderDotNodeAttrs(node: DotNode): string {\r\n  const attrs: string[] = [];\r\n\r\n  if (node.label !== undefined) {\r\n    attrs.push(`label=\"${escapeDotString(node.label)}\"`);\r\n  }\r\n  if (node.shape) {\r\n    attrs.push(`shape=${node.shape}`);\r\n  }\r\n  if (node.style) {\r\n    const styleStr = Array.isArray(node.style) ? node.style.join(',') : node.style;\r\n    attrs.push(`style=\"${styleStr}\"`);\r\n  }\r\n  if (node.fillColor) {\r\n    attrs.push(`fillcolor=\"${node.fillColor}\"`);\r\n  }\r\n  if (node.color) {\r\n    attrs.push(`color=\"${node.color}\"`);\r\n  }\r\n  if (node.fontColor) {\r\n    attrs.push(`fontcolor=\"${node.fontColor}\"`);\r\n  }\r\n  if (node.fontName) {\r\n    attrs.push(`fontname=\"${node.fontName}\"`);\r\n  }\r\n  if (node.fontSize) {\r\n    attrs.push(`fontsize=${node.fontSize}`);\r\n  }\r\n  if (node.width) {\r\n    attrs.push(`width=${node.width}`);\r\n  }\r\n  if (node.height) {\r\n    attrs.push(`height=${node.height}`);\r\n  }\r\n  if (node.tooltip) {\r\n    attrs.push(`tooltip=\"${escapeDotString(node.tooltip)}\"`);\r\n  }\r\n  if (node.url) {\r\n    attrs.push(`URL=\"${escapeDotString(node.url)}\"`);\r\n  }\r\n\r\n  return attrs.length > 0 ? ` [${attrs.join(', ')}]` : '';\r\n}\r\n\r\n/**\r\n * Render edge attributes as a DOT attribute string\r\n */\r\nexport function renderDotEdgeAttrs(edge: DotEdge): string {\r\n  const attrs: string[] = [];\r\n\r\n  if (edge.label) {\r\n    attrs.push(`label=\"${escapeDotString(edge.label)}\"`);\r\n  }\r\n  if (edge.style) {\r\n    attrs.push(`style=${edge.style}`);\r\n  }\r\n  if (edge.color) {\r\n    attrs.push(`color=\"${edge.color}\"`);\r\n  }\r\n  if (edge.fontColor) {\r\n    attrs.push(`fontcolor=\"${edge.fontColor}\"`);\r\n  }\r\n  if (edge.arrowHead) {\r\n    attrs.push(`arrowhead=${edge.arrowHead}`);\r\n  }\r\n  if (edge.arrowTail) {\r\n    attrs.push(`arrowtail=${edge.arrowTail}`);\r\n  }\r\n  if (edge.constraint === false) {\r\n    attrs.push('constraint=false');\r\n  }\r\n  if (edge.weight !== undefined) {\r\n    attrs.push(`weight=${edge.weight}`);\r\n  }\r\n  if (edge.penWidth !== undefined) {\r\n    attrs.push(`penwidth=${edge.penWidth}`);\r\n  }\r\n  if (edge.tooltip) {\r\n    attrs.push(`tooltip=\"${escapeDotString(edge.tooltip)}\"`);\r\n  }\r\n\r\n  return attrs.length > 0 ? ` [${attrs.join(', ')}]` : '';\r\n}\r\n\r\n// =============================================================================\r\n// Node Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Render a single DOT node\r\n */\r\nexport function renderDotNode(node: DotNode): string {\r\n  const id = sanitizeDotId(node.id);\r\n  const attrs = renderDotNodeAttrs(node);\r\n  return `  ${id}${attrs};`;\r\n}\r\n\r\n// =============================================================================\r\n// Edge Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Render a single DOT edge\r\n */\r\nexport function renderDotEdge(edge: DotEdge, directed: boolean = true): string {\r\n  const source = sanitizeDotId(edge.source);\r\n  const target = sanitizeDotId(edge.target);\r\n  const arrow = directed ? '->' : '--';\r\n  const attrs = renderDotEdgeAttrs(edge);\r\n  return `  ${source} ${arrow} ${target}${attrs};`;\r\n}\r\n\r\n// =============================================================================\r\n// Subgraph Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Render a DOT subgraph (cluster)\r\n */\r\nexport function renderDotSubgraph(subgraph: DotSubgraph): string {\r\n  const lines: string[] = [];\r\n  const id = sanitizeDotId(`cluster_${subgraph.id}`);\r\n\r\n  lines.push(`  subgraph ${id} {`);\r\n\r\n  if (subgraph.label) {\r\n    lines.push(`    label=\"${escapeDotString(subgraph.label)}\";`);\r\n  }\r\n  if (subgraph.style) {\r\n    lines.push(`    style=${subgraph.style};`);\r\n  }\r\n  if (subgraph.fillColor) {\r\n    lines.push(`    fillcolor=\"${subgraph.fillColor}\";`);\r\n  }\r\n  if (subgraph.color) {\r\n    lines.push(`    color=\"${subgraph.color}\";`);\r\n  }\r\n  if (subgraph.rank) {\r\n    lines.push(`    rank=${subgraph.rank};`);\r\n  }\r\n\r\n  for (const nodeId of subgraph.nodes) {\r\n    lines.push(`    ${sanitizeDotId(nodeId)};`);\r\n  }\r\n\r\n  lines.push('  }');\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// Color Utilities\r\n// =============================================================================\r\n\r\n/** DOT color palette */\r\nexport const DOT_COLORS = {\r\n  default: {\r\n    primary: '#a8d5ff',\r\n    secondary: '#ffd699',\r\n    success: '#81c784',\r\n    warning: '#ffb74d',\r\n    danger: '#e57373',\r\n    info: '#4fc3f7',\r\n    neutral: '#e0e0e0',\r\n  },\r\n  pastel: {\r\n    primary: '#e1f5ff',\r\n    secondary: '#fff3e0',\r\n    success: '#c8e6c9',\r\n    warning: '#ffecb3',\r\n    danger: '#ffcdd2',\r\n    info: '#b3e5fc',\r\n    neutral: '#f5f5f5',\r\n  },\r\n  monochrome: {\r\n    primary: '#b0b0b0',\r\n    secondary: '#909090',\r\n    success: '#707070',\r\n    warning: '#606060',\r\n    danger: '#505050',\r\n    info: '#404040',\r\n    neutral: '#d0d0d0',\r\n  },\r\n};\r\n\r\n/**\r\n * Get a color from the specified scheme\r\n */\r\nexport function getDotColor(\r\n  type: keyof typeof DOT_COLORS.default,\r\n  scheme: 'default' | 'pastel' | 'monochrome' = 'default'\r\n): string {\r\n  return DOT_COLORS[scheme][type];\r\n}\r\n\r\n// =============================================================================\r\n// Complete Graph Generation\r\n// =============================================================================\r\n\r\n/**\r\n * Generate a complete DOT graph\r\n */\r\nexport function generateDotGraph(\r\n  nodes: DotNode[],\r\n  edges: DotEdge[],\r\n  options: DotOptions = {}\r\n): string {\r\n  const {\r\n    graphType = 'digraph',\r\n    graphName = 'G',\r\n    rankDir = 'TB',\r\n    splines,\r\n    overlap,\r\n    concentrate,\r\n    compound,\r\n    bgcolor,\r\n    fontName,\r\n    fontSize,\r\n    nodeDefaults,\r\n    edgeDefaults,\r\n  } = options;\r\n\r\n  const lines: string[] = [];\r\n  const directed = graphType === 'digraph';\r\n\r\n  // Graph header\r\n  lines.push(`${graphType} ${sanitizeDotId(graphName)} {`);\r\n\r\n  // Graph attributes\r\n  lines.push(`  rankdir=${rankDir};`);\r\n  if (splines) lines.push(`  splines=${splines};`);\r\n  if (overlap !== undefined) lines.push(`  overlap=${overlap};`);\r\n  if (concentrate) lines.push('  concentrate=true;');\r\n  if (compound) lines.push('  compound=true;');\r\n  if (bgcolor) lines.push(`  bgcolor=\"${bgcolor}\";`);\r\n  if (fontName) lines.push(`  fontname=\"${fontName}\";`);\r\n  if (fontSize) lines.push(`  fontsize=${fontSize};`);\r\n\r\n  // Node defaults\r\n  if (nodeDefaults) {\r\n    const defaultAttrs: string[] = [];\r\n    if (nodeDefaults.shape) defaultAttrs.push(`shape=${nodeDefaults.shape}`);\r\n    if (nodeDefaults.style) {\r\n      const styleStr = Array.isArray(nodeDefaults.style)\r\n        ? nodeDefaults.style.join(',')\r\n        : nodeDefaults.style;\r\n      defaultAttrs.push(`style=\"${styleStr}\"`);\r\n    }\r\n    if (nodeDefaults.fillColor) defaultAttrs.push(`fillcolor=\"${nodeDefaults.fillColor}\"`);\r\n    if (nodeDefaults.fontName) defaultAttrs.push(`fontname=\"${nodeDefaults.fontName}\"`);\r\n    if (nodeDefaults.fontSize) defaultAttrs.push(`fontsize=${nodeDefaults.fontSize}`);\r\n    if (defaultAttrs.length > 0) {\r\n      lines.push(`  node [${defaultAttrs.join(', ')}];`);\r\n    }\r\n  }\r\n\r\n  // Edge defaults\r\n  if (edgeDefaults) {\r\n    const defaultAttrs: string[] = [];\r\n    if (edgeDefaults.style) defaultAttrs.push(`style=${edgeDefaults.style}`);\r\n    if (edgeDefaults.color) defaultAttrs.push(`color=\"${edgeDefaults.color}\"`);\r\n    if (edgeDefaults.arrowHead) defaultAttrs.push(`arrowhead=${edgeDefaults.arrowHead}`);\r\n    if (defaultAttrs.length > 0) {\r\n      lines.push(`  edge [${defaultAttrs.join(', ')}];`);\r\n    }\r\n  }\r\n\r\n  lines.push('');\r\n\r\n  // Nodes\r\n  for (const node of nodes) {\r\n    lines.push(renderDotNode(node));\r\n  }\r\n\r\n  // Edges\r\n  if (edges.length > 0) {\r\n    lines.push('');\r\n    for (const edge of edges) {\r\n      lines.push(renderDotEdge(edge, directed));\r\n    }\r\n  }\r\n\r\n  lines.push('}');\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a linear flow DOT graph\r\n */\r\nexport function generateLinearFlowDot(\r\n  steps: string[],\r\n  options: DotOptions = {}\r\n): string {\r\n  const { rankDir = 'TB' } = options;\r\n\r\n  if (steps.length === 0) {\r\n    return generateDotGraph(\r\n      [{ id: 'empty', label: 'No steps', shape: 'box' }],\r\n      [],\r\n      { ...options, graphName: 'LinearFlow' }\r\n    );\r\n  }\r\n\r\n  const nodes: DotNode[] = steps.map((step, index) => ({\r\n    id: `step_${index}`,\r\n    label: truncateDotLabel(step),\r\n    shape: 'box',\r\n    style: 'rounded',\r\n    fillColor: index === 0\r\n      ? DOT_COLORS.default.primary\r\n      : index === steps.length - 1\r\n        ? DOT_COLORS.default.success\r\n        : DOT_COLORS.default.neutral,\r\n  }));\r\n\r\n  const edges: DotEdge[] = [];\r\n  for (let i = 0; i < steps.length - 1; i++) {\r\n    edges.push({\r\n      source: `step_${i}`,\r\n      target: `step_${i + 1}`,\r\n    });\r\n  }\r\n\r\n  return generateDotGraph(nodes, edges, {\r\n    ...options,\r\n    graphName: 'LinearFlow',\r\n    rankDir,\r\n    nodeDefaults: { style: ['rounded', 'filled'] },\r\n  });\r\n}\r\n\r\n/**\r\n * Generate a hierarchical/tree DOT graph\r\n */\r\nexport function generateHierarchyDot(\r\n  root: { id: string; label: string; children?: Array<{ id: string; label: string; children?: unknown[] }> },\r\n  options: DotOptions = {}\r\n): string {\r\n  const nodes: DotNode[] = [];\r\n  const edges: DotEdge[] = [];\r\n\r\n  function traverse(\r\n    node: { id: string; label: string; children?: unknown[] },\r\n    parentId?: string,\r\n    depth: number = 0\r\n  ): void {\r\n    nodes.push({\r\n      id: node.id,\r\n      label: truncateDotLabel(node.label),\r\n      shape: depth === 0 ? 'ellipse' : 'box',\r\n      style: 'rounded',\r\n    });\r\n\r\n    if (parentId) {\r\n      edges.push({\r\n        source: parentId,\r\n        target: node.id,\r\n      });\r\n    }\r\n\r\n    if (node.children && Array.isArray(node.children)) {\r\n      for (const child of node.children as Array<{ id: string; label: string; children?: unknown[] }>) {\r\n        traverse(child, node.id, depth + 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  traverse(root);\r\n\r\n  return generateDotGraph(nodes, edges, {\r\n    ...options,\r\n    graphName: 'Hierarchy',\r\n    nodeDefaults: { style: ['rounded', 'filled'], fillColor: DOT_COLORS.default.neutral },\r\n  });\r\n}\r\n\r\n/**\r\n * Generate a network/graph DOT diagram\r\n */\r\nexport function generateNetworkDot(\r\n  nodes: Array<{ id: string; label: string; group?: string }>,\r\n  connections: Array<{ from: string; to: string; weight?: number }>,\r\n  options: DotOptions = {}\r\n): string {\r\n  const dotNodes: DotNode[] = nodes.map(node => ({\r\n    id: node.id,\r\n    label: truncateDotLabel(node.label),\r\n    shape: 'ellipse',\r\n    style: 'filled',\r\n    fillColor: node.group ? getDotColor('primary') : getDotColor('neutral'),\r\n  }));\r\n\r\n  const dotEdges: DotEdge[] = connections.map(conn => ({\r\n    source: conn.from,\r\n    target: conn.to,\r\n    label: conn.weight !== undefined ? conn.weight.toFixed(2) : undefined,\r\n    penWidth: conn.weight !== undefined ? Math.max(1, conn.weight * 3) : undefined,\r\n  }));\r\n\r\n  return generateDotGraph(dotNodes, dotEdges, {\r\n    ...options,\r\n    graphName: 'Network',\r\n    splines: 'spline',\r\n    overlap: 'scale',\r\n  });\r\n}\r\n","/**\r\n * ASCII Art Utilities (v7.1.0)\r\n * Shared utility functions for ASCII diagram generation across all visual exporters\r\n */\r\n\r\n// =============================================================================\r\n// Types\r\n// =============================================================================\r\n\r\n/** ASCII box style */\r\nexport type AsciiBoxStyle = 'single' | 'double' | 'rounded' | 'bold' | 'ascii';\r\n\r\n/** ASCII arrow direction */\r\nexport type AsciiArrowDirection = 'right' | 'left' | 'up' | 'down' | 'bidirectional';\r\n\r\n/** ASCII node definition */\r\nexport interface AsciiNode {\r\n  id: string;\r\n  label: string;\r\n  type?: string;\r\n  width?: number;\r\n}\r\n\r\n/** ASCII edge definition */\r\nexport interface AsciiEdge {\r\n  source: string;\r\n  target: string;\r\n  label?: string;\r\n  direction?: AsciiArrowDirection;\r\n}\r\n\r\n/** ASCII section definition */\r\nexport interface AsciiSection {\r\n  title: string;\r\n  content: string | string[];\r\n  icon?: string;\r\n}\r\n\r\n/** ASCII table column */\r\nexport interface AsciiTableColumn {\r\n  header: string;\r\n  width?: number;\r\n  align?: 'left' | 'center' | 'right';\r\n}\r\n\r\n/** ASCII diagram options */\r\nexport interface AsciiOptions {\r\n  boxStyle?: AsciiBoxStyle;\r\n  maxWidth?: number;\r\n  indent?: number;\r\n  includeTimestamp?: boolean;\r\n}\r\n\r\n// =============================================================================\r\n// Box Drawing Characters\r\n// =============================================================================\r\n\r\n/** Box drawing character sets */\r\nexport const BOX_CHARS = {\r\n  single: {\r\n    topLeft: '',\r\n    topRight: '',\r\n    bottomLeft: '',\r\n    bottomRight: '',\r\n    horizontal: '',\r\n    vertical: '',\r\n    teeRight: '',\r\n    teeLeft: '',\r\n    teeDown: '',\r\n    teeUp: '',\r\n    cross: '',\r\n  },\r\n  double: {\r\n    topLeft: '',\r\n    topRight: '',\r\n    bottomLeft: '',\r\n    bottomRight: '',\r\n    horizontal: '',\r\n    vertical: '',\r\n    teeRight: '',\r\n    teeLeft: '',\r\n    teeDown: '',\r\n    teeUp: '',\r\n    cross: '',\r\n  },\r\n  rounded: {\r\n    topLeft: '',\r\n    topRight: '',\r\n    bottomLeft: '',\r\n    bottomRight: '',\r\n    horizontal: '',\r\n    vertical: '',\r\n    teeRight: '',\r\n    teeLeft: '',\r\n    teeDown: '',\r\n    teeUp: '',\r\n    cross: '',\r\n  },\r\n  bold: {\r\n    topLeft: '',\r\n    topRight: '',\r\n    bottomLeft: '',\r\n    bottomRight: '',\r\n    horizontal: '',\r\n    vertical: '',\r\n    teeRight: '',\r\n    teeLeft: '',\r\n    teeDown: '',\r\n    teeUp: '',\r\n    cross: '',\r\n  },\r\n  ascii: {\r\n    topLeft: '+',\r\n    topRight: '+',\r\n    bottomLeft: '+',\r\n    bottomRight: '+',\r\n    horizontal: '-',\r\n    vertical: '|',\r\n    teeRight: '+',\r\n    teeLeft: '+',\r\n    teeDown: '+',\r\n    teeUp: '+',\r\n    cross: '+',\r\n  },\r\n};\r\n\r\n/** Arrow characters */\r\nexport const ARROWS = {\r\n  right: '',\r\n  left: '',\r\n  up: '',\r\n  down: '',\r\n  bidirectional: '',\r\n  doubleRight: '',\r\n  doubleLeft: '',\r\n  doubleUp: '',\r\n  doubleDown: '',\r\n  doubleBidirectional: '',\r\n  asciiRight: '->',\r\n  asciiLeft: '<-',\r\n  asciiUp: '^',\r\n  asciiDown: 'v',\r\n  asciiBidirectional: '<->',\r\n};\r\n\r\n/** Bullet and list characters */\r\nexport const BULLETS = {\r\n  circle: '',\r\n  filledCircle: '',\r\n  square: '',\r\n  filledSquare: '',\r\n  diamond: '',\r\n  filledDiamond: '',\r\n  triangle: '',\r\n  filledTriangle: '',\r\n  star: '',\r\n  filledStar: '',\r\n  check: '',\r\n  cross: '',\r\n  dash: '',\r\n  bullet: '',\r\n  asciiBullet: '*',\r\n  asciiDash: '-',\r\n};\r\n\r\n// =============================================================================\r\n// String Utilities\r\n// =============================================================================\r\n\r\n/**\r\n * Truncate a string to a maximum length\r\n */\r\nexport function truncateAscii(str: string, maxLength: number, suffix: string = '...'): string {\r\n  if (str.length <= maxLength) return str;\r\n  return str.substring(0, maxLength - suffix.length) + suffix;\r\n}\r\n\r\n/**\r\n * Pad a string to a specific width\r\n */\r\nexport function padAscii(\r\n  str: string,\r\n  width: number,\r\n  align: 'left' | 'center' | 'right' = 'left',\r\n  padChar: string = ' '\r\n): string {\r\n  if (str.length >= width) return str.substring(0, width);\r\n\r\n  const padding = width - str.length;\r\n\r\n  switch (align) {\r\n    case 'right':\r\n      return padChar.repeat(padding) + str;\r\n    case 'center':\r\n      const leftPad = Math.floor(padding / 2);\r\n      const rightPad = padding - leftPad;\r\n      return padChar.repeat(leftPad) + str + padChar.repeat(rightPad);\r\n    case 'left':\r\n    default:\r\n      return str + padChar.repeat(padding);\r\n  }\r\n}\r\n\r\n/**\r\n * Wrap text to a maximum width\r\n */\r\nexport function wrapText(text: string, maxWidth: number): string[] {\r\n  const words = text.split(/\\s+/);\r\n  const lines: string[] = [];\r\n  let currentLine = '';\r\n\r\n  for (const word of words) {\r\n    if (currentLine.length === 0) {\r\n      currentLine = word;\r\n    } else if (currentLine.length + 1 + word.length <= maxWidth) {\r\n      currentLine += ' ' + word;\r\n    } else {\r\n      lines.push(currentLine);\r\n      currentLine = word;\r\n    }\r\n  }\r\n\r\n  if (currentLine) {\r\n    lines.push(currentLine);\r\n  }\r\n\r\n  return lines;\r\n}\r\n\r\n/**\r\n * Indent text by a number of spaces\r\n */\r\nexport function indentText(text: string, spaces: number = 2): string {\r\n  const indent = ' '.repeat(spaces);\r\n  return text.split('\\n').map(line => indent + line).join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// Header and Title Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Generate a title header with underline\r\n */\r\nexport function generateAsciiHeader(\r\n  title: string,\r\n  style: 'single' | 'double' | 'equals' | 'dash' = 'equals'\r\n): string {\r\n  const underlineChar = style === 'double' ? '' : style === 'equals' ? '=' : style === 'single' ? '' : '-';\r\n  const underline = underlineChar.repeat(title.length);\r\n  return `${title}\\n${underline}`;\r\n}\r\n\r\n/**\r\n * Generate a section header\r\n */\r\nexport function generateAsciiSectionHeader(title: string, icon?: string): string {\r\n  const prefix = icon ? `${icon} ` : '';\r\n  return `${prefix}${title}:\\n${'-'.repeat((prefix + title + ':').length)}`;\r\n}\r\n\r\n/**\r\n * Generate a boxed title\r\n */\r\nexport function generateAsciiBoxedTitle(\r\n  title: string,\r\n  style: AsciiBoxStyle = 'single'\r\n): string {\r\n  const chars = BOX_CHARS[style];\r\n  const width = title.length + 4;\r\n\r\n  const top = chars.topLeft + chars.horizontal.repeat(width - 2) + chars.topRight;\r\n  const middle = chars.vertical + ' ' + title + ' ' + chars.vertical;\r\n  const bottom = chars.bottomLeft + chars.horizontal.repeat(width - 2) + chars.bottomRight;\r\n\r\n  return `${top}\\n${middle}\\n${bottom}`;\r\n}\r\n\r\n// =============================================================================\r\n// Box Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Generate an ASCII box around content\r\n */\r\nexport function generateAsciiBox(\r\n  content: string | string[],\r\n  options: {\r\n    style?: AsciiBoxStyle;\r\n    title?: string;\r\n    width?: number;\r\n    padding?: number;\r\n  } = {}\r\n): string {\r\n  const { style = 'single', title, width, padding = 1 } = options;\r\n  const chars = BOX_CHARS[style];\r\n\r\n  const lines = Array.isArray(content) ? content : content.split('\\n');\r\n\r\n  // Calculate width\r\n  let maxContentWidth = Math.max(...lines.map(l => l.length));\r\n  if (title) {\r\n    maxContentWidth = Math.max(maxContentWidth, title.length);\r\n  }\r\n  const boxWidth = width || maxContentWidth + padding * 2 + 2;\r\n  const contentWidth = boxWidth - 2 - padding * 2;\r\n\r\n  const result: string[] = [];\r\n\r\n  // Top border with optional title\r\n  if (title) {\r\n    const titlePadded = ' ' + title + ' ';\r\n    const leftBorder = Math.floor((boxWidth - 2 - titlePadded.length) / 2);\r\n    const rightBorder = boxWidth - 2 - titlePadded.length - leftBorder;\r\n    result.push(\r\n      chars.topLeft +\r\n      chars.horizontal.repeat(leftBorder) +\r\n      titlePadded +\r\n      chars.horizontal.repeat(rightBorder) +\r\n      chars.topRight\r\n    );\r\n  } else {\r\n    result.push(chars.topLeft + chars.horizontal.repeat(boxWidth - 2) + chars.topRight);\r\n  }\r\n\r\n  // Padding top\r\n  for (let i = 0; i < padding; i++) {\r\n    result.push(chars.vertical + ' '.repeat(boxWidth - 2) + chars.vertical);\r\n  }\r\n\r\n  // Content\r\n  for (const line of lines) {\r\n    const paddedLine = padAscii(line, contentWidth, 'left');\r\n    result.push(\r\n      chars.vertical +\r\n      ' '.repeat(padding) +\r\n      paddedLine +\r\n      ' '.repeat(padding) +\r\n      chars.vertical\r\n    );\r\n  }\r\n\r\n  // Padding bottom\r\n  for (let i = 0; i < padding; i++) {\r\n    result.push(chars.vertical + ' '.repeat(boxWidth - 2) + chars.vertical);\r\n  }\r\n\r\n  // Bottom border\r\n  result.push(chars.bottomLeft + chars.horizontal.repeat(boxWidth - 2) + chars.bottomRight);\r\n\r\n  return result.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// List Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Generate a bullet list\r\n */\r\nexport function generateAsciiBulletList(\r\n  items: string[],\r\n  bullet: keyof typeof BULLETS = 'bullet',\r\n  indent: number = 2\r\n): string {\r\n  const bulletChar = BULLETS[bullet];\r\n  const indentStr = ' '.repeat(indent);\r\n  return items.map(item => `${indentStr}${bulletChar} ${item}`).join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a numbered list\r\n */\r\nexport function generateAsciiNumberedList(\r\n  items: string[],\r\n  indent: number = 2,\r\n  startNumber: number = 1\r\n): string {\r\n  const indentStr = ' '.repeat(indent);\r\n  const maxNumWidth = String(startNumber + items.length - 1).length;\r\n\r\n  return items.map((item, index) => {\r\n    const num = String(startNumber + index).padStart(maxNumWidth, ' ');\r\n    return `${indentStr}${num}. ${item}`;\r\n  }).join('\\n');\r\n}\r\n\r\n/** Recursive tree node type for ASCII tree rendering */\r\nexport interface AsciiTreeNode {\r\n  label: string;\r\n  children?: AsciiTreeNode[];\r\n}\r\n\r\n/**\r\n * Generate a tree/hierarchy list\r\n */\r\nexport function generateAsciiTreeList(\r\n  items: AsciiTreeNode[],\r\n  prefix: string = ''\r\n): string {\r\n  const lines: string[] = [];\r\n\r\n  items.forEach((item, index) => {\r\n    const isLast = index === items.length - 1;\r\n    const connector = isLast ? ' ' : ' ';\r\n    const childPrefix = isLast ? '    ' : '   ';\r\n\r\n    lines.push(prefix + connector + item.label);\r\n\r\n    if (item.children && item.children.length > 0) {\r\n      const childTree = generateAsciiTreeList(\r\n        item.children,\r\n        prefix + childPrefix\r\n      );\r\n      lines.push(childTree);\r\n    }\r\n  });\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// Table Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Generate an ASCII table\r\n */\r\nexport function generateAsciiTable(\r\n  headers: string[],\r\n  rows: string[][],\r\n  options: {\r\n    style?: AsciiBoxStyle;\r\n    columnWidths?: number[];\r\n    alignments?: Array<'left' | 'center' | 'right'>;\r\n  } = {}\r\n): string {\r\n  const { style = 'single', columnWidths, alignments } = options;\r\n  const chars = BOX_CHARS[style];\r\n\r\n  // Calculate column widths\r\n  const widths = columnWidths || headers.map((header, colIndex) => {\r\n    const colValues = [header, ...rows.map(row => row[colIndex] || '')];\r\n    return Math.max(...colValues.map(v => String(v).length));\r\n  });\r\n\r\n  // Helper to render a row\r\n  const renderRow = (cells: string[]): string => {\r\n    return chars.vertical + cells.map((cell, i) => {\r\n      const align = alignments?.[i] || 'left';\r\n      return ' ' + padAscii(String(cell), widths[i], align) + ' ';\r\n    }).join(chars.vertical) + chars.vertical;\r\n  };\r\n\r\n  // Helper to render a separator\r\n  const renderSeparator = (left: string, mid: string, right: string): string => {\r\n    return left + widths.map(w => chars.horizontal.repeat(w + 2)).join(mid) + right;\r\n  };\r\n\r\n  const result: string[] = [];\r\n\r\n  // Top border\r\n  result.push(renderSeparator(chars.topLeft, chars.teeDown, chars.topRight));\r\n\r\n  // Headers\r\n  result.push(renderRow(headers));\r\n\r\n  // Header separator\r\n  result.push(renderSeparator(chars.teeRight, chars.cross, chars.teeLeft));\r\n\r\n  // Rows\r\n  for (const row of rows) {\r\n    result.push(renderRow(row));\r\n  }\r\n\r\n  // Bottom border\r\n  result.push(renderSeparator(chars.bottomLeft, chars.teeUp, chars.bottomRight));\r\n\r\n  return result.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// Arrow and Flow Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Get an arrow character\r\n */\r\nexport function getAsciiArrow(\r\n  direction: AsciiArrowDirection,\r\n  useAscii: boolean = false\r\n): string {\r\n  if (useAscii) {\r\n    switch (direction) {\r\n      case 'right': return ARROWS.asciiRight;\r\n      case 'left': return ARROWS.asciiLeft;\r\n      case 'up': return ARROWS.asciiUp;\r\n      case 'down': return ARROWS.asciiDown;\r\n      case 'bidirectional': return ARROWS.asciiBidirectional;\r\n    }\r\n  }\r\n  return ARROWS[direction];\r\n}\r\n\r\n/**\r\n * Generate a simple flow diagram\r\n */\r\nexport function generateAsciiFlowDiagram(\r\n  steps: string[],\r\n  direction: 'horizontal' | 'vertical' = 'vertical',\r\n  options: { boxStyle?: AsciiBoxStyle; maxWidth?: number } = {}\r\n): string {\r\n  const { boxStyle = 'single', maxWidth = 40 } = options;\r\n\r\n  if (steps.length === 0) {\r\n    return generateAsciiBox('(empty)', { style: boxStyle });\r\n  }\r\n\r\n  if (direction === 'horizontal') {\r\n    // Horizontal layout: [Step 1]  [Step 2]  [Step 3]\r\n    const boxes = steps.map(step => {\r\n      const truncated = truncateAscii(step, maxWidth);\r\n      return `[${truncated}]`;\r\n    });\r\n    return boxes.join('  ');\r\n  }\r\n\r\n  // Vertical layout\r\n  const lines: string[] = [];\r\n  const chars = BOX_CHARS[boxStyle];\r\n\r\n  for (let i = 0; i < steps.length; i++) {\r\n    const step = truncateAscii(steps[i], maxWidth);\r\n    const boxWidth = Math.max(step.length + 4, 20);\r\n\r\n    // Top border\r\n    lines.push(chars.topLeft + chars.horizontal.repeat(boxWidth - 2) + chars.topRight);\r\n    // Content\r\n    lines.push(chars.vertical + ' ' + padAscii(step, boxWidth - 4) + ' ' + chars.vertical);\r\n    // Bottom border\r\n    lines.push(chars.bottomLeft + chars.horizontal.repeat(boxWidth - 2) + chars.bottomRight);\r\n\r\n    // Arrow to next step\r\n    if (i < steps.length - 1) {\r\n      const arrowPadding = ' '.repeat(Math.floor(boxWidth / 2) - 1);\r\n      lines.push(arrowPadding + '');\r\n    }\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// Section and Document Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Generate a complete ASCII section\r\n */\r\nexport function generateAsciiSection(section: AsciiSection): string {\r\n  const lines: string[] = [];\r\n\r\n  // Section header\r\n  lines.push(generateAsciiSectionHeader(section.title, section.icon));\r\n  lines.push('');\r\n\r\n  // Content\r\n  if (Array.isArray(section.content)) {\r\n    lines.push(section.content.join('\\n'));\r\n  } else {\r\n    lines.push(section.content);\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a complete ASCII document\r\n */\r\nexport function generateAsciiDocument(\r\n  title: string,\r\n  sections: AsciiSection[],\r\n  options: AsciiOptions = {}\r\n): string {\r\n  const { includeTimestamp = false } = options;\r\n\r\n  const lines: string[] = [];\r\n\r\n  // Title\r\n  lines.push(generateAsciiHeader(title, 'double'));\r\n  lines.push('');\r\n\r\n  // Timestamp\r\n  if (includeTimestamp) {\r\n    lines.push(`Generated: ${new Date().toISOString()}`);\r\n    lines.push('');\r\n  }\r\n\r\n  // Sections\r\n  for (let i = 0; i < sections.length; i++) {\r\n    lines.push(generateAsciiSection(sections[i]));\r\n    if (i < sections.length - 1) {\r\n      lines.push('');\r\n    }\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// Metrics and Progress Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Generate an ASCII progress bar\r\n */\r\nexport function generateAsciiProgressBar(\r\n  value: number,\r\n  max: number = 100,\r\n  width: number = 20,\r\n  options: { filled?: string; empty?: string; showPercent?: boolean } = {}\r\n): string {\r\n  const { filled = '', empty = '', showPercent = true } = options;\r\n\r\n  const percent = Math.min(100, Math.max(0, (value / max) * 100));\r\n  const filledWidth = Math.round((percent / 100) * width);\r\n  const emptyWidth = width - filledWidth;\r\n\r\n  const bar = filled.repeat(filledWidth) + empty.repeat(emptyWidth);\r\n  const percentStr = showPercent ? ` ${percent.toFixed(0)}%` : '';\r\n\r\n  return `[${bar}]${percentStr}`;\r\n}\r\n\r\n/**\r\n * Generate an ASCII metric display\r\n */\r\nexport function generateAsciiMetric(\r\n  label: string,\r\n  value: string | number,\r\n  maxLabelWidth: number = 20\r\n): string {\r\n  const paddedLabel = padAscii(label + ':', maxLabelWidth, 'left');\r\n  return `${paddedLabel} ${value}`;\r\n}\r\n\r\n/**\r\n * Generate ASCII metrics panel\r\n */\r\nexport function generateAsciiMetricsPanel(\r\n  metrics: Array<{ label: string; value: string | number }>,\r\n  options: { style?: AsciiBoxStyle; title?: string } = {}\r\n): string {\r\n  const { style = 'single', title = 'Metrics' } = options;\r\n\r\n  const maxLabelWidth = Math.max(...metrics.map(m => m.label.length)) + 1;\r\n  const content = metrics.map(m => generateAsciiMetric(m.label, m.value, maxLabelWidth));\r\n\r\n  return generateAsciiBox(content, { style, title });\r\n}\r\n\r\n// =============================================================================\r\n// Graph/Network Rendering\r\n// =============================================================================\r\n\r\n/**\r\n * Generate a simple ASCII graph representation\r\n */\r\nexport function generateAsciiGraph(\r\n  nodes: AsciiNode[],\r\n  edges: AsciiEdge[]\r\n): string {\r\n  const lines: string[] = [];\r\n\r\n  lines.push('Nodes:');\r\n  for (const node of nodes) {\r\n    const typeStr = node.type ? ` [${node.type}]` : '';\r\n    lines.push(`  ${BULLETS.filledCircle} ${node.label}${typeStr}`);\r\n  }\r\n\r\n  if (edges.length > 0) {\r\n    lines.push('');\r\n    lines.push('Edges:');\r\n    for (const edge of edges) {\r\n      const sourceNode = nodes.find(n => n.id === edge.source);\r\n      const targetNode = nodes.find(n => n.id === edge.target);\r\n      const arrow = getAsciiArrow(edge.direction || 'right');\r\n      const label = edge.label ? ` (${edge.label})` : '';\r\n      lines.push(`  ${sourceNode?.label || edge.source} ${arrow} ${targetNode?.label || edge.target}${label}`);\r\n    }\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a linear ASCII flow\r\n */\r\nexport function generateLinearFlowAscii(\r\n  steps: string[],\r\n  options: AsciiOptions = {}\r\n): string {\r\n  return generateAsciiFlowDiagram(steps, 'vertical', options);\r\n}\r\n\r\n/**\r\n * Generate a hierarchical ASCII representation\r\n */\r\nexport function generateHierarchyAscii(\r\n  root: AsciiTreeNode\r\n): string {\r\n  const lines: string[] = [];\r\n\r\n  lines.push(root.label);\r\n\r\n  if (root.children && root.children.length > 0) {\r\n    lines.push(generateAsciiTreeList(root.children));\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n","/**\r\n * SVG Export Utilities (v7.0.2)\r\n * Phase 9: Generic SVG export module for all thinking modes\r\n *\r\n * Provides shared utilities for generating native SVG visualizations\r\n * across all visual exporters. Supports multiple node shapes, color\r\n * schemes, and edge styling.\r\n */\r\n\r\n/**\r\n * SVG-specific export options\r\n */\r\nexport interface SVGExportOptions {\r\n  width?: number;\r\n  height?: number;\r\n  nodeWidth?: number;\r\n  nodeHeight?: number;\r\n  nodeSpacing?: number;\r\n  layerSpacing?: number;\r\n  padding?: number;\r\n  colorScheme?: 'default' | 'monochrome' | 'pastel';\r\n  includeLabels?: boolean;\r\n  includeMetrics?: boolean;\r\n  title?: string;\r\n}\r\n\r\n/**\r\n * Default SVG options\r\n */\r\nexport const DEFAULT_SVG_OPTIONS: Required<SVGExportOptions> = {\r\n  width: 800,\r\n  height: 600,\r\n  nodeWidth: 150,\r\n  nodeHeight: 40,\r\n  nodeSpacing: 20,\r\n  layerSpacing: 100,\r\n  padding: 40,\r\n  colorScheme: 'default',\r\n  includeLabels: true,\r\n  includeMetrics: true,\r\n  title: '',\r\n};\r\n\r\n/**\r\n * Node position for SVG layout\r\n */\r\nexport interface SVGNodePosition {\r\n  id: string;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  label: string;\r\n  type?: string;\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * Edge definition for SVG\r\n */\r\nexport interface SVGEdge {\r\n  from: string;\r\n  to: string;\r\n  label?: string;\r\n  style?: 'solid' | 'dashed' | 'dotted';\r\n  color?: string;\r\n  bidirectional?: boolean;\r\n}\r\n\r\n/**\r\n * Color palette for different node types\r\n */\r\nexport interface ColorPalette {\r\n  [key: string]: { fill: string; stroke: string };\r\n}\r\n\r\n/**\r\n * Default color palettes\r\n */\r\nexport const COLOR_PALETTES: Record<string, ColorPalette> = {\r\n  default: {\r\n    primary: { fill: '#64b5f6', stroke: '#1976d2' },\r\n    secondary: { fill: '#81c784', stroke: '#388e3c' },\r\n    tertiary: { fill: '#ffb74d', stroke: '#f57c00' },\r\n    quaternary: { fill: '#ba68c8', stroke: '#7b1fa2' },\r\n    neutral: { fill: '#bdbdbd', stroke: '#616161' },\r\n    success: { fill: '#81c784', stroke: '#388e3c' },\r\n    warning: { fill: '#ffb74d', stroke: '#f57c00' },\r\n    error: { fill: '#e57373', stroke: '#d32f2f' },\r\n    info: { fill: '#64b5f6', stroke: '#1976d2' },\r\n    highlight: { fill: '#fff176', stroke: '#fbc02d' },\r\n  },\r\n  pastel: {\r\n    primary: { fill: '#bbdefb', stroke: '#2196f3' },\r\n    secondary: { fill: '#c8e6c9', stroke: '#4caf50' },\r\n    tertiary: { fill: '#ffe0b2', stroke: '#ff9800' },\r\n    quaternary: { fill: '#e1bee7', stroke: '#9c27b0' },\r\n    neutral: { fill: '#e0e0e0', stroke: '#757575' },\r\n    success: { fill: '#c8e6c9', stroke: '#4caf50' },\r\n    warning: { fill: '#fff9c4', stroke: '#ffc107' },\r\n    error: { fill: '#ffcdd2', stroke: '#e53935' },\r\n    info: { fill: '#bbdefb', stroke: '#2196f3' },\r\n    highlight: { fill: '#fff9c4', stroke: '#fbc02d' },\r\n  },\r\n  monochrome: {\r\n    primary: { fill: '#ffffff', stroke: '#333333' },\r\n    secondary: { fill: '#f5f5f5', stroke: '#333333' },\r\n    tertiary: { fill: '#eeeeee', stroke: '#333333' },\r\n    quaternary: { fill: '#e0e0e0', stroke: '#333333' },\r\n    neutral: { fill: '#fafafa', stroke: '#333333' },\r\n    success: { fill: '#ffffff', stroke: '#333333' },\r\n    warning: { fill: '#f5f5f5', stroke: '#333333' },\r\n    error: { fill: '#eeeeee', stroke: '#333333' },\r\n    info: { fill: '#ffffff', stroke: '#333333' },\r\n    highlight: { fill: '#e0e0e0', stroke: '#333333' },\r\n  },\r\n};\r\n\r\n/**\r\n * Get color for a node type from a palette\r\n */\r\nexport function getNodeColor(\r\n  type: string,\r\n  colorScheme: 'default' | 'monochrome' | 'pastel' = 'default'\r\n): { fill: string; stroke: string } {\r\n  const palette = COLOR_PALETTES[colorScheme] || COLOR_PALETTES.default;\r\n  return palette[type] || palette.neutral;\r\n}\r\n\r\n/**\r\n * Escape text for safe SVG embedding\r\n */\r\nexport function escapeSVGText(text: string): string {\r\n  return text\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#39;');\r\n}\r\n\r\n/**\r\n * Truncate text to fit within a character limit\r\n */\r\nexport function truncateText(text: string, maxChars: number = 30): string {\r\n  if (text.length <= maxChars) return text;\r\n  return text.substring(0, maxChars - 3) + '...';\r\n}\r\n\r\n/**\r\n * Generate SVG header with defs (markers, gradients, etc.)\r\n */\r\nexport function generateSVGHeader(\r\n  width: number,\r\n  height: number,\r\n  title?: string\r\n): string {\r\n  return `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 ${width} ${height}\" width=\"${width}\" height=\"${height}\">\r\n  <defs>\r\n    <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"7\" refX=\"9\" refY=\"3.5\" orient=\"auto\">\r\n      <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#333\"/>\r\n    </marker>\r\n    <marker id=\"arrowhead-red\" markerWidth=\"10\" markerHeight=\"7\" refX=\"9\" refY=\"3.5\" orient=\"auto\">\r\n      <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#e53935\"/>\r\n    </marker>\r\n    <marker id=\"arrowhead-green\" markerWidth=\"10\" markerHeight=\"7\" refX=\"9\" refY=\"3.5\" orient=\"auto\">\r\n      <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#388e3c\"/>\r\n    </marker>\r\n    <marker id=\"arrowhead-blue\" markerWidth=\"10\" markerHeight=\"7\" refX=\"9\" refY=\"3.5\" orient=\"auto\">\r\n      <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#1976d2\"/>\r\n    </marker>\r\n  </defs>\r\n\r\n  <style>\r\n    .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; }\r\n    .subtitle { font-family: Arial, sans-serif; font-size: 12px; fill: #666; font-style: italic; }\r\n    .node-label { font-family: Arial, sans-serif; font-size: 12px; }\r\n    .edge-label { font-family: Arial, sans-serif; font-size: 10px; fill: #666; }\r\n    .metrics { font-family: Arial, sans-serif; font-size: 11px; fill: #444; }\r\n    .legend-text { font-family: Arial, sans-serif; font-size: 10px; }\r\n  </style>\r\n\r\n  <!-- Background -->\r\n  <rect width=\"100%\" height=\"100%\" fill=\"#fafafa\"/>\r\n${title ? `\\n  <!-- Title -->\\n  <text x=\"${width / 2}\" y=\"25\" text-anchor=\"middle\" class=\"title\">${escapeSVGText(truncateText(title, 60))}</text>\\n` : ''}`;\r\n}\r\n\r\n/**\r\n * Generate SVG footer\r\n */\r\nexport function generateSVGFooter(): string {\r\n  return '</svg>';\r\n}\r\n\r\n/**\r\n * Render a rectangular node\r\n */\r\nexport function renderRectNode(\r\n  pos: SVGNodePosition,\r\n  colors: { fill: string; stroke: string },\r\n  rx: number = 8\r\n): string {\r\n  const escapedLabel = escapeSVGText(truncateText(pos.label, 25));\r\n  return `\r\n    <g class=\"node\" data-id=\"${pos.id}\">\r\n      <rect x=\"${pos.x}\" y=\"${pos.y}\" width=\"${pos.width}\" height=\"${pos.height}\"\r\n            rx=\"${rx}\" ry=\"${rx}\" fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${pos.x + pos.width / 2}\" y=\"${pos.y + pos.height / 2 + 5}\"\r\n            text-anchor=\"middle\" class=\"node-label\">${escapedLabel}</text>\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render a rounded/stadium node (for start/source nodes)\r\n */\r\nexport function renderStadiumNode(\r\n  pos: SVGNodePosition,\r\n  colors: { fill: string; stroke: string }\r\n): string {\r\n  const escapedLabel = escapeSVGText(truncateText(pos.label, 25));\r\n  return `\r\n    <g class=\"node\" data-id=\"${pos.id}\">\r\n      <rect x=\"${pos.x}\" y=\"${pos.y}\" width=\"${pos.width}\" height=\"${pos.height}\"\r\n            rx=\"20\" ry=\"20\" fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${pos.x + pos.width / 2}\" y=\"${pos.y + pos.height / 2 + 5}\"\r\n            text-anchor=\"middle\" class=\"node-label\">${escapedLabel}</text>\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render a diamond node (for decision/conclusion nodes)\r\n */\r\nexport function renderDiamondNode(\r\n  pos: SVGNodePosition,\r\n  colors: { fill: string; stroke: string }\r\n): string {\r\n  const cx = pos.x + pos.width / 2;\r\n  const cy = pos.y + pos.height / 2;\r\n  const escapedLabel = escapeSVGText(truncateText(pos.label, 20));\r\n  return `\r\n    <g class=\"node\" data-id=\"${pos.id}\">\r\n      <polygon points=\"${cx},${pos.y} ${pos.x + pos.width},${cy} ${cx},${pos.y + pos.height} ${pos.x},${cy}\"\r\n               fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${cx}\" y=\"${cy + 5}\"\r\n            text-anchor=\"middle\" class=\"node-label\">${escapedLabel}</text>\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render a hexagon node (for process/intermediate nodes)\r\n */\r\nexport function renderHexagonNode(\r\n  pos: SVGNodePosition,\r\n  colors: { fill: string; stroke: string }\r\n): string {\r\n  const cx = pos.x + pos.width / 2;\r\n  const cy = pos.y + pos.height / 2;\r\n  const w = pos.width;\r\n  const h = pos.height;\r\n  const escapedLabel = escapeSVGText(truncateText(pos.label, 20));\r\n  return `\r\n    <g class=\"node\" data-id=\"${pos.id}\">\r\n      <polygon points=\"${pos.x + w * 0.2},${pos.y} ${pos.x + w * 0.8},${pos.y} ${pos.x + w},${cy} ${pos.x + w * 0.8},${pos.y + h} ${pos.x + w * 0.2},${pos.y + h} ${pos.x},${cy}\"\r\n               fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${cx}\" y=\"${cy + 5}\"\r\n            text-anchor=\"middle\" class=\"node-label\">${escapedLabel}</text>\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render an ellipse node\r\n */\r\nexport function renderEllipseNode(\r\n  pos: SVGNodePosition,\r\n  colors: { fill: string; stroke: string }\r\n): string {\r\n  const cx = pos.x + pos.width / 2;\r\n  const cy = pos.y + pos.height / 2;\r\n  const escapedLabel = escapeSVGText(truncateText(pos.label, 20));\r\n  return `\r\n    <g class=\"node\" data-id=\"${pos.id}\">\r\n      <ellipse cx=\"${cx}\" cy=\"${cy}\" rx=\"${pos.width / 2}\" ry=\"${pos.height / 2}\"\r\n               fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${cx}\" y=\"${cy + 5}\"\r\n            text-anchor=\"middle\" class=\"node-label\">${escapedLabel}</text>\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render a parallelogram node (for input/output)\r\n */\r\nexport function renderParallelogramNode(\r\n  pos: SVGNodePosition,\r\n  colors: { fill: string; stroke: string }\r\n): string {\r\n  const skew = 15;\r\n  const escapedLabel = escapeSVGText(truncateText(pos.label, 20));\r\n  return `\r\n    <g class=\"node\" data-id=\"${pos.id}\">\r\n      <polygon points=\"${pos.x + skew},${pos.y} ${pos.x + pos.width},${pos.y} ${pos.x + pos.width - skew},${pos.y + pos.height} ${pos.x},${pos.y + pos.height}\"\r\n               fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${pos.x + pos.width / 2}\" y=\"${pos.y + pos.height / 2 + 5}\"\r\n            text-anchor=\"middle\" class=\"node-label\">${escapedLabel}</text>\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render a double-bordered rectangle (for subroutine/definition)\r\n */\r\nexport function renderSubroutineNode(\r\n  pos: SVGNodePosition,\r\n  colors: { fill: string; stroke: string }\r\n): string {\r\n  const escapedLabel = escapeSVGText(truncateText(pos.label, 22));\r\n  return `\r\n    <g class=\"node\" data-id=\"${pos.id}\">\r\n      <rect x=\"${pos.x}\" y=\"${pos.y}\" width=\"${pos.width}\" height=\"${pos.height}\"\r\n            rx=\"4\" ry=\"4\" fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <rect x=\"${pos.x + 6}\" y=\"${pos.y + 6}\" width=\"${pos.width - 12}\" height=\"${pos.height - 12}\"\r\n            rx=\"2\" ry=\"2\" fill=\"none\" stroke=\"${colors.stroke}\" stroke-width=\"1\"/>\r\n      <text x=\"${pos.x + pos.width / 2}\" y=\"${pos.y + pos.height / 2 + 5}\"\r\n            text-anchor=\"middle\" class=\"node-label\">${escapedLabel}</text>\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render an edge (arrow) between two nodes\r\n */\r\nexport function renderEdge(\r\n  fromPos: SVGNodePosition,\r\n  toPos: SVGNodePosition,\r\n  options: {\r\n    label?: string;\r\n    style?: 'solid' | 'dashed' | 'dotted';\r\n    color?: string;\r\n    markerEnd?: string;\r\n  } = {}\r\n): string {\r\n  const { label, style = 'solid', color = '#333333', markerEnd = 'arrowhead' } = options;\r\n\r\n  // Calculate edge points (from bottom of source to top of target)\r\n  const fromX = fromPos.x + fromPos.width / 2;\r\n  const fromY = fromPos.y + fromPos.height;\r\n  const toX = toPos.x + toPos.width / 2;\r\n  const toY = toPos.y;\r\n\r\n  // Create curved path using bezier curve\r\n  const midY = (fromY + toY) / 2;\r\n  const path = `M ${fromX} ${fromY} C ${fromX} ${midY}, ${toX} ${midY}, ${toX} ${toY - 8}`;\r\n\r\n  const dashStyle =\r\n    style === 'dashed'\r\n      ? 'stroke-dasharray=\"8,4\"'\r\n      : style === 'dotted'\r\n        ? 'stroke-dasharray=\"2,2\"'\r\n        : '';\r\n\r\n  const labelElement = label\r\n    ? `<text x=\"${(fromX + toX) / 2}\" y=\"${midY - 5}\" text-anchor=\"middle\" class=\"edge-label\">${escapeSVGText(label)}</text>`\r\n    : '';\r\n\r\n  return `\r\n    <g class=\"edge\">\r\n      <path d=\"${path}\" fill=\"none\" stroke=\"${color}\" stroke-width=\"2\" ${dashStyle} marker-end=\"url(#${markerEnd})\"/>\r\n      ${labelElement}\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render a horizontal edge (for timeline/sequence diagrams)\r\n */\r\nexport function renderHorizontalEdge(\r\n  fromPos: SVGNodePosition,\r\n  toPos: SVGNodePosition,\r\n  options: {\r\n    label?: string;\r\n    style?: 'solid' | 'dashed' | 'dotted';\r\n    color?: string;\r\n  } = {}\r\n): string {\r\n  const { label, style = 'solid', color = '#333333' } = options;\r\n\r\n  // From right of source to left of target\r\n  const fromX = fromPos.x + fromPos.width;\r\n  const fromY = fromPos.y + fromPos.height / 2;\r\n  const toX = toPos.x;\r\n  const toY = toPos.y + toPos.height / 2;\r\n\r\n  const dashStyle =\r\n    style === 'dashed'\r\n      ? 'stroke-dasharray=\"8,4\"'\r\n      : style === 'dotted'\r\n        ? 'stroke-dasharray=\"2,2\"'\r\n        : '';\r\n\r\n  const labelElement = label\r\n    ? `<text x=\"${(fromX + toX) / 2}\" y=\"${(fromY + toY) / 2 - 8}\" text-anchor=\"middle\" class=\"edge-label\">${escapeSVGText(label)}</text>`\r\n    : '';\r\n\r\n  return `\r\n    <g class=\"edge\">\r\n      <line x1=\"${fromX}\" y1=\"${fromY}\" x2=\"${toX - 8}\" y2=\"${toY}\"\r\n            stroke=\"${color}\" stroke-width=\"2\" ${dashStyle} marker-end=\"url(#arrowhead)\"/>\r\n      ${labelElement}\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Render a metrics panel\r\n */\r\nexport function renderMetricsPanel(\r\n  x: number,\r\n  y: number,\r\n  metrics: Array<{ label: string; value: string | number }>\r\n): string {\r\n  const panelHeight = 30 + metrics.length * 16;\r\n  let svg = `\r\n  <g class=\"metrics-panel\">\r\n    <rect x=\"${x}\" y=\"${y}\" width=\"160\" height=\"${panelHeight}\" rx=\"8\" fill=\"#f5f5f5\" stroke=\"#ddd\" stroke-width=\"1\"/>\r\n    <text x=\"${x + 10}\" y=\"${y + 20}\" class=\"metrics\" font-weight=\"bold\">Metrics</text>`;\r\n\r\n  metrics.forEach((metric, i) => {\r\n    svg += `\\n    <text x=\"${x + 10}\" y=\"${y + 38 + i * 16}\" class=\"metrics\">${escapeSVGText(metric.label)}: ${escapeSVGText(String(metric.value))}</text>`;\r\n  });\r\n\r\n  svg += '\\n  </g>';\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Render a legend\r\n */\r\nexport function renderLegend(\r\n  x: number,\r\n  y: number,\r\n  items: Array<{ label: string; color: { fill: string; stroke: string }; shape?: 'rect' | 'diamond' | 'ellipse' | 'stadium' }>\r\n): string {\r\n  let svg = `\r\n  <g class=\"legend\" transform=\"translate(${x}, ${y})\">\r\n    <text x=\"0\" y=\"0\" font-weight=\"bold\" class=\"legend-text\">Legend</text>`;\r\n\r\n  items.forEach((item, i) => {\r\n    const itemY = 12 + i * 18;\r\n    let shapeEl: string;\r\n    switch (item.shape) {\r\n      case 'diamond':\r\n        shapeEl = `<polygon points=\"10,${itemY} 20,${itemY + 6} 10,${itemY + 12} 0,${itemY + 6}\" fill=\"${item.color.fill}\" stroke=\"${item.color.stroke}\"/>`;\r\n        break;\r\n      case 'ellipse':\r\n        shapeEl = `<ellipse cx=\"10\" cy=\"${itemY + 6}\" rx=\"10\" ry=\"6\" fill=\"${item.color.fill}\" stroke=\"${item.color.stroke}\"/>`;\r\n        break;\r\n      case 'stadium':\r\n        shapeEl = `<rect x=\"0\" y=\"${itemY}\" width=\"20\" height=\"12\" rx=\"6\" ry=\"6\" fill=\"${item.color.fill}\" stroke=\"${item.color.stroke}\"/>`;\r\n        break;\r\n      default:\r\n        shapeEl = `<rect x=\"0\" y=\"${itemY}\" width=\"20\" height=\"12\" rx=\"4\" fill=\"${item.color.fill}\" stroke=\"${item.color.stroke}\"/>`;\r\n    }\r\n\r\n    svg += `\\n    ${shapeEl}\r\n    <text x=\"25\" y=\"${itemY + 10}\" class=\"legend-text\">${escapeSVGText(item.label)}</text>`;\r\n  });\r\n\r\n  svg += '\\n  </g>';\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Layout nodes in layers (top-down)\r\n */\r\nexport function layoutNodesInLayers(\r\n  layers: Array<Array<{ id: string; label: string; type?: string }>>,\r\n  options: SVGExportOptions = {}\r\n): Map<string, SVGNodePosition> {\r\n  const opts = { ...DEFAULT_SVG_OPTIONS, ...options };\r\n  const positions = new Map<string, SVGNodePosition>();\r\n\r\n  let currentY = opts.padding + (opts.title ? 40 : 0);\r\n\r\n  for (const layer of layers) {\r\n    if (layer.length === 0) continue;\r\n\r\n    const layerWidth = layer.length * (opts.nodeWidth + opts.nodeSpacing) - opts.nodeSpacing;\r\n    let startX = (opts.width - layerWidth) / 2;\r\n\r\n    for (const node of layer) {\r\n      positions.set(node.id, {\r\n        id: node.id,\r\n        x: startX,\r\n        y: currentY,\r\n        width: opts.nodeWidth,\r\n        height: opts.nodeHeight,\r\n        label: node.label,\r\n        type: node.type,\r\n      });\r\n      startX += opts.nodeWidth + opts.nodeSpacing;\r\n    }\r\n\r\n    currentY += opts.nodeHeight + opts.layerSpacing;\r\n  }\r\n\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Layout nodes in a horizontal sequence\r\n */\r\nexport function layoutNodesHorizontally(\r\n  nodes: Array<{ id: string; label: string; type?: string }>,\r\n  options: SVGExportOptions = {}\r\n): Map<string, SVGNodePosition> {\r\n  const opts = { ...DEFAULT_SVG_OPTIONS, ...options };\r\n  const positions = new Map<string, SVGNodePosition>();\r\n\r\n  const totalWidth = nodes.length * (opts.nodeWidth + opts.nodeSpacing) - opts.nodeSpacing;\r\n  let startX = Math.max(opts.padding, (opts.width - totalWidth) / 2);\r\n  const y = opts.height / 2 - opts.nodeHeight / 2;\r\n\r\n  for (const node of nodes) {\r\n    positions.set(node.id, {\r\n      id: node.id,\r\n      x: startX,\r\n      y,\r\n      width: opts.nodeWidth,\r\n      height: opts.nodeHeight,\r\n      label: node.label,\r\n      type: node.type,\r\n    });\r\n    startX += opts.nodeWidth + opts.nodeSpacing;\r\n  }\r\n\r\n  return positions;\r\n}\r\n\r\n/**\r\n * Calculate required SVG height based on node positions\r\n */\r\nexport function calculateSVGHeight(\r\n  positions: Map<string, SVGNodePosition>,\r\n  padding: number = 40,\r\n  extraSpace: number = 120\r\n): number {\r\n  let maxY = 0;\r\n  for (const pos of positions.values()) {\r\n    maxY = Math.max(maxY, pos.y + pos.height);\r\n  }\r\n  return maxY + padding + extraSpace;\r\n}\r\n","/**\r\n * GraphML Export Utilities (v7.0.3)\r\n * Phase 9: Shared GraphML generation utilities for all visual exporters\r\n *\r\n * GraphML is an XML-based format for graph representation, compatible with:\r\n * - yEd Graph Editor\r\n * - Gephi\r\n * - Cytoscape\r\n * - NetworkX\r\n * - igraph\r\n */\r\n\r\nexport interface GraphMLNode {\r\n  id: string;\r\n  label: string;\r\n  type?: string;\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\nexport interface GraphMLEdge {\r\n  id: string;\r\n  source: string;\r\n  target: string;\r\n  label?: string;\r\n  directed?: boolean;\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\nexport interface GraphMLOptions {\r\n  directed?: boolean;\r\n  includeMetadata?: boolean;\r\n  includeLabels?: boolean;\r\n  graphId?: string;\r\n  graphName?: string;\r\n}\r\n\r\nexport const DEFAULT_GRAPHML_OPTIONS: GraphMLOptions = {\r\n  directed: true,\r\n  includeMetadata: true,\r\n  includeLabels: true,\r\n  graphId: 'G',\r\n  graphName: 'Graph',\r\n};\r\n\r\n/**\r\n * XML escape special characters\r\n */\r\nfunction escapeXML(str: string): string {\r\n  return str\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&apos;');\r\n}\r\n\r\n/**\r\n * Generate GraphML document header with schema definitions\r\n */\r\nexport function generateGraphMLHeader(options: GraphMLOptions = {}): string {\r\n  const { graphId = 'G', directed = true, graphName } = options;\r\n\r\n  let header = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<graphml xmlns=\"http://graphml.graphdrawing.org/xmlns\"\r\n         xmlns:xsi=\"http://www.w3.org/2001/XMLSchema-instance\"\r\n         xsi:schemaLocation=\"http://graphml.graphdrawing.org/xmlns\r\n         http://graphml.graphdrawing.org/xmlns/1.0/graphml.xsd\">\r\n\r\n  <!-- Node attributes -->\r\n  <key id=\"label\" for=\"node\" attr.name=\"label\" attr.type=\"string\"/>\r\n  <key id=\"type\" for=\"node\" attr.name=\"type\" attr.type=\"string\"/>\r\n  <key id=\"description\" for=\"node\" attr.name=\"description\" attr.type=\"string\"/>\r\n\r\n  <!-- Edge attributes -->\r\n  <key id=\"edgeLabel\" for=\"edge\" attr.name=\"label\" attr.type=\"string\"/>\r\n  <key id=\"weight\" for=\"edge\" attr.name=\"weight\" attr.type=\"double\"/>\r\n  <key id=\"edgeType\" for=\"edge\" attr.name=\"type\" attr.type=\"string\"/>\r\n\r\n  <!-- Graph attributes -->\r\n  <key id=\"graphName\" for=\"graph\" attr.name=\"name\" attr.type=\"string\"/>\r\n\r\n  <graph id=\"${escapeXML(graphId)}\" edgedefault=\"${directed ? 'directed' : 'undirected'}\">`;\r\n\r\n  if (graphName) {\r\n    header += `\\n    <data key=\"graphName\">${escapeXML(graphName)}</data>`;\r\n  }\r\n\r\n  return header;\r\n}\r\n\r\n/**\r\n * Generate GraphML document footer\r\n */\r\nexport function generateGraphMLFooter(): string {\r\n  return `\r\n  </graph>\r\n</graphml>`;\r\n}\r\n\r\n/**\r\n * Render a node in GraphML format\r\n */\r\nexport function renderGraphMLNode(node: GraphMLNode, options: GraphMLOptions = {}): string {\r\n  const { includeLabels = true, includeMetadata = true } = options;\r\n\r\n  let nodeXML = `\\n    <node id=\"${escapeXML(node.id)}\">`;\r\n\r\n  if (includeLabels && node.label) {\r\n    nodeXML += `\\n      <data key=\"label\">${escapeXML(node.label)}</data>`;\r\n  }\r\n\r\n  if (node.type) {\r\n    nodeXML += `\\n      <data key=\"type\">${escapeXML(node.type)}</data>`;\r\n  }\r\n\r\n  if (includeMetadata && node.metadata) {\r\n    if (node.metadata.description) {\r\n      nodeXML += `\\n      <data key=\"description\">${escapeXML(String(node.metadata.description))}</data>`;\r\n    }\r\n  }\r\n\r\n  nodeXML += `\\n    </node>`;\r\n  return nodeXML;\r\n}\r\n\r\n/**\r\n * Render an edge in GraphML format\r\n */\r\nexport function renderGraphMLEdge(edge: GraphMLEdge, options: GraphMLOptions = {}): string {\r\n  const { includeLabels = true, includeMetadata = true } = options;\r\n\r\n  let edgeXML = `\\n    <edge id=\"${escapeXML(edge.id)}\" source=\"${escapeXML(edge.source)}\" target=\"${escapeXML(edge.target)}\">`;\r\n\r\n  if (includeLabels && edge.label) {\r\n    edgeXML += `\\n      <data key=\"edgeLabel\">${escapeXML(edge.label)}</data>`;\r\n  }\r\n\r\n  if (includeMetadata && edge.metadata) {\r\n    if (edge.metadata.weight !== undefined) {\r\n      edgeXML += `\\n      <data key=\"weight\">${edge.metadata.weight}</data>`;\r\n    }\r\n    if (edge.metadata.type) {\r\n      edgeXML += `\\n      <data key=\"edgeType\">${escapeXML(String(edge.metadata.type))}</data>`;\r\n    }\r\n  }\r\n\r\n  edgeXML += `\\n    </edge>`;\r\n  return edgeXML;\r\n}\r\n\r\n/**\r\n * Generate a complete GraphML document from nodes and edges\r\n */\r\nexport function generateGraphML(\r\n  nodes: GraphMLNode[],\r\n  edges: GraphMLEdge[],\r\n  options: GraphMLOptions = {}\r\n): string {\r\n  const mergedOptions = { ...DEFAULT_GRAPHML_OPTIONS, ...options };\r\n\r\n  let graphml = generateGraphMLHeader(mergedOptions);\r\n\r\n  // Add nodes\r\n  graphml += '\\n\\n    <!-- Nodes -->';\r\n  for (const node of nodes) {\r\n    graphml += renderGraphMLNode(node, mergedOptions);\r\n  }\r\n\r\n  // Add edges\r\n  graphml += '\\n\\n    <!-- Edges -->';\r\n  for (const edge of edges) {\r\n    graphml += renderGraphMLEdge(edge, mergedOptions);\r\n  }\r\n\r\n  graphml += generateGraphMLFooter();\r\n  return graphml;\r\n}\r\n\r\n/**\r\n * Create a simple linear graph (for sequential/temporal flows)\r\n */\r\nexport function createLinearGraphML(\r\n  nodeLabels: string[],\r\n  options: GraphMLOptions = {}\r\n): string {\r\n  const nodes: GraphMLNode[] = nodeLabels.map((label, i) => ({\r\n    id: `n${i}`,\r\n    label,\r\n    type: 'step',\r\n  }));\r\n\r\n  const edges: GraphMLEdge[] = [];\r\n  for (let i = 0; i < nodeLabels.length - 1; i++) {\r\n    edges.push({\r\n      id: `e${i}`,\r\n      source: `n${i}`,\r\n      target: `n${i + 1}`,\r\n    });\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, options);\r\n}\r\n\r\n/**\r\n * Create a hierarchical tree graph\r\n */\r\nexport function createTreeGraphML(\r\n  root: { id: string; label: string; children?: Array<{ id: string; label: string; children?: unknown[] }> },\r\n  options: GraphMLOptions = {}\r\n): string {\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeCount = 0;\r\n\r\n  function traverse(node: { id: string; label: string; children?: unknown[] }, depth: number = 0): void {\r\n    nodes.push({\r\n      id: node.id,\r\n      label: node.label,\r\n      type: depth === 0 ? 'root' : 'node',\r\n      metadata: { depth },\r\n    });\r\n\r\n    if (node.children && Array.isArray(node.children)) {\r\n      for (const child of node.children as Array<{ id: string; label: string; children?: unknown[] }>) {\r\n        edges.push({\r\n          id: `e${edgeCount++}`,\r\n          source: node.id,\r\n          target: child.id,\r\n        });\r\n        traverse(child, depth + 1);\r\n      }\r\n    }\r\n  }\r\n\r\n  traverse(root);\r\n  return generateGraphML(nodes, edges, options);\r\n}\r\n\r\n/**\r\n * Create a layered graph (for causal/bayesian networks)\r\n */\r\nexport function createLayeredGraphML(\r\n  layers: Array<Array<{ id: string; label: string; type?: string }>>,\r\n  connections: Array<{ from: string; to: string; label?: string; weight?: number }>,\r\n  options: GraphMLOptions = {}\r\n): string {\r\n  const nodes: GraphMLNode[] = [];\r\n\r\n  for (let layerIdx = 0; layerIdx < layers.length; layerIdx++) {\r\n    for (const node of layers[layerIdx]) {\r\n      nodes.push({\r\n        id: node.id,\r\n        label: node.label,\r\n        type: node.type || `layer${layerIdx}`,\r\n        metadata: { layer: layerIdx },\r\n      });\r\n    }\r\n  }\r\n\r\n  const edges: GraphMLEdge[] = connections.map((conn, i) => ({\r\n    id: `e${i}`,\r\n    source: conn.from,\r\n    target: conn.to,\r\n    label: conn.label,\r\n    metadata: conn.weight !== undefined ? { weight: conn.weight } : undefined,\r\n  }));\r\n\r\n  return generateGraphML(nodes, edges, options);\r\n}\r\n","/**\r\n * TikZ Export Utilities (v7.0.3)\r\n * Phase 9: Shared TikZ/LaTeX generation utilities for all visual exporters\r\n *\r\n * TikZ is a LaTeX package for creating high-quality graphics, commonly used in:\r\n * - Academic papers and publications\r\n * - Technical documentation\r\n * - Presentations (Beamer)\r\n * - Books and theses\r\n */\r\n\r\nexport interface TikZNode {\r\n  id: string;\r\n  label: string;\r\n  x?: number;\r\n  y?: number;\r\n  type?: string;\r\n  shape?: 'rectangle' | 'circle' | 'ellipse' | 'diamond' | 'rounded' | 'stadium';\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\nexport interface TikZEdge {\r\n  source: string;\r\n  target: string;\r\n  label?: string;\r\n  style?: 'solid' | 'dashed' | 'dotted';\r\n  directed?: boolean;\r\n  bend?: 'left' | 'right' | number;\r\n}\r\n\r\nexport interface TikZOptions {\r\n  standalone?: boolean;\r\n  includeLabels?: boolean;\r\n  includeMetrics?: boolean;\r\n  colorScheme?: 'default' | 'pastel' | 'monochrome';\r\n  title?: string;\r\n  scale?: number;\r\n  nodeDistance?: string;\r\n  levelDistance?: string;\r\n}\r\n\r\nexport const DEFAULT_TIKZ_OPTIONS: TikZOptions = {\r\n  standalone: false,\r\n  includeLabels: true,\r\n  includeMetrics: true,\r\n  colorScheme: 'default',\r\n  scale: 1,\r\n  nodeDistance: '2cm',\r\n  levelDistance: '1.5cm',\r\n};\r\n\r\n// Color palettes for TikZ\r\nconst COLOR_PALETTES = {\r\n  default: {\r\n    primary: { fill: 'blue!20', stroke: 'blue!60' },\r\n    secondary: { fill: 'green!20', stroke: 'green!60' },\r\n    tertiary: { fill: 'orange!20', stroke: 'orange!60' },\r\n    neutral: { fill: 'gray!20', stroke: 'gray!60' },\r\n    success: { fill: 'green!30', stroke: 'green!70' },\r\n    warning: { fill: 'yellow!30', stroke: 'yellow!70' },\r\n    danger: { fill: 'red!20', stroke: 'red!60' },\r\n    info: { fill: 'cyan!20', stroke: 'cyan!60' },\r\n  },\r\n  pastel: {\r\n    primary: { fill: 'blue!10', stroke: 'blue!40' },\r\n    secondary: { fill: 'green!10', stroke: 'green!40' },\r\n    tertiary: { fill: 'orange!10', stroke: 'orange!40' },\r\n    neutral: { fill: 'gray!10', stroke: 'gray!40' },\r\n    success: { fill: 'green!15', stroke: 'green!50' },\r\n    warning: { fill: 'yellow!15', stroke: 'yellow!50' },\r\n    danger: { fill: 'red!10', stroke: 'red!40' },\r\n    info: { fill: 'cyan!10', stroke: 'cyan!40' },\r\n  },\r\n  monochrome: {\r\n    primary: { fill: 'black!10', stroke: 'black!60' },\r\n    secondary: { fill: 'black!15', stroke: 'black!70' },\r\n    tertiary: { fill: 'black!20', stroke: 'black!80' },\r\n    neutral: { fill: 'black!5', stroke: 'black!50' },\r\n    success: { fill: 'black!10', stroke: 'black!60' },\r\n    warning: { fill: 'black!15', stroke: 'black!70' },\r\n    danger: { fill: 'black!20', stroke: 'black!80' },\r\n    info: { fill: 'black!10', stroke: 'black!60' },\r\n  },\r\n};\r\n\r\n/**\r\n * Get TikZ colors for a node type\r\n */\r\nexport function getTikZColor(\r\n  nodeType: string,\r\n  colorScheme: 'default' | 'pastel' | 'monochrome' = 'default'\r\n): { fill: string; stroke: string } {\r\n  const palette = COLOR_PALETTES[colorScheme] || COLOR_PALETTES.default;\r\n  const colorMap: Record<string, keyof typeof palette> = {\r\n    primary: 'primary',\r\n    secondary: 'secondary',\r\n    tertiary: 'tertiary',\r\n    neutral: 'neutral',\r\n    success: 'success',\r\n    warning: 'warning',\r\n    danger: 'danger',\r\n    info: 'info',\r\n    cause: 'primary',\r\n    effect: 'tertiary',\r\n    mediator: 'secondary',\r\n    confounder: 'warning',\r\n    root: 'primary',\r\n    current: 'primary',\r\n    terminal: 'success',\r\n    hypothesis: 'info',\r\n    evidence: 'secondary',\r\n    conclusion: 'success',\r\n  };\r\n\r\n  const key = colorMap[nodeType] || 'neutral';\r\n  return palette[key];\r\n}\r\n\r\n/**\r\n * Escape special LaTeX characters\r\n */\r\nfunction escapeLatex(str: string): string {\r\n  return str\r\n    .replace(/\\\\/g, '\\\\textbackslash{}')\r\n    .replace(/%/g, '\\\\%')\r\n    .replace(/\\$/g, '\\\\$')\r\n    .replace(/&/g, '\\\\&')\r\n    .replace(/#/g, '\\\\#')\r\n    .replace(/_/g, '\\\\_')\r\n    .replace(/{/g, '\\\\{')\r\n    .replace(/}/g, '\\\\}')\r\n    .replace(/\\^/g, '\\\\textasciicircum{}')\r\n    .replace(/~/g, '\\\\textasciitilde{}');\r\n}\r\n\r\n/**\r\n * Generate TikZ document header with required packages\r\n */\r\nexport function generateTikZHeader(options: TikZOptions = {}): string {\r\n  const { standalone = false, title, scale = 1 } = options;\r\n\r\n  let header = '';\r\n\r\n  if (standalone) {\r\n    header += `\\\\documentclass[tikz,border=10pt]{standalone}\r\n\\\\usepackage{tikz}\r\n\\\\usetikzlibrary{shapes,arrows,positioning,calc,backgrounds,fit}\r\n\\\\begin{document}\r\n`;\r\n  }\r\n\r\n  header += `\\\\begin{tikzpicture}[\r\n  scale=${scale},\r\n  every node/.style={font=\\\\small},\r\n  box/.style={rectangle, draw, rounded corners=3pt, minimum width=2cm, minimum height=0.8cm, text centered},\r\n  circle node/.style={circle, draw, minimum size=0.8cm, text centered},\r\n  ellipse node/.style={ellipse, draw, minimum width=2cm, minimum height=0.8cm, text centered},\r\n  diamond node/.style={diamond, draw, aspect=2, minimum width=1.5cm, text centered},\r\n  stadium node/.style={rectangle, draw, rounded corners=0.4cm, minimum width=2cm, minimum height=0.8cm, text centered},\r\n  arrow/.style={->, >=stealth, thick},\r\n  dashed arrow/.style={->, >=stealth, thick, dashed},\r\n  dotted arrow/.style={->, >=stealth, thick, dotted},\r\n  edge label/.style={font=\\\\footnotesize, fill=white, inner sep=1pt}\r\n]`;\r\n\r\n  if (title) {\r\n    header += `\\n\\n% Title\\n\\\\node[font=\\\\large\\\\bfseries] at (4, 0.5) {${escapeLatex(title)}};`;\r\n  }\r\n\r\n  return header;\r\n}\r\n\r\n/**\r\n * Generate TikZ document footer\r\n */\r\nexport function generateTikZFooter(options: TikZOptions = {}): string {\r\n  const { standalone = false } = options;\r\n\r\n  let footer = '\\n\\\\end{tikzpicture}';\r\n\r\n  if (standalone) {\r\n    footer += '\\n\\\\end{document}';\r\n  }\r\n\r\n  return footer;\r\n}\r\n\r\n/**\r\n * Get TikZ shape style from node shape\r\n */\r\nfunction getShapeStyle(shape?: string): string {\r\n  switch (shape) {\r\n    case 'circle':\r\n      return 'circle node';\r\n    case 'ellipse':\r\n      return 'ellipse node';\r\n    case 'diamond':\r\n      return 'diamond node';\r\n    case 'stadium':\r\n    case 'rounded':\r\n      return 'stadium node';\r\n    case 'rectangle':\r\n    default:\r\n      return 'box';\r\n  }\r\n}\r\n\r\n/**\r\n * Render a node in TikZ format\r\n */\r\nexport function renderTikZNode(node: TikZNode, options: TikZOptions = {}): string {\r\n  const { colorScheme = 'default', includeLabels = true } = options;\r\n  const colors = getTikZColor(node.type || 'neutral', colorScheme);\r\n  const shapeStyle = getShapeStyle(node.shape);\r\n  const label = includeLabels ? escapeLatex(node.label) : escapeLatex(node.id);\r\n\r\n  const position = node.x !== undefined && node.y !== undefined ? `at (${node.x}, ${node.y})` : '';\r\n\r\n  return `\\n  \\\\node[${shapeStyle}, fill=${colors.fill}, draw=${colors.stroke}] (${node.id}) ${position} {${label}};`;\r\n}\r\n\r\n/**\r\n * Render a node with relative positioning\r\n */\r\nexport function renderTikZNodeRelative(\r\n  node: TikZNode,\r\n  position: { direction: 'right' | 'left' | 'above' | 'below'; of: string; distance?: string },\r\n  options: TikZOptions = {}\r\n): string {\r\n  const { colorScheme = 'default', includeLabels = true, nodeDistance = '2cm' } = options;\r\n  const colors = getTikZColor(node.type || 'neutral', colorScheme);\r\n  const shapeStyle = getShapeStyle(node.shape);\r\n  const label = includeLabels ? escapeLatex(node.label) : escapeLatex(node.id);\r\n  const distance = position.distance || nodeDistance;\r\n\r\n  return `\\n  \\\\node[${shapeStyle}, fill=${colors.fill}, draw=${colors.stroke}, ${position.direction}=${distance} of ${position.of}] (${node.id}) {${label}};`;\r\n}\r\n\r\n/**\r\n * Render an edge in TikZ format\r\n */\r\nexport function renderTikZEdge(edge: TikZEdge, options: TikZOptions = {}): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  let style = 'arrow';\r\n  if (edge.style === 'dashed') style = 'dashed arrow';\r\n  if (edge.style === 'dotted') style = 'dotted arrow';\r\n  if (edge.directed === false) style = style.replace('->', '-');\r\n\r\n  let bendOption = '';\r\n  if (edge.bend) {\r\n    if (typeof edge.bend === 'number') {\r\n      bendOption = `, bend ${edge.bend > 0 ? 'left' : 'right'}=${Math.abs(edge.bend)}`;\r\n    } else {\r\n      bendOption = `, bend ${edge.bend}`;\r\n    }\r\n  }\r\n\r\n  let labelOption = '';\r\n  if (includeLabels && edge.label) {\r\n    labelOption = ` node[edge label, midway] {${escapeLatex(edge.label)}}`;\r\n  }\r\n\r\n  return `\\n  \\\\draw[${style}${bendOption}] (${edge.source}) --${labelOption} (${edge.target});`;\r\n}\r\n\r\n/**\r\n * Render a metrics panel in TikZ\r\n */\r\nexport function renderTikZMetrics(\r\n  x: number,\r\n  y: number,\r\n  metrics: Array<{ label: string; value: string | number }>\r\n): string {\r\n  let tikz = `\\n\\n  % Metrics Panel\\n  \\\\node[draw, fill=white, rounded corners, align=left, font=\\\\footnotesize] at (${x}, ${y}) {`;\r\n\r\n  const lines = metrics.map(m => `${escapeLatex(m.label)}: ${escapeLatex(String(m.value))}`);\r\n  tikz += lines.join(' \\\\\\\\ ');\r\n  tikz += '};';\r\n\r\n  return tikz;\r\n}\r\n\r\n/**\r\n * Render a legend in TikZ\r\n */\r\nexport function renderTikZLegend(\r\n  x: number,\r\n  y: number,\r\n  items: Array<{ label: string; color: { fill: string; stroke: string }; shape?: string }>\r\n): string {\r\n  let tikz = '\\n\\n  % Legend';\r\n\r\n  for (let i = 0; i < items.length; i++) {\r\n    const item = items[i];\r\n    const itemY = y - i * 0.5;\r\n    const shapeStyle = getShapeStyle(item.shape);\r\n\r\n    tikz += `\\n  \\\\node[${shapeStyle}, fill=${item.color.fill}, draw=${item.color.stroke}, minimum width=0.5cm, minimum height=0.3cm] at (${x}, ${itemY}) {};`;\r\n    tikz += `\\n  \\\\node[right, font=\\\\footnotesize] at (${x + 0.4}, ${itemY}) {${escapeLatex(item.label)}};`;\r\n  }\r\n\r\n  return tikz;\r\n}\r\n\r\n/**\r\n * Generate a complete TikZ diagram from nodes and edges\r\n */\r\nexport function generateTikZ(\r\n  nodes: TikZNode[],\r\n  edges: TikZEdge[],\r\n  options: TikZOptions = {}\r\n): string {\r\n  const mergedOptions = { ...DEFAULT_TIKZ_OPTIONS, ...options };\r\n\r\n  let tikz = generateTikZHeader(mergedOptions);\r\n\r\n  // Add nodes\r\n  tikz += '\\n\\n  % Nodes';\r\n  for (const node of nodes) {\r\n    tikz += renderTikZNode(node, mergedOptions);\r\n  }\r\n\r\n  // Add edges\r\n  tikz += '\\n\\n  % Edges';\r\n  for (const edge of edges) {\r\n    tikz += renderTikZEdge(edge, mergedOptions);\r\n  }\r\n\r\n  tikz += generateTikZFooter(mergedOptions);\r\n  return tikz;\r\n}\r\n\r\n/**\r\n * Create a linear chain diagram (for sequential/temporal flows)\r\n */\r\nexport function createLinearTikZ(\r\n  nodeLabels: string[],\r\n  options: TikZOptions = {}\r\n): string {\r\n  const nodes: TikZNode[] = nodeLabels.map((label, i) => ({\r\n    id: `n${i}`,\r\n    label,\r\n    x: i * 3,\r\n    y: 0,\r\n    type: i === 0 ? 'primary' : i === nodeLabels.length - 1 ? 'success' : 'neutral',\r\n    shape: 'rectangle',\r\n  }));\r\n\r\n  const edges: TikZEdge[] = [];\r\n  for (let i = 0; i < nodeLabels.length - 1; i++) {\r\n    edges.push({\r\n      source: `n${i}`,\r\n      target: `n${i + 1}`,\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, options);\r\n}\r\n\r\n/**\r\n * Create a hierarchical tree diagram\r\n */\r\nexport function createTreeTikZ(\r\n  root: { id: string; label: string; children?: Array<{ id: string; label: string; children?: unknown[] }> },\r\n  options: TikZOptions = {}\r\n): string {\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n\r\n  function traverse(\r\n    node: { id: string; label: string; children?: unknown[] },\r\n    x: number,\r\n    y: number,\r\n    width: number\r\n  ): void {\r\n    nodes.push({\r\n      id: node.id,\r\n      label: node.label,\r\n      x,\r\n      y,\r\n      type: y === 0 ? 'primary' : 'neutral',\r\n      shape: 'rectangle',\r\n    });\r\n\r\n    if (node.children && Array.isArray(node.children)) {\r\n      const children = node.children as Array<{ id: string; label: string; children?: unknown[] }>;\r\n      const childWidth = width / children.length;\r\n\r\n      for (let i = 0; i < children.length; i++) {\r\n        const child = children[i];\r\n        const childX = x - width / 2 + childWidth / 2 + i * childWidth;\r\n\r\n        edges.push({\r\n          source: node.id,\r\n          target: child.id,\r\n          directed: true,\r\n        });\r\n        traverse(child, childX, y - 2, childWidth);\r\n      }\r\n    }\r\n  }\r\n\r\n  traverse(root, 4, 0, 8);\r\n  return generateTikZ(nodes, edges, options);\r\n}\r\n\r\n/**\r\n * Create a layered graph diagram (for causal/bayesian networks)\r\n */\r\nexport function createLayeredTikZ(\r\n  layers: Array<Array<{ id: string; label: string; type?: string; shape?: TikZNode['shape'] }>>,\r\n  connections: Array<{ from: string; to: string; label?: string; style?: TikZEdge['style'] }>,\r\n  options: TikZOptions = {}\r\n): string {\r\n  const nodes: TikZNode[] = [];\r\n\r\n  for (let layerIdx = 0; layerIdx < layers.length; layerIdx++) {\r\n    const layer = layers[layerIdx];\r\n    const layerWidth = layer.length * 3;\r\n    const startX = (8 - layerWidth) / 2 + 1.5;\r\n\r\n    for (let nodeIdx = 0; nodeIdx < layer.length; nodeIdx++) {\r\n      const node = layer[nodeIdx];\r\n      nodes.push({\r\n        id: node.id,\r\n        label: node.label,\r\n        x: startX + nodeIdx * 3,\r\n        y: -layerIdx * 2,\r\n        type: node.type || 'neutral',\r\n        shape: node.shape || 'rectangle',\r\n      });\r\n    }\r\n  }\r\n\r\n  const edges: TikZEdge[] = connections.map(conn => ({\r\n    source: conn.from,\r\n    target: conn.to,\r\n    label: conn.label,\r\n    style: conn.style,\r\n    directed: true,\r\n  }));\r\n\r\n  return generateTikZ(nodes, edges, options);\r\n}\r\n","/**\r\n * HTML Export Utilities (v7.1.0)\r\n * Phase 10: Shared utilities for HTML visual exports\r\n *\r\n * Provides reusable functions for generating HTML exports across all modes.\r\n */\r\n\r\n/**\r\n * HTML theme colors\r\n */\r\nexport interface HTMLThemeColors {\r\n  background: string;\r\n  text: string;\r\n  primary: string;\r\n  secondary: string;\r\n  success: string;\r\n  warning: string;\r\n  danger: string;\r\n  info: string;\r\n  border: string;\r\n  tableHeader: string;\r\n  tableRow: string;\r\n  tableRowAlt: string;\r\n}\r\n\r\n/**\r\n * Get theme colors based on theme name\r\n */\r\nexport function getHTMLThemeColors(theme: 'light' | 'dark' | 'auto' = 'light'): HTMLThemeColors {\r\n  if (theme === 'dark') {\r\n    return {\r\n      background: '#1a1a2e',\r\n      text: '#eaeaea',\r\n      primary: '#4a90d9',\r\n      secondary: '#6c757d',\r\n      success: '#28a745',\r\n      warning: '#ffc107',\r\n      danger: '#dc3545',\r\n      info: '#17a2b8',\r\n      border: '#444',\r\n      tableHeader: '#2d2d44',\r\n      tableRow: '#1a1a2e',\r\n      tableRowAlt: '#252538',\r\n    };\r\n  }\r\n  // Light theme (default)\r\n  return {\r\n    background: '#ffffff',\r\n    text: '#333333',\r\n    primary: '#2563eb',\r\n    secondary: '#6b7280',\r\n    success: '#16a34a',\r\n    warning: '#ca8a04',\r\n    danger: '#dc2626',\r\n    info: '#0891b2',\r\n    border: '#e5e7eb',\r\n    tableHeader: '#f3f4f6',\r\n    tableRow: '#ffffff',\r\n    tableRowAlt: '#f9fafb',\r\n  };\r\n}\r\n\r\n/**\r\n * Generate HTML document header\r\n */\r\nexport function generateHTMLHeader(\r\n  title: string,\r\n  options: {\r\n    standalone?: boolean;\r\n    theme?: 'light' | 'dark' | 'auto';\r\n    customStyles?: string;\r\n  } = {}\r\n): string {\r\n  const { standalone = true, theme = 'light', customStyles = '' } = options;\r\n  const colors = getHTMLThemeColors(theme);\r\n\r\n  if (!standalone) {\r\n    return `<div class=\"visual-export\" data-theme=\"${theme}\">\\n`;\r\n  }\r\n\r\n  return `<!DOCTYPE html>\r\n<html lang=\"en\" data-theme=\"${theme}\">\r\n<head>\r\n  <meta charset=\"UTF-8\">\r\n  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\r\n  <title>${escapeHTML(title)}</title>\r\n  <style>\r\n    :root {\r\n      --bg-color: ${colors.background};\r\n      --text-color: ${colors.text};\r\n      --primary-color: ${colors.primary};\r\n      --secondary-color: ${colors.secondary};\r\n      --success-color: ${colors.success};\r\n      --warning-color: ${colors.warning};\r\n      --danger-color: ${colors.danger};\r\n      --info-color: ${colors.info};\r\n      --border-color: ${colors.border};\r\n      --table-header-bg: ${colors.tableHeader};\r\n      --table-row-bg: ${colors.tableRow};\r\n      --table-row-alt-bg: ${colors.tableRowAlt};\r\n    }\r\n\r\n    * { box-sizing: border-box; }\r\n\r\n    body {\r\n      font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', Roboto, 'Helvetica Neue', Arial, sans-serif;\r\n      line-height: 1.6;\r\n      color: var(--text-color);\r\n      background-color: var(--bg-color);\r\n      max-width: 1200px;\r\n      margin: 0 auto;\r\n      padding: 2rem;\r\n    }\r\n\r\n    h1, h2, h3, h4 { margin-top: 1.5rem; margin-bottom: 0.5rem; }\r\n    h1 { font-size: 2rem; border-bottom: 2px solid var(--primary-color); padding-bottom: 0.5rem; }\r\n    h2 { font-size: 1.5rem; color: var(--primary-color); }\r\n    h3 { font-size: 1.25rem; }\r\n\r\n    .section {\r\n      margin: 1.5rem 0;\r\n      padding: 1rem;\r\n      border: 1px solid var(--border-color);\r\n      border-radius: 8px;\r\n    }\r\n\r\n    .section-header {\r\n      display: flex;\r\n      align-items: center;\r\n      gap: 0.5rem;\r\n      margin-bottom: 1rem;\r\n    }\r\n\r\n    .badge {\r\n      display: inline-block;\r\n      padding: 0.25rem 0.5rem;\r\n      border-radius: 4px;\r\n      font-size: 0.75rem;\r\n      font-weight: 600;\r\n    }\r\n\r\n    .badge-primary { background: var(--primary-color); color: white; }\r\n    .badge-success { background: var(--success-color); color: white; }\r\n    .badge-warning { background: var(--warning-color); color: black; }\r\n    .badge-danger { background: var(--danger-color); color: white; }\r\n    .badge-info { background: var(--info-color); color: white; }\r\n    .badge-secondary { background: var(--secondary-color); color: white; }\r\n\r\n    table {\r\n      width: 100%;\r\n      border-collapse: collapse;\r\n      margin: 1rem 0;\r\n      font-size: 0.9rem;\r\n    }\r\n\r\n    th, td {\r\n      padding: 0.75rem;\r\n      text-align: left;\r\n      border: 1px solid var(--border-color);\r\n    }\r\n\r\n    th {\r\n      background: var(--table-header-bg);\r\n      font-weight: 600;\r\n    }\r\n\r\n    tr:nth-child(even) { background: var(--table-row-alt-bg); }\r\n    tr:nth-child(odd) { background: var(--table-row-bg); }\r\n\r\n    .metrics-grid {\r\n      display: grid;\r\n      grid-template-columns: repeat(auto-fit, minmax(150px, 1fr));\r\n      gap: 1rem;\r\n      margin: 1rem 0;\r\n    }\r\n\r\n    .metric-card {\r\n      padding: 1rem;\r\n      background: var(--table-header-bg);\r\n      border-radius: 8px;\r\n      text-align: center;\r\n    }\r\n\r\n    .metric-value {\r\n      font-size: 1.5rem;\r\n      font-weight: 700;\r\n      color: var(--primary-color);\r\n    }\r\n\r\n    .metric-label {\r\n      font-size: 0.85rem;\r\n      color: var(--secondary-color);\r\n    }\r\n\r\n    .progress-bar {\r\n      height: 8px;\r\n      background: var(--border-color);\r\n      border-radius: 4px;\r\n      overflow: hidden;\r\n    }\r\n\r\n    .progress-fill {\r\n      height: 100%;\r\n      background: var(--primary-color);\r\n      transition: width 0.3s ease;\r\n    }\r\n\r\n    .list-styled {\r\n      list-style: none;\r\n      padding: 0;\r\n    }\r\n\r\n    .list-styled li {\r\n      padding: 0.5rem 0;\r\n      border-bottom: 1px solid var(--border-color);\r\n    }\r\n\r\n    .list-styled li:last-child { border-bottom: none; }\r\n\r\n    .icon { margin-right: 0.5rem; }\r\n\r\n    .text-success { color: var(--success-color); }\r\n    .text-warning { color: var(--warning-color); }\r\n    .text-danger { color: var(--danger-color); }\r\n    .text-info { color: var(--info-color); }\r\n    .text-secondary { color: var(--secondary-color); }\r\n\r\n    .card {\r\n      border: 1px solid var(--border-color);\r\n      border-radius: 8px;\r\n      padding: 1rem;\r\n      margin: 0.5rem 0;\r\n    }\r\n\r\n    .card-header {\r\n      font-weight: 600;\r\n      margin-bottom: 0.5rem;\r\n      padding-bottom: 0.5rem;\r\n      border-bottom: 1px solid var(--border-color);\r\n    }\r\n\r\n    .flex { display: flex; }\r\n    .flex-wrap { flex-wrap: wrap; }\r\n    .gap-1 { gap: 0.5rem; }\r\n    .gap-2 { gap: 1rem; }\r\n\r\n    .footer {\r\n      margin-top: 2rem;\r\n      padding-top: 1rem;\r\n      border-top: 1px solid var(--border-color);\r\n      font-size: 0.85rem;\r\n      color: var(--secondary-color);\r\n      text-align: center;\r\n    }\r\n\r\n    ${customStyles}\r\n  </style>\r\n</head>\r\n<body>\r\n`;\r\n}\r\n\r\n/**\r\n * Generate HTML document footer\r\n */\r\nexport function generateHTMLFooter(standalone: boolean = true): string {\r\n  if (!standalone) {\r\n    return '</div>\\n';\r\n  }\r\n  return `\r\n  <div class=\"footer\">\r\n    Generated by DeepThinking MCP v7.1.0\r\n  </div>\r\n</body>\r\n</html>`;\r\n}\r\n\r\n/**\r\n * Escape HTML special characters\r\n */\r\nexport function escapeHTML(str: string): string {\r\n  return str\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#039;');\r\n}\r\n\r\n/**\r\n * Generate a metric card\r\n */\r\nexport function renderMetricCard(label: string, value: string | number, color?: string): string {\r\n  const colorClass = color ? ` style=\"color: var(--${color}-color)\"` : '';\r\n  return `\r\n    <div class=\"metric-card\">\r\n      <div class=\"metric-value\"${colorClass}>${escapeHTML(String(value))}</div>\r\n      <div class=\"metric-label\">${escapeHTML(label)}</div>\r\n    </div>`;\r\n}\r\n\r\n/**\r\n * Generate a progress bar\r\n */\r\nexport function renderProgressBar(percent: number, color: string = 'primary'): string {\r\n  const clampedPercent = Math.max(0, Math.min(100, percent));\r\n  return `\r\n    <div class=\"progress-bar\">\r\n      <div class=\"progress-fill\" style=\"width: ${clampedPercent}%; background: var(--${color}-color)\"></div>\r\n    </div>`;\r\n}\r\n\r\n/**\r\n * Generate a badge\r\n */\r\nexport function renderBadge(text: string, type: 'primary' | 'success' | 'warning' | 'danger' | 'info' | 'secondary' = 'primary'): string {\r\n  return `<span class=\"badge badge-${type}\">${escapeHTML(text)}</span>`;\r\n}\r\n\r\n/**\r\n * Generate a table from data\r\n */\r\nexport function renderTable(\r\n  headers: string[],\r\n  rows: (string | number)[][],\r\n  options: { caption?: string } = {}\r\n): string {\r\n  const headerCells = headers.map(h => `<th>${escapeHTML(h)}</th>`).join('');\r\n  const bodyRows = rows.map(row => {\r\n    const cells = row.map(cell => `<td>${escapeHTML(String(cell))}</td>`).join('');\r\n    return `<tr>${cells}</tr>`;\r\n  }).join('\\n');\r\n\r\n  let html = '<table>';\r\n  if (options.caption) {\r\n    html += `<caption>${escapeHTML(options.caption)}</caption>`;\r\n  }\r\n  html += `<thead><tr>${headerCells}</tr></thead>`;\r\n  html += `<tbody>${bodyRows}</tbody>`;\r\n  html += '</table>';\r\n  return html;\r\n}\r\n\r\n/**\r\n * Generate a section with header\r\n */\r\nexport function renderSection(title: string, content: string, icon?: string): string {\r\n  const iconHtml = icon ? `<span class=\"icon\">${icon}</span>` : '';\r\n  return `\r\n    <div class=\"section\">\r\n      <div class=\"section-header\">\r\n        ${iconHtml}<h3>${escapeHTML(title)}</h3>\r\n      </div>\r\n      ${content}\r\n    </div>`;\r\n}\r\n\r\n/**\r\n * Generate a list\r\n */\r\nexport function renderList(items: string[], ordered: boolean = false): string {\r\n  const tag = ordered ? 'ol' : 'ul';\r\n  const listItems = items.map(item => `<li>${escapeHTML(item)}</li>`).join('\\n');\r\n  return `<${tag} class=\"list-styled\">${listItems}</${tag}>`;\r\n}\r\n","/**\r\n * Modelica Export Utilities (v7.1.0)\r\n * Shared utilities for Modelica system modeling language export\r\n */\r\n\r\n/**\r\n * Sanitize identifier for Modelica (must start with letter, alphanumeric + underscore only)\r\n */\r\nexport function sanitizeModelicaId(id: string): string {\r\n  // Replace hyphens and spaces with underscores\r\n  let sanitized = id.replace(/[-\\s]/g, '_');\r\n  // Remove any non-alphanumeric characters except underscore\r\n  sanitized = sanitized.replace(/[^a-zA-Z0-9_]/g, '');\r\n  // Ensure it starts with a letter\r\n  if (!/^[a-zA-Z]/.test(sanitized)) {\r\n    sanitized = 'id_' + sanitized;\r\n  }\r\n  return sanitized || 'unnamed';\r\n}\r\n\r\n/**\r\n * Escape string for Modelica string literals\r\n */\r\nexport function escapeModelicaString(str: string): string {\r\n  return str\r\n    .replace(/\\\\/g, '\\\\\\\\')\r\n    .replace(/\"/g, '\\\\\"')\r\n    .replace(/\\n/g, '\\\\n')\r\n    .replace(/\\r/g, '\\\\r')\r\n    .replace(/\\t/g, '\\\\t');\r\n}\r\n\r\n/**\r\n * Modelica node type for graph structures\r\n */\r\nexport interface ModelicaNode {\r\n  id: string;\r\n  label: string;\r\n  type?: string;\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * Modelica edge type for graph structures\r\n */\r\nexport interface ModelicaEdge {\r\n  source: string;\r\n  target: string;\r\n  label?: string;\r\n  directed?: boolean;\r\n}\r\n\r\n/**\r\n * Options for Modelica generation\r\n */\r\nexport interface ModelicaOptions {\r\n  packageName?: string;\r\n  includeAnnotations?: boolean;\r\n  includeMetrics?: boolean;\r\n  version?: string;\r\n}\r\n\r\n/**\r\n * Generate Modelica package header\r\n */\r\nexport function generateModelicaPackageHeader(\r\n  name: string,\r\n  description: string,\r\n  options: ModelicaOptions = {}\r\n): string {\r\n  const packageName = options.packageName || sanitizeModelicaId(name);\r\n  const lines: string[] = [];\r\n\r\n  lines.push(`package ${packageName}`);\r\n  lines.push(`  \"${escapeModelicaString(description)}\"`);\r\n  lines.push('');\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate Modelica package footer\r\n */\r\nexport function generateModelicaPackageFooter(\r\n  name: string,\r\n  options: ModelicaOptions = {}\r\n): string {\r\n  const packageName = options.packageName || sanitizeModelicaId(name);\r\n  const lines: string[] = [];\r\n\r\n  if (options.includeAnnotations !== false) {\r\n    lines.push('  annotation(');\r\n    lines.push('    Documentation(info=\"<html>');\r\n    lines.push(`      <p>Generated by DeepThinking MCP v${options.version || '7.1.0'}</p>`);\r\n    lines.push('    </html>\"),');\r\n    lines.push('    version=\"1.0.0\"');\r\n    lines.push('  );');\r\n  }\r\n\r\n  lines.push(`end ${packageName};`);\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a Modelica record type from nodes\r\n */\r\nexport function generateModelicaRecord(\r\n  recordName: string,\r\n  description: string,\r\n  fields: Array<{ name: string; type: string; value: string; description?: string }>,\r\n  _options: ModelicaOptions = {}\r\n): string {\r\n  const lines: string[] = [];\r\n  const safeRecordName = sanitizeModelicaId(recordName);\r\n\r\n  lines.push(`  record ${safeRecordName}`);\r\n  lines.push(`    \"${escapeModelicaString(description)}\"`);\r\n  lines.push('');\r\n\r\n  for (const field of fields) {\r\n    const safeName = sanitizeModelicaId(field.name);\r\n    const desc = field.description ? ` \"${escapeModelicaString(field.description)}\"` : '';\r\n    lines.push(`    ${field.type} ${safeName} = ${field.value}${desc};`);\r\n  }\r\n\r\n  lines.push(`  end ${safeRecordName};`);\r\n  lines.push('');\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a Modelica model from graph structure\r\n */\r\nexport function generateModelicaModel(\r\n  modelName: string,\r\n  description: string,\r\n  nodes: ModelicaNode[],\r\n  edges: ModelicaEdge[],\r\n  options: ModelicaOptions = {}\r\n): string {\r\n  const lines: string[] = [];\r\n  const safeModelName = sanitizeModelicaId(modelName);\r\n\r\n  lines.push(`  model ${safeModelName}`);\r\n  lines.push(`    \"${escapeModelicaString(description)}\"`);\r\n  lines.push('');\r\n\r\n  // Node definitions as parameters\r\n  lines.push('    // Nodes');\r\n  for (const node of nodes) {\r\n    const safeId = sanitizeModelicaId(node.id);\r\n    lines.push(`    parameter String ${safeId}_label = \"${escapeModelicaString(node.label)}\";`);\r\n    if (node.type) {\r\n      lines.push(`    parameter String ${safeId}_type = \"${escapeModelicaString(node.type)}\";`);\r\n    }\r\n  }\r\n  lines.push('');\r\n\r\n  // Edge definitions as connections\r\n  if (edges.length > 0) {\r\n    lines.push('    // Connections');\r\n    for (let i = 0; i < edges.length; i++) {\r\n      const edge = edges[i];\r\n      const sourceId = sanitizeModelicaId(edge.source);\r\n      const targetId = sanitizeModelicaId(edge.target);\r\n      const label = edge.label ? ` \"${escapeModelicaString(edge.label)}\"` : '';\r\n      lines.push(`    parameter String connection_${i} = \"${sourceId} -> ${targetId}\"${label};`);\r\n    }\r\n    lines.push('');\r\n  }\r\n\r\n  if (options.includeAnnotations !== false) {\r\n    lines.push('    annotation(');\r\n    lines.push('      Documentation(info=\"<html>');\r\n    lines.push(`        <p>Nodes: ${nodes.length}</p>`);\r\n    lines.push(`        <p>Edges: ${edges.length}</p>`);\r\n    lines.push('      </html>\")');\r\n    lines.push('    );');\r\n  }\r\n\r\n  lines.push(`  end ${safeModelName};`);\r\n  lines.push('');\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a simple Modelica package for linear flow\r\n */\r\nexport function generateLinearFlowModelica(\r\n  stages: string[],\r\n  currentStage: string,\r\n  options: ModelicaOptions = {}\r\n): string {\r\n  const packageName = options.packageName || 'LinearFlow';\r\n  const lines: string[] = [];\r\n\r\n  lines.push(`package ${sanitizeModelicaId(packageName)}`);\r\n  lines.push('  \"Linear stage flow representation\"');\r\n  lines.push('');\r\n\r\n  // Stage enumeration\r\n  lines.push('  type Stage = enumeration(');\r\n  for (let i = 0; i < stages.length; i++) {\r\n    const stage = stages[i];\r\n    const comma = i < stages.length - 1 ? ',' : '';\r\n    lines.push(`    ${sanitizeModelicaId(stage)} \"${escapeModelicaString(stage)}\"${comma}`);\r\n  }\r\n  lines.push('  );');\r\n  lines.push('');\r\n\r\n  // Current stage parameter\r\n  lines.push(`  parameter Stage currentStage = Stage.${sanitizeModelicaId(currentStage)};`);\r\n  lines.push(`  final parameter Integer stageIndex = ${stages.indexOf(currentStage) + 1};`);\r\n  lines.push(`  final parameter Integer totalStages = ${stages.length};`);\r\n  lines.push(`  final parameter Real progress = stageIndex / totalStages;`);\r\n  lines.push('');\r\n\r\n  lines.push(generateModelicaPackageFooter(packageName, options));\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate Modelica for a hierarchical structure\r\n */\r\nexport function generateHierarchyModelica(\r\n  rootName: string,\r\n  rootDescription: string,\r\n  children: Array<{ name: string; description: string; score?: number }>,\r\n  options: ModelicaOptions = {}\r\n): string {\r\n  const packageName = options.packageName || sanitizeModelicaId(rootName);\r\n  const lines: string[] = [];\r\n\r\n  lines.push(`package ${packageName}`);\r\n  lines.push(`  \"${escapeModelicaString(rootDescription)}\"`);\r\n  lines.push('');\r\n\r\n  // Children as nested records\r\n  for (const child of children) {\r\n    const childId = sanitizeModelicaId(child.name);\r\n    lines.push(`  record ${childId}`);\r\n    lines.push(`    \"${escapeModelicaString(child.description)}\"`);\r\n    if (child.score !== undefined && options.includeMetrics !== false) {\r\n      lines.push(`    constant Real score = ${child.score.toFixed(3)};`);\r\n    }\r\n    lines.push(`  end ${childId};`);\r\n    lines.push('');\r\n  }\r\n\r\n  lines.push(generateModelicaPackageFooter(packageName, options));\r\n\r\n  return lines.join('\\n');\r\n}\r\n","/**\n * UML/PlantUML Export Utilities (v7.1.0)\n * Shared utilities for UML diagram export (PlantUML syntax)\n */\n\n/**\n * Sanitize identifier for PlantUML\n */\nexport function sanitizeUmlId(id: string): string {\n  // Replace non-alphanumeric with underscores\n  let sanitized = id.replace(/[^a-zA-Z0-9_]/g, '_');\n  // Ensure it starts with a letter\n  if (!/^[a-zA-Z]/.test(sanitized)) {\n    sanitized = 'id_' + sanitized;\n  }\n  return sanitized || 'unnamed';\n}\n\n/**\n * Escape string for PlantUML\n */\nexport function escapeUml(str: string): string {\n  return str\n    .replace(/\\\\/g, '\\\\\\\\')\n    .replace(/\"/g, '\\\"')\n    .replace(/\\n/g, '\\\\n')\n    .replace(/<(?![\\/#])/g, '&lt;')\n    .replace(/(?<![\\/#])>/g, '&gt;');\n}\n\n/**\n * UML node types\n */\nexport type UmlNodeShape =\n  | 'class'\n  | 'interface'\n  | 'abstract'\n  | 'entity'\n  | 'usecase'\n  | 'actor'\n  | 'component'\n  | 'node'\n  | 'database'\n  | 'rectangle'\n  | 'package'\n  | 'folder'\n  | 'cloud'\n  | 'state'\n  | 'activity';\n\n/**\n * UML node definition\n */\nexport interface UmlNode {\n  id: string;\n  label: string;\n  shape?: UmlNodeShape;\n  stereotype?: string;\n  color?: string;\n  attributes?: string[];\n  methods?: string[];\n}\n\n/**\n * UML edge types\n */\nexport type UmlEdgeType =\n  | 'association'\n  | 'dependency'\n  | 'inheritance'\n  | 'implementation'\n  | 'composition'\n  | 'aggregation'\n  | 'arrow'\n  | 'dashed';\n\n/**\n * UML edge definition\n */\nexport interface UmlEdge {\n  source: string;\n  target: string;\n  type?: UmlEdgeType;\n  label?: string;\n  sourceLabel?: string;\n  targetLabel?: string;\n}\n\n/**\n * UML diagram options\n */\nexport interface UmlOptions {\n  diagramType?: 'class' | 'component' | 'usecase' | 'activity' | 'state' | 'sequence' | 'object';\n  title?: string;\n  theme?: 'default' | 'sketchy' | 'blueprint' | 'plain';\n  direction?: 'left to right' | 'top to bottom';\n  scale?: number;\n  includeLabels?: boolean;\n  includeMetrics?: boolean;\n}\n\n/**\n * Get PlantUML arrow syntax for edge type\n */\nfunction getArrowSyntax(type?: UmlEdgeType): string {\n  switch (type) {\n    case 'dependency': return '..>';\n    case 'inheritance': return '--|>';\n    case 'implementation': return '..|>';\n    case 'composition': return '*--';\n    case 'aggregation': return 'o--';\n    case 'dashed': return '..';\n    case 'arrow': return '-->';\n    case 'association':\n    default: return '--';\n  }\n}\n\n/**\n * Generate PlantUML header\n */\nexport function generateUmlHeader(options: UmlOptions = {}): string {\n  const lines: string[] = ['@startuml'];\n\n  if (options.title) {\n    lines.push(`title ${escapeUml(options.title)}`);\n  }\n\n  if (options.theme && options.theme !== 'default') {\n    lines.push(`!theme ${options.theme}`);\n  }\n\n  if (options.direction) {\n    lines.push(options.direction === 'left to right' ? 'left to right direction' : 'top to bottom direction');\n  }\n\n  if (options.scale) {\n    lines.push(`scale ${options.scale}`);\n  }\n\n  lines.push('');\n  return lines.join('\\n');\n}\n\n/**\n * Generate PlantUML footer\n */\nexport function generateUmlFooter(): string {\n  return '@enduml\\n';\n}\n\n/**\n * Generate PlantUML node definition\n */\nexport function renderUmlNode(node: UmlNode): string {\n  const lines: string[] = [];\n  const id = sanitizeUmlId(node.id);\n  const label = node.label || node.id;\n  const shape = node.shape || 'rectangle';\n\n  switch (shape) {\n    case 'class':\n    case 'interface':\n    case 'abstract':\n      lines.push(`${shape} \"${escapeUml(label)}\" as ${id} {`);\n      if (node.attributes && node.attributes.length > 0) {\n        for (const attr of node.attributes) {\n          lines.push(`  ${escapeUml(attr)}`);\n        }\n      }\n      if (node.methods && node.methods.length > 0) {\n        lines.push('  --');\n        for (const method of node.methods) {\n          lines.push(`  ${escapeUml(method)}`);\n        }\n      }\n      lines.push('}');\n      break;\n\n    case 'usecase':\n      lines.push(`usecase \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'actor':\n      lines.push(`actor \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'component':\n      lines.push(`component \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'node':\n      lines.push(`node \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'database':\n      lines.push(`database \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'package':\n      lines.push(`package \"${escapeUml(label)}\" as ${id} {`);\n      lines.push('}');\n      break;\n\n    case 'folder':\n      lines.push(`folder \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'cloud':\n      lines.push(`cloud \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'state':\n      lines.push(`state \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'activity':\n      lines.push(`:${escapeUml(label)};`);\n      break;\n\n    case 'entity':\n      lines.push(`entity \"${escapeUml(label)}\" as ${id}`);\n      break;\n\n    case 'rectangle':\n    default:\n      if (node.stereotype) {\n        lines.push(`rectangle \"${escapeUml(label)}\" <<${escapeUml(node.stereotype)}>> as ${id}`);\n      } else {\n        lines.push(`rectangle \"${escapeUml(label)}\" as ${id}`);\n      }\n  }\n\n  // Add color if specified\n  if (node.color) {\n    const lastLine = lines.pop();\n    if (lastLine) {\n      lines.push(lastLine.replace(/}$/, '') + ` #${node.color}`);\n      if (lastLine.endsWith('}')) {\n        lines.push('}');\n      }\n    }\n  }\n\n  return lines.join('\\n');\n}\n\n/**\n * Generate PlantUML edge\n */\nexport function renderUmlEdge(edge: UmlEdge): string {\n  const sourceId = sanitizeUmlId(edge.source);\n  const targetId = sanitizeUmlId(edge.target);\n  const arrow = getArrowSyntax(edge.type);\n\n  let line = `${sourceId} ${arrow} ${targetId}`;\n\n  if (edge.label) {\n    line += ` : ${escapeUml(edge.label)}`;\n  }\n\n  return line;\n}\n\n/**\n * Generate a complete PlantUML diagram\n */\nexport function generateUmlDiagram(\n  nodes: UmlNode[],\n  edges: UmlEdge[],\n  options: UmlOptions = {}\n): string {\n  const lines: string[] = [];\n\n  lines.push(generateUmlHeader(options));\n\n  // Render nodes\n  if (nodes.length > 0) {\n    lines.push(\"' Nodes\");\n    for (const node of nodes) {\n      lines.push(renderUmlNode(node));\n    }\n    lines.push('');\n  }\n\n  // Render edges\n  if (edges.length > 0) {\n    lines.push(\"' Relationships\");\n    for (const edge of edges) {\n      lines.push(renderUmlEdge(edge));\n    }\n    lines.push('');\n  }\n\n  lines.push(generateUmlFooter());\n\n  return lines.join('\\n');\n}\n\n/**\n * Generate PlantUML class diagram\n */\nexport function generateClassDiagram(\n  classes: Array<{ name: string; attributes?: string[]; methods?: string[]; stereotype?: string }>,\n  relationships: Array<{ source: string; target: string; type?: UmlEdgeType; label?: string }>,\n  options: UmlOptions = {}\n): string {\n  const nodes: UmlNode[] = classes.map(c => ({\n    id: sanitizeUmlId(c.name),\n    label: c.name,\n    shape: 'class',\n    stereotype: c.stereotype,\n    attributes: c.attributes,\n    methods: c.methods,\n  }));\n\n  const edges: UmlEdge[] = relationships.map(r => ({\n    source: r.source,\n    target: r.target,\n    type: r.type || 'association',\n    label: r.label,\n  }));\n\n  return generateUmlDiagram(nodes, edges, { ...options, diagramType: 'class' });\n}\n\n/**\n * Generate PlantUML component diagram\n */\nexport function generateComponentDiagram(\n  components: Array<{ name: string; stereotype?: string }>,\n  dependencies: Array<{ source: string; target: string; label?: string }>,\n  options: UmlOptions = {}\n): string {\n  const nodes: UmlNode[] = components.map(c => ({\n    id: sanitizeUmlId(c.name),\n    label: c.name,\n    shape: 'component',\n    stereotype: c.stereotype,\n  }));\n\n  const edges: UmlEdge[] = dependencies.map(d => ({\n    source: d.source,\n    target: d.target,\n    type: 'dependency',\n    label: d.label,\n  }));\n\n  return generateUmlDiagram(nodes, edges, { ...options, diagramType: 'component' });\n}\n\n/**\n * Generate PlantUML activity diagram for linear flow\n */\nexport function generateActivityDiagram(\n  activities: string[],\n  currentActivity?: string,\n  options: UmlOptions = {}\n): string {\n  const lines: string[] = [];\n\n  lines.push(generateUmlHeader({ ...options, diagramType: 'activity' }));\n\n  lines.push('start');\n\n  for (const activity of activities) {\n    const isCurrent = activity === currentActivity;\n    if (isCurrent) {\n      lines.push(`#lightblue:${escapeUml(activity)};`);\n    } else {\n      lines.push(`:${escapeUml(activity)};`);\n    }\n  }\n\n  lines.push('stop');\n  lines.push('');\n\n  lines.push(generateUmlFooter());\n\n  return lines.join('\\n');\n}\n\n/**\n * Generate PlantUML state diagram\n */\nexport function generateStateDiagram(\n  states: string[],\n  transitions: Array<{ from: string; to: string; event?: string }>,\n  currentState?: string,\n  options: UmlOptions = {}\n): string {\n  const lines: string[] = [];\n\n  lines.push(generateUmlHeader({ ...options, diagramType: 'state' }));\n\n  // Define states\n  for (const state of states) {\n    const id = sanitizeUmlId(state);\n    const isCurrent = state === currentState;\n    if (isCurrent) {\n      lines.push(`state \"${escapeUml(state)}\" as ${id} #lightblue`);\n    } else {\n      lines.push(`state \"${escapeUml(state)}\" as ${id}`);\n    }\n  }\n  lines.push('');\n\n  // Initial state\n  if (states.length > 0) {\n    lines.push(`[*] --> ${sanitizeUmlId(states[0])}`);\n  }\n\n  // Transitions\n  for (const t of transitions) {\n    const label = t.event ? ` : ${escapeUml(t.event)}` : '';\n    lines.push(`${sanitizeUmlId(t.from)} --> ${sanitizeUmlId(t.to)}${label}`);\n  }\n\n  lines.push('');\n  lines.push(generateUmlFooter());\n\n  return lines.join('\\n');\n}\n\n/**\n * Generate PlantUML use case diagram\n */\nexport function generateUseCaseDiagram(\n  actors: string[],\n  useCases: string[],\n  associations: Array<{ actor: string; useCase: string }>,\n  options: UmlOptions = {}\n): string {\n  const lines: string[] = [];\n\n  lines.push(generateUmlHeader({ ...options, diagramType: 'usecase' }));\n\n  // Define actors\n  for (const actor of actors) {\n    lines.push(`actor \"${escapeUml(actor)}\" as ${sanitizeUmlId(actor)}`);\n  }\n  lines.push('');\n\n  // Define use cases\n  for (const uc of useCases) {\n    lines.push(`usecase \"${escapeUml(uc)}\" as ${sanitizeUmlId(uc)}`);\n  }\n  lines.push('');\n\n  // Associations\n  for (const assoc of associations) {\n    lines.push(`${sanitizeUmlId(assoc.actor)} --> ${sanitizeUmlId(assoc.useCase)}`);\n  }\n\n  lines.push('');\n  lines.push(generateUmlFooter());\n\n  return lines.join('\\n');\n}\n","/**\r\n * JSON Visual Export Utilities (v7.1.0)\r\n * Shared utilities for JSON-based visualization data export\r\n */\r\n\r\n/**\r\n * JSON node definition for visualization\r\n */\r\nexport interface JsonVisualNode {\r\n  id: string;\r\n  label: string;\r\n  type?: string;\r\n  x?: number;\r\n  y?: number;\r\n  width?: number;\r\n  height?: number;\r\n  color?: string;\r\n  shape?: 'rectangle' | 'ellipse' | 'diamond' | 'stadium' | 'circle';\r\n  metadata?: Record<string, unknown>;\r\n  children?: JsonVisualNode[];\r\n}\r\n\r\n/**\r\n * JSON edge definition for visualization\r\n */\r\nexport interface JsonVisualEdge {\r\n  id: string;\r\n  source: string;\r\n  target: string;\r\n  label?: string;\r\n  type?: string;\r\n  weight?: number;\r\n  style?: 'solid' | 'dashed' | 'dotted';\r\n  directed?: boolean;\r\n  metadata?: Record<string, unknown>;\r\n}\r\n\r\n/**\r\n * JSON graph structure\r\n */\r\nexport interface JsonVisualGraph {\r\n  type: string;\r\n  version: string;\r\n  metadata: {\r\n    title: string;\r\n    description?: string;\r\n    mode: string;\r\n    exportedAt: string;\r\n    generator: string;\r\n    [key: string]: unknown;\r\n  };\r\n  nodes: JsonVisualNode[];\r\n  edges: JsonVisualEdge[];\r\n  layout?: {\r\n    type: 'hierarchical' | 'force' | 'circular' | 'tree' | 'linear';\r\n    direction?: 'TB' | 'BT' | 'LR' | 'RL';\r\n  };\r\n  metrics?: Record<string, unknown>;\r\n  legend?: Array<{ label: string; color: string; shape?: string }>;\r\n}\r\n\r\n/**\r\n * Options for JSON export\r\n */\r\nexport interface JsonVisualOptions {\r\n  includeMetadata?: boolean;\r\n  includeLayout?: boolean;\r\n  includeMetrics?: boolean;\r\n  includeLegend?: boolean;\r\n  prettyPrint?: boolean;\r\n  indent?: number;\r\n}\r\n\r\n/**\r\n * Create a new JSON visual graph structure\r\n */\r\nexport function createJsonGraph(\r\n  title: string,\r\n  mode: string,\r\n  options: JsonVisualOptions = {}\r\n): JsonVisualGraph {\r\n  return {\r\n    type: 'deepthinking-visual-graph',\r\n    version: '1.0.0',\r\n    metadata: {\r\n      title,\r\n      mode,\r\n      exportedAt: new Date().toISOString(),\r\n      generator: 'DeepThinking MCP v7.1.0',\r\n    },\r\n    nodes: [],\r\n    edges: [],\r\n    layout: options.includeLayout !== false ? { type: 'hierarchical', direction: 'TB' } : undefined,\r\n    metrics: options.includeMetrics !== false ? {} : undefined,\r\n    legend: options.includeLegend !== false ? [] : undefined,\r\n  };\r\n}\r\n\r\n/**\r\n * Add a node to the graph\r\n */\r\nexport function addNode(\r\n  graph: JsonVisualGraph,\r\n  node: JsonVisualNode\r\n): void {\r\n  graph.nodes.push(node);\r\n}\r\n\r\n/**\r\n * Add an edge to the graph\r\n */\r\nexport function addEdge(\r\n  graph: JsonVisualGraph,\r\n  edge: JsonVisualEdge\r\n): void {\r\n  graph.edges.push(edge);\r\n}\r\n\r\n/**\r\n * Add metric to the graph\r\n */\r\nexport function addMetric(\r\n  graph: JsonVisualGraph,\r\n  key: string,\r\n  value: unknown\r\n): void {\r\n  if (graph.metrics) {\r\n    graph.metrics[key] = value;\r\n  }\r\n}\r\n\r\n/**\r\n * Add legend item to the graph\r\n */\r\nexport function addLegendItem(\r\n  graph: JsonVisualGraph,\r\n  label: string,\r\n  color: string,\r\n  shape?: string\r\n): void {\r\n  if (graph.legend) {\r\n    graph.legend.push({ label, color, shape });\r\n  }\r\n}\r\n\r\n/**\r\n * Serialize graph to JSON string\r\n */\r\nexport function serializeGraph(\r\n  graph: JsonVisualGraph,\r\n  options: JsonVisualOptions = {}\r\n): string {\r\n  const indent = options.prettyPrint !== false ? (options.indent || 2) : 0;\r\n  return JSON.stringify(graph, null, indent);\r\n}\r\n\r\n/**\r\n * Generate a linear flow JSON structure\r\n */\r\nexport function generateLinearFlowJson(\r\n  title: string,\r\n  mode: string,\r\n  stages: string[],\r\n  currentStage: string,\r\n  options: JsonVisualOptions = {}\r\n): string {\r\n  const graph = createJsonGraph(title, mode, options);\r\n\r\n  // Set layout for linear flow\r\n  if (graph.layout) {\r\n    graph.layout.type = 'linear';\r\n    graph.layout.direction = 'LR';\r\n  }\r\n\r\n  // Add stage nodes\r\n  for (let i = 0; i < stages.length; i++) {\r\n    const stage = stages[i];\r\n    const isCurrent = stage === currentStage;\r\n    addNode(graph, {\r\n      id: `stage_${i}`,\r\n      label: stage,\r\n      type: isCurrent ? 'current' : 'stage',\r\n      x: i * 150,\r\n      y: 0,\r\n      color: isCurrent ? '#a8d5ff' : '#e0e0e0',\r\n      shape: isCurrent ? 'stadium' : 'rectangle',\r\n    });\r\n\r\n    // Add edges between consecutive stages\r\n    if (i > 0) {\r\n      addEdge(graph, {\r\n        id: `edge_${i - 1}_${i}`,\r\n        source: `stage_${i - 1}`,\r\n        target: `stage_${i}`,\r\n        directed: true,\r\n        style: 'solid',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add metrics\r\n  if (graph.metrics) {\r\n    graph.metrics.totalStages = stages.length;\r\n    graph.metrics.currentStageIndex = stages.indexOf(currentStage);\r\n    graph.metrics.progress = (stages.indexOf(currentStage) + 1) / stages.length;\r\n  }\r\n\r\n  // Add legend\r\n  if (graph.legend) {\r\n    addLegendItem(graph, 'Current Stage', '#a8d5ff', 'stadium');\r\n    addLegendItem(graph, 'Stage', '#e0e0e0', 'rectangle');\r\n  }\r\n\r\n  return serializeGraph(graph, options);\r\n}\r\n\r\n/**\r\n * Generate a hierarchy JSON structure\r\n */\r\nexport function generateHierarchyJson(\r\n  title: string,\r\n  mode: string,\r\n  root: { label: string; metadata?: Record<string, unknown> },\r\n  children: Array<{ id: string; label: string; score?: number; metadata?: Record<string, unknown> }>,\r\n  options: JsonVisualOptions = {}\r\n): string {\r\n  const graph = createJsonGraph(title, mode, options);\r\n\r\n  // Set layout for hierarchy\r\n  if (graph.layout) {\r\n    graph.layout.type = 'tree';\r\n    graph.layout.direction = 'TB';\r\n  }\r\n\r\n  // Add root node\r\n  addNode(graph, {\r\n    id: 'root',\r\n    label: root.label,\r\n    type: 'root',\r\n    x: 0,\r\n    y: 0,\r\n    color: '#a8d5ff',\r\n    shape: 'ellipse',\r\n    metadata: root.metadata,\r\n  });\r\n\r\n  // Add child nodes\r\n  const childCount = children.length;\r\n  const spacing = 150;\r\n  const startX = -((childCount - 1) * spacing) / 2;\r\n\r\n  for (let i = 0; i < children.length; i++) {\r\n    const child = children[i];\r\n    addNode(graph, {\r\n      id: child.id,\r\n      label: child.label,\r\n      type: 'child',\r\n      x: startX + i * spacing,\r\n      y: 100,\r\n      color: '#e0e0e0',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        ...child.metadata,\r\n        score: child.score,\r\n      },\r\n    });\r\n\r\n    addEdge(graph, {\r\n      id: `edge_root_${child.id}`,\r\n      source: 'root',\r\n      target: child.id,\r\n      directed: true,\r\n      style: 'solid',\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (graph.metrics) {\r\n    graph.metrics.childCount = children.length;\r\n    if (children.some(c => c.score !== undefined)) {\r\n      graph.metrics.averageScore = children.reduce((sum, c) => sum + (c.score || 0), 0) / children.length;\r\n      graph.metrics.maxScore = Math.max(...children.map(c => c.score || 0));\r\n    }\r\n  }\r\n\r\n  return serializeGraph(graph, options);\r\n}\r\n\r\n/**\r\n * Generate a network JSON structure\r\n */\r\nexport function generateNetworkJson(\r\n  title: string,\r\n  mode: string,\r\n  nodes: Array<{ id: string; label: string; type?: string; metadata?: Record<string, unknown> }>,\r\n  edges: Array<{ source: string; target: string; label?: string; weight?: number }>,\r\n  options: JsonVisualOptions = {}\r\n): string {\r\n  const graph = createJsonGraph(title, mode, options);\r\n\r\n  // Set layout for network\r\n  if (graph.layout) {\r\n    graph.layout.type = 'force';\r\n  }\r\n\r\n  // Add nodes\r\n  for (const node of nodes) {\r\n    addNode(graph, {\r\n      id: node.id,\r\n      label: node.label,\r\n      type: node.type || 'node',\r\n      color: node.type === 'primary' ? '#a8d5ff' : '#e0e0e0',\r\n      shape: 'ellipse',\r\n      metadata: node.metadata,\r\n    });\r\n  }\r\n\r\n  // Add edges\r\n  let edgeId = 0;\r\n  for (const edge of edges) {\r\n    addEdge(graph, {\r\n      id: `edge_${edgeId++}`,\r\n      source: edge.source,\r\n      target: edge.target,\r\n      label: edge.label,\r\n      weight: edge.weight,\r\n      directed: true,\r\n      style: 'solid',\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (graph.metrics) {\r\n    graph.metrics.nodeCount = nodes.length;\r\n    graph.metrics.edgeCount = edges.length;\r\n    graph.metrics.density = nodes.length > 1\r\n      ? edges.length / (nodes.length * (nodes.length - 1))\r\n      : 0;\r\n  }\r\n\r\n  return serializeGraph(graph, options);\r\n}\r\n\r\n/**\r\n * Generate a Bayesian network JSON structure\r\n */\r\nexport function generateBayesianJson(\r\n  title: string,\r\n  prior: number,\r\n  posterior: number,\r\n  bayesFactor: number | undefined,\r\n  hypothesis: string,\r\n  evidence: string[],\r\n  options: JsonVisualOptions = {}\r\n): string {\r\n  const graph = createJsonGraph(title, 'bayesian', options);\r\n\r\n  if (graph.layout) {\r\n    graph.layout.type = 'hierarchical';\r\n    graph.layout.direction = 'TB';\r\n  }\r\n\r\n  // Add nodes\r\n  addNode(graph, {\r\n    id: 'prior',\r\n    label: `Prior: ${prior.toFixed(3)}`,\r\n    type: 'prior',\r\n    x: 0,\r\n    y: 0,\r\n    color: '#a8d5ff',\r\n    shape: 'stadium',\r\n  });\r\n\r\n  addNode(graph, {\r\n    id: 'evidence',\r\n    label: 'Evidence',\r\n    type: 'evidence',\r\n    x: 200,\r\n    y: 0,\r\n    color: '#81c784',\r\n    shape: 'rectangle',\r\n    metadata: { items: evidence },\r\n  });\r\n\r\n  addNode(graph, {\r\n    id: 'hypothesis',\r\n    label: hypothesis,\r\n    type: 'hypothesis',\r\n    x: 100,\r\n    y: 100,\r\n    color: '#e0e0e0',\r\n    shape: 'ellipse',\r\n  });\r\n\r\n  addNode(graph, {\r\n    id: 'posterior',\r\n    label: `Posterior: ${posterior.toFixed(3)}`,\r\n    type: 'posterior',\r\n    x: 100,\r\n    y: 200,\r\n    color: '#4caf50',\r\n    shape: 'stadium',\r\n  });\r\n\r\n  // Add edges\r\n  addEdge(graph, {\r\n    id: 'edge_prior_hyp',\r\n    source: 'prior',\r\n    target: 'hypothesis',\r\n    directed: true,\r\n  });\r\n\r\n  addEdge(graph, {\r\n    id: 'edge_evidence_hyp',\r\n    source: 'evidence',\r\n    target: 'hypothesis',\r\n    directed: true,\r\n  });\r\n\r\n  addEdge(graph, {\r\n    id: 'edge_hyp_post',\r\n    source: 'hypothesis',\r\n    target: 'posterior',\r\n    directed: true,\r\n  });\r\n\r\n  // Add metrics\r\n  if (graph.metrics) {\r\n    graph.metrics.prior = prior;\r\n    graph.metrics.posterior = posterior;\r\n    graph.metrics.bayesFactor = bayesFactor;\r\n    graph.metrics.evidenceCount = evidence.length;\r\n    graph.metrics.probabilityChange = posterior - prior;\r\n  }\r\n\r\n  // Add legend\r\n  if (graph.legend) {\r\n    addLegendItem(graph, 'Prior', '#a8d5ff', 'stadium');\r\n    addLegendItem(graph, 'Evidence', '#81c784', 'rectangle');\r\n    addLegendItem(graph, 'Hypothesis', '#e0e0e0', 'ellipse');\r\n    addLegendItem(graph, 'Posterior', '#4caf50', 'stadium');\r\n  }\r\n\r\n  return serializeGraph(graph, options);\r\n}\r\n\r\n/**\r\n * Generate a cause-effect JSON structure\r\n */\r\nexport function generateCausalJson(\r\n  title: string,\r\n  mode: string,\r\n  causes: Array<{ id: string; label: string; strength?: number }>,\r\n  effects: Array<{ id: string; label: string }>,\r\n  links: Array<{ cause: string; effect: string; strength?: number }>,\r\n  options: JsonVisualOptions = {}\r\n): string {\r\n  const graph = createJsonGraph(title, mode, options);\r\n\r\n  if (graph.layout) {\r\n    graph.layout.type = 'hierarchical';\r\n    graph.layout.direction = 'LR';\r\n  }\r\n\r\n  // Add cause nodes\r\n  for (let i = 0; i < causes.length; i++) {\r\n    const cause = causes[i];\r\n    addNode(graph, {\r\n      id: cause.id,\r\n      label: cause.label,\r\n      type: 'cause',\r\n      x: 0,\r\n      y: i * 80,\r\n      color: '#ffb74d',\r\n      shape: 'rectangle',\r\n      metadata: { strength: cause.strength },\r\n    });\r\n  }\r\n\r\n  // Add effect nodes\r\n  for (let i = 0; i < effects.length; i++) {\r\n    const effect = effects[i];\r\n    addNode(graph, {\r\n      id: effect.id,\r\n      label: effect.label,\r\n      type: 'effect',\r\n      x: 250,\r\n      y: i * 80,\r\n      color: '#4fc3f7',\r\n      shape: 'rectangle',\r\n    });\r\n  }\r\n\r\n  // Add causal links\r\n  let edgeId = 0;\r\n  for (const link of links) {\r\n    addEdge(graph, {\r\n      id: `causal_${edgeId++}`,\r\n      source: link.cause,\r\n      target: link.effect,\r\n      weight: link.strength,\r\n      directed: true,\r\n      style: 'solid',\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (graph.metrics) {\r\n    graph.metrics.causeCount = causes.length;\r\n    graph.metrics.effectCount = effects.length;\r\n    graph.metrics.linkCount = links.length;\r\n  }\r\n\r\n  // Add legend\r\n  if (graph.legend) {\r\n    addLegendItem(graph, 'Cause', '#ffb74d', 'rectangle');\r\n    addLegendItem(graph, 'Effect', '#4fc3f7', 'rectangle');\r\n  }\r\n\r\n  return serializeGraph(graph, options);\r\n}\r\n","/**\r\n * Markdown Export Utilities (v7.1.0)\r\n * Phase 12: Shared utilities for Markdown visual exports\r\n *\r\n * Provides reusable functions for generating Markdown exports across all modes.\r\n */\r\n\r\n/**\r\n * Markdown heading levels\r\n */\r\nexport type HeadingLevel = 1 | 2 | 3 | 4 | 5 | 6;\r\n\r\n/**\r\n * Table alignment options\r\n */\r\nexport type TableAlignment = 'left' | 'center' | 'right';\r\n\r\n/**\r\n * List style options\r\n */\r\nexport type ListStyle = 'bullet' | 'numbered' | 'checkbox' | 'checkbox-checked';\r\n\r\n/**\r\n * Generate a Markdown heading\r\n */\r\nexport function heading(text: string, level: HeadingLevel = 1): string {\r\n  const prefix = '#'.repeat(level);\r\n  return `${prefix} ${text}\\n`;\r\n}\r\n\r\n/**\r\n * Generate bold text\r\n */\r\nexport function bold(text: string): string {\r\n  return `**${text}**`;\r\n}\r\n\r\n/**\r\n * Generate italic text\r\n */\r\nexport function italic(text: string): string {\r\n  return `*${text}*`;\r\n}\r\n\r\n/**\r\n * Generate strikethrough text\r\n */\r\nexport function strikethrough(text: string): string {\r\n  return `~~${text}~~`;\r\n}\r\n\r\n/**\r\n * Generate inline code\r\n */\r\nexport function inlineCode(text: string): string {\r\n  return `\\`${text}\\``;\r\n}\r\n\r\n/**\r\n * Generate a code block\r\n */\r\nexport function codeBlock(code: string, language: string = ''): string {\r\n  return `\\`\\`\\`${language}\\n${code}\\n\\`\\`\\`\\n`;\r\n}\r\n\r\n/**\r\n * Generate a blockquote\r\n */\r\nexport function blockquote(text: string): string {\r\n  const lines = text.split('\\n');\r\n  return lines.map(line => `> ${line}`).join('\\n') + '\\n';\r\n}\r\n\r\n/**\r\n * Generate a horizontal rule\r\n */\r\nexport function horizontalRule(): string {\r\n  return '\\n---\\n\\n';\r\n}\r\n\r\n/**\r\n * Generate a link\r\n */\r\nexport function link(text: string, url: string, title?: string): string {\r\n  if (title) {\r\n    return `[${text}](${url} \"${title}\")`;\r\n  }\r\n  return `[${text}](${url})`;\r\n}\r\n\r\n/**\r\n * Generate an image\r\n */\r\nexport function image(alt: string, url: string, title?: string): string {\r\n  if (title) {\r\n    return `![${alt}](${url} \"${title}\")`;\r\n  }\r\n  return `![${alt}](${url})`;\r\n}\r\n\r\n/**\r\n * Generate a list item\r\n */\r\nexport function listItem(text: string, style: ListStyle = 'bullet', indent: number = 0): string {\r\n  const indentStr = '  '.repeat(indent);\r\n  switch (style) {\r\n    case 'numbered':\r\n      return `${indentStr}1. ${text}`;\r\n    case 'checkbox':\r\n      return `${indentStr}- [ ] ${text}`;\r\n    case 'checkbox-checked':\r\n      return `${indentStr}- [x] ${text}`;\r\n    case 'bullet':\r\n    default:\r\n      return `${indentStr}- ${text}`;\r\n  }\r\n}\r\n\r\n/**\r\n * Generate a list\r\n */\r\nexport function list(items: string[], style: ListStyle = 'bullet'): string {\r\n  return items.map((item, index) => {\r\n    if (style === 'numbered') {\r\n      return `${index + 1}. ${item}`;\r\n    }\r\n    return listItem(item, style);\r\n  }).join('\\n') + '\\n';\r\n}\r\n\r\n/**\r\n * Generate a nested list\r\n */\r\nexport function nestedList(items: Array<{ text: string; children?: string[] }>, style: ListStyle = 'bullet'): string {\r\n  const lines: string[] = [];\r\n  items.forEach((item, index) => {\r\n    if (style === 'numbered') {\r\n      lines.push(`${index + 1}. ${item.text}`);\r\n    } else {\r\n      lines.push(listItem(item.text, style));\r\n    }\r\n    if (item.children && item.children.length > 0) {\r\n      item.children.forEach(child => {\r\n        lines.push(listItem(child, style, 1));\r\n      });\r\n    }\r\n  });\r\n  return lines.join('\\n') + '\\n';\r\n}\r\n\r\n/**\r\n * Generate a table header separator based on alignment\r\n */\r\nfunction getAlignmentSeparator(alignment: TableAlignment): string {\r\n  switch (alignment) {\r\n    case 'center':\r\n      return ':---:';\r\n    case 'right':\r\n      return '---:';\r\n    case 'left':\r\n    default:\r\n      return ':---';\r\n  }\r\n}\r\n\r\n/**\r\n * Escape pipe characters in table cells\r\n */\r\nfunction escapeTableCell(text: string): string {\r\n  return text.replace(/\\|/g, '\\\\|');\r\n}\r\n\r\n/**\r\n * Generate a Markdown table\r\n */\r\nexport function table(\r\n  headers: string[],\r\n  rows: string[][],\r\n  alignments?: TableAlignment[]\r\n): string {\r\n  const aligns = alignments || headers.map(() => 'left' as TableAlignment);\r\n\r\n  // Header row\r\n  const headerRow = '| ' + headers.map(escapeTableCell).join(' | ') + ' |';\r\n\r\n  // Separator row\r\n  const separatorRow = '| ' + aligns.map(getAlignmentSeparator).join(' | ') + ' |';\r\n\r\n  // Data rows\r\n  const dataRows = rows.map(row => {\r\n    const cells = row.map(escapeTableCell);\r\n    // Pad with empty cells if needed\r\n    while (cells.length < headers.length) {\r\n      cells.push('');\r\n    }\r\n    return '| ' + cells.join(' | ') + ' |';\r\n  });\r\n\r\n  return [headerRow, separatorRow, ...dataRows].join('\\n') + '\\n';\r\n}\r\n\r\n/**\r\n * Generate a definition list (using bold terms and indented definitions)\r\n */\r\nexport function definitionList(items: Array<{ term: string; definition: string }>): string {\r\n  return items.map(item => `${bold(item.term)}\\n: ${item.definition}`).join('\\n\\n') + '\\n';\r\n}\r\n\r\n/**\r\n * Generate a task list\r\n */\r\nexport function taskList(items: Array<{ text: string; completed: boolean }>): string {\r\n  return items.map(item => listItem(item.text, item.completed ? 'checkbox-checked' : 'checkbox')).join('\\n') + '\\n';\r\n}\r\n\r\n/**\r\n * Generate a collapsible section (details/summary)\r\n */\r\nexport function collapsible(summary: string, content: string): string {\r\n  return `<details>\\n<summary>${summary}</summary>\\n\\n${content}\\n</details>\\n`;\r\n}\r\n\r\n/**\r\n * Generate a badge (GitHub-style)\r\n */\r\nexport function badge(label: string, value: string, color: string = 'blue'): string {\r\n  const encodedLabel = encodeURIComponent(label.replace(/-/g, '--'));\r\n  const encodedValue = encodeURIComponent(value.replace(/-/g, '--'));\r\n  return `![${label}](https://img.shields.io/badge/${encodedLabel}-${encodedValue}-${color})`;\r\n}\r\n\r\n/**\r\n * Generate a progress indicator\r\n */\r\nexport function progressBar(value: number, max: number = 100, width: number = 20): string {\r\n  const percentage = Math.min(100, Math.max(0, (value / max) * 100));\r\n  const filled = Math.round((percentage / 100) * width);\r\n  const empty = width - filled;\r\n  const bar = ''.repeat(filled) + ''.repeat(empty);\r\n  return `${bar} ${percentage.toFixed(0)}%`;\r\n}\r\n\r\n/**\r\n * Generate a metric display\r\n */\r\nexport function metric(name: string, value: string | number, unit?: string): string {\r\n  const valueStr = unit ? `${value} ${unit}` : String(value);\r\n  return `${bold(name)}: ${valueStr}`;\r\n}\r\n\r\n/**\r\n * Generate a key-value section\r\n */\r\nexport function keyValueSection(items: Record<string, string | number | boolean>): string {\r\n  return Object.entries(items)\r\n    .map(([key, value]) => `- ${bold(key)}: ${value}`)\r\n    .join('\\n') + '\\n';\r\n}\r\n\r\n/**\r\n * Generate a Mermaid diagram block\r\n */\r\nexport function mermaidBlock(diagram: string): string {\r\n  return codeBlock(diagram, 'mermaid');\r\n}\r\n\r\n/**\r\n * Generate a section with heading and content\r\n */\r\nexport function section(title: string, content: string, level: HeadingLevel = 2): string {\r\n  return heading(title, level) + '\\n' + content + '\\n';\r\n}\r\n\r\n/**\r\n * Generate document frontmatter (YAML)\r\n */\r\nexport function frontmatter(metadata: Record<string, string | number | boolean | string[]>): string {\r\n  const lines = ['---'];\r\n  for (const [key, value] of Object.entries(metadata)) {\r\n    if (Array.isArray(value)) {\r\n      lines.push(`${key}:`);\r\n      value.forEach(v => lines.push(`  - ${v}`));\r\n    } else {\r\n      lines.push(`${key}: ${typeof value === 'string' ? `\"${value}\"` : value}`);\r\n    }\r\n  }\r\n  lines.push('---', '');\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a complete Markdown document\r\n */\r\nexport function document(\r\n  title: string,\r\n  content: string,\r\n  options: {\r\n    includeFrontmatter?: boolean;\r\n    metadata?: Record<string, string | number | boolean | string[]>;\r\n    includeTableOfContents?: boolean;\r\n  } = {}\r\n): string {\r\n  const { includeFrontmatter = false, metadata = {}, includeTableOfContents = false } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Frontmatter\r\n  if (includeFrontmatter) {\r\n    const fm = {\r\n      title,\r\n      date: new Date().toISOString().split('T')[0],\r\n      ...metadata,\r\n    };\r\n    parts.push(frontmatter(fm));\r\n  }\r\n\r\n  // Title\r\n  parts.push(heading(title, 1));\r\n\r\n  // Table of contents placeholder\r\n  if (includeTableOfContents) {\r\n    parts.push('\\n## Table of Contents\\n\\n[TOC]\\n');\r\n  }\r\n\r\n  // Content\r\n  parts.push(content);\r\n\r\n  return parts.join('\\n');\r\n}\r\n\r\n/**\r\n * Generate a node representation for graphs\r\n */\r\nexport function graphNode(id: string, label: string, properties?: Record<string, string>): string {\r\n  let result = `- ${bold(id)}: ${label}`;\r\n  if (properties && Object.keys(properties).length > 0) {\r\n    const props = Object.entries(properties)\r\n      .map(([k, v]) => `${k}=${v}`)\r\n      .join(', ');\r\n    result += ` (${props})`;\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n * Generate an edge representation for graphs\r\n */\r\nexport function graphEdge(from: string, to: string, label?: string, directed: boolean = true): string {\r\n  const arrow = directed ? '' : '';\r\n  const labelPart = label ? ` [${label}]` : '';\r\n  return `- ${from} ${arrow} ${to}${labelPart}`;\r\n}\r\n\r\n/**\r\n * Generate a graph in Markdown format\r\n */\r\nexport function graph(\r\n  title: string,\r\n  nodes: Array<{ id: string; label: string; properties?: Record<string, string> }>,\r\n  edges: Array<{ from: string; to: string; label?: string }>,\r\n  options: { directed?: boolean } = {}\r\n): string {\r\n  const { directed = true } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  parts.push(heading(title, 3));\r\n\r\n  if (nodes.length > 0) {\r\n    parts.push(heading('Nodes', 4));\r\n    nodes.forEach(node => {\r\n      parts.push(graphNode(node.id, node.label, node.properties));\r\n    });\r\n    parts.push('');\r\n  }\r\n\r\n  if (edges.length > 0) {\r\n    parts.push(heading('Edges', 4));\r\n    edges.forEach(edge => {\r\n      parts.push(graphEdge(edge.from, edge.to, edge.label, directed));\r\n    });\r\n    parts.push('');\r\n  }\r\n\r\n  return parts.join('\\n');\r\n}\r\n\r\n/**\r\n * Escape special Markdown characters\r\n */\r\nexport function escapeMarkdown(text: string): string {\r\n  return text.replace(/([\\\\`*_{}[\\]()#+\\-.!|])/g, '\\\\$1');\r\n}\r\n\r\n/**\r\n * Truncate text with ellipsis\r\n */\r\nexport function truncate(text: string, maxLength: number = 100): string {\r\n  if (text.length <= maxLength) return text;\r\n  return text.slice(0, maxLength - 3) + '...';\r\n}\r\n","/**\r\n * Sequential Visual Exporter (v7.1.0)\r\n * Sprint 8 Task 8.1: Sequential dependency graph export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support, GraphML, TikZ\r\n * Phase 11: Refactored to use shared utility modules\r\n */\r\n\r\nimport type { SequentialThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\n// Mermaid utilities\r\nimport {\r\n  generateMermaidFlowchart,\r\n  truncateLabel,\r\n  getMermaidColor,\r\n  type MermaidNode,\r\n  type MermaidEdge,\r\n} from '../utils/mermaid.js';\r\n// DOT utilities\r\nimport {\r\n  generateDotGraph,\r\n  truncateDotLabel,\r\n  type DotNode,\r\n  type DotEdge,\r\n} from '../utils/dot.js';\r\n// ASCII utilities\r\nimport {\r\n  generateAsciiHeader,\r\n  generateAsciiSectionHeader,\r\n  generateAsciiBulletList,\r\n} from '../utils/ascii.js';\r\n// SVG utilities\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderBadge,\r\n  renderList,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateActivityDiagram,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export sequential dependency graph to visual format\r\n */\r\nexport function exportSequentialDependencyGraph(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return sequentialToMermaid(thought, colorScheme, includeLabels);\r\n    case 'dot':\r\n      return sequentialToDOT(thought, includeLabels);\r\n    case 'ascii':\r\n      return sequentialToASCII(thought);\r\n    case 'svg':\r\n      return sequentialToSVG(thought, options);\r\n    case 'graphml':\r\n      return sequentialToGraphML(thought, options);\r\n    case 'tikz':\r\n      return sequentialToTikZ(thought, options);\r\n    case 'html':\r\n      return sequentialToHTML(thought, options);\r\n    case 'modelica':\r\n      return sequentialToModelica(thought, options);\r\n    case 'uml':\r\n      return sequentialToUML(thought, options);\r\n    case 'json':\r\n      return sequentialToJSON(thought, options);\r\n    case 'markdown':\r\n      return sequentialToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction sequentialToMermaid(\r\n  thought: SequentialThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean\r\n): string {\r\n  const scheme = colorScheme as 'default' | 'pastel' | 'monochrome';\r\n  const nodes: MermaidNode[] = [];\r\n  const edges: MermaidEdge[] = [];\r\n\r\n  // Current thought node\r\n  const nodeId = sanitizeId(thought.id);\r\n  const label = includeLabels ? truncateLabel(thought.content, 50) : nodeId;\r\n\r\n  nodes.push({\r\n    id: nodeId,\r\n    label,\r\n    shape: thought.isRevision ? 'hexagon' : 'stadium',\r\n    style: colorScheme !== 'monochrome' ? {\r\n      fill: thought.isRevision\r\n        ? getMermaidColor('warning', scheme)\r\n        : getMermaidColor('primary', scheme),\r\n    } : undefined,\r\n  });\r\n\r\n  // Dependencies\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    for (const depId of thought.buildUpon) {\r\n      const depNodeId = sanitizeId(depId);\r\n      nodes.push({\r\n        id: depNodeId,\r\n        label: depNodeId,\r\n        shape: 'rectangle',\r\n      });\r\n      edges.push({\r\n        source: depNodeId,\r\n        target: nodeId,\r\n        style: 'arrow',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Branch relationship\r\n  if (thought.branchFrom) {\r\n    const branchId = sanitizeId(thought.branchFrom);\r\n    edges.push({\r\n      source: branchId,\r\n      target: nodeId,\r\n      style: 'dotted',\r\n      label: 'branch',\r\n    });\r\n  }\r\n\r\n  // Revision relationship\r\n  if (thought.revisesThought) {\r\n    const revisedId = sanitizeId(thought.revisesThought);\r\n    edges.push({\r\n      source: revisedId,\r\n      target: nodeId,\r\n      style: 'thick',\r\n      label: 'revises',\r\n    });\r\n  }\r\n\r\n  return generateMermaidFlowchart(nodes, edges, { direction: 'TD', colorScheme: scheme });\r\n}\r\n\r\nfunction sequentialToDOT(thought: SequentialThought, includeLabels: boolean): string {\r\n  const nodes: DotNode[] = [];\r\n  const edges: DotEdge[] = [];\r\n\r\n  // Current thought node\r\n  const nodeId = sanitizeId(thought.id);\r\n  const label = includeLabels ? truncateDotLabel(thought.content, 50) : nodeId;\r\n\r\n  nodes.push({\r\n    id: nodeId,\r\n    label,\r\n    shape: thought.isRevision ? 'hexagon' : 'box',\r\n    style: ['rounded', 'filled'],\r\n    fillColor: thought.isRevision ? '#ffd699' : '#a8d5ff',\r\n  });\r\n\r\n  // Dependencies\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    for (const depId of thought.buildUpon) {\r\n      const depNodeId = sanitizeId(depId);\r\n      nodes.push({\r\n        id: depNodeId,\r\n        label: depNodeId,\r\n        shape: 'box',\r\n        style: 'rounded',\r\n      });\r\n      edges.push({\r\n        source: depNodeId,\r\n        target: nodeId,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Branch relationship\r\n  if (thought.branchFrom) {\r\n    const branchId = sanitizeId(thought.branchFrom);\r\n    edges.push({\r\n      source: branchId,\r\n      target: nodeId,\r\n      style: 'dashed',\r\n      label: 'branch',\r\n    });\r\n  }\r\n\r\n  // Revision relationship\r\n  if (thought.revisesThought) {\r\n    const revisedId = sanitizeId(thought.revisesThought);\r\n    edges.push({\r\n      source: revisedId,\r\n      target: nodeId,\r\n      style: 'bold',\r\n      label: 'revises',\r\n    });\r\n  }\r\n\r\n  return generateDotGraph(nodes, edges, {\r\n    graphName: 'SequentialDependency',\r\n    rankDir: 'TB',\r\n    nodeDefaults: { shape: 'box', style: 'rounded' },\r\n  });\r\n}\r\n\r\nfunction sequentialToASCII(thought: SequentialThought): string {\r\n  const lines: string[] = [];\r\n\r\n  // Title\r\n  lines.push(generateAsciiHeader('Sequential Dependency Graph', 'equals'));\r\n  lines.push('');\r\n\r\n  // Current thought\r\n  lines.push(`Current Thought: ${thought.id}`);\r\n  lines.push(`Content: ${thought.content.substring(0, 100)}...`);\r\n  lines.push('');\r\n\r\n  // Dependencies\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    lines.push(generateAsciiSectionHeader('Builds Upon'));\r\n    lines.push(generateAsciiBulletList(\r\n      thought.buildUpon.map(depId => ` ${depId}`),\r\n      'asciiBullet',\r\n      0\r\n    ));\r\n    lines.push('');\r\n  }\r\n\r\n  // Branch info\r\n  if (thought.branchFrom) {\r\n    lines.push(generateAsciiSectionHeader('Branch Information'));\r\n    lines.push(`  Branches From: ${thought.branchFrom}`);\r\n    if (thought.branchId) {\r\n      lines.push(`  Branch ID: ${thought.branchId}`);\r\n    }\r\n    lines.push('');\r\n  }\r\n\r\n  // Revision info\r\n  if (thought.revisesThought) {\r\n    lines.push(generateAsciiSectionHeader('Revision Information'));\r\n    lines.push(`  Revises: ${thought.revisesThought}`);\r\n    if (thought.revisionReason) {\r\n      lines.push(`  Reason: ${thought.revisionReason}`);\r\n    }\r\n    lines.push('');\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Export sequential dependency graph to native SVG format\r\n */\r\nfunction sequentialToSVG(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n  } = options;\r\n\r\n  const nodeWidth = 160;\r\n  const nodeHeight = 50;\r\n  const padding = 40;\r\n  const verticalSpacing = 80;\r\n\r\n  // Build node positions\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  let currentY = padding + 40;\r\n\r\n  // Main thought node\r\n  const mainNodeId = sanitizeId(thought.id);\r\n  const mainLabel = includeLabels ? thought.content.substring(0, 40) + '...' : mainNodeId;\r\n\r\n  // Position dependencies first\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    const depWidth = thought.buildUpon.length * (nodeWidth + 20) - 20;\r\n    let startX = (svgWidth - depWidth) / 2;\r\n\r\n    for (const depId of thought.buildUpon) {\r\n      const depNodeId = sanitizeId(depId);\r\n      positions.set(depId, {\r\n        id: depId,\r\n        x: startX,\r\n        y: currentY,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        label: depNodeId,\r\n        type: 'dependency',\r\n      });\r\n      startX += nodeWidth + 20;\r\n    }\r\n    currentY += nodeHeight + verticalSpacing;\r\n  }\r\n\r\n  // Main node\r\n  positions.set(thought.id, {\r\n    id: thought.id,\r\n    x: (svgWidth - nodeWidth) / 2,\r\n    y: currentY,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    label: mainLabel,\r\n    type: thought.isRevision ? 'revision' : 'main',\r\n  });\r\n  currentY += nodeHeight + padding;\r\n\r\n  const actualHeight = currentY + 80;\r\n\r\n  let svg = generateSVGHeader(svgWidth, actualHeight, 'Sequential Dependency Graph');\r\n\r\n  // Render edges\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  if (thought.buildUpon) {\r\n    for (const depId of thought.buildUpon) {\r\n      const fromPos = positions.get(depId);\r\n      const toPos = positions.get(thought.id);\r\n      if (fromPos && toPos) {\r\n        svg += renderEdge(fromPos, toPos, {});\r\n      }\r\n    }\r\n  }\r\n  if (thought.branchFrom) {\r\n    const branchLabel = 'branch';\r\n    svg += `\\n    <text x=\"${svgWidth / 2 - 100}\" y=\"${padding + 20}\" class=\"edge-label\">${branchLabel} from: ${thought.branchFrom}</text>`;\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n  for (const [, pos] of positions) {\r\n    const colors = pos.type === 'revision'\r\n      ? getNodeColor('warning', colorScheme)\r\n      : pos.type === 'main'\r\n        ? getNodeColor('primary', colorScheme)\r\n        : getNodeColor('neutral', colorScheme);\r\n\r\n    if (pos.type === 'main' || pos.type === 'revision') {\r\n      svg += renderStadiumNode(pos, colors);\r\n    } else {\r\n      svg += renderRectNode(pos, colors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Current', color: getNodeColor('primary', colorScheme) },\r\n    { label: 'Revision', color: getNodeColor('warning', colorScheme) },\r\n    { label: 'Dependency', color: getNodeColor('neutral', colorScheme) },\r\n  ];\r\n  svg += renderLegend(20, actualHeight - 80, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export sequential dependency graph to GraphML format\r\n */\r\nfunction sequentialToGraphML(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  // Build nodes from thought dependencies (buildUpon) and current thought\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n\r\n  // If thought has buildUpon dependencies, use them to create a sequential chain\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    // Add dependency nodes\r\n    thought.buildUpon.forEach((depId, index) => {\r\n      nodes.push({\r\n        id: sanitizeId(depId),\r\n        label: includeLabels ? `Step ${index + 1}: ${depId}` : sanitizeId(depId),\r\n        type: 'dependency',\r\n      });\r\n    });\r\n\r\n    // Add current thought as final node\r\n    nodes.push({\r\n      id: sanitizeId(thought.id),\r\n      label: includeLabels ? `Step ${nodes.length + 1}: ${thought.content.substring(0, 50)}...` : sanitizeId(thought.id),\r\n      type: 'current',\r\n    });\r\n\r\n    // Create edges linking sequential steps\r\n    thought.buildUpon.forEach((depId, index) => {\r\n      const sourceId = sanitizeId(depId);\r\n      const targetId = index < thought.buildUpon!.length - 1\r\n        ? sanitizeId(thought.buildUpon![index + 1])\r\n        : sanitizeId(thought.id);\r\n\r\n      edges.push({\r\n        id: `e${index}`,\r\n        source: sourceId,\r\n        target: targetId,\r\n        directed: true,\r\n      });\r\n    });\r\n  } else {\r\n    // Handle empty case - just show the current thought\r\n    nodes.push({\r\n      id: sanitizeId(thought.id),\r\n      label: includeLabels ? thought.content.substring(0, 100) : sanitizeId(thought.id),\r\n      type: 'current',\r\n    });\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Sequential Dependency Graph',\r\n    directed: true,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export sequential dependency graph to TikZ format\r\n */\r\nfunction sequentialToTikZ(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, colorScheme = 'default' } = options;\r\n\r\n  // Build nodes from thought dependencies (buildUpon) and current thought\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n\r\n  // If thought has buildUpon dependencies, use them to create a sequential chain\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    // Add dependency nodes (completed steps)\r\n    thought.buildUpon.forEach((depId, index) => {\r\n      nodes.push({\r\n        id: sanitizeId(depId),\r\n        label: includeLabels ? `Step ${index + 1}` : sanitizeId(depId),\r\n        x: index * 3,\r\n        y: 0,\r\n        type: 'success', // Completed steps\r\n        shape: 'rectangle',\r\n      });\r\n    });\r\n\r\n    // Add current thought as final node (current step)\r\n    nodes.push({\r\n      id: sanitizeId(thought.id),\r\n      label: includeLabels ? `Step ${nodes.length + 1}` : sanitizeId(thought.id),\r\n      x: nodes.length * 3,\r\n      y: 0,\r\n      type: 'primary', // Current step\r\n      shape: 'rectangle',\r\n    });\r\n\r\n    // Create edges between consecutive steps\r\n    thought.buildUpon.forEach((depId, index) => {\r\n      const sourceId = sanitizeId(depId);\r\n      const targetId = index < thought.buildUpon!.length - 1\r\n        ? sanitizeId(thought.buildUpon![index + 1])\r\n        : sanitizeId(thought.id);\r\n\r\n      edges.push({\r\n        source: sourceId,\r\n        target: targetId,\r\n        directed: true,\r\n      });\r\n    });\r\n  } else {\r\n    // Handle empty case - just show the current thought\r\n    nodes.push({\r\n      id: sanitizeId(thought.id),\r\n      label: includeLabels ? 'Current' : sanitizeId(thought.id),\r\n      x: 0,\r\n      y: 0,\r\n      type: 'primary',\r\n      shape: 'rectangle',\r\n    });\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Sequential Dependency Graph',\r\n    colorScheme,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export sequential dependency graph to HTML format\r\n */\r\nfunction sequentialToHTML(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Sequential Thinking Analysis',\r\n    htmlTheme = 'light',\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Metrics\r\n  html += '<div class=\"metrics-grid\">';\r\n  html += renderMetricCard('Thought #', thought.thoughtNumber, 'primary');\r\n  html += renderMetricCard('Total', thought.totalThoughts, 'info');\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    html += renderMetricCard('Dependencies', thought.buildUpon.length, 'secondary');\r\n  }\r\n  html += '</div>\\n';\r\n\r\n  // Current thought\r\n  const badges = [];\r\n  if (thought.isRevision) badges.push(renderBadge('Revision', 'warning'));\r\n  if (thought.branchFrom) badges.push(renderBadge('Branched', 'info'));\r\n\r\n  html += renderSection('Current Thought', `\r\n    <div class=\"flex gap-1\" style=\"margin-bottom: 0.5rem\">${badges.join(' ')}</div>\r\n    <p>${escapeHTML(thought.content)}</p>\r\n    ${thought.nextThoughtNeeded ? '<p class=\"text-info\">More thoughts needed...</p>' : '<p class=\"text-success\">Reasoning complete.</p>'}\r\n  `, '');\r\n\r\n  // Dependencies\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    html += renderSection('Builds Upon', renderList(thought.buildUpon), '');\r\n  }\r\n\r\n  // Branch info\r\n  if (thought.branchFrom) {\r\n    html += renderSection('Branch Information', `\r\n      <p><strong>Branched from:</strong> ${escapeHTML(thought.branchFrom)}</p>\r\n      ${thought.branchId ? `<p><strong>Branch ID:</strong> ${escapeHTML(thought.branchId)}</p>` : ''}\r\n    `, '');\r\n  }\r\n\r\n  // Revision info\r\n  if (thought.isRevision && thought.revisesThought) {\r\n    html += renderSection('Revision Information', `\r\n      <p><strong>Revises:</strong> ${escapeHTML(thought.revisesThought)}</p>\r\n      ${thought.revisionReason ? `<p><strong>Reason:</strong> ${escapeHTML(thought.revisionReason)}</p>` : ''}\r\n    `, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export sequential dependency graph to Modelica format\r\n */\r\nfunction sequentialToModelica(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const { modelicaPackageName, modelicaIncludeAnnotations = true } = options;\r\n  const packageName = modelicaPackageName || 'SequentialDependency';\r\n  const lines: string[] = [];\r\n\r\n  lines.push(`package ${sanitizeModelicaId(packageName)}`);\r\n  lines.push(`  \"Sequential dependency graph for thought ${sanitizeId(thought.id)}\"`);\r\n  lines.push('');\r\n\r\n  // Current thought\r\n  lines.push('  record CurrentThought');\r\n  lines.push(`    constant String id = \"${sanitizeModelicaId(thought.id)}\";`);\r\n  lines.push(`    constant Integer thoughtNumber = ${thought.thoughtNumber};`);\r\n  lines.push(`    constant Integer totalThoughts = ${thought.totalThoughts};`);\r\n  lines.push(`    constant Boolean isRevision = ${thought.isRevision || false};`);\r\n  lines.push(`    constant Boolean nextThoughtNeeded = ${thought.nextThoughtNeeded};`);\r\n  lines.push('  end CurrentThought;');\r\n  lines.push('');\r\n\r\n  // Dependencies\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    lines.push('  // Dependencies');\r\n    lines.push('  type Dependency = enumeration(');\r\n    for (let i = 0; i < thought.buildUpon.length; i++) {\r\n      const dep = thought.buildUpon[i];\r\n      const comma = i < thought.buildUpon.length - 1 ? ',' : '';\r\n      lines.push(`    ${sanitizeModelicaId(dep)} \"${escapeModelicaString(dep)}\"${comma}`);\r\n    }\r\n    lines.push('  );');\r\n    lines.push('');\r\n  }\r\n\r\n  // Branch info\r\n  if (thought.branchFrom) {\r\n    lines.push('  record BranchInfo');\r\n    lines.push(`    constant String branchFrom = \"${sanitizeModelicaId(thought.branchFrom)}\";`);\r\n    if (thought.branchId) {\r\n      lines.push(`    constant String branchId = \"${sanitizeModelicaId(thought.branchId)}\";`);\r\n    }\r\n    lines.push('  end BranchInfo;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Revision info\r\n  if (thought.revisesThought) {\r\n    lines.push('  record RevisionInfo');\r\n    lines.push(`    constant String revisesThought = \"${sanitizeModelicaId(thought.revisesThought)}\";`);\r\n    if (thought.revisionReason) {\r\n      lines.push(`    constant String revisionReason = \"${escapeModelicaString(thought.revisionReason)}\";`);\r\n    }\r\n    lines.push('  end RevisionInfo;');\r\n    lines.push('');\r\n  }\r\n\r\n  if (modelicaIncludeAnnotations) {\r\n    lines.push('  annotation(');\r\n    lines.push('    Documentation(info=\"<html>');\r\n    lines.push('      <p>Generated by DeepThinking MCP v7.1.0</p>');\r\n    lines.push('    </html>\")');\r\n    lines.push('  );');\r\n  }\r\n\r\n  lines.push(`end ${sanitizeModelicaId(packageName)};`);\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Export sequential dependency graph to UML/PlantUML format\r\n */\r\nfunction sequentialToUML(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const { umlTheme, umlDirection } = options;\r\n\r\n  // Build activity list from dependencies + current thought\r\n  const activities: string[] = [];\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    for (const dep of thought.buildUpon) {\r\n      activities.push(dep);\r\n    }\r\n  }\r\n  activities.push(thought.content.substring(0, 50) + '...');\r\n\r\n  return generateActivityDiagram(activities, thought.content.substring(0, 50) + '...', {\r\n    title: 'Sequential Dependency Graph',\r\n    theme: umlTheme,\r\n    direction: umlDirection,\r\n  });\r\n}\r\n\r\n/**\r\n * Export sequential dependency graph to JSON format\r\n */\r\nfunction sequentialToJSON(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const { jsonPrettyPrint = true, jsonIndent = 2, includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph('Sequential Dependency Graph', 'sequential', {\r\n    prettyPrint: jsonPrettyPrint,\r\n    indent: jsonIndent,\r\n    includeMetrics,\r\n  });\r\n\r\n  // Add dependency nodes\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    for (let i = 0; i < thought.buildUpon.length; i++) {\r\n      const dep = thought.buildUpon[i];\r\n      addNode(graph, {\r\n        id: sanitizeId(dep),\r\n        label: dep,\r\n        type: 'dependency',\r\n        x: i * 150,\r\n        y: 0,\r\n        color: '#e0e0e0',\r\n        shape: 'rectangle',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add current thought node\r\n  addNode(graph, {\r\n    id: sanitizeId(thought.id),\r\n    label: thought.content.substring(0, 50) + '...',\r\n    type: thought.isRevision ? 'revision' : 'current',\r\n    x: (thought.buildUpon?.length || 0) * 75,\r\n    y: 100,\r\n    color: thought.isRevision ? '#ffd699' : '#a8d5ff',\r\n    shape: 'stadium',\r\n    metadata: {\r\n      thoughtNumber: thought.thoughtNumber,\r\n      totalThoughts: thought.totalThoughts,\r\n      isRevision: thought.isRevision,\r\n      nextThoughtNeeded: thought.nextThoughtNeeded,\r\n    },\r\n  });\r\n\r\n  // Add edges from dependencies to current thought\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    for (let i = 0; i < thought.buildUpon.length; i++) {\r\n      const dep = thought.buildUpon[i];\r\n      addEdge(graph, {\r\n        id: `edge_${i}`,\r\n        source: sanitizeId(dep),\r\n        target: sanitizeId(thought.id),\r\n        directed: true,\r\n        style: 'solid',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics && graph.metrics) {\r\n    addMetric(graph, 'thoughtNumber', thought.thoughtNumber);\r\n    addMetric(graph, 'totalThoughts', thought.totalThoughts);\r\n    addMetric(graph, 'dependencyCount', thought.buildUpon?.length || 0);\r\n    addMetric(graph, 'isRevision', thought.isRevision || false);\r\n    addMetric(graph, 'nextThoughtNeeded', thought.nextThoughtNeeded);\r\n  }\r\n\r\n  return serializeGraph(graph, { prettyPrint: jsonPrettyPrint, indent: jsonIndent });\r\n}\r\n\r\n/**\r\n * Export sequential dependency graph to Markdown format\r\n */\r\nfunction sequentialToMarkdown(thought: SequentialThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Overview section\r\n  const overviewContent = keyValueSection({\r\n    'Thought Number': `${thought.thoughtNumber} of ${thought.totalThoughts}`,\r\n    'Status': thought.nextThoughtNeeded ? 'In Progress' : 'Complete',\r\n    'Revision': thought.isRevision ? 'Yes' : 'No',\r\n  });\r\n  parts.push(section('Overview', overviewContent));\r\n\r\n  // Current thought content\r\n  parts.push(section('Current Thought', thought.content));\r\n\r\n  // Dependencies\r\n  if (thought.buildUpon && thought.buildUpon.length > 0) {\r\n    parts.push(section('Dependencies (Builds Upon)', list(thought.buildUpon)));\r\n  }\r\n\r\n  // Branch information\r\n  if (thought.branchFrom) {\r\n    const branchContent = keyValueSection({\r\n      'Branched From': thought.branchFrom,\r\n      ...(thought.branchId ? { 'Branch ID': thought.branchId } : {}),\r\n    });\r\n    parts.push(section('Branch Information', branchContent));\r\n  }\r\n\r\n  // Revision information\r\n  if (thought.isRevision && thought.revisesThought) {\r\n    const revisionContent = keyValueSection({\r\n      'Revises': thought.revisesThought,\r\n      ...(thought.revisionReason ? { 'Reason': thought.revisionReason } : {}),\r\n    });\r\n    parts.push(section('Revision Information', revisionContent));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = sequentialToMermaid(thought, 'default', true);\r\n    parts.push(section('Dependency Graph', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Sequential Dependency Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'sequential',\r\n      thoughtNumber: thought.thoughtNumber,\r\n      totalThoughts: thought.totalThoughts,\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Shannon Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Shannon stage flow export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { ShannonThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderStadiumNode,\r\n  renderHorizontalEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  layoutNodesHorizontally,\r\n  DEFAULT_SVG_OPTIONS,\r\n} from '../utils/svg.js';\r\nimport {\r\n  createLinearGraphML,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  type TikZNode,\r\n  type TikZEdge,\r\n  generateTikZ,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderList,\r\n  renderProgressBar,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  generateLinearFlowModelica,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateActivityDiagram,\r\n} from '../utils/uml.js';\r\nimport {\r\n  generateLinearFlowJson,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  list,\r\n  keyValueSection,\r\n  progressBar,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export Shannon stage flow diagram to visual format\r\n */\r\nexport function exportShannonStageFlow(thought: ShannonThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return shannonToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return shannonToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return shannonToASCII(thought);\r\n    case 'svg':\r\n      return shannonToSVG(thought, options);\r\n    case 'graphml':\r\n      return shannonToGraphML(thought, options);\r\n    case 'tikz':\r\n      return shannonToTikZ(thought, options);\r\n    case 'html':\r\n      return shannonToHTML(thought, options);\r\n    case 'modelica':\r\n      return shannonToModelica(thought, options);\r\n    case 'uml':\r\n      return shannonToUML(thought, options);\r\n    case 'json':\r\n      return shannonToJSON(thought, options);\r\n    case 'markdown':\r\n      return shannonToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nconst stages = [\r\n  'problem_definition',\r\n  'constraints',\r\n  'model',\r\n  'proof',\r\n  'implementation'\r\n];\r\n\r\nconst stageLabels: Record<string, string> = {\r\n  problem_definition: 'Problem Definition',\r\n  constraints: 'Constraints',\r\n  model: 'Model',\r\n  proof: 'Proof',\r\n  implementation: 'Implementation'\r\n};\r\n\r\nfunction shannonToMermaid(\r\n  thought: ShannonThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph LR\\n';\r\n\r\n  for (let i = 0; i < stages.length; i++) {\r\n    const stage = stages[i];\r\n    const stageId = sanitizeId(stage);\r\n    const label = includeLabels ? stageLabels[stage] : stageId;\r\n\r\n    mermaid += `  ${stageId}[\"${label}\"]\\n`;\r\n\r\n    if (i < stages.length - 1) {\r\n      const nextStageId = sanitizeId(stages[i + 1]);\r\n      mermaid += `  ${stageId} --> ${nextStageId}\\n`;\r\n    }\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const currentStageId = sanitizeId(thought.stage);\r\n    const color = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    mermaid += `  style ${currentStageId} fill:${color},stroke:#333,stroke-width:3px\\n`;\r\n  }\r\n\r\n  if (includeMetrics && thought.uncertainty !== undefined) {\r\n    mermaid += `\\n  uncertainty[\"Uncertainty: ${thought.uncertainty.toFixed(2)}\"]\\n`;\r\n    mermaid += `  uncertainty -.-> ${sanitizeId(thought.stage)}\\n`;\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction shannonToDOT(\r\n  thought: ShannonThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph ShannonStageFlow {\\n';\r\n  dot += '  rankdir=LR;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  for (let i = 0; i < stages.length; i++) {\r\n    const stage = stages[i];\r\n    const stageId = sanitizeId(stage);\r\n    const label = includeLabels ? stageLabels[stage] : stageId;\r\n\r\n    const isCurrent = stage === thought.stage;\r\n    const style = isCurrent ? ', style=filled, fillcolor=lightblue' : '';\r\n\r\n    dot += `  ${stageId} [label=\"${label}\"${style}];\\n`;\r\n\r\n    if (i < stages.length - 1) {\r\n      const nextStageId = sanitizeId(stages[i + 1]);\r\n      dot += `  ${stageId} -> ${nextStageId};\\n`;\r\n    }\r\n  }\r\n\r\n  if (includeMetrics && thought.uncertainty !== undefined) {\r\n    dot += `\\n  uncertainty [label=\"Uncertainty: ${thought.uncertainty.toFixed(2)}\", shape=ellipse];\\n`;\r\n    dot += `  uncertainty -> ${sanitizeId(thought.stage)} [style=dashed];\\n`;\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction shannonToASCII(thought: ShannonThought): string {\r\n  let ascii = 'Shannon Stage Flow:\\n';\r\n  ascii += '===================\\n\\n';\r\n\r\n  ascii += 'Flow: ';\r\n  for (let i = 0; i < stages.length; i++) {\r\n    const stage = stages[i];\r\n    const isCurrent = stage === thought.stage;\r\n\r\n    if (isCurrent) {\r\n      ascii += `[${stageLabels[stage]}]`;\r\n    } else {\r\n      ascii += stageLabels[stage];\r\n    }\r\n\r\n    if (i < stages.length - 1) {\r\n      ascii += '  ';\r\n    }\r\n  }\r\n\r\n  ascii += '\\n\\n';\r\n  ascii += `Current Stage: ${stageLabels[thought.stage]}\\n`;\r\n  ascii += `Uncertainty: ${thought.uncertainty.toFixed(2)}\\n`;\r\n\r\n  if (thought.dependencies && thought.dependencies.length > 0) {\r\n    ascii += '\\nDependencies:\\n';\r\n    for (const dep of thought.dependencies) {\r\n      ascii += `   ${dep}\\n`;\r\n    }\r\n  }\r\n\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    ascii += '\\nAssumptions:\\n';\r\n    for (const assumption of thought.assumptions) {\r\n      ascii += `   ${assumption}\\n`;\r\n    }\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export Shannon stage flow to native SVG format\r\n */\r\nfunction shannonToSVG(thought: ShannonThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = 300,\r\n  } = options;\r\n\r\n  // Create nodes from stages\r\n  const nodes = stages.map(stage => ({\r\n    id: sanitizeId(stage),\r\n    label: includeLabels ? stageLabels[stage] : sanitizeId(stage),\r\n    type: stage === thought.stage ? 'current' : 'stage',\r\n  }));\r\n\r\n  const positions = layoutNodesHorizontally(nodes, {\r\n    width: svgWidth,\r\n    height: svgHeight,\r\n    nodeWidth: 130,\r\n    nodeHeight: 45,\r\n    nodeSpacing: 25,\r\n  });\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Shannon Stage Flow');\r\n\r\n  // Render edges between consecutive stages\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  for (let i = 0; i < stages.length - 1; i++) {\r\n    const fromPos = positions.get(sanitizeId(stages[i]));\r\n    const toPos = positions.get(sanitizeId(stages[i + 1]));\r\n    if (fromPos && toPos) {\r\n      svg += renderHorizontalEdge(fromPos, toPos, {});\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n  for (let i = 0; i < stages.length; i++) {\r\n    const stage = stages[i];\r\n    const pos = positions.get(sanitizeId(stage));\r\n    if (pos) {\r\n      const isCurrent = stage === thought.stage;\r\n      const colors = isCurrent\r\n        ? getNodeColor('primary', colorScheme)\r\n        : getNodeColor('neutral', colorScheme);\r\n\r\n      if (isCurrent) {\r\n        svg += renderStadiumNode(pos, colors);\r\n      } else {\r\n        svg += renderRectNode(pos, colors);\r\n      }\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics\r\n  if (includeMetrics && thought.uncertainty !== undefined) {\r\n    const metrics = [\r\n      { label: 'Stage', value: stageLabels[thought.stage] },\r\n      { label: 'Uncertainty', value: thought.uncertainty.toFixed(2) },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 80, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Current', color: getNodeColor('primary', colorScheme) },\r\n    { label: 'Stage', color: getNodeColor('neutral', colorScheme) },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 60, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export Shannon stage flow to GraphML format\r\n */\r\nfunction shannonToGraphML(_thought: ShannonThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  // Create labels from stageLabels\r\n  const labels = stages.map(stage =>\r\n    includeLabels ? stageLabels[stage] : sanitizeId(stage)\r\n  );\r\n\r\n  return createLinearGraphML(labels, {\r\n    graphName: 'Shannon Stage Flow',\r\n    directed: true\r\n  });\r\n}\r\n\r\n/**\r\n * Export Shannon stage flow to TikZ format\r\n */\r\nfunction shannonToTikZ(thought: ShannonThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  // Create TikZ nodes with horizontal spacing\r\n  const nodes: TikZNode[] = stages.map((stage, i) => ({\r\n    id: sanitizeId(stage),\r\n    label: includeLabels ? stageLabels[stage] : sanitizeId(stage),\r\n    x: i * 3,\r\n    y: 0,\r\n    shape: stage === thought.stage ? 'stadium' : 'rectangle',\r\n    type: stage === thought.stage ? 'primary' : 'neutral',\r\n  }));\r\n\r\n  // Create edges between consecutive stages\r\n  const edges: TikZEdge[] = [];\r\n  for (let i = 0; i < stages.length - 1; i++) {\r\n    edges.push({\r\n      source: sanitizeId(stages[i]),\r\n      target: sanitizeId(stages[i + 1]),\r\n      label: '',\r\n    });\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Shannon Stage Flow',\r\n    includeLabels,\r\n    includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export Shannon stage flow to HTML format\r\n */\r\nfunction shannonToHTML(thought: ShannonThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Shannon Problem-Solving Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    const stageIndex = stages.indexOf(thought.stage);\r\n    const progress = ((stageIndex + 1) / stages.length) * 100;\r\n\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Current Stage', stageLabels[thought.stage], 'primary');\r\n    html += renderMetricCard('Uncertainty', thought.uncertainty.toFixed(2), 'info');\r\n    html += renderMetricCard('Progress', `${progress.toFixed(0)}%`, 'success');\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Stage flow visualization\r\n  html += renderSection('Stage Flow', `\r\n    <div style=\"display: flex; align-items: center; gap: 0.5rem; flex-wrap: wrap; margin: 1rem 0;\">\r\n      ${stages.map(stage => {\r\n        const isCurrent = stage === thought.stage;\r\n        const badge = renderBadge(stageLabels[stage], isCurrent ? 'primary' : 'secondary');\r\n        return badge;\r\n      }).join('  ')}\r\n    </div>\r\n    ${renderProgressBar((stages.indexOf(thought.stage) + 1) / stages.length * 100, 'primary')}\r\n  `, '');\r\n\r\n  // Current stage\r\n  html += renderSection('Current Stage', `\r\n    <p><strong>${stageLabels[thought.stage]}</strong></p>\r\n    <p class=\"text-secondary\">Uncertainty: ${(thought.uncertainty * 100).toFixed(0)}%</p>\r\n  `, '');\r\n\r\n  // Dependencies\r\n  if (thought.dependencies && thought.dependencies.length > 0) {\r\n    html += renderSection('Dependencies', renderList(thought.dependencies), '');\r\n  }\r\n\r\n  // Assumptions\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    html += renderSection('Assumptions', renderList(thought.assumptions), '');\r\n  }\r\n\r\n  // Known limitations\r\n  if (thought.knownLimitations && thought.knownLimitations.length > 0) {\r\n    html += renderSection('Known Limitations', renderList(thought.knownLimitations), '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export Shannon stage flow to Modelica format\r\n */\r\nfunction shannonToModelica(thought: ShannonThought, options: VisualExportOptions): string {\r\n  const { modelicaPackageName, modelicaIncludeAnnotations = true, includeMetrics = true } = options;\r\n  const stageLabelsArray = stages.map(s => stageLabels[s]);\r\n\r\n  // Use the shared linear flow generator\r\n  let modelica = generateLinearFlowModelica(stageLabelsArray, stageLabels[thought.stage], {\r\n    packageName: modelicaPackageName || 'ShannonStageFlow',\r\n    includeAnnotations: modelicaIncludeAnnotations,\r\n    includeMetrics,\r\n  });\r\n\r\n  // Add uncertainty metric if available\r\n  if (includeMetrics && thought.uncertainty !== undefined) {\r\n    // Insert before package footer\r\n    const insertPoint = modelica.lastIndexOf('end ');\r\n    const metricsSection = `\r\n  // Shannon-specific metrics\r\n  parameter Real uncertainty = ${thought.uncertainty.toFixed(3)} \"Current uncertainty level\";\r\n\r\n`;\r\n    modelica = modelica.slice(0, insertPoint) + metricsSection + modelica.slice(insertPoint);\r\n  }\r\n\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export Shannon stage flow to UML/PlantUML format\r\n */\r\nfunction shannonToUML(thought: ShannonThought, options: VisualExportOptions): string {\r\n  const { umlTheme, umlDirection } = options;\r\n  const stageLabelsArray = stages.map(s => stageLabels[s]);\r\n\r\n  return generateActivityDiagram(stageLabelsArray, stageLabels[thought.stage], {\r\n    title: 'Shannon Stage Flow',\r\n    theme: umlTheme,\r\n    direction: umlDirection,\r\n  });\r\n}\r\n\r\n/**\r\n * Export Shannon stage flow to JSON format\r\n */\r\nfunction shannonToJSON(thought: ShannonThought, options: VisualExportOptions): string {\r\n  const { jsonPrettyPrint = true, jsonIndent = 2, includeMetrics = true } = options;\r\n  const stageLabelsArray = stages.map(s => stageLabels[s]);\r\n\r\n  let json = generateLinearFlowJson('Shannon Stage Flow', 'shannon', stageLabelsArray, stageLabels[thought.stage], {\r\n    prettyPrint: jsonPrettyPrint,\r\n    indent: jsonIndent,\r\n    includeMetrics,\r\n  });\r\n\r\n  // Parse, add custom fields, and re-serialize\r\n  if (includeMetrics) {\r\n    const graph = JSON.parse(json);\r\n    graph.metadata.mode = 'shannon';\r\n    graph.metrics = graph.metrics || {};\r\n    graph.metrics.uncertainty = thought.uncertainty;\r\n    graph.metrics.stage = thought.stage;\r\n    if (thought.dependencies) {\r\n      graph.metrics.dependencyCount = thought.dependencies.length;\r\n    }\r\n    if (thought.assumptions) {\r\n      graph.metrics.assumptionCount = thought.assumptions.length;\r\n    }\r\n    json = JSON.stringify(graph, null, jsonPrettyPrint !== false ? jsonIndent : 0);\r\n  }\r\n\r\n  return json;\r\n}\r\n\r\n/**\r\n * Export Shannon stage flow to Markdown format\r\n */\r\nfunction shannonToMarkdown(thought: ShannonThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    const stageIndex = stages.indexOf(thought.stage);\r\n    const progress = ((stageIndex + 1) / stages.length) * 100;\r\n\r\n    const metricsContent = keyValueSection({\r\n      'Current Stage': stageLabels[thought.stage],\r\n      'Uncertainty': thought.uncertainty.toFixed(2),\r\n      'Progress': `${progress.toFixed(0)}%`,\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Stage flow\r\n  const stageFlow = stages.map(stage => {\r\n    const isCurrent = stage === thought.stage;\r\n    return isCurrent ? `**[${stageLabels[stage]}]**` : stageLabels[stage];\r\n  }).join('  ');\r\n\r\n  const stageIndex = stages.indexOf(thought.stage);\r\n  const progressPct = ((stageIndex + 1) / stages.length) * 100;\r\n\r\n  parts.push(section('Stage Flow', `${stageFlow}\\n\\n${progressBar(progressPct)}`));\r\n\r\n  // Current stage details\r\n  parts.push(section('Current Stage', `**${stageLabels[thought.stage]}**\\n\\nUncertainty: ${(thought.uncertainty * 100).toFixed(0)}%`));\r\n\r\n  // Dependencies\r\n  if (thought.dependencies && thought.dependencies.length > 0) {\r\n    parts.push(section('Dependencies', list(thought.dependencies)));\r\n  }\r\n\r\n  // Assumptions\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    parts.push(section('Assumptions', list(thought.assumptions)));\r\n  }\r\n\r\n  // Known limitations\r\n  if (thought.knownLimitations && thought.knownLimitations.length > 0) {\r\n    parts.push(section('Known Limitations', list(thought.knownLimitations)));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = shannonToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Stage Flow Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Shannon Problem-Solving Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'shannon',\r\n      stage: thought.stage,\r\n      uncertainty: thought.uncertainty,\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Mathematics Visual Exporter (v7.0.3)\r\n * Phase 7 Sprint 2: Mathematics reasoning export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support, GraphML, TikZ\r\n */\r\n\r\nimport type { MathematicsThought } from '../../../types/modes/mathematics.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderBadge,\r\n  renderProgressBar,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export mathematics reasoning to visual format\r\n */\r\nexport function exportMathematicsDerivation(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return mathematicsToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return mathematicsToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return mathematicsToASCII(thought);\r\n    case 'svg':\r\n      return mathematicsToSVG(thought, options);\r\n    case 'graphml':\r\n      return mathematicsToGraphML(thought, options);\r\n    case 'tikz':\r\n      return mathematicsToTikZ(thought, options);\r\n    case 'html':\r\n      return mathematicsToHTML(thought, options);\r\n    case 'modelica':\r\n      return mathematicsToModelica(thought, options);\r\n    case 'uml':\r\n      return mathematicsToUML(thought, options);\r\n    case 'json':\r\n      return mathematicsToJSON(thought, options);\r\n    case 'markdown':\r\n      return mathematicsToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction mathematicsToMermaid(\r\n  thought: MathematicsThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TB\\n';\r\n\r\n  // Add thought type node\r\n  const typeId = sanitizeId(`type_${thought.thoughtType || 'proof'}`);\r\n  const typeLabel = includeLabels ? (thought.thoughtType || 'Proof').replace(/_/g, ' ') : typeId;\r\n  mermaid += `  ${typeId}[[\"${typeLabel}\"]]\\n`;\r\n\r\n  // Add proof strategy if present\r\n  if (thought.proofStrategy) {\r\n    const strategyId = sanitizeId('strategy');\r\n    const strategyLabel = thought.proofStrategy.type;\r\n    mermaid += `  ${strategyId}([\"${strategyLabel}\"])\\n`;\r\n    mermaid += `  ${typeId} --> ${strategyId}\\n`;\r\n\r\n    // Add proof steps\r\n    let prevStepId = strategyId;\r\n    thought.proofStrategy.steps.forEach((step, index) => {\r\n      const stepId = sanitizeId(`step_${index}`);\r\n      const stepLabel = includeLabels ? step.slice(0, 40) + (step.length > 40 ? '...' : '') : `Step ${index + 1}`;\r\n      mermaid += `  ${stepId}[\"${stepLabel}\"]\\n`;\r\n      mermaid += `  ${prevStepId} --> ${stepId}\\n`;\r\n      prevStepId = stepId;\r\n    });\r\n\r\n    // Add completeness metric\r\n    if (includeMetrics) {\r\n      const completenessId = sanitizeId('completeness');\r\n      const completenessLabel = `Completeness: ${(thought.proofStrategy.completeness * 100).toFixed(0)}%`;\r\n      mermaid += `  ${completenessId}{{${completenessLabel}}}\\n`;\r\n      mermaid += `  ${prevStepId} --> ${completenessId}\\n`;\r\n    }\r\n  }\r\n\r\n  // Add mathematical model if present\r\n  if (thought.mathematicalModel) {\r\n    const modelId = sanitizeId('model');\r\n    const modelLabel = thought.mathematicalModel.symbolic || 'Mathematical Model';\r\n    mermaid += `  ${modelId}[\"${modelLabel}\"]\\n`;\r\n    mermaid += `  ${typeId} --> ${modelId}\\n`;\r\n  }\r\n\r\n  // Add theorems if present\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    thought.theorems.forEach((theorem, index) => {\r\n      const theoremId = sanitizeId(`theorem_${index}`);\r\n      const theoremLabel = theorem.name || `Theorem ${index + 1}`;\r\n      mermaid += `  ${theoremId}[/\"${theoremLabel}\"/]\\n`;\r\n      mermaid += `  ${typeId} --> ${theoremId}\\n`;\r\n    });\r\n  }\r\n\r\n  // Add assumptions as notes\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    const assumptionsId = sanitizeId('assumptions');\r\n    mermaid += `  ${assumptionsId}>\"Assumptions: ${thought.assumptions.length}\"]\\n`;\r\n  }\r\n\r\n  // Color scheme\r\n  if (colorScheme !== 'monochrome') {\r\n    const colors = colorScheme === 'pastel'\r\n      ? { type: '#e8f4e8', strategy: '#fff3e0', step: '#e3f2fd' }\r\n      : { type: '#90EE90', strategy: '#FFD700', step: '#87CEEB' };\r\n\r\n    mermaid += `\\n  style ${typeId} fill:${colors.type}\\n`;\r\n    if (thought.proofStrategy) {\r\n      mermaid += `  style ${sanitizeId('strategy')} fill:${colors.strategy}\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction mathematicsToDOT(\r\n  thought: MathematicsThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph MathematicsDerivation {\\n';\r\n  dot += '  rankdir=TB;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  // Add thought type node\r\n  const typeId = sanitizeId(`type_${thought.thoughtType || 'proof'}`);\r\n  const typeLabel = includeLabels ? (thought.thoughtType || 'Proof').replace(/_/g, ' ') : typeId;\r\n  dot += `  ${typeId} [label=\"${typeLabel}\", shape=doubleoctagon];\\n`;\r\n\r\n  // Add proof strategy\r\n  if (thought.proofStrategy) {\r\n    const strategyId = sanitizeId('strategy');\r\n    dot += `  ${strategyId} [label=\"${thought.proofStrategy.type}\", shape=ellipse];\\n`;\r\n    dot += `  ${typeId} -> ${strategyId};\\n`;\r\n\r\n    // Add steps\r\n    let prevStepId = strategyId;\r\n    thought.proofStrategy.steps.forEach((step, index) => {\r\n      const stepId = sanitizeId(`step_${index}`);\r\n      const stepLabel = includeLabels ? step.slice(0, 30).replace(/\"/g, '\\\\\"') : `Step ${index + 1}`;\r\n      dot += `  ${stepId} [label=\"${stepLabel}\"];\\n`;\r\n      dot += `  ${prevStepId} -> ${stepId};\\n`;\r\n      prevStepId = stepId;\r\n    });\r\n\r\n    if (includeMetrics) {\r\n      const completenessId = sanitizeId('completeness');\r\n      dot += `  ${completenessId} [label=\"${(thought.proofStrategy.completeness * 100).toFixed(0)}%\", shape=diamond];\\n`;\r\n      dot += `  ${prevStepId} -> ${completenessId};\\n`;\r\n    }\r\n  }\r\n\r\n  // Add theorems\r\n  if (thought.theorems) {\r\n    thought.theorems.forEach((theorem, index) => {\r\n      const theoremId = sanitizeId(`theorem_${index}`);\r\n      dot += `  ${theoremId} [label=\"${theorem.name || `Theorem ${index + 1}`}\", shape=parallelogram];\\n`;\r\n      dot += `  ${typeId} -> ${theoremId};\\n`;\r\n    });\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction mathematicsToASCII(thought: MathematicsThought): string {\r\n  let ascii = 'Mathematics Derivation:\\n';\r\n  ascii += '=======================\\n\\n';\r\n\r\n  // Thought type\r\n  ascii += `Type: ${(thought.thoughtType || 'proof').replace(/_/g, ' ')}\\n`;\r\n  ascii += `Uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%\\n\\n`;\r\n\r\n  // Mathematical model\r\n  if (thought.mathematicalModel) {\r\n    ascii += 'Mathematical Model:\\n';\r\n    ascii += `  LaTeX: ${thought.mathematicalModel.latex}\\n`;\r\n    ascii += `  Symbolic: ${thought.mathematicalModel.symbolic}\\n`;\r\n    if (thought.mathematicalModel.ascii) {\r\n      ascii += `  ASCII: ${thought.mathematicalModel.ascii}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  // Proof strategy\r\n  if (thought.proofStrategy) {\r\n    ascii += `Proof Strategy: ${thought.proofStrategy.type}\\n`;\r\n    ascii += `Completeness: ${(thought.proofStrategy.completeness * 100).toFixed(0)}%\\n`;\r\n    ascii += 'Steps:\\n';\r\n    thought.proofStrategy.steps.forEach((step, index) => {\r\n      ascii += `  ${index + 1}. ${step}\\n`;\r\n    });\r\n    if (thought.proofStrategy.baseCase) {\r\n      ascii += `Base Case: ${thought.proofStrategy.baseCase}\\n`;\r\n    }\r\n    if (thought.proofStrategy.inductiveStep) {\r\n      ascii += `Inductive Step: ${thought.proofStrategy.inductiveStep}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  // Theorems\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    ascii += 'Theorems:\\n';\r\n    thought.theorems.forEach((theorem, index) => {\r\n      ascii += `  [${index + 1}] ${theorem.name}: ${theorem.statement}\\n`;\r\n      if (theorem.hypotheses.length > 0) {\r\n        ascii += `      Hypotheses: ${theorem.hypotheses.join(', ')}\\n`;\r\n      }\r\n      ascii += `      Conclusion: ${theorem.conclusion}\\n`;\r\n    });\r\n    ascii += '\\n';\r\n  }\r\n\r\n  // Assumptions\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    ascii += 'Assumptions:\\n';\r\n    thought.assumptions.forEach((assumption, index) => {\r\n      ascii += `  ${index + 1}. ${assumption}\\n`;\r\n    });\r\n    ascii += '\\n';\r\n  }\r\n\r\n  // Dependencies\r\n  if (thought.dependencies && thought.dependencies.length > 0) {\r\n    ascii += 'Dependencies:\\n';\r\n    thought.dependencies.forEach((dep, index) => {\r\n      ascii += `  ${index + 1}. ${dep}\\n`;\r\n    });\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export mathematics reasoning to native SVG format\r\n */\r\nfunction mathematicsToSVG(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n  let currentY = 80;\r\n\r\n  // Thought type at the top\r\n  const typeId = 'type';\r\n  positions.set(typeId, {\r\n    id: typeId,\r\n    label: includeLabels ? (thought.thoughtType || 'Proof').replace(/_/g, ' ') : typeId,\r\n    x: svgWidth / 2,\r\n    y: currentY,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    type: 'type',\r\n  });\r\n  currentY += 120;\r\n\r\n  // Proof strategy if present\r\n  if (thought.proofStrategy) {\r\n    positions.set('strategy', {\r\n      id: 'strategy',\r\n      label: thought.proofStrategy.type,\r\n      x: svgWidth / 2,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'strategy',\r\n    });\r\n    currentY += 100;\r\n\r\n    // Proof steps\r\n    thought.proofStrategy.steps.forEach((step, index) => {\r\n      const stepId = `step_${index}`;\r\n      positions.set(stepId, {\r\n        id: stepId,\r\n        label: includeLabels ? `${index + 1}. ${step.substring(0, 25)}...` : `Step ${index + 1}`,\r\n        x: 150 + (index % 3) * 200,\r\n        y: currentY + Math.floor(index / 3) * 80,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        type: 'step',\r\n      });\r\n    });\r\n    currentY += Math.ceil(thought.proofStrategy.steps.length / 3) * 80 + 40;\r\n  }\r\n\r\n  // Theorems if present\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    thought.theorems.forEach((theorem, index) => {\r\n      const theoremId = `theorem_${index}`;\r\n      positions.set(theoremId, {\r\n        id: theoremId,\r\n        label: theorem.name || `Theorem ${index + 1}`,\r\n        x: svgWidth / 2,\r\n        y: currentY,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        type: 'theorem',\r\n      });\r\n      currentY += 80;\r\n    });\r\n  }\r\n\r\n  const actualHeight = Math.max(DEFAULT_SVG_OPTIONS.height, currentY + 100);\r\n\r\n  let svg = generateSVGHeader(svgWidth, actualHeight, 'Mathematics Derivation');\r\n\r\n  // Render edges\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n\r\n  // Edge from type to strategy\r\n  if (thought.proofStrategy) {\r\n    const typePos = positions.get('type');\r\n    const strategyPos = positions.get('strategy');\r\n    if (typePos && strategyPos) {\r\n      svg += renderEdge(typePos, strategyPos);\r\n    }\r\n\r\n    // Edges from strategy to steps\r\n    const stratPos = positions.get('strategy');\r\n    thought.proofStrategy.steps.forEach((_, index) => {\r\n      const stepPos = positions.get(`step_${index}`);\r\n      if (stratPos && stepPos) {\r\n        svg += renderEdge(stratPos, stepPos);\r\n      }\r\n    });\r\n  }\r\n\r\n  // Edges from type to theorems\r\n  if (thought.theorems) {\r\n    const typePos = positions.get('type');\r\n    thought.theorems.forEach((_, index) => {\r\n      const theoremPos = positions.get(`theorem_${index}`);\r\n      if (typePos && theoremPos) {\r\n        svg += renderEdge(typePos, theoremPos);\r\n      }\r\n    });\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  const typeColors = getNodeColor('primary', colorScheme);\r\n  const strategyColors = getNodeColor('secondary', colorScheme);\r\n  const stepColors = getNodeColor('neutral', colorScheme);\r\n  const theoremColors = getNodeColor('tertiary', colorScheme);\r\n\r\n  for (const [, pos] of positions) {\r\n    if (pos.type === 'type') {\r\n      svg += renderStadiumNode(pos, typeColors);\r\n    } else if (pos.type === 'strategy') {\r\n      svg += renderEllipseNode(pos, strategyColors);\r\n    } else if (pos.type === 'step') {\r\n      svg += renderRectNode(pos, stepColors);\r\n    } else if (pos.type === 'theorem') {\r\n      svg += renderRectNode(pos, theoremColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Uncertainty', value: `${(thought.uncertainty * 100).toFixed(1)}%` },\r\n      { label: 'Theorems', value: thought.theorems?.length || 0 },\r\n      { label: 'Assumptions', value: thought.assumptions?.length || 0 },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, actualHeight - 110, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Type', color: typeColors, shape: 'stadium' as const },\r\n    { label: 'Strategy', color: strategyColors, shape: 'ellipse' as const },\r\n    { label: 'Step', color: stepColors },\r\n    { label: 'Theorem', color: theoremColors },\r\n  ];\r\n  svg += renderLegend(20, actualHeight - 130, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export mathematics reasoning to GraphML format\r\n */\r\nfunction mathematicsToGraphML(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeCount = 0;\r\n\r\n  // Add thought type as root node\r\n  const typeId = sanitizeId(`type_${thought.thoughtType || 'proof'}`);\r\n  nodes.push({\r\n    id: typeId,\r\n    label: includeLabels ? (thought.thoughtType || 'Proof').replace(/_/g, ' ') : typeId,\r\n    type: 'type',\r\n  });\r\n\r\n  // Add theorems/axioms if present\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    thought.theorems.forEach((theorem, index) => {\r\n      const theoremId = sanitizeId(`theorem_${index}`);\r\n      nodes.push({\r\n        id: theoremId,\r\n        label: theorem.name || `Theorem ${index + 1}`,\r\n        type: 'axiom',\r\n        metadata: {\r\n          description: theorem.statement,\r\n        },\r\n      });\r\n\r\n      // Connect type to theorems\r\n      edges.push({\r\n        id: `e${edgeCount++}`,\r\n        source: typeId,\r\n        target: theoremId,\r\n        directed: true,\r\n      });\r\n    });\r\n  }\r\n\r\n  // Add proof strategy with derivation steps\r\n  if (thought.proofStrategy) {\r\n    const strategyId = sanitizeId('strategy');\r\n    nodes.push({\r\n      id: strategyId,\r\n      label: thought.proofStrategy.type,\r\n      type: 'strategy',\r\n    });\r\n\r\n    edges.push({\r\n      id: `e${edgeCount++}`,\r\n      source: typeId,\r\n      target: strategyId,\r\n      directed: true,\r\n    });\r\n\r\n    // Add proof steps as derivation nodes\r\n    let prevStepId = strategyId;\r\n    thought.proofStrategy.steps.forEach((step, index) => {\r\n      const stepId = sanitizeId(`step_${index}`);\r\n      nodes.push({\r\n        id: stepId,\r\n        label: includeLabels ? step.slice(0, 40) + (step.length > 40 ? '...' : '') : `Step ${index + 1}`,\r\n        type: 'step',\r\n        metadata: {\r\n          description: step,\r\n        },\r\n      });\r\n\r\n      edges.push({\r\n        id: `e${edgeCount++}`,\r\n        source: prevStepId,\r\n        target: stepId,\r\n        directed: true,\r\n      });\r\n\r\n      prevStepId = stepId;\r\n    });\r\n  }\r\n\r\n  // Add mathematical model if present\r\n  if (thought.mathematicalModel) {\r\n    const modelId = sanitizeId('model');\r\n    nodes.push({\r\n      id: modelId,\r\n      label: thought.mathematicalModel.symbolic || 'Mathematical Model',\r\n      type: 'model',\r\n      metadata: {\r\n        description: thought.mathematicalModel.latex,\r\n      },\r\n    });\r\n\r\n    edges.push({\r\n      id: `e${edgeCount++}`,\r\n      source: typeId,\r\n      target: modelId,\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Mathematics Derivation',\r\n    directed: true,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export mathematics reasoning to TikZ format\r\n */\r\nfunction mathematicsToTikZ(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, colorScheme = 'default' } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n  let yPos = 0;\r\n\r\n  // Add thought type as root node (stadium shape for axioms/theorems)\r\n  const typeId = sanitizeId(`type_${thought.thoughtType || 'proof'}`);\r\n  nodes.push({\r\n    id: typeId,\r\n    label: includeLabels ? (thought.thoughtType || 'Proof').replace(/_/g, ' ') : typeId,\r\n    x: 4,\r\n    y: yPos,\r\n    type: 'primary',\r\n    shape: 'stadium',\r\n  });\r\n  yPos -= 2;\r\n\r\n  // Add theorems/axioms if present (stadium shapes)\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    thought.theorems.forEach((theorem, index) => {\r\n      const theoremId = sanitizeId(`theorem_${index}`);\r\n      const xPos = 1 + index * 3;\r\n      nodes.push({\r\n        id: theoremId,\r\n        label: theorem.name || `Theorem ${index + 1}`,\r\n        x: xPos,\r\n        y: yPos,\r\n        type: 'secondary',\r\n        shape: 'stadium',\r\n      });\r\n\r\n      edges.push({\r\n        source: typeId,\r\n        target: theoremId,\r\n        directed: true,\r\n      });\r\n    });\r\n    yPos -= 2;\r\n  }\r\n\r\n  // Add proof strategy with derivation steps (rectangles for steps)\r\n  if (thought.proofStrategy) {\r\n    const strategyId = sanitizeId('strategy');\r\n    nodes.push({\r\n      id: strategyId,\r\n      label: thought.proofStrategy.type,\r\n      x: 4,\r\n      y: yPos,\r\n      type: 'secondary',\r\n      shape: 'ellipse',\r\n    });\r\n\r\n    edges.push({\r\n      source: typeId,\r\n      target: strategyId,\r\n      directed: true,\r\n    });\r\n\r\n    yPos -= 2;\r\n\r\n    // Add proof steps as derivation nodes (rectangles)\r\n    let prevStepId = strategyId;\r\n    thought.proofStrategy.steps.forEach((step, index) => {\r\n      const stepId = sanitizeId(`step_${index}`);\r\n      const xPos = 1 + (index % 3) * 2.5;\r\n      const stepYPos = yPos - Math.floor(index / 3) * 1.5;\r\n\r\n      nodes.push({\r\n        id: stepId,\r\n        label: includeLabels ? `${index + 1}. ${step.substring(0, 20)}...` : `Step ${index + 1}`,\r\n        x: xPos,\r\n        y: stepYPos,\r\n        type: 'neutral',\r\n        shape: 'rectangle',\r\n      });\r\n\r\n      edges.push({\r\n        source: prevStepId,\r\n        target: stepId,\r\n        directed: true,\r\n      });\r\n\r\n      prevStepId = stepId;\r\n    });\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Mathematics Derivation',\r\n    colorScheme,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export mathematics reasoning to HTML format\r\n */\r\nfunction mathematicsToHTML(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Mathematics Derivation Analysis',\r\n    htmlTheme = 'light',\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Metrics\r\n  html += '<div class=\"metrics-grid\">';\r\n  html += renderMetricCard('Uncertainty', `${(thought.uncertainty * 100).toFixed(1)}%`, 'warning');\r\n  if (thought.theorems) {\r\n    html += renderMetricCard('Theorems', thought.theorems.length, 'primary');\r\n  }\r\n  if (thought.assumptions) {\r\n    html += renderMetricCard('Assumptions', thought.assumptions.length, 'info');\r\n  }\r\n  if (thought.proofStrategy) {\r\n    html += renderMetricCard('Completeness', `${(thought.proofStrategy.completeness * 100).toFixed(0)}%`, 'success');\r\n  }\r\n  html += '</div>\\n';\r\n\r\n  // Thought type badge\r\n  const badges = [];\r\n  if (thought.thoughtType) {\r\n    badges.push(renderBadge(thought.thoughtType.replace(/_/g, ' '), 'primary'));\r\n  }\r\n\r\n  if (badges.length > 0) {\r\n    html += `<div class=\"flex gap-1\" style=\"margin: 1rem 0\">${badges.join(' ')}</div>\\n`;\r\n  }\r\n\r\n  // Mathematical model\r\n  if (thought.mathematicalModel) {\r\n    const modelContent = `\r\n      <p><strong>LaTeX:</strong> <code>${escapeHTML(thought.mathematicalModel.latex)}</code></p>\r\n      <p><strong>Symbolic:</strong> <code>${escapeHTML(thought.mathematicalModel.symbolic)}</code></p>\r\n      ${thought.mathematicalModel.ascii ? `<p><strong>ASCII:</strong> <code>${escapeHTML(thought.mathematicalModel.ascii)}</code></p>` : ''}\r\n    `;\r\n    html += renderSection('Mathematical Model', modelContent, '');\r\n  }\r\n\r\n  // Proof strategy\r\n  if (thought.proofStrategy) {\r\n    const proofContent = `\r\n      <p><strong>Type:</strong> ${renderBadge(thought.proofStrategy.type, 'info')}</p>\r\n      <p><strong>Completeness:</strong></p>\r\n      ${renderProgressBar(thought.proofStrategy.completeness * 100, 'success')}\r\n      <p style=\"margin-top: 1rem\"><strong>Steps:</strong></p>\r\n      <ol class=\"list-styled\">\r\n        ${thought.proofStrategy.steps.map(step => `<li>${escapeHTML(step)}</li>`).join('')}\r\n      </ol>\r\n      ${thought.proofStrategy.baseCase ? `<p><strong>Base Case:</strong> ${escapeHTML(thought.proofStrategy.baseCase)}</p>` : ''}\r\n      ${thought.proofStrategy.inductiveStep ? `<p><strong>Inductive Step:</strong> ${escapeHTML(thought.proofStrategy.inductiveStep)}</p>` : ''}\r\n    `;\r\n    html += renderSection('Proof Strategy', proofContent, '');\r\n  }\r\n\r\n  // Theorems\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    const theoremsContent = thought.theorems.map((theorem, index) => `\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">${escapeHTML(theorem.name || `Theorem ${index + 1}`)}</div>\r\n        <p><strong>Statement:</strong> ${escapeHTML(theorem.statement)}</p>\r\n        ${theorem.hypotheses.length > 0 ? `<p><strong>Hypotheses:</strong> ${escapeHTML(theorem.hypotheses.join(', '))}</p>` : ''}\r\n        <p><strong>Conclusion:</strong> ${escapeHTML(theorem.conclusion)}</p>\r\n      </div>\r\n    `).join('');\r\n    html += renderSection('Theorems', theoremsContent, '');\r\n  }\r\n\r\n  // Assumptions\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    const assumptionsList = thought.assumptions.map(a => escapeHTML(a));\r\n    html += renderSection('Assumptions', `\r\n      <ul class=\"list-styled\">\r\n        ${assumptionsList.map(a => `<li>${a}</li>`).join('')}\r\n      </ul>\r\n    `, '');\r\n  }\r\n\r\n  // Dependencies\r\n  if (thought.dependencies && thought.dependencies.length > 0) {\r\n    const depsList = thought.dependencies.map(d => escapeHTML(d));\r\n    html += renderSection('Dependencies', `\r\n      <ul class=\"list-styled\">\r\n        ${depsList.map(d => `<li>${d}</li>`).join('')}\r\n      </ul>\r\n    `, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export mathematics reasoning to Modelica format\r\n */\r\nfunction mathematicsToModelica(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  let modelica = '// Mathematics Derivation Model\\n';\r\n  modelica += `package MathematicsDerivation \"${thought.thoughtType || 'Proof'}\"\\n`;\r\n  modelica += '  \"Mathematical derivation and proof structure\"\\n\\n';\r\n\r\n  // Add mathematical constants and parameters\r\n  modelica += '  // Mathematical Model\\n';\r\n  if (thought.mathematicalModel) {\r\n    const modelName = sanitizeModelicaId('MathModel');\r\n    modelica += `  model ${modelName} \"Mathematical Expression\"\\n`;\r\n    modelica += `    parameter String latex = \"${escapeModelicaString(thought.mathematicalModel.latex)}\";\\n`;\r\n    modelica += `    parameter String symbolic = \"${escapeModelicaString(thought.mathematicalModel.symbolic)}\";\\n`;\r\n    if (thought.mathematicalModel.ascii) {\r\n      modelica += `    parameter String ascii = \"${escapeModelicaString(thought.mathematicalModel.ascii)}\";\\n`;\r\n    }\r\n    modelica += `  end ${modelName};\\n\\n`;\r\n  }\r\n\r\n  // Add theorems as models\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    modelica += '  // Theorems\\n';\r\n    thought.theorems.forEach((theorem, index) => {\r\n      const theoremName = sanitizeModelicaId(theorem.name || `Theorem${index + 1}`);\r\n      modelica += `  model ${theoremName} \"Theorem ${index + 1}\"\\n`;\r\n      modelica += `    parameter String statement = \"${escapeModelicaString(theorem.statement)}\";\\n`;\r\n      if (theorem.hypotheses.length > 0) {\r\n        theorem.hypotheses.forEach((hyp, hypIndex) => {\r\n          modelica += `    parameter String hypothesis${hypIndex + 1} = \"${escapeModelicaString(hyp)}\";\\n`;\r\n        });\r\n      }\r\n      modelica += `    parameter String conclusion = \"${escapeModelicaString(theorem.conclusion)}\";\\n`;\r\n      modelica += `  end ${theoremName};\\n\\n`;\r\n    });\r\n  }\r\n\r\n  // Add proof strategy as a model with derivation steps\r\n  if (thought.proofStrategy) {\r\n    const strategyName = sanitizeModelicaId(thought.proofStrategy.type.replace(/\\s+/g, '_'));\r\n    modelica += '  // Proof Strategy\\n';\r\n    modelica += `  model ${strategyName} \"Proof Strategy\"\\n`;\r\n    modelica += `    parameter String proofType = \"${escapeModelicaString(thought.proofStrategy.type)}\";\\n`;\r\n    modelica += `    parameter Real completeness = ${thought.proofStrategy.completeness};\\n`;\r\n\r\n    // Add proof steps as parameters\r\n    thought.proofStrategy.steps.forEach((step, index) => {\r\n      if (includeLabels) {\r\n        modelica += `    parameter String step${index + 1} = \"${escapeModelicaString(step)}\";\\n`;\r\n      }\r\n    });\r\n\r\n    if (thought.proofStrategy.baseCase) {\r\n      modelica += `    parameter String baseCase = \"${escapeModelicaString(thought.proofStrategy.baseCase)}\";\\n`;\r\n    }\r\n    if (thought.proofStrategy.inductiveStep) {\r\n      modelica += `    parameter String inductiveStep = \"${escapeModelicaString(thought.proofStrategy.inductiveStep)}\";\\n`;\r\n    }\r\n    modelica += `  end ${strategyName};\\n\\n`;\r\n  }\r\n\r\n  // Add assumptions\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    modelica += '  // Assumptions\\n';\r\n    modelica += '  model Assumptions \"Proof Assumptions\"\\n';\r\n    thought.assumptions.forEach((assumption, index) => {\r\n      modelica += `    parameter String assumption${index + 1} = \"${escapeModelicaString(assumption)}\";\\n`;\r\n    });\r\n    modelica += '  end Assumptions;\\n\\n';\r\n  }\r\n\r\n  // Add metadata\r\n  modelica += '  // Metadata\\n';\r\n  modelica += '  model Metadata \"Derivation Metadata\"\\n';\r\n  modelica += `    parameter Real uncertainty = ${thought.uncertainty};\\n`;\r\n  modelica += `    parameter Integer theoremCount = ${thought.theorems?.length || 0};\\n`;\r\n  modelica += `    parameter Integer assumptionCount = ${thought.assumptions?.length || 0};\\n`;\r\n  modelica += '  end Metadata;\\n\\n';\r\n\r\n  modelica += 'end MathematicsDerivation;\\n';\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export mathematics reasoning to UML format\r\n */\r\nfunction mathematicsToUML(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Add thought type as root class\r\n  const typeId = sanitizeId(`type_${thought.thoughtType || 'proof'}`);\r\n  nodes.push({\r\n    id: typeId,\r\n    label: includeLabels ? (thought.thoughtType || 'Proof').replace(/_/g, ' ') : typeId,\r\n    shape: 'class',\r\n    stereotype: 'mathematical',\r\n    attributes: [\r\n      `uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%`,\r\n    ],\r\n  });\r\n\r\n  // Add mathematical model as class\r\n  if (thought.mathematicalModel) {\r\n    const modelId = sanitizeId('model');\r\n    nodes.push({\r\n      id: modelId,\r\n      label: 'Mathematical Model',\r\n      shape: 'class',\r\n      stereotype: 'model',\r\n      attributes: [\r\n        `latex: ${thought.mathematicalModel.latex.substring(0, 40)}...`,\r\n        `symbolic: ${thought.mathematicalModel.symbolic}`,\r\n      ],\r\n    });\r\n\r\n    edges.push({\r\n      source: typeId,\r\n      target: modelId,\r\n      type: 'composition',\r\n      label: 'contains',\r\n    });\r\n  }\r\n\r\n  // Add theorems as classes\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    thought.theorems.forEach((theorem, index) => {\r\n      const theoremId = sanitizeId(`theorem_${index}`);\r\n      const attributes = [\r\n        `statement: ${theorem.statement.substring(0, 40)}...`,\r\n        `hypotheses: ${theorem.hypotheses.length}`,\r\n        `conclusion: ${theorem.conclusion.substring(0, 40)}...`,\r\n      ];\r\n\r\n      nodes.push({\r\n        id: theoremId,\r\n        label: theorem.name || `Theorem ${index + 1}`,\r\n        shape: 'class',\r\n        stereotype: 'theorem',\r\n        attributes,\r\n      });\r\n\r\n      edges.push({\r\n        source: typeId,\r\n        target: theoremId,\r\n        type: 'association',\r\n        label: 'uses',\r\n      });\r\n    });\r\n  }\r\n\r\n  // Add proof strategy as class with methods\r\n  if (thought.proofStrategy) {\r\n    const strategyId = sanitizeId('strategy');\r\n    const methods = thought.proofStrategy.steps.map((step, index) => {\r\n      return includeLabels ? `step${index + 1}(): ${step.substring(0, 30)}...` : `step${index + 1}()`;\r\n    });\r\n\r\n    nodes.push({\r\n      id: strategyId,\r\n      label: thought.proofStrategy.type,\r\n      shape: 'class',\r\n      stereotype: 'strategy',\r\n      attributes: [\r\n        `completeness: ${(thought.proofStrategy.completeness * 100).toFixed(0)}%`,\r\n      ],\r\n      methods,\r\n    });\r\n\r\n    edges.push({\r\n      source: typeId,\r\n      target: strategyId,\r\n      type: 'dependency',\r\n      label: 'applies',\r\n    });\r\n  }\r\n\r\n  // Add assumptions as interface\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    const assumptionsId = sanitizeId('assumptions');\r\n    nodes.push({\r\n      id: assumptionsId,\r\n      label: 'Assumptions',\r\n      shape: 'interface',\r\n      attributes: thought.assumptions.slice(0, 5).map((a, i) => `${i + 1}. ${a.substring(0, 30)}...`),\r\n    });\r\n\r\n    edges.push({\r\n      source: typeId,\r\n      target: assumptionsId,\r\n      type: 'implementation',\r\n      label: 'assumes',\r\n    });\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Mathematics Derivation Structure',\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export mathematics reasoning to JSON format\r\n */\r\nfunction mathematicsToJSON(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph('Mathematics Derivation', 'mathematics');\r\n\r\n  // Add thought type as root node\r\n  const typeId = sanitizeId(`type_${thought.thoughtType || 'proof'}`);\r\n  addNode(graph, {\r\n    id: typeId,\r\n    label: includeLabels ? (thought.thoughtType || 'Proof').replace(/_/g, ' ') : typeId,\r\n    type: 'type',\r\n    metadata: {\r\n      thoughtType: thought.thoughtType || 'proof',\r\n      uncertainty: thought.uncertainty,\r\n    },\r\n  });\r\n\r\n  // Add mathematical model\r\n  if (thought.mathematicalModel) {\r\n    const modelId = sanitizeId('model');\r\n    addNode(graph, {\r\n      id: modelId,\r\n      label: thought.mathematicalModel.symbolic || 'Mathematical Model',\r\n      type: 'model',\r\n      metadata: {\r\n        latex: thought.mathematicalModel.latex,\r\n        symbolic: thought.mathematicalModel.symbolic,\r\n        ascii: thought.mathematicalModel.ascii,\r\n      },\r\n    });\r\n\r\n    addEdge(graph, {\r\n      id: `edge_${typeId}_${modelId}`,\r\n      source: typeId,\r\n      target: modelId,\r\n      label: 'contains',\r\n      type: 'composition',\r\n    });\r\n  }\r\n\r\n  // Add theorems\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    thought.theorems.forEach((theorem, index) => {\r\n      const theoremId = sanitizeId(`theorem_${index}`);\r\n      addNode(graph, {\r\n        id: theoremId,\r\n        label: theorem.name || `Theorem ${index + 1}`,\r\n        type: 'theorem',\r\n        metadata: {\r\n          statement: theorem.statement,\r\n          hypotheses: theorem.hypotheses,\r\n          conclusion: theorem.conclusion,\r\n        },\r\n      });\r\n\r\n      addEdge(graph, {\r\n        id: `edge_${typeId}_${theoremId}`,\r\n        source: typeId,\r\n        target: theoremId,\r\n        label: 'uses',\r\n        type: 'association',\r\n      });\r\n    });\r\n  }\r\n\r\n  // Add proof strategy with derivation steps\r\n  if (thought.proofStrategy) {\r\n    const strategyId = sanitizeId('strategy');\r\n    addNode(graph, {\r\n      id: strategyId,\r\n      label: thought.proofStrategy.type,\r\n      type: 'strategy',\r\n      metadata: {\r\n        proofType: thought.proofStrategy.type,\r\n        completeness: thought.proofStrategy.completeness,\r\n        baseCase: thought.proofStrategy.baseCase,\r\n        inductiveStep: thought.proofStrategy.inductiveStep,\r\n      },\r\n    });\r\n\r\n    addEdge(graph, {\r\n      id: `edge_${typeId}_${strategyId}`,\r\n      source: typeId,\r\n      target: strategyId,\r\n      label: 'applies',\r\n      type: 'dependency',\r\n    });\r\n\r\n    // Add proof steps as nodes\r\n    let prevStepId = strategyId;\r\n    thought.proofStrategy.steps.forEach((step, index) => {\r\n      const stepId = sanitizeId(`step_${index}`);\r\n      addNode(graph, {\r\n        id: stepId,\r\n        label: includeLabels ? `Step ${index + 1}` : stepId,\r\n        type: 'step',\r\n        metadata: {\r\n          stepNumber: index + 1,\r\n          description: step,\r\n        },\r\n      });\r\n\r\n      addEdge(graph, {\r\n        id: `edge_${prevStepId}_${stepId}`,\r\n        source: prevStepId,\r\n        target: stepId,\r\n        label: 'leads_to',\r\n        type: 'sequence',\r\n      });\r\n\r\n      prevStepId = stepId;\r\n    });\r\n  }\r\n\r\n  // Add assumptions as nodes\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    thought.assumptions.forEach((assumption, index) => {\r\n      const assumptionId = sanitizeId(`assumption_${index}`);\r\n      addNode(graph, {\r\n        id: assumptionId,\r\n        label: includeLabels ? `Assumption ${index + 1}` : assumptionId,\r\n        type: 'assumption',\r\n        metadata: {\r\n          description: assumption,\r\n        },\r\n      });\r\n\r\n      addEdge(graph, {\r\n        id: `edge_${typeId}_${assumptionId}`,\r\n        source: typeId,\r\n        target: assumptionId,\r\n        label: 'assumes',\r\n        type: 'dependency',\r\n      });\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'uncertainty', thought.uncertainty);\r\n    addMetric(graph, 'theorem_count', thought.theorems?.length || 0);\r\n    addMetric(graph, 'assumption_count', thought.assumptions?.length || 0);\r\n    addMetric(graph, 'dependency_count', thought.dependencies?.length || 0);\r\n    if (thought.proofStrategy) {\r\n      addMetric(graph, 'proof_completeness', thought.proofStrategy.completeness);\r\n      addMetric(graph, 'proof_step_count', thought.proofStrategy.steps.length);\r\n    }\r\n  }\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export mathematics reasoning to Markdown format\r\n */\r\nfunction mathematicsToMarkdown(thought: MathematicsThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Type and Uncertainty\r\n  const typeContent = keyValueSection({\r\n    'Type': (thought.thoughtType || 'proof').replace(/_/g, ' '),\r\n    'Uncertainty': `${(thought.uncertainty * 100).toFixed(1)}%`,\r\n  });\r\n  parts.push(section('Overview', typeContent));\r\n\r\n  // Mathematical Model\r\n  if (thought.mathematicalModel) {\r\n    const modelContent = keyValueSection({\r\n      'LaTeX': `\\`${thought.mathematicalModel.latex}\\``,\r\n      'Symbolic': `\\`${thought.mathematicalModel.symbolic}\\``,\r\n      'ASCII': thought.mathematicalModel.ascii ? `\\`${thought.mathematicalModel.ascii}\\`` : 'N/A',\r\n    });\r\n    parts.push(section('Mathematical Model', modelContent));\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Uncertainty': `${(thought.uncertainty * 100).toFixed(1)}%`,\r\n      'Theorems': thought.theorems?.length || 0,\r\n      'Assumptions': thought.assumptions?.length || 0,\r\n      'Proof Completeness': thought.proofStrategy ? `${(thought.proofStrategy.completeness * 100).toFixed(0)}%` : 'N/A',\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Proof Strategy\r\n  if (thought.proofStrategy) {\r\n    let proofContent = `**Type:** ${thought.proofStrategy.type}\\n\\n`;\r\n    proofContent += `**Completeness:** ${(thought.proofStrategy.completeness * 100).toFixed(0)}%\\n\\n`;\r\n    proofContent += '**Steps:**\\n\\n';\r\n\r\n    const stepItems = thought.proofStrategy.steps.map((step, index) =>\r\n      `${index + 1}. ${step}`\r\n    );\r\n    proofContent += list(stepItems, 'numbered');\r\n\r\n    if (thought.proofStrategy.baseCase) {\r\n      proofContent += `\\n**Base Case:** ${thought.proofStrategy.baseCase}\\n`;\r\n    }\r\n    if (thought.proofStrategy.inductiveStep) {\r\n      proofContent += `\\n**Inductive Step:** ${thought.proofStrategy.inductiveStep}\\n`;\r\n    }\r\n\r\n    parts.push(section('Proof Strategy', proofContent));\r\n  }\r\n\r\n  // Theorems\r\n  if (thought.theorems && thought.theorems.length > 0) {\r\n    const theoremItems = thought.theorems.map(theorem =>\r\n      `**${theorem.name}**: ${theorem.statement}\\n  - Hypotheses: ${theorem.hypotheses.join(', ')}\\n  - Conclusion: ${theorem.conclusion}`\r\n    );\r\n    parts.push(section('Theorems', list(theoremItems)));\r\n  }\r\n\r\n  // Assumptions\r\n  if (thought.assumptions && thought.assumptions.length > 0) {\r\n    parts.push(section('Assumptions', list(thought.assumptions)));\r\n  }\r\n\r\n  // Dependencies\r\n  if (thought.dependencies && thought.dependencies.length > 0) {\r\n    parts.push(section('Dependencies', list(thought.dependencies)));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = mathematicsToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Derivation Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Mathematics Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: { mode: 'mathematics' },\r\n  });\r\n}\r\n","/**\n * Physics Visual Exporter (v7.0.3)\n * Phase 7 Sprint 2: Physics reasoning export to Mermaid, DOT, ASCII\n * Phase 9: Added native SVG export support\n * Phase 9: Added GraphML and TikZ export support\n */\n\nimport type { PhysicsThought } from '../../../types/modes/physics.js';\nimport type { VisualExportOptions } from '../types.js';\nimport { sanitizeId } from '../utils.js';\nimport {\n  generateSVGHeader,\n  generateSVGFooter,\n  renderRectNode,\n  renderEllipseNode,\n  renderStadiumNode,\n  renderEdge,\n  renderMetricsPanel,\n  renderLegend,\n  getNodeColor,\n  DEFAULT_SVG_OPTIONS,\n  type SVGNodePosition,\n} from '../utils/svg.js';\nimport {\n  generateGraphML,\n  type GraphMLNode,\n  type GraphMLEdge,\n  type GraphMLOptions,\n} from '../utils/graphml.js';\nimport {\n  generateTikZ,\n  renderTikZMetrics,\n  type TikZNode,\n  type TikZEdge,\n  type TikZOptions,\n} from '../utils/tikz.js';\nimport {\n  generateHTMLHeader,\n  generateHTMLFooter,\n  escapeHTML,\n  renderMetricCard,\n  renderSection,\n  renderTable,\n  renderBadge,\n} from '../utils/html.js';\nimport {\n  sanitizeModelicaId,\n  escapeModelicaString,\n} from '../utils/modelica.js';\nimport {\n  generateUmlDiagram,\n  type UmlNode,\n  type UmlEdge,\n} from '../utils/uml.js';\nimport {\n  createJsonGraph,\n  addNode,\n  addEdge,\n  addMetric,\n  serializeGraph,\n} from '../utils/json.js';\nimport {\n  section,\n  list,\n  keyValueSection,\n  mermaidBlock,\n  document as mdDocument,\n  progressBar,\n} from '../utils/markdown.js';\n\n/**\n * Export physics reasoning to visual format\n */\nexport function exportPhysicsVisualization(thought: PhysicsThought, options: VisualExportOptions): string {\n  const { format, colorScheme = 'default' } = options;\n\n  switch (format) {\n    case 'mermaid':\n      return physicsToMermaid(thought, colorScheme, options.includeLabels ?? true, options.includeMetrics ?? true);\n    case 'dot':\n      return physicsToDOT(thought, options.includeLabels ?? true, options.includeMetrics ?? true);\n    case 'ascii':\n      return physicsToASCII(thought);\n    case 'svg':\n      return physicsToSVG(thought, options);\n    case 'graphml':\n      return physicsToGraphML(thought, options);\n    case 'tikz':\n      return physicsToTikZ(thought, options);\n    case 'html':\n      return physicsToHTML(thought, options);\n    case 'modelica':\n      return physicsToModelica(thought, options);\n    case 'uml':\n      return physicsToUML(thought, options);\n    case 'json':\n      return physicsToJSON(thought, options);\n    case 'markdown':\n      return physicsToMarkdown(thought, options);\n    default:\n      throw new Error(`Unsupported format: ${format}`);\n  }\n}\n\nfunction physicsToMermaid(\n  thought: PhysicsThought,\n  colorScheme: string,\n  includeLabels: boolean,\n  includeMetrics: boolean\n): string {\n  let mermaid = 'graph TB\\n';\n\n  // Add thought type node\n  const typeId = sanitizeId(`type_${thought.thoughtType || 'physics'}`);\n  const typeLabel = includeLabels ? (thought.thoughtType || 'Physics').replace(/_/g, ' ') : typeId;\n  mermaid += `  ${typeId}[[\"${typeLabel}\"]]\\n`;\n\n  // Add tensor properties if present\n  if (thought.tensorProperties) {\n    const tensorId = sanitizeId('tensor');\n    const rankLabel = `Rank (${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})`;\n    mermaid += `  ${tensorId}([\"${rankLabel}\"])\\n`;\n    mermaid += `  ${typeId} --> ${tensorId}\\n`;\n\n    // Add tensor components\n    const compId = sanitizeId('components');\n    const compLabel = includeLabels\n      ? thought.tensorProperties.components.slice(0, 30) + (thought.tensorProperties.components.length > 30 ? '...' : '')\n      : 'Components';\n    mermaid += `  ${compId}[\"${compLabel}\"]\\n`;\n    mermaid += `  ${tensorId} --> ${compId}\\n`;\n\n    // Add symmetries\n    if (thought.tensorProperties.symmetries.length > 0) {\n      const symId = sanitizeId('symmetries');\n      mermaid += `  ${symId}{{\"Symmetries: ${thought.tensorProperties.symmetries.length}\"}}\\n`;\n      mermaid += `  ${tensorId} --> ${symId}\\n`;\n    }\n\n    // Add invariants\n    if (thought.tensorProperties.invariants.length > 0) {\n      const invId = sanitizeId('invariants');\n      mermaid += `  ${invId}{{\"Invariants: ${thought.tensorProperties.invariants.length}\"}}\\n`;\n      mermaid += `  ${tensorId} --> ${invId}\\n`;\n    }\n  }\n\n  // Add physical interpretation if present\n  if (thought.physicalInterpretation) {\n    const interpId = sanitizeId('interpretation');\n    const interpLabel = thought.physicalInterpretation.quantity;\n    mermaid += `  ${interpId}[/\"${interpLabel}\"/]\\n`;\n    mermaid += `  ${typeId} --> ${interpId}\\n`;\n\n    // Add units\n    const unitsId = sanitizeId('units');\n    mermaid += `  ${unitsId}([\"${thought.physicalInterpretation.units}\"])\\n`;\n    mermaid += `  ${interpId} --> ${unitsId}\\n`;\n\n    // Add conservation laws\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      thought.physicalInterpretation.conservationLaws.forEach((law, index) => {\n        const lawId = sanitizeId(`conservation_${index}`);\n        const lawLabel = includeLabels ? law.slice(0, 25) + (law.length > 25 ? '...' : '') : `Law ${index + 1}`;\n        mermaid += `  ${lawId}>\"${lawLabel}\"]\\n`;\n        mermaid += `  ${interpId} --> ${lawId}\\n`;\n      });\n    }\n  }\n\n  // Add field theory context if present\n  if (thought.fieldTheoryContext) {\n    const fieldId = sanitizeId('field_theory');\n    mermaid += `  ${fieldId}[(\"Field Theory\")]\\n`;\n    mermaid += `  ${typeId} --> ${fieldId}\\n`;\n\n    // Add fields\n    thought.fieldTheoryContext.fields.forEach((field, index) => {\n      const fId = sanitizeId(`field_${index}`);\n      mermaid += `  ${fId}[\"${field}\"]\\n`;\n      mermaid += `  ${fieldId} --> ${fId}\\n`;\n    });\n\n    // Add symmetry group\n    const symGroupId = sanitizeId('symmetry_group');\n    mermaid += `  ${symGroupId}{{\"${thought.fieldTheoryContext.symmetryGroup}\"}}\\n`;\n    mermaid += `  ${fieldId} --> ${symGroupId}\\n`;\n  }\n\n  // Add uncertainty metric\n  if (includeMetrics) {\n    const uncertId = sanitizeId('uncertainty');\n    const uncertLabel = `Uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%`;\n    mermaid += `  ${uncertId}{{${uncertLabel}}}\\n`;\n  }\n\n  // Add assumptions as notes\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    const assumptionsId = sanitizeId('assumptions');\n    mermaid += `  ${assumptionsId}>\"Assumptions: ${thought.assumptions.length}\"]\\n`;\n  }\n\n  // Color scheme\n  if (colorScheme !== 'monochrome') {\n    const colors = colorScheme === 'pastel'\n      ? { type: '#e3f2fd', tensor: '#fff3e0', interp: '#e8f5e9' }\n      : { type: '#87CEEB', tensor: '#FFD700', interp: '#90EE90' };\n\n    mermaid += `\\n  style ${typeId} fill:${colors.type}\\n`;\n    if (thought.tensorProperties) {\n      mermaid += `  style ${sanitizeId('tensor')} fill:${colors.tensor}\\n`;\n    }\n    if (thought.physicalInterpretation) {\n      mermaid += `  style ${sanitizeId('interpretation')} fill:${colors.interp}\\n`;\n    }\n  }\n\n  return mermaid;\n}\n\nfunction physicsToDOT(\n  thought: PhysicsThought,\n  includeLabels: boolean,\n  includeMetrics: boolean\n): string {\n  let dot = 'digraph PhysicsVisualization {\\n';\n  dot += '  rankdir=TB;\\n';\n  dot += '  node [shape=box, style=rounded];\\n\\n';\n\n  // Add thought type node\n  const typeId = sanitizeId(`type_${thought.thoughtType || 'physics'}`);\n  const typeLabel = includeLabels ? (thought.thoughtType || 'Physics').replace(/_/g, ' ') : typeId;\n  dot += `  ${typeId} [label=\"${typeLabel}\", shape=doubleoctagon];\\n`;\n\n  // Add tensor properties\n  if (thought.tensorProperties) {\n    const tensorId = sanitizeId('tensor');\n    const rankLabel = `Rank (${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})`;\n    dot += `  ${tensorId} [label=\"${rankLabel}\", shape=ellipse];\\n`;\n    dot += `  ${typeId} -> ${tensorId};\\n`;\n\n    // Components\n    const compId = sanitizeId('components');\n    const compLabel = includeLabels\n      ? thought.tensorProperties.components.slice(0, 25).replace(/\"/g, '\\\"')\n      : 'Components';\n    dot += `  ${compId} [label=\"${compLabel}\"];\\n`;\n    dot += `  ${tensorId} -> ${compId};\\n`;\n\n    // Transformation type\n    const transId = sanitizeId('transformation');\n    dot += `  ${transId} [label=\"${thought.tensorProperties.transformation}\", shape=diamond];\\n`;\n    dot += `  ${tensorId} -> ${transId};\\n`;\n  }\n\n  // Add physical interpretation\n  if (thought.physicalInterpretation) {\n    const interpId = sanitizeId('interpretation');\n    dot += `  ${interpId} [label=\"${thought.physicalInterpretation.quantity}\", shape=parallelogram];\\n`;\n    dot += `  ${typeId} -> ${interpId};\\n`;\n\n    // Units\n    const unitsId = sanitizeId('units');\n    dot += `  ${unitsId} [label=\"${thought.physicalInterpretation.units}\", shape=ellipse];\\n`;\n    dot += `  ${interpId} -> ${unitsId};\\n`;\n\n    // Conservation laws\n    thought.physicalInterpretation.conservationLaws.forEach((law, index) => {\n      const lawId = sanitizeId(`conservation_${index}`);\n      const lawLabel = includeLabels ? law.slice(0, 20).replace(/\"/g, '\\\"') : `Law ${index + 1}`;\n      dot += `  ${lawId} [label=\"${lawLabel}\", shape=hexagon];\\n`;\n      dot += `  ${interpId} -> ${lawId};\\n`;\n    });\n  }\n\n  // Add field theory context\n  if (thought.fieldTheoryContext) {\n    const fieldId = sanitizeId('field_theory');\n    dot += `  ${fieldId} [label=\"Field Theory\", shape=cylinder];\\n`;\n    dot += `  ${typeId} -> ${fieldId};\\n`;\n\n    // Fields\n    thought.fieldTheoryContext.fields.forEach((field, index) => {\n      const fId = sanitizeId(`field_${index}`);\n      dot += `  ${fId} [label=\"${field}\"];\\n`;\n      dot += `  ${fieldId} -> ${fId};\\n`;\n    });\n\n    // Symmetry group\n    const symGroupId = sanitizeId('symmetry_group');\n    dot += `  ${symGroupId} [label=\"${thought.fieldTheoryContext.symmetryGroup}\", shape=diamond];\\n`;\n    dot += `  ${fieldId} -> ${symGroupId};\\n`;\n  }\n\n  // Add uncertainty\n  if (includeMetrics) {\n    const uncertId = sanitizeId('uncertainty');\n    dot += `  ${uncertId} [label=\"${(thought.uncertainty * 100).toFixed(1)}%\", shape=diamond];\\n`;\n  }\n\n  dot += '}\\n';\n  return dot;\n}\n\nfunction physicsToASCII(thought: PhysicsThought): string {\n  let ascii = 'Physics Analysis:\\n';\n  ascii += '=================\\n\\n';\n\n  // Thought type\n  ascii += `Type: ${(thought.thoughtType || 'physics').replace(/_/g, ' ')}\\n`;\n  ascii += `Uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%\\n\\n`;\n\n  // Tensor properties\n  if (thought.tensorProperties) {\n    ascii += 'Tensor Properties:\\n';\n    ascii += `  Rank: (${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]})\\n`;\n    ascii += `  Components: ${thought.tensorProperties.components}\\n`;\n    ascii += `  LaTeX: ${thought.tensorProperties.latex}\\n`;\n    ascii += `  Transformation: ${thought.tensorProperties.transformation}\\n`;\n    if (thought.tensorProperties.indexStructure) {\n      ascii += `  Index Structure: ${thought.tensorProperties.indexStructure}\\n`;\n    }\n    if (thought.tensorProperties.coordinateSystem) {\n      ascii += `  Coordinate System: ${thought.tensorProperties.coordinateSystem}\\n`;\n    }\n    if (thought.tensorProperties.symmetries.length > 0) {\n      ascii += '  Symmetries:\\n';\n      thought.tensorProperties.symmetries.forEach((sym, index) => {\n        ascii += `    ${index + 1}. ${sym}\\n`;\n      });\n    }\n    if (thought.tensorProperties.invariants.length > 0) {\n      ascii += '  Invariants:\\n';\n      thought.tensorProperties.invariants.forEach((inv, index) => {\n        ascii += `    ${index + 1}. ${inv}\\n`;\n      });\n    }\n    ascii += '\\n';\n  }\n\n  // Physical interpretation\n  if (thought.physicalInterpretation) {\n    ascii += 'Physical Interpretation:\\n';\n    ascii += `  Quantity: ${thought.physicalInterpretation.quantity}\\n`;\n    ascii += `  Units: ${thought.physicalInterpretation.units}\\n`;\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      ascii += '  Conservation Laws:\\n';\n      thought.physicalInterpretation.conservationLaws.forEach((law, index) => {\n        ascii += `    ${index + 1}. ${law}\\n`;\n      });\n    }\n    if (thought.physicalInterpretation.constraints && thought.physicalInterpretation.constraints.length > 0) {\n      ascii += '  Constraints:\\n';\n      thought.physicalInterpretation.constraints.forEach((constraint, index) => {\n        ascii += `    ${index + 1}. ${constraint}\\n`;\n      });\n    }\n    if (thought.physicalInterpretation.observables && thought.physicalInterpretation.observables.length > 0) {\n      ascii += '  Observables:\\n';\n      thought.physicalInterpretation.observables.forEach((obs, index) => {\n        ascii += `    ${index + 1}. ${obs}\\n`;\n      });\n    }\n    ascii += '\\n';\n  }\n\n  // Field theory context\n  if (thought.fieldTheoryContext) {\n    ascii += 'Field Theory Context:\\n';\n    ascii += `  Symmetry Group: ${thought.fieldTheoryContext.symmetryGroup}\\n`;\n    if (thought.fieldTheoryContext.fields.length > 0) {\n      ascii += '  Fields:\\n';\n      thought.fieldTheoryContext.fields.forEach((field, index) => {\n        ascii += `    ${index + 1}. ${field}\\n`;\n      });\n    }\n    if (thought.fieldTheoryContext.interactions.length > 0) {\n      ascii += '  Interactions:\\n';\n      thought.fieldTheoryContext.interactions.forEach((interaction, index) => {\n        ascii += `    ${index + 1}. ${interaction}\\n`;\n      });\n    }\n    if (thought.fieldTheoryContext.gaugeSymmetries && thought.fieldTheoryContext.gaugeSymmetries.length > 0) {\n      ascii += '  Gauge Symmetries:\\n';\n      thought.fieldTheoryContext.gaugeSymmetries.forEach((gauge, index) => {\n        ascii += `    ${index + 1}. ${gauge}\\n`;\n      });\n    }\n    ascii += '\\n';\n  }\n\n  // Assumptions\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    ascii += 'Assumptions:\\n';\n    thought.assumptions.forEach((assumption, index) => {\n      ascii += `  ${index + 1}. ${assumption}\\n`;\n    });\n    ascii += '\\n';\n  }\n\n  // Dependencies\n  if (thought.dependencies && thought.dependencies.length > 0) {\n    ascii += 'Dependencies:\\n';\n    thought.dependencies.forEach((dep, index) => {\n      ascii += `  ${index + 1}. ${dep}\\n`;\n    });\n  }\n\n  return ascii;\n}\n\n/**\n * Export physics reasoning to native SVG format\n */\nfunction physicsToSVG(thought: PhysicsThought, options: VisualExportOptions): string {\n  const {\n    colorScheme = 'default',\n    includeLabels = true,\n    includeMetrics = true,\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\n    svgHeight = DEFAULT_SVG_OPTIONS.height,\n  } = options;\n\n  const positions = new Map<string, SVGNodePosition>();\n  const nodeWidth = 150;\n  const nodeHeight = 40;\n\n  // Thought type at the top\n  positions.set('type', {\n    id: 'type',\n    label: includeLabels ? (thought.thoughtType || 'Physics').replace(/_/g, ' ') : 'Physics',\n    x: svgWidth / 2,\n    y: 80,\n    width: nodeWidth,\n    height: nodeHeight,\n    type: 'type',\n  });\n\n  // Tensor properties on the left\n  if (thought.tensorProperties) {\n    positions.set('tensor', {\n      id: 'tensor',\n      label: `Tensor (${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})`,\n      x: 150,\n      y: 220,\n      width: nodeWidth,\n      height: nodeHeight,\n      type: 'tensor',\n    });\n  }\n\n  // Physical interpretation on the right\n  if (thought.physicalInterpretation) {\n    positions.set('interpretation', {\n      id: 'interpretation',\n      label: thought.physicalInterpretation.quantity,\n      x: svgWidth - 150,\n      y: 220,\n      width: nodeWidth,\n      height: nodeHeight,\n      type: 'interpretation',\n    });\n  }\n\n  // Field theory context at the bottom\n  if (thought.fieldTheoryContext) {\n    positions.set('field', {\n      id: 'field',\n      label: 'Field Theory',\n      x: svgWidth / 2,\n      y: 360,\n      width: nodeWidth,\n      height: nodeHeight,\n      type: 'field',\n    });\n  }\n\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Physics Analysis');\n\n  // Render edges\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\n\n  const typePos = positions.get('type');\n  const tensorPos = positions.get('tensor');\n  const interpPos = positions.get('interpretation');\n  const fieldPos = positions.get('field');\n\n  if (typePos && tensorPos) {\n    svg += renderEdge(typePos, tensorPos);\n  }\n  if (typePos && interpPos) {\n    svg += renderEdge(typePos, interpPos);\n  }\n  if (typePos && fieldPos) {\n    svg += renderEdge(typePos, fieldPos);\n  }\n\n  svg += '\\n  </g>';\n\n  // Render nodes\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\n\n  const typeColors = getNodeColor('primary', colorScheme);\n  const tensorColors = getNodeColor('secondary', colorScheme);\n  const interpColors = getNodeColor('tertiary', colorScheme);\n  const fieldColors = getNodeColor('neutral', colorScheme);\n\n  for (const [, pos] of positions) {\n    if (pos.type === 'type') {\n      svg += renderStadiumNode(pos, typeColors);\n    } else if (pos.type === 'tensor') {\n      svg += renderEllipseNode(pos, tensorColors);\n    } else if (pos.type === 'interpretation') {\n      svg += renderRectNode(pos, interpColors);\n    } else if (pos.type === 'field') {\n      svg += renderRectNode(pos, fieldColors);\n    }\n  }\n  svg += '\\n  </g>';\n\n  // Render metrics panel\n  if (includeMetrics) {\n    const metrics = [\n      { label: 'Uncertainty', value: `${(thought.uncertainty * 100).toFixed(1)}%` },\n      { label: 'Assumptions', value: thought.assumptions?.length || 0 },\n    ];\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 110, metrics);\n  }\n\n  // Render legend\n  const legendItems = [\n    { label: 'Type', color: typeColors, shape: 'stadium' as const },\n    { label: 'Tensor', color: tensorColors, shape: 'ellipse' as const },\n    { label: 'Interpretation', color: interpColors },\n    { label: 'Field Theory', color: fieldColors },\n  ];\n  svg += renderLegend(20, svgHeight - 130, legendItems);\n\n  svg += '\\n' + generateSVGFooter();\n  return svg;\n}\n\n/**\n * Export physics reasoning to GraphML format\n */\nfunction physicsToGraphML(thought: PhysicsThought, options: VisualExportOptions): string {\n  const { includeLabels = true, includeMetrics = true } = options;\n\n  const nodes: GraphMLNode[] = [];\n  const edges: GraphMLEdge[] = [];\n  let edgeCount = 0;\n\n  // Root node for the thought type\n  const typeId = 'type';\n  nodes.push({\n    id: typeId,\n    label: includeLabels ? (thought.thoughtType || 'Physics').replace(/_/g, ' ') : 'Physics',\n    type: 'primary',\n  });\n\n  // Add tensor properties if present\n  if (thought.tensorProperties) {\n    const tensorId = 'tensor';\n    nodes.push({\n      id: tensorId,\n      label: `Tensor Rank (${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})`,\n      type: 'tensor',\n      metadata: {\n        description: `Components: ${thought.tensorProperties.components}`,\n      },\n    });\n    edges.push({\n      id: `e${edgeCount++}`,\n      source: typeId,\n      target: tensorId,\n      label: 'has tensor',\n    });\n\n    // Add tensor components\n    const componentsId = 'components';\n    nodes.push({\n      id: componentsId,\n      label: 'Components',\n      type: 'property',\n      metadata: {\n        description: thought.tensorProperties.components,\n      },\n    });\n    edges.push({\n      id: `e${edgeCount++}`,\n      source: tensorId,\n      target: componentsId,\n    });\n\n    // Add symmetries\n    if (thought.tensorProperties.symmetries.length > 0) {\n      thought.tensorProperties.symmetries.forEach((sym, index) => {\n        const symId = `symmetry_${index}`;\n        nodes.push({\n          id: symId,\n          label: includeLabels ? sym : `Symmetry ${index + 1}`,\n          type: 'symmetry',\n        });\n        edges.push({\n          id: `e${edgeCount++}`,\n          source: tensorId,\n          target: symId,\n          label: 'symmetry',\n        });\n      });\n    }\n\n    // Add invariants\n    if (thought.tensorProperties.invariants.length > 0) {\n      thought.tensorProperties.invariants.forEach((inv, index) => {\n        const invId = `invariant_${index}`;\n        nodes.push({\n          id: invId,\n          label: includeLabels ? inv : `Invariant ${index + 1}`,\n          type: 'invariant',\n        });\n        edges.push({\n          id: `e${edgeCount++}`,\n          source: tensorId,\n          target: invId,\n          label: 'invariant',\n        });\n      });\n    }\n  }\n\n  // Add physical interpretation if present\n  if (thought.physicalInterpretation) {\n    const interpId = 'interpretation';\n    nodes.push({\n      id: interpId,\n      label: thought.physicalInterpretation.quantity,\n      type: 'interpretation',\n      metadata: {\n        description: `Units: ${thought.physicalInterpretation.units}`,\n      },\n    });\n    edges.push({\n      id: `e${edgeCount++}`,\n      source: typeId,\n      target: interpId,\n      label: 'physical meaning',\n    });\n\n    // Add units\n    const unitsId = 'units';\n    nodes.push({\n      id: unitsId,\n      label: thought.physicalInterpretation.units,\n      type: 'units',\n    });\n    edges.push({\n      id: `e${edgeCount++}`,\n      source: interpId,\n      target: unitsId,\n      label: 'measured in',\n    });\n\n    // Add conservation laws\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      thought.physicalInterpretation.conservationLaws.forEach((law, index) => {\n        const lawId = `conservation_${index}`;\n        nodes.push({\n          id: lawId,\n          label: includeLabels ? law : `Law ${index + 1}`,\n          type: 'conservation_law',\n        });\n        edges.push({\n          id: `e${edgeCount++}`,\n          source: interpId,\n          target: lawId,\n          label: 'conserves',\n        });\n      });\n    }\n  }\n\n  // Add field theory context if present\n  if (thought.fieldTheoryContext) {\n    const fieldId = 'field_theory';\n    nodes.push({\n      id: fieldId,\n      label: 'Field Theory',\n      type: 'field_theory',\n      metadata: {\n        description: `Symmetry Group: ${thought.fieldTheoryContext.symmetryGroup}`,\n      },\n    });\n    edges.push({\n      id: `e${edgeCount++}`,\n      source: typeId,\n      target: fieldId,\n      label: 'context',\n    });\n\n    // Add fields\n    thought.fieldTheoryContext.fields.forEach((field, index) => {\n      const fId = `field_${index}`;\n      nodes.push({\n        id: fId,\n        label: field,\n        type: 'field',\n      });\n      edges.push({\n        id: `e${edgeCount++}`,\n        source: fieldId,\n        target: fId,\n        label: 'includes field',\n      });\n    });\n\n    // Add symmetry group\n    const symGroupId = 'symmetry_group';\n    nodes.push({\n      id: symGroupId,\n      label: thought.fieldTheoryContext.symmetryGroup,\n      type: 'symmetry_group',\n    });\n    edges.push({\n      id: `e${edgeCount++}`,\n      source: fieldId,\n      target: symGroupId,\n      label: 'has symmetry',\n    });\n  }\n\n  // Add metrics node\n  if (includeMetrics) {\n    const metricsId = 'metrics';\n    nodes.push({\n      id: metricsId,\n      label: `Uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%`,\n      type: 'metric',\n      metadata: {\n        description: `Assumptions: ${thought.assumptions?.length || 0}`,\n      },\n    });\n  }\n\n  const graphmlOptions: GraphMLOptions = {\n    graphName: 'Physics Visualization',\n  };\n\n  return generateGraphML(nodes, edges, graphmlOptions);\n}\n\n/**\n * Export physics reasoning to TikZ format\n */\nfunction physicsToTikZ(thought: PhysicsThought, options: VisualExportOptions): string {\n  const { includeLabels = true, includeMetrics = true, colorScheme = 'default' } = options;\n\n  const nodes: TikZNode[] = [];\n  const edges: TikZEdge[] = [];\n\n  // Root node for the thought type (center top)\n  const typeId = 'type';\n  nodes.push({\n    id: typeId,\n    x: 0,\n    y: 0,\n    label: includeLabels ? (thought.thoughtType || 'Physics').replace(/_/g, ' ') : 'Physics',\n    shape: 'stadium',\n    type: 'primary',\n  });\n\n  const leftColumn = -4;\n  const rightColumn = 4;\n  const currentRow = -2;\n\n  // Add tensor properties on the left\n  if (thought.tensorProperties) {\n    const tensorId = 'tensor';\n    nodes.push({\n      id: tensorId,\n      x: leftColumn,\n      y: currentRow,\n      label: `Tensor (${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})`,\n      shape: 'ellipse',\n      type: 'tensor',\n    });\n    edges.push({\n      source: typeId,\n      target: tensorId,\n    });\n\n    // Add components below tensor\n    const componentsId = 'components';\n    nodes.push({\n      id: componentsId,\n      x: leftColumn,\n      y: currentRow - 1.5,\n      label: 'Components',\n      shape: 'rectangle',\n      type: 'property',\n    });\n    edges.push({\n      source: tensorId,\n      target: componentsId,\n      style: 'dashed',\n    });\n\n    // Add symmetries if present\n    if (thought.tensorProperties.symmetries.length > 0) {\n      const symId = 'symmetries';\n      nodes.push({\n        id: symId,\n        x: leftColumn - 2,\n        y: currentRow - 3,\n        label: `Symmetries (${thought.tensorProperties.symmetries.length})`,\n        shape: 'diamond',\n        type: 'symmetry',\n      });\n      edges.push({\n        source: tensorId,\n        target: symId,\n      });\n    }\n\n    // Add invariants if present\n    if (thought.tensorProperties.invariants.length > 0) {\n      const invId = 'invariants';\n      nodes.push({\n        id: invId,\n        x: leftColumn + 2,\n        y: currentRow - 3,\n        label: `Invariants (${thought.tensorProperties.invariants.length})`,\n        shape: 'diamond',\n        type: 'invariant',\n      });\n      edges.push({\n        source: tensorId,\n        target: invId,\n      });\n    }\n  }\n\n  // Add physical interpretation on the right\n  if (thought.physicalInterpretation) {\n    const interpId = 'interpretation';\n    nodes.push({\n      id: interpId,\n      x: rightColumn,\n      y: currentRow,\n      label: thought.physicalInterpretation.quantity,\n      shape: 'rounded',\n      type: 'interpretation',\n    });\n    edges.push({\n      source: typeId,\n      target: interpId,\n    });\n\n    // Add units below interpretation\n    const unitsId = 'units';\n    nodes.push({\n      id: unitsId,\n      x: rightColumn,\n      y: currentRow - 1.5,\n      label: thought.physicalInterpretation.units,\n      shape: 'ellipse',\n      type: 'units',\n    });\n    edges.push({\n      source: interpId,\n      target: unitsId,\n      style: 'dashed',\n    });\n\n    // Add conservation laws if present\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      thought.physicalInterpretation.conservationLaws.forEach((law, index) => {\n        const lawId = `conservation_${index}`;\n        const offset = (index - (thought.physicalInterpretation!.conservationLaws.length - 1) / 2) * 2;\n        nodes.push({\n          id: lawId,\n          x: rightColumn + offset,\n          y: currentRow - 3,\n          label: includeLabels ? law.substring(0, 20) : `Law ${index + 1}`,\n          shape: 'rectangle',\n          type: 'conservation_law',\n        });\n        edges.push({\n          source: interpId,\n          target: lawId,\n        });\n      });\n    }\n  }\n\n  // Add field theory context at the bottom center\n  if (thought.fieldTheoryContext) {\n    const fieldId = 'field_theory';\n    nodes.push({\n      id: fieldId,\n      x: 0,\n      y: currentRow - 5,\n      label: 'Field Theory',\n      shape: 'stadium',\n      type: 'field_theory',\n    });\n    edges.push({\n      source: typeId,\n      target: fieldId,\n    });\n\n    // Add fields below field theory\n    thought.fieldTheoryContext.fields.forEach((field, index) => {\n      const fId = `field_${index}`;\n      const offset = (index - (thought.fieldTheoryContext!.fields.length - 1) / 2) * 2.5;\n      nodes.push({\n        id: fId,\n        x: offset,\n        y: currentRow - 6.5,\n        label: field,\n        shape: 'rectangle',\n        type: 'field',\n      });\n      edges.push({\n        source: fieldId,\n        target: fId,\n      });\n    });\n\n    // Add symmetry group\n    const symGroupId = 'symmetry_group';\n    nodes.push({\n      id: symGroupId,\n      x: 0,\n      y: currentRow - 8,\n      label: thought.fieldTheoryContext.symmetryGroup,\n      shape: 'diamond',\n      type: 'symmetry_group',\n    });\n    edges.push({\n      source: fieldId,\n      target: symGroupId,\n      style: 'dashed',\n    });\n  }\n\n  const tikzOptions: TikZOptions = {\n    title: 'Physics Visualization',\n    colorScheme,\n  };\n\n  let tikz = generateTikZ(nodes, edges, tikzOptions);\n\n  // Add metrics if requested\n  if (includeMetrics) {\n    const metrics = [\n      { label: 'Uncertainty', value: `${(thought.uncertainty * 100).toFixed(1)}%` },\n      { label: 'Assumptions', value: thought.assumptions?.length || 0 },\n    ];\n    tikz = tikz.replace('\\\\end{tikzpicture}', renderTikZMetrics(8, -8, metrics) + '\\n\\\\end{tikzpicture}');\n  }\n\n  return tikz;\n}\n\n/**\n * Export physics reasoning to HTML format\n */\nfunction physicsToHTML(thought: PhysicsThought, options: VisualExportOptions): string {\n  const {\n    htmlStandalone = true,\n    htmlTitle = 'Physics Analysis',\n    htmlTheme = 'light',\n  } = options;\n\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\n\n  // Metrics\n  html += '<div class=\"metrics-grid\">';\n  html += renderMetricCard('Uncertainty', `${(thought.uncertainty * 100).toFixed(1)}%`, 'warning');\n  if (thought.assumptions) {\n    html += renderMetricCard('Assumptions', thought.assumptions.length, 'info');\n  }\n  if (thought.tensorProperties) {\n    html += renderMetricCard('Tensor Rank', `(${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})`, 'primary');\n  }\n  if (thought.physicalInterpretation?.conservationLaws) {\n    html += renderMetricCard('Conservation Laws', thought.physicalInterpretation.conservationLaws.length, 'success');\n  }\n  html += '</div>\\n';\n\n  // Thought type badge\n  const badges = [];\n  if (thought.thoughtType) {\n    badges.push(renderBadge(thought.thoughtType.replace(/_/g, ' '), 'primary'));\n  }\n\n  if (badges.length > 0) {\n    html += `<div class=\"flex gap-1\" style=\"margin: 1rem 0\">${badges.join(' ')}</div>\\n`;\n  }\n\n  // Tensor properties\n  if (thought.tensorProperties) {\n    const tensorRows = [\n      ['Rank', `(${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]})`],\n      ['Components', thought.tensorProperties.components],\n      ['LaTeX', thought.tensorProperties.latex],\n      ['Transformation', thought.tensorProperties.transformation],\n    ];\n    if (thought.tensorProperties.indexStructure) {\n      tensorRows.push(['Index Structure', thought.tensorProperties.indexStructure]);\n    }\n    if (thought.tensorProperties.coordinateSystem) {\n      tensorRows.push(['Coordinate System', thought.tensorProperties.coordinateSystem]);\n    }\n\n    let tensorContent = renderTable(['Property', 'Value'], tensorRows);\n\n    if (thought.tensorProperties.symmetries.length > 0) {\n      tensorContent += '<p style=\"margin-top: 1rem\"><strong>Symmetries:</strong></p>';\n      tensorContent += '<ul class=\"list-styled\">';\n      thought.tensorProperties.symmetries.forEach(sym => {\n        tensorContent += `<li>${escapeHTML(sym)}</li>`;\n      });\n      tensorContent += '</ul>';\n    }\n\n    if (thought.tensorProperties.invariants.length > 0) {\n      tensorContent += '<p style=\"margin-top: 1rem\"><strong>Invariants:</strong></p>';\n      tensorContent += '<ul class=\"list-styled\">';\n      thought.tensorProperties.invariants.forEach(inv => {\n        tensorContent += `<li>${escapeHTML(inv)}</li>`;\n      });\n      tensorContent += '</ul>';\n    }\n\n    html += renderSection('Tensor Properties', tensorContent, '');\n  }\n\n  // Physical interpretation\n  if (thought.physicalInterpretation) {\n    const interpRows = [\n      ['Quantity', thought.physicalInterpretation.quantity],\n      ['Units', thought.physicalInterpretation.units],\n    ];\n\n    let interpContent = renderTable(['Property', 'Value'], interpRows);\n\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      interpContent += '<p style=\"margin-top: 1rem\"><strong>Conservation Laws:</strong></p>';\n      interpContent += '<ul class=\"list-styled\">';\n      thought.physicalInterpretation.conservationLaws.forEach(law => {\n        interpContent += `<li>${escapeHTML(law)}</li>`;\n      });\n      interpContent += '</ul>';\n    }\n\n    if (thought.physicalInterpretation.constraints && thought.physicalInterpretation.constraints.length > 0) {\n      interpContent += '<p style=\"margin-top: 1rem\"><strong>Constraints:</strong></p>';\n      interpContent += '<ul class=\"list-styled\">';\n      thought.physicalInterpretation.constraints.forEach(constraint => {\n        interpContent += `<li>${escapeHTML(constraint)}</li>`;\n      });\n      interpContent += '</ul>';\n    }\n\n    if (thought.physicalInterpretation.observables && thought.physicalInterpretation.observables.length > 0) {\n      interpContent += '<p style=\"margin-top: 1rem\"><strong>Observables:</strong></p>';\n      interpContent += '<ul class=\"list-styled\">';\n      thought.physicalInterpretation.observables.forEach(obs => {\n        interpContent += `<li>${escapeHTML(obs)}</li>`;\n      });\n      interpContent += '</ul>';\n    }\n\n    html += renderSection('Physical Interpretation', interpContent, '');\n  }\n\n  // Field theory context\n  if (thought.fieldTheoryContext) {\n    let fieldContent = `<p><strong>Symmetry Group:</strong> ${renderBadge(thought.fieldTheoryContext.symmetryGroup, 'info')}</p>`;\n\n    if (thought.fieldTheoryContext.fields.length > 0) {\n      fieldContent += '<p style=\"margin-top: 1rem\"><strong>Fields:</strong></p>';\n      fieldContent += '<ul class=\"list-styled\">';\n      thought.fieldTheoryContext.fields.forEach(field => {\n        fieldContent += `<li>${escapeHTML(field)}</li>`;\n      });\n      fieldContent += '</ul>';\n    }\n\n    if (thought.fieldTheoryContext.interactions.length > 0) {\n      fieldContent += '<p style=\"margin-top: 1rem\"><strong>Interactions:</strong></p>';\n      fieldContent += '<ul class=\"list-styled\">';\n      thought.fieldTheoryContext.interactions.forEach(interaction => {\n        fieldContent += `<li>${escapeHTML(interaction)}</li>`;\n      });\n      fieldContent += '</ul>';\n    }\n\n    if (thought.fieldTheoryContext.gaugeSymmetries && thought.fieldTheoryContext.gaugeSymmetries.length > 0) {\n      fieldContent += '<p style=\"margin-top: 1rem\"><strong>Gauge Symmetries:</strong></p>';\n      fieldContent += '<ul class=\"list-styled\">';\n      thought.fieldTheoryContext.gaugeSymmetries.forEach(gauge => {\n        fieldContent += `<li>${escapeHTML(gauge)}</li>`;\n      });\n      fieldContent += '</ul>';\n    }\n\n    html += renderSection('Field Theory Context', fieldContent, '');\n  }\n\n  // Assumptions\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    const assumptionsList = thought.assumptions.map(a => escapeHTML(a));\n    html += renderSection('Assumptions', `\n      <ul class=\"list-styled\">\n        ${assumptionsList.map(a => `<li>${a}</li>`).join('')}\n      </ul>\n    `, '');\n  }\n\n  // Dependencies\n  if (thought.dependencies && thought.dependencies.length > 0) {\n    const depsList = thought.dependencies.map(d => escapeHTML(d));\n    html += renderSection('Dependencies', `\n      <ul class=\"list-styled\">\n        ${depsList.map(d => `<li>${d}</li>`).join('')}\n      </ul>\n    `, '');\n  }\n\n  html += generateHTMLFooter(htmlStandalone);\n  return html;\n}\n\n/**\n * Export physics reasoning to Modelica format\n */\nfunction physicsToModelica(thought: PhysicsThought, options: VisualExportOptions): string {\n  const { includeMetrics = true } = options;\n\n  const packageName = sanitizeModelicaId(thought.thoughtType || 'PhysicsModel');\n  let modelica = `package ${packageName}\\n`;\n  modelica += `  \"${escapeModelicaString('Physics model for ' + (thought.thoughtType || 'physical system'))}\"\\n\\n`;\n\n  // Create main model\n  modelica += `  model PhysicalSystem\\n`;\n  modelica += `    \"${escapeModelicaString('Physical system representation')}\"\\n\\n`;\n\n  // Add tensor properties as parameters and variables\n  if (thought.tensorProperties) {\n    modelica += `    // Tensor Properties\\n`;\n    modelica += `    parameter Integer tensorRank[2] = {${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]}};\\n`;\n    modelica += `    parameter String tensorComponents = \"${escapeModelicaString(thought.tensorProperties.components)}\";\\n`;\n    modelica += `    parameter String tensorTransformation = \"${escapeModelicaString(thought.tensorProperties.transformation)}\";\\n`;\n\n    if (thought.tensorProperties.indexStructure) {\n      modelica += `    parameter String indexStructure = \"${escapeModelicaString(thought.tensorProperties.indexStructure)}\";\\n`;\n    }\n\n    if (thought.tensorProperties.coordinateSystem) {\n      modelica += `    parameter String coordinateSystem = \"${escapeModelicaString(thought.tensorProperties.coordinateSystem)}\";\\n`;\n    }\n\n    modelica += '\\n';\n  }\n\n  // Add physical interpretation as physical quantities\n  if (thought.physicalInterpretation) {\n    modelica += `    // Physical Interpretation\\n`;\n    const quantity = sanitizeModelicaId(thought.physicalInterpretation.quantity);\n    const units = thought.physicalInterpretation.units;\n\n    modelica += `    Real ${quantity}(unit=\"${escapeModelicaString(units)}\");\\n`;\n    modelica += `    parameter String physicalQuantity = \"${escapeModelicaString(thought.physicalInterpretation.quantity)}\";\\n`;\n\n    // Add conservation laws as constraints\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      modelica += `\\n    // Conservation Laws\\n`;\n      thought.physicalInterpretation.conservationLaws.forEach((law, index) => {\n        const lawVar = sanitizeModelicaId(`conservationLaw_${index + 1}`);\n        modelica += `    parameter String ${lawVar} = \"${escapeModelicaString(law)}\";\\n`;\n      });\n    }\n\n    // Add constraints as parameters\n    if (thought.physicalInterpretation.constraints && thought.physicalInterpretation.constraints.length > 0) {\n      modelica += `\\n    // Constraints\\n`;\n      thought.physicalInterpretation.constraints.forEach((constraint, index) => {\n        const constraintVar = sanitizeModelicaId(`constraint_${index + 1}`);\n        modelica += `    parameter String ${constraintVar} = \"${escapeModelicaString(constraint)}\";\\n`;\n      });\n    }\n\n    // Add observables\n    if (thought.physicalInterpretation.observables && thought.physicalInterpretation.observables.length > 0) {\n      modelica += `\\n    // Observables\\n`;\n      thought.physicalInterpretation.observables.forEach((obs, index) => {\n        const obsVar = sanitizeModelicaId(`observable_${index + 1}`);\n        modelica += `    Real ${obsVar} \"${escapeModelicaString(obs)}\";\\n`;\n      });\n    }\n\n    modelica += '\\n';\n  }\n\n  // Add field theory context\n  if (thought.fieldTheoryContext) {\n    modelica += `    // Field Theory Context\\n`;\n    modelica += `    parameter String symmetryGroup = \"${escapeModelicaString(thought.fieldTheoryContext.symmetryGroup)}\";\\n`;\n\n    if (thought.fieldTheoryContext.fields.length > 0) {\n      modelica += `\\n    // Fields\\n`;\n      thought.fieldTheoryContext.fields.forEach((field, index) => {\n        const fieldVar = sanitizeModelicaId(`field_${index + 1}`);\n        modelica += `    Real ${fieldVar} \"${escapeModelicaString(field)}\";\\n`;\n      });\n    }\n\n    if (thought.fieldTheoryContext.interactions.length > 0) {\n      modelica += `\\n    // Interactions\\n`;\n      thought.fieldTheoryContext.interactions.forEach((interaction, index) => {\n        const intVar = sanitizeModelicaId(`interaction_${index + 1}`);\n        modelica += `    parameter String ${intVar} = \"${escapeModelicaString(interaction)}\";\\n`;\n      });\n    }\n\n    if (thought.fieldTheoryContext.gaugeSymmetries && thought.fieldTheoryContext.gaugeSymmetries.length > 0) {\n      modelica += `\\n    // Gauge Symmetries\\n`;\n      thought.fieldTheoryContext.gaugeSymmetries.forEach((gauge, index) => {\n        const gaugeVar = sanitizeModelicaId(`gaugeSymmetry_${index + 1}`);\n        modelica += `    parameter String ${gaugeVar} = \"${escapeModelicaString(gauge)}\";\\n`;\n      });\n    }\n\n    modelica += '\\n';\n  }\n\n  // Add metrics\n  if (includeMetrics) {\n    modelica += `    // Metrics\\n`;\n    modelica += `    parameter Real uncertainty = ${thought.uncertainty};\\n`;\n    if (thought.assumptions && thought.assumptions.length > 0) {\n      modelica += `    parameter Integer assumptionCount = ${thought.assumptions.length};\\n`;\n    }\n    modelica += '\\n';\n  }\n\n  // Add equations section\n  modelica += `  equation\\n`;\n\n  // Add simple time derivative equation for demonstration\n  if (thought.physicalInterpretation) {\n    const quantity = sanitizeModelicaId(thought.physicalInterpretation.quantity);\n    modelica += `    // Physical evolution (placeholder)\\n`;\n    modelica += `    der(${quantity}) = 0; // Steady state or define custom dynamics\\n`;\n  }\n\n  modelica += `  end PhysicalSystem;\\n\\n`;\n\n  // Add annotations\n  modelica += `  annotation(\\n`;\n  modelica += `    Documentation(info=\"<html>\\n`;\n  modelica += `      <p>Physics model generated from reasoning thought</p>\\n`;\n  modelica += `      <p>Uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%</p>\\n`;\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    modelica += `      <p>Assumptions: ${thought.assumptions.length}</p>\\n`;\n  }\n  modelica += `    </html>\")\\n`;\n  modelica += `  );\\n`;\n\n  modelica += `end ${packageName};\\n`;\n\n  return modelica;\n}\n\n/**\n * Export physics reasoning to UML format\n */\nfunction physicsToUML(thought: PhysicsThought, options: VisualExportOptions): string {\n  const { includeLabels = true } = options;\n\n  const nodes: UmlNode[] = [];\n  const edges: UmlEdge[] = [];\n\n  // Main physics class\n  const mainId = 'PhysicsSystem';\n  nodes.push({\n    id: mainId,\n    label: includeLabels ? (thought.thoughtType || 'Physics').replace(/_/g, ' ') : 'PhysicsSystem',\n    shape: 'class',\n    attributes: [\n      `uncertainty: Real = ${thought.uncertainty.toFixed(3)}`,\n      ...(thought.assumptions ? [`assumptions: Integer = ${thought.assumptions.length}`] : []),\n    ],\n    methods: [],\n  });\n\n  // Tensor properties as a class\n  if (thought.tensorProperties) {\n    const tensorId = 'TensorProperties';\n    nodes.push({\n      id: tensorId,\n      label: 'TensorProperties',\n      shape: 'class',\n      attributes: [\n        `rank: Integer[2] = [${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]}]`,\n        `components: String = \"${thought.tensorProperties.components.substring(0, 30)}...\"`,\n        `transformation: String = \"${thought.tensorProperties.transformation}\"`,\n        ...(thought.tensorProperties.symmetries.length > 0 ? [`symmetries: Integer = ${thought.tensorProperties.symmetries.length}`] : []),\n        ...(thought.tensorProperties.invariants.length > 0 ? [`invariants: Integer = ${thought.tensorProperties.invariants.length}`] : []),\n      ],\n      methods: [],\n    });\n    edges.push({\n      source: mainId,\n      target: tensorId,\n      type: 'composition',\n      label: 'has',\n    });\n  }\n\n  // Physical interpretation as a class\n  if (thought.physicalInterpretation) {\n    const interpId = 'PhysicalInterpretation';\n    nodes.push({\n      id: interpId,\n      label: 'PhysicalInterpretation',\n      shape: 'class',\n      attributes: [\n        `quantity: String = \"${thought.physicalInterpretation.quantity}\"`,\n        `units: String = \"${thought.physicalInterpretation.units}\"`,\n        `conservationLaws: Integer = ${thought.physicalInterpretation.conservationLaws.length}`,\n        ...(thought.physicalInterpretation.constraints ? [`constraints: Integer = ${thought.physicalInterpretation.constraints.length}`] : []),\n        ...(thought.physicalInterpretation.observables ? [`observables: Integer = ${thought.physicalInterpretation.observables.length}`] : []),\n      ],\n      methods: [\n        'measure(): Real',\n        'validate(): Boolean',\n      ],\n    });\n    edges.push({\n      source: mainId,\n      target: interpId,\n      type: 'composition',\n      label: 'interprets as',\n    });\n\n    // Conservation laws as a separate class\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      const lawsId = 'ConservationLaws';\n      nodes.push({\n        id: lawsId,\n        label: 'ConservationLaws',\n        shape: 'class',\n        attributes: thought.physicalInterpretation.conservationLaws.map((law, i) =>\n          `law${i + 1}: String = \"${law.substring(0, 30)}...\"`\n        ),\n        methods: ['verify(): Boolean'],\n      });\n      edges.push({\n        source: interpId,\n        target: lawsId,\n        type: 'association',\n        label: 'enforces',\n      });\n    }\n  }\n\n  // Field theory context as a class\n  if (thought.fieldTheoryContext) {\n    const fieldId = 'FieldTheory';\n    nodes.push({\n      id: fieldId,\n      label: 'FieldTheory',\n      shape: 'class',\n      attributes: [\n        `symmetryGroup: String = \"${thought.fieldTheoryContext.symmetryGroup}\"`,\n        `fields: Integer = ${thought.fieldTheoryContext.fields.length}`,\n        `interactions: Integer = ${thought.fieldTheoryContext.interactions.length}`,\n        ...(thought.fieldTheoryContext.gaugeSymmetries ? [`gaugeSymmetries: Integer = ${thought.fieldTheoryContext.gaugeSymmetries.length}`] : []),\n      ],\n      methods: [\n        'computeField(x: Real): Real',\n        'applySymmetry(g: Group): Field',\n      ],\n    });\n    edges.push({\n      source: mainId,\n      target: fieldId,\n      type: 'composition',\n      label: 'described by',\n    });\n\n    // Fields as individual components\n    if (thought.fieldTheoryContext.fields.length > 0 && thought.fieldTheoryContext.fields.length <= 3) {\n      thought.fieldTheoryContext.fields.forEach((field, index) => {\n        const fId = `Field${index + 1}`;\n        nodes.push({\n          id: fId,\n          label: field,\n          shape: 'class',\n          attributes: ['value: Real', 'gradient: Real'],\n          methods: ['evaluate(x: Real): Real'],\n        });\n        edges.push({\n          source: fieldId,\n          target: fId,\n          type: 'aggregation',\n          label: 'contains',\n        });\n      });\n    }\n  }\n\n  return generateUmlDiagram(nodes, edges, {\n    title: 'Physics System UML',\n    includeLabels,\n  });\n}\n\n/**\n * Export physics reasoning to JSON format\n */\nfunction physicsToJSON(thought: PhysicsThought, options: VisualExportOptions): string {\n  const { includeLabels = true, includeMetrics = true } = options;\n\n  const graph = createJsonGraph('physics_system', 'Physics System Model');\n\n  // Add main type node\n  const typeId = 'type';\n  addNode(graph, {\n    id: typeId,\n    label: includeLabels ? (thought.thoughtType || 'Physics').replace(/_/g, ' ') : 'Physics',\n    type: 'thought_type',\n    metadata: {\n      thoughtType: thought.thoughtType || 'physics',\n    },\n  });\n\n  // Add tensor properties\n  if (thought.tensorProperties) {\n    const tensorId = 'tensor';\n    addNode(graph, {\n      id: tensorId,\n      label: `Tensor (${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})`,\n      type: 'tensor',\n      metadata: {\n        rank: thought.tensorProperties.rank,\n        components: thought.tensorProperties.components,\n        transformation: thought.tensorProperties.transformation,\n        indexStructure: thought.tensorProperties.indexStructure,\n        coordinateSystem: thought.tensorProperties.coordinateSystem,\n      },\n    });\n    addEdge(graph, {\n      id: 'edge_type_tensor',\n      source: typeId,\n      target: tensorId,\n      label: 'has_tensor',\n      directed: true,\n    });\n\n    // Add symmetries as nodes\n    if (thought.tensorProperties.symmetries.length > 0) {\n      thought.tensorProperties.symmetries.forEach((sym, index) => {\n        const symId = `symmetry_${index}`;\n        addNode(graph, {\n          id: symId,\n          label: sym,\n          type: 'symmetry',\n          metadata: { description: sym },\n        });\n        addEdge(graph, {\n          id: `edge_tensor_sym_${index}`,\n          source: tensorId,\n          target: symId,\n          label: 'has_symmetry',\n          directed: true,\n        });\n      });\n    }\n\n    // Add invariants as nodes\n    if (thought.tensorProperties.invariants.length > 0) {\n      thought.tensorProperties.invariants.forEach((inv, index) => {\n        const invId = `invariant_${index}`;\n        addNode(graph, {\n          id: invId,\n          label: inv,\n          type: 'invariant',\n          metadata: { description: inv },\n        });\n        addEdge(graph, {\n          id: `edge_tensor_inv_${index}`,\n          source: tensorId,\n          target: invId,\n          label: 'has_invariant',\n          directed: true,\n        });\n      });\n    }\n  }\n\n  // Add physical interpretation\n  if (thought.physicalInterpretation) {\n    const interpId = 'interpretation';\n    addNode(graph, {\n      id: interpId,\n      label: thought.physicalInterpretation.quantity,\n      type: 'physical_interpretation',\n      metadata: {\n        quantity: thought.physicalInterpretation.quantity,\n        units: thought.physicalInterpretation.units,\n        conservationLaws: thought.physicalInterpretation.conservationLaws,\n        constraints: thought.physicalInterpretation.constraints,\n        observables: thought.physicalInterpretation.observables,\n      },\n    });\n    addEdge(graph, {\n      id: 'edge_type_interp',\n      source: typeId,\n      target: interpId,\n      label: 'interprets_as',\n      directed: true,\n    });\n\n    // Add units node\n    const unitsId = 'units';\n    addNode(graph, {\n      id: unitsId,\n      label: thought.physicalInterpretation.units,\n      type: 'units',\n      metadata: { units: thought.physicalInterpretation.units },\n    });\n    addEdge(graph, {\n      id: 'edge_interp_units',\n      source: interpId,\n      target: unitsId,\n      label: 'measured_in',\n      directed: true,\n    });\n\n    // Add conservation laws\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      thought.physicalInterpretation.conservationLaws.forEach((law, index) => {\n        const lawId = `conservation_${index}`;\n        addNode(graph, {\n          id: lawId,\n          label: includeLabels ? law : `Law ${index + 1}`,\n          type: 'conservation_law',\n          metadata: { law },\n        });\n        addEdge(graph, {\n          id: `edge_interp_law_${index}`,\n          source: interpId,\n          target: lawId,\n          label: 'conserves',\n          directed: true,\n        });\n      });\n    }\n\n    // Add observables\n    if (thought.physicalInterpretation.observables && thought.physicalInterpretation.observables.length > 0) {\n      thought.physicalInterpretation.observables.forEach((obs, index) => {\n        const obsId = `observable_${index}`;\n        addNode(graph, {\n          id: obsId,\n          label: obs,\n          type: 'observable',\n          metadata: { observable: obs },\n        });\n        addEdge(graph, {\n          id: `edge_interp_obs_${index}`,\n          source: interpId,\n          target: obsId,\n          label: 'has_observable',\n          directed: true,\n        });\n      });\n    }\n  }\n\n  // Add field theory context\n  if (thought.fieldTheoryContext) {\n    const fieldId = 'field_theory';\n    addNode(graph, {\n      id: fieldId,\n      label: 'Field Theory',\n      type: 'field_theory',\n      metadata: {\n        symmetryGroup: thought.fieldTheoryContext.symmetryGroup,\n        fields: thought.fieldTheoryContext.fields,\n        interactions: thought.fieldTheoryContext.interactions,\n        gaugeSymmetries: thought.fieldTheoryContext.gaugeSymmetries,\n      },\n    });\n    addEdge(graph, {\n      id: 'edge_type_field',\n      source: typeId,\n      target: fieldId,\n      label: 'has_context',\n      directed: true,\n    });\n\n    // Add fields\n    thought.fieldTheoryContext.fields.forEach((field, index) => {\n      const fId = `field_${index}`;\n      addNode(graph, {\n        id: fId,\n        label: field,\n        type: 'field',\n        metadata: { field },\n      });\n      addEdge(graph, {\n        id: `edge_field_f_${index}`,\n        source: fieldId,\n        target: fId,\n        label: 'includes_field',\n        directed: true,\n      });\n    });\n\n    // Add symmetry group\n    const symGroupId = 'symmetry_group';\n    addNode(graph, {\n      id: symGroupId,\n      label: thought.fieldTheoryContext.symmetryGroup,\n      type: 'symmetry_group',\n      metadata: { group: thought.fieldTheoryContext.symmetryGroup },\n    });\n    addEdge(graph, {\n      id: 'edge_field_symgroup',\n      source: fieldId,\n      target: symGroupId,\n      label: 'has_symmetry_group',\n      directed: true,\n    });\n  }\n\n  // Add metrics\n  if (includeMetrics) {\n    addMetric(graph, 'uncertainty', thought.uncertainty);\n    if (thought.assumptions) {\n      addMetric(graph, 'assumption_count', thought.assumptions.length);\n    }\n    if (thought.dependencies) {\n      addMetric(graph, 'dependency_count', thought.dependencies.length);\n    }\n  }\n\n  return serializeGraph(graph);\n}\n\n/**\n * Export physics reasoning to Markdown format\n */\nfunction physicsToMarkdown(thought: PhysicsThought, options: VisualExportOptions): string {\n  const {\n    markdownIncludeFrontmatter = false,\n    markdownIncludeToc = false,\n    markdownIncludeMermaid = true,\n    includeMetrics = true,\n  } = options;\n\n  const parts: string[] = [];\n\n  // Thought type section\n  const typeContent = `**Type:** ${(thought.thoughtType || 'physics').replace(/_/g, ' ')}`;\n  parts.push(section('Overview', typeContent));\n\n  // Tensor properties section\n  if (thought.tensorProperties) {\n    const tensorContent = keyValueSection({\n      'Rank': `(${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]})`,\n      'Components': thought.tensorProperties.components,\n      'LaTeX': thought.tensorProperties.latex,\n      'Transformation': thought.tensorProperties.transformation,\n      ...(thought.tensorProperties.indexStructure ? { 'Index Structure': thought.tensorProperties.indexStructure } : {}),\n      ...(thought.tensorProperties.coordinateSystem ? { 'Coordinate System': thought.tensorProperties.coordinateSystem } : {}),\n    });\n\n    let tensorFull = tensorContent;\n\n    if (thought.tensorProperties.symmetries.length > 0) {\n      tensorFull += '\\n\\n**Symmetries:**\\n\\n' + list(thought.tensorProperties.symmetries);\n    }\n\n    if (thought.tensorProperties.invariants.length > 0) {\n      tensorFull += '\\n\\n**Invariants:**\\n\\n' + list(thought.tensorProperties.invariants);\n    }\n\n    parts.push(section('Tensor Properties', tensorFull));\n  }\n\n  // Physical interpretation section\n  if (thought.physicalInterpretation) {\n    const interpContent = keyValueSection({\n      'Quantity': thought.physicalInterpretation.quantity,\n      'Units': thought.physicalInterpretation.units,\n    });\n\n    let interpFull = interpContent;\n\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      interpFull += '\\n\\n**Conservation Laws:**\\n\\n' + list(thought.physicalInterpretation.conservationLaws);\n    }\n\n    if (thought.physicalInterpretation.constraints && thought.physicalInterpretation.constraints.length > 0) {\n      interpFull += '\\n\\n**Constraints:**\\n\\n' + list(thought.physicalInterpretation.constraints);\n    }\n\n    if (thought.physicalInterpretation.observables && thought.physicalInterpretation.observables.length > 0) {\n      interpFull += '\\n\\n**Observables:**\\n\\n' + list(thought.physicalInterpretation.observables);\n    }\n\n    parts.push(section('Physical Interpretation', interpFull));\n  }\n\n  // Field theory context section\n  if (thought.fieldTheoryContext) {\n    const fieldContent = keyValueSection({\n      'Symmetry Group': thought.fieldTheoryContext.symmetryGroup,\n    });\n\n    let fieldFull = fieldContent;\n\n    if (thought.fieldTheoryContext.fields.length > 0) {\n      fieldFull += '\\n\\n**Fields:**\\n\\n' + list(thought.fieldTheoryContext.fields);\n    }\n\n    if (thought.fieldTheoryContext.interactions.length > 0) {\n      fieldFull += '\\n\\n**Interactions:**\\n\\n' + list(thought.fieldTheoryContext.interactions);\n    }\n\n    if (thought.fieldTheoryContext.gaugeSymmetries && thought.fieldTheoryContext.gaugeSymmetries.length > 0) {\n      fieldFull += '\\n\\n**Gauge Symmetries:**\\n\\n' + list(thought.fieldTheoryContext.gaugeSymmetries);\n    }\n\n    parts.push(section('Field Theory Context', fieldFull));\n  }\n\n  // Metrics section\n  if (includeMetrics) {\n    const metricsContent = keyValueSection({\n      'Uncertainty': `${(thought.uncertainty * 100).toFixed(1)}%`,\n      ...(thought.assumptions ? { 'Assumptions': thought.assumptions.length } : {}),\n      ...(thought.dependencies ? { 'Dependencies': thought.dependencies.length } : {}),\n    });\n    parts.push(section('Metrics', metricsContent + '\\n\\n' + progressBar(thought.uncertainty * 100)));\n  }\n\n  // Assumptions section\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    parts.push(section('Assumptions', list(thought.assumptions)));\n  }\n\n  // Dependencies section\n  if (thought.dependencies && thought.dependencies.length > 0) {\n    parts.push(section('Dependencies', list(thought.dependencies)));\n  }\n\n  // Mermaid diagram\n  if (markdownIncludeMermaid) {\n    const mermaidDiagram = physicsToMermaid(thought, 'default', true, true);\n    parts.push(section('Visualization', mermaidBlock(mermaidDiagram)));\n  }\n\n  return mdDocument('Physics Analysis', parts.join('\\n'), {\n    includeFrontmatter: markdownIncludeFrontmatter,\n    includeTableOfContents: markdownIncludeToc,\n    metadata: {\n      mode: 'physics',\n      thoughtType: thought.thoughtType || 'physics',\n      uncertainty: thought.uncertainty,\n    },\n  });\n}\n","/**\n * Hybrid Visual Exporter (v7.0.3)\n * Phase 7 Sprint 2: Hybrid mode reasoning export to Mermaid, DOT, ASCII\n * Phase 9: Added native SVG export support, GraphML, TikZ\n */\n\nimport type { HybridThought } from '../../../types/core.js';\nimport type { VisualExportOptions } from '../types.js';\nimport { sanitizeId } from '../utils.js';\nimport {\n  generateSVGHeader,\n  generateSVGFooter,\n  renderRectNode,\n  renderEllipseNode,\n  renderStadiumNode,\n  renderEdge,\n  renderMetricsPanel,\n  renderLegend,\n  getNodeColor,\n  DEFAULT_SVG_OPTIONS,\n  type SVGNodePosition,\n} from '../utils/svg.js';\nimport {\n  generateGraphML,\n  type GraphMLNode,\n  type GraphMLEdge,\n} from '../utils/graphml.js';\nimport {\n  generateTikZ,\n  type TikZNode,\n  type TikZEdge,\n} from '../utils/tikz.js';\nimport {\n  generateHTMLHeader,\n  generateHTMLFooter,\n  escapeHTML,\n  renderMetricCard,\n  renderSection,\n  renderTable,\n  renderBadge,\n} from '../utils/html.js';\nimport {\n  sanitizeModelicaId,\n  escapeModelicaString,\n} from '../utils/modelica.js';\nimport {\n  generateUmlDiagram,\n  type UmlNode,\n  type UmlEdge,\n} from '../utils/uml.js';\nimport {\n  createJsonGraph,\n  addNode,\n  addEdge,\n  addMetric,\n  addLegendItem,\n  serializeGraph,\n} from '../utils/json.js';\nimport {\n  section,\n  table,\n  list,\n  keyValueSection,\n  mermaidBlock,\n  document as mdDocument,\n} from '../utils/markdown.js';\n\n/**\n * Export hybrid reasoning to visual format\n */\nexport function exportHybridOrchestration(thought: HybridThought, options: VisualExportOptions): string {\n  const { format, colorScheme = 'default', includeMetrics = true } = options;\n  const includeLabels = options.includeLabels !== false;\n\n  switch (format) {\n    case 'mermaid':\n      return hybridToMermaid(thought, colorScheme, includeLabels, includeMetrics);\n    case 'dot':\n      return hybridToDOT(thought, includeLabels, includeMetrics);\n    case 'ascii':\n      return hybridToASCII(thought);\n    case 'svg':\n      return hybridToSVG(thought, options);\n    case 'graphml':\n      return hybridToGraphML(thought, options);\n    case 'tikz':\n      return hybridToTikZ(thought, options);\n    case 'html':\n      return hybridToHTML(thought, options);\n    case 'modelica':\n      return hybridToModelica(thought, options);\n    case 'uml':\n      return hybridToUML(thought, options);\n    case 'json':\n      return hybridToJSON(thought, options);\n    case 'markdown':\n      return hybridToMarkdown(thought, options);\n    default:\n      throw new Error(`Unsupported format: ${format}`);\n  }\n}\n\nfunction hybridToMermaid(\n  thought: HybridThought,\n  colorScheme: string,\n  includeLabels: boolean,\n  includeMetrics: boolean\n): string {\n  let mermaid = 'graph TB\\n';\n\n  // Add hybrid mode node (central orchestrator)\n  const hybridId = sanitizeId('hybrid_mode');\n  mermaid += `  ${hybridId}((\"Hybrid Mode\"))\\n`;\n\n  // Add primary mode\n  const primaryId = sanitizeId(`primary_${thought.primaryMode}`);\n  const primaryLabel = includeLabels ? thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1) : primaryId;\n  mermaid += `  ${primaryId}[[\"${primaryLabel}\"]]\\n`;\n  mermaid += `  ${hybridId} ==> ${primaryId}\\n`;\n\n  // Add secondary features\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    const secondaryId = sanitizeId('secondary_features');\n    mermaid += `  ${secondaryId}([\"Secondary Features\"])\\n`;\n    mermaid += `  ${hybridId} --> ${secondaryId}\\n`;\n\n    thought.secondaryFeatures.forEach((feature, index) => {\n      const featureId = sanitizeId(`feature_${index}`);\n      const featureLabel = includeLabels ? feature.slice(0, 30) + (feature.length > 30 ? '...' : '') : `Feature ${index + 1}`;\n      mermaid += `  ${featureId}[\"${featureLabel}\"]\\n`;\n      mermaid += `  ${secondaryId} --> ${featureId}\\n`;\n    });\n  }\n\n  // Add switch reason if present\n  if (thought.switchReason) {\n    const switchId = sanitizeId('switch_reason');\n    const switchLabel = includeLabels\n      ? thought.switchReason.slice(0, 40) + (thought.switchReason.length > 40 ? '...' : '')\n      : 'Switch Reason';\n    mermaid += `  ${switchId}>\"${switchLabel}\"]\\n`;\n    mermaid += `  ${hybridId} -.-> ${switchId}\\n`;\n  }\n\n  // Add stage if present (Shannon-style staging)\n  if (thought.stage) {\n    const stageId = sanitizeId(`stage_${thought.stage}`);\n    const stageLabel = thought.stage.replace(/_/g, ' ');\n    mermaid += `  ${stageId}{{\"Stage: ${stageLabel}\"}}\\n`;\n    mermaid += `  ${primaryId} --> ${stageId}\\n`;\n  }\n\n  // Add mathematical model if present\n  if (thought.mathematicalModel) {\n    const modelId = sanitizeId('math_model');\n    const modelLabel = thought.mathematicalModel.symbolic || 'Mathematical Model';\n    mermaid += `  ${modelId}[\"${modelLabel}\"]\\n`;\n    mermaid += `  ${primaryId} --> ${modelId}\\n`;\n  }\n\n  // Add tensor properties if present\n  if (thought.tensorProperties) {\n    const tensorId = sanitizeId('tensor');\n    const tensorLabel = `Tensor (${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})`;\n    mermaid += `  ${tensorId}[/\"${tensorLabel}\"/]\\n`;\n    mermaid += `  ${primaryId} --> ${tensorId}\\n`;\n  }\n\n  // Add physical interpretation if present\n  if (thought.physicalInterpretation) {\n    const physId = sanitizeId('physical');\n    mermaid += `  ${physId}[/\"${thought.physicalInterpretation.quantity}\"/]\\n`;\n    mermaid += `  ${primaryId} --> ${physId}\\n`;\n  }\n\n  // Add uncertainty metric\n  if (includeMetrics && thought.uncertainty !== undefined) {\n    const uncertId = sanitizeId('uncertainty');\n    const uncertLabel = `Uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%`;\n    mermaid += `  ${uncertId}{{${uncertLabel}}}\\n`;\n  }\n\n  // Add assumptions\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    const assumptionsId = sanitizeId('assumptions');\n    mermaid += `  ${assumptionsId}>\"Assumptions: ${thought.assumptions.length}\"]\\n`;\n  }\n\n  // Add dependencies\n  if (thought.dependencies && thought.dependencies.length > 0) {\n    const depsId = sanitizeId('dependencies');\n    mermaid += `  ${depsId}>\"Dependencies: ${thought.dependencies.length}\"]\\n`;\n  }\n\n  // Color scheme\n  if (colorScheme !== 'monochrome') {\n    const colors = colorScheme === 'pastel'\n      ? { hybrid: '#e8f4e8', primary: '#e3f2fd', secondary: '#fff3e0' }\n      : { hybrid: '#90EE90', primary: '#87CEEB', secondary: '#FFD700' };\n\n    mermaid += `\\n  style ${hybridId} fill:${colors.hybrid}\\n`;\n    mermaid += `  style ${primaryId} fill:${colors.primary}\\n`;\n    if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n      mermaid += `  style ${sanitizeId('secondary_features')} fill:${colors.secondary}\\n`;\n    }\n  }\n\n  return mermaid;\n}\n\nfunction hybridToDOT(\n  thought: HybridThought,\n  includeLabels: boolean,\n  includeMetrics: boolean\n): string {\n  let dot = 'digraph HybridOrchestration {\\n';\n  dot += '  rankdir=TB;\\n';\n  dot += '  node [shape=box, style=rounded];\\n\\n';\n\n  // Hybrid mode node (central)\n  const hybridId = sanitizeId('hybrid_mode');\n  dot += `  ${hybridId} [label=\"Hybrid Mode\", shape=doubleoctagon];\\n`;\n\n  // Primary mode\n  const primaryId = sanitizeId(`primary_${thought.primaryMode}`);\n  const primaryLabel = thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1);\n  dot += `  ${primaryId} [label=\"${primaryLabel}\", shape=box, style=\"filled,rounded\", fillcolor=lightblue];\\n`;\n  dot += `  ${hybridId} -> ${primaryId} [style=bold, penwidth=2];\\n`;\n\n  // Secondary features\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    const secondaryId = sanitizeId('secondary_features');\n    dot += `  ${secondaryId} [label=\"Secondary Features\", shape=ellipse];\\n`;\n    dot += `  ${hybridId} -> ${secondaryId};\\n`;\n\n    thought.secondaryFeatures.forEach((feature, index) => {\n      const featureId = sanitizeId(`feature_${index}`);\n      const featureLabel = includeLabels ? feature.slice(0, 25).replace(/\"/g, '\"') : `Feature ${index + 1}`;\n      dot += `  ${featureId} [label=\"${featureLabel}\"];\\n`;\n      dot += `  ${secondaryId} -> ${featureId};\\n`;\n    });\n  }\n\n  // Switch reason\n  if (thought.switchReason) {\n    const switchId = sanitizeId('switch_reason');\n    const switchLabel = includeLabels\n      ? thought.switchReason.slice(0, 30).replace(/\"/g, '\"')\n      : 'Switch Reason';\n    dot += `  ${switchId} [label=\"${switchLabel}\", shape=note];\\n`;\n    dot += `  ${hybridId} -> ${switchId} [style=dashed];\\n`;\n  }\n\n  // Stage\n  if (thought.stage) {\n    const stageId = sanitizeId(`stage_${thought.stage}`);\n    dot += `  ${stageId} [label=\"${thought.stage.replace(/_/g, ' ')}\", shape=diamond];\\n`;\n    dot += `  ${primaryId} -> ${stageId};\\n`;\n  }\n\n  // Mathematical model\n  if (thought.mathematicalModel) {\n    const modelId = sanitizeId('math_model');\n    const modelLabel = thought.mathematicalModel.symbolic\n      ? thought.mathematicalModel.symbolic.slice(0, 25).replace(/\"/g, '\"')\n      : 'Math Model';\n    dot += `  ${modelId} [label=\"${modelLabel}\", shape=parallelogram];\\n`;\n    dot += `  ${primaryId} -> ${modelId};\\n`;\n  }\n\n  // Tensor properties\n  if (thought.tensorProperties) {\n    const tensorId = sanitizeId('tensor');\n    dot += `  ${tensorId} [label=\"Tensor (${thought.tensorProperties.rank[0]},${thought.tensorProperties.rank[1]})\", shape=parallelogram];\\n`;\n    dot += `  ${primaryId} -> ${tensorId};\\n`;\n  }\n\n  // Physical interpretation\n  if (thought.physicalInterpretation) {\n    const physId = sanitizeId('physical');\n    dot += `  ${physId} [label=\"${thought.physicalInterpretation.quantity}\", shape=parallelogram];\\n`;\n    dot += `  ${primaryId} -> ${physId};\\n`;\n  }\n\n  // Uncertainty\n  if (includeMetrics && thought.uncertainty !== undefined) {\n    const uncertId = sanitizeId('uncertainty');\n    dot += `  ${uncertId} [label=\"${(thought.uncertainty * 100).toFixed(1)}%\", shape=diamond];\\n`;\n  }\n\n  dot += '}\\n';\n  return dot;\n}\n\nfunction hybridToASCII(thought: HybridThought): string {\n  let ascii = 'Hybrid Mode Orchestration:\\n';\n  ascii += '==========================\\n\\n';\n\n  // Primary mode\n  ascii += `Primary Mode: ${thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1)}\\n`;\n\n  // Stage\n  if (thought.stage) {\n    ascii += `Current Stage: ${thought.stage.replace(/_/g, ' ')}\\n`;\n  }\n\n  // Uncertainty\n  if (thought.uncertainty !== undefined) {\n    ascii += `Uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%\\n`;\n  }\n\n  ascii += '\\n';\n\n  // Switch reason\n  if (thought.switchReason) {\n    ascii += `Switch Reason: ${thought.switchReason}\\n\\n`;\n  }\n\n  // Secondary features\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    ascii += 'Secondary Features:\\n';\n    thought.secondaryFeatures.forEach((feature, index) => {\n      ascii += `  ${index + 1}. ${feature}\\n`;\n    });\n    ascii += '\\n';\n  }\n\n  // Mathematical model\n  if (thought.mathematicalModel) {\n    ascii += 'Mathematical Model:\\n';\n    ascii += `  LaTeX: ${thought.mathematicalModel.latex}\\n`;\n    ascii += `  Symbolic: ${thought.mathematicalModel.symbolic}\\n`;\n    if (thought.mathematicalModel.ascii) {\n      ascii += `  ASCII: ${thought.mathematicalModel.ascii}\\n`;\n    }\n    ascii += '\\n';\n  }\n\n  // Tensor properties\n  if (thought.tensorProperties) {\n    ascii += 'Tensor Properties:\\n';\n    ascii += `  Rank: (${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]})\\n`;\n    ascii += `  Components: ${thought.tensorProperties.components}\\n`;\n    ascii += `  Transformation: ${thought.tensorProperties.transformation}\\n`;\n    if (thought.tensorProperties.symmetries.length > 0) {\n      ascii += '  Symmetries:\\n';\n      thought.tensorProperties.symmetries.forEach((sym, index) => {\n        ascii += `    ${index + 1}. ${sym}\\n`;\n      });\n    }\n    ascii += '\\n';\n  }\n\n  // Physical interpretation\n  if (thought.physicalInterpretation) {\n    ascii += 'Physical Interpretation:\\n';\n    ascii += `  Quantity: ${thought.physicalInterpretation.quantity}\\n`;\n    ascii += `  Units: ${thought.physicalInterpretation.units}\\n`;\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      ascii += '  Conservation Laws:\\n';\n      thought.physicalInterpretation.conservationLaws.forEach((law, index) => {\n        ascii += `    ${index + 1}. ${law}\\n`;\n      });\n    }\n    ascii += '\\n';\n  }\n\n  // Assumptions\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    ascii += 'Assumptions:\\n';\n    thought.assumptions.forEach((assumption, index) => {\n      ascii += `  ${index + 1}. ${assumption}\\n`;\n    });\n    ascii += '\\n';\n  }\n\n  // Dependencies\n  if (thought.dependencies && thought.dependencies.length > 0) {\n    ascii += 'Dependencies:\\n';\n    thought.dependencies.forEach((dep, index) => {\n      ascii += `  ${index + 1}. ${dep}\\n`;\n    });\n    ascii += '\\n';\n  }\n\n  // Revision reason\n  if (thought.revisionReason) {\n    ascii += `Revision Reason: ${thought.revisionReason}\\n`;\n  }\n\n  return ascii;\n}\n\n/**\n * Export hybrid reasoning to native SVG format\n */\nfunction hybridToSVG(thought: HybridThought, options: VisualExportOptions): string {\n  const {\n    colorScheme = 'default',\n    includeLabels = true,\n    includeMetrics = true,\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\n    svgHeight = DEFAULT_SVG_OPTIONS.height,\n  } = options;\n\n  const positions = new Map<string, SVGNodePosition>();\n  const nodeWidth = 150;\n  const nodeHeight = 40;\n\n  // Hybrid mode at the center\n  positions.set('hybrid', {\n    id: 'hybrid',\n    label: 'Hybrid Mode',\n    x: svgWidth / 2,\n    y: 100,\n    width: nodeWidth,\n    height: nodeHeight,\n    type: 'hybrid',\n  });\n\n  // Primary mode\n  positions.set('primary', {\n    id: 'primary',\n    label: thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1),\n    x: svgWidth / 2,\n    y: 240,\n    width: nodeWidth,\n    height: nodeHeight,\n    type: 'primary',\n  });\n\n  // Secondary features\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    thought.secondaryFeatures.forEach((feature, index) => {\n      positions.set(`feature_${index}`, {\n        id: `feature_${index}`,\n        label: includeLabels ? feature.substring(0, 30) + (feature.length > 30 ? '...' : '') : `Feature ${index + 1}`,\n        x: 150 + index * 180,\n        y: 380,\n        width: nodeWidth,\n        height: nodeHeight,\n        type: 'feature',\n      });\n    });\n  }\n\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Hybrid Mode Orchestration');\n\n  // Render edges\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\n\n  const hybridPos = positions.get('hybrid');\n  const primaryPos = positions.get('primary');\n\n  if (hybridPos && primaryPos) {\n    svg += renderEdge(hybridPos, primaryPos, { style: 'solid' });\n  }\n\n  // Edges from hybrid to features\n  if (thought.secondaryFeatures) {\n    thought.secondaryFeatures.forEach((_, index) => {\n      const featurePos = positions.get(`feature_${index}`);\n      if (hybridPos && featurePos) {\n        svg += renderEdge(hybridPos, featurePos);\n      }\n    });\n  }\n\n  svg += '\\n  </g>';\n\n  // Render nodes\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\n\n  const hybridColors = getNodeColor('success', colorScheme);\n  const primaryColors = getNodeColor('primary', colorScheme);\n  const featureColors = getNodeColor('secondary', colorScheme);\n\n  for (const [, pos] of positions) {\n    if (pos.type === 'hybrid') {\n      svg += renderEllipseNode(pos, hybridColors);\n    } else if (pos.type === 'primary') {\n      svg += renderStadiumNode(pos, primaryColors);\n    } else if (pos.type === 'feature') {\n      svg += renderRectNode(pos, featureColors);\n    }\n  }\n  svg += '\\n  </g>';\n\n  // Render metrics panel\n  if (includeMetrics) {\n    const metrics = [\n      { label: 'Primary Mode', value: thought.primaryMode },\n      { label: 'Secondary Features', value: thought.secondaryFeatures?.length || 0 },\n      { label: 'Uncertainty', value: thought.uncertainty !== undefined ? `${(thought.uncertainty * 100).toFixed(1)}%` : 'N/A' },\n    ];\n    svg += renderMetricsPanel(svgWidth - 200, svgHeight - 120, metrics);\n  }\n\n  // Render legend\n  const legendItems = [\n    { label: 'Hybrid Mode', color: hybridColors, shape: 'ellipse' as const },\n    { label: 'Primary Mode', color: primaryColors, shape: 'stadium' as const },\n    { label: 'Secondary Feature', color: featureColors },\n  ];\n  svg += renderLegend(20, svgHeight - 110, legendItems);\n\n  svg += '\\n' + generateSVGFooter();\n  return svg;\n}\n\n/**\n * Export hybrid orchestration to GraphML format\n */\nfunction hybridToGraphML(thought: HybridThought, options: VisualExportOptions): string {\n  const { includeLabels = true } = options;\n\n  // Build nodes for hybrid orchestration\n  const nodes: GraphMLNode[] = [];\n  const edges: GraphMLEdge[] = [];\n\n  // Central hybrid mode node\n  nodes.push({\n    id: sanitizeId('hybrid_mode'),\n    label: includeLabels ? 'Hybrid Mode' : 'hybrid',\n    type: 'hybrid',\n  });\n\n  // Primary mode node\n  const primaryId = sanitizeId(`primary_${thought.primaryMode}`);\n  nodes.push({\n    id: primaryId,\n    label: includeLabels ? thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1) : thought.primaryMode,\n    type: 'primary',\n  });\n\n  // Edge from hybrid to primary\n  edges.push({\n    id: 'e_hybrid_primary',\n    source: sanitizeId('hybrid_mode'),\n    target: primaryId,\n    directed: true,\n  });\n\n  // Secondary features\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    thought.secondaryFeatures.forEach((feature, index) => {\n      const featureId = sanitizeId(`feature_${index}`);\n      nodes.push({\n        id: featureId,\n        label: includeLabels ? feature.substring(0, 50) + (feature.length > 50 ? '...' : '') : `Feature ${index + 1}`,\n        type: 'secondary',\n      });\n\n      // Edge from hybrid to feature\n      edges.push({\n        id: `e_hybrid_feature_${index}`,\n        source: sanitizeId('hybrid_mode'),\n        target: featureId,\n        directed: true,\n      });\n    });\n  }\n\n  // Add stage node if present\n  if (thought.stage) {\n    const stageId = sanitizeId(`stage_${thought.stage}`);\n    nodes.push({\n      id: stageId,\n      label: includeLabels ? thought.stage.replace(/_/g, ' ') : 'stage',\n      type: 'stage',\n    });\n\n    edges.push({\n      id: 'e_primary_stage',\n      source: primaryId,\n      target: stageId,\n      directed: true,\n    });\n  }\n\n  return generateGraphML(nodes, edges, {\n    graphName: 'Hybrid Orchestration',\n    directed: true,\n    includeLabels,\n  });\n}\n\n/**\n * Export hybrid orchestration to TikZ format\n */\nfunction hybridToTikZ(thought: HybridThought, options: VisualExportOptions): string {\n  const { includeLabels = true, colorScheme = 'default' } = options;\n\n  // Build nodes for hybrid orchestration\n  const nodes: TikZNode[] = [];\n  const edges: TikZEdge[] = [];\n\n  // Central hybrid mode node (top of orchestration)\n  nodes.push({\n    id: sanitizeId('hybrid_mode'),\n    label: includeLabels ? 'Hybrid Mode' : 'hybrid',\n    x: 4,\n    y: 0,\n    type: 'success',\n    shape: 'ellipse',\n  });\n\n  // Primary mode node (below hybrid)\n  const primaryId = sanitizeId(`primary_${thought.primaryMode}`);\n  nodes.push({\n    id: primaryId,\n    label: includeLabels ? thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1) : thought.primaryMode,\n    x: 4,\n    y: -2,\n    type: 'primary',\n    shape: 'stadium',\n  });\n\n  // Edge from hybrid to primary\n  edges.push({\n    source: sanitizeId('hybrid_mode'),\n    target: primaryId,\n    directed: true,\n  });\n\n  // Secondary features (positioned horizontally below primary)\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    const featureCount = thought.secondaryFeatures.length;\n    const spacing = 3;\n    const totalWidth = (featureCount - 1) * spacing;\n    const startX = 4 - totalWidth / 2;\n\n    thought.secondaryFeatures.forEach((feature, index) => {\n      const featureId = sanitizeId(`feature_${index}`);\n      nodes.push({\n        id: featureId,\n        label: includeLabels ? (feature.length > 20 ? feature.substring(0, 20) + '...' : feature) : `F${index + 1}`,\n        x: startX + index * spacing,\n        y: -4,\n        type: 'secondary',\n        shape: 'rectangle',\n      });\n\n      // Edge from primary to feature\n      edges.push({\n        source: primaryId,\n        target: featureId,\n        directed: true,\n      });\n    });\n  }\n\n  // Add stage node if present\n  if (thought.stage) {\n    const stageId = sanitizeId(`stage_${thought.stage}`);\n    nodes.push({\n      id: stageId,\n      label: includeLabels ? thought.stage.replace(/_/g, ' ') : 'stage',\n      x: 7,\n      y: -2,\n      type: 'info',\n      shape: 'diamond',\n    });\n\n    edges.push({\n      source: primaryId,\n      target: stageId,\n      directed: true,\n      style: 'dashed',\n    });\n  }\n\n  return generateTikZ(nodes, edges, {\n    title: 'Hybrid Orchestration',\n    colorScheme,\n    includeLabels,\n  });\n}\n\n/**\n * Export hybrid orchestration to HTML format\n */\nfunction hybridToHTML(thought: HybridThought, options: VisualExportOptions): string {\n  const {\n    htmlStandalone = true,\n    htmlTitle = 'Hybrid Mode Orchestration',\n    htmlTheme = 'light',\n  } = options;\n\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\n\n  // Metrics\n  html += '<div class=\"metrics-grid\">';\n  html += renderMetricCard('Primary Mode', thought.primaryMode, 'primary');\n  if (thought.secondaryFeatures) {\n    html += renderMetricCard('Secondary Features', thought.secondaryFeatures.length, 'info');\n  }\n  if (thought.uncertainty !== undefined) {\n    html += renderMetricCard('Uncertainty', `${(thought.uncertainty * 100).toFixed(1)}%`, 'warning');\n  }\n  if (thought.stage) {\n    html += renderMetricCard('Stage', thought.stage.replace(/_/g, ' '), 'secondary');\n  }\n  html += '</div>\\n';\n\n  // Badges\n  const badges = [];\n  badges.push(renderBadge(`Primary: ${thought.primaryMode}`, 'primary'));\n  if (thought.stage) {\n    badges.push(renderBadge(thought.stage.replace(/_/g, ' '), 'info'));\n  }\n\n  html += `<div class=\"flex gap-1 flex-wrap\" style=\"margin: 1rem 0\">${badges.join(' ')}</div>\\n`;\n\n  // Switch reason\n  if (thought.switchReason) {\n    html += renderSection('Mode Switch Reason', `\n      <p>${escapeHTML(thought.switchReason)}</p>\n    `, '');\n  }\n\n  // Secondary features\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    const featuresContent = `\n      <ul class=\"list-styled\">\n        ${thought.secondaryFeatures.map(f => `<li>${escapeHTML(f)}</li>`).join('')}\n      </ul>\n    `;\n    html += renderSection('Secondary Features', featuresContent, '');\n  }\n\n  // Mathematical model\n  if (thought.mathematicalModel) {\n    const modelContent = `\n      <p><strong>LaTeX:</strong> <code>${escapeHTML(thought.mathematicalModel.latex)}</code></p>\n      <p><strong>Symbolic:</strong> <code>${escapeHTML(thought.mathematicalModel.symbolic)}</code></p>\n      ${thought.mathematicalModel.ascii ? `<p><strong>ASCII:</strong> <code>${escapeHTML(thought.mathematicalModel.ascii)}</code></p>` : ''}\n    `;\n    html += renderSection('Mathematical Model', modelContent, '');\n  }\n\n  // Tensor properties\n  if (thought.tensorProperties) {\n    const tensorRows = [\n      ['Rank', `(${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]})`],\n      ['Components', thought.tensorProperties.components],\n      ['Transformation', thought.tensorProperties.transformation],\n    ];\n\n    let tensorContent = renderTable(['Property', 'Value'], tensorRows);\n\n    if (thought.tensorProperties.symmetries.length > 0) {\n      tensorContent += '<p style=\"margin-top: 1rem\"><strong>Symmetries:</strong></p>';\n      tensorContent += '<ul class=\"list-styled\">';\n      thought.tensorProperties.symmetries.forEach(sym => {\n        tensorContent += `<li>${escapeHTML(sym)}</li>`;\n      });\n      tensorContent += '</ul>';\n    }\n\n    html += renderSection('Tensor Properties', tensorContent, '');\n  }\n\n  // Physical interpretation\n  if (thought.physicalInterpretation) {\n    const interpRows = [\n      ['Quantity', thought.physicalInterpretation.quantity],\n      ['Units', thought.physicalInterpretation.units],\n    ];\n\n    let interpContent = renderTable(['Property', 'Value'], interpRows);\n\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      interpContent += '<p style=\"margin-top: 1rem\"><strong>Conservation Laws:</strong></p>';\n      interpContent += '<ul class=\"list-styled\">';\n      thought.physicalInterpretation.conservationLaws.forEach(law => {\n        interpContent += `<li>${escapeHTML(law)}</li>`;\n      });\n      interpContent += '</ul>';\n    }\n\n    html += renderSection('Physical Interpretation', interpContent, '');\n  }\n\n  // Assumptions\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    const assumptionsList = thought.assumptions.map(a => escapeHTML(a));\n    html += renderSection('Assumptions', `\n      <ul class=\"list-styled\">\n        ${assumptionsList.map(a => `<li>${a}</li>`).join('')}\n      </ul>\n    `, '');\n  }\n\n  // Dependencies\n  if (thought.dependencies && thought.dependencies.length > 0) {\n    const depsList = thought.dependencies.map(d => escapeHTML(d));\n    html += renderSection('Dependencies', `\n      <ul class=\"list-styled\">\n        ${depsList.map(d => `<li>${d}</li>`).join('')}\n      </ul>\n    `, '');\n  }\n\n  // Revision reason\n  if (thought.revisionReason) {\n    html += renderSection('Revision Reason', `\n      <p>${escapeHTML(thought.revisionReason)}</p>\n    `, '');\n  }\n\n  html += generateHTMLFooter(htmlStandalone);\n  return html;\n}\n\n/**\n * Export hybrid orchestration to Modelica format\n */\nfunction hybridToModelica(thought: HybridThought, options: VisualExportOptions): string {\n  const { includeMetrics = true } = options;\n\n  let modelica = '// Hybrid Mode Orchestration\\n';\n  modelica += '// Multi-mode reasoning orchestration package\\n\\n';\n\n  const packageName = sanitizeModelicaId('HybridOrchestration');\n  modelica += `package ${packageName}\\n`;\n  modelica += '  \"Hybrid mode reasoning orchestration with primary and secondary features\"\\n\\n';\n\n  // Mode configuration record\n  modelica += '  record ModeConfiguration\\n';\n  modelica += '    \"Configuration for a reasoning mode\"\\n';\n  modelica += '    String modeName \"Name of the reasoning mode\";\\n';\n  modelica += '    Real weight \"Weight/importance in orchestration (0-1)\";\\n';\n  modelica += '    Boolean isPrimary \"Whether this is the primary mode\";\\n';\n  modelica += '  end ModeConfiguration;\\n\\n';\n\n  // Orchestrator model\n  modelica += '  model Orchestrator\\n';\n  modelica += '    \"Hybrid mode orchestration controller\"\\n\\n';\n\n  // Parameters\n  modelica += '    // Mode configuration\\n';\n  const primaryMode = escapeModelicaString(thought.primaryMode);\n  modelica += `    parameter String primaryMode = \"${primaryMode}\" \"Primary reasoning mode\";\\n`;\n\n  if (thought.stage) {\n    const stage = escapeModelicaString(thought.stage.replace(/_/g, ' '));\n    modelica += `    parameter String currentStage = \"${stage}\" \"Current orchestration stage\";\\n`;\n  }\n\n  if (includeMetrics && thought.uncertainty !== undefined) {\n    modelica += `    parameter Real uncertainty = ${thought.uncertainty.toFixed(4)} \"Orchestration uncertainty (0-1)\";\\n`;\n  }\n\n  // Secondary features count\n  const featureCount = thought.secondaryFeatures?.length || 0;\n  modelica += `    parameter Integer secondaryCount = ${featureCount} \"Number of secondary features\";\\n`;\n\n  modelica += '\\n    // Mode weights\\n';\n  modelica += '    parameter Real primaryWeight = 0.7 \"Primary mode weight\";\\n';\n  modelica += '    parameter Real secondaryWeight = 0.3 \"Secondary features weight\";\\n\\n';\n\n  // Variables\n  modelica += '    // State variables\\n';\n  modelica += '    Real orchestrationEfficiency(start=1.0) \"Overall orchestration efficiency\";\\n';\n  modelica += '    Real modeBalance \"Balance between primary and secondary modes\";\\n';\n  modelica += '    Boolean isActive(start=true) \"Whether orchestration is active\";\\n\\n';\n\n  // Equations\n  modelica += '  equation\\n';\n  modelica += '    // Orchestration efficiency decreases with uncertainty\\n';\n  if (thought.uncertainty !== undefined) {\n    modelica += `    orchestrationEfficiency = 1.0 - ${thought.uncertainty.toFixed(4)};\\n`;\n  } else {\n    modelica += '    orchestrationEfficiency = 1.0;\\n';\n  }\n  modelica += '    \\n';\n  modelica += '    // Mode balance based on weights\\n';\n  modelica += '    modeBalance = primaryWeight / (primaryWeight + secondaryWeight);\\n';\n  modelica += '    \\n';\n  modelica += '    // Orchestration is active when efficiency is above threshold\\n';\n  modelica += '    isActive = orchestrationEfficiency > 0.5;\\n\\n';\n\n  // Annotations\n  modelica += '  annotation(\\n';\n  modelica += '    Documentation(info=\"<html>\\n';\n  modelica += `      <p>Hybrid mode orchestration combining ${primaryMode}`;\n  if (featureCount > 0) {\n    modelica += ` with ${featureCount} secondary features`;\n  }\n  modelica += '.</p>\\n';\n\n  if (thought.switchReason) {\n    const switchReason = escapeModelicaString(thought.switchReason);\n    modelica += `      <p><b>Switch Reason:</b> ${switchReason}</p>\\n`;\n  }\n\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    modelica += '      <p><b>Assumptions:</b></p>\\n';\n    modelica += '      <ul>\\n';\n    thought.assumptions.forEach(assumption => {\n      const escapedAssumption = escapeModelicaString(assumption);\n      modelica += `        <li>${escapedAssumption}</li>\\n`;\n    });\n    modelica += '      </ul>\\n';\n  }\n\n  modelica += '    </html>\")\\n';\n  modelica += '  );\\n';\n  modelica += '  end Orchestrator;\\n\\n';\n\n  // Secondary features as separate components\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    modelica += '  // Secondary feature models\\n';\n    thought.secondaryFeatures.forEach((feature, index) => {\n      const featureId = sanitizeModelicaId(`Feature${index + 1}`);\n      const featureDesc = escapeModelicaString(feature.substring(0, 60));\n\n      modelica += `  model ${featureId}\\n`;\n      modelica += `    \"Secondary feature: ${featureDesc}\"\\n`;\n      modelica += '    parameter Real contribution = 0.1 \"Contribution to orchestration\";\\n';\n      modelica += '    Real effectiveness \"Feature effectiveness\";\\n';\n      modelica += '  equation\\n';\n      modelica += '    effectiveness = contribution;\\n';\n      modelica += `  end ${featureId};\\n\\n`;\n    });\n  }\n\n  // Mathematical model component if present\n  if (thought.mathematicalModel) {\n    modelica += '  model MathematicalModel\\n';\n    modelica += '    \"Mathematical model integration\"\\n';\n    const symbolicModel = escapeModelicaString(thought.mathematicalModel.symbolic || 'Unknown');\n    modelica += `    parameter String symbolic = \"${symbolicModel}\" \"Symbolic representation\";\\n`;\n    if (thought.mathematicalModel.ascii) {\n      const asciiModel = escapeModelicaString(thought.mathematicalModel.ascii);\n      modelica += `    parameter String ascii = \"${asciiModel}\" \"ASCII representation\";\\n`;\n    }\n    modelica += '  end MathematicalModel;\\n\\n';\n  }\n\n  // Tensor properties component if present\n  if (thought.tensorProperties) {\n    modelica += '  model TensorProperties\\n';\n    modelica += '    \"Tensor analysis integration\"\\n';\n    modelica += `    parameter Integer rank[2] = {${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]}} \"Tensor rank\";\\n`;\n    const components = escapeModelicaString(thought.tensorProperties.components);\n    modelica += `    parameter String components = \"${components}\" \"Tensor components\";\\n`;\n    const transformation = escapeModelicaString(thought.tensorProperties.transformation);\n    modelica += `    parameter String transformation = \"${transformation}\" \"Transformation rule\";\\n`;\n    modelica += '  end TensorProperties;\\n\\n';\n  }\n\n  // Physical interpretation component if present\n  if (thought.physicalInterpretation) {\n    modelica += '  model PhysicalInterpretation\\n';\n    modelica += '    \"Physical meaning of reasoning\"\\n';\n    const quantity = escapeModelicaString(thought.physicalInterpretation.quantity);\n    modelica += `    parameter String quantity = \"${quantity}\" \"Physical quantity\";\\n`;\n    const units = escapeModelicaString(thought.physicalInterpretation.units);\n    modelica += `    parameter String units = \"${units}\" \"Measurement units\";\\n`;\n    modelica += '  end PhysicalInterpretation;\\n\\n';\n  }\n\n  modelica += `end ${packageName};\\n`;\n\n  return modelica;\n}\n\n/**\n * Export hybrid orchestration to UML format\n */\nfunction hybridToUML(thought: HybridThought, options: VisualExportOptions): string {\n  const { includeLabels = true } = options;\n\n  const nodes: UmlNode[] = [];\n  const edges: UmlEdge[] = [];\n\n  // Central hybrid orchestrator as a component\n  nodes.push({\n    id: 'hybrid',\n    label: includeLabels ? 'Hybrid Orchestrator' : 'Hybrid',\n    shape: 'component',\n    stereotype: '<<orchestrator>>',\n    attributes: [\n      `primaryMode: ${thought.primaryMode}`,\n      thought.stage ? `stage: ${thought.stage.replace(/_/g, ' ')}` : null,\n      thought.uncertainty !== undefined ? `uncertainty: ${(thought.uncertainty * 100).toFixed(1)}%` : null,\n    ].filter(Boolean) as string[],\n  });\n\n  // Primary mode as a class\n  const primaryId = sanitizeId(`primary_${thought.primaryMode}`);\n  nodes.push({\n    id: primaryId,\n    label: includeLabels ? thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1) : thought.primaryMode,\n    shape: 'class',\n    stereotype: '<<primary>>',\n    attributes: ['weight: 0.7'],\n  });\n\n  // Composition relationship from orchestrator to primary mode\n  edges.push({\n    source: 'hybrid',\n    target: primaryId,\n    type: 'composition',\n    label: 'orchestrates',\n  });\n\n  // Secondary features as separate classes\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    thought.secondaryFeatures.forEach((feature, index) => {\n      const featureId = sanitizeId(`feature_${index}`);\n      nodes.push({\n        id: featureId,\n        label: includeLabels ? (feature.length > 30 ? feature.substring(0, 30) + '...' : feature) : `Feature${index + 1}`,\n        shape: 'class',\n        stereotype: '<<secondary>>',\n        attributes: ['weight: 0.3'],\n      });\n\n      // Association from orchestrator to feature\n      edges.push({\n        source: 'hybrid',\n        target: featureId,\n        type: 'association',\n        label: 'uses',\n      });\n    });\n  }\n\n  // Mathematical model as a package\n  if (thought.mathematicalModel) {\n    nodes.push({\n      id: 'math_model',\n      label: 'Mathematical Model',\n      shape: 'package',\n      attributes: [\n        `symbolic: ${thought.mathematicalModel.symbolic}`,\n        thought.mathematicalModel.ascii ? `ascii: ${thought.mathematicalModel.ascii.substring(0, 30)}` : null,\n      ].filter(Boolean) as string[],\n    });\n\n    edges.push({\n      source: primaryId,\n      target: 'math_model',\n      type: 'dependency',\n      label: 'applies',\n    });\n  }\n\n  // Tensor properties as an interface\n  if (thought.tensorProperties) {\n    nodes.push({\n      id: 'tensor',\n      label: 'Tensor Properties',\n      shape: 'interface',\n      attributes: [\n        `rank: (${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]})`,\n        `components: ${thought.tensorProperties.components}`,\n      ],\n    });\n\n    edges.push({\n      source: primaryId,\n      target: 'tensor',\n      type: 'implementation',\n      label: 'implements',\n    });\n  }\n\n  // Physical interpretation as a component\n  if (thought.physicalInterpretation) {\n    nodes.push({\n      id: 'physical',\n      label: 'Physical Interpretation',\n      shape: 'component',\n      attributes: [\n        `quantity: ${thought.physicalInterpretation.quantity}`,\n        `units: ${thought.physicalInterpretation.units}`,\n      ],\n    });\n\n    edges.push({\n      source: primaryId,\n      target: 'physical',\n      type: 'dependency',\n      label: 'interprets',\n    });\n  }\n\n  // Switch reason as a note\n  if (thought.switchReason && includeLabels) {\n    nodes.push({\n      id: 'switch_note',\n      label: 'Switch Reason',\n      shape: 'rectangle',\n      stereotype: '<<note>>',\n      attributes: [thought.switchReason.substring(0, 50) + (thought.switchReason.length > 50 ? '...' : '')],\n    });\n\n    edges.push({\n      source: 'hybrid',\n      target: 'switch_note',\n      type: 'dependency',\n    });\n  }\n\n  return generateUmlDiagram(nodes, edges, {\n    title: 'Hybrid Mode Orchestration',\n    diagramType: 'component',\n  });\n}\n\n/**\n * Export hybrid orchestration to JSON format\n */\nfunction hybridToJSON(thought: HybridThought, options: VisualExportOptions): string {\n  const { includeMetrics = true } = options;\n\n  // Create graph structure\n  const graph = createJsonGraph('Hybrid Mode Orchestration', 'hybrid_orchestration', {\n    includeMetrics,\n    includeLegend: true,\n    includeLayout: true,\n  });\n\n  // Add central hybrid mode node\n  addNode(graph, {\n    id: 'hybrid',\n    label: 'Hybrid Mode',\n    type: 'orchestrator',\n    metadata: {\n      primaryMode: thought.primaryMode,\n      stage: thought.stage || null,\n      uncertainty: thought.uncertainty,\n      secondaryFeaturesCount: thought.secondaryFeatures?.length || 0,\n    },\n  });\n\n  // Add primary mode node\n  const primaryId = sanitizeId(`primary_${thought.primaryMode}`);\n  addNode(graph, {\n    id: primaryId,\n    label: thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1),\n    type: 'primary_mode',\n    metadata: {\n      name: thought.primaryMode,\n      weight: 0.7,\n    },\n  });\n\n  // Edge from hybrid to primary\n  addEdge(graph, {\n    id: 'e_hybrid_primary',\n    source: 'hybrid',\n    target: primaryId,\n    label: 'orchestrates',\n    type: 'primary',\n    metadata: {\n      strength: 1.0,\n    },\n  });\n\n  // Add secondary features\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    thought.secondaryFeatures.forEach((feature, index) => {\n      const featureId = sanitizeId(`feature_${index}`);\n      addNode(graph, {\n        id: featureId,\n        label: `Feature ${index + 1}`,\n        type: 'secondary_feature',\n        metadata: {\n          description: feature,\n          index: index,\n          weight: 0.3 / thought.secondaryFeatures!.length,\n        },\n      });\n\n      addEdge(graph, {\n        id: `e_hybrid_feature_${index}`,\n        source: 'hybrid',\n        target: featureId,\n        label: 'uses',\n        type: 'secondary',\n        metadata: {\n          strength: 0.5,\n        },\n      });\n    });\n  }\n\n  // Add stage node if present\n  if (thought.stage) {\n    const stageId = sanitizeId(`stage_${thought.stage}`);\n    addNode(graph, {\n      id: stageId,\n      label: thought.stage.replace(/_/g, ' '),\n      type: 'stage',\n      metadata: {\n        name: thought.stage,\n      },\n    });\n\n    addEdge(graph, {\n      id: 'e_primary_stage',\n      source: primaryId,\n      target: stageId,\n      label: 'in_stage',\n      type: 'stage_flow',\n    });\n  }\n\n  // Add mathematical model if present\n  if (thought.mathematicalModel) {\n    addNode(graph, {\n      id: 'math_model',\n      label: 'Mathematical Model',\n      type: 'mathematical',\n      metadata: {\n        latex: thought.mathematicalModel.latex,\n        symbolic: thought.mathematicalModel.symbolic,\n        ascii: thought.mathematicalModel.ascii || null,\n      },\n    });\n\n    addEdge(graph, {\n      id: 'e_primary_math',\n      source: primaryId,\n      target: 'math_model',\n      label: 'applies',\n      type: 'transformation',\n    });\n  }\n\n  // Add tensor properties if present\n  if (thought.tensorProperties) {\n    addNode(graph, {\n      id: 'tensor',\n      label: 'Tensor Properties',\n      type: 'tensor',\n      metadata: {\n        rank: thought.tensorProperties.rank,\n        components: thought.tensorProperties.components,\n        transformation: thought.tensorProperties.transformation,\n        symmetries: thought.tensorProperties.symmetries,\n      },\n    });\n\n    addEdge(graph, {\n      id: 'e_primary_tensor',\n      source: primaryId,\n      target: 'tensor',\n      label: 'analyzes',\n      type: 'analysis',\n    });\n  }\n\n  // Add physical interpretation if present\n  if (thought.physicalInterpretation) {\n    addNode(graph, {\n      id: 'physical',\n      label: 'Physical Interpretation',\n      type: 'physical',\n      metadata: {\n        quantity: thought.physicalInterpretation.quantity,\n        units: thought.physicalInterpretation.units,\n        conservationLaws: thought.physicalInterpretation.conservationLaws,\n      },\n    });\n\n    addEdge(graph, {\n      id: 'e_primary_physical',\n      source: primaryId,\n      target: 'physical',\n      label: 'interprets',\n      type: 'interpretation',\n    });\n  }\n\n  // Add metrics if requested\n  if (includeMetrics) {\n    addMetric(graph, 'primary_mode', thought.primaryMode);\n    addMetric(graph, 'secondary_features_count', thought.secondaryFeatures?.length || 0);\n\n    if (thought.uncertainty !== undefined) {\n      addMetric(graph, 'uncertainty', thought.uncertainty);\n    }\n\n    if (thought.stage) {\n      addMetric(graph, 'stage', thought.stage);\n    }\n\n    if (thought.assumptions) {\n      addMetric(graph, 'assumptions_count', thought.assumptions.length);\n    }\n\n    if (thought.dependencies) {\n      addMetric(graph, 'dependencies_count', thought.dependencies.length);\n    }\n  }\n\n  // Add legend items\n  addLegendItem(graph, 'Hybrid Orchestrator', '#90EE90');\n  addLegendItem(graph, 'Primary Mode', '#87CEEB');\n  addLegendItem(graph, 'Secondary Feature', '#FFD700');\n\n  if (thought.mathematicalModel) {\n    addLegendItem(graph, 'Mathematical Model', '#DDA0DD');\n  }\n\n  if (thought.tensorProperties) {\n    addLegendItem(graph, 'Tensor Properties', '#F0E68C');\n  }\n\n  if (thought.physicalInterpretation) {\n    addLegendItem(graph, 'Physical Interpretation', '#98FB98');\n  }\n\n  return serializeGraph(graph);\n}\n\n/**\n * Export hybrid orchestration to Markdown format\n */\nfunction hybridToMarkdown(thought: HybridThought, options: VisualExportOptions): string {\n  const {\n    markdownIncludeFrontmatter = false,\n    markdownIncludeToc = false,\n    markdownIncludeMermaid = true,\n    includeMetrics = true,\n  } = options;\n\n  const parts: string[] = [];\n\n  // Overview section\n  const overviewContent = keyValueSection({\n    'Primary Mode': thought.primaryMode.charAt(0).toUpperCase() + thought.primaryMode.slice(1),\n    ...(thought.stage ? { 'Stage': thought.stage.replace(/_/g, ' ') } : {}),\n    ...(thought.uncertainty !== undefined ? { 'Uncertainty': `${(thought.uncertainty * 100).toFixed(1)}%` } : {}),\n  });\n  parts.push(section('Overview', overviewContent));\n\n  // Switch reason section\n  if (thought.switchReason) {\n    parts.push(section('Mode Switch Reason', thought.switchReason));\n  }\n\n  // Secondary features section\n  if (thought.secondaryFeatures && thought.secondaryFeatures.length > 0) {\n    parts.push(section('Secondary Features', list(thought.secondaryFeatures)));\n  }\n\n  // Mathematical model section\n  if (thought.mathematicalModel) {\n    const mathContent = keyValueSection({\n      'LaTeX': thought.mathematicalModel.latex,\n      'Symbolic': thought.mathematicalModel.symbolic,\n      ...(thought.mathematicalModel.ascii ? { 'ASCII': thought.mathematicalModel.ascii } : {}),\n    });\n    parts.push(section('Mathematical Model', mathContent));\n  }\n\n  // Tensor properties section\n  if (thought.tensorProperties) {\n    const tensorRows = [\n      ['Rank', `(${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]})`],\n      ['Components', thought.tensorProperties.components],\n      ['Transformation', thought.tensorProperties.transformation],\n    ];\n\n    let tensorContent = table(['Property', 'Value'], tensorRows);\n\n    if (thought.tensorProperties.symmetries.length > 0) {\n      tensorContent += '\\n\\n**Symmetries:**\\n\\n' + list(thought.tensorProperties.symmetries);\n    }\n\n    parts.push(section('Tensor Properties', tensorContent));\n  }\n\n  // Physical interpretation section\n  if (thought.physicalInterpretation) {\n    const interpContent = keyValueSection({\n      'Quantity': thought.physicalInterpretation.quantity,\n      'Units': thought.physicalInterpretation.units,\n    });\n\n    let interpFull = interpContent;\n\n    if (thought.physicalInterpretation.conservationLaws.length > 0) {\n      interpFull += '\\n\\n**Conservation Laws:**\\n\\n' + list(thought.physicalInterpretation.conservationLaws);\n    }\n\n    parts.push(section('Physical Interpretation', interpFull));\n  }\n\n  // Metrics section\n  if (includeMetrics) {\n    const metricsItems: Record<string, string | number> = {\n      'Primary Mode': thought.primaryMode,\n      'Secondary Features': thought.secondaryFeatures?.length || 0,\n    };\n\n    if (thought.uncertainty !== undefined) {\n      metricsItems['Uncertainty'] = `${(thought.uncertainty * 100).toFixed(1)}%`;\n    }\n\n    if (thought.assumptions) {\n      metricsItems['Assumptions'] = thought.assumptions.length;\n    }\n\n    if (thought.dependencies) {\n      metricsItems['Dependencies'] = thought.dependencies.length;\n    }\n\n    parts.push(section('Metrics', keyValueSection(metricsItems)));\n  }\n\n  // Assumptions section\n  if (thought.assumptions && thought.assumptions.length > 0) {\n    parts.push(section('Assumptions', list(thought.assumptions)));\n  }\n\n  // Dependencies section\n  if (thought.dependencies && thought.dependencies.length > 0) {\n    parts.push(section('Dependencies', list(thought.dependencies)));\n  }\n\n  // Revision reason section\n  if (thought.revisionReason) {\n    parts.push(section('Revision Reason', thought.revisionReason));\n  }\n\n  // Mermaid diagram\n  if (markdownIncludeMermaid) {\n    const mermaidDiagram = hybridToMermaid(thought, 'default', true, true);\n    parts.push(section('Visualization', mermaidBlock(mermaidDiagram)));\n  }\n\n  return mdDocument('Hybrid Mode Orchestration', parts.join('\\n'), {\n    includeFrontmatter: markdownIncludeFrontmatter,\n    includeTableOfContents: markdownIncludeToc,\n    metadata: {\n      mode: 'hybrid',\n      primaryMode: thought.primaryMode,\n      secondaryFeatures: thought.secondaryFeatures?.length || 0,\n    },\n  });\n}\n","/**\r\n * Causal Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Causal graph export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { CausalThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderStadiumNode,\r\n  renderRectNode,\r\n  renderDiamondNode,\r\n  renderEllipseNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  layoutNodesInLayers,\r\n  calculateSVGHeight,\r\n  DEFAULT_SVG_OPTIONS,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n  type GraphMLOptions,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n  type TikZOptions,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  generateCausalJson,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export causal graph to visual format\r\n */\r\nexport function exportCausalGraph(thought: CausalThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return causalGraphToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return causalGraphToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return causalGraphToASCII(thought);\r\n    case 'svg':\r\n      return causalGraphToSVG(thought, options);\r\n    case 'graphml':\r\n      return causalGraphToGraphML(thought, options);\r\n    case 'tikz':\r\n      return causalGraphToTikZ(thought, options);\r\n    case 'html':\r\n      return causalGraphToHTML(thought, options);\r\n    case 'modelica':\r\n      return causalToModelica(thought, options);\r\n    case 'uml':\r\n      return causalToUML(thought, options);\r\n    case 'json':\r\n      return causalToJSON(thought, options);\r\n    case 'markdown':\r\n      return causalToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction causalGraphToMermaid(\r\n  thought: CausalThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TB\\n';\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    return mermaid + '  NoData[\"No causal graph data\"]\\n';\r\n  }\r\n\r\n  for (const node of thought.causalGraph.nodes) {\r\n    const nodeId = sanitizeId(node.id);\r\n    const label = includeLabels ? node.name : nodeId;\r\n\r\n    let shape: [string, string];\r\n    switch (node.type) {\r\n      case 'cause':\r\n        shape = ['([', '])'];\r\n        break;\r\n      case 'effect':\r\n        shape = ['[[', ']]'];\r\n        break;\r\n      case 'mediator':\r\n        shape = ['[', ']'];\r\n        break;\r\n      case 'confounder':\r\n        shape = ['{', '}'];\r\n        break;\r\n      default:\r\n        shape = ['[', ']'];\r\n    }\r\n\r\n    mermaid += `  ${nodeId}${shape[0]}${label}${shape[1]}\\n`;\r\n  }\r\n\r\n  mermaid += '\\n';\r\n\r\n  for (const edge of thought.causalGraph.edges) {\r\n    const fromId = sanitizeId(edge.from);\r\n    const toId = sanitizeId(edge.to);\r\n\r\n    if (includeMetrics && edge.strength !== undefined) {\r\n      mermaid += `  ${fromId} --> |${edge.strength.toFixed(2)}| ${toId}\\n`;\r\n    } else {\r\n      mermaid += `  ${fromId} --> ${toId}\\n`;\r\n    }\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const causes = thought.causalGraph.nodes.filter(n => n.type === 'cause');\r\n    const effects = thought.causalGraph.nodes.filter(n => n.type === 'effect');\r\n\r\n    for (const node of causes) {\r\n      const color = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n      mermaid += `  style ${sanitizeId(node.id)} fill:${color}\\n`;\r\n    }\r\n\r\n    for (const node of effects) {\r\n      const color = colorScheme === 'pastel' ? '#fff3e0' : '#ffd699';\r\n      mermaid += `  style ${sanitizeId(node.id)} fill:${color}\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction causalGraphToDOT(\r\n  thought: CausalThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph CausalGraph {\\n';\r\n  dot += '  rankdir=TB;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    dot += '  NoData [label=\"No causal graph data\"];\\n}\\n';\r\n    return dot;\r\n  }\r\n\r\n  for (const node of thought.causalGraph.nodes) {\r\n    const nodeId = sanitizeId(node.id);\r\n    const label = includeLabels ? node.name : nodeId;\r\n\r\n    let shape = 'box';\r\n    switch (node.type) {\r\n      case 'cause': shape = 'ellipse'; break;\r\n      case 'effect': shape = 'doubleoctagon'; break;\r\n      case 'mediator': shape = 'box'; break;\r\n      case 'confounder': shape = 'diamond'; break;\r\n    }\r\n\r\n    dot += `  ${nodeId} [label=\"${label}\", shape=${shape}];\\n`;\r\n  }\r\n\r\n  dot += '\\n';\r\n\r\n  for (const edge of thought.causalGraph.edges) {\r\n    const fromId = sanitizeId(edge.from);\r\n    const toId = sanitizeId(edge.to);\r\n\r\n    if (includeMetrics && edge.strength !== undefined) {\r\n      dot += `  ${fromId} -> ${toId} [label=\"${edge.strength.toFixed(2)}\"];\\n`;\r\n    } else {\r\n      dot += `  ${fromId} -> ${toId};\\n`;\r\n    }\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction causalGraphToASCII(thought: CausalThought): string {\r\n  let ascii = 'Causal Graph:\\n';\r\n  ascii += '=============\\n\\n';\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    return ascii + 'No causal graph data\\n';\r\n  }\r\n\r\n  ascii += 'Nodes:\\n';\r\n  for (const node of thought.causalGraph.nodes) {\r\n    ascii += `  [${node.type.toUpperCase()}] ${node.name}: ${node.description}\\n`;\r\n  }\r\n\r\n  ascii += '\\nEdges:\\n';\r\n  for (const edge of thought.causalGraph.edges) {\r\n    const fromNode = thought.causalGraph.nodes.find(n => n.id === edge.from);\r\n    const toNode = thought.causalGraph.nodes.find(n => n.id === edge.to);\r\n    const strength = edge.strength !== undefined ? ` (strength: ${edge.strength.toFixed(2)})` : '';\r\n    ascii += `  ${fromNode?.name} --> ${toNode?.name}${strength}\\n`;\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export causal graph to native SVG format\r\n */\r\nfunction causalGraphToSVG(thought: CausalThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n  } = options;\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    return generateSVGHeader(svgWidth, 200, 'Causal Graph') +\r\n      '\\n  <text x=\"400\" y=\"100\" text-anchor=\"middle\" class=\"subtitle\">No causal graph data</text>\\n' +\r\n      generateSVGFooter();\r\n  }\r\n\r\n  // Group nodes by type for layered layout\r\n  const causes = thought.causalGraph.nodes.filter(n => n.type === 'cause');\r\n  const mediators = thought.causalGraph.nodes.filter(n => n.type === 'mediator');\r\n  const confounders = thought.causalGraph.nodes.filter(n => n.type === 'confounder');\r\n  const effects = thought.causalGraph.nodes.filter(n => n.type === 'effect');\r\n\r\n  // Build layers for layout\r\n  const layers = [\r\n    causes.map(n => ({ id: n.id, label: includeLabels ? n.name : n.id, type: 'cause' })),\r\n    [...mediators, ...confounders].map(n => ({ id: n.id, label: includeLabels ? n.name : n.id, type: n.type })),\r\n    effects.map(n => ({ id: n.id, label: includeLabels ? n.name : n.id, type: 'effect' })),\r\n  ].filter(layer => layer.length > 0);\r\n\r\n  const positions = layoutNodesInLayers(layers, { width: svgWidth, title: 'Causal Graph' });\r\n  const actualHeight = calculateSVGHeight(positions);\r\n\r\n  let svg = generateSVGHeader(svgWidth, actualHeight, 'Causal Graph');\r\n\r\n  // Render edges first (behind nodes)\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  for (const edge of thought.causalGraph.edges) {\r\n    const fromPos = positions.get(edge.from);\r\n    const toPos = positions.get(edge.to);\r\n    if (fromPos && toPos) {\r\n      const label = includeMetrics && edge.strength !== undefined ? edge.strength.toFixed(2) : undefined;\r\n      svg += renderEdge(fromPos, toPos, { label });\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n  for (const [, pos] of positions) {\r\n    const colors = getNodeColor(pos.type === 'cause' ? 'primary' : pos.type === 'effect' ? 'tertiary' : 'neutral', colorScheme);\r\n    switch (pos.type) {\r\n      case 'cause':\r\n        svg += renderStadiumNode(pos, colors);\r\n        break;\r\n      case 'effect':\r\n        svg += renderEllipseNode(pos, colors);\r\n        break;\r\n      case 'confounder':\r\n        svg += renderDiamondNode(pos, colors);\r\n        break;\r\n      default:\r\n        svg += renderRectNode(pos, colors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Nodes', value: thought.causalGraph.nodes.length },\r\n      { label: 'Edges', value: thought.causalGraph.edges.length },\r\n      { label: 'Causes', value: causes.length },\r\n      { label: 'Effects', value: effects.length },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, actualHeight - 110, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Cause', color: getNodeColor('primary', colorScheme) },\r\n    { label: 'Mediator', color: getNodeColor('neutral', colorScheme) },\r\n    { label: 'Confounder', color: getNodeColor('neutral', colorScheme), shape: 'diamond' as const },\r\n    { label: 'Effect', color: getNodeColor('tertiary', colorScheme), shape: 'ellipse' as const },\r\n  ];\r\n  svg += renderLegend(20, actualHeight - 100, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export causal graph to GraphML format\r\n */\r\nfunction causalGraphToGraphML(thought: CausalThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    const emptyNodes: GraphMLNode[] = [\r\n      { id: 'no_data', label: 'No causal graph data', type: 'message' }\r\n    ];\r\n    return generateGraphML(emptyNodes, [], { graphName: 'Causal Graph' });\r\n  }\r\n\r\n  // Convert nodes to GraphML format\r\n  const nodes: GraphMLNode[] = thought.causalGraph.nodes.map(node => ({\r\n    id: node.id,\r\n    label: node.name,\r\n    type: node.type,\r\n  }));\r\n\r\n  // Convert edges to GraphML format\r\n  const edges: GraphMLEdge[] = thought.causalGraph.edges.map((edge, index) => {\r\n    const edgeData: GraphMLEdge = {\r\n      id: `e${index}`,\r\n      source: edge.from,\r\n      target: edge.to,\r\n    };\r\n\r\n    if (includeMetrics && edge.strength !== undefined) {\r\n      edgeData.metadata = { weight: edge.strength };\r\n    }\r\n\r\n    return edgeData;\r\n  });\r\n\r\n  const graphmlOptions: GraphMLOptions = {\r\n    graphName: 'Causal Graph',\r\n  };\r\n\r\n  return generateGraphML(nodes, edges, graphmlOptions);\r\n}\r\n\r\n/**\r\n * Export causal graph to TikZ format\r\n */\r\nfunction causalGraphToTikZ(thought: CausalThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    const emptyNodes: TikZNode[] = [\r\n      { id: 'no_data', x: 0, y: 0, label: 'No causal graph data', shape: 'rectangle' }\r\n    ];\r\n    return generateTikZ(emptyNodes, [], { title: 'Causal Graph' });\r\n  }\r\n\r\n  // Group nodes by type for layered layout\r\n  const causes = thought.causalGraph.nodes.filter(n => n.type === 'cause');\r\n  const mediators = thought.causalGraph.nodes.filter(n => n.type === 'mediator');\r\n  const confounders = thought.causalGraph.nodes.filter(n => n.type === 'confounder');\r\n  const effects = thought.causalGraph.nodes.filter(n => n.type === 'effect');\r\n\r\n  // Create TikZ nodes with layered positions\r\n  const nodes: TikZNode[] = [];\r\n\r\n  // Layer 0: Causes (y = 0)\r\n  causes.forEach((node, index) => {\r\n    const spacing = 3;\r\n    const offset = (causes.length - 1) * spacing / 2;\r\n    nodes.push({\r\n      id: node.id,\r\n      x: index * spacing - offset,\r\n      y: 0,\r\n      label: includeLabels ? node.name : node.id,\r\n      shape: 'stadium',\r\n      type: node.type,\r\n    });\r\n  });\r\n\r\n  // Layer 1: Mediators and Confounders (y = -2)\r\n  const middleNodes = [...mediators, ...confounders];\r\n  middleNodes.forEach((node, index) => {\r\n    const spacing = 3;\r\n    const offset = (middleNodes.length - 1) * spacing / 2;\r\n    nodes.push({\r\n      id: node.id,\r\n      x: index * spacing - offset,\r\n      y: -2,\r\n      label: includeLabels ? node.name : node.id,\r\n      shape: node.type === 'confounder' ? 'diamond' : 'rectangle',\r\n      type: node.type,\r\n    });\r\n  });\r\n\r\n  // Layer 2: Effects (y = -4)\r\n  effects.forEach((node, index) => {\r\n    const spacing = 3;\r\n    const offset = (effects.length - 1) * spacing / 2;\r\n    nodes.push({\r\n      id: node.id,\r\n      x: index * spacing - offset,\r\n      y: -4,\r\n      label: includeLabels ? node.name : node.id,\r\n      shape: 'ellipse',\r\n      type: node.type,\r\n    });\r\n  });\r\n\r\n  // Create TikZ edges\r\n  const edges: TikZEdge[] = thought.causalGraph.edges.map(edge => {\r\n    const edgeData: TikZEdge = {\r\n      source: edge.from,\r\n      target: edge.to,\r\n    };\r\n\r\n    if (includeMetrics && edge.strength !== undefined) {\r\n      edgeData.label = edge.strength.toFixed(2);\r\n    }\r\n\r\n    return edgeData;\r\n  });\r\n\r\n  const tikzOptions: TikZOptions = {\r\n    title: 'Causal Graph',\r\n  };\r\n\r\n  return generateTikZ(nodes, edges, tikzOptions);\r\n}\r\n\r\n/**\r\n * Export causal graph to HTML format\r\n */\r\nfunction causalGraphToHTML(thought: CausalThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Causal Graph Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    html += '<p class=\"text-secondary\">No causal graph data available.</p>\\n';\r\n    html += generateHTMLFooter(htmlStandalone);\r\n    return html;\r\n  }\r\n\r\n  // Metrics section\r\n  if (includeMetrics) {\r\n    const causes = thought.causalGraph.nodes.filter(n => n.type === 'cause');\r\n    const effects = thought.causalGraph.nodes.filter(n => n.type === 'effect');\r\n    const mediators = thought.causalGraph.nodes.filter(n => n.type === 'mediator');\r\n    const confounders = thought.causalGraph.nodes.filter(n => n.type === 'confounder');\r\n\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Total Nodes', thought.causalGraph.nodes.length, 'primary');\r\n    html += renderMetricCard('Edges', thought.causalGraph.edges.length, 'info');\r\n    html += renderMetricCard('Causes', causes.length, 'success');\r\n    html += renderMetricCard('Effects', effects.length, 'warning');\r\n    if (mediators.length > 0) {\r\n      html += renderMetricCard('Mediators', mediators.length);\r\n    }\r\n    if (confounders.length > 0) {\r\n      html += renderMetricCard('Confounders', confounders.length, 'danger');\r\n    }\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Nodes table\r\n  const nodeRows = thought.causalGraph.nodes.map(node => {\r\n    const typeBadge = renderBadge(node.type,\r\n      node.type === 'cause' ? 'success' :\r\n      node.type === 'effect' ? 'warning' :\r\n      node.type === 'confounder' ? 'danger' : 'secondary'\r\n    );\r\n    return [node.id, node.name, typeBadge, node.description || '-'];\r\n  });\r\n  html += renderSection('Nodes', renderTable(\r\n    ['ID', 'Name', 'Type', 'Description'],\r\n    nodeRows.map(row => row.map(cell => typeof cell === 'string' && cell.startsWith('<') ? cell : escapeHTML(String(cell))))\r\n  ), '');\r\n\r\n  // Edges table\r\n  const edgeRows = thought.causalGraph.edges.map(edge => {\r\n    const fromNode = thought.causalGraph!.nodes.find(n => n.id === edge.from);\r\n    const toNode = thought.causalGraph!.nodes.find(n => n.id === edge.to);\r\n    return [\r\n      fromNode?.name || edge.from,\r\n      '',\r\n      toNode?.name || edge.to,\r\n      edge.strength !== undefined ? edge.strength.toFixed(2) : '-',\r\n      edge.mechanism || '-',\r\n    ];\r\n  });\r\n  html += renderSection('Causal Relationships', renderTable(\r\n    ['From', '', 'To', 'Strength', 'Mechanism'],\r\n    edgeRows\r\n  ), '');\r\n\r\n  // Confounding warning\r\n  const confounders = thought.causalGraph.nodes.filter(n => n.type === 'confounder');\r\n  if (confounders.length > 0) {\r\n    html += renderSection(' Confounding Variables', `\r\n      <p class=\"text-warning\">The following variables may confound causal inference:</p>\r\n      <ul class=\"list-styled\">\r\n        ${confounders.map(c => `<li><strong>${escapeHTML(c.name)}</strong>: ${escapeHTML(c.description)}</li>`).join('\\n')}\r\n      </ul>\r\n    `);\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export causal graph to Modelica format\r\n */\r\nfunction causalToModelica(thought: CausalThought, options: VisualExportOptions): string {\r\n  const { modelicaPackageName, modelicaIncludeAnnotations = true, includeMetrics = true } = options;\r\n  const packageName = modelicaPackageName || 'CausalGraph';\r\n  const lines: string[] = [];\r\n\r\n  lines.push(`package ${sanitizeModelicaId(packageName)}`);\r\n  lines.push(`  \"Causal analysis graph\"`);\r\n  lines.push('');\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    lines.push('  // No causal graph data');\r\n    lines.push(`end ${sanitizeModelicaId(packageName)};`);\r\n    return lines.join('\\n');\r\n  }\r\n\r\n  // Causes as records\r\n  const causes = thought.causalGraph.nodes.filter(n => n.type === 'cause');\r\n  if (causes.length > 0) {\r\n    lines.push('  // Causes');\r\n    for (const cause of causes) {\r\n      const causeId = sanitizeModelicaId(cause.id);\r\n      lines.push(`  record Cause_${causeId}`);\r\n      lines.push(`    constant String description = \"${escapeModelicaString(cause.description)}\";`);\r\n      lines.push(`    constant String name = \"${escapeModelicaString(cause.name)}\";`);\r\n      lines.push(`  end Cause_${causeId};`);\r\n      lines.push('');\r\n    }\r\n  }\r\n\r\n  // Effects as records\r\n  const effects = thought.causalGraph.nodes.filter(n => n.type === 'effect');\r\n  if (effects.length > 0) {\r\n    lines.push('  // Effects');\r\n    for (const effect of effects) {\r\n      const effectId = sanitizeModelicaId(effect.id);\r\n      lines.push(`  record Effect_${effectId}`);\r\n      lines.push(`    constant String description = \"${escapeModelicaString(effect.description)}\";`);\r\n      lines.push(`    constant String name = \"${escapeModelicaString(effect.name)}\";`);\r\n      lines.push(`  end Effect_${effectId};`);\r\n      lines.push('');\r\n    }\r\n  }\r\n\r\n  // Causal links (edges)\r\n  if (thought.causalGraph.edges && thought.causalGraph.edges.length > 0) {\r\n    lines.push('  // Causal Links');\r\n    for (let i = 0; i < thought.causalGraph.edges.length; i++) {\r\n      const link = thought.causalGraph.edges[i];\r\n      lines.push(`  record Link_${i + 1}`);\r\n      lines.push(`    constant String cause = \"${sanitizeModelicaId(link.from)}\";`);\r\n      lines.push(`    constant String effect = \"${sanitizeModelicaId(link.to)}\";`);\r\n      if (link.strength !== undefined && includeMetrics) {\r\n        lines.push(`    constant Real strength = ${link.strength.toFixed(3)};`);\r\n      }\r\n      if (link.confidence !== undefined && includeMetrics) {\r\n        lines.push(`    constant Real confidence = ${link.confidence.toFixed(3)};`);\r\n      }\r\n      if (link.mechanism) {\r\n        lines.push(`    constant String mechanism = \"${escapeModelicaString(link.mechanism)}\";`);\r\n      }\r\n      lines.push(`  end Link_${i + 1};`);\r\n      lines.push('');\r\n    }\r\n  }\r\n\r\n  if (modelicaIncludeAnnotations) {\r\n    lines.push('  annotation(');\r\n    lines.push('    Documentation(info=\"<html>');\r\n    lines.push(`      <p>Causes: ${causes.length}</p>`);\r\n    lines.push(`      <p>Effects: ${effects.length}</p>`);\r\n    lines.push(`      <p>Total Nodes: ${thought.causalGraph.nodes.length}</p>`);\r\n    lines.push(`      <p>Edges: ${thought.causalGraph.edges?.length || 0}</p>`);\r\n    lines.push('      <p>Generated by DeepThinking MCP v7.1.0</p>');\r\n    lines.push('    </html>\")');\r\n    lines.push('  );');\r\n  }\r\n\r\n  lines.push(`end ${sanitizeModelicaId(packageName)};`);\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Export causal graph to UML/PlantUML format\r\n */\r\nfunction causalToUML(thought: CausalThought, options: VisualExportOptions): string {\r\n  const { umlTheme, umlDirection, includeLabels = true, includeMetrics = true } = options;\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    const emptyNodes: UmlNode[] = [\r\n      { id: 'no_data', label: 'No causal graph data', shape: 'rectangle' }\r\n    ];\r\n    return generateUmlDiagram(emptyNodes, [], {\r\n      title: 'Causal Graph',\r\n      theme: umlTheme,\r\n      direction: umlDirection,\r\n    });\r\n  }\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Add cause nodes\r\n  const causes = thought.causalGraph.nodes.filter(n => n.type === 'cause');\r\n  for (const cause of causes) {\r\n    const id = sanitizeModelicaId(cause.id);\r\n    nodes.push({\r\n      id: `cause_${id}`,\r\n      label: includeLabels ? cause.name.substring(0, 40) : id,\r\n      shape: 'rectangle',\r\n      color: 'FFB74D',\r\n    });\r\n  }\r\n\r\n  // Add effect nodes\r\n  const effects = thought.causalGraph.nodes.filter(n => n.type === 'effect');\r\n  for (const effect of effects) {\r\n    const id = sanitizeModelicaId(effect.id);\r\n    nodes.push({\r\n      id: `effect_${id}`,\r\n      label: includeLabels ? effect.name.substring(0, 40) : id,\r\n      shape: 'rectangle',\r\n      color: '4FC3F7',\r\n    });\r\n  }\r\n\r\n  // Add mediator nodes\r\n  const mediators = thought.causalGraph.nodes.filter(n => n.type === 'mediator');\r\n  for (const mediator of mediators) {\r\n    const id = sanitizeModelicaId(mediator.id);\r\n    nodes.push({\r\n      id: `mediator_${id}`,\r\n      label: includeLabels ? mediator.name.substring(0, 40) : id,\r\n      shape: 'rectangle',\r\n      color: '81C784',\r\n    });\r\n  }\r\n\r\n  // Add confounder nodes\r\n  const confounders = thought.causalGraph.nodes.filter(n => n.type === 'confounder');\r\n  for (const confounder of confounders) {\r\n    const id = sanitizeModelicaId(confounder.id);\r\n    nodes.push({\r\n      id: `confounder_${id}`,\r\n      label: includeLabels ? confounder.name.substring(0, 40) : id,\r\n      shape: 'cloud',\r\n      color: 'E57373',\r\n    });\r\n  }\r\n\r\n  // Add causal link edges\r\n  if (thought.causalGraph.edges) {\r\n    for (const link of thought.causalGraph.edges) {\r\n      const label = includeMetrics && link.strength !== undefined\r\n        ? `${link.strength.toFixed(2)}`\r\n        : undefined;\r\n\r\n      // Find the type of source and target nodes\r\n      const sourceNode = thought.causalGraph.nodes.find(n => n.id === link.from);\r\n      const targetNode = thought.causalGraph.nodes.find(n => n.id === link.to);\r\n\r\n      const sourcePrefix = sourceNode?.type || 'node';\r\n      const targetPrefix = targetNode?.type || 'node';\r\n\r\n      edges.push({\r\n        source: `${sourcePrefix}_${sanitizeModelicaId(link.from)}`,\r\n        target: `${targetPrefix}_${sanitizeModelicaId(link.to)}`,\r\n        type: 'arrow',\r\n        label,\r\n      });\r\n    }\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Causal Graph',\r\n    theme: umlTheme,\r\n    direction: umlDirection,\r\n  });\r\n}\r\n\r\n/**\r\n * Export causal graph to JSON format\r\n */\r\nfunction causalToJSON(thought: CausalThought, options: VisualExportOptions): string {\r\n  const { jsonPrettyPrint = true, jsonIndent = 2, includeMetrics = true } = options;\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    const emptyData = {\r\n      type: 'causal',\r\n      title: 'Causal Graph',\r\n      nodes: [],\r\n      edges: [],\r\n    };\r\n    return jsonPrettyPrint\r\n      ? JSON.stringify(emptyData, null, jsonIndent)\r\n      : JSON.stringify(emptyData);\r\n  }\r\n\r\n  const causes = thought.causalGraph.nodes.filter(n => n.type === 'cause').map(c => ({\r\n    id: sanitizeModelicaId(c.id),\r\n    label: c.name,\r\n    description: c.description,\r\n  }));\r\n\r\n  const effects = thought.causalGraph.nodes.filter(n => n.type === 'effect').map(e => ({\r\n    id: sanitizeModelicaId(e.id),\r\n    label: e.name,\r\n    description: e.description,\r\n  }));\r\n\r\n  const links = (thought.causalGraph.edges || []).map(l => ({\r\n    cause: sanitizeModelicaId(l.from),\r\n    effect: sanitizeModelicaId(l.to),\r\n    strength: includeMetrics ? l.strength : undefined,\r\n    confidence: includeMetrics ? l.confidence : undefined,\r\n    mechanism: l.mechanism,\r\n  }));\r\n\r\n  return generateCausalJson(\r\n    'Causal Graph',\r\n    'causal',\r\n    causes,\r\n    effects,\r\n    links,\r\n    {\r\n      prettyPrint: jsonPrettyPrint,\r\n      indent: jsonIndent,\r\n      includeMetrics,\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Export causal graph to Markdown format\r\n */\r\nfunction causalToMarkdown(thought: CausalThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  if (!thought.causalGraph || !thought.causalGraph.nodes) {\r\n    parts.push(section('Status', 'No causal graph data available.'));\r\n    return mdDocument('Causal Graph Analysis', parts.join('\\n'), {\r\n      includeFrontmatter: markdownIncludeFrontmatter,\r\n      includeTableOfContents: markdownIncludeToc,\r\n    });\r\n  }\r\n\r\n  const causes = thought.causalGraph.nodes.filter(n => n.type === 'cause');\r\n  const effects = thought.causalGraph.nodes.filter(n => n.type === 'effect');\r\n  const mediators = thought.causalGraph.nodes.filter(n => n.type === 'mediator');\r\n  const confounders = thought.causalGraph.nodes.filter(n => n.type === 'confounder');\r\n\r\n  // Metrics section\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Total Nodes': thought.causalGraph.nodes.length,\r\n      'Edges': thought.causalGraph.edges.length,\r\n      'Causes': causes.length,\r\n      'Effects': effects.length,\r\n      'Mediators': mediators.length,\r\n      'Confounders': confounders.length,\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Nodes table\r\n  const nodeRows = thought.causalGraph.nodes.map(node => [\r\n    node.id,\r\n    node.name,\r\n    node.type.toUpperCase(),\r\n    node.description || '-',\r\n  ]);\r\n  parts.push(section('Nodes', table(['ID', 'Name', 'Type', 'Description'], nodeRows)));\r\n\r\n  // Edges table\r\n  const edgeRows = thought.causalGraph.edges.map(edge => {\r\n    const fromNode = thought.causalGraph!.nodes.find(n => n.id === edge.from);\r\n    const toNode = thought.causalGraph!.nodes.find(n => n.id === edge.to);\r\n    return [\r\n      fromNode?.name || edge.from,\r\n      toNode?.name || edge.to,\r\n      edge.strength !== undefined ? edge.strength.toFixed(2) : '-',\r\n      edge.mechanism || '-',\r\n    ];\r\n  });\r\n  parts.push(section('Causal Relationships', table(['From', 'To', 'Strength', 'Mechanism'], edgeRows)));\r\n\r\n  // Confounders warning\r\n  if (confounders.length > 0) {\r\n    const confounderList = confounders.map(c => `**${c.name}**: ${c.description}`);\r\n    parts.push(section(' Confounding Variables', list(confounderList)));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = causalGraphToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Causal Graph Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Causal Graph Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'causal',\r\n      nodeCount: thought.causalGraph.nodes.length,\r\n      edgeCount: thought.causalGraph.edges.length,\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Temporal Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Timeline export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n */\r\n\r\nimport type { TemporalThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderHorizontalEdge,\r\n  renderLegend,\r\n  getNodeColor,\r\n  layoutNodesHorizontally,\r\n  DEFAULT_SVG_OPTIONS,\r\n} from '../utils/svg.js';\r\nimport {\r\n  createLinearGraphML,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  createLinearTikZ,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateStateDiagram,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export temporal timeline to visual format\r\n */\r\nexport function exportTemporalTimeline(thought: TemporalThought, options: VisualExportOptions): string {\r\n  const { format, includeLabels = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return timelineToMermaidGantt(thought, includeLabels);\r\n    case 'dot':\r\n      return timelineToDOT(thought, includeLabels);\r\n    case 'ascii':\r\n      return timelineToASCII(thought);\r\n    case 'svg':\r\n      return timelineToSVG(thought, options);\r\n    case 'graphml':\r\n      return timelineToGraphML(thought, options);\r\n    case 'tikz':\r\n      return timelineToTikZ(thought, options);\r\n    case 'html':\r\n      return timelineToHTML(thought, options);\r\n    case 'modelica':\r\n      return temporalToModelica(thought, options);\r\n    case 'uml':\r\n      return temporalToUML(thought, options);\r\n    case 'json':\r\n      return temporalToJSON(thought, options);\r\n    case 'markdown':\r\n      return temporalToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction timelineToMermaidGantt(thought: TemporalThought, includeLabels: boolean): string {\r\n  let gantt = 'gantt\\n';\r\n  gantt += `  title ${thought.timeline?.name || 'Timeline'}\\n`;\r\n  gantt += '  dateFormat X\\n';\r\n  gantt += '  axisFormat %s\\n\\n';\r\n\r\n  if (!thought.events || thought.events.length === 0) {\r\n    return gantt + '  No events\\n';\r\n  }\r\n\r\n  gantt += '  section Events\\n';\r\n\r\n  for (const event of thought.events) {\r\n    const label = includeLabels ? event.name : event.id;\r\n\r\n    if (event.type === 'instant') {\r\n      gantt += `  ${label} :milestone, ${event.timestamp}, 0s\\n`;\r\n    } else if (event.type === 'interval' && event.duration) {\r\n      gantt += `  ${label} :${event.timestamp}, ${event.duration}s\\n`;\r\n    }\r\n  }\r\n\r\n  return gantt;\r\n}\r\n\r\nfunction timelineToDOT(thought: TemporalThought, includeLabels: boolean): string {\r\n  let dot = 'digraph Timeline {\\n';\r\n  dot += '  rankdir=LR;\\n';\r\n  dot += '  node [shape=box];\\n\\n';\r\n\r\n  if (!thought.events) {\r\n    dot += '}\\n';\r\n    return dot;\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n\r\n  for (const event of sortedEvents) {\r\n    const nodeId = sanitizeId(event.id);\r\n    const label = includeLabels ? `${event.name}\\\\n(t=${event.timestamp})` : nodeId;\r\n    const shape = event.type === 'instant' ? 'ellipse' : 'box';\r\n\r\n    dot += `  ${nodeId} [label=\"${label}\", shape=${shape}];\\n`;\r\n  }\r\n\r\n  dot += '\\n';\r\n\r\n  for (let i = 0; i < sortedEvents.length - 1; i++) {\r\n    const from = sanitizeId(sortedEvents[i].id);\r\n    const to = sanitizeId(sortedEvents[i + 1].id);\r\n    dot += `  ${from} -> ${to};\\n`;\r\n  }\r\n\r\n  if (thought.relations) {\r\n    dot += '\\n  // Causal relations\\n';\r\n    for (const rel of thought.relations) {\r\n      const from = sanitizeId(rel.from);\r\n      const to = sanitizeId(rel.to);\r\n      dot += `  ${from} -> ${to} [style=dashed, label=\"${rel.relationType}\"];\\n`;\r\n    }\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction timelineToASCII(thought: TemporalThought): string {\r\n  let ascii = `Timeline: ${thought.timeline?.name || 'Untitled'}\\n`;\r\n  ascii += '='.repeat(40) + '\\n\\n';\r\n\r\n  if (!thought.events || thought.events.length === 0) {\r\n    return ascii + 'No events\\n';\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n\r\n  for (const event of sortedEvents) {\r\n    const marker = event.type === 'instant' ? '' : '';\r\n    ascii += `t=${event.timestamp.toString().padStart(4)} ${marker} ${event.name}\\n`;\r\n    if (event.duration) {\r\n      ascii += `       ${''.padStart(5)} duration: ${event.duration}\\n`;\r\n    }\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export temporal timeline to GraphML format\r\n */\r\nfunction timelineToGraphML(thought: TemporalThought, _options: VisualExportOptions): string {\r\n  if (!thought.events || thought.events.length === 0) {\r\n    return createLinearGraphML([], {\r\n      graphName: thought.timeline?.name || 'Timeline',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n  const labels = sortedEvents.map(event => event.name);\r\n\r\n  return createLinearGraphML(labels, {\r\n    graphName: thought.timeline?.name || 'Timeline',\r\n    directed: true,\r\n  });\r\n}\r\n\r\n/**\r\n * Export temporal timeline to TikZ format\r\n */\r\nfunction timelineToTikZ(thought: TemporalThought, _options: VisualExportOptions): string {\r\n  if (!thought.events || thought.events.length === 0) {\r\n    return createLinearTikZ([], {\r\n      title: thought.timeline?.name || 'Timeline',\r\n    });\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n  const labels = sortedEvents.map(event => event.name);\r\n\r\n  return createLinearTikZ(labels, {\r\n    title: thought.timeline?.name || 'Timeline',\r\n  });\r\n}\r\n\r\n/**\r\n * Export temporal timeline to native SVG format\r\n */\r\nfunction timelineToSVG(thought: TemporalThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = 300,\r\n  } = options;\r\n\r\n  const title = thought.timeline?.name || 'Timeline';\r\n\r\n  if (!thought.events || thought.events.length === 0) {\r\n    return generateSVGHeader(svgWidth, 200, title) +\r\n      '\\n  <text x=\"400\" y=\"100\" text-anchor=\"middle\" class=\"subtitle\">No events</text>\\n' +\r\n      generateSVGFooter();\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n\r\n  // Create nodes from events\r\n  const nodes = sortedEvents.map(event => ({\r\n    id: event.id,\r\n    label: includeLabels ? event.name : event.id,\r\n    type: event.type,\r\n  }));\r\n\r\n  const positions = layoutNodesHorizontally(nodes, {\r\n    width: svgWidth,\r\n    height: svgHeight,\r\n    nodeWidth: 120,\r\n    nodeHeight: 40,\r\n    nodeSpacing: 30,\r\n  });\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, title);\r\n\r\n  // Render timeline axis\r\n  const axisY = svgHeight / 2 + 40;\r\n  svg += `\\n  <!-- Timeline Axis -->\\n  <line x1=\"40\" y1=\"${axisY}\" x2=\"${svgWidth - 40}\" y2=\"${axisY}\" stroke=\"#333\" stroke-width=\"2\" marker-end=\"url(#arrowhead)\"/>`;\r\n\r\n  // Render edges between consecutive events\r\n  svg += '\\n\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  for (let i = 0; i < sortedEvents.length - 1; i++) {\r\n    const fromPos = positions.get(sortedEvents[i].id);\r\n    const toPos = positions.get(sortedEvents[i + 1].id);\r\n    if (fromPos && toPos) {\r\n      svg += renderHorizontalEdge(fromPos, toPos, {});\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n  for (const event of sortedEvents) {\r\n    const pos = positions.get(event.id);\r\n    if (pos) {\r\n      const colors = event.type === 'instant'\r\n        ? getNodeColor('primary', colorScheme)\r\n        : getNodeColor('secondary', colorScheme);\r\n\r\n      if (event.type === 'instant') {\r\n        svg += renderEllipseNode(pos, colors);\r\n      } else {\r\n        svg += renderRectNode(pos, colors);\r\n      }\r\n\r\n      // Add timestamp label below node\r\n      svg += `\\n    <text x=\"${pos.x}\" y=\"${pos.y + pos.height + 15}\" text-anchor=\"middle\" class=\"edge-label\">t=${event.timestamp}</text>`;\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Instant', color: getNodeColor('primary', colorScheme), shape: 'ellipse' as const },\r\n    { label: 'Interval', color: getNodeColor('secondary', colorScheme) },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 60, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export temporal timeline to HTML format\r\n */\r\nfunction timelineToHTML(thought: TemporalThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = thought.timeline?.name || 'Timeline Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  if (!thought.events || thought.events.length === 0) {\r\n    html += '<p class=\"text-secondary\">No events in timeline.</p>\\n';\r\n    html += generateHTMLFooter(htmlStandalone);\r\n    return html;\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n\r\n  // Metrics section\r\n  if (includeMetrics) {\r\n    const instants = sortedEvents.filter(e => e.type === 'instant');\r\n    const intervals = sortedEvents.filter(e => e.type === 'interval');\r\n    const minTime = sortedEvents[0].timestamp;\r\n    const maxTime = sortedEvents[sortedEvents.length - 1].timestamp;\r\n\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Total Events', sortedEvents.length, 'primary');\r\n    html += renderMetricCard('Instants', instants.length, 'info');\r\n    html += renderMetricCard('Intervals', intervals.length, 'success');\r\n    html += renderMetricCard('Time Span', `${minTime} - ${maxTime}`);\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Events table\r\n  const eventRows = sortedEvents.map(event => {\r\n    const typeBadge = renderBadge(event.type, event.type === 'instant' ? 'info' : 'success');\r\n    return [\r\n      event.timestamp.toString(),\r\n      event.name,\r\n      typeBadge,\r\n      event.duration ? `${event.duration}` : '-',\r\n      event.description || '-',\r\n    ];\r\n  });\r\n  html += renderSection('Events', renderTable(\r\n    ['Timestamp', 'Name', 'Type', 'Duration', 'Description'],\r\n    eventRows.map(row => row.map(cell => typeof cell === 'string' && cell.startsWith('<') ? cell : escapeHTML(String(cell))))\r\n  ), '');\r\n\r\n  // Relations section\r\n  if (thought.relations && thought.relations.length > 0) {\r\n    const relationRows = thought.relations.map(rel => {\r\n      const fromEvent = thought.events?.find(e => e.id === rel.from);\r\n      const toEvent = thought.events?.find(e => e.id === rel.to);\r\n      return [\r\n        fromEvent?.name || rel.from,\r\n        rel.relationType,\r\n        toEvent?.name || rel.to,\r\n      ];\r\n    });\r\n    html += renderSection('Temporal Relations', renderTable(\r\n      ['From', 'Relation', 'To'],\r\n      relationRows\r\n    ), '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export temporal timeline to Modelica format\r\n */\r\nfunction temporalToModelica(thought: TemporalThought, _options: VisualExportOptions): string {\r\n  const pkgName = sanitizeModelicaId(thought.timeline?.name || 'Timeline');\r\n  let modelica = `package ${pkgName}\\n`;\r\n  modelica += `  \"${escapeModelicaString(thought.timeline?.name || 'Timeline')} - Temporal Event System\"\\n\\n`;\r\n\r\n  if (!thought.events || thought.events.length === 0) {\r\n    modelica += '  // No events\\n';\r\n    modelica += `end ${pkgName};\\n`;\r\n    return modelica;\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n\r\n  // Define event records\r\n  modelica += '  // Event Records\\n';\r\n  for (const event of sortedEvents) {\r\n    const eventId = sanitizeModelicaId(event.id);\r\n    modelica += `  record ${eventId}\\n`;\r\n    modelica += `    \"${escapeModelicaString(event.name)}\"\\n`;\r\n    modelica += `    parameter Real timestamp = ${event.timestamp} \"Event timestamp\";\\n`;\r\n    if (event.duration !== undefined) {\r\n      modelica += `    parameter Real duration = ${event.duration} \"Event duration\";\\n`;\r\n    }\r\n    modelica += `    parameter String eventType = \"${event.type}\" \"Event type (instant/interval)\";\\n`;\r\n    if (event.description) {\r\n      modelica += `    parameter String description = \"${escapeModelicaString(event.description)}\";\\n`;\r\n    }\r\n    modelica += `  end ${eventId};\\n\\n`;\r\n  }\r\n\r\n  // Define timeline model\r\n  modelica += '  model TimelineModel\\n';\r\n  modelica += '    \"Temporal event sequence model\"\\n\\n';\r\n\r\n  // Timeline parameters\r\n  modelica += '    parameter Real timeStart = ' + sortedEvents[0].timestamp + ' \"Timeline start\";\\n';\r\n  modelica += '    parameter Real timeEnd = ' + sortedEvents[sortedEvents.length - 1].timestamp + ' \"Timeline end\";\\n';\r\n  modelica += `    parameter Integer eventCount = ${sortedEvents.length} \"Total number of events\";\\n\\n`;\r\n\r\n  // Event instances\r\n  modelica += '    // Event instances\\n';\r\n  for (const event of sortedEvents) {\r\n    const eventId = sanitizeModelicaId(event.id);\r\n    modelica += `    ${eventId} ${eventId.toLowerCase()}_inst;\\n`;\r\n  }\r\n\r\n  // Discrete time logic\r\n  modelica += '\\n    // Timeline progression\\n';\r\n  modelica += '    discrete Real currentTime(start=timeStart);\\n';\r\n  modelica += '  equation\\n';\r\n  modelica += '    when time >= timeEnd then\\n';\r\n  modelica += '      currentTime = timeEnd;\\n';\r\n  modelica += '    end when;\\n';\r\n\r\n  modelica += '  end TimelineModel;\\n\\n';\r\n\r\n  modelica += `end ${pkgName};\\n`;\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export temporal timeline to UML format\r\n */\r\nfunction temporalToUML(thought: TemporalThought, _options: VisualExportOptions): string {\r\n  if (!thought.events || thought.events.length === 0) {\r\n    return generateStateDiagram([], [], undefined, { title: thought.timeline?.name || 'Timeline' });\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n\r\n  // Create states from events (map to just the names)\r\n  const states = sortedEvents.map(event => event.name);\r\n\r\n  // Create transitions between consecutive events\r\n  const transitions: Array<{ from: string; to: string; event?: string }> = [];\r\n  for (let i = 0; i < sortedEvents.length - 1; i++) {\r\n    transitions.push({\r\n      from: sortedEvents[i].id,\r\n      to: sortedEvents[i + 1].id,\r\n      event: `t=${sortedEvents[i + 1].timestamp - sortedEvents[i].timestamp}`,\r\n    });\r\n  }\r\n\r\n  // Add causal relations as additional transitions\r\n  if (thought.relations) {\r\n    for (const rel of thought.relations) {\r\n      transitions.push({\r\n        from: rel.from,\r\n        to: rel.to,\r\n        event: rel.relationType,\r\n      });\r\n    }\r\n  }\r\n\r\n  return generateStateDiagram(states, transitions, undefined, { title: thought.timeline?.name || 'Timeline' });\r\n}\r\n\r\n/**\r\n * Export temporal timeline to JSON format\r\n */\r\nfunction temporalToJSON(thought: TemporalThought, _options: VisualExportOptions): string {\r\n  const graph = createJsonGraph(\r\n    thought.timeline?.name || 'Timeline',\r\n    'temporal',\r\n    _options\r\n  );\r\n\r\n  if (!thought.events || thought.events.length === 0) {\r\n    return serializeGraph(graph, _options);\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n\r\n  // Add event nodes\r\n  for (const event of sortedEvents) {\r\n    addNode(graph, {\r\n      id: event.id,\r\n      label: event.name,\r\n      type: event.type,\r\n      metadata: {\r\n        timestamp: event.timestamp,\r\n        duration: event.duration,\r\n        description: event.description,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Add edges between consecutive events\r\n  for (let i = 0; i < sortedEvents.length - 1; i++) {\r\n    addEdge(graph, {\r\n      id: `edge_${i}`,\r\n      source: sortedEvents[i].id,\r\n      target: sortedEvents[i + 1].id,\r\n      label: 'temporal_next',\r\n      metadata: {\r\n        timeDelta: sortedEvents[i + 1].timestamp - sortedEvents[i].timestamp,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Add causal relation edges\r\n  if (thought.relations) {\r\n    let relIdx = sortedEvents.length - 1;\r\n    for (const rel of thought.relations) {\r\n      addEdge(graph, {\r\n        id: `edge_rel_${relIdx++}`,\r\n        source: rel.from,\r\n        target: rel.to,\r\n        label: rel.relationType,\r\n        metadata: {\r\n          edgeType: 'causal',\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add metrics\r\n  const instants = sortedEvents.filter(e => e.type === 'instant');\r\n  const intervals = sortedEvents.filter(e => e.type === 'interval');\r\n  addMetric(graph, 'totalEvents', sortedEvents.length);\r\n  addMetric(graph, 'instantEvents', instants.length);\r\n  addMetric(graph, 'intervalEvents', intervals.length);\r\n  addMetric(graph, 'timeStart', sortedEvents[0].timestamp);\r\n  addMetric(graph, 'timeEnd', sortedEvents[sortedEvents.length - 1].timestamp);\r\n  addMetric(graph, 'timeSpan', sortedEvents[sortedEvents.length - 1].timestamp - sortedEvents[0].timestamp);\r\n\r\n  return serializeGraph(graph, _options);\r\n}\r\n\r\n/**\r\n * Export temporal timeline to Markdown format\r\n */\r\nfunction temporalToMarkdown(thought: TemporalThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n  const title = thought.timeline?.name || 'Timeline';\r\n\r\n  if (!thought.events || thought.events.length === 0) {\r\n    parts.push(section('Status', 'No events in timeline.'));\r\n    return mdDocument(`Temporal Analysis: ${title}`, parts.join('\\n'), {\r\n      includeFrontmatter: markdownIncludeFrontmatter,\r\n      includeTableOfContents: markdownIncludeToc,\r\n    });\r\n  }\r\n\r\n  const sortedEvents = [...thought.events].sort((a, b) => a.timestamp - b.timestamp);\r\n  const instants = sortedEvents.filter(e => e.type === 'instant');\r\n  const intervals = sortedEvents.filter(e => e.type === 'interval');\r\n\r\n  // Metrics section\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Total Events': sortedEvents.length,\r\n      'Instant Events': instants.length,\r\n      'Interval Events': intervals.length,\r\n      'Time Span': `${sortedEvents[0].timestamp} - ${sortedEvents[sortedEvents.length - 1].timestamp}`,\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Events table\r\n  const eventRows = sortedEvents.map(event => [\r\n    event.timestamp.toString(),\r\n    event.name,\r\n    event.type.toUpperCase(),\r\n    event.duration ? `${event.duration}` : '-',\r\n    event.description || '-',\r\n  ]);\r\n  parts.push(section('Events', table(['Timestamp', 'Name', 'Type', 'Duration', 'Description'], eventRows)));\r\n\r\n  // Relations section\r\n  if (thought.relations && thought.relations.length > 0) {\r\n    const relationRows = thought.relations.map(rel => {\r\n      const fromEvent = thought.events?.find(e => e.id === rel.from);\r\n      const toEvent = thought.events?.find(e => e.id === rel.to);\r\n      return [\r\n        fromEvent?.name || rel.from,\r\n        rel.relationType,\r\n        toEvent?.name || rel.to,\r\n      ];\r\n    });\r\n    parts.push(section('Temporal Relations', table(['From', 'Relation', 'To'], relationRows)));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = timelineToMermaidGantt(thought, true);\r\n    parts.push(section('Timeline Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument(`Temporal Analysis: ${title}`, parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'temporal',\r\n      eventCount: sortedEvents.length,\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Counterfactual Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Counterfactual scenario export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { CounterfactualThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n  type GraphMLOptions,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n  type TikZOptions,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export counterfactual scenario tree to visual format\r\n */\r\nexport function exportCounterfactualScenarios(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return counterfactualToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return counterfactualToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return counterfactualToASCII(thought);\r\n    case 'svg':\r\n      return counterfactualToSVG(thought, options);\r\n    case 'graphml':\r\n      return counterfactualToGraphML(thought, options);\r\n    case 'tikz':\r\n      return counterfactualToTikZ(thought, options);\r\n    case 'html':\r\n      return counterfactualToHTML(thought, options);\r\n    case 'modelica':\r\n      return counterfactualToModelica(thought, options);\r\n    case 'uml':\r\n      return counterfactualToUML(thought, options);\r\n    case 'json':\r\n      return counterfactualToJSON(thought, options);\r\n    case 'markdown':\r\n      return counterfactualToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction counterfactualToMermaid(\r\n  thought: CounterfactualThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  const interventionId = 'intervention';\r\n  mermaid += `  ${interventionId}[\"${thought.interventionPoint.description}\"]\\n`;\r\n\r\n  const actualId = sanitizeId(thought.actual.id);\r\n  const actualLabel = includeLabels ? thought.actual.name : actualId;\r\n  mermaid += `  ${actualId}[\"Actual: ${actualLabel}\"]\\n`;\r\n  mermaid += `  ${interventionId} -->|no change| ${actualId}\\n`;\r\n\r\n  for (const scenario of thought.counterfactuals) {\r\n    const scenarioId = sanitizeId(scenario.id);\r\n    const label = includeLabels ? scenario.name : scenarioId;\r\n    const likelihoodLabel = includeMetrics && scenario.likelihood\r\n      ? ` (${scenario.likelihood.toFixed(2)})`\r\n      : '';\r\n\r\n    mermaid += `  ${scenarioId}[\"CF: ${label}${likelihoodLabel}\"]\\n`;\r\n    mermaid += `  ${interventionId} -->|intervene| ${scenarioId}\\n`;\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const actualColor = colorScheme === 'pastel' ? '#fff3e0' : '#ffd699';\r\n    mermaid += `  style ${actualId} fill:${actualColor}\\n`;\r\n\r\n    const cfColor = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    for (const scenario of thought.counterfactuals) {\r\n      const scenarioId = sanitizeId(scenario.id);\r\n      mermaid += `  style ${scenarioId} fill:${cfColor}\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction counterfactualToDOT(\r\n  thought: CounterfactualThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph CounterfactualScenarios {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  const interventionId = 'intervention';\r\n  dot += `  ${interventionId} [label=\"${thought.interventionPoint.description}\", shape=diamond];\\n\\n`;\r\n\r\n  const actualId = sanitizeId(thought.actual.id);\r\n  const actualLabel = includeLabels ? thought.actual.name : actualId;\r\n  dot += `  ${actualId} [label=\"Actual: ${actualLabel}\", style=filled, fillcolor=lightyellow];\\n`;\r\n  dot += `  ${interventionId} -> ${actualId} [label=\"no change\"];\\n\\n`;\r\n\r\n  for (const scenario of thought.counterfactuals) {\r\n    const scenarioId = sanitizeId(scenario.id);\r\n    const label = includeLabels ? scenario.name : scenarioId;\r\n    const likelihoodLabel = includeMetrics && scenario.likelihood\r\n      ? ` (${scenario.likelihood.toFixed(2)})`\r\n      : '';\r\n\r\n    dot += `  ${scenarioId} [label=\"CF: ${label}${likelihoodLabel}\", style=filled, fillcolor=lightblue];\\n`;\r\n    dot += `  ${interventionId} -> ${scenarioId} [label=\"intervene\"];\\n`;\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction counterfactualToASCII(thought: CounterfactualThought): string {\r\n  let ascii = 'Counterfactual Scenario Tree:\\n';\r\n  ascii += '=============================\\n\\n';\r\n\r\n  ascii += `Intervention Point: ${thought.interventionPoint.description}\\n`;\r\n  ascii += `Timing: ${thought.interventionPoint.timing}\\n`;\r\n  ascii += `Feasibility: ${thought.interventionPoint.feasibility.toFixed(2)}\\n\\n`;\r\n\r\n  ascii += ' Actual Scenario:\\n';\r\n  ascii += `  ${thought.actual.name}\\n`;\r\n  ascii += `  ${thought.actual.description}\\n\\n`;\r\n\r\n  ascii += ' Counterfactual Scenarios:\\n';\r\n  for (const scenario of thought.counterfactuals) {\r\n    const likelihoodStr = scenario.likelihood ? ` (likelihood: ${scenario.likelihood.toFixed(2)})` : '';\r\n    ascii += `    ${scenario.name}${likelihoodStr}\\n`;\r\n    ascii += `     ${scenario.description}\\n`;\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export counterfactual scenario tree to native SVG format\r\n */\r\nfunction counterfactualToSVG(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n\r\n  // Intervention point at the top\r\n  const interventionId = 'intervention';\r\n  positions.set(interventionId, {\r\n    id: interventionId,\r\n    label: includeLabels ? thought.interventionPoint.description : interventionId,\r\n    x: svgWidth / 2,\r\n    y: 80,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    type: 'intervention',\r\n  });\r\n\r\n  // Actual scenario on the left\r\n  const actualId = thought.actual.id;\r\n  const actualLabel = includeLabels ? `Actual: ${thought.actual.name}` : actualId;\r\n  positions.set(actualId, {\r\n    id: actualId,\r\n    label: actualLabel,\r\n    x: svgWidth / 4,\r\n    y: 200,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    type: 'actual',\r\n  });\r\n\r\n  // Counterfactual scenarios on the right\r\n  const cfCount = thought.counterfactuals.length;\r\n  const cfStartY = 200;\r\n  const cfSpacing = 120;\r\n  thought.counterfactuals.forEach((scenario, index) => {\r\n    const cfLabel = includeLabels ? `CF: ${scenario.name}` : scenario.id;\r\n    positions.set(scenario.id, {\r\n      id: scenario.id,\r\n      label: cfLabel,\r\n      x: (svgWidth * 3) / 4,\r\n      y: cfStartY + index * cfSpacing,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'counterfactual',\r\n    });\r\n  });\r\n\r\n  const actualHeight = Math.max(DEFAULT_SVG_OPTIONS.height, cfStartY + (cfCount - 1) * cfSpacing + 150);\r\n\r\n  let svg = generateSVGHeader(svgWidth, actualHeight, 'Counterfactual Scenarios');\r\n\r\n  // Render edges first (behind nodes)\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n\r\n  // Edge from intervention to actual\r\n  const interventionPos = positions.get(interventionId)!;\r\n  const actualPos = positions.get(actualId)!;\r\n  svg += renderEdge(interventionPos, actualPos, { label: 'no change' });\r\n\r\n  // Edges from intervention to counterfactuals\r\n  for (const scenario of thought.counterfactuals) {\r\n    const cfPos = positions.get(scenario.id);\r\n    if (cfPos) {\r\n      const label = includeMetrics && scenario.likelihood\r\n        ? `${scenario.likelihood.toFixed(2)}`\r\n        : 'intervene';\r\n      svg += renderEdge(interventionPos, cfPos, { label });\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  // Render intervention point (diamond)\r\n  const interventionColors = getNodeColor('warning', colorScheme);\r\n  svg += `\\n    <polygon points=\"${interventionPos.x},${interventionPos.y - 30} ${interventionPos.x + 40},${interventionPos.y} ${interventionPos.x},${interventionPos.y + 30} ${interventionPos.x - 40},${interventionPos.y}\" fill=\"${interventionColors.fill}\" stroke=\"${interventionColors.stroke}\" stroke-width=\"2\"/>`;\r\n  svg += `\\n    <text x=\"${interventionPos.x}\" y=\"${interventionPos.y + 5}\" text-anchor=\"middle\" class=\"node-label\">${interventionPos.label}</text>`;\r\n\r\n  // Render actual scenario\r\n  const actualColors = getNodeColor('tertiary', colorScheme);\r\n  svg += renderRectNode(actualPos, actualColors);\r\n\r\n  // Render counterfactual scenarios\r\n  const cfColors = getNodeColor('primary', colorScheme);\r\n  for (const [id, pos] of positions) {\r\n    if (id !== interventionId && id !== actualId) {\r\n      svg += renderStadiumNode(pos, cfColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Counterfactuals', value: thought.counterfactuals.length },\r\n      { label: 'Feasibility', value: thought.interventionPoint.feasibility.toFixed(2) },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, actualHeight - 110, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Intervention', color: interventionColors, shape: 'diamond' as const },\r\n    { label: 'Actual', color: actualColors },\r\n    { label: 'Counterfactual', color: cfColors, shape: 'stadium' as const },\r\n  ];\r\n  svg += renderLegend(20, actualHeight - 110, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export counterfactual scenario tree to GraphML format\r\n */\r\nfunction counterfactualToGraphML(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  // Create nodes: intervention point, actual scenario, and counterfactual scenarios\r\n  const nodes: GraphMLNode[] = [];\r\n\r\n  // Intervention point node\r\n  nodes.push({\r\n    id: 'intervention',\r\n    label: includeLabels ? thought.interventionPoint.description : 'intervention',\r\n    type: 'intervention',\r\n    metadata: {\r\n      timing: thought.interventionPoint.timing,\r\n      feasibility: thought.interventionPoint.feasibility,\r\n    },\r\n  });\r\n\r\n  // Actual scenario node\r\n  nodes.push({\r\n    id: thought.actual.id,\r\n    label: includeLabels ? `Actual: ${thought.actual.name}` : thought.actual.id,\r\n    type: 'actual',\r\n    metadata: {\r\n      description: thought.actual.description,\r\n    },\r\n  });\r\n\r\n  // Counterfactual scenario nodes\r\n  for (const scenario of thought.counterfactuals) {\r\n    nodes.push({\r\n      id: scenario.id,\r\n      label: includeLabels ? `CF: ${scenario.name}` : scenario.id,\r\n      type: 'counterfactual',\r\n      metadata: {\r\n        description: scenario.description,\r\n        likelihood: scenario.likelihood,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Create edges showing transitions/comparisons\r\n  const edges: GraphMLEdge[] = [];\r\n\r\n  // Edge from intervention to actual\r\n  edges.push({\r\n    id: 'e_intervention_actual',\r\n    source: 'intervention',\r\n    target: thought.actual.id,\r\n    label: 'no change',\r\n  });\r\n\r\n  // Edges from intervention to counterfactuals\r\n  for (let i = 0; i < thought.counterfactuals.length; i++) {\r\n    const scenario = thought.counterfactuals[i];\r\n    edges.push({\r\n      id: `e_intervention_cf${i}`,\r\n      source: 'intervention',\r\n      target: scenario.id,\r\n      label: 'intervene',\r\n      metadata: includeMetrics && scenario.likelihood !== undefined\r\n        ? { weight: scenario.likelihood }\r\n        : undefined,\r\n    });\r\n  }\r\n\r\n  const graphmlOptions: GraphMLOptions = {\r\n    graphName: 'Counterfactual Scenarios',\r\n  };\r\n\r\n  return generateGraphML(nodes, edges, graphmlOptions);\r\n}\r\n\r\n/**\r\n * Export counterfactual scenario tree to TikZ format\r\n */\r\nfunction counterfactualToTikZ(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n\r\n  // Intervention point at the top center\r\n  nodes.push({\r\n    id: 'intervention',\r\n    label: includeLabels ? thought.interventionPoint.description : 'intervention',\r\n    x: 4,\r\n    y: 0,\r\n    type: 'intervention',\r\n    shape: 'diamond',\r\n  });\r\n\r\n  // Actual scenario on the left\r\n  nodes.push({\r\n    id: thought.actual.id,\r\n    label: includeLabels ? `Actual: ${thought.actual.name}` : thought.actual.id,\r\n    x: 2,\r\n    y: -2,\r\n    type: 'actual',\r\n    shape: 'rectangle',\r\n  });\r\n\r\n  // Counterfactual scenarios on the right\r\n  const cfCount = thought.counterfactuals.length;\r\n  const cfSpacing = 1.5;\r\n  const cfStartY = -2;\r\n\r\n  thought.counterfactuals.forEach((scenario, index) => {\r\n    const yOffset = (cfCount - 1) * cfSpacing / 2;\r\n    nodes.push({\r\n      id: scenario.id,\r\n      label: includeLabels ? `CF: ${scenario.name}` : scenario.id,\r\n      x: 6,\r\n      y: cfStartY - index * cfSpacing + yOffset,\r\n      type: 'counterfactual',\r\n      shape: 'ellipse',\r\n    });\r\n  });\r\n\r\n  // Create edges\r\n  const edges: TikZEdge[] = [];\r\n\r\n  // Edge from intervention to actual\r\n  edges.push({\r\n    source: 'intervention',\r\n    target: thought.actual.id,\r\n    label: 'no change',\r\n    directed: true,\r\n  });\r\n\r\n  // Edges from intervention to counterfactuals\r\n  for (const scenario of thought.counterfactuals) {\r\n    edges.push({\r\n      source: 'intervention',\r\n      target: scenario.id,\r\n      label: includeMetrics && scenario.likelihood !== undefined\r\n        ? scenario.likelihood.toFixed(2)\r\n        : 'intervene',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  const tikzOptions: TikZOptions = {\r\n    title: 'Counterfactual Scenarios',\r\n  };\r\n\r\n  return generateTikZ(nodes, edges, tikzOptions);\r\n}\r\n\r\n/**\r\n * Export counterfactual scenarios to HTML format\r\n */\r\nfunction counterfactualToHTML(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Counterfactual Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Counterfactuals', thought.counterfactuals.length, 'primary');\r\n    html += renderMetricCard('Feasibility', (thought.interventionPoint.feasibility * 100).toFixed(0) + '%', 'info');\r\n    html += renderMetricCard('Expected Impact', (thought.interventionPoint.expectedImpact * 100).toFixed(0) + '%', 'success');\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Intervention point\r\n  html += renderSection('Intervention Point', `\r\n    <p><strong>Description:</strong> ${escapeHTML(thought.interventionPoint.description)}</p>\r\n    <p><strong>Timing:</strong> ${escapeHTML(thought.interventionPoint.timing)}</p>\r\n    <p><strong>Feasibility:</strong> ${(thought.interventionPoint.feasibility * 100).toFixed(0)}%</p>\r\n    <p><strong>Expected Impact:</strong> ${(thought.interventionPoint.expectedImpact * 100).toFixed(0)}%</p>\r\n  `, '');\r\n\r\n  // Actual outcome\r\n  html += renderSection('Actual Outcome', `\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">${escapeHTML(thought.actual.name)}</div>\r\n      <p>${escapeHTML(thought.actual.description)}</p>\r\n    </div>\r\n  `, '');\r\n\r\n  // Counterfactual scenarios\r\n  const cfRows = thought.counterfactuals.map(cf => {\r\n    const primaryOutcome = cf.outcomes[0];\r\n    return [\r\n      cf.name,\r\n      primaryOutcome ? primaryOutcome.description.substring(0, 60) + (primaryOutcome.description.length > 60 ? '...' : '') : '-',\r\n      cf.likelihood !== undefined ? cf.likelihood.toFixed(2) : '-',\r\n      primaryOutcome?.impact || '-',\r\n    ];\r\n  });\r\n  html += renderSection('Counterfactual Scenarios', renderTable(\r\n    ['Scenario', 'Outcome', 'Likelihood', 'Impact'],\r\n    cfRows\r\n  ), '');\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export counterfactual scenarios to Modelica format\r\n */\r\nfunction counterfactualToModelica(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  let modelica = 'package CounterfactualScenarios\\n';\r\n  modelica += '  \"Counterfactual scenario analysis with original vs. alternative outcomes\"\\n\\n';\r\n\r\n  // Intervention point record\r\n  modelica += '  record InterventionPoint\\n';\r\n  modelica += '    \"The point at which the counterfactual diverges from the actual\"\\n';\r\n  modelica += `    String description = \"${escapeModelicaString(thought.interventionPoint.description)}\";\\n`;\r\n  modelica += `    String timing = \"${escapeModelicaString(thought.interventionPoint.timing)}\";\\n`;\r\n  modelica += `    Real feasibility = ${thought.interventionPoint.feasibility};\\n`;\r\n  modelica += `    Real expectedImpact = ${thought.interventionPoint.expectedImpact};\\n`;\r\n  modelica += '  end InterventionPoint;\\n\\n';\r\n\r\n  // Actual scenario record\r\n  modelica += '  record ActualScenario\\n';\r\n  modelica += '    \"The actual outcome that occurred\"\\n';\r\n  modelica += `    String id = \"${sanitizeModelicaId(thought.actual.id)}\";\\n`;\r\n  modelica += `    String name = \"${escapeModelicaString(thought.actual.name)}\";\\n`;\r\n  modelica += `    String description = \"${escapeModelicaString(thought.actual.description)}\";\\n`;\r\n  modelica += '  end ActualScenario;\\n\\n';\r\n\r\n  // Counterfactual scenario records\r\n  for (let i = 0; i < thought.counterfactuals.length; i++) {\r\n    const scenario = thought.counterfactuals[i];\r\n    const recordName = sanitizeModelicaId(`CF_${scenario.id}`);\r\n\r\n    modelica += `  record ${recordName}\\n`;\r\n    modelica += `    \"Counterfactual: ${escapeModelicaString(scenario.name)}\"\\n`;\r\n    modelica += `    String id = \"${sanitizeModelicaId(scenario.id)}\";\\n`;\r\n    modelica += `    String name = \"${escapeModelicaString(scenario.name)}\";\\n`;\r\n    modelica += `    String description = \"${escapeModelicaString(scenario.description)}\";\\n`;\r\n\r\n    if (includeMetrics && scenario.likelihood !== undefined) {\r\n      modelica += `    Real likelihood = ${scenario.likelihood};\\n`;\r\n    }\r\n\r\n    // Add outcomes if present\r\n    if (scenario.outcomes && scenario.outcomes.length > 0) {\r\n      modelica += `    String outcomes[${scenario.outcomes.length}] = {`;\r\n      modelica += scenario.outcomes.map(o => `\"${escapeModelicaString(o.description)}\"`).join(', ');\r\n      modelica += '};\\n';\r\n    }\r\n\r\n    modelica += `  end ${recordName};\\n\\n`;\r\n  }\r\n\r\n  // Model showing the divergence\r\n  modelica += '  model ScenarioDivergence\\n';\r\n  modelica += '    \"Model showing the branching from intervention point to outcomes\"\\n';\r\n  modelica += '    InterventionPoint intervention;\\n';\r\n  modelica += '    ActualScenario actual;\\n';\r\n\r\n  for (let i = 0; i < thought.counterfactuals.length; i++) {\r\n    const scenario = thought.counterfactuals[i];\r\n    const recordName = sanitizeModelicaId(`CF_${scenario.id}`);\r\n    modelica += `    ${recordName} counterfactual${i + 1};\\n`;\r\n  }\r\n\r\n  if (includeMetrics) {\r\n    modelica += '\\n    annotation(Documentation(info=\"<html>\\n';\r\n    modelica += `      <p>Counterfactuals: ${thought.counterfactuals.length}</p>\\n`;\r\n    modelica += `      <p>Feasibility: ${(thought.interventionPoint.feasibility * 100).toFixed(1)}%</p>\\n`;\r\n    modelica += `      <p>Expected Impact: ${(thought.interventionPoint.expectedImpact * 100).toFixed(1)}%</p>\\n`;\r\n    modelica += '    </html>\"));\\n';\r\n  }\r\n\r\n  modelica += '  end ScenarioDivergence;\\n';\r\n  modelica += 'end CounterfactualScenarios;\\n';\r\n\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export counterfactual scenarios to UML format\r\n */\r\nfunction counterfactualToUML(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Intervention point node (decision node)\r\n  nodes.push({\r\n    id: 'intervention',\r\n    label: includeLabels ? thought.interventionPoint.description : 'Intervention',\r\n    shape: 'state',\r\n    stereotype: 'decision',\r\n  });\r\n\r\n  // Actual scenario node\r\n  nodes.push({\r\n    id: thought.actual.id,\r\n    label: includeLabels ? `Actual: ${thought.actual.name}` : 'Actual',\r\n    shape: 'state',\r\n  });\r\n\r\n  // Edge from intervention to actual (no intervention taken)\r\n  edges.push({\r\n    source: 'intervention',\r\n    target: thought.actual.id,\r\n    label: 'no change',\r\n    type: 'arrow',\r\n  });\r\n\r\n  // Counterfactual scenario nodes and edges\r\n  for (const scenario of thought.counterfactuals) {\r\n    nodes.push({\r\n      id: scenario.id,\r\n      label: includeLabels ? `CF: ${scenario.name}` : scenario.id,\r\n      shape: 'state',\r\n    });\r\n\r\n    const edgeLabel = includeMetrics && scenario.likelihood !== undefined\r\n      ? `intervene (${scenario.likelihood.toFixed(2)})`\r\n      : 'intervene';\r\n\r\n    edges.push({\r\n      source: 'intervention',\r\n      target: scenario.id,\r\n      label: edgeLabel,\r\n      type: 'arrow',\r\n    });\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    diagramType: 'state',\r\n    title: 'Counterfactual Scenarios',\r\n    includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export counterfactual scenarios to JSON format\r\n */\r\nfunction counterfactualToJSON(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph('counterfactual', 'Counterfactual Scenarios');\r\n\r\n  // Add intervention point node\r\n  addNode(graph, {\r\n    id: 'intervention',\r\n    label: includeLabels ? thought.interventionPoint.description : 'Intervention',\r\n    type: 'intervention',\r\n    metadata: {\r\n      timing: thought.interventionPoint.timing,\r\n      feasibility: thought.interventionPoint.feasibility,\r\n      expectedImpact: thought.interventionPoint.expectedImpact,\r\n    },\r\n  });\r\n\r\n  // Add actual scenario node\r\n  addNode(graph, {\r\n    id: thought.actual.id,\r\n    label: includeLabels ? `Actual: ${thought.actual.name}` : thought.actual.id,\r\n    type: 'actual',\r\n    metadata: {\r\n      name: thought.actual.name,\r\n      description: thought.actual.description,\r\n    },\r\n  });\r\n\r\n  // Add edge from intervention to actual\r\n  addEdge(graph, {\r\n    id: 'e_intervention_actual',\r\n    source: 'intervention',\r\n    target: thought.actual.id,\r\n    label: 'no change',\r\n    type: 'no_intervention',\r\n  });\r\n\r\n  // Add counterfactual scenario nodes and edges\r\n  for (let i = 0; i < thought.counterfactuals.length; i++) {\r\n    const scenario = thought.counterfactuals[i];\r\n\r\n    addNode(graph, {\r\n      id: scenario.id,\r\n      label: includeLabels ? `CF: ${scenario.name}` : scenario.id,\r\n      type: 'counterfactual',\r\n      metadata: {\r\n        name: scenario.name,\r\n        description: scenario.description,\r\n        likelihood: scenario.likelihood,\r\n        outcomes: scenario.outcomes?.map(o => ({\r\n          description: o.description,\r\n          impact: o.impact,\r\n        })),\r\n      },\r\n    });\r\n\r\n    addEdge(graph, {\r\n      id: `e_intervention_cf${i}`,\r\n      source: 'intervention',\r\n      target: scenario.id,\r\n      label: 'intervene',\r\n      type: 'intervention',\r\n      metadata: includeMetrics && scenario.likelihood !== undefined\r\n        ? { likelihood: scenario.likelihood }\r\n        : undefined,\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'counterfactualCount', thought.counterfactuals.length);\r\n    addMetric(graph, 'feasibility', thought.interventionPoint.feasibility);\r\n    addMetric(graph, 'expectedImpact', thought.interventionPoint.expectedImpact);\r\n  }\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export counterfactual scenarios to Markdown format\r\n */\r\nfunction counterfactualToMarkdown(thought: CounterfactualThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    parts.push(section('Metrics', keyValueSection({\r\n      'Counterfactual Scenarios': thought.counterfactuals.length,\r\n      'Intervention Feasibility': (thought.interventionPoint.feasibility * 100).toFixed(0) + '%',\r\n      'Expected Impact': (thought.interventionPoint.expectedImpact * 100).toFixed(0) + '%',\r\n    })));\r\n  }\r\n\r\n  // Intervention point\r\n  parts.push(section('Intervention Point', keyValueSection({\r\n    'Description': thought.interventionPoint.description,\r\n    'Timing': thought.interventionPoint.timing,\r\n    'Feasibility': (thought.interventionPoint.feasibility * 100).toFixed(0) + '%',\r\n    'Expected Impact': (thought.interventionPoint.expectedImpact * 100).toFixed(0) + '%',\r\n  })));\r\n\r\n  // Actual scenario\r\n  parts.push(section('Actual Scenario',\r\n    `**Name:** ${thought.actual.name}\\n\\n` +\r\n    `**Description:** ${thought.actual.description}`\r\n  ));\r\n\r\n  // Counterfactual scenarios\r\n  const cfRows = thought.counterfactuals.map(cf => {\r\n    const primaryOutcome = cf.outcomes[0];\r\n    return [\r\n      cf.name,\r\n      cf.description.substring(0, 50) + (cf.description.length > 50 ? '...' : ''),\r\n      cf.likelihood !== undefined ? cf.likelihood.toFixed(2) : 'N/A',\r\n      primaryOutcome?.impact || '-',\r\n    ];\r\n  });\r\n  parts.push(section('Counterfactual Scenarios', table(\r\n    ['Name', 'Description', 'Likelihood', 'Impact'],\r\n    cfRows\r\n  )));\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaid = counterfactualToMermaid(thought, 'default', true, includeMetrics);\r\n    parts.push(section('Visualization', mermaidBlock(mermaid)));\r\n  }\r\n\r\n  return mdDocument('Counterfactual Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: { mode: 'counterfactual', scenarios: thought.counterfactuals.length },\r\n  });\r\n}\r\n","/**\r\n * Bayesian Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Bayesian network export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { BayesianThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderProgressBar,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  generateBayesianJson,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  keyValueSection,\r\n  progressBar,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export Bayesian network to visual format\r\n */\r\nexport function exportBayesianNetwork(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return bayesianToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return bayesianToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return bayesianToASCII(thought);\r\n    case 'svg':\r\n      return bayesianToSVG(thought, options);\r\n    case 'graphml':\r\n      return bayesianToGraphML(thought, options);\r\n    case 'tikz':\r\n      return bayesianToTikZ(thought, options);\r\n    case 'html':\r\n      return bayesianToHTML(thought, options);\r\n    case 'modelica':\r\n      return bayesianToModelica(thought, options);\r\n    case 'uml':\r\n      return bayesianToUML(thought, options);\r\n    case 'json':\r\n      return bayesianToJSON(thought, options);\r\n    case 'markdown':\r\n      return bayesianToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction bayesianToMermaid(\r\n  thought: BayesianThought,\r\n  colorScheme: string,\r\n  _includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph LR\\n';\r\n\r\n  mermaid += `  H([Hypothesis])\\n`;\r\n  mermaid += `  Prior[Prior: ${includeMetrics ? thought.prior.probability.toFixed(3) : '?'}]\\n`;\r\n  mermaid += `  Evidence[Evidence]\\n`;\r\n  mermaid += `  Posterior[[Posterior: ${includeMetrics ? thought.posterior.probability.toFixed(3) : '?'}]]\\n`;\r\n\r\n  mermaid += '\\n';\r\n  mermaid += '  Prior --> H\\n';\r\n  mermaid += '  Evidence --> H\\n';\r\n  mermaid += '  H --> Posterior\\n';\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const priorColor = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    const posteriorColor = colorScheme === 'pastel' ? '#c8e6c9' : '#81c784';\r\n\r\n    mermaid += `  style Prior fill:${priorColor}\\n`;\r\n    mermaid += `  style Posterior fill:${posteriorColor}\\n`;\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction bayesianToDOT(\r\n  thought: BayesianThought,\r\n  _includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph BayesianNetwork {\\n';\r\n  dot += '  rankdir=LR;\\n';\r\n  dot += '  node [shape=ellipse];\\n\\n';\r\n\r\n  const priorProb = includeMetrics ? `: ${thought.prior.probability.toFixed(3)}` : '';\r\n  const posteriorProb = includeMetrics ? `: ${thought.posterior.probability.toFixed(3)}` : '';\r\n\r\n  dot += `  Prior [label=\"Prior${priorProb}\"];\\n`;\r\n  dot += `  Hypothesis [label=\"Hypothesis\", shape=box];\\n`;\r\n  dot += `  Evidence [label=\"Evidence\"];\\n`;\r\n  dot += `  Posterior [label=\"Posterior${posteriorProb}\", shape=doublecircle];\\n`;\r\n\r\n  dot += '\\n';\r\n  dot += '  Prior -> Hypothesis;\\n';\r\n  dot += '  Evidence -> Hypothesis;\\n';\r\n  dot += '  Hypothesis -> Posterior;\\n';\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction bayesianToASCII(thought: BayesianThought): string {\r\n  let ascii = 'Bayesian Network:\\n';\r\n  ascii += '=================\\n\\n';\r\n\r\n  ascii += `Hypothesis: ${thought.hypothesis.statement}\\n\\n`;\r\n  ascii += `Prior Probability: ${thought.prior.probability.toFixed(3)}\\n`;\r\n  ascii += `  Justification: ${thought.prior.justification}\\n\\n`;\r\n\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    ascii += 'Evidence:\\n';\r\n    for (const ev of thought.evidence) {\r\n      ascii += `   ${ev.description}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  ascii += `Posterior Probability: ${thought.posterior.probability.toFixed(3)}\\n`;\r\n  ascii += `  Calculation: ${thought.posterior.calculation}\\n`;\r\n\r\n  if (thought.bayesFactor !== undefined) {\r\n    ascii += `\\nBayes Factor: ${thought.bayesFactor.toFixed(2)}\\n`;\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export Bayesian network to native SVG format\r\n */\r\nfunction bayesianToSVG(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = 400,\r\n  } = options;\r\n\r\n  const nodeWidth = 140;\r\n  const nodeHeight = 50;\r\n  const centerX = svgWidth / 2;\r\n\r\n  // Define node positions for Bayesian network layout\r\n  const positions = new Map<string, SVGNodePosition>();\r\n\r\n  // Prior at top left\r\n  positions.set('prior', {\r\n    id: 'prior',\r\n    x: centerX - 200,\r\n    y: 80,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    label: `Prior: ${includeMetrics ? thought.prior.probability.toFixed(3) : '?'}`,\r\n    type: 'prior',\r\n  });\r\n\r\n  // Evidence at top right\r\n  positions.set('evidence', {\r\n    id: 'evidence',\r\n    x: centerX + 60,\r\n    y: 80,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    label: 'Evidence',\r\n    type: 'evidence',\r\n  });\r\n\r\n  // Hypothesis in center\r\n  positions.set('hypothesis', {\r\n    id: 'hypothesis',\r\n    x: centerX - nodeWidth / 2,\r\n    y: 180,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    label: 'Hypothesis',\r\n    type: 'hypothesis',\r\n  });\r\n\r\n  // Posterior at bottom\r\n  positions.set('posterior', {\r\n    id: 'posterior',\r\n    x: centerX - nodeWidth / 2,\r\n    y: 280,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    label: `Posterior: ${includeMetrics ? thought.posterior.probability.toFixed(3) : '?'}`,\r\n    type: 'posterior',\r\n  });\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Bayesian Network');\r\n\r\n  // Render edges\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  svg += renderEdge(positions.get('prior')!, positions.get('hypothesis')!, {});\r\n  svg += renderEdge(positions.get('evidence')!, positions.get('hypothesis')!, {});\r\n  svg += renderEdge(positions.get('hypothesis')!, positions.get('posterior')!, {});\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  // Prior - stadium shape\r\n  svg += renderStadiumNode(positions.get('prior')!, getNodeColor('primary', colorScheme));\r\n\r\n  // Evidence - rectangle\r\n  svg += renderRectNode(positions.get('evidence')!, getNodeColor('info', colorScheme));\r\n\r\n  // Hypothesis - ellipse\r\n  svg += renderEllipseNode(positions.get('hypothesis')!, getNodeColor('neutral', colorScheme));\r\n\r\n  // Posterior - stadium (result)\r\n  svg += renderStadiumNode(positions.get('posterior')!, getNodeColor('success', colorScheme));\r\n\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Prior', value: thought.prior.probability.toFixed(3) },\r\n      { label: 'Posterior', value: thought.posterior.probability.toFixed(3) },\r\n      { label: 'Bayes Factor', value: thought.bayesFactor?.toFixed(2) || 'N/A' },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 100, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Prior', color: getNodeColor('primary', colorScheme) },\r\n    { label: 'Evidence', color: getNodeColor('info', colorScheme) },\r\n    { label: 'Hypothesis', color: getNodeColor('neutral', colorScheme), shape: 'ellipse' as const },\r\n    { label: 'Posterior', color: getNodeColor('success', colorScheme) },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 100, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export Bayesian network to GraphML format\r\n */\r\nfunction bayesianToGraphML(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  // Simple structure with Prior, Hypothesis, Evidence, Posterior\r\n  const nodes: GraphMLNode[] = [\r\n    { id: 'prior', label: includeLabels ? `Prior: ${thought.prior.probability.toFixed(3)}` : 'Prior', type: 'prior' },\r\n    { id: 'hypothesis', label: 'Hypothesis', type: 'hypothesis' },\r\n    { id: 'evidence', label: 'Evidence', type: 'evidence' },\r\n    { id: 'posterior', label: includeLabels ? `Posterior: ${thought.posterior.probability.toFixed(3)}` : 'Posterior', type: 'posterior' },\r\n  ];\r\n\r\n  const edges: GraphMLEdge[] = [\r\n    { id: 'e1', source: 'prior', target: 'hypothesis' },\r\n    { id: 'e2', source: 'evidence', target: 'hypothesis' },\r\n    { id: 'e3', source: 'hypothesis', target: 'posterior' },\r\n  ];\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Bayesian Network',\r\n    includeLabels,\r\n    includeMetadata: includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export Bayesian network to TikZ/LaTeX format\r\n */\r\nfunction bayesianToTikZ(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true, colorScheme = 'default' } = options;\r\n\r\n  // Simple structure with Prior, Hypothesis, Evidence, Posterior\r\n  const nodes: TikZNode[] = [\r\n    { id: 'prior', label: includeLabels ? `Prior: ${thought.prior.probability.toFixed(3)}` : 'Prior', x: 0, y: 0, type: 'primary', shape: 'stadium' },\r\n    { id: 'evidence', label: 'Evidence', x: 4, y: 0, type: 'info', shape: 'rectangle' },\r\n    { id: 'hypothesis', label: 'Hypothesis', x: 2, y: -2, type: 'neutral', shape: 'ellipse' },\r\n    { id: 'posterior', label: includeLabels ? `Posterior: ${thought.posterior.probability.toFixed(3)}` : 'Posterior', x: 2, y: -4, type: 'success', shape: 'stadium' },\r\n  ];\r\n\r\n  const edges: TikZEdge[] = [\r\n    { source: 'prior', target: 'hypothesis', directed: true },\r\n    { source: 'evidence', target: 'hypothesis', directed: true },\r\n    { source: 'hypothesis', target: 'posterior', directed: true },\r\n  ];\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Bayesian Network',\r\n    includeLabels,\r\n    includeMetrics,\r\n    colorScheme,\r\n  });\r\n}\r\n\r\n/**\r\n * Export Bayesian network to HTML format\r\n */\r\nfunction bayesianToHTML(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Bayesian Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Hypothesis section\r\n  html += renderSection('Hypothesis', `\r\n    <p><strong>${escapeHTML(thought.hypothesis.statement)}</strong></p>\r\n    ${thought.hypothesis.alternatives && thought.hypothesis.alternatives.length > 0 ? `<p class=\"text-secondary\">Alternatives: ${thought.hypothesis.alternatives.join(', ')}</p>` : ''}\r\n  `, '');\r\n\r\n  // Probabilities section\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Prior', (thought.prior.probability * 100).toFixed(1) + '%', 'primary');\r\n    html += renderMetricCard('Posterior', (thought.posterior.probability * 100).toFixed(1) + '%', 'success');\r\n    if (thought.bayesFactor !== undefined) {\r\n      html += renderMetricCard('Bayes Factor', thought.bayesFactor.toFixed(2), 'info');\r\n    }\r\n    html += '</div>\\n';\r\n\r\n    // Prior probability bar\r\n    html += '<div class=\"card\">';\r\n    html += '<div class=\"card-header\">Prior Probability</div>';\r\n    html += renderProgressBar(thought.prior.probability * 100, 'primary');\r\n    html += `<p class=\"text-secondary\" style=\"margin-top: 0.5rem\">${escapeHTML(thought.prior.justification)}</p>`;\r\n    html += '</div>\\n';\r\n\r\n    // Posterior probability bar\r\n    html += '<div class=\"card\">';\r\n    html += '<div class=\"card-header\">Posterior Probability</div>';\r\n    html += renderProgressBar(thought.posterior.probability * 100, 'success');\r\n    html += `<p class=\"text-secondary\" style=\"margin-top: 0.5rem\">${escapeHTML(thought.posterior.calculation)}</p>`;\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Evidence section\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    const evidenceRows = thought.evidence.map((ev, i) => [\r\n      (i + 1).toString(),\r\n      ev.description,\r\n      ev.likelihoodGivenHypothesis?.toFixed(3) || '-',\r\n      ev.likelihoodGivenNotHypothesis?.toFixed(3) || '-',\r\n    ]);\r\n    html += renderSection('Evidence', renderTable(\r\n      ['#', 'Description', 'P(E|H)', 'P(E|H)'],\r\n      evidenceRows\r\n    ), '');\r\n  }\r\n\r\n  // Interpretation\r\n  const change = thought.posterior.probability - thought.prior.probability;\r\n  const changeDirection = change > 0 ? 'increased' : change < 0 ? 'decreased' : 'unchanged';\r\n  const changeClass = change > 0 ? 'text-success' : change < 0 ? 'text-danger' : 'text-secondary';\r\n\r\n  html += renderSection('Interpretation', `\r\n    <p>The posterior probability has <span class=\"${changeClass}\"><strong>${changeDirection}</strong></span>\r\n    by ${Math.abs(change * 100).toFixed(1)} percentage points from the prior.</p>\r\n    ${thought.bayesFactor !== undefined ? `\r\n      <p>Bayes Factor of ${thought.bayesFactor.toFixed(2)} indicates\r\n      ${thought.bayesFactor > 3 ? 'substantial' : thought.bayesFactor > 1 ? 'weak' : 'evidence against'}\r\n      support for the hypothesis.</p>\r\n    ` : ''}\r\n  `, '');\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export Bayesian network to Modelica format\r\n */\r\nfunction bayesianToModelica(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const { modelicaPackageName, modelicaIncludeAnnotations = true, includeMetrics = true } = options;\r\n  const packageName = modelicaPackageName || 'BayesianNetwork';\r\n  const lines: string[] = [];\r\n\r\n  lines.push(`package ${sanitizeModelicaId(packageName)}`);\r\n  lines.push(`  \"Bayesian network analysis\"`);\r\n  lines.push('');\r\n\r\n  // Hypothesis record\r\n  lines.push('  record Hypothesis');\r\n  lines.push(`    constant String statement = \"${escapeModelicaString(thought.hypothesis.statement)}\";`);\r\n  if (thought.hypothesis.alternatives && thought.hypothesis.alternatives.length > 0) {\r\n    lines.push(`    constant Integer alternativeCount = ${thought.hypothesis.alternatives.length};`);\r\n  }\r\n  lines.push('  end Hypothesis;');\r\n  lines.push('');\r\n\r\n  // Probability parameters\r\n  lines.push('  // Probability parameters');\r\n  lines.push(`  parameter Real prior = ${thought.prior.probability.toFixed(6)} \"Prior probability\";`);\r\n  lines.push(`  parameter Real posterior = ${thought.posterior.probability.toFixed(6)} \"Posterior probability\";`);\r\n  if (thought.bayesFactor !== undefined) {\r\n    lines.push(`  parameter Real bayesFactor = ${thought.bayesFactor.toFixed(6)} \"Bayes factor\";`);\r\n  }\r\n  lines.push('');\r\n\r\n  // Computed values\r\n  if (includeMetrics) {\r\n    lines.push('  // Computed metrics');\r\n    lines.push(`  final parameter Real probabilityChange = posterior - prior;`);\r\n    lines.push(`  final parameter Real updateRatio = posterior / max(prior, 1e-10);`);\r\n    lines.push('');\r\n  }\r\n\r\n  // Evidence\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    lines.push('  // Evidence');\r\n    for (let i = 0; i < thought.evidence.length; i++) {\r\n      const ev = thought.evidence[i];\r\n      lines.push(`  record Evidence_${i + 1}`);\r\n      lines.push(`    constant String description = \"${escapeModelicaString(ev.description)}\";`);\r\n      if (ev.likelihoodGivenHypothesis !== undefined) {\r\n        lines.push(`    constant Real likelihoodGivenH = ${ev.likelihoodGivenHypothesis.toFixed(6)};`);\r\n      }\r\n      if (ev.likelihoodGivenNotHypothesis !== undefined) {\r\n        lines.push(`    constant Real likelihoodGivenNotH = ${ev.likelihoodGivenNotHypothesis.toFixed(6)};`);\r\n      }\r\n      lines.push(`  end Evidence_${i + 1};`);\r\n      lines.push('');\r\n    }\r\n  }\r\n\r\n  if (modelicaIncludeAnnotations) {\r\n    lines.push('  annotation(');\r\n    lines.push('    Documentation(info=\"<html>');\r\n    lines.push(`      <p><b>Prior:</b> ${(thought.prior.probability * 100).toFixed(1)}%</p>`);\r\n    lines.push(`      <p><b>Posterior:</b> ${(thought.posterior.probability * 100).toFixed(1)}%</p>`);\r\n    lines.push('      <p>Generated by DeepThinking MCP v7.1.0</p>');\r\n    lines.push('    </html>\")');\r\n    lines.push('  );');\r\n  }\r\n\r\n  lines.push(`end ${sanitizeModelicaId(packageName)};`);\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Export Bayesian network to UML/PlantUML format\r\n */\r\nfunction bayesianToUML(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const { umlTheme, umlDirection, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [\r\n    {\r\n      id: 'prior',\r\n      label: includeMetrics ? `Prior: ${thought.prior.probability.toFixed(3)}` : 'Prior',\r\n      shape: 'entity',\r\n    },\r\n    {\r\n      id: 'evidence',\r\n      label: 'Evidence',\r\n      shape: 'rectangle',\r\n    },\r\n    {\r\n      id: 'hypothesis',\r\n      label: 'Hypothesis',\r\n      shape: 'usecase',\r\n    },\r\n    {\r\n      id: 'posterior',\r\n      label: includeMetrics ? `Posterior: ${thought.posterior.probability.toFixed(3)}` : 'Posterior',\r\n      shape: 'entity',\r\n      color: '90EE90',\r\n    },\r\n  ];\r\n\r\n  const edges: UmlEdge[] = [\r\n    { source: 'prior', target: 'hypothesis', type: 'arrow' },\r\n    { source: 'evidence', target: 'hypothesis', type: 'arrow' },\r\n    { source: 'hypothesis', target: 'posterior', type: 'arrow' },\r\n  ];\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Bayesian Network',\r\n    theme: umlTheme,\r\n    direction: umlDirection,\r\n  });\r\n}\r\n\r\n/**\r\n * Export Bayesian network to JSON format\r\n */\r\nfunction bayesianToJSON(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const { jsonPrettyPrint = true, jsonIndent = 2 } = options;\r\n\r\n  const evidenceDescriptions = thought.evidence?.map(e => e.description) || [];\r\n\r\n  return generateBayesianJson(\r\n    'Bayesian Network',\r\n    thought.prior.probability,\r\n    thought.posterior.probability,\r\n    thought.bayesFactor,\r\n    thought.hypothesis.statement,\r\n    evidenceDescriptions,\r\n    {\r\n      prettyPrint: jsonPrettyPrint,\r\n      indent: jsonIndent,\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Export Bayesian network to Markdown format\r\n */\r\nfunction bayesianToMarkdown(thought: BayesianThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Hypothesis section\r\n  const hypothesisContent = `**${thought.hypothesis.statement}**\\n\\n` +\r\n    (thought.hypothesis.alternatives && thought.hypothesis.alternatives.length > 0\r\n      ? `Alternatives: ${thought.hypothesis.alternatives.join(', ')}`\r\n      : '');\r\n  parts.push(section('Hypothesis', hypothesisContent));\r\n\r\n  // Probabilities section\r\n  if (includeMetrics) {\r\n    const priorPct = (thought.prior.probability * 100).toFixed(1);\r\n    const posteriorPct = (thought.posterior.probability * 100).toFixed(1);\r\n\r\n    const metricsContent = keyValueSection({\r\n      'Prior Probability': `${priorPct}%`,\r\n      'Posterior Probability': `${posteriorPct}%`,\r\n      ...(thought.bayesFactor !== undefined ? { 'Bayes Factor': thought.bayesFactor.toFixed(2) } : {}),\r\n    });\r\n    parts.push(section('Probabilities', metricsContent));\r\n\r\n    // Progress bars\r\n    parts.push(section('Prior', `${progressBar(thought.prior.probability * 100)}\\n\\n${thought.prior.justification}`));\r\n    parts.push(section('Posterior', `${progressBar(thought.posterior.probability * 100)}\\n\\n${thought.posterior.calculation}`));\r\n  }\r\n\r\n  // Evidence section\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    const evidenceRows = thought.evidence.map((ev, i) => [\r\n      (i + 1).toString(),\r\n      ev.description,\r\n      ev.likelihoodGivenHypothesis?.toFixed(3) || '-',\r\n      ev.likelihoodGivenNotHypothesis?.toFixed(3) || '-',\r\n    ]);\r\n    parts.push(section('Evidence', table(['#', 'Description', 'P(E|H)', 'P(E|H)'], evidenceRows)));\r\n  }\r\n\r\n  // Interpretation\r\n  const change = thought.posterior.probability - thought.prior.probability;\r\n  const changeDirection = change > 0 ? 'increased' : change < 0 ? 'decreased' : 'unchanged';\r\n  const interpretation = `The posterior probability has **${changeDirection}** by ${Math.abs(change * 100).toFixed(1)} percentage points from the prior.` +\r\n    (thought.bayesFactor !== undefined\r\n      ? `\\n\\nBayes Factor of ${thought.bayesFactor.toFixed(2)} indicates ${thought.bayesFactor > 3 ? 'substantial' : thought.bayesFactor > 1 ? 'weak' : 'evidence against'} support for the hypothesis.`\r\n      : '');\r\n  parts.push(section('Interpretation', interpretation));\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = bayesianToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Bayesian Network Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Bayesian Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'bayesian',\r\n      prior: thought.prior.probability,\r\n      posterior: thought.posterior.probability,\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Evidential Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Evidential belief export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { EvidentialThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderSection,\r\n  renderTable,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export evidential belief visualization to visual format\r\n */\r\nexport function exportEvidentialBeliefs(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return evidentialToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return evidentialToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return evidentialToASCII(thought);\r\n    case 'svg':\r\n      return evidentialToSVG(thought, options);\r\n    case 'graphml':\r\n      return evidentialToGraphML(thought, options);\r\n    case 'tikz':\r\n      return evidentialToTikZ(thought, options);\r\n    case 'html':\r\n      return evidentialToHTML(thought, options);\r\n    case 'modelica':\r\n      return evidentialToModelica(thought, options);\r\n    case 'uml':\r\n      return evidentialToUML(thought, options);\r\n    case 'json':\r\n      return evidentialToJSON(thought, options);\r\n    case 'markdown':\r\n      return evidentialToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction evidentialToMermaid(\r\n  thought: EvidentialThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  mermaid += '  Frame[\"Frame of Discernment\"]\\n';\r\n\r\n  if (thought.frameOfDiscernment) {\r\n    for (const hypothesis of thought.frameOfDiscernment) {\r\n      const hypId = sanitizeId(hypothesis);\r\n      const label = includeLabels ? hypothesis : hypId;\r\n\r\n      mermaid += `  ${hypId}[\"${label}\"]\\n`;\r\n      mermaid += `  Frame --> ${hypId}\\n`;\r\n    }\r\n  }\r\n\r\n  if (includeMetrics && (thought as any).massAssignments && (thought as any).massAssignments.length > 0) {\r\n    mermaid += '\\n';\r\n    for (const mass of (thought as any).massAssignments) {\r\n      const massId = sanitizeId(mass.subset.join('_'));\r\n      const label = `{${mass.subset.join(', ')}}`;\r\n      mermaid += `  ${massId}[\"${label}: ${mass.mass.toFixed(3)}\"]\\n`;\r\n    }\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome' && thought.frameOfDiscernment) {\r\n    mermaid += '\\n';\r\n    const color = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    for (const hypothesis of thought.frameOfDiscernment) {\r\n      const hypId = sanitizeId(hypothesis);\r\n      mermaid += `  style ${hypId} fill:${color}\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction evidentialToDOT(\r\n  thought: EvidentialThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph EvidentialBeliefs {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  dot += '  Frame [label=\"Frame of Discernment\", shape=ellipse];\\n\\n';\r\n\r\n  if (thought.frameOfDiscernment) {\r\n    for (const hypothesis of thought.frameOfDiscernment) {\r\n      const hypId = sanitizeId(hypothesis);\r\n      const label = includeLabels ? hypothesis : hypId;\r\n\r\n      dot += `  ${hypId} [label=\"${label}\"];\\n`;\r\n      dot += `  Frame -> ${hypId};\\n`;\r\n    }\r\n  }\r\n\r\n  if (includeMetrics && (thought as any).massAssignments && (thought as any).massAssignments.length > 0) {\r\n    dot += '\\n';\r\n    for (const mass of (thought as any).massAssignments) {\r\n      const massId = sanitizeId(mass.subset.join('_'));\r\n      const label = `{${mass.subset.join(', ')}}: ${mass.mass.toFixed(3)}`;\r\n      dot += `  ${massId} [label=\"${label}\", shape=note];\\n`;\r\n    }\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction evidentialToASCII(thought: EvidentialThought): string {\r\n  let ascii = 'Evidential Belief Visualization:\\n';\r\n  ascii += '================================\\n\\n';\r\n\r\n  ascii += 'Frame of Discernment:\\n';\r\n  if (thought.frameOfDiscernment) {\r\n    ascii += `  {${thought.frameOfDiscernment.join(', ')}}\\n\\n`;\r\n  } else {\r\n    ascii += '  (not defined)\\n\\n';\r\n  }\r\n\r\n  if ((thought as any).massAssignments && (thought as any).massAssignments.length > 0) {\r\n    ascii += 'Mass Assignments:\\n';\r\n    for (const mass of (thought as any).massAssignments) {\r\n      ascii += `  m({${mass.subset.join(', ')}}) = ${mass.mass.toFixed(3)}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n    ascii += `Belief Functions: ${thought.beliefFunctions.length} defined\\n`;\r\n  }\r\n\r\n  if ((thought as any).plausibilityFunction) {\r\n    ascii += `Plausibility: ${(thought as any).plausibilityFunction.toFixed(3)}\\n`;\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export evidential belief visualization to native SVG format\r\n */\r\nfunction evidentialToSVG(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n  } = options;\r\n\r\n  if (!thought.frameOfDiscernment || thought.frameOfDiscernment.length === 0) {\r\n    return generateSVGHeader(svgWidth, 200, 'Evidential Beliefs') +\r\n      '\\n  <text x=\"400\" y=\"100\" text-anchor=\"middle\" class=\"subtitle\">No frame of discernment defined</text>\\n' +\r\n      generateSVGFooter();\r\n  }\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n\r\n  // Frame of discernment at the top center\r\n  positions.set('frame', {\r\n    id: 'frame',\r\n    label: 'Frame of Discernment',\r\n    x: svgWidth / 2,\r\n    y: 80,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    type: 'frame',\r\n  });\r\n\r\n  // Hypotheses below the frame\r\n  const hypSpacing = Math.min(200, svgWidth / (thought.frameOfDiscernment.length + 1));\r\n  const hypStartX = (svgWidth - (thought.frameOfDiscernment.length - 1) * hypSpacing) / 2;\r\n  thought.frameOfDiscernment.forEach((hypothesis, index) => {\r\n    const hypId = sanitizeId(hypothesis);\r\n    positions.set(hypId, {\r\n      id: hypId,\r\n      label: includeLabels ? hypothesis : hypId,\r\n      x: hypStartX + index * hypSpacing,\r\n      y: 200,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'hypothesis',\r\n    });\r\n  });\r\n\r\n  const actualHeight = 400;\r\n\r\n  let svg = generateSVGHeader(svgWidth, actualHeight, 'Evidential Beliefs');\r\n\r\n  // Render edges from frame to hypotheses\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  const framePos = positions.get('frame')!;\r\n  for (const hypothesis of thought.frameOfDiscernment) {\r\n    const hypPos = positions.get(sanitizeId(hypothesis));\r\n    if (hypPos) {\r\n      svg += renderEdge(framePos, hypPos);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  const frameColors = getNodeColor('warning', colorScheme);\r\n  const hypColors = getNodeColor('primary', colorScheme);\r\n\r\n  svg += renderEllipseNode(framePos, frameColors);\r\n\r\n  for (const [id, pos] of positions) {\r\n    if (id !== 'frame') {\r\n      svg += renderRectNode(pos, hypColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Hypotheses', value: thought.frameOfDiscernment.length },\r\n      { label: 'Belief Functions', value: thought.beliefFunctions?.length || 0 },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, actualHeight - 110, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Frame', color: frameColors, shape: 'ellipse' as const },\r\n    { label: 'Hypothesis', color: hypColors },\r\n  ];\r\n  svg += renderLegend(20, actualHeight - 80, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export evidential belief visualization to GraphML format\r\n */\r\nfunction evidentialToGraphML(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeId = 0;\r\n\r\n  // Create nodes for evidence items\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    for (const evidence of thought.evidence) {\r\n      nodes.push({\r\n        id: evidence.id,\r\n        label: includeLabels ? evidence.description : evidence.id,\r\n        type: 'evidence',\r\n        metadata: {\r\n          source: evidence.source,\r\n          reliability: evidence.reliability,\r\n          description: evidence.description,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create nodes for belief functions\r\n  if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n    for (const belief of thought.beliefFunctions) {\r\n      const label = includeLabels\r\n        ? `Belief: ${belief.source}`\r\n        : belief.id;\r\n\r\n      nodes.push({\r\n        id: belief.id,\r\n        label,\r\n        type: 'belief',\r\n        metadata: belief.conflictMass !== undefined\r\n          ? { conflictMass: belief.conflictMass }\r\n          : undefined,\r\n      });\r\n\r\n      // Create edges from evidence to beliefs\r\n      if (thought.evidence && thought.evidence.length > 0) {\r\n        const sourceEvidence = thought.evidence.find(e => e.id === belief.source);\r\n        if (sourceEvidence) {\r\n          edges.push({\r\n            id: `e${edgeId++}`,\r\n            source: sourceEvidence.id,\r\n            target: belief.id,\r\n            label: includeMetrics ? `strength: ${sourceEvidence.reliability.toFixed(3)}` : undefined,\r\n            metadata: includeMetrics ? { weight: sourceEvidence.reliability } : undefined,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // If no evidence or beliefs, create frame of discernment nodes\r\n  if (nodes.length === 0 && thought.frameOfDiscernment && thought.frameOfDiscernment.length > 0) {\r\n    nodes.push({\r\n      id: 'frame',\r\n      label: 'Frame of Discernment',\r\n      type: 'frame',\r\n    });\r\n\r\n    for (const hypothesis of thought.frameOfDiscernment) {\r\n      const hypId = sanitizeId(hypothesis);\r\n      nodes.push({\r\n        id: hypId,\r\n        label: includeLabels ? hypothesis : hypId,\r\n        type: 'hypothesis',\r\n      });\r\n\r\n      edges.push({\r\n        id: `e${edgeId++}`,\r\n        source: 'frame',\r\n        target: hypId,\r\n      });\r\n    }\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Evidential Beliefs',\r\n    includeLabels,\r\n    includeMetadata: includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export evidential belief visualization to TikZ/LaTeX format\r\n */\r\nfunction evidentialToTikZ(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true, colorScheme = 'default' } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n\r\n  // Create nodes for evidence items (top layer)\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    const evidenceCount = thought.evidence.length;\r\n    const evidenceSpacing = Math.min(3, 8 / evidenceCount);\r\n    const startX = (8 - (evidenceCount - 1) * evidenceSpacing) / 2;\r\n\r\n    for (let i = 0; i < thought.evidence.length; i++) {\r\n      const evidence = thought.evidence[i];\r\n      const label = includeLabels\r\n        ? `${evidence.description.substring(0, 20)}${evidence.description.length > 20 ? '...' : ''}`\r\n        : evidence.id;\r\n\r\n      nodes.push({\r\n        id: evidence.id,\r\n        label,\r\n        x: startX + i * evidenceSpacing,\r\n        y: 0,\r\n        type: 'evidence',\r\n        shape: 'rectangle',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create nodes for belief functions (bottom layer)\r\n  if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n    const beliefCount = thought.beliefFunctions.length;\r\n    const beliefSpacing = Math.min(3, 8 / beliefCount);\r\n    const startX = (8 - (beliefCount - 1) * beliefSpacing) / 2;\r\n\r\n    for (let i = 0; i < thought.beliefFunctions.length; i++) {\r\n      const belief = thought.beliefFunctions[i];\r\n      const label = includeLabels\r\n        ? `Belief: ${belief.source}`\r\n        : belief.id;\r\n\r\n      nodes.push({\r\n        id: belief.id,\r\n        label,\r\n        x: startX + i * beliefSpacing,\r\n        y: -3,\r\n        type: 'primary',\r\n        shape: 'ellipse',\r\n      });\r\n\r\n      // Create edges from evidence to beliefs with strength labels\r\n      if (thought.evidence && thought.evidence.length > 0) {\r\n        const sourceEvidence = thought.evidence.find(e => e.id === belief.source);\r\n        if (sourceEvidence) {\r\n          edges.push({\r\n            source: sourceEvidence.id,\r\n            target: belief.id,\r\n            label: includeMetrics ? sourceEvidence.reliability.toFixed(3) : undefined,\r\n            directed: true,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // If no evidence or beliefs, create frame of discernment structure\r\n  if (nodes.length === 0 && thought.frameOfDiscernment && thought.frameOfDiscernment.length > 0) {\r\n    nodes.push({\r\n      id: 'frame',\r\n      label: 'Frame of Discernment',\r\n      x: 4,\r\n      y: 0,\r\n      type: 'warning',\r\n      shape: 'ellipse',\r\n    });\r\n\r\n    const hypCount = thought.frameOfDiscernment.length;\r\n    const hypSpacing = Math.min(2.5, 8 / hypCount);\r\n    const startX = (8 - (hypCount - 1) * hypSpacing) / 2;\r\n\r\n    for (let i = 0; i < thought.frameOfDiscernment.length; i++) {\r\n      const hypothesis = thought.frameOfDiscernment[i];\r\n      const hypId = sanitizeId(hypothesis);\r\n\r\n      nodes.push({\r\n        id: hypId,\r\n        label: includeLabels ? hypothesis : hypId,\r\n        x: startX + i * hypSpacing,\r\n        y: -2.5,\r\n        type: 'info',\r\n        shape: 'rectangle',\r\n      });\r\n\r\n      edges.push({\r\n        source: 'frame',\r\n        target: hypId,\r\n        directed: true,\r\n      });\r\n    }\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Evidential Beliefs',\r\n    includeLabels,\r\n    includeMetrics,\r\n    colorScheme,\r\n  });\r\n}\r\n\r\n/**\r\n * Export evidential beliefs to HTML format\r\n */\r\nfunction evidentialToHTML(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Evidential Reasoning Analysis',\r\n    htmlTheme = 'light',\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Frame of discernment\r\n  if (thought.frameOfDiscernment && thought.frameOfDiscernment.length > 0) {\r\n    html += renderSection('Frame of Discernment', `\r\n      <p>Hypotheses under consideration:</p>\r\n      <ul class=\"list-styled\">\r\n        ${thought.frameOfDiscernment.map(h => `<li>${escapeHTML(h)}</li>`).join('\\n')}\r\n      </ul>\r\n    `, '');\r\n  }\r\n\r\n  // Evidence table\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    const evRows = thought.evidence.map(ev => [\r\n      ev.id,\r\n      ev.description,\r\n      ev.reliability.toFixed(2),\r\n      ev.source || '-',\r\n    ]);\r\n    html += renderSection('Evidence', renderTable(\r\n      ['ID', 'Description', 'Reliability', 'Source'],\r\n      evRows\r\n    ), '');\r\n  }\r\n\r\n  // Belief functions\r\n  if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n    const bfContent = thought.beliefFunctions.map(bf => {\r\n      const massRows = bf.massAssignments.map(ma =>\r\n        `<tr><td>{${ma.hypothesisSet.join(', ')}}</td><td>${ma.mass.toFixed(3)}</td><td>${escapeHTML(ma.justification)}</td></tr>`\r\n      ).join('\\n');\r\n      return `\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">Belief from: ${escapeHTML(bf.source)}</div>\r\n          ${bf.conflictMass ? `<p><strong>Conflict Mass:</strong> ${bf.conflictMass.toFixed(3)}</p>` : ''}\r\n          <table class=\"table\">\r\n            <thead><tr><th>Hypothesis Set</th><th>Mass</th><th>Justification</th></tr></thead>\r\n            <tbody>${massRows}</tbody>\r\n          </table>\r\n        </div>\r\n      `;\r\n    }).join('\\n');\r\n    html += renderSection('Belief Functions', bfContent, '');\r\n  }\r\n\r\n  // Combined belief if available\r\n  if (thought.combinedBelief) {\r\n    const massRows = thought.combinedBelief.massAssignments.map(ma =>\r\n      `<tr><td>{${ma.hypothesisSet.join(', ')}}</td><td>${ma.mass.toFixed(3)}</td><td>${escapeHTML(ma.justification)}</td></tr>`\r\n    ).join('\\n');\r\n    html += renderSection('Combined Belief', `\r\n      <table class=\"table\">\r\n        <thead><tr><th>Hypothesis Set</th><th>Mass</th><th>Justification</th></tr></thead>\r\n        <tbody>${massRows}</tbody>\r\n      </table>\r\n      ${thought.combinedBelief.conflictMass ? `<p><strong>Conflict Mass:</strong> ${thought.combinedBelief.conflictMass.toFixed(3)}</p>` : ''}\r\n    `, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export evidential beliefs to Modelica format\r\n */\r\nfunction evidentialToModelica(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  let modelica = 'package EvidentialBeliefs\\n';\r\n  modelica += '  \"Evidential reasoning with belief degrees and evidence\"\\n\\n';\r\n\r\n  // Define evidence records\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    modelica += '  // Evidence Items\\n';\r\n    for (const evidence of thought.evidence) {\r\n      const evId = sanitizeModelicaId(evidence.id);\r\n      const desc = includeLabels ? escapeModelicaString(evidence.description) : '';\r\n\r\n      modelica += `  record ${evId}\\n`;\r\n      modelica += `    \"Evidence: ${desc}\"\\n`;\r\n      modelica += `    parameter Real reliability = ${evidence.reliability};\\n`;\r\n      if (evidence.source) {\r\n        modelica += `    parameter String source = \"${escapeModelicaString(evidence.source)}\";\\n`;\r\n      }\r\n      modelica += `    parameter String description = \"${desc}\";\\n`;\r\n      modelica += `  end ${evId};\\n\\n`;\r\n    }\r\n  }\r\n\r\n  // Define belief function records\r\n  if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n    modelica += '  // Belief Functions\\n';\r\n    for (const belief of thought.beliefFunctions) {\r\n      const bfId = sanitizeModelicaId(belief.id);\r\n\r\n      modelica += `  record ${bfId}\\n`;\r\n      modelica += `    \"Belief function from ${escapeModelicaString(belief.source)}\"\\n`;\r\n\r\n      // Mass assignments as parameters\r\n      if (belief.massAssignments && belief.massAssignments.length > 0) {\r\n        for (let i = 0; i < belief.massAssignments.length; i++) {\r\n          const ma = belief.massAssignments[i];\r\n          const hypSet = ma.hypothesisSet.map(h => sanitizeModelicaId(h)).join('_');\r\n          modelica += `    parameter Real mass_${hypSet} = ${ma.mass};\\n`;\r\n        }\r\n      }\r\n\r\n      if (belief.conflictMass !== undefined && includeMetrics) {\r\n        modelica += `    parameter Real conflictMass = ${belief.conflictMass};\\n`;\r\n      }\r\n\r\n      modelica += `  end ${bfId};\\n\\n`;\r\n    }\r\n  }\r\n\r\n  // Combined belief if available\r\n  if (thought.combinedBelief && includeMetrics) {\r\n    modelica += '  // Combined Belief\\n';\r\n    modelica += '  record CombinedBelief\\n';\r\n    modelica += '    \"Result of combining all evidence\"\\n';\r\n\r\n    if (thought.combinedBelief.massAssignments) {\r\n      for (let i = 0; i < thought.combinedBelief.massAssignments.length; i++) {\r\n        const ma = thought.combinedBelief.massAssignments[i];\r\n        const hypSet = ma.hypothesisSet.map(h => sanitizeModelicaId(h)).join('_');\r\n        modelica += `    parameter Real mass_${hypSet} = ${ma.mass};\\n`;\r\n      }\r\n    }\r\n\r\n    if (thought.combinedBelief.conflictMass !== undefined) {\r\n      modelica += `    parameter Real conflictMass = ${thought.combinedBelief.conflictMass};\\n`;\r\n    }\r\n\r\n    modelica += '  end CombinedBelief;\\n\\n';\r\n  }\r\n\r\n  // Frame of discernment as enumeration\r\n  if (thought.frameOfDiscernment && thought.frameOfDiscernment.length > 0) {\r\n    modelica += '  // Frame of Discernment\\n';\r\n    modelica += '  type Hypothesis = enumeration(\\n';\r\n    const hypEnums = thought.frameOfDiscernment.map(h => `    ${sanitizeModelicaId(h)}`);\r\n    modelica += hypEnums.join(',\\n');\r\n    modelica += '\\n  );\\n\\n';\r\n  }\r\n\r\n  modelica += 'end EvidentialBeliefs;\\n';\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export evidential beliefs to UML format\r\n */\r\nfunction evidentialToUML(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Create evidence nodes (classes with attributes)\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    for (const evidence of thought.evidence) {\r\n      const attributes = [\r\n        `reliability: Real = ${evidence.reliability}`,\r\n      ];\r\n\r\n      if (includeLabels) {\r\n        attributes.unshift(`description: String = \"${evidence.description.substring(0, 30)}${evidence.description.length > 30 ? '...' : ''}\"`);\r\n      }\r\n\r\n      if (evidence.source) {\r\n        attributes.push(`source: String = \"${evidence.source}\"`);\r\n      }\r\n\r\n      nodes.push({\r\n        id: evidence.id,\r\n        label: evidence.id,\r\n        shape: 'class',\r\n        stereotype: '<<evidence>>',\r\n        attributes,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create belief function nodes\r\n  if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n    for (const belief of thought.beliefFunctions) {\r\n      const attributes: string[] = [];\r\n\r\n      // Add mass assignments as attributes\r\n      if (includeMetrics && belief.massAssignments && belief.massAssignments.length > 0) {\r\n        for (const ma of belief.massAssignments) {\r\n          const hypSet = ma.hypothesisSet.join(', ');\r\n          attributes.push(`m({${hypSet}}): Real = ${ma.mass.toFixed(3)}`);\r\n        }\r\n      }\r\n\r\n      if (belief.conflictMass !== undefined && includeMetrics) {\r\n        attributes.push(`conflictMass: Real = ${belief.conflictMass.toFixed(3)}`);\r\n      }\r\n\r\n      nodes.push({\r\n        id: belief.id,\r\n        label: includeLabels ? `Belief from ${belief.source}` : belief.id,\r\n        shape: 'class',\r\n        stereotype: '<<belief>>',\r\n        attributes,\r\n      });\r\n\r\n      // Create edges from evidence to beliefs\r\n      if (thought.evidence && thought.evidence.length > 0) {\r\n        const sourceEvidence = thought.evidence.find(e => e.id === belief.source);\r\n        if (sourceEvidence) {\r\n          edges.push({\r\n            source: sourceEvidence.id,\r\n            target: belief.id,\r\n            type: 'association',\r\n            label: includeMetrics ? `[${sourceEvidence.reliability.toFixed(3)}]` : 'supports',\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Create combined belief node if available\r\n  if (thought.combinedBelief && includeMetrics) {\r\n    const attributes: string[] = [];\r\n\r\n    if (thought.combinedBelief.massAssignments) {\r\n      for (const ma of thought.combinedBelief.massAssignments) {\r\n        const hypSet = ma.hypothesisSet.join(', ');\r\n        attributes.push(`m({${hypSet}}): Real = ${ma.mass.toFixed(3)}`);\r\n      }\r\n    }\r\n\r\n    if (thought.combinedBelief.conflictMass !== undefined) {\r\n      attributes.push(`conflictMass: Real = ${thought.combinedBelief.conflictMass.toFixed(3)}`);\r\n    }\r\n\r\n    nodes.push({\r\n      id: 'combined_belief',\r\n      label: 'Combined Belief',\r\n      shape: 'class',\r\n      stereotype: '<<conclusion>>',\r\n      attributes,\r\n    });\r\n\r\n    // Connect all beliefs to combined belief\r\n    if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n      for (const belief of thought.beliefFunctions) {\r\n        edges.push({\r\n          source: belief.id,\r\n          target: 'combined_belief',\r\n          type: 'dependency',\r\n          label: 'combines',\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // If no evidence or beliefs, show frame of discernment\r\n  if (nodes.length === 0 && thought.frameOfDiscernment && thought.frameOfDiscernment.length > 0) {\r\n    nodes.push({\r\n      id: 'frame',\r\n      label: 'Frame of Discernment',\r\n      shape: 'class',\r\n      stereotype: '<<enumeration>>',\r\n      attributes: thought.frameOfDiscernment.map(h => `${sanitizeId(h)}`),\r\n    });\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Evidential Reasoning',\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export evidential beliefs to JSON format\r\n */\r\nfunction evidentialToJSON(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph('evidential', 'Evidential Beliefs');\r\n\r\n  // Add evidence nodes\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    for (const evidence of thought.evidence) {\r\n      addNode(graph, {\r\n        id: evidence.id,\r\n        label: evidence.description,\r\n        type: 'evidence',\r\n        metadata: {\r\n          reliability: evidence.reliability,\r\n          source: evidence.source,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add belief function nodes\r\n  if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n    for (const belief of thought.beliefFunctions) {\r\n      const metadata: Record<string, any> = {\r\n        source: belief.source,\r\n      };\r\n\r\n      if (includeMetrics && belief.massAssignments) {\r\n        metadata.massAssignments = belief.massAssignments.map(ma => ({\r\n          hypothesisSet: ma.hypothesisSet,\r\n          mass: ma.mass,\r\n          justification: ma.justification,\r\n        }));\r\n      }\r\n\r\n      if (belief.conflictMass !== undefined) {\r\n        metadata.conflictMass = belief.conflictMass;\r\n      }\r\n\r\n      addNode(graph, {\r\n        id: belief.id,\r\n        label: `Belief: ${belief.source}`,\r\n        type: 'belief',\r\n        metadata,\r\n      });\r\n\r\n      // Create edges from evidence to beliefs\r\n      if (thought.evidence && thought.evidence.length > 0) {\r\n        const sourceEvidence = thought.evidence.find(e => e.id === belief.source);\r\n        if (sourceEvidence) {\r\n          addEdge(graph, {\r\n            id: `edge_${sourceEvidence.id}_${belief.id}`,\r\n            source: sourceEvidence.id,\r\n            target: belief.id,\r\n            label: 'supports',\r\n            weight: sourceEvidence.reliability,\r\n            metadata: includeMetrics ? {\r\n              reliability: sourceEvidence.reliability,\r\n            } : undefined,\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add combined belief node if available\r\n  if (thought.combinedBelief) {\r\n    const metadata: Record<string, any> = {};\r\n\r\n    if (includeMetrics && thought.combinedBelief.massAssignments) {\r\n      metadata.massAssignments = thought.combinedBelief.massAssignments.map(ma => ({\r\n        hypothesisSet: ma.hypothesisSet,\r\n        mass: ma.mass,\r\n        justification: ma.justification,\r\n      }));\r\n    }\r\n\r\n    if (thought.combinedBelief.conflictMass !== undefined) {\r\n      metadata.conflictMass = thought.combinedBelief.conflictMass;\r\n    }\r\n\r\n    addNode(graph, {\r\n      id: 'combined_belief',\r\n      label: 'Combined Belief',\r\n      type: 'conclusion',\r\n      metadata,\r\n    });\r\n\r\n    // Connect all beliefs to combined belief\r\n    if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n      for (const belief of thought.beliefFunctions) {\r\n        addEdge(graph, {\r\n          id: `edge_${belief.id}_combined`,\r\n          source: belief.id,\r\n          target: 'combined_belief',\r\n          label: 'combines',\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add frame of discernment as metadata if no evidence/beliefs\r\n  if (graph.nodes.length === 0 && thought.frameOfDiscernment && thought.frameOfDiscernment.length > 0) {\r\n    addNode(graph, {\r\n      id: 'frame',\r\n      label: 'Frame of Discernment',\r\n      type: 'frame',\r\n      metadata: {\r\n        hypotheses: thought.frameOfDiscernment,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    if (thought.frameOfDiscernment) {\r\n      addMetric(graph, 'hypotheses', thought.frameOfDiscernment.length);\r\n    }\r\n    if (thought.evidence) {\r\n      addMetric(graph, 'evidenceCount', thought.evidence.length);\r\n    }\r\n    if (thought.beliefFunctions) {\r\n      addMetric(graph, 'beliefFunctions', thought.beliefFunctions.length);\r\n    }\r\n    if (thought.combinedBelief) {\r\n      addMetric(graph, 'hasCombinedBelief', true);\r\n    }\r\n  }\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export evidential beliefs to Markdown format\r\n */\r\nfunction evidentialToMarkdown(thought: EvidentialThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    parts.push(section('Metrics', keyValueSection({\r\n      'Hypotheses': thought.frameOfDiscernment?.length || 0,\r\n      'Evidence Items': thought.evidence?.length || 0,\r\n      'Belief Functions': thought.beliefFunctions?.length || 0,\r\n    })));\r\n  }\r\n\r\n  // Frame of discernment\r\n  if (thought.frameOfDiscernment && thought.frameOfDiscernment.length > 0) {\r\n    parts.push(section('Frame of Discernment',\r\n      list(thought.frameOfDiscernment)\r\n    ));\r\n  }\r\n\r\n  // Evidence\r\n  if (thought.evidence && thought.evidence.length > 0) {\r\n    const evRows = thought.evidence.map(ev => [\r\n      ev.id,\r\n      ev.description,\r\n      ev.reliability.toFixed(2),\r\n      ev.source || '-',\r\n    ]);\r\n    parts.push(section('Evidence', table(\r\n      ['ID', 'Description', 'Reliability', 'Source'],\r\n      evRows\r\n    )));\r\n  }\r\n\r\n  // Belief functions\r\n  if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\r\n    const beliefContent: string[] = [];\r\n    for (const bf of thought.beliefFunctions) {\r\n      beliefContent.push(`**Source:** ${bf.source}\\n`);\r\n      if (bf.conflictMass !== undefined) {\r\n        beliefContent.push(`**Conflict Mass:** ${bf.conflictMass.toFixed(3)}\\n`);\r\n      }\r\n      const massRows = bf.massAssignments.map(ma => [\r\n        `{${ma.hypothesisSet.join(', ')}}`,\r\n        ma.mass.toFixed(3),\r\n        ma.justification,\r\n      ]);\r\n      beliefContent.push(table(\r\n        ['Hypothesis Set', 'Mass', 'Justification'],\r\n        massRows\r\n      ));\r\n      beliefContent.push('\\n');\r\n    }\r\n    parts.push(section('Belief Functions', beliefContent.join('')));\r\n  }\r\n\r\n  // Combined belief\r\n  if (thought.combinedBelief) {\r\n    const massRows = thought.combinedBelief.massAssignments.map(ma => [\r\n      `{${ma.hypothesisSet.join(', ')}}`,\r\n      ma.mass.toFixed(3),\r\n      ma.justification,\r\n    ]);\r\n    let combinedContent = table(\r\n      ['Hypothesis Set', 'Mass', 'Justification'],\r\n      massRows\r\n    );\r\n    if (thought.combinedBelief.conflictMass !== undefined) {\r\n      combinedContent += `\\n**Conflict Mass:** ${thought.combinedBelief.conflictMass.toFixed(3)}\\n`;\r\n    }\r\n    parts.push(section('Combined Belief', combinedContent));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaid = evidentialToMermaid(thought, 'default', true, includeMetrics);\r\n    parts.push(section('Visualization', mermaidBlock(mermaid)));\r\n  }\r\n\r\n  return mdDocument('Evidential Reasoning Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'evidential',\r\n      hypotheses: thought.frameOfDiscernment?.length || 0,\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Game Theory Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Game tree export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support, GraphML, and TikZ\r\n */\r\n\r\nimport type { GameTheoryThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  createTreeGraphML,\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  createTreeTikZ,\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  addLegendItem,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export game tree to visual format\r\n */\r\nexport function exportGameTree(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return gameTreeToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return gameTreeToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return gameTreeToASCII(thought);\r\n    case 'svg':\r\n      return gameTreeToSVG(thought, options);\r\n    case 'graphml':\r\n      return gameTreeToGraphML(thought, options);\r\n    case 'tikz':\r\n      return gameTreeToTikZ(thought, options);\r\n    case 'html':\r\n      return gameTreeToHTML(thought, options);\r\n    case 'modelica':\r\n      return gameTheoryToModelica(thought, options);\r\n    case 'uml':\r\n      return gameTheoryToUML(thought, options);\r\n    case 'json':\r\n      return gameTheoryToJSON(thought, options);\r\n    case 'markdown':\r\n      return gameTheoryToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction gameTreeToMermaid(\r\n  thought: GameTheoryThought,\r\n  _colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  if (!thought.game) {\r\n    return mermaid + '  root[No game defined]\\n';\r\n  }\r\n\r\n  if (thought.gameTree && thought.gameTree.nodes) {\r\n    for (const node of thought.gameTree.nodes) {\r\n      const nodeId = sanitizeId(node.id);\r\n      const label = includeLabels ? (node.action || node.id) : nodeId;\r\n      const shape = node.type === 'terminal' ? ['[[', ']]'] : ['[', ']'];\r\n      mermaid += `  ${nodeId}${shape[0]}${label}${shape[1]}\\n`;\r\n    }\r\n\r\n    mermaid += '\\n';\r\n\r\n    for (const node of thought.gameTree.nodes) {\r\n      if (node.childNodes && node.childNodes.length > 0) {\r\n        for (const childId of node.childNodes) {\r\n          const fromId = sanitizeId(node.id);\r\n          const toId = sanitizeId(childId);\r\n          const childNode = thought.gameTree.nodes.find(n => n.id === childId);\r\n\r\n          if (includeMetrics && childNode?.action) {\r\n            mermaid += `  ${fromId} --> |${childNode.action}| ${toId}\\n`;\r\n          } else {\r\n            mermaid += `  ${fromId} --> ${toId}\\n`;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } else {\r\n    mermaid += '  root[Game]\\n';\r\n    if (thought.strategies) {\r\n      for (const strategy of thought.strategies.slice(0, 5)) {\r\n        const stratId = sanitizeId(strategy.id);\r\n        mermaid += `  root --> ${stratId}[${strategy.name}]\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction gameTreeToDOT(\r\n  thought: GameTheoryThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph GameTree {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += '  node [shape=circle];\\n\\n';\r\n\r\n  if (!thought.game) {\r\n    dot += '  root [label=\"No game\"];\\n}\\n';\r\n    return dot;\r\n  }\r\n\r\n  if (thought.gameTree && thought.gameTree.nodes) {\r\n    for (const node of thought.gameTree.nodes) {\r\n      const nodeId = sanitizeId(node.id);\r\n      const label = includeLabels ? (node.action || node.id) : nodeId;\r\n      const shape = node.type === 'terminal' ? 'doublecircle' : 'circle';\r\n\r\n      dot += `  ${nodeId} [label=\"${label}\", shape=${shape}];\\n`;\r\n    }\r\n\r\n    dot += '\\n';\r\n\r\n    for (const node of thought.gameTree.nodes) {\r\n      if (node.childNodes && node.childNodes.length > 0) {\r\n        for (const childId of node.childNodes) {\r\n          const fromId = sanitizeId(node.id);\r\n          const toId = sanitizeId(childId);\r\n          const childNode = thought.gameTree.nodes.find(n => n.id === childId);\r\n\r\n          if (includeMetrics && childNode?.action) {\r\n            dot += `  ${fromId} -> ${toId} [label=\"${childNode.action}\"];\\n`;\r\n          } else {\r\n            dot += `  ${fromId} -> ${toId};\\n`;\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction gameTreeToASCII(thought: GameTheoryThought): string {\r\n  let ascii = `Game: ${thought.game?.name || 'Untitled'}\\n`;\r\n  ascii += '='.repeat(40) + '\\n\\n';\r\n\r\n  if (thought.strategies && thought.strategies.length > 0) {\r\n    ascii += 'Strategies:\\n';\r\n    for (const strategy of thought.strategies) {\r\n      const strategyType = strategy.isPure ? 'Pure' : 'Mixed';\r\n      ascii += `   ${strategy.name} (${strategyType})\\n`;\r\n    }\r\n  }\r\n\r\n  if (thought.nashEquilibria && thought.nashEquilibria.length > 0) {\r\n    ascii += '\\nEquilibria:\\n';\r\n    for (const eq of thought.nashEquilibria) {\r\n      ascii += `   ${eq.type}: ${eq.strategyProfile.join(', ')}\\n`;\r\n      ascii += `    Payoffs: [${eq.payoffs.join(', ')}]\\n`;\r\n    }\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export game tree to native SVG format\r\n */\r\nfunction gameTreeToSVG(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = 500,\r\n  } = options;\r\n\r\n  const title = thought.game?.name || 'Game Tree';\r\n\r\n  if (!thought.game) {\r\n    return generateSVGHeader(svgWidth, 200, title) +\r\n      '\\n  <text x=\"400\" y=\"100\" text-anchor=\"middle\" class=\"subtitle\">No game defined</text>\\n' +\r\n      generateSVGFooter();\r\n  }\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 120;\r\n  const nodeHeight = 40;\r\n\r\n  if (thought.gameTree && thought.gameTree.nodes) {\r\n    // Calculate depth of each node based on parent-child relationships\r\n    const nodeDepths = new Map<string, number>();\r\n    const rootNodes = thought.gameTree.nodes.filter(n => !n.parentNode);\r\n\r\n    // BFS to calculate depths\r\n    const queue: Array<{ nodeId: string; depth: number }> = rootNodes.map(n => ({ nodeId: n.id, depth: 0 }));\r\n    while (queue.length > 0) {\r\n      const { nodeId, depth } = queue.shift()!;\r\n      nodeDepths.set(nodeId, depth);\r\n      const node = thought.gameTree.nodes.find(n => n.id === nodeId);\r\n      if (node) {\r\n        for (const childId of node.childNodes) {\r\n          queue.push({ nodeId: childId, depth: depth + 1 });\r\n        }\r\n      }\r\n    }\r\n\r\n    // Build tree layout - group by depth\r\n    const nodesByDepth = new Map<number, typeof thought.gameTree.nodes>();\r\n    for (const node of thought.gameTree.nodes) {\r\n      const depth = nodeDepths.get(node.id) || 0;\r\n      if (!nodesByDepth.has(depth)) {\r\n        nodesByDepth.set(depth, []);\r\n      }\r\n      nodesByDepth.get(depth)!.push(node);\r\n    }\r\n\r\n    const depths = Array.from(nodesByDepth.keys()).sort((a, b) => a - b);\r\n    const verticalSpacing = 100;\r\n    let currentY = 60;\r\n\r\n    for (const depth of depths) {\r\n      const nodesAtDepth = nodesByDepth.get(depth)!;\r\n      const layerWidth = nodesAtDepth.length * (nodeWidth + 20) - 20;\r\n      let startX = (svgWidth - layerWidth) / 2;\r\n\r\n      for (const node of nodesAtDepth) {\r\n        const label = includeLabels ? (node.action || node.id) : sanitizeId(node.id);\r\n        positions.set(node.id, {\r\n          id: node.id,\r\n          x: startX,\r\n          y: currentY,\r\n          width: nodeWidth,\r\n          height: nodeHeight,\r\n          label,\r\n          type: node.type,\r\n        });\r\n        startX += nodeWidth + 20;\r\n      }\r\n      currentY += verticalSpacing;\r\n    }\r\n  } else if (thought.strategies) {\r\n    // Simple strategy list\r\n    positions.set('root', {\r\n      id: 'root',\r\n      x: svgWidth / 2 - nodeWidth / 2,\r\n      y: 60,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      label: 'Game',\r\n      type: 'root',\r\n    });\r\n\r\n    const stratCount = Math.min(thought.strategies.length, 5);\r\n    const layerWidth = stratCount * (nodeWidth + 20) - 20;\r\n    let startX = (svgWidth - layerWidth) / 2;\r\n\r\n    for (let i = 0; i < stratCount; i++) {\r\n      const strategy = thought.strategies[i];\r\n      positions.set(strategy.id, {\r\n        id: strategy.id,\r\n        x: startX,\r\n        y: 180,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        label: strategy.name,\r\n        type: 'strategy',\r\n      });\r\n      startX += nodeWidth + 20;\r\n    }\r\n  }\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, title);\r\n\r\n  // Render edges\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  if (thought.gameTree && thought.gameTree.nodes) {\r\n    for (const node of thought.gameTree.nodes) {\r\n      if (node.childNodes) {\r\n        for (const childId of node.childNodes) {\r\n          const fromPos = positions.get(node.id);\r\n          const toPos = positions.get(childId);\r\n          if (fromPos && toPos) {\r\n            svg += renderEdge(fromPos, toPos, {});\r\n          }\r\n        }\r\n      }\r\n    }\r\n  } else if (thought.strategies) {\r\n    const rootPos = positions.get('root');\r\n    if (rootPos) {\r\n      for (const strategy of thought.strategies.slice(0, 5)) {\r\n        const stratPos = positions.get(strategy.id);\r\n        if (stratPos) {\r\n          svg += renderEdge(rootPos, stratPos, {});\r\n        }\r\n      }\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n  for (const [, pos] of positions) {\r\n    const colors = pos.type === 'terminal'\r\n      ? getNodeColor('success', colorScheme)\r\n      : pos.type === 'root'\r\n        ? getNodeColor('primary', colorScheme)\r\n        : getNodeColor('neutral', colorScheme);\r\n\r\n    if (pos.type === 'terminal') {\r\n      svg += renderEllipseNode(pos, colors);\r\n    } else {\r\n      svg += renderRectNode(pos, colors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics\r\n  if (includeMetrics && thought.nashEquilibria) {\r\n    const metrics = [\r\n      { label: 'Equilibria', value: thought.nashEquilibria.length },\r\n      { label: 'Strategies', value: thought.strategies?.length || 0 },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 80, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Decision', color: getNodeColor('neutral', colorScheme) },\r\n    { label: 'Terminal', color: getNodeColor('success', colorScheme), shape: 'ellipse' as const },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 60, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export game tree to GraphML format\r\n */\r\nfunction gameTreeToGraphML(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  if (!thought.game) {\r\n    // Empty case: no game defined\r\n    const nodes: GraphMLNode[] = [{ id: 'root', label: 'No game defined', type: 'root' }];\r\n    return generateGraphML(nodes, [], { graphName: 'Empty Game Tree' });\r\n  }\r\n\r\n  if (thought.gameTree && thought.gameTree.nodes && thought.gameTree.nodes.length > 0) {\r\n    // Build GraphMLNode[] from gameTree.nodes\r\n    const nodes: GraphMLNode[] = thought.gameTree.nodes.map(node => ({\r\n      id: sanitizeId(node.id),\r\n      label: includeLabels ? (node.action || node.id) : node.id,\r\n      type: node.type || 'node',\r\n      metadata: {\r\n        action: node.action,\r\n        player: node.playerId,\r\n      },\r\n    }));\r\n\r\n    // Build edges from parent-child relationships\r\n    const edges: GraphMLEdge[] = [];\r\n    let edgeCount = 0;\r\n    for (const node of thought.gameTree.nodes) {\r\n      if (node.childNodes && node.childNodes.length > 0) {\r\n        for (const childId of node.childNodes) {\r\n          const childNode = thought.gameTree.nodes.find(n => n.id === childId);\r\n          edges.push({\r\n            id: `e${edgeCount++}`,\r\n            source: sanitizeId(node.id),\r\n            target: sanitizeId(childId),\r\n            label: includeLabels && childNode?.action ? childNode.action : undefined,\r\n            directed: true,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return generateGraphML(nodes, edges, { graphName: thought.game?.name || 'Game Tree' });\r\n  } else if (thought.strategies && thought.strategies.length > 0) {\r\n    // Create a simple tree with root \"Game\" and strategy nodes as children\r\n    const root = {\r\n      id: 'root',\r\n      label: 'Game',\r\n      children: thought.strategies.slice(0, 5).map(strategy => ({\r\n        id: sanitizeId(strategy.id),\r\n        label: strategy.name,\r\n      })),\r\n    };\r\n\r\n    return createTreeGraphML(root, { graphName: thought.game?.name || 'Game Tree' });\r\n  }\r\n\r\n  // Empty case: no tree or strategies\r\n  const nodes: GraphMLNode[] = [{ id: 'root', label: 'No game tree', type: 'root' }];\r\n  return generateGraphML(nodes, [], { graphName: thought.game?.name || 'Game Tree' });\r\n}\r\n\r\n/**\r\n * Export game tree to TikZ format\r\n */\r\nfunction gameTreeToTikZ(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, colorScheme = 'default' } = options;\r\n\r\n  if (!thought.game) {\r\n    // Empty case: no game defined\r\n    const nodes: TikZNode[] = [{ id: 'root', label: 'No game defined', x: 4, y: 0, type: 'root', shape: 'rectangle' }];\r\n    return generateTikZ(nodes, [], { title: 'Empty Game Tree', colorScheme });\r\n  }\r\n\r\n  if (thought.gameTree && thought.gameTree.nodes && thought.gameTree.nodes.length > 0) {\r\n    // Calculate depth of each node based on parent-child relationships\r\n    const nodeDepths = new Map<string, number>();\r\n    const rootNodes = thought.gameTree.nodes.filter(n => !n.parentNode);\r\n\r\n    // BFS to calculate depths\r\n    const queue: Array<{ nodeId: string; depth: number }> = rootNodes.map(n => ({ nodeId: n.id, depth: 0 }));\r\n    while (queue.length > 0) {\r\n      const { nodeId, depth } = queue.shift()!;\r\n      nodeDepths.set(nodeId, depth);\r\n      const node = thought.gameTree.nodes.find(n => n.id === nodeId);\r\n      if (node && node.childNodes) {\r\n        for (const childId of node.childNodes) {\r\n          queue.push({ nodeId: childId, depth: depth + 1 });\r\n        }\r\n      }\r\n    }\r\n\r\n    // Group nodes by depth for layout\r\n    const nodesByDepth = new Map<number, typeof thought.gameTree.nodes>();\r\n    for (const node of thought.gameTree.nodes) {\r\n      const depth = nodeDepths.get(node.id) || 0;\r\n      if (!nodesByDepth.has(depth)) {\r\n        nodesByDepth.set(depth, []);\r\n      }\r\n      nodesByDepth.get(depth)!.push(node);\r\n    }\r\n\r\n    // Build TikZNode[] with positions based on tree depth\r\n    const nodes: TikZNode[] = [];\r\n    const depths = Array.from(nodesByDepth.keys()).sort((a, b) => a - b);\r\n\r\n    for (const depth of depths) {\r\n      const nodesAtDepth = nodesByDepth.get(depth)!;\r\n      const layerWidth = nodesAtDepth.length * 3;\r\n      const startX = (8 - layerWidth) / 2 + 1.5;\r\n\r\n      for (let i = 0; i < nodesAtDepth.length; i++) {\r\n        const node = nodesAtDepth[i];\r\n        nodes.push({\r\n          id: sanitizeId(node.id),\r\n          label: includeLabels ? (node.action || node.id) : node.id,\r\n          x: startX + i * 3,\r\n          y: -depth * 2, // y decreases by 2 per level\r\n          type: node.type || 'neutral',\r\n          shape: node.type === 'terminal' ? 'ellipse' : 'rectangle', // Use 'ellipse' for terminal nodes\r\n        });\r\n      }\r\n    }\r\n\r\n    // Build TikZEdge[] from childNodes relationships\r\n    const edges: TikZEdge[] = [];\r\n    for (const node of thought.gameTree.nodes) {\r\n      if (node.childNodes && node.childNodes.length > 0) {\r\n        for (const childId of node.childNodes) {\r\n          const childNode = thought.gameTree.nodes.find(n => n.id === childId);\r\n          edges.push({\r\n            source: sanitizeId(node.id),\r\n            target: sanitizeId(childId),\r\n            label: includeLabels && childNode?.action ? childNode.action : undefined,\r\n            directed: true,\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    return generateTikZ(nodes, edges, { title: thought.game?.name || 'Game Tree', colorScheme });\r\n  } else if (thought.strategies && thought.strategies.length > 0) {\r\n    // Create a simple tree with root \"Game\" and strategy nodes as children\r\n    const root = {\r\n      id: 'root',\r\n      label: 'Game',\r\n      children: thought.strategies.slice(0, 5).map(strategy => ({\r\n        id: sanitizeId(strategy.id),\r\n        label: strategy.name,\r\n      })),\r\n    };\r\n\r\n    return createTreeTikZ(root, { title: thought.game?.name || 'Game Tree', colorScheme });\r\n  }\r\n\r\n  // Empty case: no tree or strategies\r\n  const nodes: TikZNode[] = [{ id: 'root', label: 'No game tree', x: 4, y: 0, type: 'root', shape: 'rectangle' }];\r\n  return generateTikZ(nodes, [], { title: thought.game?.name || 'Game Tree', colorScheme });\r\n}\r\n\r\n/**\r\n * Export game tree to HTML format\r\n */\r\nfunction gameTreeToHTML(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = thought.game?.name || 'Game Theory Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  if (!thought.game) {\r\n    html += '<p class=\"text-secondary\">No game defined.</p>\\n';\r\n    html += generateHTMLFooter(htmlStandalone);\r\n    return html;\r\n  }\r\n\r\n  // Game info\r\n  html += renderSection('Game Information', `\r\n    <p><strong>Type:</strong> ${escapeHTML(thought.game.type)}</p>\r\n    <p><strong>Players:</strong> ${thought.players ? thought.players.map((p: any) => escapeHTML(p.name)).join(', ') : thought.game.numPlayers}</p>\r\n    ${thought.game.description ? `<p>${escapeHTML(thought.game.description)}</p>` : ''}\r\n  `, '');\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Players', thought.players ? thought.players.length : thought.game.numPlayers, 'primary');\r\n    html += renderMetricCard('Strategies', thought.strategies?.length || 0, 'info');\r\n    html += renderMetricCard('Equilibria', thought.nashEquilibria?.length || 0, 'success');\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Strategies table\r\n  if (thought.strategies && thought.strategies.length > 0) {\r\n    const strategyRows = thought.strategies.map(strategy => {\r\n      const typeBadge = renderBadge(strategy.isPure ? 'Pure' : 'Mixed', strategy.isPure ? 'success' : 'info');\r\n      return [\r\n        strategy.name,\r\n        typeBadge,\r\n        strategy.description || '-',\r\n      ];\r\n    });\r\n    html += renderSection('Strategies', renderTable(\r\n      ['Name', 'Type', 'Description'],\r\n      strategyRows.map(row => row.map(cell => typeof cell === 'string' && cell.startsWith('<') ? cell : escapeHTML(String(cell))))\r\n    ), '');\r\n  }\r\n\r\n  // Nash Equilibria\r\n  if (thought.nashEquilibria && thought.nashEquilibria.length > 0) {\r\n    const eqRows = thought.nashEquilibria.map(eq => {\r\n      const typeBadge = renderBadge(eq.type, eq.type === 'pure' ? 'success' : 'info');\r\n      return [\r\n        typeBadge,\r\n        eq.strategyProfile.join(', '),\r\n        `[${eq.payoffs.join(', ')}]`,\r\n        eq.isStrict ? 'Yes' : 'No',\r\n      ];\r\n    });\r\n    html += renderSection('Nash Equilibria', renderTable(\r\n      ['Type', 'Strategy Profile', 'Payoffs', 'Strict'],\r\n      eqRows.map(row => row.map(cell => typeof cell === 'string' && cell.startsWith('<') ? cell : escapeHTML(String(cell))))\r\n    ), '');\r\n  }\r\n\r\n  // Payoff Matrix (if available)\r\n  if (thought.payoffMatrix) {\r\n    html += renderSection('Payoff Matrix', `\r\n      <p class=\"text-secondary\">Payoff matrix visualization available in other formats.</p>\r\n    `, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export game theory to Modelica format\r\n */\r\nfunction gameTheoryToModelica(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n  const gameName = sanitizeModelicaId(thought.game?.name || 'Game');\r\n\r\n  let modelica = `package ${gameName}\\n`;\r\n  modelica += `  \"Game Theory Analysis: ${escapeModelicaString(thought.game?.name || 'Untitled')}\"\\n\\n`;\r\n\r\n  // Player record type\r\n  if (thought.players && thought.players.length > 0) {\r\n    modelica += '  record Player\\n';\r\n    modelica += '    \"Player in the game\"\\n';\r\n    modelica += '    String id \"Player identifier\";\\n';\r\n    modelica += '    String name \"Player name\";\\n';\r\n    modelica += '  end Player;\\n\\n';\r\n\r\n    // Player instances\r\n    for (const player of thought.players) {\r\n      const playerId = sanitizeModelicaId(player.id || player.name);\r\n      modelica += `  constant Player ${playerId} = Player(\\n`;\r\n      modelica += `    id=\"${escapeModelicaString(player.id || player.name)}\",\\n`;\r\n      modelica += `    name=\"${escapeModelicaString(player.name)}\"\\n`;\r\n      modelica += '  );\\n';\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Strategy enumeration\r\n  if (thought.strategies && thought.strategies.length > 0) {\r\n    modelica += '  type StrategyType = enumeration(\\n';\r\n    const strategyNames = thought.strategies.map(s => sanitizeModelicaId(s.name));\r\n    modelica += strategyNames.map(name => `    ${name}`).join(',\\n');\r\n    modelica += '\\n  ) \"Available strategies\";\\n\\n';\r\n\r\n    // Strategy records\r\n    modelica += '  record Strategy\\n';\r\n    modelica += '    \"Strategy definition\"\\n';\r\n    modelica += '    String id \"Strategy identifier\";\\n';\r\n    modelica += '    String name \"Strategy name\";\\n';\r\n    modelica += '    Boolean isPure \"Whether strategy is pure or mixed\";\\n';\r\n    modelica += '  end Strategy;\\n\\n';\r\n\r\n    for (const strategy of thought.strategies) {\r\n      const stratId = sanitizeModelicaId(strategy.id);\r\n      modelica += `  constant Strategy ${stratId} = Strategy(\\n`;\r\n      modelica += `    id=\"${escapeModelicaString(strategy.id)}\",\\n`;\r\n      modelica += `    name=\"${escapeModelicaString(strategy.name)}\",\\n`;\r\n      modelica += `    isPure=${strategy.isPure ? 'true' : 'false'}\\n`;\r\n      modelica += '  );\\n';\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Nash Equilibria\r\n  if (thought.nashEquilibria && thought.nashEquilibria.length > 0) {\r\n    modelica += '  record NashEquilibrium\\n';\r\n    modelica += '    \"Nash equilibrium definition\"\\n';\r\n    modelica += '    String equilibriumType \"Type: pure or mixed\";\\n';\r\n    modelica += '    String strategyProfile[:] \"Strategy profile\";\\n';\r\n    modelica += '    Real payoffs[:] \"Payoffs for each player\";\\n';\r\n    modelica += '    Boolean isStrict \"Whether equilibrium is strict\";\\n';\r\n    modelica += '  end NashEquilibrium;\\n\\n';\r\n\r\n    for (let i = 0; i < thought.nashEquilibria.length; i++) {\r\n      const eq = thought.nashEquilibria[i];\r\n      modelica += `  constant NashEquilibrium equilibrium${i + 1} = NashEquilibrium(\\n`;\r\n      modelica += `    equilibriumType=\"${escapeModelicaString(eq.type)}\",\\n`;\r\n      modelica += `    strategyProfile={${eq.strategyProfile.map(s => `\"${escapeModelicaString(s)}\"`).join(', ')}},\\n`;\r\n      modelica += `    payoffs={${eq.payoffs.join(', ')}},\\n`;\r\n      modelica += `    isStrict=${eq.isStrict ? 'true' : 'false'}\\n`;\r\n      modelica += '  );\\n';\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Game metadata\r\n  if (includeMetrics) {\r\n    modelica += '  // Game Metrics\\n';\r\n    modelica += `  constant Integer numPlayers = ${thought.players?.length || thought.game?.numPlayers || 0};\\n`;\r\n    modelica += `  constant Integer numStrategies = ${thought.strategies?.length || 0};\\n`;\r\n    modelica += `  constant Integer numEquilibria = ${thought.nashEquilibria?.length || 0};\\n`;\r\n    modelica += `  constant String gameType = \"${escapeModelicaString(thought.game?.type || 'unknown')}\";\\n`;\r\n  }\r\n\r\n  modelica += `end ${gameName};\\n`;\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export game theory to UML format\r\n */\r\nfunction gameTheoryToUML(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  if (!thought.game) {\r\n    nodes.push({\r\n      id: 'nogame',\r\n      label: 'No Game Defined',\r\n      shape: 'class',\r\n      stereotype: 'error',\r\n    });\r\n    return generateUmlDiagram(nodes, edges, { title: 'Game Theory Analysis' });\r\n  }\r\n\r\n  // Game class (central node)\r\n  const gameNode: UmlNode = {\r\n    id: 'game',\r\n    label: thought.game.name || 'Game',\r\n    shape: 'class',\r\n    attributes: [\r\n      `type: ${thought.game.type}`,\r\n      `players: ${thought.players?.length || thought.game.numPlayers}`,\r\n    ],\r\n  };\r\n  nodes.push(gameNode);\r\n\r\n  // Player classes\r\n  if (thought.players && thought.players.length > 0) {\r\n    for (const player of thought.players) {\r\n      const playerId = sanitizeId(player.id || player.name);\r\n      nodes.push({\r\n        id: playerId,\r\n        label: player.name,\r\n        shape: 'class',\r\n        stereotype: 'player',\r\n        attributes: [`id: ${player.id || player.name}`],\r\n      });\r\n      edges.push({\r\n        source: 'game',\r\n        target: playerId,\r\n        type: 'association',\r\n        label: includeLabels ? 'has player' : undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Strategy classes\r\n  if (thought.strategies && thought.strategies.length > 0) {\r\n    for (const strategy of thought.strategies.slice(0, 10)) {\r\n      const stratId = sanitizeId(strategy.id);\r\n      nodes.push({\r\n        id: stratId,\r\n        label: strategy.name,\r\n        shape: 'class',\r\n        stereotype: strategy.isPure ? 'pure strategy' : 'mixed strategy',\r\n        attributes: [\r\n          `id: ${strategy.id}`,\r\n          ...(strategy.description ? [`description: ${strategy.description}`] : []),\r\n        ],\r\n      });\r\n      edges.push({\r\n        source: 'game',\r\n        target: stratId,\r\n        type: 'association',\r\n        label: includeLabels ? 'uses' : undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Nash Equilibria as separate nodes\r\n  if (thought.nashEquilibria && thought.nashEquilibria.length > 0) {\r\n    for (let i = 0; i < thought.nashEquilibria.length; i++) {\r\n      const eq = thought.nashEquilibria[i];\r\n      const eqId = `equilibrium_${i}`;\r\n      nodes.push({\r\n        id: eqId,\r\n        label: `Nash Equilibrium ${i + 1}`,\r\n        shape: 'class',\r\n        stereotype: eq.type,\r\n        attributes: [\r\n          `profile: [${eq.strategyProfile.join(', ')}]`,\r\n          `payoffs: [${eq.payoffs.join(', ')}]`,\r\n          `strict: ${eq.isStrict}`,\r\n        ],\r\n      });\r\n      edges.push({\r\n        source: 'game',\r\n        target: eqId,\r\n        type: 'dependency',\r\n        label: includeLabels ? 'achieves' : undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: thought.game.name || 'Game Theory Analysis',\r\n    direction: 'top to bottom',\r\n  });\r\n}\r\n\r\n/**\r\n * Export game theory to JSON format\r\n */\r\nfunction gameTheoryToJSON(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true, includeLabels = true } = options;\r\n\r\n  const graph = createJsonGraph(\r\n    thought.game?.name || 'Game Theory Analysis',\r\n    'game-theory'\r\n  );\r\n\r\n  if (!thought.game) {\r\n    addNode(graph, {\r\n      id: 'nogame',\r\n      label: 'No Game Defined',\r\n      type: 'error',\r\n    });\r\n    return serializeGraph(graph);\r\n  }\r\n\r\n  // Add game node\r\n  addNode(graph, {\r\n    id: 'game',\r\n    label: thought.game.name || 'Game',\r\n    type: 'game',\r\n    metadata: {\r\n      gameType: thought.game.type,\r\n      numPlayers: thought.players?.length || thought.game.numPlayers,\r\n      description: thought.game.description,\r\n    },\r\n  });\r\n\r\n  // Add player nodes\r\n  let edgeId = 0;\r\n  if (thought.players && thought.players.length > 0) {\r\n    for (const player of thought.players) {\r\n      const playerId = sanitizeId(player.id || player.name);\r\n      addNode(graph, {\r\n        id: playerId,\r\n        label: player.name,\r\n        type: 'player',\r\n        metadata: {\r\n          originalId: player.id,\r\n        },\r\n      });\r\n      addEdge(graph, {\r\n        id: `edge_${edgeId++}`,\r\n        source: 'game',\r\n        target: playerId,\r\n        label: includeLabels ? 'has player' : undefined,\r\n        type: 'participates',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add strategy nodes\r\n  if (thought.strategies && thought.strategies.length > 0) {\r\n    for (const strategy of thought.strategies) {\r\n      const stratId = sanitizeId(strategy.id);\r\n      addNode(graph, {\r\n        id: stratId,\r\n        label: strategy.name,\r\n        type: strategy.isPure ? 'pure-strategy' : 'mixed-strategy',\r\n        metadata: {\r\n          originalId: strategy.id,\r\n          description: strategy.description,\r\n          isPure: strategy.isPure,\r\n        },\r\n      });\r\n      addEdge(graph, {\r\n        id: `edge_${edgeId++}`,\r\n        source: 'game',\r\n        target: stratId,\r\n        label: includeLabels ? 'uses strategy' : undefined,\r\n        type: 'strategy',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add Nash equilibria nodes\r\n  if (thought.nashEquilibria && thought.nashEquilibria.length > 0) {\r\n    for (let i = 0; i < thought.nashEquilibria.length; i++) {\r\n      const eq = thought.nashEquilibria[i];\r\n      const eqId = `equilibrium_${i}`;\r\n      addNode(graph, {\r\n        id: eqId,\r\n        label: `Nash Equilibrium ${i + 1}`,\r\n        type: 'equilibrium',\r\n        metadata: {\r\n          equilibriumType: eq.type,\r\n          strategyProfile: eq.strategyProfile,\r\n          payoffs: eq.payoffs,\r\n          isStrict: eq.isStrict,\r\n        },\r\n      });\r\n      addEdge(graph, {\r\n        id: `edge_${edgeId++}`,\r\n        source: 'game',\r\n        target: eqId,\r\n        label: includeLabels ? 'achieves' : undefined,\r\n        type: 'outcome',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'Players', thought.players?.length || thought.game?.numPlayers || 0);\r\n    addMetric(graph, 'Strategies', thought.strategies?.length || 0);\r\n    addMetric(graph, 'Nash Equilibria', thought.nashEquilibria?.length || 0);\r\n  }\r\n\r\n  // Add legend\r\n  addLegendItem(graph, 'Game', '#4A90E2');\r\n  addLegendItem(graph, 'Player', '#50C878');\r\n  addLegendItem(graph, 'Pure Strategy', '#FFD700');\r\n  addLegendItem(graph, 'Mixed Strategy', '#FFA500');\r\n  addLegendItem(graph, 'Nash Equilibrium', '#9370DB');\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export game theory to Markdown format\r\n */\r\nfunction gameTheoryToMarkdown(thought: GameTheoryThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  if (!thought.game) {\r\n    parts.push(section('Status', 'No game defined.'));\r\n    return mdDocument('Game Theory Analysis', parts.join('\\n'), {\r\n      includeFrontmatter: markdownIncludeFrontmatter,\r\n      includeTableOfContents: markdownIncludeToc,\r\n    });\r\n  }\r\n\r\n  // Game information\r\n  const gameInfo = keyValueSection({\r\n    'Game Name': thought.game.name || 'Untitled',\r\n    'Type': thought.game.type,\r\n    'Players': thought.players ? thought.players.map(p => p.name).join(', ') : String(thought.game.numPlayers),\r\n    ...(thought.game.description ? { 'Description': thought.game.description } : {}),\r\n  });\r\n  parts.push(section('Game Information', gameInfo));\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Players': thought.players?.length || thought.game.numPlayers,\r\n      'Strategies': thought.strategies?.length || 0,\r\n      'Nash Equilibria': thought.nashEquilibria?.length || 0,\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Strategies table\r\n  if (thought.strategies && thought.strategies.length > 0) {\r\n    const strategyRows = thought.strategies.map(strategy => [\r\n      strategy.name,\r\n      strategy.isPure ? 'Pure' : 'Mixed',\r\n      strategy.description || '-',\r\n    ]);\r\n    parts.push(section('Strategies', table(['Name', 'Type', 'Description'], strategyRows)));\r\n  }\r\n\r\n  // Nash Equilibria\r\n  if (thought.nashEquilibria && thought.nashEquilibria.length > 0) {\r\n    const eqRows = thought.nashEquilibria.map(eq => [\r\n      eq.type,\r\n      eq.strategyProfile.join(', '),\r\n      `[${eq.payoffs.join(', ')}]`,\r\n      eq.isStrict ? 'Yes' : 'No',\r\n    ]);\r\n    parts.push(section('Nash Equilibria', table(['Type', 'Strategy Profile', 'Payoffs', 'Strict'], eqRows)));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = gameTreeToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Game Tree Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument(`Game Theory Analysis: ${thought.game.name || 'Untitled'}`, parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'game-theory',\r\n      gameType: thought.game.type,\r\n      playerCount: thought.players?.length || thought.game.numPlayers,\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Optimization Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Optimization constraint graph export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { OptimizationThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export optimization problem constraint graph to visual format\r\n */\r\nexport function exportOptimizationSolution(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return optimizationToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return optimizationToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return optimizationToASCII(thought);\r\n    case 'svg':\r\n      return optimizationToSVG(thought, options);\r\n    case 'graphml':\r\n      return optimizationToGraphML(thought, options);\r\n    case 'tikz':\r\n      return optimizationToTikZ(thought, options);\r\n    case 'html':\r\n      return optimizationToHTML(thought, options);\r\n    case 'modelica':\r\n      return optimizationToModelica(thought, options);\r\n    case 'uml':\r\n      return optimizationToUML(thought, options);\r\n    case 'json':\r\n      return optimizationToJSON(thought, options);\r\n    case 'markdown':\r\n      return optimizationToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction optimizationToMermaid(\r\n  thought: OptimizationThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  if (thought.problem) {\r\n    const problemLabel = includeLabels\r\n      ? `Problem: ${thought.problem.name}`\r\n      : 'Problem';\r\n    mermaid += `  Problem[\"${problemLabel}\"]\\n\\n`;\r\n  }\r\n\r\n  if (thought.variables && thought.variables.length > 0) {\r\n    mermaid += '  subgraph Variables[\"Decision Variables\"]\\n';\r\n    for (const variable of thought.variables) {\r\n      const varId = sanitizeId(variable.id);\r\n      const label = includeLabels ? variable.name : varId;\r\n      const domainLabel = includeMetrics && variable.domain\r\n        ? ` [${(variable.domain as any).lowerBound},${(variable.domain as any).upperBound}]`\r\n        : '';\r\n      mermaid += `    ${varId}[\"${label}${domainLabel}\"]\\n`;\r\n    }\r\n    mermaid += '  end\\n\\n';\r\n  }\r\n\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    mermaid += '  subgraph Constraints[\"Constraints\"]\\n';\r\n    for (const constraint of thought.optimizationConstraints) {\r\n      const constId = sanitizeId(constraint.id);\r\n      const label = includeLabels ? constraint.name : constId;\r\n      mermaid += `    ${constId}[\"${label}\"]\\n`;\r\n    }\r\n    mermaid += '  end\\n\\n';\r\n  }\r\n\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    for (const objective of thought.objectives) {\r\n      const objId = sanitizeId(objective.id);\r\n      const label = includeLabels\r\n        ? `${objective.type}: ${objective.name}`\r\n        : objId;\r\n      mermaid += `  ${objId}[\"${label}\"]\\n`;\r\n    }\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  if (thought.solution) {\r\n    const qualityLabel = includeMetrics && thought.solution.quality\r\n      ? ` (quality: ${thought.solution.quality.toFixed(2)})`\r\n      : '';\r\n    mermaid += `  Solution[\"Solution${qualityLabel}\"]\\n`;\r\n    if (thought.objectives) {\r\n      for (const objective of thought.objectives) {\r\n        const objId = sanitizeId(objective.id);\r\n        mermaid += `  ${objId} --> Solution\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const solutionColor = colorScheme === 'pastel' ? '#e8f5e9' : '#a5d6a7';\r\n    if (thought.solution) {\r\n      mermaid += `  style Solution fill:${solutionColor}\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction optimizationToDOT(\r\n  thought: OptimizationThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph Optimization {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  if (thought.problem) {\r\n    const label = includeLabels ? thought.problem.name : 'Problem';\r\n    dot += `  Problem [label=\"Problem:\\\\n${label}\", shape=ellipse];\\n\\n`;\r\n  }\r\n\r\n  if (thought.variables && thought.variables.length > 0) {\r\n    dot += '  subgraph cluster_variables {\\n';\r\n    dot += '    label=\"Decision Variables\";\\n';\r\n    for (const variable of thought.variables) {\r\n      const varId = sanitizeId(variable.id);\r\n      const label = includeLabels ? variable.name : varId;\r\n      const domainLabel = includeMetrics && variable.domain\r\n        ? `\\\\n[${(variable.domain as any).lowerBound}, ${(variable.domain as any).upperBound}]`\r\n        : '';\r\n      dot += `    ${varId} [label=\"${label}${domainLabel}\"];\\n`;\r\n    }\r\n    dot += '  }\\n\\n';\r\n  }\r\n\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    dot += '  subgraph cluster_constraints {\\n';\r\n    dot += '    label=\"Constraints\";\\n';\r\n    for (const constraint of thought.optimizationConstraints) {\r\n      const constId = sanitizeId(constraint.id);\r\n      const label = includeLabels ? constraint.name : constId;\r\n      dot += `    ${constId} [label=\"${label}\", shape=diamond];\\n`;\r\n    }\r\n    dot += '  }\\n\\n';\r\n  }\r\n\r\n  if (thought.objectives) {\r\n    for (const objective of thought.objectives) {\r\n      const objId = sanitizeId(objective.id);\r\n      const label = includeLabels ? `${objective.type}:\\\\n${objective.name}` : objId;\r\n      dot += `  ${objId} [label=\"${label}\"];\\n`;\r\n    }\r\n  }\r\n\r\n  if (thought.solution) {\r\n    const qualityLabel = includeMetrics && thought.solution.quality\r\n      ? `\\\\nquality: ${thought.solution.quality.toFixed(2)}`\r\n      : '';\r\n    dot += `  Solution [label=\"Solution${qualityLabel}\", shape=doubleoctagon, style=filled, fillcolor=lightgreen];\\n`;\r\n    if (thought.objectives) {\r\n      for (const objective of thought.objectives) {\r\n        const objId = sanitizeId(objective.id);\r\n        dot += `  ${objId} -> Solution;\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction optimizationToASCII(thought: OptimizationThought): string {\r\n  let ascii = 'Optimization Problem:\\n';\r\n  ascii += '====================\\n\\n';\r\n\r\n  if (thought.problem) {\r\n    ascii += `Problem: ${thought.problem.name}\\n`;\r\n    ascii += `Type: ${thought.problem.type}\\n`;\r\n    ascii += `${thought.problem.description}\\n\\n`;\r\n  }\r\n\r\n  if (thought.variables && thought.variables.length > 0) {\r\n    ascii += 'Decision Variables:\\n';\r\n    for (const variable of thought.variables) {\r\n      const varType = (variable as any).type || 'unknown';\r\n      ascii += `  ${variable.name} (${varType})\\n`;\r\n      if (variable.domain) {\r\n        ascii += `    Domain: [${(variable.domain as any).lowerBound}, ${(variable.domain as any).upperBound}]\\n`;\r\n      }\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    ascii += 'Constraints:\\n';\r\n    for (const constraint of thought.optimizationConstraints) {\r\n      ascii += `  ${constraint.name} (${constraint.type})\\n`;\r\n      ascii += `    ${constraint.formula}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    ascii += 'Objectives:\\n';\r\n    for (const objective of thought.objectives) {\r\n      ascii += `  ${objective.type.toUpperCase()}: ${objective.name}\\n`;\r\n      ascii += `    ${objective.formula}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.solution) {\r\n    ascii += 'Solution:\\n';\r\n    const solution = thought.solution as any;\r\n    if (solution.status) {\r\n      ascii += `  Status: ${solution.status}\\n`;\r\n    }\r\n    if (solution.optimalValue !== undefined) {\r\n      ascii += `  Optimal Value: ${solution.optimalValue}\\n`;\r\n    }\r\n    if (solution.quality !== undefined) {\r\n      ascii += `  Quality: ${solution.quality.toFixed(2)}\\n`;\r\n    }\r\n    if (solution.assignments) {\r\n      ascii += '  Assignments:\\n';\r\n      for (const [varId, value] of Object.entries(solution.assignments)) {\r\n        ascii += `    ${varId} = ${value}\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export optimization problem constraint graph to native SVG format\r\n */\r\nfunction optimizationToSVG(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = DEFAULT_SVG_OPTIONS.height,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n\r\n  // Problem at the top\r\n  if (thought.problem) {\r\n    positions.set('Problem', {\r\n      id: 'Problem',\r\n      label: includeLabels ? thought.problem.name : 'Problem',\r\n      x: svgWidth / 2,\r\n      y: 80,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'problem',\r\n    });\r\n  }\r\n\r\n  // Variables on the left\r\n  if (thought.variables) {\r\n    thought.variables.forEach((variable, index) => {\r\n      positions.set(variable.id, {\r\n        id: variable.id,\r\n        label: includeLabels ? variable.name : variable.id,\r\n        x: 150,\r\n        y: 200 + index * 80,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        type: 'variable',\r\n      });\r\n    });\r\n  }\r\n\r\n  // Objectives on the right\r\n  if (thought.objectives) {\r\n    thought.objectives.forEach((objective, index) => {\r\n      positions.set(objective.id, {\r\n        id: objective.id,\r\n        label: includeLabels ? `${objective.type}: ${objective.name}` : objective.id,\r\n        x: svgWidth - 150,\r\n        y: 200 + index * 80,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        type: 'objective',\r\n      });\r\n    });\r\n  }\r\n\r\n  // Solution at the bottom\r\n  if (thought.solution) {\r\n    positions.set('Solution', {\r\n      id: 'Solution',\r\n      label: 'Solution',\r\n      x: svgWidth / 2,\r\n      y: svgHeight - 100,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'solution',\r\n    });\r\n  }\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Optimization Problem');\r\n\r\n  // Render edges\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n\r\n  // Edges from objectives to solution\r\n  if (thought.objectives && thought.solution) {\r\n    for (const objective of thought.objectives) {\r\n      const objPos = positions.get(objective.id);\r\n      const solPos = positions.get('Solution');\r\n      if (objPos && solPos) {\r\n        svg += renderEdge(objPos, solPos);\r\n      }\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  const problemColors = getNodeColor('warning', colorScheme);\r\n  const variableColors = getNodeColor('neutral', colorScheme);\r\n  const objectiveColors = getNodeColor('primary', colorScheme);\r\n  const solutionColors = getNodeColor('success', colorScheme);\r\n\r\n  for (const [, pos] of positions) {\r\n    if (pos.type === 'problem') {\r\n      svg += renderEllipseNode(pos, problemColors);\r\n    } else if (pos.type === 'variable') {\r\n      svg += renderRectNode(pos, variableColors);\r\n    } else if (pos.type === 'objective') {\r\n      svg += renderRectNode(pos, objectiveColors);\r\n    } else if (pos.type === 'solution') {\r\n      svg += renderStadiumNode(pos, solutionColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Variables', value: thought.variables?.length || 0 },\r\n      { label: 'Constraints', value: thought.optimizationConstraints?.length || 0 },\r\n      { label: 'Objectives', value: thought.objectives?.length || 0 },\r\n      { label: 'Quality', value: thought.solution?.quality?.toFixed(2) || 'N/A' },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 150, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Problem', color: problemColors, shape: 'ellipse' as const },\r\n    { label: 'Variable', color: variableColors },\r\n    { label: 'Objective', color: objectiveColors },\r\n    { label: 'Solution', color: solutionColors, shape: 'stadium' as const },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 140, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export optimization problem to GraphML format\r\n */\r\nfunction optimizationToGraphML(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeCount = 0;\r\n\r\n  // Add objective function nodes\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    for (const objective of thought.objectives) {\r\n      nodes.push({\r\n        id: sanitizeId(objective.id),\r\n        label: includeLabels ? `${objective.type}: ${objective.name}` : objective.id,\r\n        type: 'objective',\r\n        metadata: {\r\n          description: objective.formula,\r\n          objectiveType: objective.type,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add constraint nodes\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    for (const constraint of thought.optimizationConstraints) {\r\n      nodes.push({\r\n        id: sanitizeId(constraint.id),\r\n        label: includeLabels ? constraint.name : constraint.id,\r\n        type: 'constraint',\r\n        metadata: {\r\n          description: constraint.formula,\r\n          constraintType: constraint.type,\r\n        },\r\n      });\r\n\r\n      // Create edges from constraints to objectives\r\n      if (thought.objectives) {\r\n        for (const objective of thought.objectives) {\r\n          edges.push({\r\n            id: `e${edgeCount++}`,\r\n            source: sanitizeId(constraint.id),\r\n            target: sanitizeId(objective.id),\r\n            label: 'constrains',\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add solution/optimum node\r\n  if (thought.solution) {\r\n    nodes.push({\r\n      id: 'solution',\r\n      label: includeMetrics && thought.solution.quality\r\n        ? `Solution (quality: ${thought.solution.quality.toFixed(2)})`\r\n        : 'Solution',\r\n      type: 'solution',\r\n      metadata: {\r\n        status: (thought.solution as any).status,\r\n        optimalValue: (thought.solution as any).optimalValue,\r\n        quality: thought.solution.quality,\r\n      },\r\n    });\r\n\r\n    // Create edges from objectives to solution\r\n    if (thought.objectives) {\r\n      for (const objective of thought.objectives) {\r\n        edges.push({\r\n          id: `e${edgeCount++}`,\r\n          source: sanitizeId(objective.id),\r\n          target: 'solution',\r\n          label: 'optimizes',\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Optimization Solution',\r\n    includeLabels,\r\n    includeMetadata: includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export optimization problem to TikZ format\r\n */\r\nfunction optimizationToTikZ(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const { colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n  let yOffset = 0;\r\n\r\n  // Objective functions at the top\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    const startX = thought.objectives.length > 1 ? 0 : 4;\r\n    const spacing = thought.objectives.length > 1 ? 8 / thought.objectives.length : 0;\r\n\r\n    for (let i = 0; i < thought.objectives.length; i++) {\r\n      const objective = thought.objectives[i];\r\n      const x = thought.objectives.length === 1 ? startX : startX + i * spacing + spacing / 2;\r\n\r\n      nodes.push({\r\n        id: sanitizeId(objective.id),\r\n        label: includeLabels ? `${objective.type}: ${objective.name}` : objective.id,\r\n        x,\r\n        y: yOffset,\r\n        type: 'primary',\r\n        shape: 'rectangle',\r\n      });\r\n    }\r\n    yOffset -= 2;\r\n  }\r\n\r\n  // Constraints in the middle\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    const startX = thought.optimizationConstraints.length > 1 ? 0 : 4;\r\n    const spacing = thought.optimizationConstraints.length > 1 ? 8 / thought.optimizationConstraints.length : 0;\r\n\r\n    for (let i = 0; i < thought.optimizationConstraints.length; i++) {\r\n      const constraint = thought.optimizationConstraints[i];\r\n      const x = thought.optimizationConstraints.length === 1 ? startX : startX + i * spacing + spacing / 2;\r\n      const constraintId = sanitizeId(constraint.id);\r\n\r\n      nodes.push({\r\n        id: constraintId,\r\n        label: includeLabels ? constraint.name : constraint.id,\r\n        x,\r\n        y: yOffset,\r\n        type: 'warning',\r\n        shape: 'diamond',\r\n      });\r\n\r\n      // Create edges from constraints to objectives\r\n      if (thought.objectives) {\r\n        for (const objective of thought.objectives) {\r\n          edges.push({\r\n            source: constraintId,\r\n            target: sanitizeId(objective.id),\r\n            directed: true,\r\n          });\r\n        }\r\n      }\r\n    }\r\n    yOffset -= 2;\r\n  }\r\n\r\n  // Solution at the bottom\r\n  if (thought.solution) {\r\n    const solutionLabel = includeMetrics && thought.solution.quality\r\n      ? `Solution (${thought.solution.quality.toFixed(2)})`\r\n      : 'Solution';\r\n\r\n    nodes.push({\r\n      id: 'solution',\r\n      label: solutionLabel,\r\n      x: 4,\r\n      y: yOffset,\r\n      type: 'success',\r\n      shape: 'ellipse',\r\n    });\r\n\r\n    // Create edges from objectives to solution\r\n    if (thought.objectives) {\r\n      for (const objective of thought.objectives) {\r\n        edges.push({\r\n          source: sanitizeId(objective.id),\r\n          target: 'solution',\r\n          directed: true,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Optimization Solution',\r\n    colorScheme,\r\n    includeLabels,\r\n    includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export optimization problem to HTML format\r\n */\r\nfunction optimizationToHTML(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Optimization Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Problem Overview\r\n  if (thought.problem) {\r\n    const problemContent = `\r\n      <p><strong>Name:</strong> ${escapeHTML(thought.problem.name)}</p>\r\n      <p><strong>Type:</strong> ${renderBadge(thought.problem.type.toUpperCase(), 'info')}</p>\r\n      <p>${escapeHTML(thought.problem.description)}</p>\r\n    `;\r\n    html += renderSection('Problem', problemContent, '');\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">\\n';\r\n    html += renderMetricCard('Variables', thought.variables?.length || 0, 'primary');\r\n    html += renderMetricCard('Constraints', thought.optimizationConstraints?.length || 0, 'warning');\r\n    html += renderMetricCard('Objectives', thought.objectives?.length || 0, 'info');\r\n    html += renderMetricCard('Quality', thought.solution?.quality?.toFixed(2) || 'N/A', 'success');\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Decision Variables\r\n  if (thought.variables && thought.variables.length > 0) {\r\n    const variableRows = thought.variables.map(v => {\r\n      const varType = (v as any).type || 'unknown';\r\n      const domain = v.domain\r\n        ? `[${(v.domain as any).lowerBound}, ${(v.domain as any).upperBound}]`\r\n        : 'N/A';\r\n      return [v.name, varType, domain, v.description];\r\n    });\r\n    const variablesTable = renderTable(\r\n      ['Name', 'Type', 'Domain', 'Description'],\r\n      variableRows,\r\n      { caption: 'Decision Variables' }\r\n    );\r\n    html += renderSection('Decision Variables', variablesTable, '');\r\n  }\r\n\r\n  // Constraints\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    let constraintsContent = '';\r\n    for (const constraint of thought.optimizationConstraints) {\r\n      const badge = renderBadge(constraint.type.toUpperCase(), 'warning');\r\n      constraintsContent += `\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">${escapeHTML(constraint.name)} ${badge}</div>\r\n          <p><strong>Formula:</strong> <code>${escapeHTML(constraint.formula)}</code></p>\r\n        </div>\r\n      `;\r\n    }\r\n    html += renderSection('Constraints', constraintsContent, '');\r\n  }\r\n\r\n  // Objectives\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    let objectivesContent = '';\r\n    for (const objective of thought.objectives) {\r\n      const typeColor = objective.type === 'maximize' ? 'success' : 'info';\r\n      const badge = renderBadge(objective.type.toUpperCase(), typeColor as any);\r\n      objectivesContent += `\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">${badge} ${escapeHTML(objective.name)}</div>\r\n          <p><strong>Formula:</strong> <code>${escapeHTML(objective.formula)}</code></p>\r\n        </div>\r\n      `;\r\n    }\r\n    html += renderSection('Objectives', objectivesContent, '');\r\n  }\r\n\r\n  // Solution\r\n  if (thought.solution) {\r\n    const solution = thought.solution as any;\r\n    let solutionContent = '';\r\n\r\n    if (solution.status) {\r\n      const statusBadge = solution.status === 'optimal' ? renderBadge('OPTIMAL', 'success')\r\n        : solution.status === 'feasible' ? renderBadge('FEASIBLE', 'info')\r\n          : renderBadge('INFEASIBLE', 'danger');\r\n      solutionContent += `<p><strong>Status:</strong> ${statusBadge}</p>`;\r\n    }\r\n\r\n    if (solution.optimalValue !== undefined) {\r\n      solutionContent += `<p><strong>Optimal Value:</strong> ${solution.optimalValue}</p>`;\r\n    }\r\n\r\n    if (solution.quality !== undefined) {\r\n      solutionContent += `<p><strong>Quality:</strong> ${(solution.quality * 100).toFixed(0)}%</p>`;\r\n    }\r\n\r\n    if (solution.assignments) {\r\n      solutionContent += '<h4>Variable Assignments</h4><ul>';\r\n      for (const [varId, value] of Object.entries(solution.assignments)) {\r\n        solutionContent += `<li><strong>${escapeHTML(varId)}:</strong> ${value}</li>`;\r\n      }\r\n      solutionContent += '</ul>';\r\n    }\r\n\r\n    html += renderSection('Solution', solutionContent, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export optimization problem to Modelica format\r\n */\r\nfunction optimizationToModelica(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  let modelica = '// Optimization Problem Model\\n';\r\n\r\n  const packageName = thought.problem\r\n    ? sanitizeModelicaId(thought.problem.name)\r\n    : 'OptimizationProblem';\r\n\r\n  modelica += `package ${packageName}\\n`;\r\n\r\n  if (thought.problem) {\r\n    modelica += `  annotation(Documentation(info=\"${escapeModelicaString(thought.problem.description)}\"));\\n\\n`;\r\n  }\r\n\r\n  // Decision Variables\r\n  if (thought.variables && thought.variables.length > 0) {\r\n    modelica += '  // Decision Variables\\n';\r\n    for (const variable of thought.variables) {\r\n      const varId = sanitizeModelicaId(variable.id);\r\n      const varType = (variable as any).type || 'Real';\r\n      const domain = variable.domain\r\n        ? `(min=${(variable.domain as any).lowerBound}, max=${(variable.domain as any).upperBound})`\r\n        : '';\r\n      const comment = includeLabels && variable.description\r\n        ? ` \"${escapeModelicaString(variable.description)}\"`\r\n        : '';\r\n      modelica += `  ${varType} ${varId}${domain}${comment};\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Objectives as optimization parameters\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    modelica += '  // Objective Functions\\n';\r\n    for (const objective of thought.objectives) {\r\n      const objId = sanitizeModelicaId(objective.id);\r\n      const comment = includeLabels\r\n        ? ` \"${objective.type}: ${escapeModelicaString(objective.name)}\"`\r\n        : '';\r\n      modelica += `  Real ${objId}${comment};\\n`;\r\n      modelica += `  equation\\n`;\r\n      modelica += `    ${objId} = ${escapeModelicaString(objective.formula)};\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Constraints\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    modelica += '  // Constraints\\n';\r\n    modelica += '  equation\\n';\r\n    for (const constraint of thought.optimizationConstraints) {\r\n      const comment = includeLabels\r\n        ? ` // ${constraint.name} (${constraint.type})`\r\n        : '';\r\n      modelica += `    ${escapeModelicaString(constraint.formula)};${comment}\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Solution record\r\n  if (thought.solution) {\r\n    modelica += '  // Solution\\n';\r\n    modelica += '  record Solution\\n';\r\n\r\n    const solution = thought.solution as any;\r\n    if (solution.status) {\r\n      modelica += `    String status = \"${escapeModelicaString(solution.status)}\";\\n`;\r\n    }\r\n    if (solution.optimalValue !== undefined) {\r\n      modelica += `    Real optimalValue = ${solution.optimalValue};\\n`;\r\n    }\r\n    if (includeMetrics && solution.quality !== undefined) {\r\n      modelica += `    Real quality = ${solution.quality.toFixed(4)};\\n`;\r\n    }\r\n\r\n    if (solution.assignments) {\r\n      modelica += '    // Variable Assignments\\n';\r\n      for (const [varId, value] of Object.entries(solution.assignments)) {\r\n        const safeVarId = sanitizeModelicaId(varId);\r\n        modelica += `    Real ${safeVarId}_value = ${value};\\n`;\r\n      }\r\n    }\r\n\r\n    modelica += '  end Solution;\\n';\r\n  }\r\n\r\n  modelica += `end ${packageName};\\n`;\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export optimization problem to UML format\r\n */\r\nfunction optimizationToUML(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Problem as main package\r\n  if (thought.problem) {\r\n    nodes.push({\r\n      id: 'Problem',\r\n      label: includeLabels ? thought.problem.name : 'Problem',\r\n      shape: 'package',\r\n      attributes: [\r\n        `type: ${thought.problem.type}`,\r\n        `description: ${thought.problem.description}`,\r\n      ],\r\n    });\r\n  }\r\n\r\n  // Variables as a class with attributes\r\n  if (thought.variables && thought.variables.length > 0) {\r\n    const attributes = thought.variables.map(v => {\r\n      const varType = (v as any).type || 'Real';\r\n      const domain = v.domain\r\n        ? ` [${(v.domain as any).lowerBound}..${(v.domain as any).upperBound}]`\r\n        : '';\r\n      return `${v.name}: ${varType}${domain}`;\r\n    });\r\n\r\n    nodes.push({\r\n      id: 'Variables',\r\n      label: 'Decision Variables',\r\n      shape: 'class',\r\n      attributes,\r\n    });\r\n\r\n    if (thought.problem) {\r\n      edges.push({\r\n        source: 'Problem',\r\n        target: 'Variables',\r\n        type: 'composition',\r\n        label: 'contains',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Constraints as a class\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    const methods = thought.optimizationConstraints.map(c =>\r\n      `${c.name}(): ${c.type} = ${c.formula}`\r\n    );\r\n\r\n    nodes.push({\r\n      id: 'Constraints',\r\n      label: 'Constraints',\r\n      shape: 'class',\r\n      stereotype: 'constraint',\r\n      methods,\r\n    });\r\n\r\n    if (thought.problem) {\r\n      edges.push({\r\n        source: 'Problem',\r\n        target: 'Constraints',\r\n        type: 'composition',\r\n        label: 'enforces',\r\n      });\r\n    }\r\n\r\n    // Constraints constrain variables\r\n    if (thought.variables) {\r\n      edges.push({\r\n        source: 'Constraints',\r\n        target: 'Variables',\r\n        type: 'dependency',\r\n        label: 'constrains',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Objectives as a class\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    const methods = thought.objectives.map(o =>\r\n      `${o.name}(): ${o.type} = ${o.formula}`\r\n    );\r\n\r\n    nodes.push({\r\n      id: 'Objectives',\r\n      label: 'Objective Functions',\r\n      shape: 'interface',\r\n      stereotype: 'interface',\r\n      methods,\r\n    });\r\n\r\n    if (thought.problem) {\r\n      edges.push({\r\n        source: 'Problem',\r\n        target: 'Objectives',\r\n        type: 'composition',\r\n        label: 'optimizes',\r\n      });\r\n    }\r\n\r\n    // Objectives use variables\r\n    if (thought.variables) {\r\n      edges.push({\r\n        source: 'Objectives',\r\n        target: 'Variables',\r\n        type: 'dependency',\r\n        label: 'uses',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Solution as a result class\r\n  if (thought.solution) {\r\n    const solution = thought.solution as any;\r\n    const attributes: string[] = [];\r\n\r\n    if (solution.status) {\r\n      attributes.push(`status: ${solution.status}`);\r\n    }\r\n    if (solution.optimalValue !== undefined) {\r\n      attributes.push(`optimalValue: ${solution.optimalValue}`);\r\n    }\r\n    if (includeMetrics && solution.quality !== undefined) {\r\n      attributes.push(`quality: ${solution.quality.toFixed(2)}`);\r\n    }\r\n\r\n    if (solution.assignments) {\r\n      for (const [varId, value] of Object.entries(solution.assignments)) {\r\n        attributes.push(`${varId} = ${value}`);\r\n      }\r\n    }\r\n\r\n    nodes.push({\r\n      id: 'Solution',\r\n      label: 'Solution',\r\n      shape: 'class',\r\n      stereotype: 'result',\r\n      attributes,\r\n    });\r\n\r\n    // Solution realizes objectives\r\n    if (thought.objectives) {\r\n      edges.push({\r\n        source: 'Solution',\r\n        target: 'Objectives',\r\n        type: 'implementation',\r\n        label: 'satisfies',\r\n      });\r\n    }\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Optimization Problem Structure',\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export optimization problem to JSON format\r\n */\r\nfunction optimizationToJSON(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  const graph = createJsonGraph('Optimization Problem Graph', 'optimization');\r\n  let edgeIdCounter = 0;\r\n\r\n  // Add problem node\r\n  if (thought.problem) {\r\n    addNode(graph, {\r\n      id: 'problem',\r\n      label: includeLabels ? thought.problem.name : 'Problem',\r\n      type: 'problem',\r\n      metadata: {\r\n        problemType: thought.problem.type,\r\n        description: thought.problem.description,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Add variable nodes\r\n  if (thought.variables && thought.variables.length > 0) {\r\n    for (const variable of thought.variables) {\r\n      addNode(graph, {\r\n        id: variable.id,\r\n        label: includeLabels ? variable.name : variable.id,\r\n        type: 'variable',\r\n        metadata: {\r\n          variableType: (variable as any).type || 'Real',\r\n          domain: variable.domain,\r\n          description: variable.description,\r\n        },\r\n      });\r\n\r\n      // Connect variables to problem\r\n      if (thought.problem) {\r\n        addEdge(graph, {\r\n          id: `e${edgeIdCounter++}`,\r\n          source: 'problem',\r\n          target: variable.id,\r\n          label: 'has_variable',\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add constraint nodes\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    for (const constraint of thought.optimizationConstraints) {\r\n      addNode(graph, {\r\n        id: constraint.id,\r\n        label: includeLabels ? constraint.name : constraint.id,\r\n        type: 'constraint',\r\n        metadata: {\r\n          constraintType: constraint.type,\r\n          formula: constraint.formula,\r\n        },\r\n      });\r\n\r\n      // Connect constraints to problem\r\n      if (thought.problem) {\r\n        addEdge(graph, {\r\n          id: `e${edgeIdCounter++}`,\r\n          source: 'problem',\r\n          target: constraint.id,\r\n          label: 'enforces',\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add objective nodes\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    for (const objective of thought.objectives) {\r\n      addNode(graph, {\r\n        id: objective.id,\r\n        label: includeLabels ? objective.name : objective.id,\r\n        type: 'objective',\r\n        metadata: {\r\n          objectiveType: objective.type,\r\n          formula: objective.formula,\r\n        },\r\n      });\r\n\r\n      // Connect objectives to problem\r\n      if (thought.problem) {\r\n        addEdge(graph, {\r\n          id: `e${edgeIdCounter++}`,\r\n          source: 'problem',\r\n          target: objective.id,\r\n          label: 'optimizes',\r\n        });\r\n      }\r\n\r\n      // Connect objectives to solution\r\n      if (thought.solution) {\r\n        addEdge(graph, {\r\n          id: `e${edgeIdCounter++}`,\r\n          source: objective.id,\r\n          target: 'solution',\r\n          label: 'achieved_by',\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add solution node\r\n  if (thought.solution) {\r\n    const solution = thought.solution as any;\r\n    addNode(graph, {\r\n      id: 'solution',\r\n      label: 'Solution',\r\n      type: 'solution',\r\n      metadata: {\r\n        status: solution.status,\r\n        optimalValue: solution.optimalValue,\r\n        quality: solution.quality,\r\n        assignments: solution.assignments,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'variable_count', thought.variables?.length || 0);\r\n    addMetric(graph, 'constraint_count', thought.optimizationConstraints?.length || 0);\r\n    addMetric(graph, 'objective_count', thought.objectives?.length || 0);\r\n    if (thought.solution?.quality !== undefined) {\r\n      addMetric(graph, 'solution_quality', thought.solution.quality);\r\n    }\r\n  }\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export optimization problem constraint graph to Markdown format\r\n */\r\nfunction optimizationToMarkdown(thought: OptimizationThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Problem Overview\r\n  if (thought.problem) {\r\n    const problemContent = keyValueSection({\r\n      'Name': thought.problem.name,\r\n      'Type': thought.problem.type,\r\n      'Description': thought.problem.description,\r\n    });\r\n    parts.push(section('Problem', problemContent));\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Variables': thought.variables?.length || 0,\r\n      'Constraints': thought.optimizationConstraints?.length || 0,\r\n      'Objectives': thought.objectives?.length || 0,\r\n      'Quality': thought.solution?.quality?.toFixed(2) || 'N/A',\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Decision Variables\r\n  if (thought.variables && thought.variables.length > 0) {\r\n    const variableRows = thought.variables.map(v => {\r\n      const varType = (v as any).type || 'unknown';\r\n      const domain = v.domain\r\n        ? `[${(v.domain as any).lowerBound}, ${(v.domain as any).upperBound}]`\r\n        : 'N/A';\r\n      return [v.name, varType, domain, v.description];\r\n    });\r\n    const variablesTable = table(\r\n      ['Name', 'Type', 'Domain', 'Description'],\r\n      variableRows\r\n    );\r\n    parts.push(section('Decision Variables', variablesTable));\r\n  }\r\n\r\n  // Constraints\r\n  if (thought.optimizationConstraints && thought.optimizationConstraints.length > 0) {\r\n    const constraintItems = thought.optimizationConstraints.map(c =>\r\n      `**${c.name}** (${c.type})\\n  - Formula: \\`${c.formula}\\``\r\n    );\r\n    parts.push(section('Constraints', list(constraintItems)));\r\n  }\r\n\r\n  // Objectives\r\n  if (thought.objectives && thought.objectives.length > 0) {\r\n    const objectiveItems = thought.objectives.map(o =>\r\n      `**${o.type.toUpperCase()}: ${o.name}**\\n  - Formula: \\`${o.formula}\\``\r\n    );\r\n    parts.push(section('Objectives', list(objectiveItems)));\r\n  }\r\n\r\n  // Solution\r\n  if (thought.solution) {\r\n    const solution = thought.solution as any;\r\n    let solutionContent = '';\r\n\r\n    if (solution.status) {\r\n      solutionContent += `**Status:** ${solution.status}\\n\\n`;\r\n    }\r\n\r\n    const solutionMetrics: Record<string, string | number> = {};\r\n    if (solution.optimalValue !== undefined) {\r\n      solutionMetrics['Optimal Value'] = solution.optimalValue;\r\n    }\r\n    if (solution.quality !== undefined) {\r\n      solutionMetrics['Quality'] = `${(solution.quality * 100).toFixed(0)}%`;\r\n    }\r\n\r\n    if (Object.keys(solutionMetrics).length > 0) {\r\n      solutionContent += keyValueSection(solutionMetrics);\r\n    }\r\n\r\n    if (solution.assignments) {\r\n      solutionContent += '\\n**Variable Assignments:**\\n\\n';\r\n      solutionContent += keyValueSection(solution.assignments);\r\n    }\r\n\r\n    parts.push(section('Solution', solutionContent));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = optimizationToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Optimization Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Optimization Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: { mode: 'optimization' },\r\n  });\r\n}\r\n","/**\r\n * Abductive Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Abductive hypothesis export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { AbductiveThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  generateHierarchyModelica,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  generateHierarchyJson,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export abductive hypothesis comparison to visual format\r\n */\r\nexport function exportAbductiveHypotheses(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return abductiveToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return abductiveToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return abductiveToASCII(thought);\r\n    case 'svg':\r\n      return abductiveToSVG(thought, options);\r\n    case 'graphml':\r\n      return abductiveToGraphML(thought, options);\r\n    case 'tikz':\r\n      return abductiveToTikZ(thought, options);\r\n    case 'html':\r\n      return abductiveToHTML(thought, options);\r\n    case 'modelica':\r\n      return abductiveToModelica(thought, options);\r\n    case 'uml':\r\n      return abductiveToUML(thought, options);\r\n    case 'json':\r\n      return abductiveToJSON(thought, options);\r\n    case 'markdown':\r\n      return abductiveToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction abductiveToMermaid(\r\n  thought: AbductiveThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  mermaid += '  Observations[\"Observations\"]\\n';\r\n\r\n  for (const hypothesis of thought.hypotheses) {\r\n    const hypId = sanitizeId(hypothesis.id);\r\n    const label = includeLabels ? hypothesis.explanation.substring(0, 50) + '...' : hypId;\r\n    const scoreLabel = includeMetrics ? ` (${hypothesis.score.toFixed(2)})` : '';\r\n\r\n    mermaid += `  ${hypId}[\"${label}${scoreLabel}\"]\\n`;\r\n    mermaid += `  Observations --> ${hypId}\\n`;\r\n  }\r\n\r\n  if (thought.bestExplanation && colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const bestId = sanitizeId(thought.bestExplanation.id);\r\n    const color = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    mermaid += `  style ${bestId} fill:${color},stroke:#333,stroke-width:3px\\n`;\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction abductiveToDOT(\r\n  thought: AbductiveThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph AbductiveHypotheses {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  dot += '  Observations [label=\"Observations\", shape=ellipse];\\n\\n';\r\n\r\n  for (const hypothesis of thought.hypotheses) {\r\n    const hypId = sanitizeId(hypothesis.id);\r\n    const label = includeLabels ? hypothesis.explanation.substring(0, 50) + '...' : hypId;\r\n    const scoreLabel = includeMetrics ? ` (${hypothesis.score.toFixed(2)})` : '';\r\n\r\n    const isBest = thought.bestExplanation?.id === hypothesis.id;\r\n    const style = isBest ? ', style=filled, fillcolor=lightblue' : '';\r\n\r\n    dot += `  ${hypId} [label=\"${label}${scoreLabel}\"${style}];\\n`;\r\n    dot += `  Observations -> ${hypId};\\n`;\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction abductiveToASCII(thought: AbductiveThought): string {\r\n  let ascii = 'Abductive Hypothesis Comparison:\\n';\r\n  ascii += '================================\\n\\n';\r\n\r\n  ascii += 'Observations:\\n';\r\n  for (const obs of thought.observations) {\r\n    ascii += `   ${obs.description} (confidence: ${obs.confidence.toFixed(2)})\\n`;\r\n  }\r\n\r\n  ascii += '\\nHypotheses:\\n';\r\n  for (const hypothesis of thought.hypotheses) {\r\n    const isBest = thought.bestExplanation?.id === hypothesis.id;\r\n    const marker = isBest ? '' : '';\r\n\r\n    ascii += `  ${marker} ${hypothesis.explanation}\\n`;\r\n    ascii += `    Score: ${hypothesis.score.toFixed(2)}\\n`;\r\n    ascii += `    Assumptions: ${hypothesis.assumptions.join(', ')}\\n`;\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.bestExplanation) {\r\n    ascii += `Best Explanation: ${thought.bestExplanation.explanation}\\n`;\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export abductive hypotheses to native SVG format\r\n */\r\nfunction abductiveToSVG(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = 450,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 180;\r\n  const nodeHeight = 50;\r\n  const centerX = svgWidth / 2;\r\n\r\n  // Observations node at top\r\n  positions.set('observations', {\r\n    id: 'observations',\r\n    x: centerX - nodeWidth / 2,\r\n    y: 60,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    label: 'Observations',\r\n    type: 'observations',\r\n  });\r\n\r\n  // Hypothesis nodes below\r\n  const hypCount = thought.hypotheses.length;\r\n  const layerWidth = hypCount * (nodeWidth + 20) - 20;\r\n  let startX = (svgWidth - layerWidth) / 2;\r\n\r\n  for (const hypothesis of thought.hypotheses) {\r\n    const hypId = sanitizeId(hypothesis.id);\r\n    const label = includeLabels\r\n      ? hypothesis.explanation.substring(0, 30) + '...'\r\n      : hypId;\r\n    const scoreLabel = includeMetrics ? ` (${hypothesis.score.toFixed(2)})` : '';\r\n\r\n    positions.set(hypothesis.id, {\r\n      id: hypothesis.id,\r\n      x: startX,\r\n      y: 180,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      label: label + scoreLabel,\r\n      type: thought.bestExplanation?.id === hypothesis.id ? 'best' : 'hypothesis',\r\n    });\r\n    startX += nodeWidth + 20;\r\n  }\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Abductive Hypotheses');\r\n\r\n  // Render edges from observations to hypotheses\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  const obsPos = positions.get('observations');\r\n  for (const hypothesis of thought.hypotheses) {\r\n    const hypPos = positions.get(hypothesis.id);\r\n    if (obsPos && hypPos) {\r\n      svg += renderEdge(obsPos, hypPos, {});\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  // Observations\r\n  svg += renderEllipseNode(positions.get('observations')!, getNodeColor('info', colorScheme));\r\n\r\n  // Hypotheses\r\n  for (const hypothesis of thought.hypotheses) {\r\n    const pos = positions.get(hypothesis.id)!;\r\n    const isBest = thought.bestExplanation?.id === hypothesis.id;\r\n    const colors = isBest\r\n      ? getNodeColor('success', colorScheme)\r\n      : getNodeColor('neutral', colorScheme);\r\n\r\n    if (isBest) {\r\n      svg += renderStadiumNode(pos, colors);\r\n    } else {\r\n      svg += renderRectNode(pos, colors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Hypotheses', value: thought.hypotheses.length },\r\n      { label: 'Observations', value: thought.observations.length },\r\n      { label: 'Best Score', value: thought.bestExplanation?.score.toFixed(2) || 'N/A' },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 100, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Observations', color: getNodeColor('info', colorScheme), shape: 'ellipse' as const },\r\n    { label: 'Hypothesis', color: getNodeColor('neutral', colorScheme) },\r\n    { label: 'Best', color: getNodeColor('success', colorScheme) },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 80, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export abductive hypotheses to GraphML format\r\n */\r\nfunction abductiveToGraphML(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  // Create nodes from hypotheses\r\n  const nodes: GraphMLNode[] = thought.hypotheses.map(hypothesis => ({\r\n    id: sanitizeId(hypothesis.id),\r\n    label: includeLabels ? hypothesis.explanation.substring(0, 50) + '...' : hypothesis.id,\r\n    type: 'hypothesis',\r\n    metadata: includeMetrics ? {\r\n      description: hypothesis.explanation,\r\n      score: hypothesis.score,\r\n      assumptions: hypothesis.assumptions.join(', '),\r\n    } : undefined,\r\n  }));\r\n\r\n  // Add observation nodes if available\r\n  if (thought.observations && thought.observations.length > 0) {\r\n    for (const obs of thought.observations) {\r\n      nodes.push({\r\n        id: sanitizeId(`obs_${obs.id}`),\r\n        label: includeLabels ? obs.description : `obs_${obs.id}`,\r\n        type: 'observation',\r\n        metadata: includeMetrics ? {\r\n          description: obs.description,\r\n          confidence: obs.confidence,\r\n        } : undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create edges linking observations to hypotheses\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeId = 0;\r\n\r\n  if (thought.observations && thought.observations.length > 0) {\r\n    for (const obs of thought.observations) {\r\n      for (const hypothesis of thought.hypotheses) {\r\n        edges.push({\r\n          id: `e${edgeId++}`,\r\n          source: sanitizeId(`obs_${obs.id}`),\r\n          target: sanitizeId(hypothesis.id),\r\n          metadata: includeMetrics ? { weight: obs.confidence } : undefined,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Abductive Hypotheses',\r\n    includeLabels,\r\n    includeMetadata: includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export abductive hypotheses to TikZ/LaTeX format\r\n */\r\nfunction abductiveToTikZ(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true, colorScheme = 'default' } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n\r\n  // Position hypotheses horizontally\r\n  const hypCount = thought.hypotheses.length;\r\n  const spacing = 3;\r\n  const totalWidth = (hypCount - 1) * spacing;\r\n  const startX = 4 - totalWidth / 2;\r\n\r\n  for (let i = 0; i < thought.hypotheses.length; i++) {\r\n    const hypothesis = thought.hypotheses[i];\r\n    const isBest = thought.bestExplanation?.id === hypothesis.id;\r\n    const label = includeLabels\r\n      ? hypothesis.explanation.substring(0, 30) + '...'\r\n      : hypothesis.id;\r\n    const scoreLabel = includeMetrics ? ` (${hypothesis.score.toFixed(2)})` : '';\r\n\r\n    nodes.push({\r\n      id: sanitizeId(hypothesis.id),\r\n      label: label + scoreLabel,\r\n      x: startX + i * spacing,\r\n      y: -2,\r\n      type: isBest ? 'success' : 'hypothesis',\r\n      shape: 'ellipse',\r\n    });\r\n  }\r\n\r\n  // Add observation nodes above if available\r\n  if (thought.observations && thought.observations.length > 0) {\r\n    const obsCount = thought.observations.length;\r\n    const obsSpacing = Math.min(spacing, totalWidth / Math.max(1, obsCount - 1));\r\n    const obsStartX = 4 - ((obsCount - 1) * obsSpacing) / 2;\r\n\r\n    for (let i = 0; i < thought.observations.length; i++) {\r\n      const obs = thought.observations[i];\r\n      nodes.push({\r\n        id: sanitizeId(`obs_${obs.id}`),\r\n        label: includeLabels ? obs.description.substring(0, 30) + '...' : `obs_${obs.id}`,\r\n        x: obsStartX + i * obsSpacing,\r\n        y: 0,\r\n        type: 'info',\r\n        shape: 'rectangle',\r\n      });\r\n\r\n      // Create edges from observations to hypotheses\r\n      for (const hypothesis of thought.hypotheses) {\r\n        edges.push({\r\n          source: sanitizeId(`obs_${obs.id}`),\r\n          target: sanitizeId(hypothesis.id),\r\n          directed: true,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Abductive Hypotheses',\r\n    includeLabels,\r\n    includeMetrics,\r\n    colorScheme,\r\n  });\r\n}\r\n\r\n/**\r\n * Export abductive hypotheses to HTML format\r\n */\r\nfunction abductiveToHTML(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Abductive Reasoning Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Observations', thought.observations.length, 'info');\r\n    html += renderMetricCard('Hypotheses', thought.hypotheses.length, 'primary');\r\n    if (thought.bestExplanation) {\r\n      html += renderMetricCard('Best Score', thought.bestExplanation.score.toFixed(2), 'success');\r\n    }\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Observations table\r\n  const obsRows = thought.observations.map((obs, i) => [\r\n    (i + 1).toString(),\r\n    obs.description,\r\n    obs.confidence.toFixed(2),\r\n    obs.timestamp || '-',\r\n  ]);\r\n  html += renderSection('Observations', renderTable(\r\n    ['#', 'Description', 'Confidence', 'Time'],\r\n    obsRows\r\n  ), '');\r\n\r\n  // Hypotheses table\r\n  const hypRows = thought.hypotheses.map(hyp => {\r\n    const isBest = thought.bestExplanation?.id === hyp.id;\r\n    const badge = isBest ? renderBadge('Best', 'success') : '';\r\n    return [\r\n      hyp.explanation.substring(0, 60) + (hyp.explanation.length > 60 ? '...' : ''),\r\n      hyp.score.toFixed(2),\r\n      badge,\r\n      hyp.assumptions.slice(0, 3).join(', ') + (hyp.assumptions.length > 3 ? '...' : ''),\r\n    ];\r\n  });\r\n  html += renderSection('Hypotheses', renderTable(\r\n    ['Explanation', 'Score', 'Status', 'Key Assumptions'],\r\n    hypRows.map(row => row.map(cell => typeof cell === 'string' && cell.startsWith('<') ? cell : escapeHTML(String(cell))))\r\n  ), '');\r\n\r\n  // Best explanation highlight\r\n  if (thought.bestExplanation) {\r\n    html += renderSection('Best Explanation', `\r\n      <div class=\"card\">\r\n        <div class=\"card-header\">${escapeHTML(thought.bestExplanation.explanation)}</div>\r\n        <p><strong>Score:</strong> ${thought.bestExplanation.score.toFixed(2)}</p>\r\n        <p><strong>Assumptions:</strong></p>\r\n        <ul class=\"list-styled\">\r\n          ${thought.bestExplanation.assumptions.map(a => `<li>${escapeHTML(a)}</li>`).join('\\n')}\r\n        </ul>\r\n      </div>\r\n    `, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export abductive hypotheses to Modelica format\r\n */\r\nfunction abductiveToModelica(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const { modelicaPackageName, includeMetrics = true } = options;\r\n\r\n  // Map hypotheses to the format expected by generateHierarchyModelica\r\n  const children = thought.hypotheses.map(h => ({\r\n    name: sanitizeId(h.id),\r\n    description: h.explanation.substring(0, 100),\r\n    score: includeMetrics ? h.score : undefined,\r\n  }));\r\n\r\n  return generateHierarchyModelica(\r\n    'Observations',\r\n    `Abductive reasoning with ${thought.observations.length} observations`,\r\n    children,\r\n    {\r\n      packageName: modelicaPackageName || 'AbductiveHypotheses',\r\n      includeMetrics,\r\n    }\r\n  );\r\n}\r\n\r\n/**\r\n * Export abductive hypotheses to UML/PlantUML format\r\n */\r\nfunction abductiveToUML(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const { umlTheme, umlDirection, includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [\r\n    {\r\n      id: 'observations',\r\n      label: 'Observations',\r\n      shape: 'database',\r\n    },\r\n  ];\r\n\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Add hypothesis nodes\r\n  for (const hyp of thought.hypotheses) {\r\n    const isBest = thought.bestExplanation?.id === hyp.id;\r\n    const label = includeLabels\r\n      ? hyp.explanation.substring(0, 40) + (hyp.explanation.length > 40 ? '...' : '')\r\n      : hyp.id;\r\n    const scoreLabel = includeMetrics ? ` (${hyp.score.toFixed(2)})` : '';\r\n\r\n    nodes.push({\r\n      id: sanitizeId(hyp.id),\r\n      label: label + scoreLabel,\r\n      shape: 'class',\r\n      color: isBest ? '90EE90' : undefined,\r\n      stereotype: isBest ? 'best' : undefined,\r\n    });\r\n\r\n    edges.push({\r\n      source: 'observations',\r\n      target: sanitizeId(hyp.id),\r\n      type: 'arrow',\r\n    });\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Abductive Hypotheses',\r\n    theme: umlTheme,\r\n    direction: umlDirection,\r\n  });\r\n}\r\n\r\n/**\r\n * Export abductive hypotheses to JSON format\r\n */\r\nfunction abductiveToJSON(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const { jsonPrettyPrint = true, jsonIndent = 2, includeMetrics = true } = options;\r\n\r\n  const children = thought.hypotheses.map(h => ({\r\n    id: sanitizeId(h.id),\r\n    label: h.explanation.substring(0, 60),\r\n    score: h.score,\r\n    metadata: {\r\n      assumptions: h.assumptions,\r\n      isBest: thought.bestExplanation?.id === h.id,\r\n    },\r\n  }));\r\n\r\n  let json = generateHierarchyJson(\r\n    'Abductive Hypotheses',\r\n    'abductive',\r\n    { label: 'Observations', metadata: { count: thought.observations.length } },\r\n    children,\r\n    {\r\n      prettyPrint: jsonPrettyPrint,\r\n      indent: jsonIndent,\r\n      includeMetrics,\r\n    }\r\n  );\r\n\r\n  // Add observation details\r\n  if (includeMetrics) {\r\n    const graph = JSON.parse(json);\r\n    graph.metadata.observationCount = thought.observations.length;\r\n    graph.metadata.hypothesisCount = thought.hypotheses.length;\r\n    if (thought.bestExplanation) {\r\n      graph.metadata.bestHypothesisId = thought.bestExplanation.id;\r\n      graph.metadata.bestScore = thought.bestExplanation.score;\r\n    }\r\n    json = JSON.stringify(graph, null, jsonPrettyPrint !== false ? jsonIndent : 0);\r\n  }\r\n\r\n  return json;\r\n}\r\n\r\n/**\r\n * Export abductive hypotheses to Markdown format\r\n */\r\nfunction abductiveToMarkdown(thought: AbductiveThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    parts.push(section('Metrics', keyValueSection({\r\n      'Total Hypotheses': thought.hypotheses.length,\r\n      'Total Observations': thought.observations.length,\r\n      'Best Hypothesis Score': thought.bestExplanation?.score.toFixed(2) || 'N/A',\r\n    })));\r\n  }\r\n\r\n  // Observations\r\n  const obsRows = thought.observations.map(obs => [\r\n    obs.id,\r\n    obs.description,\r\n    obs.confidence.toFixed(2),\r\n    obs.timestamp || '-',\r\n  ]);\r\n  parts.push(section('Observations', table(\r\n    ['ID', 'Description', 'Confidence', 'Timestamp'],\r\n    obsRows\r\n  )));\r\n\r\n  // Hypotheses\r\n  const hypRows = thought.hypotheses.map(hyp => [\r\n    hyp.id,\r\n    hyp.explanation.substring(0, 60) + (hyp.explanation.length > 60 ? '...' : ''),\r\n    hyp.score.toFixed(2),\r\n    thought.bestExplanation?.id === hyp.id ? ' Best' : '',\r\n  ]);\r\n  parts.push(section('Hypotheses', table(\r\n    ['ID', 'Explanation', 'Score', 'Status'],\r\n    hypRows\r\n  )));\r\n\r\n  // Best explanation details\r\n  if (thought.bestExplanation) {\r\n    const assumptions = list(thought.bestExplanation.assumptions);\r\n    parts.push(section('Best Explanation',\r\n      `**Score:** ${thought.bestExplanation.score.toFixed(2)}\\n\\n` +\r\n      `**Explanation:** ${thought.bestExplanation.explanation}\\n\\n` +\r\n      `**Assumptions:**\\n${assumptions}`\r\n    ));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaid = abductiveToMermaid(thought, 'default', true, includeMetrics);\r\n    parts.push(section('Visualization', mermaidBlock(mermaid)));\r\n  }\r\n\r\n  return mdDocument('Abductive Reasoning Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: { mode: 'abductive', hypotheses: thought.hypotheses.length },\r\n  });\r\n}\r\n","/**\r\n * Analogical Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Analogical domain mapping export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { AnalogicalThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n  type GraphMLOptions,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  getTikZColor,\r\n  renderTikZMetrics,\r\n  renderTikZLegend,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n  type TikZOptions,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderProgressBar,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export analogical domain mapping to visual format\r\n */\r\nexport function exportAnalogicalMapping(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return analogicalToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return analogicalToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return analogicalToASCII(thought);\r\n    case 'svg':\r\n      return analogicalToSVG(thought, options);\r\n    case 'graphml':\r\n      return analogicalToGraphML(thought, options);\r\n    case 'tikz':\r\n      return analogicalToTikZ(thought, options);\r\n    case 'html':\r\n      return analogicalToHTML(thought, options);\r\n    case 'modelica':\r\n      return analogicalToModelica(thought, options);\r\n    case 'uml':\r\n      return analogicalToUML(thought, options);\r\n    case 'json':\r\n      return analogicalToJSON(thought, options);\r\n    case 'markdown':\r\n      return analogicalToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction analogicalToMermaid(\r\n  thought: AnalogicalThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph LR\\n';\r\n\r\n  mermaid += '  subgraph Source[\"Source Domain\"]\\n';\r\n  for (const entity of thought.sourceDomain.entities) {\r\n    const entityId = sanitizeId('src_' + entity.id);\r\n    const label = includeLabels ? entity.name : entityId;\r\n    mermaid += `    ${entityId}[\"${label}\"]\\n`;\r\n  }\r\n  mermaid += '  end\\n\\n';\r\n\r\n  mermaid += '  subgraph Target[\"Target Domain\"]\\n';\r\n  for (const entity of thought.targetDomain.entities) {\r\n    const entityId = sanitizeId('tgt_' + entity.id);\r\n    const label = includeLabels ? entity.name : entityId;\r\n    mermaid += `    ${entityId}[\"${label}\"]\\n`;\r\n  }\r\n  mermaid += '  end\\n\\n';\r\n\r\n  for (const mapping of thought.mapping) {\r\n    const srcId = sanitizeId('src_' + mapping.sourceEntityId);\r\n    const tgtId = sanitizeId('tgt_' + mapping.targetEntityId);\r\n    const confidenceLabel = includeMetrics ? `|${mapping.confidence.toFixed(2)}|` : '';\r\n\r\n    mermaid += `  ${srcId} -.->${confidenceLabel} ${tgtId}\\n`;\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const srcColor = colorScheme === 'pastel' ? '#fff3e0' : '#ffd699';\r\n    const tgtColor = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n\r\n    for (const entity of thought.sourceDomain.entities) {\r\n      const entityId = sanitizeId('src_' + entity.id);\r\n      mermaid += `  style ${entityId} fill:${srcColor}\\n`;\r\n    }\r\n\r\n    for (const entity of thought.targetDomain.entities) {\r\n      const entityId = sanitizeId('tgt_' + entity.id);\r\n      mermaid += `  style ${entityId} fill:${tgtColor}\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction analogicalToDOT(\r\n  thought: AnalogicalThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph AnalogicalMapping {\\n';\r\n  dot += '  rankdir=LR;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  dot += '  subgraph cluster_source {\\n';\r\n  dot += '    label=\"Source Domain\";\\n';\r\n  dot += '    style=filled;\\n';\r\n  dot += '    fillcolor=lightyellow;\\n\\n';\r\n\r\n  for (const entity of thought.sourceDomain.entities) {\r\n    const entityId = sanitizeId('src_' + entity.id);\r\n    const label = includeLabels ? entity.name : entityId;\r\n    dot += `    ${entityId} [label=\"${label}\"];\\n`;\r\n  }\r\n\r\n  dot += '  }\\n\\n';\r\n\r\n  dot += '  subgraph cluster_target {\\n';\r\n  dot += '    label=\"Target Domain\";\\n';\r\n  dot += '    style=filled;\\n';\r\n  dot += '    fillcolor=lightblue;\\n\\n';\r\n\r\n  for (const entity of thought.targetDomain.entities) {\r\n    const entityId = sanitizeId('tgt_' + entity.id);\r\n    const label = includeLabels ? entity.name : entityId;\r\n    dot += `    ${entityId} [label=\"${label}\"];\\n`;\r\n  }\r\n\r\n  dot += '  }\\n\\n';\r\n\r\n  for (const mapping of thought.mapping) {\r\n    const srcId = sanitizeId('src_' + mapping.sourceEntityId);\r\n    const tgtId = sanitizeId('tgt_' + mapping.targetEntityId);\r\n    const confidenceLabel = includeMetrics ? `, label=\"${mapping.confidence.toFixed(2)}\"` : '';\r\n\r\n    dot += `  ${srcId} -> ${tgtId} [style=dashed${confidenceLabel}];\\n`;\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction analogicalToASCII(thought: AnalogicalThought): string {\r\n  let ascii = 'Analogical Domain Mapping:\\n';\r\n  ascii += '==========================\\n\\n';\r\n\r\n  ascii += `Source Domain: ${thought.sourceDomain.name}\\n`;\r\n  ascii += `${thought.sourceDomain.description}\\n\\n`;\r\n\r\n  ascii += `Target Domain: ${thought.targetDomain.name}\\n`;\r\n  ascii += `${thought.targetDomain.description}\\n\\n`;\r\n\r\n  ascii += 'Mappings:\\n';\r\n  for (const mapping of thought.mapping) {\r\n    const srcEntity = thought.sourceDomain.entities.find(e => e.id === mapping.sourceEntityId);\r\n    const tgtEntity = thought.targetDomain.entities.find(e => e.id === mapping.targetEntityId);\r\n\r\n    if (srcEntity && tgtEntity) {\r\n      ascii += `  ${srcEntity.name}  ${tgtEntity.name} (confidence: ${mapping.confidence.toFixed(2)})\\n`;\r\n      ascii += `    ${mapping.justification}\\n`;\r\n    }\r\n  }\r\n\r\n  ascii += `\\nAnalogy Strength: ${thought.analogyStrength.toFixed(2)}\\n`;\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export analogical domain mapping to native SVG format\r\n */\r\nfunction analogicalToSVG(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n\r\n  // Source domain entities on the left\r\n  const sourceY = 100;\r\n  const entitySpacing = 100;\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n  thought.sourceDomain.entities.forEach((entity, index) => {\r\n    const srcId = 'src_' + entity.id;\r\n    positions.set(srcId, {\r\n      id: srcId,\r\n      label: includeLabels ? entity.name : srcId,\r\n      x: 150,\r\n      y: sourceY + index * entitySpacing,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'source',\r\n    });\r\n  });\r\n\r\n  // Target domain entities on the right\r\n  const targetY = 100;\r\n  thought.targetDomain.entities.forEach((entity, index) => {\r\n    const tgtId = 'tgt_' + entity.id;\r\n    positions.set(tgtId, {\r\n      id: tgtId,\r\n      label: includeLabels ? entity.name : tgtId,\r\n      x: svgWidth - 150,\r\n      y: targetY + index * entitySpacing,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'target',\r\n    });\r\n  });\r\n\r\n  const actualHeight = Math.max(\r\n    DEFAULT_SVG_OPTIONS.height,\r\n    Math.max(thought.sourceDomain.entities.length, thought.targetDomain.entities.length) * entitySpacing + 150\r\n  );\r\n\r\n  let svg = generateSVGHeader(svgWidth, actualHeight, 'Analogical Domain Mapping');\r\n\r\n  // Render edges first (mapping connections)\r\n  svg += '\\n  <!-- Mappings -->\\n  <g class=\"edges\">';\r\n  for (const mapping of thought.mapping) {\r\n    const srcPos = positions.get('src_' + mapping.sourceEntityId);\r\n    const tgtPos = positions.get('tgt_' + mapping.targetEntityId);\r\n    if (srcPos && tgtPos) {\r\n      const label = includeMetrics ? mapping.confidence.toFixed(2) : undefined;\r\n      svg += renderEdge(srcPos, tgtPos, { label, style: 'dashed' });\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  const sourceColors = getNodeColor('tertiary', colorScheme);\r\n  const targetColors = getNodeColor('primary', colorScheme);\r\n\r\n  for (const [, pos] of positions) {\r\n    if (pos.type === 'source') {\r\n      svg += renderRectNode(pos, sourceColors);\r\n    } else {\r\n      svg += renderRectNode(pos, targetColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Analogy Strength', value: thought.analogyStrength.toFixed(2) },\r\n      { label: 'Mappings', value: thought.mapping.length },\r\n      { label: 'Source Entities', value: thought.sourceDomain.entities.length },\r\n      { label: 'Target Entities', value: thought.targetDomain.entities.length },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, actualHeight - 140, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Source Domain', color: sourceColors },\r\n    { label: 'Target Domain', color: targetColors },\r\n  ];\r\n  svg += renderLegend(20, actualHeight - 80, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export analogical domain mapping to GraphML format\r\n */\r\nfunction analogicalToGraphML(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  // Create nodes for source domain entities\r\n  const nodes: GraphMLNode[] = [];\r\n  for (const entity of thought.sourceDomain.entities) {\r\n    nodes.push({\r\n      id: 'src_' + entity.id,\r\n      label: entity.name,\r\n      type: 'source',\r\n      metadata: {\r\n        description: entity.description,\r\n        domain: thought.sourceDomain.name,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Create nodes for target domain entities\r\n  for (const entity of thought.targetDomain.entities) {\r\n    nodes.push({\r\n      id: 'tgt_' + entity.id,\r\n      label: entity.name,\r\n      type: 'target',\r\n      metadata: {\r\n        description: entity.description,\r\n        domain: thought.targetDomain.name,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Create edges for mappings\r\n  const edges: GraphMLEdge[] = thought.mapping.map((mapping, index) => {\r\n    const edge: GraphMLEdge = {\r\n      id: `mapping_${index}`,\r\n      source: 'src_' + mapping.sourceEntityId,\r\n      target: 'tgt_' + mapping.targetEntityId,\r\n    };\r\n\r\n    if (includeMetrics) {\r\n      edge.metadata = {\r\n        weight: mapping.confidence,\r\n        type: 'mapping',\r\n      };\r\n      edge.label = mapping.confidence.toFixed(2);\r\n    }\r\n\r\n    return edge;\r\n  });\r\n\r\n  const graphmlOptions: GraphMLOptions = {\r\n    graphName: 'Analogical Mapping',\r\n  };\r\n\r\n  return generateGraphML(nodes, edges, graphmlOptions);\r\n}\r\n\r\n/**\r\n * Export analogical domain mapping to TikZ format\r\n */\r\nfunction analogicalToTikZ(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true, colorScheme = 'default' } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n\r\n  // Source domain entities on the left (x = -3)\r\n  thought.sourceDomain.entities.forEach((entity, index) => {\r\n    nodes.push({\r\n      id: 'src_' + entity.id,\r\n      x: -3,\r\n      y: -index * 1.5,\r\n      label: includeLabels ? entity.name : entity.id,\r\n      shape: 'rectangle',\r\n      type: 'tertiary',\r\n    });\r\n  });\r\n\r\n  // Target domain entities on the right (x = 3)\r\n  thought.targetDomain.entities.forEach((entity, index) => {\r\n    nodes.push({\r\n      id: 'tgt_' + entity.id,\r\n      x: 3,\r\n      y: -index * 1.5,\r\n      label: includeLabels ? entity.name : entity.id,\r\n      shape: 'rectangle',\r\n      type: 'primary',\r\n    });\r\n  });\r\n\r\n  // Create dashed edges for mappings\r\n  const edges: TikZEdge[] = thought.mapping.map(mapping => {\r\n    const edge: TikZEdge = {\r\n      source: 'src_' + mapping.sourceEntityId,\r\n      target: 'tgt_' + mapping.targetEntityId,\r\n      style: 'dashed',\r\n    };\r\n\r\n    if (includeMetrics) {\r\n      edge.label = mapping.confidence.toFixed(2);\r\n    }\r\n\r\n    return edge;\r\n  });\r\n\r\n  const tikzOptions: TikZOptions = {\r\n    title: 'Analogical Mapping',\r\n    colorScheme,\r\n    includeLabels,\r\n    includeMetrics,\r\n  };\r\n\r\n  let tikz = generateTikZ(nodes, edges, tikzOptions);\r\n\r\n  // Add metrics panel if requested\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Analogy Strength', value: thought.analogyStrength.toFixed(2) },\r\n      { label: 'Mappings', value: thought.mapping.length.toString() },\r\n      { label: 'Source Entities', value: thought.sourceDomain.entities.length.toString() },\r\n      { label: 'Target Entities', value: thought.targetDomain.entities.length.toString() },\r\n    ];\r\n    tikz = tikz.replace(\r\n      /\\\\end\\{tikzpicture\\}/,\r\n      renderTikZMetrics(6, -6, metrics) + '\\n\\\\end{tikzpicture}'\r\n    );\r\n  }\r\n\r\n  // Add legend\r\n  const sourceColors = getTikZColor('tertiary', colorScheme);\r\n  const targetColors = getTikZColor('primary', colorScheme);\r\n  const legendItems = [\r\n    { label: 'Source Domain', color: sourceColors },\r\n    { label: 'Target Domain', color: targetColors },\r\n  ];\r\n  tikz = tikz.replace(\r\n    /\\\\end\\{tikzpicture\\}/,\r\n    renderTikZLegend(-3, -6, legendItems) + '\\n\\\\end{tikzpicture}'\r\n  );\r\n\r\n  return tikz;\r\n}\r\n\r\n/**\r\n * Export analogical mapping to HTML format\r\n */\r\nfunction analogicalToHTML(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Analogical Reasoning Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Analogy Strength', (thought.analogyStrength * 100).toFixed(0) + '%', 'primary');\r\n    html += renderMetricCard('Mappings', thought.mapping.length, 'info');\r\n    html += renderMetricCard('Source Entities', thought.sourceDomain.entities.length, 'success');\r\n    html += renderMetricCard('Target Entities', thought.targetDomain.entities.length, 'warning');\r\n    html += '</div>\\n';\r\n    html += renderProgressBar(thought.analogyStrength * 100, 'primary');\r\n  }\r\n\r\n  // Source domain\r\n  const srcRows = thought.sourceDomain.entities.map(e => [e.id, e.name, e.type || '-', e.description || '-']);\r\n  html += renderSection('Source Domain: ' + thought.sourceDomain.name, renderTable(\r\n    ['ID', 'Name', 'Type', 'Description'],\r\n    srcRows\r\n  ), '');\r\n\r\n  // Target domain\r\n  const tgtRows = thought.targetDomain.entities.map(e => [e.id, e.name, e.type || '-', e.description || '-']);\r\n  html += renderSection('Target Domain: ' + thought.targetDomain.name, renderTable(\r\n    ['ID', 'Name', 'Type', 'Description'],\r\n    tgtRows\r\n  ), '');\r\n\r\n  // Mappings\r\n  const mapRows = thought.mapping.map(m => [\r\n    m.sourceEntityId,\r\n    '',\r\n    m.targetEntityId,\r\n    (m.confidence * 100).toFixed(0) + '%',\r\n    m.justification || '-',\r\n  ]);\r\n  html += renderSection('Entity Mappings', renderTable(\r\n    ['Source', '', 'Target', 'Confidence', 'Justification'],\r\n    mapRows\r\n  ), '');\r\n\r\n  // Inferences\r\n  if (thought.inferences && thought.inferences.length > 0) {\r\n    const infRows = thought.inferences.map((inf, i) => [\r\n      (i + 1).toString(),\r\n      inf.sourcePattern,\r\n      inf.targetPrediction,\r\n      (inf.confidence * 100).toFixed(0) + '%',\r\n    ]);\r\n    html += renderSection('Inferences', renderTable(\r\n      ['#', 'Source Pattern', 'Target Prediction', 'Confidence'],\r\n      infRows\r\n    ), '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export analogical mapping to Modelica format\r\n */\r\nfunction analogicalToModelica(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  const pkgName = sanitizeModelicaId('AnalogicalMapping');\r\n  let modelica = `package ${pkgName}\\n`;\r\n  modelica += `  \"${escapeModelicaString('Analogical domain mapping: ' + thought.sourceDomain.name + '  ' + thought.targetDomain.name)}\"\\n\\n`;\r\n\r\n  // Source domain record\r\n  modelica += `  record SourceDomain \"${escapeModelicaString(thought.sourceDomain.name)}\"\\n`;\r\n  modelica += `    String name = \"${escapeModelicaString(thought.sourceDomain.name)}\";\\n`;\r\n  modelica += `    String description = \"${escapeModelicaString(thought.sourceDomain.description || '')}\";\\n`;\r\n\r\n  // Add source entities as parameters\r\n  thought.sourceDomain.entities.forEach(entity => {\r\n    const entityId = sanitizeModelicaId(entity.id);\r\n    modelica += `    parameter String entity_${entityId} = \"${escapeModelicaString(entity.name)}\";\\n`;\r\n    if (entity.description) {\r\n      modelica += `    parameter String entity_${entityId}_desc = \"${escapeModelicaString(entity.description)}\";\\n`;\r\n    }\r\n  });\r\n  modelica += `  end SourceDomain;\\n\\n`;\r\n\r\n  // Target domain record\r\n  modelica += `  record TargetDomain \"${escapeModelicaString(thought.targetDomain.name)}\"\\n`;\r\n  modelica += `    String name = \"${escapeModelicaString(thought.targetDomain.name)}\";\\n`;\r\n  modelica += `    String description = \"${escapeModelicaString(thought.targetDomain.description || '')}\";\\n`;\r\n\r\n  // Add target entities as parameters\r\n  thought.targetDomain.entities.forEach(entity => {\r\n    const entityId = sanitizeModelicaId(entity.id);\r\n    modelica += `    parameter String entity_${entityId} = \"${escapeModelicaString(entity.name)}\";\\n`;\r\n    if (entity.description) {\r\n      modelica += `    parameter String entity_${entityId}_desc = \"${escapeModelicaString(entity.description)}\";\\n`;\r\n    }\r\n  });\r\n  modelica += `  end TargetDomain;\\n\\n`;\r\n\r\n  // Mapping record\r\n  modelica += `  record Mapping \"Entity mapping with confidence\"\\n`;\r\n  thought.mapping.forEach((mapping, index) => {\r\n    const srcId = sanitizeModelicaId(mapping.sourceEntityId);\r\n    const tgtId = sanitizeModelicaId(mapping.targetEntityId);\r\n    modelica += `    parameter String map_${index}_source = \"${escapeModelicaString(srcId)}\";\\n`;\r\n    modelica += `    parameter String map_${index}_target = \"${escapeModelicaString(tgtId)}\";\\n`;\r\n    modelica += `    parameter Real map_${index}_confidence = ${mapping.confidence.toFixed(3)};\\n`;\r\n    if (mapping.justification) {\r\n      modelica += `    parameter String map_${index}_justification = \"${escapeModelicaString(mapping.justification)}\";\\n`;\r\n    }\r\n  });\r\n  modelica += `  end Mapping;\\n\\n`;\r\n\r\n  // Metrics if requested\r\n  if (includeMetrics) {\r\n    modelica += `  record Metrics \"Analogy metrics\"\\n`;\r\n    modelica += `    parameter Real analogyStrength = ${thought.analogyStrength.toFixed(3)};\\n`;\r\n    modelica += `    parameter Integer mappingCount = ${thought.mapping.length};\\n`;\r\n    modelica += `    parameter Integer sourceEntityCount = ${thought.sourceDomain.entities.length};\\n`;\r\n    modelica += `    parameter Integer targetEntityCount = ${thought.targetDomain.entities.length};\\n`;\r\n    modelica += `  end Metrics;\\n\\n`;\r\n  }\r\n\r\n  // Main model connecting domains\r\n  modelica += `  model AnalogicalSystem \"Complete analogical mapping system\"\\n`;\r\n  modelica += `    SourceDomain source;\\n`;\r\n  modelica += `    TargetDomain target;\\n`;\r\n  modelica += `    Mapping mappings;\\n`;\r\n  if (includeMetrics) {\r\n    modelica += `    Metrics metrics;\\n`;\r\n  }\r\n  modelica += `  end AnalogicalSystem;\\n\\n`;\r\n\r\n  modelica += `  annotation(Documentation(info=\"<html>\\n`;\r\n  modelica += `    <p>Analogical mapping between ${escapeModelicaString(thought.sourceDomain.name)} and ${escapeModelicaString(thought.targetDomain.name)}</p>\\n`;\r\n  modelica += `    <p>Analogy strength: ${(thought.analogyStrength * 100).toFixed(1)}%</p>\\n`;\r\n  modelica += `  </html>\"));\\n`;\r\n  modelica += `end ${pkgName};\\n`;\r\n\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export analogical mapping to UML format\r\n */\r\nfunction analogicalToUML(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Create package for source domain\r\n  nodes.push({\r\n    id: 'source_domain',\r\n    label: thought.sourceDomain.name,\r\n    shape: 'package',\r\n    stereotype: 'source',\r\n  });\r\n\r\n  // Create entities for source domain\r\n  thought.sourceDomain.entities.forEach(entity => {\r\n    const nodeId = 'src_' + entity.id;\r\n    nodes.push({\r\n      id: nodeId,\r\n      label: includeLabels ? entity.name : entity.id,\r\n      shape: 'rectangle',\r\n      color: 'FFE0B2',\r\n      attributes: entity.description ? [entity.description] : [],\r\n    });\r\n  });\r\n\r\n  // Create package for target domain\r\n  nodes.push({\r\n    id: 'target_domain',\r\n    label: thought.targetDomain.name,\r\n    shape: 'package',\r\n    stereotype: 'target',\r\n  });\r\n\r\n  // Create entities for target domain\r\n  thought.targetDomain.entities.forEach(entity => {\r\n    const nodeId = 'tgt_' + entity.id;\r\n    nodes.push({\r\n      id: nodeId,\r\n      label: includeLabels ? entity.name : entity.id,\r\n      shape: 'rectangle',\r\n      color: 'B3E5FC',\r\n      attributes: entity.description ? [entity.description] : [],\r\n    });\r\n  });\r\n\r\n  // Create dependency relationships for mappings\r\n  thought.mapping.forEach(mapping => {\r\n    const srcId = 'src_' + mapping.sourceEntityId;\r\n    const tgtId = 'tgt_' + mapping.targetEntityId;\r\n\r\n    edges.push({\r\n      source: srcId,\r\n      target: tgtId,\r\n      type: 'dependency',\r\n      label: includeMetrics ? `${mapping.confidence.toFixed(2)}` : undefined,\r\n    });\r\n  });\r\n\r\n  // Add metrics info if requested\r\n  if (includeMetrics) {\r\n    nodes.push({\r\n      id: 'metrics_info',\r\n      label: `Metrics\\nAnalogy Strength: ${(thought.analogyStrength * 100).toFixed(1)}%\\nMappings: ${thought.mapping.length}`,\r\n      shape: 'rectangle',\r\n      color: 'E8EAF6',\r\n    });\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Analogical Domain Mapping',\r\n    diagramType: 'component',\r\n  });\r\n}\r\n\r\n/**\r\n * Export analogical mapping to JSON format\r\n */\r\nfunction analogicalToJSON(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  // Create graph\r\n  const graph = createJsonGraph('Analogical Domain Mapping', 'analogical');\r\n\r\n  // Add additional metadata\r\n  graph.metadata.sourceDomainName = thought.sourceDomain.name;\r\n  graph.metadata.sourceDomainDescription = thought.sourceDomain.description;\r\n  graph.metadata.targetDomainName = thought.targetDomain.name;\r\n  graph.metadata.targetDomainDescription = thought.targetDomain.description;\r\n\r\n  // Add source domain entities as nodes\r\n  thought.sourceDomain.entities.forEach(entity => {\r\n    addNode(graph, {\r\n      id: 'src_' + entity.id,\r\n      label: entity.name,\r\n      type: 'source_entity',\r\n      metadata: {\r\n        originalId: entity.id,\r\n        description: entity.description,\r\n        entityType: entity.type,\r\n        domain: 'source',\r\n      },\r\n    });\r\n  });\r\n\r\n  // Add target domain entities as nodes\r\n  thought.targetDomain.entities.forEach(entity => {\r\n    addNode(graph, {\r\n      id: 'tgt_' + entity.id,\r\n      label: entity.name,\r\n      type: 'target_entity',\r\n      metadata: {\r\n        originalId: entity.id,\r\n        description: entity.description,\r\n        entityType: entity.type,\r\n        domain: 'target',\r\n      },\r\n    });\r\n  });\r\n\r\n  // Add mappings as edges\r\n  thought.mapping.forEach((mapping, index) => {\r\n    addEdge(graph, {\r\n      id: `mapping_${index}`,\r\n      source: 'src_' + mapping.sourceEntityId,\r\n      target: 'tgt_' + mapping.targetEntityId,\r\n      label: `confidence: ${mapping.confidence.toFixed(2)}`,\r\n      type: 'mapping',\r\n      metadata: {\r\n        confidence: mapping.confidence,\r\n        justification: mapping.justification,\r\n      },\r\n    });\r\n  });\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'analogyStrength', thought.analogyStrength);\r\n    addMetric(graph, 'mappingCount', thought.mapping.length);\r\n    addMetric(graph, 'sourceEntityCount', thought.sourceDomain.entities.length);\r\n    addMetric(graph, 'targetEntityCount', thought.targetDomain.entities.length);\r\n\r\n    // Add average mapping confidence\r\n    if (thought.mapping.length > 0) {\r\n      const avgConfidence = thought.mapping.reduce((sum, m) => sum + m.confidence, 0) / thought.mapping.length;\r\n      addMetric(graph, 'averageMappingConfidence', avgConfidence);\r\n    }\r\n  }\r\n\r\n  // Add inferences if present\r\n  if (thought.inferences && thought.inferences.length > 0) {\r\n    graph.metadata.inferences = thought.inferences.map(inf => ({\r\n      sourcePattern: inf.sourcePattern,\r\n      targetPrediction: inf.targetPrediction,\r\n      confidence: inf.confidence,\r\n    }));\r\n    if (includeMetrics) {\r\n      addMetric(graph, 'inferenceCount', thought.inferences.length);\r\n    }\r\n  }\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export analogical mapping to Markdown format\r\n */\r\nfunction analogicalToMarkdown(thought: AnalogicalThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    parts.push(section('Metrics', keyValueSection({\r\n      'Analogy Strength': (thought.analogyStrength * 100).toFixed(0) + '%',\r\n      'Mappings': thought.mapping.length,\r\n      'Source Entities': thought.sourceDomain.entities.length,\r\n      'Target Entities': thought.targetDomain.entities.length,\r\n    })));\r\n  }\r\n\r\n  // Source domain\r\n  parts.push(section('Source Domain',\r\n    `**Name:** ${thought.sourceDomain.name}\\n\\n` +\r\n    `**Description:** ${thought.sourceDomain.description || 'N/A'}\\n\\n` +\r\n    `**Entities:**\\n${list(thought.sourceDomain.entities.map(e => `${e.name}: ${e.description || 'N/A'}`))}`\r\n  ));\r\n\r\n  // Target domain\r\n  parts.push(section('Target Domain',\r\n    `**Name:** ${thought.targetDomain.name}\\n\\n` +\r\n    `**Description:** ${thought.targetDomain.description || 'N/A'}\\n\\n` +\r\n    `**Entities:**\\n${list(thought.targetDomain.entities.map(e => `${e.name}: ${e.description || 'N/A'}`))}`\r\n  ));\r\n\r\n  // Mappings\r\n  const mapRows = thought.mapping.map(m => [\r\n    m.sourceEntityId,\r\n    '',\r\n    m.targetEntityId,\r\n    (m.confidence * 100).toFixed(0) + '%',\r\n    m.justification || '-',\r\n  ]);\r\n  parts.push(section('Entity Mappings', table(\r\n    ['Source', '', 'Target', 'Confidence', 'Justification'],\r\n    mapRows\r\n  )));\r\n\r\n  // Inferences\r\n  if (thought.inferences && thought.inferences.length > 0) {\r\n    const infRows = thought.inferences.map(inf => [\r\n      inf.sourcePattern,\r\n      inf.targetPrediction,\r\n      (inf.confidence * 100).toFixed(0) + '%',\r\n    ]);\r\n    parts.push(section('Inferences', table(\r\n      ['Source Pattern', 'Target Prediction', 'Confidence'],\r\n      infRows\r\n    )));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaid = analogicalToMermaid(thought, 'default', true, includeMetrics);\r\n    parts.push(section('Visualization', mermaidBlock(mermaid)));\r\n  }\r\n\r\n  return mdDocument('Analogical Reasoning Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'analogical',\r\n      mappings: thought.mapping.length,\r\n      analogyStrength: thought.analogyStrength.toFixed(2),\r\n    },\r\n  });\r\n}\r\n","/**\r\n * First Principles Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: First principles derivation export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support, GraphML, TikZ\r\n */\r\n\r\nimport type { FirstPrinciplesThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  calculateSVGHeight,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n  renderList,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n  generateModelicaPackageHeader,\r\n  generateModelicaPackageFooter,\r\n  generateModelicaRecord,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlHeader,\r\n  generateUmlFooter,\r\n  renderUmlNode,\r\n  renderUmlEdge,\r\n  sanitizeUmlId,\r\n  escapeUml,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  addLegendItem,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export first-principles derivation chain to visual format\r\n */\r\nexport function exportFirstPrinciplesDerivation(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return firstPrinciplesToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return firstPrinciplesToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return firstPrinciplesToASCII(thought);\r\n    case 'svg':\r\n      return firstPrinciplesToSVG(thought, options);\r\n    case 'graphml':\r\n      return firstPrinciplesToGraphML(thought, options);\r\n    case 'tikz':\r\n      return firstPrinciplesToTikZ(thought, options);\r\n    case 'html':\r\n      return firstPrinciplesToHTML(thought, options);\r\n    case 'modelica':\r\n      return firstPrinciplesToModelica(thought, options);\r\n    case 'uml':\r\n      return firstPrinciplesToUML(thought, options);\r\n    case 'json':\r\n      return firstPrinciplesToJSON(thought, options);\r\n    case 'markdown':\r\n      return firstPrinciplesToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction firstPrinciplesToMermaid(\r\n  thought: FirstPrinciplesThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  mermaid += `  Q[\"Question: ${thought.question}\"]\\n`;\r\n  mermaid += '\\n';\r\n\r\n  for (const principle of thought.principles) {\r\n    const principleId = sanitizeId(principle.id);\r\n    const label = includeLabels\r\n      ? `${principle.type.toUpperCase()}: ${principle.statement.substring(0, 50)}...`\r\n      : principleId;\r\n\r\n    let shape: [string, string];\r\n    switch (principle.type) {\r\n      case 'axiom':\r\n        shape = ['([', '])'];\r\n        break;\r\n      case 'definition':\r\n        shape = ['[[', ']]'];\r\n        break;\r\n      case 'observation':\r\n        shape = ['[(', ')]'];\r\n        break;\r\n      case 'logical_inference':\r\n        shape = ['[', ']'];\r\n        break;\r\n      case 'assumption':\r\n        shape = ['{', '}'];\r\n        break;\r\n      default:\r\n        shape = ['[', ']'];\r\n    }\r\n\r\n    mermaid += `  ${principleId}${shape[0]}${label}${shape[1]}\\n`;\r\n\r\n    if (principle.dependsOn) {\r\n      for (const depId of principle.dependsOn) {\r\n        const sanitizedDepId = sanitizeId(depId);\r\n        mermaid += `  ${sanitizedDepId} --> ${principleId}\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  mermaid += '\\n';\r\n\r\n  for (const step of thought.derivationSteps) {\r\n    const stepId = `Step${step.stepNumber}`;\r\n    const principleId = sanitizeId(step.principle);\r\n    const label = includeLabels\r\n      ? `Step ${step.stepNumber}: ${step.inference.substring(0, 50)}...`\r\n      : stepId;\r\n\r\n    mermaid += `  ${stepId}[\"${label}\"]\\n`;\r\n    mermaid += `  ${principleId} -.->|applies| ${stepId}\\n`;\r\n\r\n    if (includeMetrics && step.confidence !== undefined) {\r\n      mermaid += `  ${stepId} -.->|conf: ${step.confidence.toFixed(2)}| ${stepId}\\n`;\r\n    }\r\n  }\r\n\r\n  mermaid += '\\n';\r\n\r\n  const conclusionLabel = includeLabels\r\n    ? `Conclusion: ${thought.conclusion.statement.substring(0, 50)}...`\r\n    : 'Conclusion';\r\n  mermaid += `  C[\"${conclusionLabel}\"]\\n`;\r\n\r\n  for (const stepNum of thought.conclusion.derivationChain) {\r\n    mermaid += `  Step${stepNum} --> C\\n`;\r\n  }\r\n\r\n  if (includeMetrics) {\r\n    mermaid += `  C -.->|certainty: ${thought.conclusion.certainty.toFixed(2)}| C\\n`;\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n\r\n    const axiomColor = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    const definitionColor = colorScheme === 'pastel' ? '#f3e5f5' : '#ce93d8';\r\n    const observationColor = colorScheme === 'pastel' ? '#fff3e0' : '#ffd699';\r\n    const inferenceColor = colorScheme === 'pastel' ? '#e8f5e9' : '#a5d6a7';\r\n    const assumptionColor = colorScheme === 'pastel' ? '#ffebee' : '#ef9a9a';\r\n\r\n    for (const principle of thought.principles) {\r\n      const principleId = sanitizeId(principle.id);\r\n      let color = axiomColor;\r\n      switch (principle.type) {\r\n        case 'axiom': color = axiomColor; break;\r\n        case 'definition': color = definitionColor; break;\r\n        case 'observation': color = observationColor; break;\r\n        case 'logical_inference': color = inferenceColor; break;\r\n        case 'assumption': color = assumptionColor; break;\r\n      }\r\n      mermaid += `  style ${principleId} fill:${color}\\n`;\r\n    }\r\n\r\n    const conclusionColor = colorScheme === 'pastel' ? '#c8e6c9' : '#66bb6a';\r\n    mermaid += `  style C fill:${conclusionColor}\\n`;\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction firstPrinciplesToDOT(\r\n  thought: FirstPrinciplesThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph FirstPrinciples {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  dot += `  Q [label=\"Question:\\\\n${thought.question}\", shape=ellipse, style=bold];\\n\\n`;\r\n\r\n  for (const principle of thought.principles) {\r\n    const principleId = sanitizeId(principle.id);\r\n    const label = includeLabels\r\n      ? `${principle.type.toUpperCase()}:\\\\n${principle.statement.substring(0, 60)}...`\r\n      : principleId;\r\n\r\n    let shape = 'box';\r\n    switch (principle.type) {\r\n      case 'axiom': shape = 'ellipse'; break;\r\n      case 'definition': shape = 'box'; break;\r\n      case 'observation': shape = 'cylinder'; break;\r\n      case 'logical_inference': shape = 'box'; break;\r\n      case 'assumption': shape = 'diamond'; break;\r\n    }\r\n\r\n    const confidenceLabel = includeMetrics && principle.confidence\r\n      ? `\\\\nconf: ${principle.confidence.toFixed(2)}`\r\n      : '';\r\n    dot += `  ${principleId} [label=\"${label}${confidenceLabel}\", shape=${shape}];\\n`;\r\n\r\n    if (principle.dependsOn) {\r\n      for (const depId of principle.dependsOn) {\r\n        const sanitizedDepId = sanitizeId(depId);\r\n        dot += `  ${sanitizedDepId} -> ${principleId};\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  dot += '\\n';\r\n\r\n  for (const step of thought.derivationSteps) {\r\n    const stepId = `Step${step.stepNumber}`;\r\n    const principleId = sanitizeId(step.principle);\r\n    const label = includeLabels\r\n      ? `Step ${step.stepNumber}:\\\\n${step.inference.substring(0, 60)}...`\r\n      : stepId;\r\n\r\n    const confidenceLabel = includeMetrics\r\n      ? `\\\\nconf: ${step.confidence.toFixed(2)}`\r\n      : '';\r\n    dot += `  ${stepId} [label=\"${label}${confidenceLabel}\"];\\n`;\r\n    dot += `  ${principleId} -> ${stepId} [style=dashed, label=\"applies\"];\\n`;\r\n  }\r\n\r\n  dot += '\\n';\r\n\r\n  const conclusionLabel = includeLabels\r\n    ? `Conclusion:\\\\n${thought.conclusion.statement.substring(0, 60)}...`\r\n    : 'Conclusion';\r\n  const certaintyLabel = includeMetrics\r\n    ? `\\\\ncertainty: ${thought.conclusion.certainty.toFixed(2)}`\r\n    : '';\r\n  dot += `  C [label=\"${conclusionLabel}${certaintyLabel}\", shape=doubleoctagon, style=bold];\\n`;\r\n\r\n  for (const stepNum of thought.conclusion.derivationChain) {\r\n    dot += `  Step${stepNum} -> C;\\n`;\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction firstPrinciplesToASCII(thought: FirstPrinciplesThought): string {\r\n  let ascii = 'First-Principles Derivation:\\n';\r\n  ascii += '============================\\n\\n';\r\n\r\n  ascii += `Question: ${thought.question}\\n\\n`;\r\n\r\n  ascii += 'Foundational Principles:\\n';\r\n  ascii += '------------------------\\n';\r\n  for (const principle of thought.principles) {\r\n    ascii += `[${principle.id}] ${principle.type.toUpperCase()}\\n`;\r\n    ascii += `  Statement: ${principle.statement}\\n`;\r\n    ascii += `  Justification: ${principle.justification}\\n`;\r\n    if (principle.dependsOn && principle.dependsOn.length > 0) {\r\n      ascii += `  Depends on: ${principle.dependsOn.join(', ')}\\n`;\r\n    }\r\n    if (principle.confidence !== undefined) {\r\n      ascii += `  Confidence: ${principle.confidence.toFixed(2)}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  ascii += 'Derivation Chain:\\n';\r\n  ascii += '----------------\\n';\r\n  for (const step of thought.derivationSteps) {\r\n    ascii += `Step ${step.stepNumber} (using principle: ${step.principle})\\n`;\r\n    ascii += `  Inference: ${step.inference}\\n`;\r\n    if (step.logicalForm) {\r\n      ascii += `  Logical form: ${step.logicalForm}\\n`;\r\n    }\r\n    ascii += `  Confidence: ${step.confidence.toFixed(2)}\\n`;\r\n    ascii += '\\n';\r\n  }\r\n\r\n  ascii += 'Conclusion:\\n';\r\n  ascii += '----------\\n';\r\n  ascii += `${thought.conclusion.statement}\\n`;\r\n  ascii += `Derivation chain: Steps [${thought.conclusion.derivationChain.join(', ')}]\\n`;\r\n  ascii += `Certainty: ${thought.conclusion.certainty.toFixed(2)}\\n`;\r\n\r\n  if (thought.conclusion.limitations && thought.conclusion.limitations.length > 0) {\r\n    ascii += '\\nLimitations:\\n';\r\n    for (const limitation of thought.conclusion.limitations) {\r\n      ascii += `  - ${limitation}\\n`;\r\n    }\r\n  }\r\n\r\n  if (thought.alternativeInterpretations && thought.alternativeInterpretations.length > 0) {\r\n    ascii += '\\nAlternative Interpretations:\\n';\r\n    for (const alt of thought.alternativeInterpretations) {\r\n      ascii += `  - ${alt}\\n`;\r\n    }\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export first-principles derivation chain to native SVG format\r\n */\r\nfunction firstPrinciplesToSVG(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n\r\n  // Position principles at the top\r\n  const principleY = 100;\r\n  const principleSpacing = Math.min(180, svgWidth / (thought.principles.length + 1));\r\n  const principleStartX = (svgWidth - (thought.principles.length - 1) * principleSpacing) / 2;\r\n  thought.principles.forEach((p, index) => {\r\n    positions.set(p.id, {\r\n      id: p.id,\r\n      label: includeLabels ? `${p.type}: ${p.statement.substring(0, 30)}...` : p.id,\r\n      x: principleStartX + index * principleSpacing,\r\n      y: principleY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: p.type,\r\n    });\r\n  });\r\n\r\n  // Add derivation steps\r\n  const stepY = 250;\r\n  thought.derivationSteps.forEach((step, index) => {\r\n    const stepId = `Step${step.stepNumber}`;\r\n    positions.set(stepId, {\r\n      id: stepId,\r\n      label: includeLabels ? `Step ${step.stepNumber}` : stepId,\r\n      x: 150 + index * 200,\r\n      y: stepY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'step',\r\n    });\r\n  });\r\n\r\n  // Add conclusion\r\n  positions.set('conclusion', {\r\n    id: 'conclusion',\r\n    label: includeLabels ? `Conclusion: ${thought.conclusion.statement.substring(0, 30)}...` : 'Conclusion',\r\n    x: svgWidth / 2,\r\n    y: stepY + 150,\r\n    width: nodeWidth,\r\n    height: nodeHeight,\r\n    type: 'conclusion',\r\n  });\r\n\r\n  const actualHeight = calculateSVGHeight(positions);\r\n\r\n  let svg = generateSVGHeader(svgWidth, actualHeight, 'First Principles Derivation');\r\n\r\n  // Render edges\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n\r\n  // Edges from principles to steps\r\n  for (const step of thought.derivationSteps) {\r\n    const principlePos = positions.get(step.principle);\r\n    const stepPos = positions.get(`Step${step.stepNumber}`);\r\n    if (principlePos && stepPos) {\r\n      svg += renderEdge(principlePos, stepPos, { style: 'dashed', label: 'applies' });\r\n    }\r\n  }\r\n\r\n  // Edges from steps to conclusion\r\n  const conclusionPos = positions.get('conclusion')!;\r\n  for (const stepNum of thought.conclusion.derivationChain) {\r\n    const stepPos = positions.get(`Step${stepNum}`);\r\n    if (stepPos) {\r\n      svg += renderEdge(stepPos, conclusionPos);\r\n    }\r\n  }\r\n\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  const axiomColors = getNodeColor('primary', colorScheme);\r\n  const stepColors = getNodeColor('neutral', colorScheme);\r\n  const conclusionColors = getNodeColor('success', colorScheme);\r\n\r\n  for (const [id, pos] of positions) {\r\n    if (id === 'conclusion') {\r\n      svg += renderStadiumNode(pos, conclusionColors);\r\n    } else if (id.startsWith('Step')) {\r\n      svg += renderRectNode(pos, stepColors);\r\n    } else {\r\n      svg += renderEllipseNode(pos, axiomColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Principles', value: thought.principles.length },\r\n      { label: 'Steps', value: thought.derivationSteps.length },\r\n      { label: 'Certainty', value: thought.conclusion.certainty.toFixed(2) },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, actualHeight - 110, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Principle', color: axiomColors, shape: 'ellipse' as const },\r\n    { label: 'Derivation Step', color: stepColors },\r\n    { label: 'Conclusion', color: conclusionColors, shape: 'stadium' as const },\r\n  ];\r\n  svg += renderLegend(20, actualHeight - 100, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export first-principles derivation chain to GraphML format\r\n */\r\nfunction firstPrinciplesToGraphML(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeCount = 0;\r\n\r\n  // Add question node\r\n  nodes.push({\r\n    id: 'question',\r\n    label: includeLabels ? `Question: ${thought.question}` : 'Question',\r\n    type: 'question',\r\n  });\r\n\r\n  // Add principle nodes\r\n  for (const principle of thought.principles) {\r\n    const principleId = sanitizeId(principle.id);\r\n    nodes.push({\r\n      id: principleId,\r\n      label: includeLabels\r\n        ? `${principle.type.toUpperCase()}: ${principle.statement.substring(0, 60)}...`\r\n        : principleId,\r\n      type: principle.type,\r\n      metadata: {\r\n        justification: principle.justification,\r\n        confidence: principle.confidence,\r\n      },\r\n    });\r\n\r\n    // Add edges from dependencies\r\n    if (principle.dependsOn) {\r\n      for (const depId of principle.dependsOn) {\r\n        const sanitizedDepId = sanitizeId(depId);\r\n        edges.push({\r\n          id: `e${edgeCount++}`,\r\n          source: sanitizedDepId,\r\n          target: principleId,\r\n          label: 'depends on',\r\n          directed: true,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add derivation step nodes\r\n  for (const step of thought.derivationSteps) {\r\n    const stepId = `Step${step.stepNumber}`;\r\n    nodes.push({\r\n      id: stepId,\r\n      label: includeLabels\r\n        ? `Step ${step.stepNumber}: ${step.inference.substring(0, 60)}...`\r\n        : stepId,\r\n      type: 'derivation_step',\r\n      metadata: {\r\n        logicalForm: step.logicalForm,\r\n        confidence: step.confidence,\r\n      },\r\n    });\r\n\r\n    // Edge from principle to step\r\n    const principleId = sanitizeId(step.principle);\r\n    edges.push({\r\n      id: `e${edgeCount++}`,\r\n      source: principleId,\r\n      target: stepId,\r\n      label: 'applies',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  // Add conclusion node\r\n  nodes.push({\r\n    id: 'conclusion',\r\n    label: includeLabels\r\n      ? `Conclusion: ${thought.conclusion.statement.substring(0, 60)}...`\r\n      : 'Conclusion',\r\n    type: 'conclusion',\r\n    metadata: {\r\n      certainty: thought.conclusion.certainty,\r\n      limitations: thought.conclusion.limitations,\r\n    },\r\n  });\r\n\r\n  // Edges from derivation steps to conclusion\r\n  for (const stepNum of thought.conclusion.derivationChain) {\r\n    edges.push({\r\n      id: `e${edgeCount++}`,\r\n      source: `Step${stepNum}`,\r\n      target: 'conclusion',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'First Principles Derivation',\r\n    directed: true,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export first-principles derivation chain to TikZ format\r\n */\r\nfunction firstPrinciplesToTikZ(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, colorScheme = 'default' } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n\r\n  // Position principles at the top (stadium shape for axioms/principles)\r\n  const principleCount = thought.principles.length;\r\n  thought.principles.forEach((principle, index) => {\r\n    const principleId = sanitizeId(principle.id);\r\n    nodes.push({\r\n      id: principleId,\r\n      label: includeLabels\r\n        ? `${principle.type}: ${principle.statement.substring(0, 25)}...`\r\n        : principleId,\r\n      x: index * 3,\r\n      y: 0,\r\n      type: principle.type === 'axiom' ? 'primary' : 'secondary',\r\n      shape: 'stadium',\r\n    });\r\n\r\n    // Add edges for dependencies between principles\r\n    if (principle.dependsOn) {\r\n      for (const depId of principle.dependsOn) {\r\n        const sanitizedDepId = sanitizeId(depId);\r\n        edges.push({\r\n          source: sanitizedDepId,\r\n          target: principleId,\r\n          directed: true,\r\n          style: 'dashed',\r\n        });\r\n      }\r\n    }\r\n  });\r\n\r\n  // Position derivation steps in the middle layer\r\n  const stepY = -2;\r\n  thought.derivationSteps.forEach((step, index) => {\r\n    const stepId = `Step${step.stepNumber}`;\r\n    const principleId = sanitizeId(step.principle);\r\n\r\n    nodes.push({\r\n      id: stepId,\r\n      label: includeLabels ? `Step ${step.stepNumber}` : stepId,\r\n      x: index * 3,\r\n      y: stepY,\r\n      type: 'neutral',\r\n      shape: 'rectangle',\r\n    });\r\n\r\n    // Edge from principle to step\r\n    edges.push({\r\n      source: principleId,\r\n      target: stepId,\r\n      label: 'applies',\r\n      directed: true,\r\n      style: 'dashed',\r\n    });\r\n  });\r\n\r\n  // Position conclusion at the bottom\r\n  const conclusionX = (principleCount - 1) * 3 / 2; // Center it\r\n  nodes.push({\r\n    id: 'conclusion',\r\n    label: includeLabels ? 'Conclusion' : 'C',\r\n    x: conclusionX,\r\n    y: -4,\r\n    type: 'success',\r\n    shape: 'stadium',\r\n  });\r\n\r\n  // Edges from derivation steps to conclusion\r\n  for (const stepNum of thought.conclusion.derivationChain) {\r\n    edges.push({\r\n      source: `Step${stepNum}`,\r\n      target: 'conclusion',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'First Principles Derivation',\r\n    colorScheme,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export first-principles derivation to HTML format\r\n */\r\nfunction firstPrinciplesToHTML(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'First Principles Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Question\r\n  html += renderSection('Question', `<p class=\"text-primary\"><strong>${escapeHTML(thought.question)}</strong></p>`, '');\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Principles', thought.principles.length, 'primary');\r\n    html += renderMetricCard('Derivation Steps', thought.derivationSteps.length, 'info');\r\n    html += renderMetricCard('Certainty', (thought.conclusion.certainty * 100).toFixed(0) + '%', 'success');\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Principles table\r\n  const principleRows = thought.principles.map(p => {\r\n    const typeBadge = renderBadge(p.type, p.type === 'axiom' ? 'primary' : p.type === 'observation' ? 'info' : 'secondary');\r\n    return [\r\n      p.id,\r\n      typeBadge,\r\n      p.statement,\r\n      p.confidence !== undefined ? (p.confidence * 100).toFixed(0) + '%' : 'N/A',\r\n    ];\r\n  });\r\n  html += renderSection('First Principles', renderTable(\r\n    ['ID', 'Type', 'Statement', 'Confidence'],\r\n    principleRows.map(row => row.map(cell => typeof cell === 'string' && cell.startsWith('<') ? cell : escapeHTML(String(cell))))\r\n  ), '');\r\n\r\n  // Derivation steps\r\n  const stepRows = thought.derivationSteps.map(s => [\r\n    s.stepNumber.toString(),\r\n    s.principle,\r\n    s.inference,\r\n    s.logicalForm || '-',\r\n  ]);\r\n  html += renderSection('Derivation Chain', renderTable(\r\n    ['Step', 'Principle', 'Inference', 'Logical Form'],\r\n    stepRows\r\n  ), '');\r\n\r\n  // Conclusion\r\n  html += renderSection('Conclusion', `\r\n    <div class=\"card\">\r\n      <div class=\"card-header\">${escapeHTML(thought.conclusion.statement)}</div>\r\n      <p><strong>Certainty:</strong> ${(thought.conclusion.certainty * 100).toFixed(0)}%</p>\r\n      <p><strong>Derivation Chain:</strong> Steps ${thought.conclusion.derivationChain.join('  ')}</p>\r\n      ${thought.conclusion.limitations && thought.conclusion.limitations.length > 0 ? `\r\n        <p><strong>Limitations:</strong></p>\r\n        ${renderList(thought.conclusion.limitations)}\r\n      ` : ''}\r\n    </div>\r\n  `, '');\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export first-principles derivation to Modelica format\r\n */\r\nfunction firstPrinciplesToModelica(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n  const packageName = 'FirstPrinciplesDerivation';\r\n\r\n  let modelica = generateModelicaPackageHeader(\r\n    packageName,\r\n    `First principles derivation: ${thought.question}`\r\n  );\r\n\r\n  // Create records for each fundamental principle\r\n  modelica += '  // Fundamental Principles\\n';\r\n  for (const principle of thought.principles) {\r\n    const fields: Array<{ name: string; type: string; value: string; description?: string }> = [\r\n      { name: 'id', type: 'String', value: `\"${escapeModelicaString(principle.id)}\"` },\r\n      { name: 'principleType', type: 'String', value: `\"${escapeModelicaString(principle.type)}\"` },\r\n      { name: 'statement', type: 'String', value: `\"${escapeModelicaString(principle.statement)}\"` },\r\n      { name: 'justification', type: 'String', value: `\"${escapeModelicaString(principle.justification)}\"` },\r\n    ];\r\n\r\n    if (includeMetrics && principle.confidence !== undefined) {\r\n      fields.push({\r\n        name: 'confidence',\r\n        type: 'Real',\r\n        value: principle.confidence.toFixed(3),\r\n        description: 'Confidence level in this principle',\r\n      });\r\n    }\r\n\r\n    modelica += generateModelicaRecord(\r\n      sanitizeModelicaId(principle.id),\r\n      `${principle.type}: ${principle.statement.substring(0, 60)}`,\r\n      fields\r\n    );\r\n  }\r\n\r\n  // Create model for derivation process\r\n  modelica += '  // Derivation Process\\n';\r\n  modelica += '  model Derivation\\n';\r\n  modelica += `    \"Derivation chain from principles to conclusion\"\\n`;\r\n  modelica += '\\n';\r\n\r\n  // Principle instantiations\r\n  modelica += '    // Principle instances\\n';\r\n  for (const principle of thought.principles) {\r\n    const safeId = sanitizeModelicaId(principle.id);\r\n    modelica += `    ${safeId} ${safeId}_instance;\\n`;\r\n  }\r\n  modelica += '\\n';\r\n\r\n  // Derivation steps as parameters\r\n  modelica += '    // Derivation steps\\n';\r\n  for (const step of thought.derivationSteps) {\r\n    const stepId = `step_${step.stepNumber}`;\r\n    modelica += `    parameter String ${stepId}_principle = \"${escapeModelicaString(step.principle)}\";\\n`;\r\n    modelica += `    parameter String ${stepId}_inference = \"${escapeModelicaString(step.inference)}\";\\n`;\r\n    if (step.logicalForm) {\r\n      modelica += `    parameter String ${stepId}_logicalForm = \"${escapeModelicaString(step.logicalForm)}\";\\n`;\r\n    }\r\n    if (includeMetrics) {\r\n      modelica += `    parameter Real ${stepId}_confidence = ${step.confidence.toFixed(3)};\\n`;\r\n    }\r\n  }\r\n  modelica += '\\n';\r\n\r\n  // Conclusion\r\n  modelica += '    // Conclusion\\n';\r\n  modelica += `    parameter String conclusion = \"${escapeModelicaString(thought.conclusion.statement)}\";\\n`;\r\n  if (includeMetrics) {\r\n    modelica += `    parameter Real certainty = ${thought.conclusion.certainty.toFixed(3)};\\n`;\r\n  }\r\n  modelica += `    parameter Integer derivationChainLength = ${thought.conclusion.derivationChain.length};\\n`;\r\n  modelica += '\\n';\r\n\r\n  modelica += '    annotation(\\n';\r\n  modelica += '      Documentation(info=\"<html>\\n';\r\n  modelica += `        <h3>Question</h3>\\n`;\r\n  modelica += `        <p>${escapeModelicaString(thought.question)}</p>\\n`;\r\n  modelica += `        <h3>Principles</h3>\\n`;\r\n  modelica += `        <p>Count: ${thought.principles.length}</p>\\n`;\r\n  modelica += `        <h3>Derivation Steps</h3>\\n`;\r\n  modelica += `        <p>Count: ${thought.derivationSteps.length}</p>\\n`;\r\n  modelica += `        <h3>Conclusion</h3>\\n`;\r\n  modelica += `        <p>${escapeModelicaString(thought.conclusion.statement)}</p>\\n`;\r\n  if (includeMetrics) {\r\n    modelica += `        <p>Certainty: ${(thought.conclusion.certainty * 100).toFixed(1)}%</p>\\n`;\r\n  }\r\n  modelica += '      </html>\")\\n';\r\n  modelica += '    );\\n';\r\n  modelica += '  end Derivation;\\n';\r\n  modelica += '\\n';\r\n\r\n  modelica += generateModelicaPackageFooter(packageName, { includeAnnotations: true, version: '7.1.0' });\r\n\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export first-principles derivation to UML format\r\n */\r\nfunction firstPrinciplesToUML(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Add principles as classes or rectangles\r\n  for (const principle of thought.principles) {\r\n    const attributes: string[] = [\r\n      `type: ${principle.type}`,\r\n      `statement: \"${principle.statement.substring(0, 40)}...\"`,\r\n      `justification: \"${principle.justification.substring(0, 40)}...\"`,\r\n    ];\r\n\r\n    if (includeMetrics && principle.confidence !== undefined) {\r\n      attributes.push(`confidence: ${principle.confidence.toFixed(2)}`);\r\n    }\r\n\r\n    nodes.push({\r\n      id: sanitizeUmlId(principle.id),\r\n      label: includeLabels ? principle.id : sanitizeUmlId(principle.id),\r\n      shape: principle.type === 'axiom' ? 'class' : 'rectangle',\r\n      stereotype: principle.type,\r\n      attributes: attributes,\r\n    });\r\n\r\n    // Add dependency edges between principles\r\n    if (principle.dependsOn && principle.dependsOn.length > 0) {\r\n      for (const depId of principle.dependsOn) {\r\n        edges.push({\r\n          source: sanitizeUmlId(depId),\r\n          target: sanitizeUmlId(principle.id),\r\n          type: 'dependency',\r\n          label: 'depends on',\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add derivation steps as components\r\n  for (const step of thought.derivationSteps) {\r\n    const stepId = `Step${step.stepNumber}`;\r\n    const attributes: string[] = [\r\n      `inference: \"${step.inference.substring(0, 40)}...\"`,\r\n    ];\r\n\r\n    if (step.logicalForm) {\r\n      attributes.push(`logicalForm: \"${step.logicalForm.substring(0, 30)}...\"`);\r\n    }\r\n\r\n    if (includeMetrics) {\r\n      attributes.push(`confidence: ${step.confidence.toFixed(2)}`);\r\n    }\r\n\r\n    nodes.push({\r\n      id: stepId,\r\n      label: includeLabels ? `Step ${step.stepNumber}` : stepId,\r\n      shape: 'component',\r\n      attributes: attributes,\r\n    });\r\n\r\n    // Edge from principle to step\r\n    edges.push({\r\n      source: sanitizeUmlId(step.principle),\r\n      target: stepId,\r\n      type: 'dashed',\r\n      label: 'applies',\r\n    });\r\n  }\r\n\r\n  // Add conclusion as a class\r\n  const conclusionAttributes: string[] = [\r\n    `statement: \"${thought.conclusion.statement.substring(0, 40)}...\"`,\r\n    `derivationChain: [${thought.conclusion.derivationChain.join(', ')}]`,\r\n  ];\r\n\r\n  if (includeMetrics) {\r\n    conclusionAttributes.push(`certainty: ${thought.conclusion.certainty.toFixed(2)}`);\r\n  }\r\n\r\n  if (thought.conclusion.limitations && thought.conclusion.limitations.length > 0) {\r\n    conclusionAttributes.push(`limitations: ${thought.conclusion.limitations.length} items`);\r\n  }\r\n\r\n  nodes.push({\r\n    id: 'Conclusion',\r\n    label: 'Conclusion',\r\n    shape: 'class',\r\n    stereotype: 'conclusion',\r\n    attributes: conclusionAttributes,\r\n  });\r\n\r\n  // Edges from derivation steps to conclusion\r\n  for (const stepNum of thought.conclusion.derivationChain) {\r\n    edges.push({\r\n      source: `Step${stepNum}`,\r\n      target: 'Conclusion',\r\n      type: 'arrow',\r\n    });\r\n  }\r\n\r\n  // Generate the UML diagram\r\n  let uml = generateUmlHeader({\r\n    title: 'First Principles Derivation',\r\n    direction: 'top to bottom',\r\n  });\r\n\r\n  uml += `' Question: ${escapeUml(thought.question)}\\n\\n`;\r\n\r\n  // Render nodes\r\n  uml += \"' Principles\\n\";\r\n  for (const node of nodes.filter(n => !n.id.startsWith('Step') && n.id !== 'Conclusion')) {\r\n    uml += renderUmlNode(node) + '\\n';\r\n  }\r\n\r\n  uml += \"\\n' Derivation Steps\\n\";\r\n  for (const node of nodes.filter(n => n.id.startsWith('Step'))) {\r\n    uml += renderUmlNode(node) + '\\n';\r\n  }\r\n\r\n  uml += \"\\n' Conclusion\\n\";\r\n  const conclusionNode = nodes.find(n => n.id === 'Conclusion');\r\n  if (conclusionNode) {\r\n    uml += renderUmlNode(conclusionNode) + '\\n';\r\n  }\r\n\r\n  // Render edges\r\n  uml += \"\\n' Relationships\\n\";\r\n  for (const edge of edges) {\r\n    uml += renderUmlEdge(edge) + '\\n';\r\n  }\r\n\r\n  uml += '\\n' + generateUmlFooter();\r\n\r\n  return uml;\r\n}\r\n\r\n/**\r\n * Export first-principles derivation to JSON format\r\n */\r\nfunction firstPrinciplesToJSON(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true, includeLabels = true } = options;\r\n\r\n  const graph = createJsonGraph(\r\n    'First Principles Derivation',\r\n    'first-principles',\r\n    { includeMetrics, includeLayout: true, includeLegend: true }\r\n  );\r\n\r\n  // Set hierarchical layout\r\n  if (graph.layout) {\r\n    graph.layout.type = 'hierarchical';\r\n    graph.layout.direction = 'TB';\r\n  }\r\n\r\n  // Add question metadata\r\n  graph.metadata.question = thought.question;\r\n\r\n  // Add principle nodes at the top level\r\n  const principleSpacing = 150;\r\n  const principleStartX = -((thought.principles.length - 1) * principleSpacing) / 2;\r\n\r\n  for (let i = 0; i < thought.principles.length; i++) {\r\n    const principle = thought.principles[i];\r\n    const principleId = sanitizeId(principle.id);\r\n\r\n    // Determine color based on type\r\n    let color = '#e0e0e0';\r\n    switch (principle.type) {\r\n      case 'axiom': color = '#a8d5ff'; break;\r\n      case 'definition': color = '#ce93d8'; break;\r\n      case 'observation': color = '#ffd699'; break;\r\n      case 'logical_inference': color = '#a5d6a7'; break;\r\n      case 'assumption': color = '#ef9a9a'; break;\r\n    }\r\n\r\n    addNode(graph, {\r\n      id: principleId,\r\n      label: includeLabels ? `${principle.type}: ${principle.statement.substring(0, 30)}...` : principleId,\r\n      type: principle.type,\r\n      x: principleStartX + i * principleSpacing,\r\n      y: 0,\r\n      width: 140,\r\n      height: 60,\r\n      color: color,\r\n      shape: principle.type === 'axiom' ? 'ellipse' : 'rectangle',\r\n      metadata: {\r\n        statement: principle.statement,\r\n        justification: principle.justification,\r\n        confidence: principle.confidence,\r\n        dependsOn: principle.dependsOn,\r\n      },\r\n    });\r\n\r\n    // Add dependency edges between principles\r\n    if (principle.dependsOn && principle.dependsOn.length > 0) {\r\n      for (const depId of principle.dependsOn) {\r\n        addEdge(graph, {\r\n          id: `edge_${sanitizeId(depId)}_${principleId}`,\r\n          source: sanitizeId(depId),\r\n          target: principleId,\r\n          label: 'depends on',\r\n          directed: true,\r\n          style: 'dashed',\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add derivation step nodes in the middle\r\n  const stepY = 150;\r\n  const stepSpacing = 200;\r\n  const stepStartX = -((thought.derivationSteps.length - 1) * stepSpacing) / 2;\r\n\r\n  for (let i = 0; i < thought.derivationSteps.length; i++) {\r\n    const step = thought.derivationSteps[i];\r\n    const stepId = `step_${step.stepNumber}`;\r\n\r\n    addNode(graph, {\r\n      id: stepId,\r\n      label: includeLabels ? `Step ${step.stepNumber}: ${step.inference.substring(0, 30)}...` : `Step ${step.stepNumber}`,\r\n      type: 'derivation_step',\r\n      x: stepStartX + i * stepSpacing,\r\n      y: stepY,\r\n      width: 180,\r\n      height: 50,\r\n      color: '#81c784',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        inference: step.inference,\r\n        logicalForm: step.logicalForm,\r\n        confidence: step.confidence,\r\n        principle: step.principle,\r\n      },\r\n    });\r\n\r\n    // Edge from principle to step\r\n    addEdge(graph, {\r\n      id: `edge_${sanitizeId(step.principle)}_${stepId}`,\r\n      source: sanitizeId(step.principle),\r\n      target: stepId,\r\n      label: 'applies',\r\n      directed: true,\r\n      style: 'dashed',\r\n    });\r\n  }\r\n\r\n  // Add conclusion node at the bottom\r\n  addNode(graph, {\r\n    id: 'conclusion',\r\n    label: includeLabels ? `Conclusion: ${thought.conclusion.statement.substring(0, 40)}...` : 'Conclusion',\r\n    type: 'conclusion',\r\n    x: 0,\r\n    y: stepY + 150,\r\n    width: 200,\r\n    height: 60,\r\n    color: '#66bb6a',\r\n    shape: 'stadium',\r\n    metadata: {\r\n      statement: thought.conclusion.statement,\r\n      certainty: thought.conclusion.certainty,\r\n      derivationChain: thought.conclusion.derivationChain,\r\n      limitations: thought.conclusion.limitations,\r\n    },\r\n  });\r\n\r\n  // Edges from derivation steps to conclusion\r\n  for (const stepNum of thought.conclusion.derivationChain) {\r\n    addEdge(graph, {\r\n      id: `edge_step${stepNum}_conclusion`,\r\n      source: `step_${stepNum}`,\r\n      target: 'conclusion',\r\n      directed: true,\r\n      style: 'solid',\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics && graph.metrics) {\r\n    addMetric(graph, 'principleCount', thought.principles.length);\r\n    addMetric(graph, 'derivationStepCount', thought.derivationSteps.length);\r\n    addMetric(graph, 'certainty', thought.conclusion.certainty);\r\n    addMetric(graph, 'axiomCount', thought.principles.filter(p => p.type === 'axiom').length);\r\n    addMetric(graph, 'definitionCount', thought.principles.filter(p => p.type === 'definition').length);\r\n    addMetric(graph, 'observationCount', thought.principles.filter(p => p.type === 'observation').length);\r\n  }\r\n\r\n  // Add legend\r\n  if (graph.legend) {\r\n    addLegendItem(graph, 'Axiom', '#a8d5ff', 'ellipse');\r\n    addLegendItem(graph, 'Definition', '#ce93d8', 'rectangle');\r\n    addLegendItem(graph, 'Observation', '#ffd699', 'rectangle');\r\n    addLegendItem(graph, 'Logical Inference', '#a5d6a7', 'rectangle');\r\n    addLegendItem(graph, 'Assumption', '#ef9a9a', 'rectangle');\r\n    addLegendItem(graph, 'Derivation Step', '#81c784', 'rectangle');\r\n    addLegendItem(graph, 'Conclusion', '#66bb6a', 'stadium');\r\n  }\r\n\r\n  return serializeGraph(graph, { prettyPrint: true, indent: 2 });\r\n}\r\n\r\n/**\r\n * Export first-principles derivation to Markdown format\r\n */\r\nfunction firstPrinciplesToMarkdown(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Question\r\n  parts.push(section('Question', thought.question));\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    parts.push(section('Metrics', keyValueSection({\r\n      'Principles': thought.principles.length,\r\n      'Derivation Steps': thought.derivationSteps.length,\r\n      'Certainty': (thought.conclusion.certainty * 100).toFixed(0) + '%',\r\n      'Axioms': thought.principles.filter(p => p.type === 'axiom').length,\r\n      'Definitions': thought.principles.filter(p => p.type === 'definition').length,\r\n      'Observations': thought.principles.filter(p => p.type === 'observation').length,\r\n    })));\r\n  }\r\n\r\n  // Foundational principles\r\n  const principleRows = thought.principles.map(p => [\r\n    p.id,\r\n    p.type,\r\n    p.statement.substring(0, 60) + (p.statement.length > 60 ? '...' : ''),\r\n    p.dependsOn?.join(', ') || '-',\r\n    p.confidence !== undefined ? (p.confidence * 100).toFixed(0) + '%' : 'N/A',\r\n  ]);\r\n  parts.push(section('Foundational Principles', table(\r\n    ['ID', 'Type', 'Statement', 'Depends On', 'Confidence'],\r\n    principleRows\r\n  )));\r\n\r\n  // Derivation steps\r\n  const stepRows = thought.derivationSteps.map(s => [\r\n    s.stepNumber.toString(),\r\n    s.principle,\r\n    s.inference.substring(0, 60) + (s.inference.length > 60 ? '...' : ''),\r\n    s.logicalForm || '-',\r\n    (s.confidence * 100).toFixed(0) + '%',\r\n  ]);\r\n  parts.push(section('Derivation Chain', table(\r\n    ['Step', 'Principle', 'Inference', 'Logical Form', 'Confidence'],\r\n    stepRows\r\n  )));\r\n\r\n  // Conclusion\r\n  let conclusionContent = `**Statement:** ${thought.conclusion.statement}\\n\\n`;\r\n  conclusionContent += `**Certainty:** ${(thought.conclusion.certainty * 100).toFixed(0)}%\\n\\n`;\r\n  conclusionContent += `**Derivation Chain:** Steps ${thought.conclusion.derivationChain.join('  ')}\\n`;\r\n\r\n  if (thought.conclusion.limitations && thought.conclusion.limitations.length > 0) {\r\n    conclusionContent += `\\n**Limitations:**\\n${list(thought.conclusion.limitations)}`;\r\n  }\r\n  parts.push(section('Conclusion', conclusionContent));\r\n\r\n  // Alternative interpretations\r\n  if (thought.alternativeInterpretations && thought.alternativeInterpretations.length > 0) {\r\n    parts.push(section('Alternative Interpretations', list(thought.alternativeInterpretations)));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaid = firstPrinciplesToMermaid(thought, 'default', true, includeMetrics);\r\n    parts.push(section('Visualization', mermaidBlock(mermaid)));\r\n  }\r\n\r\n  return mdDocument('First Principles Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'first-principles',\r\n      principles: thought.principles.length,\r\n      certainty: thought.conclusion.certainty.toFixed(2),\r\n    },\r\n  });\r\n}\r\n","/**\n * MetaReasoning Visual Exporter (v7.0.3)\n * Phase 7 Sprint 2: Meta-reasoning export to Mermaid, DOT, ASCII\n * Phase 9: Added native SVG export support\n * Phase 9: Added GraphML and TikZ export support\n */\n\nimport type { MetaReasoningThought } from '../../../types/modes/metareasoning.js';\nimport type { VisualExportOptions } from '../types.js';\nimport { sanitizeId } from '../utils.js';\nimport {\n  generateSVGHeader,\n  generateSVGFooter,\n  renderRectNode,\n  renderEllipseNode,\n  renderStadiumNode,\n  renderEdge,\n  renderMetricsPanel,\n  renderLegend,\n  getNodeColor,\n  DEFAULT_SVG_OPTIONS,\n  type SVGNodePosition,\n} from '../utils/svg.js';\nimport {\n  generateGraphML,\n  type GraphMLNode,\n  type GraphMLEdge,\n  type GraphMLOptions,\n} from '../utils/graphml.js';\nimport {\n  generateTikZ,\n  type TikZNode,\n  type TikZEdge,\n  type TikZOptions,\n} from '../utils/tikz.js';\nimport {\n  generateHTMLHeader,\n  generateHTMLFooter,\n  escapeHTML,\n  renderMetricCard,\n  renderSection,\n  renderTable,\n  renderBadge,\n  renderProgressBar,\n} from '../utils/html.js';\nimport {\n  sanitizeModelicaId,\n  escapeModelicaString,\n} from '../utils/modelica.js';\nimport {\n  generateUmlDiagram,\n  type UmlNode,\n  type UmlEdge,\n} from '../utils/uml.js';\nimport {\n  createJsonGraph,\n  addNode,\n  addEdge,\n  addMetric,\n  serializeGraph,\n} from '../utils/json.js';\nimport {\n  section,\n  table,\n  list,\n  keyValueSection,\n  mermaidBlock,\n  document as mdDocument,\n  progressBar,\n} from '../utils/markdown.js';\n\n/**\n * Export meta-reasoning to visual format\n */\nexport function exportMetaReasoningVisualization(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\n\n  switch (format) {\n    case 'mermaid':\n      return metaReasoningToMermaid(thought, colorScheme, includeLabels, includeMetrics);\n    case 'dot':\n      return metaReasoningToDOT(thought, includeLabels, includeMetrics);\n    case 'ascii':\n      return metaReasoningToASCII(thought);\n    case 'svg':\n      return metaReasoningToSVG(thought, options);\n    case 'graphml':\n      return metaReasoningToGraphML(thought, options);\n    case 'tikz':\n      return metaReasoningToTikZ(thought, options);\n    case 'html':\n      return metaReasoningToHTML(thought, options);\n    case 'modelica':\n      return metaReasoningToModelica(thought, options);\n    case 'uml':\n      return metaReasoningToUML(thought, options);\n    case 'json':\n      return metaReasoningToJSON(thought, options);\n    case 'markdown':\n      return metaReasoningToMarkdown(thought, options);\n    default:\n      throw new Error(`Unsupported format: ${format}`);\n  }\n}\n\nfunction metaReasoningToMermaid(\n  thought: MetaReasoningThought,\n  colorScheme: string,\n  includeLabels: boolean,\n  includeMetrics: boolean\n): string {\n  let mermaid = 'graph TB\\n';\n\n  // Meta-reasoning central node\n  const metaId = sanitizeId('meta_reasoning');\n  mermaid += `  ${metaId}((\"Meta-Reasoning\"))\\n`;\n\n  // Current strategy\n  const currentId = sanitizeId('current_strategy');\n  const currentLabel = includeLabels ? thought.currentStrategy.approach : 'Current Strategy';\n  mermaid += `  ${currentId}[[\"${currentLabel}\"]]\\n`;\n  mermaid += `  ${metaId} ==> ${currentId}\\n`;\n\n  // Current mode\n  const modeId = sanitizeId('current_mode');\n  mermaid += `  ${modeId}([\"Mode: ${thought.currentStrategy.mode}\"])\\n`;\n  mermaid += `  ${currentId} --> ${modeId}\\n`;\n\n  // Strategy evaluation\n  const evalId = sanitizeId('evaluation');\n  mermaid += `  ${evalId}{{\"Effectiveness: ${(thought.strategyEvaluation.effectiveness * 100).toFixed(0)}%\"}}\\n`;\n  mermaid += `  ${currentId} --> ${evalId}\\n`;\n\n  // Issues (if any)\n  if (thought.strategyEvaluation.issues.length > 0) {\n    const issuesId = sanitizeId('issues');\n    mermaid += `  ${issuesId}>\"Issues: ${thought.strategyEvaluation.issues.length}\"]\\n`;\n    mermaid += `  ${evalId} --> ${issuesId}\\n`;\n  }\n\n  // Strengths (if any)\n  if (thought.strategyEvaluation.strengths.length > 0) {\n    const strengthsId = sanitizeId('strengths');\n    mermaid += `  ${strengthsId}>\"Strengths: ${thought.strategyEvaluation.strengths.length}\"]\\n`;\n    mermaid += `  ${evalId} --> ${strengthsId}\\n`;\n  }\n\n  // Alternative strategies\n  if (thought.alternativeStrategies.length > 0) {\n    const altsId = sanitizeId('alternatives');\n    mermaid += `  ${altsId}([\"Alternative Strategies\"])\\n`;\n    mermaid += `  ${metaId} --> ${altsId}\\n`;\n\n    thought.alternativeStrategies.forEach((alt, index) => {\n      const altId = sanitizeId(`alt_${index}`);\n      const altLabel = includeLabels\n        ? `${alt.mode}: ${(alt.recommendationScore * 100).toFixed(0)}%`\n        : `Alt ${index + 1}`;\n      mermaid += `  ${altId}[\"${altLabel}\"]\\n`;\n      mermaid += `  ${altsId} --> ${altId}\\n`;\n    });\n  }\n\n  // Recommendation\n  const recId = sanitizeId('recommendation');\n  const recLabel = `${thought.recommendation.action}${thought.recommendation.targetMode ? `  ${thought.recommendation.targetMode}` : ''}`;\n  mermaid += `  ${recId}[/\"${recLabel}\"/]\\n`;\n  mermaid += `  ${metaId} ==> ${recId}\\n`;\n\n  // Recommendation confidence\n  if (includeMetrics) {\n    const confId = sanitizeId('rec_confidence');\n    mermaid += `  ${confId}{{\"Confidence: ${(thought.recommendation.confidence * 100).toFixed(0)}%\"}}\\n`;\n    mermaid += `  ${recId} --> ${confId}\\n`;\n  }\n\n  // Quality metrics\n  if (includeMetrics) {\n    const qualityId = sanitizeId('quality');\n    const qualityLabel = `Quality: ${(thought.qualityMetrics.overallQuality * 100).toFixed(0)}%`;\n    mermaid += `  ${qualityId}{{\"${qualityLabel}\"}}\\n`;\n    mermaid += `  ${metaId} -.-> ${qualityId}\\n`;\n  }\n\n  // Resource allocation\n  const resourceId = sanitizeId('resources');\n  mermaid += `  ${resourceId}[(\"Complexity: ${thought.resourceAllocation.complexityLevel}\")]\\n`;\n  mermaid += `  ${metaId} -.-> ${resourceId}\\n`;\n\n  // Session context\n  const sessionId = sanitizeId('session');\n  mermaid += `  ${sessionId}>\"Thoughts: ${thought.sessionContext.totalThoughts}\"]\\n`;\n  mermaid += `  ${metaId} -.-> ${sessionId}\\n`;\n\n  // Color scheme\n  if (colorScheme !== 'monochrome') {\n    const colors = colorScheme === 'pastel'\n      ? { meta: '#f3e5f5', current: '#e3f2fd', rec: '#e8f5e9', alt: '#fff3e0' }\n      : { meta: '#DDA0DD', current: '#87CEEB', rec: '#90EE90', alt: '#FFD700' };\n\n    mermaid += `\\n  style ${metaId} fill:${colors.meta}\\n`;\n    mermaid += `  style ${currentId} fill:${colors.current}\\n`;\n    mermaid += `  style ${recId} fill:${colors.rec}\\n`;\n    if (thought.alternativeStrategies.length > 0) {\n      mermaid += `  style ${sanitizeId('alternatives')} fill:${colors.alt}\\n`;\n    }\n  }\n\n  return mermaid;\n}\n\nfunction metaReasoningToDOT(\n  thought: MetaReasoningThought,\n  includeLabels: boolean,\n  includeMetrics: boolean\n): string {\n  let dot = 'digraph MetaReasoning {\\n';\n  dot += '  rankdir=TB;\\n';\n  dot += '  node [shape=box, style=rounded];\\n\\n';\n\n  // Subgraph for current strategy\n  dot += '  subgraph cluster_current {\\n';\n  dot += '    label=\"Current Strategy\";\\n';\n  dot += '    style=filled;\\n';\n  dot += '    fillcolor=lightblue;\\n';\n\n  const currentId = sanitizeId('current_strategy');\n  const currentLabel = includeLabels\n    ? thought.currentStrategy.approach.slice(0, 30).replace(/\"/g, '\\\"')\n    : 'Current Strategy';\n  dot += `    ${currentId} [label=\"${currentLabel}\"];\\n`;\n\n  const modeId = sanitizeId('current_mode');\n  dot += `    ${modeId} [label=\"${thought.currentStrategy.mode}\", shape=ellipse];\\n`;\n  dot += `    ${currentId} -> ${modeId};\\n`;\n\n  // Evaluation metrics\n  if (includeMetrics) {\n    const evalId = sanitizeId('evaluation');\n    dot += `    ${evalId} [label=\"Eff: ${(thought.strategyEvaluation.effectiveness * 100).toFixed(0)}%\", shape=diamond];\\n`;\n    dot += `    ${currentId} -> ${evalId};\\n`;\n  }\n\n  dot += '  }\\n\\n';\n\n  // Subgraph for alternatives\n  if (thought.alternativeStrategies.length > 0) {\n    dot += '  subgraph cluster_alternatives {\\n';\n    dot += '    label=\"Alternatives\";\\n';\n    dot += '    style=filled;\\n';\n    dot += '    fillcolor=lightyellow;\\n';\n\n    thought.alternativeStrategies.forEach((alt, index) => {\n      const altId = sanitizeId(`alt_${index}`);\n      const altLabel = `${alt.mode}\\\\n${(alt.recommendationScore * 100).toFixed(0)}%`;\n      dot += `    ${altId} [label=\"${altLabel}\"];\\n`;\n    });\n\n    dot += '  }\\n\\n';\n  }\n\n  // Recommendation node\n  const recId = sanitizeId('recommendation');\n  const recLabel = `${thought.recommendation.action}${thought.recommendation.targetMode ? `\\\\n ${thought.recommendation.targetMode}` : ''}`;\n  dot += `  ${recId} [label=\"${recLabel}\", shape=hexagon, style=\"filled\", fillcolor=lightgreen];\\n`;\n\n  // Quality metrics\n  if (includeMetrics) {\n    const qualityId = sanitizeId('quality');\n    const qualityLabel = `Quality: ${(thought.qualityMetrics.overallQuality * 100).toFixed(0)}%`;\n    dot += `  ${qualityId} [label=\"${qualityLabel}\", shape=diamond];\\n`;\n  }\n\n  // Edges\n  dot += `  ${currentId} -> ${recId} [style=bold, penwidth=2];\\n`;\n\n  // Edges from alternatives to recommendation\n  thought.alternativeStrategies.forEach((_, index) => {\n    const altId = sanitizeId(`alt_${index}`);\n    dot += `  ${altId} -> ${recId} [style=dashed];\\n`;\n  });\n\n  dot += '}\\n';\n  return dot;\n}\n\nfunction metaReasoningToASCII(thought: MetaReasoningThought): string {\n  let ascii = 'Meta-Reasoning Analysis:\\n';\n  ascii += '========================\\n\\n';\n\n  // Current Strategy\n  ascii += 'CURRENT STRATEGY\\n';\n  ascii += '----------------\\n';\n  ascii += `Mode: ${thought.currentStrategy.mode}\\n`;\n  ascii += `Approach: ${thought.currentStrategy.approach}\\n`;\n  ascii += `Thoughts Spent: ${thought.currentStrategy.thoughtsSpent}\\n`;\n  if (thought.currentStrategy.progressIndicators.length > 0) {\n    ascii += 'Progress Indicators:\\n';\n    thought.currentStrategy.progressIndicators.forEach((ind, index) => {\n      ascii += `  ${index + 1}. ${ind}\\n`;\n    });\n  }\n  ascii += '\\n';\n\n  // Strategy Evaluation\n  ascii += 'STRATEGY EVALUATION\\n';\n  ascii += '-------------------\\n';\n  ascii += `Effectiveness: ${(thought.strategyEvaluation.effectiveness * 100).toFixed(1)}%\\n`;\n  ascii += `Efficiency: ${(thought.strategyEvaluation.efficiency * 100).toFixed(1)}%\\n`;\n  ascii += `Confidence: ${(thought.strategyEvaluation.confidence * 100).toFixed(1)}%\\n`;\n  ascii += `Progress Rate: ${thought.strategyEvaluation.progressRate.toFixed(2)} insights/thought\\n`;\n  ascii += `Quality Score: ${(thought.strategyEvaluation.qualityScore * 100).toFixed(1)}%\\n`;\n\n  if (thought.strategyEvaluation.strengths.length > 0) {\n    ascii += 'Strengths:\\n';\n    thought.strategyEvaluation.strengths.forEach((s, index) => {\n      ascii += `  + ${index + 1}. ${s}\\n`;\n    });\n  }\n\n  if (thought.strategyEvaluation.issues.length > 0) {\n    ascii += 'Issues:\\n';\n    thought.strategyEvaluation.issues.forEach((issue, index) => {\n      ascii += `  - ${index + 1}. ${issue}\\n`;\n    });\n  }\n  ascii += '\\n';\n\n  // Alternative Strategies\n  if (thought.alternativeStrategies.length > 0) {\n    ascii += 'ALTERNATIVE STRATEGIES\\n';\n    ascii += '----------------------\\n';\n    thought.alternativeStrategies.forEach((alt, index) => {\n      ascii += `[${index + 1}] ${alt.mode}\\n`;\n      ascii += `    Reasoning: ${alt.reasoning}\\n`;\n      ascii += `    Expected Benefit: ${alt.expectedBenefit}\\n`;\n      ascii += `    Switching Cost: ${(alt.switchingCost * 100).toFixed(0)}%\\n`;\n      ascii += `    Recommendation Score: ${(alt.recommendationScore * 100).toFixed(0)}%\\n`;\n    });\n    ascii += '\\n';\n  }\n\n  // Recommendation\n  ascii += 'RECOMMENDATION\\n';\n  ascii += '--------------\\n';\n  ascii += `Action: ${thought.recommendation.action}\\n`;\n  if (thought.recommendation.targetMode) {\n    ascii += `Target Mode: ${thought.recommendation.targetMode}\\n`;\n  }\n  ascii += `Justification: ${thought.recommendation.justification}\\n`;\n  ascii += `Confidence: ${(thought.recommendation.confidence * 100).toFixed(1)}%\\n`;\n  ascii += `Expected Improvement: ${thought.recommendation.expectedImprovement}\\n`;\n  ascii += '\\n';\n\n  // Resource Allocation\n  ascii += 'RESOURCE ALLOCATION\\n';\n  ascii += '-------------------\\n';\n  ascii += `Time Spent: ${thought.resourceAllocation.timeSpent}ms\\n`;\n  ascii += `Thoughts Remaining: ${thought.resourceAllocation.thoughtsRemaining}\\n`;\n  ascii += `Complexity: ${thought.resourceAllocation.complexityLevel}\\n`;\n  ascii += `Urgency: ${thought.resourceAllocation.urgency}\\n`;\n  ascii += `Recommendation: ${thought.resourceAllocation.recommendation}\\n`;\n  ascii += '\\n';\n\n  // Quality Metrics\n  ascii += 'QUALITY METRICS\\n';\n  ascii += '---------------\\n';\n  ascii += `Logical Consistency: ${(thought.qualityMetrics.logicalConsistency * 100).toFixed(1)}%\\n`;\n  ascii += `Evidence Quality: ${(thought.qualityMetrics.evidenceQuality * 100).toFixed(1)}%\\n`;\n  ascii += `Completeness: ${(thought.qualityMetrics.completeness * 100).toFixed(1)}%\\n`;\n  ascii += `Originality: ${(thought.qualityMetrics.originality * 100).toFixed(1)}%\\n`;\n  ascii += `Clarity: ${(thought.qualityMetrics.clarity * 100).toFixed(1)}%\\n`;\n  ascii += `Overall Quality: ${(thought.qualityMetrics.overallQuality * 100).toFixed(1)}%\\n`;\n  ascii += '\\n';\n\n  // Session Context\n  ascii += 'SESSION CONTEXT\\n';\n  ascii += '---------------\\n';\n  ascii += `Session ID: ${thought.sessionContext.sessionId}\\n`;\n  ascii += `Total Thoughts: ${thought.sessionContext.totalThoughts}\\n`;\n  ascii += `Mode Switches: ${thought.sessionContext.modeSwitches}\\n`;\n  ascii += `Problem Type: ${thought.sessionContext.problemType}\\n`;\n  ascii += `Modes Used: ${thought.sessionContext.modesUsed.join(', ')}\\n`;\n  if (thought.sessionContext.historicalEffectiveness !== undefined) {\n    ascii += `Historical Effectiveness: ${(thought.sessionContext.historicalEffectiveness * 100).toFixed(1)}%\\n`;\n  }\n\n  return ascii;\n}\n\n/**\n * Export meta-reasoning to native SVG format\n */\nfunction metaReasoningToSVG(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const {\n    colorScheme = 'default',\n    includeLabels = true,\n    includeMetrics = true,\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\n    svgHeight = DEFAULT_SVG_OPTIONS.height,\n  } = options;\n\n  const positions = new Map<string, SVGNodePosition>();\n  const nodeWidth = 150;\n  const nodeHeight = 40;\n\n  // Meta-reasoning at the top center\n  positions.set('meta', {\n    id: 'meta',\n    label: 'Meta-Reasoning',\n    x: svgWidth / 2,\n    y: 80,\n    width: nodeWidth,\n    height: nodeHeight,\n    type: 'meta',\n  });\n\n  // Current strategy on the left\n  positions.set('current', {\n    id: 'current',\n    label: includeLabels ? thought.currentStrategy.approach : 'Current Strategy',\n    x: 200,\n    y: 220,\n    width: nodeWidth,\n    height: nodeHeight,\n    type: 'current',\n  });\n\n  // Recommendation on the right\n  positions.set('recommendation', {\n    id: 'recommendation',\n    label: thought.recommendation.action,\n    x: svgWidth - 200,\n    y: 220,\n    width: nodeWidth,\n    height: nodeHeight,\n    type: 'recommendation',\n  });\n\n  // Alternative strategies at the bottom\n  if (thought.alternativeStrategies && thought.alternativeStrategies.length > 0) {\n    thought.alternativeStrategies.forEach((alt, index) => {\n      positions.set(`alt_${index}`, {\n        id: `alt_${index}`,\n        label: includeLabels ? `${alt.mode}: ${(alt.recommendationScore * 100).toFixed(0)}%` : `Alt ${index + 1}`,\n        x: 150 + index * 180,\n        y: 380,\n        width: nodeWidth,\n        height: nodeHeight,\n        type: 'alternative',\n      });\n    });\n  }\n\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Meta-Reasoning Analysis');\n\n  // Render edges\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\n\n  const metaPos = positions.get('meta');\n  const currentPos = positions.get('current');\n  const recPos = positions.get('recommendation');\n\n  if (metaPos && currentPos) {\n    svg += renderEdge(metaPos, currentPos, { style: 'solid' });\n  }\n  if (metaPos && recPos) {\n    svg += renderEdge(metaPos, recPos, { style: 'solid' });\n  }\n\n  // Edges from meta to alternatives\n  if (thought.alternativeStrategies) {\n    thought.alternativeStrategies.forEach((_, index) => {\n      const altPos = positions.get(`alt_${index}`);\n      if (metaPos && altPos) {\n        svg += renderEdge(metaPos, altPos, { style: 'dashed' });\n      }\n    });\n  }\n\n  svg += '\\n  </g>';\n\n  // Render nodes\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\n\n  const metaColors = getNodeColor('warning', colorScheme);\n  const currentColors = getNodeColor('primary', colorScheme);\n  const recColors = getNodeColor('success', colorScheme);\n  const altColors = getNodeColor('secondary', colorScheme);\n\n  for (const [, pos] of positions) {\n    if (pos.type === 'meta') {\n      svg += renderEllipseNode(pos, metaColors);\n    } else if (pos.type === 'current') {\n      svg += renderStadiumNode(pos, currentColors);\n    } else if (pos.type === 'recommendation') {\n      svg += renderStadiumNode(pos, recColors);\n    } else if (pos.type === 'alternative') {\n      svg += renderRectNode(pos, altColors);\n    }\n  }\n  svg += '\\n  </g>';\n\n  // Render metrics panel\n  if (includeMetrics) {\n    const metrics = [\n      { label: 'Effectiveness', value: `${(thought.strategyEvaluation.effectiveness * 100).toFixed(0)}%` },\n      { label: 'Quality', value: `${(thought.qualityMetrics.overallQuality * 100).toFixed(0)}%` },\n      { label: 'Alternatives', value: thought.alternativeStrategies.length },\n      { label: 'Rec Confidence', value: `${(thought.recommendation.confidence * 100).toFixed(0)}%` },\n    ];\n    svg += renderMetricsPanel(svgWidth - 190, svgHeight - 140, metrics);\n  }\n\n  // Render legend\n  const legendItems = [\n    { label: 'Meta-Reasoning', color: metaColors, shape: 'ellipse' as const },\n    { label: 'Current Strategy', color: currentColors, shape: 'stadium' as const },\n    { label: 'Recommendation', color: recColors, shape: 'stadium' as const },\n    { label: 'Alternative', color: altColors },\n  ];\n  svg += renderLegend(20, svgHeight - 140, legendItems);\n\n  svg += '\\n' + generateSVGFooter();\n  return svg;\n}\n\n/**\n * Export meta-reasoning to GraphML format\n */\nfunction metaReasoningToGraphML(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const { includeLabels = true, includeMetrics = true } = options;\n\n  const nodes: GraphMLNode[] = [];\n  const edges: GraphMLEdge[] = [];\n\n  // Meta-reasoning central node\n  nodes.push({\n    id: 'meta',\n    label: 'Meta-Reasoning',\n    type: 'meta',\n  });\n\n  // Current strategy node\n  const currentLabel = includeLabels ? thought.currentStrategy.approach : 'Current Strategy';\n  nodes.push({\n    id: 'current_strategy',\n    label: currentLabel,\n    type: 'current',\n    metadata: {\n      mode: thought.currentStrategy.mode,\n      thoughtsSpent: thought.currentStrategy.thoughtsSpent,\n    },\n  });\n\n  edges.push({\n    id: 'e_meta_current',\n    source: 'meta',\n    target: 'current_strategy',\n    directed: true,\n  });\n\n  // Strategy evaluation node\n  if (includeMetrics) {\n    nodes.push({\n      id: 'evaluation',\n      label: `Effectiveness: ${(thought.strategyEvaluation.effectiveness * 100).toFixed(0)}%`,\n      type: 'evaluation',\n      metadata: {\n        effectiveness: thought.strategyEvaluation.effectiveness,\n        efficiency: thought.strategyEvaluation.efficiency,\n        confidence: thought.strategyEvaluation.confidence,\n        progressRate: thought.strategyEvaluation.progressRate,\n        qualityScore: thought.strategyEvaluation.qualityScore,\n      },\n    });\n\n    edges.push({\n      id: 'e_current_eval',\n      source: 'current_strategy',\n      target: 'evaluation',\n      directed: true,\n    });\n\n    // Issues node\n    if (thought.strategyEvaluation.issues.length > 0) {\n      nodes.push({\n        id: 'issues',\n        label: `Issues: ${thought.strategyEvaluation.issues.length}`,\n        type: 'issue',\n        metadata: {\n          issues: thought.strategyEvaluation.issues,\n        },\n      });\n\n      edges.push({\n        id: 'e_eval_issues',\n        source: 'evaluation',\n        target: 'issues',\n        directed: true,\n      });\n    }\n\n    // Strengths node\n    if (thought.strategyEvaluation.strengths.length > 0) {\n      nodes.push({\n        id: 'strengths',\n        label: `Strengths: ${thought.strategyEvaluation.strengths.length}`,\n        type: 'strength',\n        metadata: {\n          strengths: thought.strategyEvaluation.strengths,\n        },\n      });\n\n      edges.push({\n        id: 'e_eval_strengths',\n        source: 'evaluation',\n        target: 'strengths',\n        directed: true,\n      });\n    }\n  }\n\n  // Alternative strategies\n  if (thought.alternativeStrategies.length > 0) {\n    thought.alternativeStrategies.forEach((alt, index) => {\n      const altLabel = includeLabels\n        ? `${alt.mode}: ${(alt.recommendationScore * 100).toFixed(0)}%`\n        : `Alternative ${index + 1}`;\n\n      nodes.push({\n        id: `alt_${index}`,\n        label: altLabel,\n        type: 'alternative',\n        metadata: {\n          mode: alt.mode,\n          reasoning: alt.reasoning,\n          expectedBenefit: alt.expectedBenefit,\n          switchingCost: alt.switchingCost,\n          recommendationScore: alt.recommendationScore,\n        },\n      });\n\n      edges.push({\n        id: `e_meta_alt_${index}`,\n        source: 'meta',\n        target: `alt_${index}`,\n        directed: true,\n      });\n    });\n  }\n\n  // Recommendation node\n  const recLabel = `${thought.recommendation.action}${thought.recommendation.targetMode ? `  ${thought.recommendation.targetMode}` : ''}`;\n  nodes.push({\n    id: 'recommendation',\n    label: recLabel,\n    type: 'recommendation',\n    metadata: {\n      action: thought.recommendation.action,\n      targetMode: thought.recommendation.targetMode,\n      justification: thought.recommendation.justification,\n      confidence: thought.recommendation.confidence,\n      expectedImprovement: thought.recommendation.expectedImprovement,\n    },\n  });\n\n  edges.push({\n    id: 'e_meta_rec',\n    source: 'meta',\n    target: 'recommendation',\n    directed: true,\n  });\n\n  // Quality metrics node\n  if (includeMetrics) {\n    nodes.push({\n      id: 'quality',\n      label: `Quality: ${(thought.qualityMetrics.overallQuality * 100).toFixed(0)}%`,\n      type: 'quality',\n      metadata: {\n        logicalConsistency: thought.qualityMetrics.logicalConsistency,\n        evidenceQuality: thought.qualityMetrics.evidenceQuality,\n        completeness: thought.qualityMetrics.completeness,\n        originality: thought.qualityMetrics.originality,\n        clarity: thought.qualityMetrics.clarity,\n        overallQuality: thought.qualityMetrics.overallQuality,\n      },\n    });\n\n    edges.push({\n      id: 'e_meta_quality',\n      source: 'meta',\n      target: 'quality',\n      directed: true,\n    });\n  }\n\n  const graphmlOptions: GraphMLOptions = {\n    graphName: 'MetaReasoning Visualization',\n    directed: true,\n    includeLabels,\n  };\n\n  return generateGraphML(nodes, edges, graphmlOptions);\n}\n\n/**\n * Export meta-reasoning to TikZ format\n */\nfunction metaReasoningToTikZ(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const { includeLabels = true, includeMetrics = true, colorScheme = 'default' } = options;\n\n  const nodes: TikZNode[] = [];\n  const edges: TikZEdge[] = [];\n\n  // Meta-reasoning central node at top\n  nodes.push({\n    id: 'meta',\n    label: 'Meta-Reasoning',\n    x: 0,\n    y: 0,\n    shape: 'ellipse',\n    type: 'meta',\n  });\n\n  // Current strategy on the left\n  const currentLabel = includeLabels ? thought.currentStrategy.approach : 'Current Strategy';\n  nodes.push({\n    id: 'current_strategy',\n    label: currentLabel.substring(0, 30), // Truncate for readability\n    x: -4,\n    y: -2,\n    shape: 'stadium',\n    type: 'current',\n  });\n\n  edges.push({\n    source: 'meta',\n    target: 'current_strategy',\n    directed: true,\n  });\n\n  // Recommendation on the right\n  const recLabel = `${thought.recommendation.action}${thought.recommendation.targetMode ? `  ${thought.recommendation.targetMode}` : ''}`;\n  nodes.push({\n    id: 'recommendation',\n    label: recLabel.substring(0, 30),\n    x: 4,\n    y: -2,\n    shape: 'stadium',\n    type: 'recommendation',\n  });\n\n  edges.push({\n    source: 'meta',\n    target: 'recommendation',\n    directed: true,\n  });\n\n  // Strategy evaluation\n  if (includeMetrics) {\n    nodes.push({\n      id: 'evaluation',\n      label: `Eff: ${(thought.strategyEvaluation.effectiveness * 100).toFixed(0)}%`,\n      x: -4,\n      y: -4,\n      shape: 'diamond',\n      type: 'evaluation',\n    });\n\n    edges.push({\n      source: 'current_strategy',\n      target: 'evaluation',\n      directed: true,\n    });\n  }\n\n  // Alternative strategies at the bottom\n  if (thought.alternativeStrategies.length > 0) {\n    const altCount = thought.alternativeStrategies.length;\n    const spacing = 2.5;\n    const totalWidth = (altCount - 1) * spacing;\n    const offset = totalWidth / 2;\n\n    thought.alternativeStrategies.forEach((alt, index) => {\n      const altLabel = includeLabels\n        ? `${alt.mode}: ${(alt.recommendationScore * 100).toFixed(0)}%`\n        : `Alt ${index + 1}`;\n\n      nodes.push({\n        id: `alt_${index}`,\n        label: altLabel,\n        x: index * spacing - offset,\n        y: -5,\n        shape: 'rectangle',\n        type: 'alternative',\n      });\n\n      edges.push({\n        source: 'meta',\n        target: `alt_${index}`,\n        directed: true,\n        style: 'dashed',\n      });\n    });\n  }\n\n  // Quality metrics\n  if (includeMetrics) {\n    nodes.push({\n      id: 'quality',\n      label: `Quality: ${(thought.qualityMetrics.overallQuality * 100).toFixed(0)}%`,\n      x: 4,\n      y: -4,\n      shape: 'diamond',\n      type: 'quality',\n    });\n\n    edges.push({\n      source: 'meta',\n      target: 'quality',\n      directed: true,\n      style: 'dashed',\n    });\n  }\n\n  const tikzOptions: TikZOptions = {\n    title: 'MetaReasoning Visualization',\n    colorScheme,\n    includeLabels,\n  };\n\n  return generateTikZ(nodes, edges, tikzOptions);\n}\n\n/**\n * Export meta-reasoning to HTML format\n */\nfunction metaReasoningToHTML(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const {\n    htmlStandalone = true,\n    htmlTitle = 'Meta-Reasoning Analysis',\n    htmlTheme = 'light',\n  } = options;\n\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\n\n  // Metrics\n  html += '<div class=\"metrics-grid\">';\n  html += renderMetricCard('Effectiveness', `${(thought.strategyEvaluation.effectiveness * 100).toFixed(0)}%`, 'primary');\n  html += renderMetricCard('Quality', `${(thought.qualityMetrics.overallQuality * 100).toFixed(0)}%`, 'success');\n  html += renderMetricCard('Alternatives', thought.alternativeStrategies.length, 'info');\n  html += renderMetricCard('Confidence', `${(thought.recommendation.confidence * 100).toFixed(0)}%`, 'warning');\n  html += '</div>\\n';\n\n  // Current strategy section\n  const strategyContent = `\n    <p><strong>Mode:</strong> ${renderBadge(thought.currentStrategy.mode, 'primary')}</p>\n    <p><strong>Approach:</strong> ${escapeHTML(thought.currentStrategy.approach)}</p>\n    <p><strong>Thoughts Spent:</strong> ${thought.currentStrategy.thoughtsSpent}</p>\n    ${thought.currentStrategy.progressIndicators.length > 0 ? `\n      <p style=\"margin-top: 1rem\"><strong>Progress Indicators:</strong></p>\n      <ul class=\"list-styled\">\n        ${thought.currentStrategy.progressIndicators.map(ind => `<li>${escapeHTML(ind)}</li>`).join('')}\n      </ul>\n    ` : ''}\n  `;\n  html += renderSection('Current Strategy', strategyContent, '');\n\n  // Strategy evaluation section\n  const evalRows = [\n    ['Effectiveness', `${(thought.strategyEvaluation.effectiveness * 100).toFixed(1)}%`],\n    ['Efficiency', `${(thought.strategyEvaluation.efficiency * 100).toFixed(1)}%`],\n    ['Confidence', `${(thought.strategyEvaluation.confidence * 100).toFixed(1)}%`],\n    ['Progress Rate', `${thought.strategyEvaluation.progressRate.toFixed(2)} insights/thought`],\n    ['Quality Score', `${(thought.strategyEvaluation.qualityScore * 100).toFixed(1)}%`],\n  ];\n\n  let evalContent = renderTable(['Metric', 'Value'], evalRows);\n\n  // Add effectiveness progress bar\n  evalContent += '<p style=\"margin-top: 1rem\"><strong>Effectiveness:</strong></p>';\n  evalContent += renderProgressBar(thought.strategyEvaluation.effectiveness * 100, 'primary');\n\n  if (thought.strategyEvaluation.strengths.length > 0) {\n    evalContent += '<p style=\"margin-top: 1rem\"><strong>Strengths:</strong></p>';\n    evalContent += '<ul class=\"list-styled\">';\n    thought.strategyEvaluation.strengths.forEach(s => {\n      evalContent += `<li class=\"text-success\"> ${escapeHTML(s)}</li>`;\n    });\n    evalContent += '</ul>';\n  }\n\n  if (thought.strategyEvaluation.issues.length > 0) {\n    evalContent += '<p style=\"margin-top: 1rem\"><strong>Issues:</strong></p>';\n    evalContent += '<ul class=\"list-styled\">';\n    thought.strategyEvaluation.issues.forEach(issue => {\n      evalContent += `<li class=\"text-danger\"> ${escapeHTML(issue)}</li>`;\n    });\n    evalContent += '</ul>';\n  }\n\n  html += renderSection('Strategy Evaluation', evalContent, '');\n\n  // Alternative strategies\n  if (thought.alternativeStrategies.length > 0) {\n    const altsContent = thought.alternativeStrategies.map(alt => `\n      <div class=\"card\">\n        <div class=\"card-header\">\n          ${renderBadge(alt.mode, 'info')}\n          ${renderBadge(`Score: ${(alt.recommendationScore * 100).toFixed(0)}%`, 'secondary')}\n        </div>\n        <p><strong>Reasoning:</strong> ${escapeHTML(alt.reasoning)}</p>\n        <p><strong>Expected Benefit:</strong> ${escapeHTML(alt.expectedBenefit)}</p>\n        <p><strong>Switching Cost:</strong></p>\n        ${renderProgressBar(alt.switchingCost * 100, 'warning')}\n        <p style=\"margin-top: 0.5rem\"><strong>Recommendation Score:</strong></p>\n        ${renderProgressBar(alt.recommendationScore * 100, 'success')}\n      </div>\n    `).join('');\n    html += renderSection('Alternative Strategies', altsContent, '');\n  }\n\n  // Recommendation section\n  const recContent = `\n    <p><strong>Action:</strong> ${renderBadge(thought.recommendation.action, 'warning')}</p>\n    ${thought.recommendation.targetMode ? `<p><strong>Target Mode:</strong> ${renderBadge(thought.recommendation.targetMode, 'primary')}</p>` : ''}\n    <p><strong>Justification:</strong> ${escapeHTML(thought.recommendation.justification)}</p>\n    <p><strong>Expected Improvement:</strong> ${escapeHTML(thought.recommendation.expectedImprovement)}</p>\n    <p style=\"margin-top: 1rem\"><strong>Confidence:</strong></p>\n    ${renderProgressBar(thought.recommendation.confidence * 100, 'success')}\n  `;\n  html += renderSection('Recommendation', recContent, '');\n\n  // Resource allocation section\n  const resourceRows = [\n    ['Time Spent', `${thought.resourceAllocation.timeSpent}ms`],\n    ['Thoughts Remaining', thought.resourceAllocation.thoughtsRemaining],\n    ['Complexity Level', thought.resourceAllocation.complexityLevel],\n    ['Urgency', thought.resourceAllocation.urgency],\n  ];\n\n  let resourceContent = renderTable(['Resource', 'Value'], resourceRows);\n  resourceContent += `<p style=\"margin-top: 1rem\"><strong>Recommendation:</strong> ${escapeHTML(thought.resourceAllocation.recommendation)}</p>`;\n\n  html += renderSection('Resource Allocation', resourceContent, '');\n\n  // Quality metrics section\n  const qualityRows = [\n    ['Logical Consistency', `${(thought.qualityMetrics.logicalConsistency * 100).toFixed(1)}%`],\n    ['Evidence Quality', `${(thought.qualityMetrics.evidenceQuality * 100).toFixed(1)}%`],\n    ['Completeness', `${(thought.qualityMetrics.completeness * 100).toFixed(1)}%`],\n    ['Originality', `${(thought.qualityMetrics.originality * 100).toFixed(1)}%`],\n    ['Clarity', `${(thought.qualityMetrics.clarity * 100).toFixed(1)}%`],\n    ['Overall Quality', `${(thought.qualityMetrics.overallQuality * 100).toFixed(1)}%`],\n  ];\n\n  let qualityContent = renderTable(['Metric', 'Value'], qualityRows);\n  qualityContent += '<p style=\"margin-top: 1rem\"><strong>Overall Quality:</strong></p>';\n  qualityContent += renderProgressBar(thought.qualityMetrics.overallQuality * 100, 'success');\n\n  html += renderSection('Quality Metrics', qualityContent, '');\n\n  // Session context section\n  const sessionRows = [\n    ['Session ID', thought.sessionContext.sessionId],\n    ['Total Thoughts', thought.sessionContext.totalThoughts],\n    ['Mode Switches', thought.sessionContext.modeSwitches],\n    ['Problem Type', thought.sessionContext.problemType],\n  ];\n\n  if (thought.sessionContext.historicalEffectiveness !== undefined) {\n    sessionRows.push(['Historical Effectiveness', `${(thought.sessionContext.historicalEffectiveness * 100).toFixed(1)}%`]);\n  }\n\n  let sessionContent = renderTable(['Property', 'Value'], sessionRows);\n\n  if (thought.sessionContext.modesUsed.length > 0) {\n    sessionContent += '<p style=\"margin-top: 1rem\"><strong>Modes Used:</strong></p>';\n    sessionContent += '<div class=\"flex gap-1 flex-wrap\">';\n    thought.sessionContext.modesUsed.forEach(mode => {\n      sessionContent += renderBadge(mode, 'info');\n      sessionContent += ' ';\n    });\n    sessionContent += '</div>';\n  }\n\n  html += renderSection('Session Context', sessionContent, '');\n\n  html += generateHTMLFooter(htmlStandalone);\n  return html;\n}\n\n/**\n * Export meta-reasoning to Modelica format\n */\nfunction metaReasoningToModelica(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const { includeMetrics = true } = options;\n\n  let modelica = 'package MetaReasoning\\n';\n  modelica += '  \"Meta-reasoning analysis model for strategy evaluation and recommendation\"\\n\\n';\n\n  // Current strategy record\n  modelica += '  record CurrentStrategy\\n';\n  modelica += '    \"Current reasoning strategy being employed\"\\n';\n  const modeId = sanitizeModelicaId(thought.currentStrategy.mode);\n  modelica += `    parameter String mode = \"${escapeModelicaString(modeId)}\";\\n`;\n  modelica += `    parameter String approach = \"${escapeModelicaString(thought.currentStrategy.approach)}\";\\n`;\n  modelica += `    parameter Integer thoughtsSpent = ${thought.currentStrategy.thoughtsSpent};\\n`;\n  if (thought.currentStrategy.progressIndicators.length > 0) {\n    modelica += `    parameter Integer progressIndicatorCount = ${thought.currentStrategy.progressIndicators.length};\\n`;\n  }\n  modelica += '  end CurrentStrategy;\\n\\n';\n\n  // Strategy evaluation record\n  modelica += '  record StrategyEvaluation\\n';\n  modelica += '    \"Evaluation metrics for current strategy\"\\n';\n  modelica += `    parameter Real effectiveness(min=0.0, max=1.0) = ${thought.strategyEvaluation.effectiveness.toFixed(4)};\\n`;\n  modelica += `    parameter Real efficiency(min=0.0, max=1.0) = ${thought.strategyEvaluation.efficiency.toFixed(4)};\\n`;\n  modelica += `    parameter Real confidence(min=0.0, max=1.0) = ${thought.strategyEvaluation.confidence.toFixed(4)};\\n`;\n  modelica += `    parameter Real progressRate = ${thought.strategyEvaluation.progressRate.toFixed(4)};\\n`;\n  modelica += `    parameter Real qualityScore(min=0.0, max=1.0) = ${thought.strategyEvaluation.qualityScore.toFixed(4)};\\n`;\n  modelica += `    parameter Integer issueCount = ${thought.strategyEvaluation.issues.length};\\n`;\n  modelica += `    parameter Integer strengthCount = ${thought.strategyEvaluation.strengths.length};\\n`;\n  modelica += '  end StrategyEvaluation;\\n\\n';\n\n  // Alternative strategies\n  if (thought.alternativeStrategies.length > 0) {\n    thought.alternativeStrategies.forEach((alt, index) => {\n      modelica += `  record AlternativeStrategy${index + 1}\\n`;\n      modelica += `    \"Alternative reasoning strategy option ${index + 1}\"\\n`;\n      const altModeId = sanitizeModelicaId(alt.mode);\n      modelica += `    parameter String mode = \"${escapeModelicaString(altModeId)}\";\\n`;\n      modelica += `    parameter String reasoning = \"${escapeModelicaString(alt.reasoning)}\";\\n`;\n      modelica += `    parameter String expectedBenefit = \"${escapeModelicaString(alt.expectedBenefit)}\";\\n`;\n      modelica += `    parameter Real switchingCost(min=0.0, max=1.0) = ${alt.switchingCost.toFixed(4)};\\n`;\n      modelica += `    parameter Real recommendationScore(min=0.0, max=1.0) = ${alt.recommendationScore.toFixed(4)};\\n`;\n      modelica += `  end AlternativeStrategy${index + 1};\\n\\n`;\n    });\n  }\n\n  // Recommendation record\n  modelica += '  record Recommendation\\n';\n  modelica += '    \"Strategic recommendation from meta-reasoning\"\\n';\n  modelica += `    parameter String action = \"${escapeModelicaString(thought.recommendation.action)}\";\\n`;\n  if (thought.recommendation.targetMode) {\n    const targetModeId = sanitizeModelicaId(thought.recommendation.targetMode);\n    modelica += `    parameter String targetMode = \"${escapeModelicaString(targetModeId)}\";\\n`;\n  }\n  modelica += `    parameter String justification = \"${escapeModelicaString(thought.recommendation.justification)}\";\\n`;\n  modelica += `    parameter Real confidence(min=0.0, max=1.0) = ${thought.recommendation.confidence.toFixed(4)};\\n`;\n  modelica += `    parameter String expectedImprovement = \"${escapeModelicaString(thought.recommendation.expectedImprovement)}\";\\n`;\n  modelica += '  end Recommendation;\\n\\n';\n\n  // Quality metrics\n  if (includeMetrics) {\n    modelica += '  record QualityMetrics\\n';\n    modelica += '    \"Quality assessment metrics for reasoning session\"\\n';\n    modelica += `    parameter Real logicalConsistency(min=0.0, max=1.0) = ${thought.qualityMetrics.logicalConsistency.toFixed(4)};\\n`;\n    modelica += `    parameter Real evidenceQuality(min=0.0, max=1.0) = ${thought.qualityMetrics.evidenceQuality.toFixed(4)};\\n`;\n    modelica += `    parameter Real completeness(min=0.0, max=1.0) = ${thought.qualityMetrics.completeness.toFixed(4)};\\n`;\n    modelica += `    parameter Real originality(min=0.0, max=1.0) = ${thought.qualityMetrics.originality.toFixed(4)};\\n`;\n    modelica += `    parameter Real clarity(min=0.0, max=1.0) = ${thought.qualityMetrics.clarity.toFixed(4)};\\n`;\n    modelica += `    parameter Real overallQuality(min=0.0, max=1.0) = ${thought.qualityMetrics.overallQuality.toFixed(4)};\\n`;\n    modelica += '  end QualityMetrics;\\n\\n';\n  }\n\n  // Resource allocation\n  modelica += '  record ResourceAllocation\\n';\n  modelica += '    \"Resource allocation and complexity assessment\"\\n';\n  modelica += `    parameter Real timeSpent = ${thought.resourceAllocation.timeSpent};\\n`;\n  modelica += `    parameter Integer thoughtsRemaining = ${thought.resourceAllocation.thoughtsRemaining};\\n`;\n  modelica += `    parameter String complexityLevel = \"${escapeModelicaString(thought.resourceAllocation.complexityLevel)}\";\\n`;\n  modelica += `    parameter String urgency = \"${escapeModelicaString(thought.resourceAllocation.urgency)}\";\\n`;\n  modelica += `    parameter String recommendation = \"${escapeModelicaString(thought.resourceAllocation.recommendation)}\";\\n`;\n  modelica += '  end ResourceAllocation;\\n\\n';\n\n  // Session context\n  modelica += '  record SessionContext\\n';\n  modelica += '    \"Session context and historical information\"\\n';\n  modelica += `    parameter String sessionId = \"${escapeModelicaString(thought.sessionContext.sessionId)}\";\\n`;\n  modelica += `    parameter Integer totalThoughts = ${thought.sessionContext.totalThoughts};\\n`;\n  modelica += `    parameter Integer modeSwitches = ${thought.sessionContext.modeSwitches};\\n`;\n  modelica += `    parameter String problemType = \"${escapeModelicaString(thought.sessionContext.problemType)}\";\\n`;\n  modelica += `    parameter Integer modesUsedCount = ${thought.sessionContext.modesUsed.length};\\n`;\n  if (thought.sessionContext.historicalEffectiveness !== undefined) {\n    modelica += `    parameter Real historicalEffectiveness(min=0.0, max=1.0) = ${thought.sessionContext.historicalEffectiveness.toFixed(4)};\\n`;\n  }\n  modelica += '  end SessionContext;\\n\\n';\n\n  // Main meta-reasoning model\n  modelica += '  model MetaReasoningAnalysis\\n';\n  modelica += '    \"Complete meta-reasoning analysis model\"\\n';\n  modelica += '    CurrentStrategy currentStrategy;\\n';\n  modelica += '    StrategyEvaluation strategyEvaluation;\\n';\n  modelica += '    Recommendation recommendation;\\n';\n  if (includeMetrics) {\n    modelica += '    QualityMetrics qualityMetrics;\\n';\n  }\n  modelica += '    ResourceAllocation resourceAllocation;\\n';\n  modelica += '    SessionContext sessionContext;\\n';\n\n  if (thought.alternativeStrategies.length > 0) {\n    thought.alternativeStrategies.forEach((_, index) => {\n      modelica += `    AlternativeStrategy${index + 1} alternativeStrategy${index + 1};\\n`;\n    });\n  }\n\n  modelica += '  end MetaReasoningAnalysis;\\n\\n';\n  modelica += 'end MetaReasoning;\\n';\n\n  return modelica;\n}\n\n/**\n * Export meta-reasoning to UML format\n */\nfunction metaReasoningToUML(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const { includeMetrics = true } = options;\n\n  const nodes: UmlNode[] = [];\n  const edges: UmlEdge[] = [];\n\n  // Main meta-reasoning class\n  nodes.push({\n    id: 'MetaReasoning',\n    label: 'MetaReasoning',\n    shape: 'class',\n    attributes: [\n      `mode: ${thought.currentStrategy.mode}`,\n      `sessionId: ${thought.sessionContext.sessionId}`,\n      `totalThoughts: ${thought.sessionContext.totalThoughts}`,\n    ],\n    methods: [\n      'evaluateStrategy()',\n      'generateRecommendation()',\n      'allocateResources()',\n    ],\n  });\n\n  // Current strategy class\n  nodes.push({\n    id: 'CurrentStrategy',\n    label: 'CurrentStrategy',\n    shape: 'class',\n    attributes: [\n      `mode: ${thought.currentStrategy.mode}`,\n      `approach: ${thought.currentStrategy.approach.substring(0, 30)}...`,\n      `thoughtsSpent: ${thought.currentStrategy.thoughtsSpent}`,\n      `progressIndicators: ${thought.currentStrategy.progressIndicators.length}`,\n    ],\n  });\n\n  edges.push({\n    source: 'MetaReasoning',\n    target: 'CurrentStrategy',\n    label: 'employs',\n    type: 'composition',\n  });\n\n  // Strategy evaluation class\n  nodes.push({\n    id: 'StrategyEvaluation',\n    label: 'StrategyEvaluation',\n    shape: 'class',\n    attributes: [\n      `effectiveness: ${(thought.strategyEvaluation.effectiveness * 100).toFixed(1)}%`,\n      `efficiency: ${(thought.strategyEvaluation.efficiency * 100).toFixed(1)}%`,\n      `confidence: ${(thought.strategyEvaluation.confidence * 100).toFixed(1)}%`,\n      `progressRate: ${thought.strategyEvaluation.progressRate.toFixed(2)}`,\n      `qualityScore: ${(thought.strategyEvaluation.qualityScore * 100).toFixed(1)}%`,\n      `issues: ${thought.strategyEvaluation.issues.length}`,\n      `strengths: ${thought.strategyEvaluation.strengths.length}`,\n    ],\n  });\n\n  edges.push({\n    source: 'MetaReasoning',\n    target: 'StrategyEvaluation',\n    label: 'evaluates',\n    type: 'association',\n  });\n\n  // Recommendation class\n  nodes.push({\n    id: 'Recommendation',\n    label: 'Recommendation',\n    shape: 'class',\n    attributes: [\n      `action: ${thought.recommendation.action}`,\n      thought.recommendation.targetMode ? `targetMode: ${thought.recommendation.targetMode}` : undefined,\n      `confidence: ${(thought.recommendation.confidence * 100).toFixed(1)}%`,\n      `justification: ${thought.recommendation.justification.substring(0, 40)}...`,\n    ].filter(Boolean) as string[],\n  });\n\n  edges.push({\n    source: 'MetaReasoning',\n    target: 'Recommendation',\n    label: 'produces',\n    type: 'association',\n  });\n\n  // Alternative strategies\n  if (thought.alternativeStrategies.length > 0) {\n    // Create an interface for alternative strategies\n    nodes.push({\n      id: 'AlternativeStrategy',\n      label: '<<interface>>\\\\nAlternativeStrategy',\n      shape: 'interface',\n      attributes: [\n        'mode: ThinkingMode',\n        'reasoning: string',\n        'expectedBenefit: string',\n        'switchingCost: number',\n        'recommendationScore: number',\n      ],\n    });\n\n    edges.push({\n      source: 'MetaReasoning',\n      target: 'AlternativeStrategy',\n      label: `considers (${thought.alternativeStrategies.length})`,\n      type: 'association',\n    });\n\n    // Add concrete alternative strategies\n    thought.alternativeStrategies.slice(0, 3).forEach((alt, index) => {\n      nodes.push({\n        id: `Alt${index + 1}`,\n        label: `${alt.mode}Strategy`,\n        shape: 'class',\n        attributes: [\n          `score: ${(alt.recommendationScore * 100).toFixed(0)}%`,\n          `cost: ${(alt.switchingCost * 100).toFixed(0)}%`,\n        ],\n      });\n\n      edges.push({\n        source: `Alt${index + 1}`,\n        target: 'AlternativeStrategy',\n        type: 'implementation',\n      });\n    });\n  }\n\n  // Quality metrics (if included)\n  if (includeMetrics) {\n    nodes.push({\n      id: 'QualityMetrics',\n      label: 'QualityMetrics',\n      shape: 'class',\n      attributes: [\n        `logicalConsistency: ${(thought.qualityMetrics.logicalConsistency * 100).toFixed(1)}%`,\n        `evidenceQuality: ${(thought.qualityMetrics.evidenceQuality * 100).toFixed(1)}%`,\n        `completeness: ${(thought.qualityMetrics.completeness * 100).toFixed(1)}%`,\n        `originality: ${(thought.qualityMetrics.originality * 100).toFixed(1)}%`,\n        `clarity: ${(thought.qualityMetrics.clarity * 100).toFixed(1)}%`,\n        `overallQuality: ${(thought.qualityMetrics.overallQuality * 100).toFixed(1)}%`,\n      ],\n    });\n\n    edges.push({\n      source: 'MetaReasoning',\n      target: 'QualityMetrics',\n      label: 'monitors',\n      type: 'association',\n    });\n  }\n\n  // Resource allocation\n  nodes.push({\n    id: 'ResourceAllocation',\n    label: 'ResourceAllocation',\n    shape: 'class',\n    attributes: [\n      `timeSpent: ${thought.resourceAllocation.timeSpent}ms`,\n      `thoughtsRemaining: ${thought.resourceAllocation.thoughtsRemaining}`,\n      `complexity: ${thought.resourceAllocation.complexityLevel}`,\n      `urgency: ${thought.resourceAllocation.urgency}`,\n    ],\n  });\n\n  edges.push({\n    source: 'MetaReasoning',\n    target: 'ResourceAllocation',\n    label: 'manages',\n    type: 'composition',\n  });\n\n  return generateUmlDiagram(nodes, edges, {\n    title: 'MetaReasoning Structure',\n    direction: 'top to bottom',\n  });\n}\n\n/**\n * Export meta-reasoning to JSON format\n */\nfunction metaReasoningToJSON(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const { includeMetrics = true } = options;\n\n  const graph = createJsonGraph(\n    'MetaReasoning',\n    'Meta-reasoning analysis graph showing strategy evaluation and recommendations',\n    { includeMetrics, includeLayout: true }\n  );\n\n  // Add central meta-reasoning node\n  addNode(graph, {\n    id: 'meta',\n    label: 'Meta-Reasoning',\n    type: 'meta',\n    metadata: {\n      mode: thought.currentStrategy.mode,\n      sessionId: thought.sessionContext.sessionId,\n    },\n  });\n\n  // Add current strategy node\n  addNode(graph, {\n    id: 'current_strategy',\n    label: 'Current Strategy',\n    type: 'strategy',\n    metadata: {\n      mode: thought.currentStrategy.mode,\n      approach: thought.currentStrategy.approach,\n      thoughtsSpent: thought.currentStrategy.thoughtsSpent,\n      progressIndicatorCount: thought.currentStrategy.progressIndicators.length,\n      progressIndicators: thought.currentStrategy.progressIndicators,\n    },\n  });\n\n  addEdge(graph, {\n    id: 'e_meta_current',\n    source: 'meta',\n    target: 'current_strategy',\n    label: 'employs',\n    metadata: {\n      relationship: 'current',\n    },\n  });\n\n  // Add strategy evaluation node\n  addNode(graph, {\n    id: 'evaluation',\n    label: 'Strategy Evaluation',\n    type: 'evaluation',\n    metadata: {\n      effectiveness: thought.strategyEvaluation.effectiveness,\n      efficiency: thought.strategyEvaluation.efficiency,\n      confidence: thought.strategyEvaluation.confidence,\n      progressRate: thought.strategyEvaluation.progressRate,\n      qualityScore: thought.strategyEvaluation.qualityScore,\n      issueCount: thought.strategyEvaluation.issues.length,\n      strengthCount: thought.strategyEvaluation.strengths.length,\n      issues: thought.strategyEvaluation.issues,\n      strengths: thought.strategyEvaluation.strengths,\n    },\n  });\n\n  addEdge(graph, {\n    id: 'e_current_eval',\n    source: 'current_strategy',\n    target: 'evaluation',\n    label: 'evaluated_by',\n  });\n\n  // Add alternative strategies\n  thought.alternativeStrategies.forEach((alt, index) => {\n    addNode(graph, {\n      id: `alt_${index}`,\n      label: `Alternative: ${alt.mode}`,\n      type: 'alternative',\n      metadata: {\n        mode: alt.mode,\n        reasoning: alt.reasoning,\n        expectedBenefit: alt.expectedBenefit,\n        switchingCost: alt.switchingCost,\n        recommendationScore: alt.recommendationScore,\n      },\n    });\n\n    addEdge(graph, {\n      id: `e_meta_alt_${index}`,\n      source: 'meta',\n      target: `alt_${index}`,\n      label: 'considers',\n      metadata: {\n        score: alt.recommendationScore,\n      },\n    });\n  });\n\n  // Add recommendation node\n  addNode(graph, {\n    id: 'recommendation',\n    label: 'Recommendation',\n    type: 'recommendation',\n    metadata: {\n      action: thought.recommendation.action,\n      targetMode: thought.recommendation.targetMode,\n      justification: thought.recommendation.justification,\n      confidence: thought.recommendation.confidence,\n      expectedImprovement: thought.recommendation.expectedImprovement,\n    },\n  });\n\n  addEdge(graph, {\n    id: 'e_eval_rec',\n    source: 'evaluation',\n    target: 'recommendation',\n    label: 'produces',\n    metadata: {\n      confidence: thought.recommendation.confidence,\n    },\n  });\n\n  // Add quality metrics (if included)\n  if (includeMetrics) {\n    addNode(graph, {\n      id: 'quality',\n      label: 'Quality Metrics',\n      type: 'metrics',\n      metadata: {\n        logicalConsistency: thought.qualityMetrics.logicalConsistency,\n        evidenceQuality: thought.qualityMetrics.evidenceQuality,\n        completeness: thought.qualityMetrics.completeness,\n        originality: thought.qualityMetrics.originality,\n        clarity: thought.qualityMetrics.clarity,\n        overallQuality: thought.qualityMetrics.overallQuality,\n      },\n    });\n\n    addEdge(graph, {\n      id: 'e_meta_quality',\n      source: 'meta',\n      target: 'quality',\n      label: 'monitors',\n    });\n\n    // Add overall metrics\n    addMetric(graph, 'effectiveness', thought.strategyEvaluation.effectiveness);\n    addMetric(graph, 'overallQuality', thought.qualityMetrics.overallQuality);\n    addMetric(graph, 'recommendationConfidence', thought.recommendation.confidence);\n  }\n\n  // Add resource allocation node\n  addNode(graph, {\n    id: 'resources',\n    label: 'Resource Allocation',\n    type: 'resources',\n    metadata: {\n      timeSpent: thought.resourceAllocation.timeSpent,\n      thoughtsRemaining: thought.resourceAllocation.thoughtsRemaining,\n      complexityLevel: thought.resourceAllocation.complexityLevel,\n      urgency: thought.resourceAllocation.urgency,\n      recommendation: thought.resourceAllocation.recommendation,\n    },\n  });\n\n  addEdge(graph, {\n    id: 'e_meta_resources',\n    source: 'meta',\n    target: 'resources',\n    label: 'manages',\n  });\n\n  // Add session context metadata\n  graph.metadata = {\n    ...graph.metadata,\n    sessionContext: {\n      sessionId: thought.sessionContext.sessionId,\n      totalThoughts: thought.sessionContext.totalThoughts,\n      modeSwitches: thought.sessionContext.modeSwitches,\n      problemType: thought.sessionContext.problemType,\n      modesUsed: thought.sessionContext.modesUsed,\n      historicalEffectiveness: thought.sessionContext.historicalEffectiveness,\n    },\n  };\n\n  return serializeGraph(graph);\n}\n\n/**\n * Export meta-reasoning to Markdown format\n */\nfunction metaReasoningToMarkdown(thought: MetaReasoningThought, options: VisualExportOptions): string {\n  const {\n    markdownIncludeFrontmatter = false,\n    markdownIncludeToc = false,\n    markdownIncludeMermaid = true,\n    includeMetrics = true,\n  } = options;\n\n  const parts: string[] = [];\n\n  // Current Strategy section\n  const strategyContent = keyValueSection({\n    'Mode': thought.currentStrategy.mode,\n    'Approach': thought.currentStrategy.approach,\n    'Thoughts Spent': thought.currentStrategy.thoughtsSpent,\n  });\n\n  let strategyFull = strategyContent;\n\n  if (thought.currentStrategy.progressIndicators.length > 0) {\n    strategyFull += '\\n\\n**Progress Indicators:**\\n\\n' + list(thought.currentStrategy.progressIndicators);\n  }\n\n  parts.push(section('Current Strategy', strategyFull));\n\n  // Strategy Evaluation section\n  if (includeMetrics) {\n    const evalRows = [\n      ['Effectiveness', `${(thought.strategyEvaluation.effectiveness * 100).toFixed(1)}%`],\n      ['Efficiency', `${(thought.strategyEvaluation.efficiency * 100).toFixed(1)}%`],\n      ['Confidence', `${(thought.strategyEvaluation.confidence * 100).toFixed(1)}%`],\n      ['Progress Rate', `${thought.strategyEvaluation.progressRate.toFixed(2)} insights/thought`],\n      ['Quality Score', `${(thought.strategyEvaluation.qualityScore * 100).toFixed(1)}%`],\n    ];\n\n    let evalContent = table(['Metric', 'Value'], evalRows);\n\n    evalContent += '\\n\\n**Effectiveness:**\\n\\n' + progressBar(thought.strategyEvaluation.effectiveness * 100);\n\n    if (thought.strategyEvaluation.strengths.length > 0) {\n      evalContent += '\\n\\n**Strengths:**\\n\\n' + list(thought.strategyEvaluation.strengths.map(s => ` ${s}`));\n    }\n\n    if (thought.strategyEvaluation.issues.length > 0) {\n      evalContent += '\\n\\n**Issues:**\\n\\n' + list(thought.strategyEvaluation.issues.map(i => ` ${i}`));\n    }\n\n    parts.push(section('Strategy Evaluation', evalContent));\n  }\n\n  // Alternative Strategies section\n  if (thought.alternativeStrategies.length > 0) {\n    const altRows = thought.alternativeStrategies.map(alt => [\n      alt.mode,\n      alt.reasoning.substring(0, 50) + (alt.reasoning.length > 50 ? '...' : ''),\n      alt.expectedBenefit.substring(0, 40) + (alt.expectedBenefit.length > 40 ? '...' : ''),\n      `${(alt.switchingCost * 100).toFixed(0)}%`,\n      `${(alt.recommendationScore * 100).toFixed(0)}%`,\n    ]);\n\n    parts.push(section('Alternative Strategies', table(\n      ['Mode', 'Reasoning', 'Expected Benefit', 'Switching Cost', 'Score'],\n      altRows\n    )));\n  }\n\n  // Recommendation section\n  const recContent = keyValueSection({\n    'Action': thought.recommendation.action,\n    ...(thought.recommendation.targetMode ? { 'Target Mode': thought.recommendation.targetMode } : {}),\n    'Confidence': `${(thought.recommendation.confidence * 100).toFixed(1)}%`,\n    'Expected Improvement': thought.recommendation.expectedImprovement,\n  });\n\n  let recFull = recContent;\n  recFull += '\\n\\n**Justification:**\\n\\n' + thought.recommendation.justification;\n  recFull += '\\n\\n**Confidence Level:**\\n\\n' + progressBar(thought.recommendation.confidence * 100);\n\n  parts.push(section('Recommendation', recFull));\n\n  // Resource Allocation section\n  const resourceContent = keyValueSection({\n    'Time Spent': `${thought.resourceAllocation.timeSpent}ms`,\n    'Thoughts Remaining': thought.resourceAllocation.thoughtsRemaining,\n    'Complexity Level': thought.resourceAllocation.complexityLevel,\n    'Urgency': thought.resourceAllocation.urgency,\n    'Recommendation': thought.resourceAllocation.recommendation,\n  });\n\n  parts.push(section('Resource Allocation', resourceContent));\n\n  // Quality Metrics section\n  if (includeMetrics) {\n    const qualityRows = [\n      ['Logical Consistency', `${(thought.qualityMetrics.logicalConsistency * 100).toFixed(1)}%`],\n      ['Evidence Quality', `${(thought.qualityMetrics.evidenceQuality * 100).toFixed(1)}%`],\n      ['Completeness', `${(thought.qualityMetrics.completeness * 100).toFixed(1)}%`],\n      ['Originality', `${(thought.qualityMetrics.originality * 100).toFixed(1)}%`],\n      ['Clarity', `${(thought.qualityMetrics.clarity * 100).toFixed(1)}%`],\n      ['Overall Quality', `${(thought.qualityMetrics.overallQuality * 100).toFixed(1)}%`],\n    ];\n\n    let qualityContent = table(['Metric', 'Value'], qualityRows);\n    qualityContent += '\\n\\n**Overall Quality:**\\n\\n' + progressBar(thought.qualityMetrics.overallQuality * 100);\n\n    parts.push(section('Quality Metrics', qualityContent));\n  }\n\n  // Session Context section\n  const sessionContent = keyValueSection({\n    'Session ID': thought.sessionContext.sessionId,\n    'Total Thoughts': thought.sessionContext.totalThoughts,\n    'Mode Switches': thought.sessionContext.modeSwitches,\n    'Problem Type': thought.sessionContext.problemType,\n    'Modes Used': thought.sessionContext.modesUsed.join(', '),\n    ...(thought.sessionContext.historicalEffectiveness !== undefined\n      ? { 'Historical Effectiveness': `${(thought.sessionContext.historicalEffectiveness * 100).toFixed(1)}%` }\n      : {}),\n  });\n\n  parts.push(section('Session Context', sessionContent));\n\n  // Mermaid diagram\n  if (markdownIncludeMermaid) {\n    const mermaidDiagram = metaReasoningToMermaid(thought, 'default', true, true);\n    parts.push(section('Visualization', mermaidBlock(mermaidDiagram)));\n  }\n\n  return mdDocument('Meta-Reasoning Analysis', parts.join('\\n'), {\n    includeFrontmatter: markdownIncludeFrontmatter,\n    includeTableOfContents: markdownIncludeToc,\n    metadata: {\n      mode: 'metareasoning',\n      currentMode: thought.currentStrategy.mode,\n      recommendedAction: thought.recommendation.action,\n      overallQuality: thought.qualityMetrics.overallQuality,\n    },\n  });\n}\n","/**\r\n * Systems Thinking Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Systems thinking causal loop export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support\r\n * Phase 9: Added GraphML and TikZ export support\r\n */\r\n\r\nimport type { SystemsThinkingThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  addLegendItem,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to visual format\r\n */\r\nexport function exportSystemsThinkingCausalLoops(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return systemsThinkingToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return systemsThinkingToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return systemsThinkingToASCII(thought);\r\n    case 'svg':\r\n      return systemsThinkingToSVG(thought, options);\r\n    case 'graphml':\r\n      return systemsThinkingToGraphML(thought, options);\r\n    case 'tikz':\r\n      return systemsThinkingToTikZ(thought, options);\r\n    case 'html':\r\n      return systemsThinkingToHTML(thought, options);\r\n    case 'modelica':\r\n      return systemsThinkingToModelica(thought, options);\r\n    case 'uml':\r\n      return systemsThinkingToUML(thought, options);\r\n    case 'json':\r\n      return systemsThinkingToJSON(thought, options);\r\n    case 'markdown':\r\n      return systemsThinkingToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction systemsThinkingToMermaid(\r\n  thought: SystemsThinkingThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TB\\n';\r\n\r\n  if (thought.system) {\r\n    mermaid += `  System[\"${thought.system.name}\"]\\n\\n`;\r\n  }\r\n\r\n  if (thought.components && thought.components.length > 0) {\r\n    for (const component of thought.components) {\r\n      const compId = sanitizeId(component.id);\r\n      const label = includeLabels ? component.name : compId;\r\n      const shape = component.type === 'stock' ? ['[[', ']]'] : ['[', ']'];\r\n      mermaid += `  ${compId}${shape[0]}${label}${shape[1]}\\n`;\r\n    }\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopComponents = loop.components;\r\n\r\n      for (let i = 0; i < loopComponents.length; i++) {\r\n        const fromId = sanitizeId(loopComponents[i]);\r\n        const toId = sanitizeId(loopComponents[(i + 1) % loopComponents.length]);\r\n\r\n        const edgeLabel = includeMetrics\r\n          ? `|${loop.type} (${loop.strength.toFixed(2)})| `\r\n          : `|${loop.type}| `;\r\n\r\n        const edgeStyle = loop.type === 'reinforcing' ? '-->' : '-..->';\r\n        mermaid += `  ${fromId} ${edgeStyle}${edgeLabel}${toId}\\n`;\r\n      }\r\n    }\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome' && thought.components) {\r\n    const stockColor = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    const flowColor = colorScheme === 'pastel' ? '#fff3e0' : '#ffd699';\r\n\r\n    for (const component of thought.components) {\r\n      const compId = sanitizeId(component.id);\r\n      const color = component.type === 'stock' ? stockColor : flowColor;\r\n      mermaid += `  style ${compId} fill:${color}\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction systemsThinkingToDOT(\r\n  thought: SystemsThinkingThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph SystemsThinking {\\n';\r\n  dot += '  rankdir=TB;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  if (thought.components && thought.components.length > 0) {\r\n    for (const component of thought.components) {\r\n      const compId = sanitizeId(component.id);\r\n      const label = includeLabels ? component.name : compId;\r\n      const shape = component.type === 'stock' ? 'box' : 'ellipse';\r\n\r\n      dot += `  ${compId} [label=\"${label}\", shape=${shape}];\\n`;\r\n    }\r\n    dot += '\\n';\r\n  }\r\n\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopComponents = loop.components;\r\n\r\n      for (let i = 0; i < loopComponents.length; i++) {\r\n        const fromId = sanitizeId(loopComponents[i]);\r\n        const toId = sanitizeId(loopComponents[(i + 1) % loopComponents.length]);\r\n\r\n        const edgeLabel = includeMetrics\r\n          ? `, label=\"${loop.type} (${loop.strength.toFixed(2)})\"`\r\n          : `, label=\"${loop.type}\"`;\r\n\r\n        const edgeStyle = loop.type === 'reinforcing' ? 'solid' : 'dashed';\r\n        dot += `  ${fromId} -> ${toId} [style=${edgeStyle}${edgeLabel}];\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction systemsThinkingToASCII(thought: SystemsThinkingThought): string {\r\n  let ascii = 'Systems Thinking Model:\\n';\r\n  ascii += '======================\\n\\n';\r\n\r\n  if (thought.system) {\r\n    ascii += `System: ${thought.system.name}\\n`;\r\n    ascii += `${thought.system.description}\\n\\n`;\r\n  }\r\n\r\n  if (thought.components && thought.components.length > 0) {\r\n    ascii += 'Components:\\n';\r\n    for (const component of thought.components) {\r\n      const typeIcon = component.type === 'stock' ? '[]' : '()';\r\n      ascii += `  ${typeIcon} ${component.name}: ${component.description}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    ascii += 'Feedback Loops:\\n';\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopIcon = loop.type === 'reinforcing' ? '' : '';\r\n      ascii += `  ${loopIcon} ${loop.name} (${loop.type})\\n`;\r\n      ascii += `    Strength: ${loop.strength.toFixed(2)}\\n`;\r\n      ascii += `    Components: ${loop.components.join('  ')}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.leveragePoints && thought.leveragePoints.length > 0) {\r\n    ascii += 'Leverage Points:\\n';\r\n    for (const point of thought.leveragePoints) {\r\n      ascii += `   ${point.location} (effectiveness: ${point.effectiveness.toFixed(2)})\\n`;\r\n      ascii += `    ${point.description}\\n`;\r\n    }\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to native SVG format\r\n */\r\nfunction systemsThinkingToSVG(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = DEFAULT_SVG_OPTIONS.height,\r\n  } = options;\r\n\r\n  if (!thought.components || thought.components.length === 0) {\r\n    return generateSVGHeader(svgWidth, 200, 'Systems Thinking') +\r\n      '\\n  <text x=\"400\" y=\"100\" text-anchor=\"middle\" class=\"subtitle\">No system components defined</text>\\n' +\r\n      generateSVGFooter();\r\n  }\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n\r\n  // Layout components in a circular pattern\r\n  const centerX = svgWidth / 2;\r\n  const centerY = svgHeight / 2;\r\n  const radius = Math.min(centerX, centerY) - 100;\r\n\r\n  thought.components.forEach((component, index) => {\r\n    const angle = (2 * Math.PI * index) / (thought.components?.length || 1);\r\n    const x = centerX + radius * Math.cos(angle - Math.PI / 2);\r\n    const y = centerY + radius * Math.sin(angle - Math.PI / 2);\r\n\r\n    positions.set(component.id, {\r\n      id: component.id,\r\n      label: includeLabels ? component.name : component.id,\r\n      x,\r\n      y,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: component.type,\r\n    });\r\n  });\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Systems Thinking Model');\r\n\r\n  // Render feedback loop edges\r\n  svg += '\\n  <!-- Feedback Loops -->\\n  <g class=\"edges\">';\r\n  if (thought.feedbackLoops) {\r\n    for (const loop of thought.feedbackLoops) {\r\n      for (let i = 0; i < loop.components.length; i++) {\r\n        const fromId = loop.components[i];\r\n        const toId = loop.components[(i + 1) % loop.components.length];\r\n        const fromPos = positions.get(fromId);\r\n        const toPos = positions.get(toId);\r\n        if (fromPos && toPos) {\r\n          const label = includeMetrics ? `${loop.type[0].toUpperCase()} (${loop.strength.toFixed(1)})` : undefined;\r\n          const style = loop.type === 'reinforcing' ? 'solid' : 'dashed';\r\n          svg += renderEdge(fromPos, toPos, { label, style });\r\n        }\r\n      }\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Components -->\\n  <g class=\"nodes\">';\r\n\r\n  const stockColors = getNodeColor('primary', colorScheme);\r\n  const flowColors = getNodeColor('secondary', colorScheme);\r\n\r\n  for (const [, pos] of positions) {\r\n    if (pos.type === 'stock') {\r\n      svg += renderRectNode(pos, stockColors);\r\n    } else {\r\n      svg += renderEllipseNode(pos, flowColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Components', value: thought.components.length },\r\n      { label: 'Feedback Loops', value: thought.feedbackLoops?.length || 0 },\r\n      { label: 'Leverage Points', value: thought.leveragePoints?.length || 0 },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 110, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Stock', color: stockColors },\r\n    { label: 'Flow', color: flowColors, shape: 'ellipse' as const },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 80, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to GraphML format\r\n */\r\nfunction systemsThinkingToGraphML(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n\r\n  // Create nodes for system components\r\n  if (thought.components && thought.components.length > 0) {\r\n    for (const component of thought.components) {\r\n      nodes.push({\r\n        id: sanitizeId(component.id),\r\n        label: component.name,\r\n        type: component.type,\r\n        metadata: {\r\n          description: component.description,\r\n          unit: component.unit,\r\n          initialValue: component.initialValue,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create edges for feedback loops\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    let edgeCount = 0;\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopComponents = loop.components;\r\n\r\n      for (let i = 0; i < loopComponents.length; i++) {\r\n        const fromId = sanitizeId(loopComponents[i]);\r\n        const toId = sanitizeId(loopComponents[(i + 1) % loopComponents.length]);\r\n\r\n        const label = includeLabels && includeMetrics\r\n          ? `${loop.type} (${loop.strength.toFixed(2)})`\r\n          : includeLabels\r\n            ? loop.type\r\n            : undefined;\r\n\r\n        edges.push({\r\n          id: `e${edgeCount++}`,\r\n          source: fromId,\r\n          target: toId,\r\n          label,\r\n          directed: true,\r\n          metadata: {\r\n            type: loop.type,\r\n            weight: loop.strength,\r\n            polarity: loop.polarity,\r\n            loopName: loop.name,\r\n          },\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Systems Thinking Causal Loops',\r\n    directed: true,\r\n    includeLabels,\r\n    includeMetadata: includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to TikZ format\r\n */\r\nfunction systemsThinkingToTikZ(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const { colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n\r\n  // Create TikZ nodes for system components\r\n  if (thought.components && thought.components.length > 0) {\r\n    const numComponents = thought.components.length;\r\n    const radius = 4; // Radius of circular layout\r\n\r\n    thought.components.forEach((component, index) => {\r\n      const angle = (2 * Math.PI * index) / numComponents;\r\n      const x = 4 + radius * Math.cos(angle - Math.PI / 2);\r\n      const y = -2 + radius * Math.sin(angle - Math.PI / 2);\r\n\r\n      nodes.push({\r\n        id: sanitizeId(component.id),\r\n        label: component.name,\r\n        x,\r\n        y,\r\n        type: component.type === 'stock' ? 'primary' : 'secondary',\r\n        shape: component.type === 'stock' ? 'rectangle' : 'ellipse',\r\n      });\r\n    });\r\n  }\r\n\r\n  // Create TikZ edges for feedback loops with curved/bent edges\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopComponents = loop.components;\r\n\r\n      for (let i = 0; i < loopComponents.length; i++) {\r\n        const fromId = sanitizeId(loopComponents[i]);\r\n        const toId = sanitizeId(loopComponents[(i + 1) % loopComponents.length]);\r\n\r\n        const label = includeLabels && includeMetrics\r\n          ? `${loop.type[0].toUpperCase()} (${loop.strength.toFixed(2)})`\r\n          : includeLabels\r\n            ? loop.type[0].toUpperCase()\r\n            : undefined;\r\n\r\n        // Mark reinforcing vs balancing loops differently\r\n        const style = loop.type === 'reinforcing' ? 'solid' : 'dashed';\r\n        // Use curved edges for feedback loops\r\n        const bend = loop.type === 'reinforcing' ? 'left' : 'right';\r\n\r\n        edges.push({\r\n          source: fromId,\r\n          target: toId,\r\n          label,\r\n          style,\r\n          directed: true,\r\n          bend,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Systems Thinking Causal Loops',\r\n    colorScheme,\r\n    includeLabels,\r\n    includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to HTML format\r\n */\r\nfunction systemsThinkingToHTML(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Systems Thinking Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // System Overview\r\n  if (thought.system) {\r\n    const systemContent = `\r\n      <p><strong>Name:</strong> ${escapeHTML(thought.system.name)}</p>\r\n      <p>${escapeHTML(thought.system.description)}</p>\r\n    `;\r\n    html += renderSection('System Overview', systemContent, '');\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">\\n';\r\n    html += renderMetricCard('Components', thought.components?.length || 0, 'primary');\r\n    html += renderMetricCard('Feedback Loops', thought.feedbackLoops?.length || 0, 'info');\r\n    html += renderMetricCard('Leverage Points', thought.leveragePoints?.length || 0, 'success');\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Components Table\r\n  if (thought.components && thought.components.length > 0) {\r\n    const componentRows = thought.components.map(c => [\r\n      c.name,\r\n      c.type,\r\n      c.description,\r\n      c.unit || 'N/A',\r\n      c.initialValue !== undefined ? String(c.initialValue) : 'N/A',\r\n    ]);\r\n    const componentsTable = renderTable(\r\n      ['Name', 'Type', 'Description', 'Unit', 'Initial Value'],\r\n      componentRows,\r\n      { caption: 'System Components' }\r\n    );\r\n    html += renderSection('Components', componentsTable, '');\r\n  }\r\n\r\n  // Feedback Loops\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    let loopsContent = '';\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopType = loop.type === 'reinforcing' ? 'success' : 'warning';\r\n      const badge = renderBadge(loop.type.toUpperCase(), loopType as any);\r\n      loopsContent += `\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">${escapeHTML(loop.name)} ${badge}</div>\r\n          <p><strong>Polarity:</strong> ${escapeHTML(loop.polarity)}</p>\r\n          <p><strong>Strength:</strong> ${loop.strength.toFixed(2)}</p>\r\n          <p><strong>Components:</strong> ${loop.components.map(c => escapeHTML(c)).join('  ')}</p>\r\n          ${loop.description ? `<p>${escapeHTML(loop.description)}</p>` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n    html += renderSection('Feedback Loops', loopsContent, '');\r\n  }\r\n\r\n  // Leverage Points\r\n  if (thought.leveragePoints && thought.leveragePoints.length > 0) {\r\n    const leverageRows = thought.leveragePoints.map(lp => [\r\n      lp.location,\r\n      lp.effectiveness.toFixed(2),\r\n      lp.description,\r\n    ]);\r\n    const leverageTable = renderTable(\r\n      ['Location', 'Effectiveness', 'Description'],\r\n      leverageRows,\r\n      { caption: 'Leverage Points' }\r\n    );\r\n    html += renderSection('Leverage Points', leverageTable, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to Modelica format\r\n */\r\nfunction systemsThinkingToModelica(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n  const systemName = thought.system ? sanitizeModelicaId(thought.system.name) : 'SystemsThinking';\r\n\r\n  let modelica = `package ${systemName}\\n`;\r\n  modelica += `  \"${thought.system?.description || 'Systems thinking model with feedback loops'}\"\\n\\n`;\r\n\r\n  // Create individual component models (stocks and flows)\r\n  if (thought.components && thought.components.length > 0) {\r\n    modelica += '  // System Components\\n';\r\n\r\n    for (const component of thought.components) {\r\n      const compName = sanitizeModelicaId(component.name);\r\n      const unit = component.unit ? escapeModelicaString(component.unit) : '';\r\n      const initialValue = component.initialValue !== undefined ? component.initialValue : 0;\r\n\r\n      if (component.type === 'stock') {\r\n        // Stocks are state variables that accumulate\r\n        modelica += `  model ${compName}\\n`;\r\n        modelica += `    \"${escapeModelicaString(component.description)}\"\\n`;\r\n        modelica += `    parameter Real initial_value = ${initialValue}${unit ? ` \"${unit}\"` : ''};\\n`;\r\n        modelica += `    Real value(start=initial_value)${unit ? `(unit=\"${unit}\")` : ''};\\n`;\r\n        modelica += `    input Real inflow${unit ? `(unit=\"${unit}/s\")` : ''};\\n`;\r\n        modelica += `    input Real outflow${unit ? `(unit=\"${unit}/s\")` : ''};\\n`;\r\n        modelica += '  equation\\n';\r\n        modelica += '    der(value) = inflow - outflow;\\n';\r\n        modelica += '  end ' + compName + ';\\n\\n';\r\n      } else {\r\n        // Flows are rate variables\r\n        modelica += `  model ${compName}\\n`;\r\n        modelica += `    \"${escapeModelicaString(component.description)}\"\\n`;\r\n        modelica += `    output Real flow_rate${unit ? `(unit=\"${unit}/s\")` : ''};\\n`;\r\n        modelica += `    input Real source_value${unit ? `(unit=\"${unit}\")` : ''};\\n`;\r\n        modelica += `    input Real sink_value${unit ? `(unit=\"${unit}\")` : ''};\\n`;\r\n        modelica += `    parameter Real coefficient = 1.0;\\n`;\r\n        modelica += '  equation\\n';\r\n        modelica += '    flow_rate = coefficient * (source_value - sink_value);\\n';\r\n        modelica += '  end ' + compName + ';\\n\\n';\r\n      }\r\n    }\r\n  }\r\n\r\n  // Create feedback loop models\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    modelica += '  // Feedback Loop Models\\n';\r\n\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopName = sanitizeModelicaId(loop.name);\r\n      const loopType = loop.type === 'reinforcing' ? 'Reinforcing' : 'Balancing';\r\n\r\n      modelica += `  model ${loopName}\\n`;\r\n      modelica += `    \"${loopType} feedback loop: ${escapeModelicaString(loop.description || loop.name)}\"\\n`;\r\n      if (includeMetrics) {\r\n        modelica += `    // Strength: ${loop.strength.toFixed(3)}\\n`;\r\n        modelica += `    // Polarity: ${loop.polarity}\\n`;\r\n      }\r\n      modelica += `    parameter Real strength = ${loop.strength.toFixed(3)};\\n`;\r\n      modelica += `    parameter String loop_type = \"${loop.type}\";\\n`;\r\n\r\n      // Add component instances for this loop\r\n      const loopComponents = loop.components.map(c => sanitizeModelicaId(c));\r\n      modelica += `    // Components in loop: ${loopComponents.join('  ')}\\n`;\r\n\r\n      // Create connections for the feedback loop\r\n      modelica += '  equation\\n';\r\n      modelica += `    // ${loopType} feedback loop dynamics\\n`;\r\n      modelica += '    // Loop components interact with strength factor\\n';\r\n\r\n      modelica += '  end ' + loopName + ';\\n\\n';\r\n    }\r\n  }\r\n\r\n  // Create main system model that integrates components and feedback loops\r\n  modelica += `  model ${systemName}_Complete\\n`;\r\n  modelica += `    \"${thought.system?.description || 'Complete systems thinking model'}\"\\n`;\r\n\r\n  if (includeMetrics && thought.leveragePoints && thought.leveragePoints.length > 0) {\r\n    modelica += '\\n    // Leverage Points:\\n';\r\n    for (const lp of thought.leveragePoints) {\r\n      modelica += `    // - ${lp.location} (effectiveness: ${lp.effectiveness.toFixed(2)})\\n`;\r\n      modelica += `    //   ${lp.description}\\n`;\r\n    }\r\n  }\r\n\r\n  modelica += '\\n    // Integrate component models and feedback loops here\\n';\r\n  modelica += '  end ' + systemName + '_Complete;\\n\\n';\r\n\r\n  modelica += 'end ' + systemName + ';\\n';\r\n\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to UML format\r\n */\r\nfunction systemsThinkingToUML(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Create UML nodes for system components\r\n  if (thought.components && thought.components.length > 0) {\r\n    for (const component of thought.components) {\r\n      const attributes: string[] = [];\r\n\r\n      if (component.unit) {\r\n        attributes.push(`unit: ${component.unit}`);\r\n      }\r\n      if (component.initialValue !== undefined) {\r\n        attributes.push(`initialValue: ${component.initialValue}`);\r\n      }\r\n      if (includeMetrics) {\r\n        attributes.push(`type: ${component.type}`);\r\n      }\r\n\r\n      nodes.push({\r\n        id: sanitizeId(component.id),\r\n        label: component.name,\r\n        shape: component.type === 'stock' ? 'class' : 'component',\r\n        stereotype: component.type,\r\n        attributes,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Create UML edges for feedback loops\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopComponents = loop.components;\r\n\r\n      for (let i = 0; i < loopComponents.length; i++) {\r\n        const fromId = sanitizeId(loopComponents[i]);\r\n        const toId = sanitizeId(loopComponents[(i + 1) % loopComponents.length]);\r\n\r\n        const label = includeLabels && includeMetrics\r\n          ? `${loop.type} (${loop.strength.toFixed(2)})`\r\n          : includeLabels\r\n            ? loop.type\r\n            : undefined;\r\n\r\n        // Reinforcing loops are associations, balancing loops are dependencies\r\n        const edgeType = loop.type === 'reinforcing' ? 'association' : 'dependency';\r\n\r\n        edges.push({\r\n          source: fromId,\r\n          target: toId,\r\n          type: edgeType,\r\n          label,\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Systems Thinking Causal Loop Diagram',\r\n    diagramType: 'component',\r\n    includeLabels,\r\n    includeMetrics,\r\n  });\r\n}\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to JSON format\r\n */\r\nfunction systemsThinkingToJSON(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph('Systems Thinking Causal Loop Diagram', 'systems-thinking', {\r\n    includeMetrics,\r\n  });\r\n\r\n  // Add metadata about the system\r\n  if (thought.system) {\r\n    graph.metadata.systemName = thought.system.name;\r\n    graph.metadata.systemDescription = thought.system.description;\r\n  }\r\n\r\n  // Add nodes for system components\r\n  if (thought.components && thought.components.length > 0) {\r\n    for (const component of thought.components) {\r\n      addNode(graph, {\r\n        id: component.id,\r\n        label: component.name,\r\n        type: component.type,\r\n        shape: component.type === 'stock' ? 'rectangle' : 'ellipse',\r\n        metadata: {\r\n          description: component.description,\r\n          unit: component.unit,\r\n          initialValue: component.initialValue,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add edges for feedback loops\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    let edgeCount = 0;\r\n    for (const loop of thought.feedbackLoops) {\r\n      const loopComponents = loop.components;\r\n\r\n      for (let i = 0; i < loopComponents.length; i++) {\r\n        const fromId = loopComponents[i];\r\n        const toId = loopComponents[(i + 1) % loopComponents.length];\r\n\r\n        addEdge(graph, {\r\n          id: `edge_${edgeCount++}`,\r\n          source: fromId,\r\n          target: toId,\r\n          label: `${loop.type} (${loop.strength.toFixed(2)})`,\r\n          type: loop.type,\r\n          weight: loop.strength,\r\n          style: loop.type === 'reinforcing' ? 'solid' : 'dashed',\r\n          directed: true,\r\n          metadata: {\r\n            loopName: loop.name,\r\n            polarity: loop.polarity,\r\n            description: loop.description,\r\n          },\r\n        });\r\n      }\r\n    }\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'components', thought.components?.length || 0);\r\n    addMetric(graph, 'feedbackLoops', thought.feedbackLoops?.length || 0);\r\n    addMetric(graph, 'leveragePoints', thought.leveragePoints?.length || 0);\r\n\r\n    // Calculate average loop strength\r\n    if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n      const avgStrength = thought.feedbackLoops.reduce((sum, loop) => sum + loop.strength, 0) / thought.feedbackLoops.length;\r\n      addMetric(graph, 'averageLoopStrength', parseFloat(avgStrength.toFixed(3)));\r\n    }\r\n\r\n    // Count reinforcing vs balancing loops\r\n    if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n      const reinforcingCount = thought.feedbackLoops.filter(l => l.type === 'reinforcing').length;\r\n      const balancingCount = thought.feedbackLoops.filter(l => l.type === 'balancing').length;\r\n      addMetric(graph, 'reinforcingLoops', reinforcingCount);\r\n      addMetric(graph, 'balancingLoops', balancingCount);\r\n    }\r\n  }\r\n\r\n  // Add legend items\r\n  addLegendItem(graph, 'stock', '#a8d5ff');\r\n  addLegendItem(graph, 'flow', '#ffd699');\r\n  addLegendItem(graph, 'reinforcing', '#90ee90', 'solid');\r\n  addLegendItem(graph, 'balancing', '#ffb3ba', 'dashed');\r\n\r\n  // Add leverage points to metadata\r\n  if (thought.leveragePoints && thought.leveragePoints.length > 0) {\r\n    graph.metadata.leveragePoints = thought.leveragePoints.map(lp => ({\r\n      location: lp.location,\r\n      effectiveness: lp.effectiveness,\r\n      description: lp.description,\r\n    }));\r\n  }\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export systems thinking causal loop diagram to Markdown format\r\n */\r\nfunction systemsThinkingToMarkdown(thought: SystemsThinkingThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // System Overview\r\n  if (thought.system) {\r\n    const systemContent = keyValueSection({\r\n      'Name': thought.system.name,\r\n      'Description': thought.system.description,\r\n    });\r\n    parts.push(section('System Overview', systemContent));\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Components': thought.components?.length || 0,\r\n      'Feedback Loops': thought.feedbackLoops?.length || 0,\r\n      'Leverage Points': thought.leveragePoints?.length || 0,\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Components\r\n  if (thought.components && thought.components.length > 0) {\r\n    const componentRows = thought.components.map(c => [\r\n      c.name,\r\n      c.type,\r\n      c.description,\r\n      c.unit || 'N/A',\r\n      c.initialValue !== undefined ? String(c.initialValue) : 'N/A',\r\n    ]);\r\n    const componentsTable = table(\r\n      ['Name', 'Type', 'Description', 'Unit', 'Initial Value'],\r\n      componentRows\r\n    );\r\n    parts.push(section('Components', componentsTable));\r\n  }\r\n\r\n  // Feedback Loops\r\n  if (thought.feedbackLoops && thought.feedbackLoops.length > 0) {\r\n    const loopItems = thought.feedbackLoops.map(loop =>\r\n      `**${loop.name}** (${loop.type})\\n  - Strength: ${loop.strength.toFixed(2)}\\n  - Polarity: ${loop.polarity}\\n  - Components: ${loop.components.join('  ')}`\r\n    );\r\n    parts.push(section('Feedback Loops', list(loopItems)));\r\n  }\r\n\r\n  // Leverage Points\r\n  if (thought.leveragePoints && thought.leveragePoints.length > 0) {\r\n    const leverageRows = thought.leveragePoints.map(lp => [\r\n      lp.location,\r\n      lp.effectiveness.toFixed(2),\r\n      lp.description,\r\n    ]);\r\n    const leverageTable = table(\r\n      ['Location', 'Effectiveness', 'Description'],\r\n      leverageRows\r\n    );\r\n    parts.push(section('Leverage Points', leverageTable));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = systemsThinkingToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Causal Loop Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Systems Thinking Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: { mode: 'systems-thinking' },\r\n  });\r\n}\r\n","/**\r\n * Scientific Method Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Scientific method experiment export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support, GraphML, TikZ\r\n */\r\n\r\nimport type { ScientificMethodThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateActivityDiagram,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export scientific method experiment flow to visual format\r\n */\r\nexport function exportScientificMethodExperiment(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return scientificMethodToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return scientificMethodToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return scientificMethodToASCII(thought);\r\n    case 'svg':\r\n      return scientificMethodToSVG(thought, options);\r\n    case 'graphml':\r\n      return scientificMethodToGraphML(thought, options);\r\n    case 'tikz':\r\n      return scientificMethodToTikZ(thought, options);\r\n    case 'html':\r\n      return scientificMethodToHTML(thought, options);\r\n    case 'modelica':\r\n      return scientificMethodToModelica(thought, options);\r\n    case 'uml':\r\n      return scientificMethodToUML(thought, options);\r\n    case 'json':\r\n      return scientificMethodToJSON(thought, options);\r\n    case 'markdown':\r\n      return scientificMethodToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction scientificMethodToMermaid(\r\n  thought: ScientificMethodThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  if (thought.researchQuestion) {\r\n    mermaid += `  RQ[\"Research Question: ${thought.researchQuestion.question.substring(0, 60)}...\"]\\n`;\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    for (const hypothesis of thought.scientificHypotheses) {\r\n      const hypId = sanitizeId(hypothesis.id);\r\n      const label = includeLabels ? hypothesis.statement.substring(0, 50) + '...' : hypId;\r\n      mermaid += `  ${hypId}[\"H: ${label}\"]\\n`;\r\n      if (thought.researchQuestion) {\r\n        mermaid += `  RQ --> ${hypId}\\n`;\r\n      }\r\n    }\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  if (thought.experiment) {\r\n    mermaid += `  Exp[\"Experiment: ${thought.experiment.design}\"]\\n`;\r\n    if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n      for (const hypothesis of thought.scientificHypotheses) {\r\n        const hypId = sanitizeId(hypothesis.id);\r\n        mermaid += `  ${hypId} --> Exp\\n`;\r\n      }\r\n    }\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  if (thought.data) {\r\n    mermaid += `  Data[\"Data Collection: ${(thought.experiment as any)?.sampleSize || 0} samples\"]\\n`;\r\n    if (thought.experiment) {\r\n      mermaid += `  Exp --> Data\\n`;\r\n    }\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  if (thought.analysis) {\r\n    mermaid += `  Stats[\"Statistical Analysis\"]\\n`;\r\n    if (thought.data) {\r\n      mermaid += `  Data --> Stats\\n`;\r\n    }\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  if (thought.conclusion) {\r\n    const conclusionId = 'Conclusion';\r\n    const supportLabel = includeMetrics && thought.conclusion.confidence\r\n      ? ` (conf: ${thought.conclusion.confidence.toFixed(2)})`\r\n      : '';\r\n    mermaid += `  ${conclusionId}[\"Conclusion: ${thought.conclusion.statement.substring(0, 50)}...${supportLabel}\"]\\n`;\r\n    if (thought.analysis) {\r\n      mermaid += `  Stats --> ${conclusionId}\\n`;\r\n    }\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const questionColor = colorScheme === 'pastel' ? '#fff3e0' : '#ffd699';\r\n    const hypothesisColor = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    const conclusionColor = colorScheme === 'pastel' ? '#e8f5e9' : '#a5d6a7';\r\n\r\n    if (thought.researchQuestion) {\r\n      mermaid += `  style RQ fill:${questionColor}\\n`;\r\n    }\r\n    if (thought.scientificHypotheses) {\r\n      for (const hypothesis of thought.scientificHypotheses) {\r\n        const hypId = sanitizeId(hypothesis.id);\r\n        mermaid += `  style ${hypId} fill:${hypothesisColor}\\n`;\r\n      }\r\n    }\r\n    if (thought.conclusion) {\r\n      mermaid += `  style Conclusion fill:${conclusionColor}\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction scientificMethodToDOT(\r\n  thought: ScientificMethodThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph ScientificMethod {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  if (thought.researchQuestion) {\r\n    const label = includeLabels ? thought.researchQuestion.question.substring(0, 60) + '...' : 'RQ';\r\n    dot += `  RQ [label=\"Research Question:\\\\n${label}\", shape=ellipse];\\n\\n`;\r\n  }\r\n\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    for (const hypothesis of thought.scientificHypotheses) {\r\n      const hypId = sanitizeId(hypothesis.id);\r\n      const label = includeLabels ? hypothesis.statement.substring(0, 50) + '...' : hypId;\r\n      dot += `  ${hypId} [label=\"Hypothesis:\\\\n${label}\"];\\n`;\r\n      if (thought.researchQuestion) {\r\n        dot += `  RQ -> ${hypId};\\n`;\r\n      }\r\n    }\r\n    dot += '\\n';\r\n  }\r\n\r\n  if (thought.experiment) {\r\n    const label = includeLabels ? thought.experiment.design : 'Exp';\r\n    dot += `  Exp [label=\"Experiment:\\\\n${label}\"];\\n`;\r\n    if (thought.scientificHypotheses) {\r\n      for (const hypothesis of thought.scientificHypotheses) {\r\n        const hypId = sanitizeId(hypothesis.id);\r\n        dot += `  ${hypId} -> Exp;\\n`;\r\n      }\r\n    }\r\n    dot += '\\n';\r\n  }\r\n\r\n  if (thought.data) {\r\n    const sampleLabel = includeMetrics ? `\\\\nSamples: ${(thought.experiment as any)?.sampleSize || 0}` : '';\r\n    dot += `  Data [label=\"Data Collection${sampleLabel}\"];\\n`;\r\n    if (thought.experiment) {\r\n      dot += `  Exp -> Data;\\n`;\r\n    }\r\n  }\r\n\r\n  if (thought.analysis) {\r\n    dot += `  Stats [label=\"Statistical Analysis\"];\\n`;\r\n    if (thought.data) {\r\n      dot += `  Data -> Stats;\\n`;\r\n    }\r\n  }\r\n\r\n  if (thought.conclusion) {\r\n    const label = includeLabels ? thought.conclusion.statement.substring(0, 50) + '...' : 'Conclusion';\r\n    const confLabel = includeMetrics && thought.conclusion.confidence\r\n      ? `\\\\nconf: ${thought.conclusion.confidence.toFixed(2)}`\r\n      : '';\r\n    dot += `  Conclusion [label=\"Conclusion:\\\\n${label}${confLabel}\", shape=doubleoctagon];\\n`;\r\n    if (thought.analysis) {\r\n      dot += `  Stats -> Conclusion;\\n`;\r\n    }\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction scientificMethodToASCII(thought: ScientificMethodThought): string {\r\n  let ascii = 'Scientific Method Process:\\n';\r\n  ascii += '==========================\\n\\n';\r\n\r\n  if (thought.researchQuestion) {\r\n    ascii += `Research Question: ${thought.researchQuestion.question}\\n`;\r\n    ascii += `Background: ${thought.researchQuestion.background}\\n\\n`;\r\n  }\r\n\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    ascii += 'Hypotheses:\\n';\r\n    for (const hypothesis of thought.scientificHypotheses) {\r\n      const typeIcon = hypothesis.type === 'null' ? 'H' : 'H';\r\n      ascii += `  ${typeIcon} ${hypothesis.statement}\\n`;\r\n      if (hypothesis.prediction) {\r\n        ascii += `    Prediction: ${hypothesis.prediction}\\n`;\r\n      }\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.experiment) {\r\n    ascii += `Experiment: ${thought.experiment.design}\\n`;\r\n    ascii += `Type: ${thought.experiment.type}\\n`;\r\n    ascii += `Design: ${thought.experiment.design}\\n\\n`;\r\n  }\r\n\r\n  if (thought.data) {\r\n    ascii += 'Data Collection:\\n';\r\n    ascii += `  Sample Size: ${(thought.experiment as any)?.sampleSize || 0}\\n`;\r\n    ascii += `  Method: ${thought.data.method}\\n`;\r\n    if (thought.data.dataQuality) {\r\n      ascii += `  Quality:\\n`;\r\n      ascii += `    Completeness: ${thought.data.dataQuality.completeness.toFixed(2)}\\n`;\r\n      ascii += `    Reliability: ${thought.data.dataQuality.reliability.toFixed(2)}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.analysis && thought.analysis.tests) {\r\n    ascii += 'Statistical Tests:\\n';\r\n    for (const test of thought.analysis.tests) {\r\n      ascii += `   ${test.name}\\n`;\r\n      ascii += `    p-value: ${test.pValue.toFixed(4)}, : ${test.alpha}\\n`;\r\n      ascii += `    Result: ${test.result}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.conclusion) {\r\n    ascii += 'Conclusion:\\n';\r\n    ascii += `${thought.conclusion.statement}\\n`;\r\n    if ((thought.conclusion as any).supportedHypotheses) {\r\n      ascii += `Supported hypotheses: ${(thought.conclusion as any).supportedHypotheses.join(', ')}\\n`;\r\n    }\r\n    if (thought.conclusion.confidence) {\r\n      ascii += `Confidence: ${thought.conclusion.confidence.toFixed(2)}\\n`;\r\n    }\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export scientific method experiment flow to native SVG format\r\n */\r\nfunction scientificMethodToSVG(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n  const nodeSpacing = 120;\r\n  let currentY = 80;\r\n\r\n  // Research Question\r\n  if (thought.researchQuestion) {\r\n    positions.set('RQ', {\r\n      id: 'RQ',\r\n      label: includeLabels ? `RQ: ${thought.researchQuestion.question.substring(0, 40)}...` : 'Research Question',\r\n      x: svgWidth / 2,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'question',\r\n    });\r\n    currentY += nodeSpacing;\r\n  }\r\n\r\n  // Hypotheses\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    thought.scientificHypotheses.forEach((hypothesis) => {\r\n      positions.set(hypothesis.id, {\r\n        id: hypothesis.id,\r\n        label: includeLabels ? `H: ${hypothesis.statement.substring(0, 30)}...` : hypothesis.id,\r\n        x: svgWidth / 2,\r\n        y: currentY,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        type: 'hypothesis',\r\n      });\r\n      currentY += nodeSpacing;\r\n    });\r\n  }\r\n\r\n  // Experiment\r\n  if (thought.experiment) {\r\n    positions.set('Exp', {\r\n      id: 'Exp',\r\n      label: 'Experiment',\r\n      x: svgWidth / 2,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'experiment',\r\n    });\r\n    currentY += nodeSpacing;\r\n  }\r\n\r\n  // Data\r\n  if (thought.data) {\r\n    positions.set('Data', {\r\n      id: 'Data',\r\n      label: 'Data Collection',\r\n      x: svgWidth / 2,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'data',\r\n    });\r\n    currentY += nodeSpacing;\r\n  }\r\n\r\n  // Analysis\r\n  if (thought.analysis) {\r\n    positions.set('Stats', {\r\n      id: 'Stats',\r\n      label: 'Statistical Analysis',\r\n      x: svgWidth / 2,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'analysis',\r\n    });\r\n    currentY += nodeSpacing;\r\n  }\r\n\r\n  // Conclusion\r\n  if (thought.conclusion) {\r\n    positions.set('Conclusion', {\r\n      id: 'Conclusion',\r\n      label: includeLabels ? `Conclusion: ${thought.conclusion.statement.substring(0, 30)}...` : 'Conclusion',\r\n      x: svgWidth / 2,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'conclusion',\r\n    });\r\n  }\r\n\r\n  const actualHeight = Math.max(DEFAULT_SVG_OPTIONS.height, currentY + 100);\r\n\r\n  let svg = generateSVGHeader(svgWidth, actualHeight, 'Scientific Method Process');\r\n\r\n  // Render edges (linear flow)\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n  const nodeIds = ['RQ', ...thought.scientificHypotheses?.map(h => h.id) || [], 'Exp', 'Data', 'Stats', 'Conclusion'];\r\n  for (let i = 0; i < nodeIds.length - 1; i++) {\r\n    const fromPos = positions.get(nodeIds[i]);\r\n    const toPos = positions.get(nodeIds[i + 1]);\r\n    if (fromPos && toPos) {\r\n      svg += renderEdge(fromPos, toPos);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  const questionColors = getNodeColor('tertiary', colorScheme);\r\n  const hypothesisColors = getNodeColor('primary', colorScheme);\r\n  const conclusionColors = getNodeColor('success', colorScheme);\r\n  const neutralColors = getNodeColor('neutral', colorScheme);\r\n\r\n  for (const [, pos] of positions) {\r\n    if (pos.type === 'question') {\r\n      svg += renderEllipseNode(pos, questionColors);\r\n    } else if (pos.type === 'hypothesis') {\r\n      svg += renderRectNode(pos, hypothesisColors);\r\n    } else if (pos.type === 'conclusion') {\r\n      svg += renderStadiumNode(pos, conclusionColors);\r\n    } else {\r\n      svg += renderRectNode(pos, neutralColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Hypotheses', value: thought.scientificHypotheses?.length || 0 },\r\n      { label: 'Confidence', value: thought.conclusion?.confidence?.toFixed(2) || 'N/A' },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, actualHeight - 110, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Research Question', color: questionColors, shape: 'ellipse' as const },\r\n    { label: 'Hypothesis', color: hypothesisColors },\r\n    { label: 'Conclusion', color: conclusionColors, shape: 'stadium' as const },\r\n  ];\r\n  svg += renderLegend(20, actualHeight - 110, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export scientific method experiment flow to GraphML format\r\n */\r\nfunction scientificMethodToGraphML(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeIndex = 0;\r\n\r\n  const stages: Array<{ id: string; label: string; type: string; exists: boolean }> = [];\r\n\r\n  // Research Question\r\n  if (thought.researchQuestion) {\r\n    stages.push({\r\n      id: 'RQ',\r\n      label: includeLabels ? `Research Question: ${thought.researchQuestion.question.substring(0, 60)}...` : 'Research Question',\r\n      type: 'question',\r\n      exists: true,\r\n    });\r\n  }\r\n\r\n  // Hypothesis (simplified - take first one or summarize)\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    const hypLabel = includeLabels\r\n      ? `Hypothesis: ${thought.scientificHypotheses[0].statement.substring(0, 60)}...`\r\n      : 'Hypothesis';\r\n    stages.push({\r\n      id: 'Hypothesis',\r\n      label: hypLabel,\r\n      type: 'hypothesis',\r\n      exists: true,\r\n    });\r\n  }\r\n\r\n  // Experiment\r\n  if (thought.experiment) {\r\n    stages.push({\r\n      id: 'Experiment',\r\n      label: includeLabels ? `Experiment: ${thought.experiment.design}` : 'Experiment',\r\n      type: 'experiment',\r\n      exists: true,\r\n    });\r\n  }\r\n\r\n  // Data Collection\r\n  if (thought.data) {\r\n    const sampleSize = (thought.experiment as any)?.sampleSize || 0;\r\n    stages.push({\r\n      id: 'Data',\r\n      label: includeLabels ? `Data Collection: ${sampleSize} samples` : 'Data Collection',\r\n      type: 'data',\r\n      exists: true,\r\n    });\r\n  }\r\n\r\n  // Statistical Analysis\r\n  if (thought.analysis) {\r\n    stages.push({\r\n      id: 'Analysis',\r\n      label: 'Statistical Analysis',\r\n      type: 'analysis',\r\n      exists: true,\r\n    });\r\n  }\r\n\r\n  // Conclusion\r\n  if (thought.conclusion) {\r\n    const confLabel = thought.conclusion.confidence\r\n      ? ` (confidence: ${thought.conclusion.confidence.toFixed(2)})`\r\n      : '';\r\n    stages.push({\r\n      id: 'Conclusion',\r\n      label: includeLabels\r\n        ? `Conclusion: ${thought.conclusion.statement.substring(0, 60)}...${confLabel}`\r\n        : 'Conclusion',\r\n      type: 'conclusion',\r\n      exists: true,\r\n    });\r\n  }\r\n\r\n  // Create nodes\r\n  for (const stage of stages) {\r\n    nodes.push({\r\n      id: stage.id,\r\n      label: stage.label,\r\n      type: stage.type,\r\n    });\r\n  }\r\n\r\n  // Create linear flow edges\r\n  for (let i = 0; i < stages.length - 1; i++) {\r\n    edges.push({\r\n      id: `e${edgeIndex++}`,\r\n      source: stages[i].id,\r\n      target: stages[i + 1].id,\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Scientific Method Experiment',\r\n    directed: true,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export scientific method experiment flow to TikZ format\r\n */\r\nfunction scientificMethodToTikZ(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, colorScheme = 'default' } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n  let xPosition = 0;\r\n  const xSpacing = 3;\r\n\r\n  const stages: Array<{ id: string; label: string; type: string; shape?: TikZNode['shape'] }> = [];\r\n\r\n  // Research Question\r\n  if (thought.researchQuestion) {\r\n    stages.push({\r\n      id: 'RQ',\r\n      label: includeLabels ? 'Research\\nQuestion' : 'RQ',\r\n      type: 'tertiary',\r\n      shape: 'ellipse',\r\n    });\r\n  }\r\n\r\n  // Hypothesis (simplified - just note we have hypotheses)\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    stages.push({\r\n      id: 'Hypothesis',\r\n      label: includeLabels ? `Hypothesis\\n(${thought.scientificHypotheses.length})` : 'H',\r\n      type: 'info',\r\n      shape: 'rectangle',\r\n    });\r\n  }\r\n\r\n  // Experiment\r\n  if (thought.experiment) {\r\n    stages.push({\r\n      id: 'Experiment',\r\n      label: 'Experiment',\r\n      type: 'neutral',\r\n      shape: 'rectangle',\r\n    });\r\n  }\r\n\r\n  // Data Collection\r\n  if (thought.data) {\r\n    stages.push({\r\n      id: 'Data',\r\n      label: 'Data\\nCollection',\r\n      type: 'neutral',\r\n      shape: 'rectangle',\r\n    });\r\n  }\r\n\r\n  // Statistical Analysis\r\n  if (thought.analysis) {\r\n    stages.push({\r\n      id: 'Analysis',\r\n      label: 'Statistical\\nAnalysis',\r\n      type: 'primary',\r\n      shape: 'rectangle',\r\n    });\r\n  }\r\n\r\n  // Conclusion\r\n  if (thought.conclusion) {\r\n    stages.push({\r\n      id: 'Conclusion',\r\n      label: 'Conclusion',\r\n      type: 'success',\r\n      shape: 'stadium',\r\n    });\r\n  }\r\n\r\n  // Create nodes with horizontal positioning\r\n  for (const stage of stages) {\r\n    nodes.push({\r\n      id: stage.id,\r\n      label: stage.label,\r\n      x: xPosition,\r\n      y: 0,\r\n      type: stage.type,\r\n      shape: stage.shape || 'rectangle',\r\n    });\r\n    xPosition += xSpacing;\r\n  }\r\n\r\n  // Create edges between consecutive stages\r\n  for (let i = 0; i < stages.length - 1; i++) {\r\n    edges.push({\r\n      source: stages[i].id,\r\n      target: stages[i + 1].id,\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Scientific Method Experiment',\r\n    colorScheme,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export scientific method experiment flow to HTML format\r\n */\r\nfunction scientificMethodToHTML(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Scientific Method Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Research Question\r\n  if (thought.researchQuestion) {\r\n    const questionContent = `\r\n      <p><strong>Question:</strong> ${escapeHTML(thought.researchQuestion.question)}</p>\r\n      <p><strong>Background:</strong> ${escapeHTML(thought.researchQuestion.background)}</p>\r\n      ${thought.researchQuestion.significance ? `<p><strong>Significance:</strong> ${escapeHTML(thought.researchQuestion.significance)}</p>` : ''}\r\n    `;\r\n    html += renderSection('Research Question', questionContent, '');\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">\\n';\r\n    html += renderMetricCard('Hypotheses', thought.scientificHypotheses?.length || 0, 'primary');\r\n    html += renderMetricCard('Tests', thought.analysis?.tests?.length || 0, 'info');\r\n    html += renderMetricCard('Confidence', thought.conclusion?.confidence?.toFixed(2) || 'N/A', 'success');\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Hypotheses\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    let hypothesesContent = '';\r\n    for (const hypothesis of thought.scientificHypotheses) {\r\n      const typeColor = hypothesis.type === 'null' ? 'secondary' : 'primary';\r\n      const badge = renderBadge(hypothesis.type.toUpperCase(), typeColor as any);\r\n      hypothesesContent += `\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">${badge} ${escapeHTML(hypothesis.statement)}</div>\r\n          ${hypothesis.prediction ? `<p><strong>Prediction:</strong> ${escapeHTML(hypothesis.prediction)}</p>` : ''}\r\n          ${hypothesis.rationale ? `<p><strong>Rationale:</strong> ${escapeHTML(hypothesis.rationale)}</p>` : ''}\r\n        </div>\r\n      `;\r\n    }\r\n    html += renderSection('Hypotheses', hypothesesContent, '');\r\n  }\r\n\r\n  // Experiment\r\n  if (thought.experiment) {\r\n    const experimentContent = `\r\n      <p><strong>Type:</strong> ${escapeHTML(thought.experiment.type)}</p>\r\n      <p><strong>Design:</strong> ${escapeHTML(thought.experiment.design)}</p>\r\n      ${(thought.experiment as any).sampleSize ? `<p><strong>Sample Size:</strong> ${(thought.experiment as any).sampleSize}</p>` : ''}\r\n    `;\r\n    html += renderSection('Experiment', experimentContent, '');\r\n  }\r\n\r\n  // Data Collection\r\n  if (thought.data) {\r\n    const dataContent = `\r\n      <p><strong>Method:</strong> ${escapeHTML(thought.data.method.join(', '))}</p>\r\n      ${thought.data.dataQuality ? `\r\n        <p><strong>Quality Metrics:</strong></p>\r\n        <ul>\r\n          <li>Completeness: ${(thought.data.dataQuality.completeness * 100).toFixed(0)}%</li>\r\n          <li>Reliability: ${(thought.data.dataQuality.reliability * 100).toFixed(0)}%</li>\r\n        </ul>\r\n      ` : ''}\r\n    `;\r\n    html += renderSection('Data Collection', dataContent, '');\r\n  }\r\n\r\n  // Statistical Analysis\r\n  if (thought.analysis && thought.analysis.tests) {\r\n    const testRows = thought.analysis.tests.map(test => [\r\n      test.name,\r\n      test.pValue.toFixed(4),\r\n      test.alpha.toString(),\r\n      test.result,\r\n    ]);\r\n    const testsTable = renderTable(\r\n      ['Test', 'p-value', '', 'Result'],\r\n      testRows,\r\n      { caption: 'Statistical Tests' }\r\n    );\r\n    html += renderSection('Statistical Analysis', testsTable, '');\r\n  }\r\n\r\n  // Conclusion\r\n  if (thought.conclusion) {\r\n    const conclusionBadge = thought.conclusion.confidence && thought.conclusion.confidence > 0.8\r\n      ? renderBadge('HIGH CONFIDENCE', 'success')\r\n      : thought.conclusion.confidence && thought.conclusion.confidence > 0.5\r\n        ? renderBadge('MODERATE CONFIDENCE', 'warning')\r\n        : renderBadge('LOW CONFIDENCE', 'danger');\r\n\r\n    const conclusionContent = `\r\n      <p>${conclusionBadge}</p>\r\n      <p>${escapeHTML(thought.conclusion.statement)}</p>\r\n      ${thought.conclusion.confidence ? `<p><strong>Confidence:</strong> ${(thought.conclusion.confidence * 100).toFixed(0)}%</p>` : ''}\r\n      ${(thought.conclusion as any).supportedHypotheses ? `<p><strong>Supported Hypotheses:</strong> ${(thought.conclusion as any).supportedHypotheses.join(', ')}</p>` : ''}\r\n    `;\r\n    html += renderSection('Conclusion', conclusionContent, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export scientific method experiment flow to Modelica format\r\n */\r\nfunction scientificMethodToModelica(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n  const lines: string[] = [];\r\n\r\n  // Package header\r\n  lines.push('package ScientificMethodExperiment');\r\n  lines.push('  \"Scientific method experiment modeling package\"');\r\n  lines.push('');\r\n\r\n  // Stage enumeration\r\n  const stages: string[] = [];\r\n  if (thought.researchQuestion) stages.push('ResearchQuestion');\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) stages.push('Hypothesis');\r\n  if (thought.experiment) stages.push('Experiment');\r\n  if (thought.data) stages.push('DataCollection');\r\n  if (thought.analysis) stages.push('Analysis');\r\n  if (thought.conclusion) stages.push('Conclusion');\r\n\r\n  if (stages.length > 0) {\r\n    lines.push('  type Stage = enumeration(');\r\n    for (let i = 0; i < stages.length; i++) {\r\n      const comma = i < stages.length - 1 ? ',' : '';\r\n      lines.push(`    ${stages[i]} \"${stages[i]}\"${comma}`);\r\n    }\r\n    lines.push('  );');\r\n    lines.push('');\r\n  }\r\n\r\n  // Research Question record\r\n  if (thought.researchQuestion) {\r\n    lines.push('  record ResearchQuestionData');\r\n    lines.push('    \"Research question information\"');\r\n    lines.push(`    parameter String question = \"${escapeModelicaString(thought.researchQuestion.question)}\";`);\r\n    lines.push(`    parameter String background = \"${escapeModelicaString(thought.researchQuestion.background)}\";`);\r\n    if (thought.researchQuestion.significance) {\r\n      lines.push(`    parameter String significance = \"${escapeModelicaString(thought.researchQuestion.significance)}\";`);\r\n    }\r\n    lines.push('  end ResearchQuestionData;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Hypothesis record\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    lines.push('  record HypothesisData');\r\n    lines.push('    \"Hypothesis information\"');\r\n    lines.push(`    parameter Integer count = ${thought.scientificHypotheses.length};`);\r\n    lines.push(`    parameter String primaryHypothesis = \"${escapeModelicaString(thought.scientificHypotheses[0].statement)}\";`);\r\n    lines.push(`    parameter String hypothesisType = \"${thought.scientificHypotheses[0].type}\";`);\r\n    lines.push('  end HypothesisData;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Experiment record\r\n  if (thought.experiment) {\r\n    lines.push('  record ExperimentData');\r\n    lines.push('    \"Experiment design information\"');\r\n    lines.push(`    parameter String experimentType = \"${escapeModelicaString(thought.experiment.type)}\";`);\r\n    lines.push(`    parameter String design = \"${escapeModelicaString(thought.experiment.design)}\";`);\r\n    const sampleSize = (thought.experiment as any)?.sampleSize || 0;\r\n    if (sampleSize > 0) {\r\n      lines.push(`    parameter Integer sampleSize = ${sampleSize};`);\r\n    }\r\n    lines.push('  end ExperimentData;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Data Collection record\r\n  if (thought.data) {\r\n    lines.push('  record DataCollectionInfo');\r\n    lines.push('    \"Data collection and quality metrics\"');\r\n    lines.push(`    parameter String method = \"${escapeModelicaString(thought.data.method.join(', '))}\";`);\r\n    if (thought.data.dataQuality) {\r\n      lines.push(`    parameter Real completeness = ${thought.data.dataQuality.completeness.toFixed(3)};`);\r\n      lines.push(`    parameter Real reliability = ${thought.data.dataQuality.reliability.toFixed(3)};`);\r\n    }\r\n    lines.push('  end DataCollectionInfo;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Analysis record\r\n  if (thought.analysis && thought.analysis.tests) {\r\n    lines.push('  record AnalysisData');\r\n    lines.push('    \"Statistical analysis results\"');\r\n    lines.push(`    parameter Integer testCount = ${thought.analysis.tests.length};`);\r\n    if (thought.analysis.tests.length > 0) {\r\n      lines.push(`    parameter String primaryTest = \"${escapeModelicaString(thought.analysis.tests[0].name)}\";`);\r\n      lines.push(`    parameter Real primaryPValue = ${thought.analysis.tests[0].pValue.toFixed(4)};`);\r\n    }\r\n    lines.push('  end AnalysisData;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Conclusion record\r\n  if (thought.conclusion) {\r\n    lines.push('  record ConclusionData');\r\n    lines.push('    \"Final conclusion and confidence\"');\r\n    lines.push(`    parameter String statement = \"${escapeModelicaString(thought.conclusion.statement)}\";`);\r\n    if (thought.conclusion.confidence) {\r\n      lines.push(`    parameter Real confidence = ${thought.conclusion.confidence.toFixed(3)};`);\r\n    }\r\n    lines.push('  end ConclusionData;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Progress metrics\r\n  if (includeMetrics && stages.length > 0) {\r\n    const currentStageIndex = stages.length; // All stages completed if we have conclusion\r\n    lines.push('  // Progress metrics');\r\n    lines.push(`  parameter Integer totalStages = ${stages.length};`);\r\n    lines.push(`  parameter Integer completedStages = ${currentStageIndex};`);\r\n    lines.push(`  parameter Real progress = ${(currentStageIndex / stages.length).toFixed(3)};`);\r\n    lines.push('');\r\n  }\r\n\r\n  // Package footer with annotations\r\n  lines.push('  annotation(');\r\n  lines.push('    Documentation(info=\"<html>');\r\n  lines.push('      <p>Scientific Method Experiment Flow</p>');\r\n  if (includeMetrics) {\r\n    lines.push(`      <p>Stages: ${stages.length}</p>`);\r\n    if (thought.scientificHypotheses) {\r\n      lines.push(`      <p>Hypotheses: ${thought.scientificHypotheses.length}</p>`);\r\n    }\r\n    if (thought.conclusion?.confidence) {\r\n      lines.push(`      <p>Confidence: ${(thought.conclusion.confidence * 100).toFixed(0)}%</p>`);\r\n    }\r\n  }\r\n  lines.push('      <p>Generated by DeepThinking MCP v7.1.0</p>');\r\n  lines.push('    </html>\"),');\r\n  lines.push('    version=\"1.0.0\"');\r\n  lines.push('  );');\r\n  lines.push('end ScientificMethodExperiment;');\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n/**\r\n * Export scientific method experiment flow to UML format (PlantUML activity diagram)\r\n */\r\nfunction scientificMethodToUML(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  // Build the list of activities (stages in the scientific method)\r\n  const activities: string[] = [];\r\n\r\n  if (thought.researchQuestion) {\r\n    const label = includeLabels\r\n      ? `Research Question: ${thought.researchQuestion.question.substring(0, 40)}...`\r\n      : 'Research Question';\r\n    activities.push(label);\r\n  }\r\n\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    const label = includeLabels\r\n      ? `Hypotheses (${thought.scientificHypotheses.length})`\r\n      : 'Hypotheses';\r\n    activities.push(label);\r\n  }\r\n\r\n  if (thought.experiment) {\r\n    const label = includeLabels\r\n      ? `Experiment: ${thought.experiment.design.substring(0, 40)}`\r\n      : 'Experiment';\r\n    activities.push(label);\r\n  }\r\n\r\n  if (thought.data) {\r\n    activities.push('Data Collection');\r\n  }\r\n\r\n  if (thought.analysis) {\r\n    const label = includeLabels && thought.analysis.tests\r\n      ? `Statistical Analysis (${thought.analysis.tests.length} tests)`\r\n      : 'Statistical Analysis';\r\n    activities.push(label);\r\n  }\r\n\r\n  if (thought.conclusion) {\r\n    const label = includeLabels\r\n      ? `Conclusion: ${thought.conclusion.statement.substring(0, 40)}...`\r\n      : 'Conclusion';\r\n    activities.push(label);\r\n  }\r\n\r\n  // The current activity is the last one (conclusion if it exists)\r\n  const currentActivity = thought.conclusion ? activities[activities.length - 1] : undefined;\r\n\r\n  return generateActivityDiagram(activities, currentActivity, {\r\n    title: 'Scientific Method Experiment Flow',\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export scientific method experiment flow to JSON format\r\n */\r\nfunction scientificMethodToJSON(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph('Scientific Method Experiment', 'scientific-method', options);\r\n\r\n  // Set layout for linear flow\r\n  if (graph.layout) {\r\n    graph.layout.type = 'linear';\r\n    graph.layout.direction = 'TB';\r\n  }\r\n\r\n  let yPosition = 0;\r\n  const ySpacing = 100;\r\n  let edgeId = 0;\r\n  const nodeIds: string[] = [];\r\n\r\n  // Research Question node\r\n  if (thought.researchQuestion) {\r\n    addNode(graph, {\r\n      id: 'research_question',\r\n      label: thought.researchQuestion.question.substring(0, 60) + '...',\r\n      type: 'question',\r\n      y: yPosition,\r\n      x: 200,\r\n      color: '#ffd699',\r\n      shape: 'ellipse',\r\n      metadata: {\r\n        question: thought.researchQuestion.question,\r\n        background: thought.researchQuestion.background,\r\n        significance: thought.researchQuestion.significance,\r\n      },\r\n    });\r\n    nodeIds.push('research_question');\r\n    yPosition += ySpacing;\r\n  }\r\n\r\n  // Hypotheses node\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    addNode(graph, {\r\n      id: 'hypotheses',\r\n      label: `Hypotheses (${thought.scientificHypotheses.length})`,\r\n      type: 'hypothesis',\r\n      y: yPosition,\r\n      x: 200,\r\n      color: '#a8d5ff',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        count: thought.scientificHypotheses.length,\r\n        hypotheses: thought.scientificHypotheses.map(h => ({\r\n          id: h.id,\r\n          statement: h.statement,\r\n          type: h.type,\r\n        })),\r\n      },\r\n    });\r\n    nodeIds.push('hypotheses');\r\n    yPosition += ySpacing;\r\n  }\r\n\r\n  // Experiment node\r\n  if (thought.experiment) {\r\n    addNode(graph, {\r\n      id: 'experiment',\r\n      label: `Experiment: ${thought.experiment.design.substring(0, 30)}...`,\r\n      type: 'experiment',\r\n      y: yPosition,\r\n      x: 200,\r\n      color: '#e0e0e0',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        type: thought.experiment.type,\r\n        design: thought.experiment.design,\r\n        sampleSize: (thought.experiment as any)?.sampleSize,\r\n      },\r\n    });\r\n    nodeIds.push('experiment');\r\n    yPosition += ySpacing;\r\n  }\r\n\r\n  // Data Collection node\r\n  if (thought.data) {\r\n    addNode(graph, {\r\n      id: 'data_collection',\r\n      label: 'Data Collection',\r\n      type: 'data',\r\n      y: yPosition,\r\n      x: 200,\r\n      color: '#e0e0e0',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        method: thought.data.method,\r\n        dataQuality: thought.data.dataQuality,\r\n      },\r\n    });\r\n    nodeIds.push('data_collection');\r\n    yPosition += ySpacing;\r\n  }\r\n\r\n  // Analysis node\r\n  if (thought.analysis) {\r\n    const testCount = thought.analysis.tests?.length || 0;\r\n    addNode(graph, {\r\n      id: 'analysis',\r\n      label: `Statistical Analysis (${testCount} tests)`,\r\n      type: 'analysis',\r\n      y: yPosition,\r\n      x: 200,\r\n      color: '#e0e0e0',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        testCount,\r\n        tests: thought.analysis.tests,\r\n      },\r\n    });\r\n    nodeIds.push('analysis');\r\n    yPosition += ySpacing;\r\n  }\r\n\r\n  // Conclusion node\r\n  if (thought.conclusion) {\r\n    addNode(graph, {\r\n      id: 'conclusion',\r\n      label: `Conclusion: ${thought.conclusion.statement.substring(0, 40)}...`,\r\n      type: 'conclusion',\r\n      y: yPosition,\r\n      x: 200,\r\n      color: '#a5d6a7',\r\n      shape: 'stadium',\r\n      metadata: {\r\n        statement: thought.conclusion.statement,\r\n        confidence: thought.conclusion.confidence,\r\n        supportedHypotheses: (thought.conclusion as any).supportedHypotheses,\r\n      },\r\n    });\r\n    nodeIds.push('conclusion');\r\n  }\r\n\r\n  // Create edges between consecutive stages\r\n  for (let i = 0; i < nodeIds.length - 1; i++) {\r\n    addEdge(graph, {\r\n      id: `edge_${edgeId++}`,\r\n      source: nodeIds[i],\r\n      target: nodeIds[i + 1],\r\n      directed: true,\r\n      style: 'solid',\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics && graph.metrics) {\r\n    addMetric(graph, 'totalStages', nodeIds.length);\r\n    addMetric(graph, 'completedStages', nodeIds.length);\r\n    addMetric(graph, 'progress', 1.0);\r\n    addMetric(graph, 'hypothesisCount', thought.scientificHypotheses?.length || 0);\r\n    if (thought.conclusion?.confidence) {\r\n      addMetric(graph, 'confidence', thought.conclusion.confidence);\r\n    }\r\n    if (thought.analysis?.tests) {\r\n      addMetric(graph, 'testCount', thought.analysis.tests.length);\r\n    }\r\n  }\r\n\r\n  return serializeGraph(graph, options);\r\n}\r\n\r\n/**\r\n * Export scientific method experiment flow to Markdown format\r\n */\r\nfunction scientificMethodToMarkdown(thought: ScientificMethodThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Research Question\r\n  if (thought.researchQuestion) {\r\n    const questionContent = keyValueSection({\r\n      'Question': thought.researchQuestion.question,\r\n      'Background': thought.researchQuestion.background,\r\n      'Significance': thought.researchQuestion.significance || 'N/A',\r\n    });\r\n    parts.push(section('Research Question', questionContent));\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Hypotheses': thought.scientificHypotheses?.length || 0,\r\n      'Tests': thought.analysis?.tests?.length || 0,\r\n      'Confidence': thought.conclusion?.confidence?.toFixed(2) || 'N/A',\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Hypotheses\r\n  if (thought.scientificHypotheses && thought.scientificHypotheses.length > 0) {\r\n    const hypothesisItems = thought.scientificHypotheses.map(h =>\r\n      `**${h.type === 'null' ? 'H' : 'H'}**: ${h.statement}${h.prediction ? `\\n  - Prediction: ${h.prediction}` : ''}`\r\n    );\r\n    parts.push(section('Hypotheses', list(hypothesisItems)));\r\n  }\r\n\r\n  // Experiment\r\n  if (thought.experiment) {\r\n    const experimentContent = keyValueSection({\r\n      'Type': thought.experiment.type,\r\n      'Design': thought.experiment.design,\r\n      'Sample Size': (thought.experiment as any)?.sampleSize || 'N/A',\r\n    });\r\n    parts.push(section('Experiment', experimentContent));\r\n  }\r\n\r\n  // Data Collection\r\n  if (thought.data) {\r\n    const dataContent = keyValueSection({\r\n      'Method': thought.data.method.join(', '),\r\n      'Completeness': thought.data.dataQuality ? `${(thought.data.dataQuality.completeness * 100).toFixed(0)}%` : 'N/A',\r\n      'Reliability': thought.data.dataQuality ? `${(thought.data.dataQuality.reliability * 100).toFixed(0)}%` : 'N/A',\r\n    });\r\n    parts.push(section('Data Collection', dataContent));\r\n  }\r\n\r\n  // Statistical Analysis\r\n  if (thought.analysis && thought.analysis.tests) {\r\n    const testRows = thought.analysis.tests.map(test => [\r\n      test.name,\r\n      test.pValue.toFixed(4),\r\n      test.alpha.toString(),\r\n      test.result,\r\n    ]);\r\n    const testsTable = table(\r\n      ['Test', 'p-value', '', 'Result'],\r\n      testRows\r\n    );\r\n    parts.push(section('Statistical Analysis', testsTable));\r\n  }\r\n\r\n  // Conclusion\r\n  if (thought.conclusion) {\r\n    const conclusionContent = `${thought.conclusion.statement}\\n\\n` +\r\n      keyValueSection({\r\n        'Confidence': thought.conclusion.confidence ? `${(thought.conclusion.confidence * 100).toFixed(0)}%` : 'N/A',\r\n        'Supported Hypotheses': (thought.conclusion as any).supportedHypotheses?.join(', ') || 'N/A',\r\n      });\r\n    parts.push(section('Conclusion', conclusionContent));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = scientificMethodToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Experiment Flow Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Scientific Method Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: { mode: 'scientific-method' },\r\n  });\r\n}\r\n","/**\r\n * Formal Logic Visual Exporter (v7.0.3)\r\n * Sprint 8 Task 8.1: Formal logic proof tree export to Mermaid, DOT, ASCII\r\n * Phase 9: Added native SVG export support, GraphML, TikZ\r\n */\r\n\r\nimport type { FormalLogicThought } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n  renderProgressBar,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export formal logic proof tree to visual format\r\n */\r\nexport function exportFormalLogicProof(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const { format, colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return formalLogicToMermaid(thought, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return formalLogicToDOT(thought, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return formalLogicToASCII(thought);\r\n    case 'svg':\r\n      return formalLogicToSVG(thought, options);\r\n    case 'graphml':\r\n      return formalLogicToGraphML(thought, options);\r\n    case 'tikz':\r\n      return formalLogicToTikZ(thought, options);\r\n    case 'html':\r\n      return formalLogicToHTML(thought, options);\r\n    case 'modelica':\r\n      return formalLogicToModelica(thought, options);\r\n    case 'uml':\r\n      return formalLogicToUML(thought, options);\r\n    case 'json':\r\n      return formalLogicToJSON(thought, options);\r\n    case 'markdown':\r\n      return formalLogicToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\nfunction formalLogicToMermaid(\r\n  thought: FormalLogicThought,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    mermaid += '  subgraph Propositions[\"Propositions\"]\\n';\r\n    for (const proposition of thought.propositions) {\r\n      const propId = sanitizeId(proposition.id);\r\n      const label = includeLabels\r\n        ? `${proposition.symbol}: ${proposition.statement.substring(0, 40)}...`\r\n        : proposition.symbol;\r\n      const shape = proposition.type === 'atomic' ? ['[', ']'] : ['[[', ']]'];\r\n      mermaid += `    ${propId}${shape[0]}${label}${shape[1]}\\n`;\r\n    }\r\n    mermaid += '  end\\n\\n';\r\n  }\r\n\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    mermaid += '  Theorem[\"Theorem\"]\\n';\r\n\r\n    for (const step of thought.proof.steps) {\r\n      const stepId = `Step${step.stepNumber}`;\r\n      const label = includeLabels\r\n        ? `${step.stepNumber}. ${step.statement.substring(0, 40)}...`\r\n        : `Step ${step.stepNumber}`;\r\n\r\n      mermaid += `  ${stepId}[\"${label}\"]\\n`;\r\n\r\n      if (step.referencesSteps && step.referencesSteps.length > 0) {\r\n        for (const refStep of step.referencesSteps) {\r\n          mermaid += `  Step${refStep} --> ${stepId}\\n`;\r\n        }\r\n      }\r\n    }\r\n\r\n    const lastStep = thought.proof.steps[thought.proof.steps.length - 1];\r\n    mermaid += `  Step${lastStep.stepNumber} --> Theorem\\n`;\r\n\r\n    if (includeMetrics) {\r\n      const completeness = (thought.proof.completeness * 100).toFixed(0);\r\n      mermaid += `\\n  Completeness[\"Completeness: ${completeness}%\"]\\n`;\r\n      mermaid += `  Completeness -.-> Theorem\\n`;\r\n    }\r\n  }\r\n\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    mermaid += '\\n';\r\n    for (const inference of thought.logicalInferences) {\r\n      const infId = sanitizeId(inference.id);\r\n      const label = includeLabels ? inference.rule : infId;\r\n\r\n      mermaid += `  ${infId}{{\"${label}\"}}\\n`;\r\n\r\n      if (inference.premises) {\r\n        for (const premiseId of inference.premises) {\r\n          const propId = sanitizeId(premiseId);\r\n          mermaid += `  ${propId} --> ${infId}\\n`;\r\n        }\r\n      }\r\n\r\n      const conclusionId = sanitizeId(inference.conclusion);\r\n      mermaid += `  ${infId} --> ${conclusionId}\\n`;\r\n    }\r\n  }\r\n\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    const atomicColor = colorScheme === 'pastel' ? '#e1f5ff' : '#a8d5ff';\r\n    const compoundColor = colorScheme === 'pastel' ? '#fff3e0' : '#ffd699';\r\n\r\n    if (thought.propositions) {\r\n      for (const proposition of thought.propositions) {\r\n        const propId = sanitizeId(proposition.id);\r\n        const color = proposition.type === 'atomic' ? atomicColor : compoundColor;\r\n        mermaid += `  style ${propId} fill:${color}\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\nfunction formalLogicToDOT(\r\n  thought: FormalLogicThought,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph FormalLogic {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    dot += '  subgraph cluster_propositions {\\n';\r\n    dot += '    label=\"Propositions\";\\n';\r\n    for (const proposition of thought.propositions) {\r\n      const propId = sanitizeId(proposition.id);\r\n      const label = includeLabels\r\n        ? `${proposition.symbol}:\\\\n${proposition.statement.substring(0, 40)}...`\r\n        : proposition.symbol;\r\n      const shape = proposition.type === 'atomic' ? 'ellipse' : 'box';\r\n      dot += `    ${propId} [label=\"${label}\", shape=${shape}];\\n`;\r\n    }\r\n    dot += '  }\\n\\n';\r\n  }\r\n\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    dot += `  Theorem [label=\"Theorem:\\\\n${thought.proof.theorem.substring(0, 50)}...\", shape=doubleoctagon, style=bold];\\n\\n`;\r\n\r\n    for (const step of thought.proof.steps) {\r\n      const stepId = `Step${step.stepNumber}`;\r\n      const label = includeLabels\r\n        ? `${step.stepNumber}. ${step.statement.substring(0, 40)}...`\r\n        : `Step ${step.stepNumber}`;\r\n      const ruleLabel = step.rule ? `\\\\n(${step.rule})` : '';\r\n\r\n      dot += `  ${stepId} [label=\"${label}${ruleLabel}\"];\\n`;\r\n\r\n      if (step.referencesSteps) {\r\n        for (const refStep of step.referencesSteps) {\r\n          dot += `  Step${refStep} -> ${stepId};\\n`;\r\n        }\r\n      }\r\n    }\r\n\r\n    const lastStep = thought.proof.steps[thought.proof.steps.length - 1];\r\n    dot += `  Step${lastStep.stepNumber} -> Theorem;\\n`;\r\n\r\n    if (includeMetrics) {\r\n      const completeness = (thought.proof.completeness * 100).toFixed(0);\r\n      dot += `\\n  Completeness [label=\"Completeness: ${completeness}%\", shape=note];\\n`;\r\n    }\r\n  }\r\n\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    dot += '\\n';\r\n    for (const inference of thought.logicalInferences) {\r\n      const infId = sanitizeId(inference.id);\r\n      const label = includeLabels ? inference.rule : infId;\r\n\r\n      dot += `  ${infId} [label=\"${label}\", shape=diamond];\\n`;\r\n\r\n      if (inference.premises) {\r\n        for (const premiseId of inference.premises) {\r\n          const propId = sanitizeId(premiseId);\r\n          dot += `  ${propId} -> ${infId};\\n`;\r\n        }\r\n      }\r\n\r\n      const conclusionId = sanitizeId(inference.conclusion);\r\n      dot += `  ${infId} -> ${conclusionId};\\n`;\r\n    }\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\nfunction formalLogicToASCII(thought: FormalLogicThought): string {\r\n  let ascii = 'Formal Logic Proof:\\n';\r\n  ascii += '==================\\n\\n';\r\n\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    ascii += 'Propositions:\\n';\r\n    for (const proposition of thought.propositions) {\r\n      const typeMarker = proposition.type === 'atomic' ? '' : '';\r\n      ascii += `  ${typeMarker} ${proposition.symbol}: ${proposition.statement}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    ascii += 'Inferences:\\n';\r\n    for (const inference of thought.logicalInferences) {\r\n      ascii += `  [${inference.rule}]\\n`;\r\n      ascii += `    Premises: ${inference.premises.join(', ')}\\n`;\r\n      ascii += `    Conclusion: ${inference.conclusion}\\n`;\r\n      ascii += `    Valid: ${inference.valid ? '' : ''}\\n`;\r\n    }\r\n    ascii += '\\n';\r\n  }\r\n\r\n  if (thought.proof) {\r\n    ascii += `Proof: ${thought.proof.theorem}\\n`;\r\n    ascii += `Technique: ${thought.proof.technique}\\n`;\r\n    ascii += `Completeness: ${(thought.proof.completeness * 100).toFixed(0)}%\\n\\n`;\r\n\r\n    if (thought.proof.steps && thought.proof.steps.length > 0) {\r\n      ascii += 'Proof Steps:\\n';\r\n      for (const step of thought.proof.steps) {\r\n        ascii += `  ${step.stepNumber}. ${step.statement}\\n`;\r\n        ascii += `     Justification: ${step.justification}\\n`;\r\n      }\r\n      ascii += '\\n';\r\n    }\r\n\r\n    ascii += `Conclusion: ${thought.proof.conclusion}\\n`;\r\n    ascii += `Valid: ${thought.proof.valid ? '' : ''}\\n`;\r\n  }\r\n\r\n  if (thought.truthTable) {\r\n    ascii += '\\nTruth Table:\\n';\r\n    ascii += `  Tautology: ${thought.truthTable.isTautology ? '' : ''}\\n`;\r\n    ascii += `  Contradiction: ${thought.truthTable.isContradiction ? '' : ''}\\n`;\r\n    ascii += `  Contingent: ${thought.truthTable.isContingent ? '' : ''}\\n`;\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export formal logic proof tree to native SVG format\r\n */\r\nfunction formalLogicToSVG(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = DEFAULT_SVG_OPTIONS.height,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n\r\n  // Propositions at the top\r\n  if (thought.propositions) {\r\n    const propSpacing = Math.min(180, svgWidth / (thought.propositions.length + 1));\r\n    const propStartX = (svgWidth - (thought.propositions.length - 1) * propSpacing) / 2;\r\n    thought.propositions.forEach((prop, index) => {\r\n      positions.set(prop.id, {\r\n        id: prop.id,\r\n        label: includeLabels ? `${prop.symbol}: ${prop.statement.substring(0, 20)}...` : prop.symbol,\r\n        x: propStartX + index * propSpacing,\r\n        y: 80,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        type: prop.type,\r\n      });\r\n    });\r\n  }\r\n\r\n  // Proof steps in the middle\r\n  if (thought.proof && thought.proof.steps) {\r\n    thought.proof.steps.forEach((step, index) => {\r\n      const stepId = `Step${step.stepNumber}`;\r\n      positions.set(stepId, {\r\n        id: stepId,\r\n        label: includeLabels ? `${step.stepNumber}. ${step.statement.substring(0, 25)}...` : `Step ${step.stepNumber}`,\r\n        x: 150 + index * 180,\r\n        y: 250,\r\n        width: nodeWidth,\r\n        height: nodeHeight,\r\n        type: 'step',\r\n      });\r\n    });\r\n  }\r\n\r\n  // Theorem at the bottom\r\n  if (thought.proof) {\r\n    positions.set('Theorem', {\r\n      id: 'Theorem',\r\n      label: 'Theorem',\r\n      x: svgWidth / 2,\r\n      y: 420,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: 'theorem',\r\n    });\r\n  }\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, 'Formal Logic Proof');\r\n\r\n  // Render edges\r\n  svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n\r\n  // Edges from steps to theorem\r\n  if (thought.proof && thought.proof.steps) {\r\n    const theoremPos = positions.get('Theorem');\r\n    for (const step of thought.proof.steps) {\r\n      const stepPos = positions.get(`Step${step.stepNumber}`);\r\n      if (stepPos && theoremPos) {\r\n        svg += renderEdge(stepPos, theoremPos);\r\n      }\r\n\r\n      // Edges between steps (references)\r\n      if (step.referencesSteps) {\r\n        for (const refStepNum of step.referencesSteps) {\r\n          const refStepPos = positions.get(`Step${refStepNum}`);\r\n          if (refStepPos && stepPos) {\r\n            svg += renderEdge(refStepPos, stepPos, { style: 'dashed' });\r\n          }\r\n        }\r\n      }\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n\r\n  const atomicColors = getNodeColor('primary', colorScheme);\r\n  const compoundColors = getNodeColor('secondary', colorScheme);\r\n  const stepColors = getNodeColor('neutral', colorScheme);\r\n  const theoremColors = getNodeColor('success', colorScheme);\r\n\r\n  for (const [, pos] of positions) {\r\n    if (pos.type === 'theorem') {\r\n      svg += renderStadiumNode(pos, theoremColors);\r\n    } else if (pos.type === 'step') {\r\n      svg += renderRectNode(pos, stepColors);\r\n    } else if (pos.type === 'atomic') {\r\n      svg += renderEllipseNode(pos, atomicColors);\r\n    } else {\r\n      svg += renderRectNode(pos, compoundColors);\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render metrics panel\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Propositions', value: thought.propositions?.length || 0 },\r\n      { label: 'Proof Steps', value: thought.proof?.steps?.length || 0 },\r\n      { label: 'Completeness', value: thought.proof ? `${(thought.proof.completeness * 100).toFixed(0)}%` : 'N/A' },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 110, metrics);\r\n  }\r\n\r\n  // Render legend\r\n  const legendItems = [\r\n    { label: 'Atomic', color: atomicColors, shape: 'ellipse' as const },\r\n    { label: 'Compound', color: compoundColors },\r\n    { label: 'Proof Step', color: stepColors },\r\n    { label: 'Theorem', color: theoremColors, shape: 'stadium' as const },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 130, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export formal logic proof tree to GraphML format\r\n */\r\nfunction formalLogicToGraphML(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeCount = 0;\r\n\r\n  // Add propositions (premises)\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    for (const proposition of thought.propositions) {\r\n      nodes.push({\r\n        id: sanitizeId(proposition.id),\r\n        label: includeLabels\r\n          ? `${proposition.symbol}: ${proposition.statement}`\r\n          : proposition.symbol,\r\n        type: 'premise',\r\n        metadata: {\r\n          propositionType: proposition.type,\r\n          description: proposition.statement,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add logical inferences (inference rules)\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    for (const inference of thought.logicalInferences) {\r\n      const infId = sanitizeId(inference.id);\r\n      nodes.push({\r\n        id: infId,\r\n        label: includeLabels ? inference.rule : infId,\r\n        type: 'inference',\r\n        metadata: {\r\n          rule: inference.rule,\r\n          valid: inference.valid,\r\n        },\r\n      });\r\n\r\n      // Create edges from premises to inference\r\n      if (inference.premises) {\r\n        for (const premiseId of inference.premises) {\r\n          edges.push({\r\n            id: `e${edgeCount++}`,\r\n            source: sanitizeId(premiseId),\r\n            target: infId,\r\n            directed: true,\r\n            metadata: { type: 'premise-to-inference' },\r\n          });\r\n        }\r\n      }\r\n\r\n      // Create edge from inference to conclusion\r\n      edges.push({\r\n        id: `e${edgeCount++}`,\r\n        source: infId,\r\n        target: sanitizeId(inference.conclusion),\r\n        directed: true,\r\n        metadata: { type: 'inference-to-conclusion' },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add proof steps\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    for (const step of thought.proof.steps) {\r\n      const stepId = `Step${step.stepNumber}`;\r\n      nodes.push({\r\n        id: stepId,\r\n        label: includeLabels\r\n          ? `${step.stepNumber}. ${step.statement}`\r\n          : `Step ${step.stepNumber}`,\r\n        type: 'proof-step',\r\n        metadata: {\r\n          stepNumber: step.stepNumber,\r\n          justification: step.justification,\r\n          rule: step.rule,\r\n        },\r\n      });\r\n\r\n      // Create edges between referenced steps\r\n      if (step.referencesSteps && step.referencesSteps.length > 0) {\r\n        for (const refStep of step.referencesSteps) {\r\n          edges.push({\r\n            id: `e${edgeCount++}`,\r\n            source: `Step${refStep}`,\r\n            target: stepId,\r\n            directed: true,\r\n            metadata: { type: 'step-reference' },\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    // Add theorem/conclusion node\r\n    nodes.push({\r\n      id: 'Theorem',\r\n      label: includeLabels ? thought.proof.theorem : 'Theorem',\r\n      type: 'conclusion',\r\n      metadata: {\r\n        theorem: thought.proof.theorem,\r\n        valid: thought.proof.valid,\r\n        completeness: thought.proof.completeness,\r\n      },\r\n    });\r\n\r\n    // Connect last step to theorem\r\n    const lastStep = thought.proof.steps[thought.proof.steps.length - 1];\r\n    edges.push({\r\n      id: `e${edgeCount++}`,\r\n      source: `Step${lastStep.stepNumber}`,\r\n      target: 'Theorem',\r\n      directed: true,\r\n      metadata: { type: 'step-to-theorem' },\r\n    });\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, {\r\n    graphName: 'Formal Logic Proof',\r\n    directed: true,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export formal logic proof tree to TikZ format\r\n */\r\nfunction formalLogicToTikZ(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, colorScheme = 'default' } = options;\r\n\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n  let currentY = 0;\r\n\r\n  // Add propositions (premises) at the top with stadium shape\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    thought.propositions.forEach((proposition, index) => {\r\n      nodes.push({\r\n        id: sanitizeId(proposition.id),\r\n        label: includeLabels\r\n          ? `${proposition.symbol}: ${proposition.statement.substring(0, 30)}...`\r\n          : proposition.symbol,\r\n        x: index * 3,\r\n        y: currentY,\r\n        type: 'premise',\r\n        shape: 'stadium',\r\n      });\r\n    });\r\n    currentY -= 2.5;\r\n  }\r\n\r\n  // Add logical inferences (inference rules) in the middle with rectangle shape\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    thought.logicalInferences.forEach((inference, index) => {\r\n      const infId = sanitizeId(inference.id);\r\n      nodes.push({\r\n        id: infId,\r\n        label: includeLabels ? inference.rule : infId,\r\n        x: index * 3,\r\n        y: currentY,\r\n        type: 'inference',\r\n        shape: 'rectangle',\r\n      });\r\n\r\n      // Create edges from premises to inference\r\n      if (inference.premises) {\r\n        for (const premiseId of inference.premises) {\r\n          edges.push({\r\n            source: sanitizeId(premiseId),\r\n            target: infId,\r\n            directed: true,\r\n          });\r\n        }\r\n      }\r\n\r\n      // Create edge from inference to conclusion\r\n      edges.push({\r\n        source: infId,\r\n        target: sanitizeId(inference.conclusion),\r\n        directed: true,\r\n      });\r\n    });\r\n    currentY -= 2.5;\r\n  }\r\n\r\n  // Add proof steps in the middle with rectangle shape\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    thought.proof.steps.forEach((step, index) => {\r\n      const stepId = `Step${step.stepNumber}`;\r\n      nodes.push({\r\n        id: stepId,\r\n        label: includeLabels\r\n          ? `${step.stepNumber}. ${step.statement.substring(0, 20)}...`\r\n          : `Step ${step.stepNumber}`,\r\n        x: index * 3,\r\n        y: currentY,\r\n        type: 'neutral',\r\n        shape: 'rectangle',\r\n      });\r\n\r\n      // Create edges between referenced steps\r\n      if (step.referencesSteps && step.referencesSteps.length > 0) {\r\n        for (const refStep of step.referencesSteps) {\r\n          edges.push({\r\n            source: `Step${refStep}`,\r\n            target: stepId,\r\n            directed: true,\r\n            style: 'dashed',\r\n          });\r\n        }\r\n      }\r\n    });\r\n    currentY -= 2.5;\r\n\r\n    // Add theorem/conclusion at the bottom with ellipse shape\r\n    nodes.push({\r\n      id: 'Theorem',\r\n      label: includeLabels ? 'Theorem' : 'T',\r\n      x: (thought.proof.steps.length - 1) * 1.5,\r\n      y: currentY,\r\n      type: 'conclusion',\r\n      shape: 'ellipse',\r\n    });\r\n\r\n    // Connect last step to theorem\r\n    const lastStep = thought.proof.steps[thought.proof.steps.length - 1];\r\n    edges.push({\r\n      source: `Step${lastStep.stepNumber}`,\r\n      target: 'Theorem',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, {\r\n    title: 'Formal Logic Proof',\r\n    colorScheme,\r\n    includeLabels,\r\n  });\r\n}\r\n\r\n/**\r\n * Export formal logic proof tree to HTML format\r\n */\r\nfunction formalLogicToHTML(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Formal Logic Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Proof Overview\r\n  if (thought.proof) {\r\n    const validBadge = thought.proof.valid ? renderBadge('VALID', 'success') : renderBadge('INVALID', 'danger');\r\n    const proofContent = `\r\n      <p><strong>Theorem:</strong> ${escapeHTML(thought.proof.theorem)}</p>\r\n      <p><strong>Technique:</strong> ${escapeHTML(thought.proof.technique)}</p>\r\n      <p><strong>Validity:</strong> ${validBadge}</p>\r\n      <p><strong>Completeness:</strong> ${(thought.proof.completeness * 100).toFixed(0)}%</p>\r\n      ${renderProgressBar(thought.proof.completeness * 100, 'primary')}\r\n    `;\r\n    html += renderSection('Proof', proofContent, '');\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">\\n';\r\n    html += renderMetricCard('Propositions', thought.propositions?.length || 0, 'primary');\r\n    html += renderMetricCard('Inferences', thought.logicalInferences?.length || 0, 'info');\r\n    html += renderMetricCard('Proof Steps', thought.proof?.steps?.length || 0, 'secondary');\r\n    html += renderMetricCard('Completeness', thought.proof ? `${(thought.proof.completeness * 100).toFixed(0)}%` : 'N/A', 'success');\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Propositions\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    const propositionRows = thought.propositions.map(p => [\r\n      p.symbol,\r\n      p.type,\r\n      p.statement,\r\n      p.truthValue !== undefined ? String(p.truthValue) : 'N/A',\r\n    ]);\r\n    const propositionsTable = renderTable(\r\n      ['Symbol', 'Type', 'Statement', 'Truth Value'],\r\n      propositionRows,\r\n      { caption: 'Propositions' }\r\n    );\r\n    html += renderSection('Propositions', propositionsTable, '');\r\n  }\r\n\r\n  // Logical Inferences\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    let inferencesContent = '';\r\n    for (const inference of thought.logicalInferences) {\r\n      const validBadge = inference.valid ? renderBadge('VALID', 'success') : renderBadge('INVALID', 'danger');\r\n      inferencesContent += `\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">${escapeHTML(inference.rule)} ${validBadge}</div>\r\n          <p><strong>Premises:</strong> ${inference.premises.map(p => escapeHTML(p)).join(', ')}</p>\r\n          <p><strong>Conclusion:</strong> ${escapeHTML(inference.conclusion)}</p>\r\n        </div>\r\n      `;\r\n    }\r\n    html += renderSection('Logical Inferences', inferencesContent, '');\r\n  }\r\n\r\n  // Proof Steps\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    let stepsContent = '<ol>';\r\n    for (const step of thought.proof.steps) {\r\n      stepsContent += `\r\n        <li>\r\n          <strong>${escapeHTML(step.statement)}</strong>\r\n          <p><em>Justification:</em> ${escapeHTML(step.justification)}</p>\r\n          ${step.rule ? `<p><em>Rule:</em> ${renderBadge(step.rule, 'info')}</p>` : ''}\r\n          ${step.referencesSteps && step.referencesSteps.length > 0 ? `<p><em>References steps:</em> ${step.referencesSteps.join(', ')}</p>` : ''}\r\n        </li>\r\n      `;\r\n    }\r\n    stepsContent += '</ol>';\r\n    html += renderSection('Proof Steps', stepsContent, '');\r\n  }\r\n\r\n  // Conclusion\r\n  if (thought.proof) {\r\n    const conclusionBadge = thought.proof.valid ? renderBadge('PROVEN', 'success') : renderBadge('NOT PROVEN', 'danger');\r\n    const conclusionContent = `\r\n      <p>${conclusionBadge}</p>\r\n      <p>${escapeHTML(thought.proof.conclusion)}</p>\r\n    `;\r\n    html += renderSection('Conclusion', conclusionContent, '');\r\n  }\r\n\r\n  // Truth Table (if present)\r\n  if (thought.truthTable) {\r\n    const truthTableContent = `\r\n      <p><strong>Tautology:</strong> ${thought.truthTable.isTautology ? '' : ''}</p>\r\n      <p><strong>Contradiction:</strong> ${thought.truthTable.isContradiction ? '' : ''}</p>\r\n      <p><strong>Contingent:</strong> ${thought.truthTable.isContingent ? '' : ''}</p>\r\n    `;\r\n    html += renderSection('Truth Table', truthTableContent, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export formal logic proof tree to Modelica format\r\n */\r\nfunction formalLogicToModelica(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  let modelica = 'package FormalLogicProof\\n';\r\n  modelica += '  \"Formal logic proof representation\"\\n\\n';\r\n\r\n  // Add propositions as Boolean parameters\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    modelica += '  // Logical Propositions\\n';\r\n    for (const proposition of thought.propositions) {\r\n      const propId = sanitizeModelicaId(proposition.id);\r\n      const comment = includeLabels\r\n        ? ` \"${escapeModelicaString(proposition.symbol)}: ${escapeModelicaString(proposition.statement)}\"`\r\n        : '';\r\n      const truthValue = proposition.truthValue !== undefined ? String(proposition.truthValue) : 'false';\r\n      modelica += `  parameter Boolean ${propId} = ${truthValue}${comment};\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Add inference rules as functions\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    modelica += '  // Inference Rules\\n';\r\n    for (const inference of thought.logicalInferences) {\r\n      const ruleName = sanitizeModelicaId(inference.rule.replace(/[^a-zA-Z0-9]/g, '_'));\r\n\r\n      modelica += `  function ${ruleName}\\n`;\r\n      modelica += `    \"${escapeModelicaString(inference.rule)}\"\\n`;\r\n\r\n      // Input parameters for premises\r\n      if (inference.premises && inference.premises.length > 0) {\r\n        for (let i = 0; i < inference.premises.length; i++) {\r\n          const premiseId = sanitizeModelicaId(inference.premises[i]);\r\n          modelica += `    input Boolean premise${i + 1} \"${escapeModelicaString(premiseId)}\";\\n`;\r\n        }\r\n      }\r\n\r\n      // Output parameter for conclusion\r\n      modelica += `    output Boolean conclusion \"${escapeModelicaString(inference.conclusion)}\";\\n`;\r\n      modelica += `  algorithm\\n`;\r\n\r\n      // Simple logical operation (all premises must be true)\r\n      if (inference.premises && inference.premises.length > 0) {\r\n        const conditions = inference.premises.map((_, i) => `premise${i + 1}`).join(' and ');\r\n        modelica += `    conclusion := ${conditions};\\n`;\r\n      } else {\r\n        modelica += `    conclusion := false;\\n`;\r\n      }\r\n\r\n      modelica += `  end ${ruleName};\\n\\n`;\r\n    }\r\n  }\r\n\r\n  // Add proof steps as model components\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    modelica += '  // Proof Steps\\n';\r\n    modelica += `  model ProofSequence\\n`;\r\n    modelica += `    \"${escapeModelicaString(thought.proof.theorem)}\"\\n\\n`;\r\n\r\n    for (const step of thought.proof.steps) {\r\n      const stepId = sanitizeModelicaId(`Step${step.stepNumber}`);\r\n      const comment = includeLabels\r\n        ? ` \"${escapeModelicaString(step.statement)}\"`\r\n        : '';\r\n      modelica += `    parameter Boolean ${stepId} = true${comment};\\n`;\r\n\r\n      if (step.rule) {\r\n        modelica += `    // Rule: ${escapeModelicaString(step.rule)}\\n`;\r\n      }\r\n      if (step.justification) {\r\n        modelica += `    // Justification: ${escapeModelicaString(step.justification)}\\n`;\r\n      }\r\n    }\r\n\r\n    modelica += '\\n';\r\n\r\n    // Add theorem conclusion\r\n    const validStr = thought.proof.valid ? 'true' : 'false';\r\n    modelica += `    parameter Boolean theoremProven = ${validStr} \"Theorem is proven\";\\n`;\r\n\r\n    if (includeMetrics) {\r\n      const completeness = thought.proof.completeness.toFixed(4);\r\n      modelica += `    parameter Real completeness = ${completeness} \"Proof completeness (0-1)\";\\n`;\r\n    }\r\n\r\n    modelica += `  end ProofSequence;\\n\\n`;\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    modelica += '  // Proof Metrics\\n';\r\n    modelica += `  constant Integer propositionCount = ${thought.propositions?.length || 0};\\n`;\r\n    modelica += `  constant Integer inferenceCount = ${thought.logicalInferences?.length || 0};\\n`;\r\n    modelica += `  constant Integer proofStepCount = ${thought.proof?.steps?.length || 0};\\n`;\r\n\r\n    if (thought.truthTable) {\r\n      modelica += `  constant Boolean isTautology = ${thought.truthTable.isTautology};\\n`;\r\n      modelica += `  constant Boolean isContradiction = ${thought.truthTable.isContradiction};\\n`;\r\n      modelica += `  constant Boolean isContingent = ${thought.truthTable.isContingent};\\n`;\r\n    }\r\n  }\r\n\r\n  modelica += 'end FormalLogicProof;\\n';\r\n  return modelica;\r\n}\r\n\r\n/**\r\n * Export formal logic proof tree to UML format\r\n */\r\nfunction formalLogicToUML(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Add propositions as class nodes\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    for (const proposition of thought.propositions) {\r\n      const propId = sanitizeId(proposition.id);\r\n      const attributes: string[] = [];\r\n\r\n      if (includeLabels) {\r\n        attributes.push(`symbol: ${proposition.symbol}`);\r\n        attributes.push(`type: ${proposition.type}`);\r\n        if (proposition.truthValue !== undefined) {\r\n          attributes.push(`truth: ${proposition.truthValue}`);\r\n        }\r\n      }\r\n\r\n      nodes.push({\r\n        id: propId,\r\n        label: includeLabels ? proposition.symbol : propId,\r\n        shape: 'class',\r\n        stereotype: 'premise',\r\n        attributes,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add logical inferences as class nodes with methods\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    for (const inference of thought.logicalInferences) {\r\n      const infId = sanitizeId(inference.id);\r\n      const operations: string[] = [];\r\n\r\n      if (includeLabels) {\r\n        operations.push(`apply(): Boolean`);\r\n      }\r\n\r\n      nodes.push({\r\n        id: infId,\r\n        label: includeLabels ? inference.rule : infId,\r\n        shape: 'class',\r\n        stereotype: 'inference',\r\n        attributes: [`valid: ${inference.valid}`],\r\n        methods: operations,\r\n      });\r\n\r\n      // Create dependency edges from premises to inference\r\n      if (inference.premises) {\r\n        for (const premiseId of inference.premises) {\r\n          const propId = sanitizeId(premiseId);\r\n          edges.push({\r\n            source: propId,\r\n            target: infId,\r\n            type: 'dependency',\r\n            label: 'premise',\r\n          });\r\n        }\r\n      }\r\n\r\n      // Create derivation edge from inference to conclusion\r\n      const conclusionId = sanitizeId(inference.conclusion);\r\n      edges.push({\r\n        source: infId,\r\n        target: conclusionId,\r\n        type: 'implementation',\r\n        label: 'derives',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add proof steps as class nodes\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    for (const step of thought.proof.steps) {\r\n      const stepId = `Step${step.stepNumber}`;\r\n      const attributes: string[] = [];\r\n\r\n      if (includeLabels) {\r\n        attributes.push(`number: ${step.stepNumber}`);\r\n        if (step.rule) {\r\n          attributes.push(`rule: ${step.rule}`);\r\n        }\r\n      }\r\n\r\n      nodes.push({\r\n        id: stepId,\r\n        label: includeLabels ? `Step ${step.stepNumber}` : stepId,\r\n        shape: 'class',\r\n        stereotype: 'proof-step',\r\n        attributes,\r\n      });\r\n\r\n      // Create edges between referenced steps\r\n      if (step.referencesSteps && step.referencesSteps.length > 0) {\r\n        for (const refStep of step.referencesSteps) {\r\n          edges.push({\r\n            source: `Step${refStep}`,\r\n            target: stepId,\r\n            type: 'dependency',\r\n            label: 'uses',\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    // Add theorem node\r\n    nodes.push({\r\n      id: 'Theorem',\r\n      label: includeLabels ? 'Theorem' : 'T',\r\n      shape: 'class',\r\n      stereotype: 'conclusion',\r\n      attributes: [\r\n        `valid: ${thought.proof.valid}`,\r\n        `completeness: ${(thought.proof.completeness * 100).toFixed(0)}%`,\r\n      ],\r\n    });\r\n\r\n    // Connect last step to theorem\r\n    const lastStep = thought.proof.steps[thought.proof.steps.length - 1];\r\n    edges.push({\r\n      source: `Step${lastStep.stepNumber}`,\r\n      target: 'Theorem',\r\n      type: 'implementation',\r\n      label: 'proves',\r\n    });\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: 'Formal Logic Proof',\r\n    diagramType: 'class',\r\n  });\r\n}\r\n\r\n/**\r\n * Export formal logic proof tree to JSON format\r\n */\r\nfunction formalLogicToJSON(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph('Formal Logic Proof', 'formal-logic', { includeMetrics });\r\n\r\n  // Add propositions as nodes\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    for (const proposition of thought.propositions) {\r\n      addNode(graph, {\r\n        id: proposition.id,\r\n        label: includeLabels ? `${proposition.symbol}: ${proposition.statement}` : proposition.symbol,\r\n        type: 'premise',\r\n        metadata: {\r\n          symbol: proposition.symbol,\r\n          propositionType: proposition.type,\r\n          statement: proposition.statement,\r\n          truthValue: proposition.truthValue,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Edge counter for unique IDs\r\n  let edgeId = 0;\r\n\r\n  // Add logical inferences as nodes and edges\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    for (const inference of thought.logicalInferences) {\r\n      const infId = inference.id;\r\n\r\n      addNode(graph, {\r\n        id: infId,\r\n        label: includeLabels ? inference.rule : infId,\r\n        type: 'inference',\r\n        metadata: {\r\n          rule: inference.rule,\r\n          valid: inference.valid,\r\n          premises: inference.premises,\r\n          conclusion: inference.conclusion,\r\n        },\r\n      });\r\n\r\n      // Create edges from premises to inference\r\n      if (inference.premises) {\r\n        for (const premiseId of inference.premises) {\r\n          addEdge(graph, {\r\n            id: `edge_${edgeId++}`,\r\n            source: premiseId,\r\n            target: infId,\r\n            label: 'premise',\r\n            metadata: { type: 'premise-to-inference' },\r\n          });\r\n        }\r\n      }\r\n\r\n      // Create edge from inference to conclusion\r\n      addEdge(graph, {\r\n        id: `edge_${edgeId++}`,\r\n        source: infId,\r\n        target: inference.conclusion,\r\n        label: 'derives',\r\n        metadata: { type: 'inference-to-conclusion' },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add proof steps as nodes\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    for (const step of thought.proof.steps) {\r\n      const stepId = `Step${step.stepNumber}`;\r\n\r\n      addNode(graph, {\r\n        id: stepId,\r\n        label: includeLabels ? `${step.stepNumber}. ${step.statement}` : `Step ${step.stepNumber}`,\r\n        type: 'proof-step',\r\n        metadata: {\r\n          stepNumber: step.stepNumber,\r\n          statement: step.statement,\r\n          justification: step.justification,\r\n          rule: step.rule,\r\n          referencesSteps: step.referencesSteps,\r\n        },\r\n      });\r\n\r\n      // Create edges between referenced steps\r\n      if (step.referencesSteps && step.referencesSteps.length > 0) {\r\n        for (const refStep of step.referencesSteps) {\r\n          addEdge(graph, {\r\n            id: `edge_${edgeId++}`,\r\n            source: `Step${refStep}`,\r\n            target: stepId,\r\n            label: 'uses',\r\n            metadata: { type: 'step-reference' },\r\n          });\r\n        }\r\n      }\r\n    }\r\n\r\n    // Add theorem node\r\n    addNode(graph, {\r\n      id: 'Theorem',\r\n      label: includeLabels ? thought.proof.theorem : 'Theorem',\r\n      type: 'conclusion',\r\n      metadata: {\r\n        theorem: thought.proof.theorem,\r\n        technique: thought.proof.technique,\r\n        valid: thought.proof.valid,\r\n        completeness: thought.proof.completeness,\r\n        conclusion: thought.proof.conclusion,\r\n      },\r\n    });\r\n\r\n    // Connect last step to theorem\r\n    const lastStep = thought.proof.steps[thought.proof.steps.length - 1];\r\n    addEdge(graph, {\r\n      id: `edge_${edgeId++}`,\r\n      source: `Step${lastStep.stepNumber}`,\r\n      target: 'Theorem',\r\n      label: 'proves',\r\n      metadata: { type: 'step-to-theorem' },\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'propositionCount', thought.propositions?.length || 0);\r\n    addMetric(graph, 'inferenceCount', thought.logicalInferences?.length || 0);\r\n    addMetric(graph, 'proofStepCount', thought.proof?.steps?.length || 0);\r\n\r\n    if (thought.proof) {\r\n      addMetric(graph, 'proofValid', thought.proof.valid);\r\n      addMetric(graph, 'proofCompleteness', thought.proof.completeness);\r\n    }\r\n\r\n    if (thought.truthTable) {\r\n      addMetric(graph, 'isTautology', thought.truthTable.isTautology);\r\n      addMetric(graph, 'isContradiction', thought.truthTable.isContradiction);\r\n      addMetric(graph, 'isContingent', thought.truthTable.isContingent);\r\n    }\r\n  }\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export formal logic proof tree to Markdown format\r\n */\r\nfunction formalLogicToMarkdown(thought: FormalLogicThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Proof Overview\r\n  if (thought.proof) {\r\n    const proofContent = keyValueSection({\r\n      'Theorem': thought.proof.theorem,\r\n      'Technique': thought.proof.technique,\r\n      'Valid': thought.proof.valid ? 'Yes' : 'No',\r\n      'Completeness': `${(thought.proof.completeness * 100).toFixed(0)}%`,\r\n    });\r\n    parts.push(section('Proof', proofContent));\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Propositions': thought.propositions?.length || 0,\r\n      'Inferences': thought.logicalInferences?.length || 0,\r\n      'Proof Steps': thought.proof?.steps?.length || 0,\r\n      'Completeness': thought.proof ? `${(thought.proof.completeness * 100).toFixed(0)}%` : 'N/A',\r\n    });\r\n    parts.push(section('Metrics', metricsContent));\r\n  }\r\n\r\n  // Propositions\r\n  if (thought.propositions && thought.propositions.length > 0) {\r\n    const propositionRows = thought.propositions.map(p => [\r\n      p.symbol,\r\n      p.type,\r\n      p.statement,\r\n      p.truthValue !== undefined ? String(p.truthValue) : 'N/A',\r\n    ]);\r\n    const propositionsTable = table(\r\n      ['Symbol', 'Type', 'Statement', 'Truth Value'],\r\n      propositionRows\r\n    );\r\n    parts.push(section('Propositions', propositionsTable));\r\n  }\r\n\r\n  // Logical Inferences\r\n  if (thought.logicalInferences && thought.logicalInferences.length > 0) {\r\n    const inferenceItems = thought.logicalInferences.map(inf =>\r\n      `**${inf.rule}** (${inf.valid ? 'Valid' : 'Invalid'})\\n  - Premises: ${inf.premises.join(', ')}\\n  - Conclusion: ${inf.conclusion}`\r\n    );\r\n    parts.push(section('Logical Inferences', list(inferenceItems)));\r\n  }\r\n\r\n  // Proof Steps\r\n  if (thought.proof && thought.proof.steps && thought.proof.steps.length > 0) {\r\n    const stepItems = thought.proof.steps.map(step =>\r\n      `**${step.stepNumber}. ${step.statement}**\\n  - Justification: ${step.justification}${step.rule ? `\\n  - Rule: ${step.rule}` : ''}${step.referencesSteps && step.referencesSteps.length > 0 ? `\\n  - References steps: ${step.referencesSteps.join(', ')}` : ''}`\r\n    );\r\n    parts.push(section('Proof Steps', list(stepItems)));\r\n  }\r\n\r\n  // Conclusion\r\n  if (thought.proof) {\r\n    const conclusionContent = `${thought.proof.conclusion}\\n\\n**Status:** ${thought.proof.valid ? 'PROVEN' : 'NOT PROVEN'}`;\r\n    parts.push(section('Conclusion', conclusionContent));\r\n  }\r\n\r\n  // Truth Table\r\n  if (thought.truthTable) {\r\n    const truthTableContent = keyValueSection({\r\n      'Tautology': thought.truthTable.isTautology ? 'Yes' : 'No',\r\n      'Contradiction': thought.truthTable.isContradiction ? 'Yes' : 'No',\r\n      'Contingent': thought.truthTable.isContingent ? 'Yes' : 'No',\r\n    });\r\n    parts.push(section('Truth Table', truthTableContent));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = formalLogicToMermaid(thought, 'default', true, true);\r\n    parts.push(section('Proof Tree Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Formal Logic Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: { mode: 'formal-logic' },\r\n  });\r\n}\r\n","/**\r\n * Engineering Visual Exporter (v7.1.0)\r\n * Phase 10: Visual export for engineering analysis thoughts\r\n *\r\n * Exports engineering analysis to visual formats:\r\n * - Mermaid: Flowcharts and sequence diagrams\r\n * - DOT: Graphviz directed graphs\r\n * - ASCII: Text-based visualization\r\n * - SVG: Native scalable vector graphics\r\n * - GraphML: XML-based graph format\r\n * - TikZ: LaTeX graphics\r\n * - Modelica: System modeling language for simulation\r\n */\r\n\r\nimport type { EngineeringThought } from '../../../types/modes/engineering.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderStadiumNode,\r\n  renderEdge,\r\n  getNodeColor,\r\n  renderMetricsPanel,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderBadge,\r\n  renderProgressBar,\r\n} from '../utils/html.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n  progressBar,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Main export function for engineering analysis\r\n */\r\nexport function exportEngineeringAnalysis(\r\n  thought: EngineeringThought,\r\n  options: VisualExportOptions\r\n): string {\r\n  const { format } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return engineeringToMermaid(thought, options);\r\n    case 'dot':\r\n      return engineeringToDOT(thought, options);\r\n    case 'ascii':\r\n      return engineeringToASCII(thought);\r\n    case 'svg':\r\n      return engineeringToSVG(thought, options);\r\n    case 'graphml':\r\n      return engineeringToGraphML(thought, options);\r\n    case 'tikz':\r\n      return engineeringToTikZ(thought, options);\r\n    case 'modelica':\r\n      return engineeringToModelica(thought, options);\r\n    case 'html':\r\n      return engineeringToHTML(thought, options);\r\n    case 'uml':\r\n      return engineeringToUML(thought, options);\r\n    case 'json':\r\n      return engineeringToJSON(thought, options);\r\n    case 'markdown':\r\n      return engineeringToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\n// =============================================================================\r\n// Mermaid Export\r\n// =============================================================================\r\n\r\nfunction engineeringToMermaid(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  const lines: string[] = ['flowchart TB'];\r\n\r\n  // Title node\r\n  lines.push(`  title[\" ${thought.analysisType.toUpperCase()} Analysis\"]`);\r\n  lines.push(`  title --> challenge[\"${thought.designChallenge.slice(0, 50)}${thought.designChallenge.length > 50 ? '...' : ''}\"]`);\r\n\r\n  // Requirements section\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    lines.push('');\r\n    lines.push('  subgraph Requirements [\" Requirements\"]');\r\n    for (const req of thought.requirements.requirements.slice(0, 5)) {\r\n      const label = includeLabels ? req.title.slice(0, 30) : req.id;\r\n      const status = req.status === 'verified' ? '' : req.status === 'implemented' ? '' : '';\r\n      lines.push(`    ${sanitizeId(req.id)}[\"${status} ${label}\"]`);\r\n    }\r\n    if (thought.requirements.requirements.length > 5) {\r\n      lines.push(`    reqMore[\"... +${thought.requirements.requirements.length - 5} more\"]`);\r\n    }\r\n    lines.push('  end');\r\n    lines.push('  challenge --> Requirements');\r\n  }\r\n\r\n  // Trade Study section\r\n  if (thought.tradeStudy) {\r\n    lines.push('');\r\n    lines.push('  subgraph TradeStudy [\" Trade Study\"]');\r\n    for (const alt of thought.tradeStudy.alternatives.slice(0, 4)) {\r\n      const isRecommended = alt.id === thought.tradeStudy.recommendation;\r\n      const icon = isRecommended ? '' : '';\r\n      const label = includeLabels ? alt.name.slice(0, 25) : alt.id;\r\n      lines.push(`    ${sanitizeId(alt.id)}[\"${icon} ${label}\"]`);\r\n    }\r\n    if (thought.tradeStudy.alternatives.length > 4) {\r\n      lines.push(`    altMore[\"... +${thought.tradeStudy.alternatives.length - 4} more\"]`);\r\n    }\r\n    lines.push('  end');\r\n    lines.push('  challenge --> TradeStudy');\r\n  }\r\n\r\n  // FMEA section\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    lines.push('');\r\n    lines.push('  subgraph FMEA [\" Failure Modes\"]');\r\n    const sortedModes = [...thought.fmea.failureModes].sort((a, b) => b.rpn - a.rpn);\r\n    for (const fm of sortedModes.slice(0, 4)) {\r\n      const risk = fm.rpn >= thought.fmea.rpnThreshold ? '' : fm.rpn >= 100 ? '' : '';\r\n      const label = includeMetrics ? `${fm.failureMode.slice(0, 20)} (RPN:${fm.rpn})` : fm.failureMode.slice(0, 25);\r\n      lines.push(`    ${sanitizeId(fm.id)}{{\"${risk} ${label}\"}}`);\r\n    }\r\n    if (thought.fmea.failureModes.length > 4) {\r\n      lines.push(`    fmMore[\"... +${thought.fmea.failureModes.length - 4} more\"]`);\r\n    }\r\n    lines.push('  end');\r\n    lines.push('  challenge --> FMEA');\r\n  }\r\n\r\n  // Design Decisions section\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    lines.push('');\r\n    lines.push('  subgraph Decisions [\" Design Decisions\"]');\r\n    for (const dec of thought.designDecisions.decisions.slice(0, 4)) {\r\n      const status = dec.status === 'accepted' ? '' : dec.status === 'proposed' ? '?' : '';\r\n      const label = includeLabels ? dec.title.slice(0, 25) : dec.id;\r\n      lines.push(`    ${sanitizeId(dec.id)}([\"${status} ${label}\"])`);\r\n    }\r\n    if (thought.designDecisions.decisions.length > 4) {\r\n      lines.push(`    decMore[\"... +${thought.designDecisions.decisions.length - 4} more\"]`);\r\n    }\r\n    lines.push('  end');\r\n    lines.push('  challenge --> Decisions');\r\n  }\r\n\r\n  // Metrics summary\r\n  if (includeMetrics && thought.assessment) {\r\n    lines.push('');\r\n    lines.push(`  metrics[\" Confidence: ${(thought.assessment.confidence * 100).toFixed(0)}%\"]`);\r\n    lines.push('  challenge --> metrics');\r\n  }\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// DOT Export\r\n// =============================================================================\r\n\r\nfunction engineeringToDOT(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  const lines: string[] = [\r\n    'digraph EngineeringAnalysis {',\r\n    '  rankdir=TB;',\r\n    '  node [fontname=\"Arial\", fontsize=10];',\r\n    '  edge [fontname=\"Arial\", fontsize=9];',\r\n    '',\r\n  ];\r\n\r\n  // Challenge node\r\n  lines.push(`  challenge [label=\"${thought.designChallenge.slice(0, 40)}\", shape=box, style=filled, fillcolor=lightblue];`);\r\n\r\n  // Requirements cluster\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    lines.push('');\r\n    lines.push('  subgraph cluster_requirements {');\r\n    lines.push('    label=\"Requirements\";');\r\n    lines.push('    style=filled;');\r\n    lines.push('    fillcolor=lightyellow;');\r\n    for (const req of thought.requirements.requirements) {\r\n      const label = includeLabels ? `${req.id}\\\\n${req.title.slice(0, 20)}` : req.id;\r\n      const color = req.status === 'verified' ? 'green' : req.status === 'implemented' ? 'blue' : 'gray';\r\n      lines.push(`    ${sanitizeId(req.id)} [label=\"${label}\", color=${color}];`);\r\n    }\r\n    lines.push('  }');\r\n    lines.push('  challenge -> ' + sanitizeId(thought.requirements.requirements[0]?.id || 'req') + ';');\r\n  }\r\n\r\n  // Trade Study cluster\r\n  if (thought.tradeStudy) {\r\n    lines.push('');\r\n    lines.push('  subgraph cluster_trade {');\r\n    lines.push('    label=\"Trade Study\";');\r\n    lines.push('    style=filled;');\r\n    lines.push('    fillcolor=lightgreen;');\r\n    for (const alt of thought.tradeStudy.alternatives) {\r\n      const label = includeLabels ? `${alt.id}\\\\n${alt.name.slice(0, 20)}` : alt.id;\r\n      const style = alt.id === thought.tradeStudy.recommendation ? 'bold' : 'solid';\r\n      const color = alt.id === thought.tradeStudy.recommendation ? 'gold' : 'white';\r\n      lines.push(`    ${sanitizeId(alt.id)} [label=\"${label}\", style=\"${style},filled\", fillcolor=${color}];`);\r\n    }\r\n    lines.push('  }');\r\n    lines.push('  challenge -> ' + sanitizeId(thought.tradeStudy.alternatives[0]?.id || 'alt') + ';');\r\n  }\r\n\r\n  // FMEA cluster\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    lines.push('');\r\n    lines.push('  subgraph cluster_fmea {');\r\n    lines.push('    label=\"FMEA\";');\r\n    lines.push('    style=filled;');\r\n    lines.push('    fillcolor=mistyrose;');\r\n    for (const fm of thought.fmea.failureModes) {\r\n      const label = includeMetrics\r\n        ? `${fm.id}\\\\n${fm.failureMode.slice(0, 15)}\\\\nRPN:${fm.rpn}`\r\n        : `${fm.id}\\\\n${fm.failureMode.slice(0, 20)}`;\r\n      const color = fm.rpn >= thought.fmea.rpnThreshold ? 'red' : fm.rpn >= 100 ? 'orange' : 'green';\r\n      lines.push(`    ${sanitizeId(fm.id)} [label=\"${label}\", shape=diamond, color=${color}];`);\r\n    }\r\n    lines.push('  }');\r\n    lines.push('  challenge -> ' + sanitizeId(thought.fmea.failureModes[0]?.id || 'fm') + ';');\r\n  }\r\n\r\n  // Design Decisions cluster\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    lines.push('');\r\n    lines.push('  subgraph cluster_decisions {');\r\n    lines.push('    label=\"Design Decisions\";');\r\n    lines.push('    style=filled;');\r\n    lines.push('    fillcolor=lavender;');\r\n    for (const dec of thought.designDecisions.decisions) {\r\n      const label = includeLabels ? `${dec.id}\\\\n${dec.title.slice(0, 20)}` : dec.id;\r\n      const shape = dec.status === 'accepted' ? 'box' : 'ellipse';\r\n      lines.push(`    ${sanitizeId(dec.id)} [label=\"${label}\", shape=${shape}];`);\r\n    }\r\n    lines.push('  }');\r\n    lines.push('  challenge -> ' + sanitizeId(thought.designDecisions.decisions[0]?.id || 'dec') + ';');\r\n  }\r\n\r\n  lines.push('}');\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// ASCII Export\r\n// =============================================================================\r\n\r\nfunction engineeringToASCII(thought: EngineeringThought): string {\r\n  const lines: string[] = [];\r\n  const width = 60;\r\n\r\n  // Header\r\n  lines.push('' + ''.repeat(width - 2) + '');\r\n  lines.push('' + `  ENGINEERING: ${thought.analysisType.toUpperCase()} `.padEnd(width - 2) + '');\r\n  lines.push('' + ''.repeat(width - 2) + '');\r\n\r\n  // Design Challenge\r\n  lines.push('' + ` Challenge: ${thought.designChallenge.slice(0, width - 14)}`.padEnd(width - 2) + '');\r\n  lines.push('' + ''.repeat(width - 2) + '');\r\n\r\n  // Requirements\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    lines.push('' + '  REQUIREMENTS'.padEnd(width - 2) + '');\r\n    lines.push('' + ''.repeat(width - 2) + '');\r\n    for (const req of thought.requirements.requirements.slice(0, 5)) {\r\n      const status = req.status === 'verified' ? '[]' : req.status === 'implemented' ? '[]' : '[ ]';\r\n      const line = ` ${status} ${req.id}: ${req.title.slice(0, width - 20)}`;\r\n      lines.push('' + line.padEnd(width - 2) + '');\r\n    }\r\n    if (thought.requirements.requirements.length > 5) {\r\n      lines.push('' + `   ... +${thought.requirements.requirements.length - 5} more`.padEnd(width - 2) + '');\r\n    }\r\n    lines.push('' + `   Coverage: ${thought.requirements.coverage.verified}/${thought.requirements.coverage.total} verified`.padEnd(width - 2) + '');\r\n    lines.push('' + ''.repeat(width - 2) + '');\r\n  }\r\n\r\n  // Trade Study\r\n  if (thought.tradeStudy) {\r\n    lines.push('' + '  TRADE STUDY'.padEnd(width - 2) + '');\r\n    lines.push('' + ''.repeat(width - 2) + '');\r\n    for (const alt of thought.tradeStudy.alternatives) {\r\n      const isRec = alt.id === thought.tradeStudy.recommendation;\r\n      const marker = isRec ? '' : '';\r\n      const line = ` ${marker} ${alt.name.slice(0, width - 8)}`;\r\n      lines.push('' + line.padEnd(width - 2) + '');\r\n    }\r\n    lines.push('' + `   Recommended: ${thought.tradeStudy.recommendation}`.padEnd(width - 2) + '');\r\n    lines.push('' + ''.repeat(width - 2) + '');\r\n  }\r\n\r\n  // FMEA\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    lines.push('' + '  FAILURE MODES (FMEA)'.padEnd(width - 2) + '');\r\n    lines.push('' + ''.repeat(width - 2) + '');\r\n    const sortedModes = [...thought.fmea.failureModes].sort((a, b) => b.rpn - a.rpn);\r\n    for (const fm of sortedModes.slice(0, 5)) {\r\n      const risk = fm.rpn >= thought.fmea.rpnThreshold ? '' : fm.rpn >= 100 ? '' : '';\r\n      const line = ` ${risk} ${fm.failureMode.slice(0, width - 25)} RPN:${fm.rpn}`;\r\n      lines.push('' + line.padEnd(width - 2) + '');\r\n    }\r\n    if (thought.fmea.failureModes.length > 5) {\r\n      lines.push('' + `   ... +${thought.fmea.failureModes.length - 5} more`.padEnd(width - 2) + '');\r\n    }\r\n    lines.push('' + `   Critical: ${thought.fmea.summary.criticalModes} modes above threshold`.padEnd(width - 2) + '');\r\n    lines.push('' + ''.repeat(width - 2) + '');\r\n  }\r\n\r\n  // Design Decisions\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    lines.push('' + '  DESIGN DECISIONS'.padEnd(width - 2) + '');\r\n    lines.push('' + ''.repeat(width - 2) + '');\r\n    for (const dec of thought.designDecisions.decisions.slice(0, 5)) {\r\n      const status = dec.status === 'accepted' ? '[]' : dec.status === 'proposed' ? '[?]' : '[]';\r\n      const line = ` ${status} ${dec.id}: ${dec.title.slice(0, width - 20)}`;\r\n      lines.push('' + line.padEnd(width - 2) + '');\r\n    }\r\n    if (thought.designDecisions.decisions.length > 5) {\r\n      lines.push('' + `   ... +${thought.designDecisions.decisions.length - 5} more`.padEnd(width - 2) + '');\r\n    }\r\n    lines.push('' + ''.repeat(width - 2) + '');\r\n  }\r\n\r\n  // Assessment\r\n  if (thought.assessment) {\r\n    lines.push('' + '  ASSESSMENT'.padEnd(width - 2) + '');\r\n    lines.push('' + `   Confidence: ${(thought.assessment.confidence * 100).toFixed(0)}%`.padEnd(width - 2) + '');\r\n    if (thought.assessment.keyRisks.length > 0) {\r\n      lines.push('' + `   Key Risks: ${thought.assessment.keyRisks.length}`.padEnd(width - 2) + '');\r\n    }\r\n    if (thought.assessment.openIssues.length > 0) {\r\n      lines.push('' + `   Open Issues: ${thought.assessment.openIssues.length}`.padEnd(width - 2) + '');\r\n    }\r\n  }\r\n\r\n  // Footer\r\n  lines.push('' + ''.repeat(width - 2) + '');\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// SVG Export\r\n// =============================================================================\r\n\r\nfunction engineeringToSVG(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const { colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n  const svgOptions = { ...DEFAULT_SVG_OPTIONS, ...options };\r\n  const nodePositions = new Map<string, SVGNodePosition>();\r\n\r\n  let currentY = 60;\r\n  const centerX = (svgOptions.svgWidth || 800) / 2;\r\n\r\n  // Challenge node\r\n  const challengePos: SVGNodePosition = {\r\n    id: 'challenge',\r\n    label: thought.designChallenge.slice(0, 40),\r\n    x: centerX - 100,\r\n    y: currentY,\r\n    width: 200,\r\n    height: 40,\r\n    type: 'primary',\r\n  };\r\n  nodePositions.set('challenge', challengePos);\r\n  currentY += 80;\r\n\r\n  // Section nodes\r\n  const sections: Array<{ id: string; label: string; type: string }> = [];\r\n\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    const label = includeLabels ? `Requirements (${thought.requirements.requirements.length})` : 'Reqs';\r\n    sections.push({ id: 'requirements', label, type: 'info' });\r\n  }\r\n  if (thought.tradeStudy) {\r\n    const label = includeLabels ? `Trade Study (${thought.tradeStudy.alternatives.length} alts)` : 'Trade';\r\n    sections.push({ id: 'tradeStudy', label, type: 'secondary' });\r\n  }\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    const label = includeLabels ? `FMEA (${thought.fmea.failureModes.length} modes)` : 'FMEA';\r\n    sections.push({ id: 'fmea', label, type: 'danger' });\r\n  }\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    const label = includeLabels ? `Decisions (${thought.designDecisions.decisions.length})` : 'Decisions';\r\n    sections.push({ id: 'decisions', label, type: 'tertiary' });\r\n  }\r\n\r\n  // Position sections horizontally\r\n  const sectionWidth = 150;\r\n  const totalWidth = sections.length * (sectionWidth + 20);\r\n  let startX = centerX - totalWidth / 2;\r\n\r\n  for (const section of sections) {\r\n    const pos: SVGNodePosition = {\r\n      id: section.id,\r\n      label: section.label,\r\n      x: startX,\r\n      y: currentY,\r\n      width: sectionWidth,\r\n      height: 40,\r\n      type: section.type,\r\n    };\r\n    nodePositions.set(section.id, pos);\r\n    startX += sectionWidth + 20;\r\n  }\r\n\r\n  // Calculate SVG height\r\n  const svgHeight = currentY + 120;\r\n\r\n  // Generate SVG\r\n  let svg = generateSVGHeader(svgOptions.svgWidth || 800, svgHeight, `Engineering: ${thought.analysisType}`);\r\n\r\n  // Render challenge node\r\n  const challengeColors = getNodeColor('primary', colorScheme);\r\n  svg += renderStadiumNode(challengePos, challengeColors);\r\n\r\n  // Render section nodes and edges\r\n  for (const section of sections) {\r\n    const pos = nodePositions.get(section.id)!;\r\n    const colors = getNodeColor(section.type, colorScheme);\r\n    svg += renderRectNode(pos, colors, 5);\r\n    svg += renderEdge(challengePos, pos, { color: '#666666' });\r\n  }\r\n\r\n  // Add metrics panel\r\n  if (includeMetrics && thought.assessment) {\r\n    const metrics = [\r\n      { label: 'Confidence', value: `${(thought.assessment.confidence * 100).toFixed(0)}%` },\r\n      { label: 'Key Risks', value: thought.assessment.keyRisks.length },\r\n      { label: 'Open Issues', value: thought.assessment.openIssues.length },\r\n    ];\r\n    svg += renderMetricsPanel((svgOptions.svgWidth || 800) - 150, 20, metrics);\r\n  }\r\n\r\n  svg += generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n// =============================================================================\r\n// GraphML Export\r\n// =============================================================================\r\n\r\nfunction engineeringToGraphML(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeId = 0;\r\n\r\n  // Challenge node\r\n  nodes.push({\r\n    id: 'challenge',\r\n    label: includeLabels ? thought.designChallenge : 'Challenge',\r\n    type: 'challenge',\r\n    metadata: { analysisType: thought.analysisType },\r\n  });\r\n\r\n  // Requirements\r\n  if (thought.requirements) {\r\n    for (const req of thought.requirements.requirements) {\r\n      nodes.push({\r\n        id: sanitizeId(req.id),\r\n        label: includeLabels ? req.title : req.id,\r\n        type: 'requirement',\r\n        metadata: {\r\n          priority: req.priority,\r\n          status: req.status,\r\n          source: req.source,\r\n        },\r\n      });\r\n      edges.push({\r\n        id: `e${edgeId++}`,\r\n        source: 'challenge',\r\n        target: sanitizeId(req.id),\r\n        label: 'requires',\r\n      });\r\n\r\n      // Traceability edges\r\n      if (req.tracesTo) {\r\n        for (const parentId of req.tracesTo) {\r\n          edges.push({\r\n            id: `e${edgeId++}`,\r\n            source: sanitizeId(req.id),\r\n            target: sanitizeId(parentId),\r\n            label: 'traces to',\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  // Trade Study\r\n  if (thought.tradeStudy) {\r\n    nodes.push({\r\n      id: 'tradeStudy',\r\n      label: thought.tradeStudy.title,\r\n      type: 'trade-study',\r\n    });\r\n    edges.push({\r\n      id: `e${edgeId++}`,\r\n      source: 'challenge',\r\n      target: 'tradeStudy',\r\n    });\r\n\r\n    for (const alt of thought.tradeStudy.alternatives) {\r\n      const isRecommended = alt.id === thought.tradeStudy.recommendation;\r\n      nodes.push({\r\n        id: sanitizeId(alt.id),\r\n        label: includeLabels ? alt.name : alt.id,\r\n        type: isRecommended ? 'recommended' : 'alternative',\r\n        metadata: {\r\n          riskLevel: alt.riskLevel,\r\n          estimatedCost: alt.estimatedCost,\r\n        },\r\n      });\r\n      edges.push({\r\n        id: `e${edgeId++}`,\r\n        source: 'tradeStudy',\r\n        target: sanitizeId(alt.id),\r\n        label: isRecommended ? 'recommended' : 'alternative',\r\n      });\r\n    }\r\n  }\r\n\r\n  // FMEA\r\n  if (thought.fmea) {\r\n    for (const fm of thought.fmea.failureModes) {\r\n      nodes.push({\r\n        id: sanitizeId(fm.id),\r\n        label: includeLabels ? fm.failureMode : fm.id,\r\n        type: fm.rpn >= thought.fmea.rpnThreshold ? 'critical-failure' : 'failure-mode',\r\n        metadata: includeMetrics ? {\r\n          severity: fm.severity,\r\n          occurrence: fm.occurrence,\r\n          detection: fm.detection,\r\n          rpn: fm.rpn,\r\n          component: fm.component,\r\n        } : undefined,\r\n      });\r\n      edges.push({\r\n        id: `e${edgeId++}`,\r\n        source: 'challenge',\r\n        target: sanitizeId(fm.id),\r\n        label: 'failure mode',\r\n        metadata: includeMetrics ? { weight: fm.rpn } : undefined,\r\n      });\r\n    }\r\n  }\r\n\r\n  // Design Decisions\r\n  if (thought.designDecisions) {\r\n    for (const dec of thought.designDecisions.decisions) {\r\n      nodes.push({\r\n        id: sanitizeId(dec.id),\r\n        label: includeLabels ? dec.title : dec.id,\r\n        type: `decision-${dec.status}`,\r\n        metadata: {\r\n          status: dec.status,\r\n          context: dec.context,\r\n        },\r\n      });\r\n      edges.push({\r\n        id: `e${edgeId++}`,\r\n        source: 'challenge',\r\n        target: sanitizeId(dec.id),\r\n        label: 'decision',\r\n      });\r\n\r\n      // Related decisions edges\r\n      if (dec.relatedDecisions) {\r\n        for (const relId of dec.relatedDecisions) {\r\n          edges.push({\r\n            id: `e${edgeId++}`,\r\n            source: sanitizeId(dec.id),\r\n            target: sanitizeId(relId),\r\n            label: 'related to',\r\n          });\r\n        }\r\n      }\r\n    }\r\n  }\r\n\r\n  return generateGraphML(nodes, edges, { graphName: 'Engineering Analysis', directed: true });\r\n}\r\n\r\n// =============================================================================\r\n// TikZ Export\r\n// =============================================================================\r\n\r\nfunction engineeringToTikZ(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n\r\n  // Challenge node\r\n  nodes.push({\r\n    id: 'challenge',\r\n    label: thought.designChallenge.slice(0, 30),\r\n    x: 4,\r\n    y: 0,\r\n    type: 'primary',\r\n    shape: 'stadium',\r\n  });\r\n\r\n  let sectionX = 0;\r\n  const sectionY = -2;\r\n\r\n  // Requirements section\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    nodes.push({\r\n      id: 'reqs',\r\n      label: includeLabels ? `Reqs (${thought.requirements.requirements.length})` : 'Requirements',\r\n      x: sectionX,\r\n      y: sectionY,\r\n      type: 'info',\r\n      shape: 'rectangle',\r\n    });\r\n    edges.push({ source: 'challenge', target: 'reqs', directed: true });\r\n    sectionX += 2.5;\r\n  }\r\n\r\n  // Trade Study section\r\n  if (thought.tradeStudy) {\r\n    nodes.push({\r\n      id: 'trade',\r\n      label: includeLabels ? `Trade (${thought.tradeStudy.alternatives.length})` : 'Trade Study',\r\n      x: sectionX,\r\n      y: sectionY,\r\n      type: 'secondary',\r\n      shape: 'rectangle',\r\n    });\r\n    edges.push({ source: 'challenge', target: 'trade', directed: true });\r\n    sectionX += 2.5;\r\n  }\r\n\r\n  // FMEA section\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    const criticalCount = thought.fmea.summary.criticalModes;\r\n    nodes.push({\r\n      id: 'fmea',\r\n      label: includeMetrics ? `FMEA (${criticalCount} crit)` : 'FMEA',\r\n      x: sectionX,\r\n      y: sectionY,\r\n      type: 'danger',\r\n      shape: 'diamond',\r\n    });\r\n    edges.push({ source: 'challenge', target: 'fmea', directed: true });\r\n    sectionX += 2.5;\r\n  }\r\n\r\n  // Decisions section\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    nodes.push({\r\n      id: 'decisions',\r\n      label: includeLabels ? `Decisions (${thought.designDecisions.decisions.length})` : 'Decisions',\r\n      x: sectionX,\r\n      y: sectionY,\r\n      type: 'tertiary',\r\n      shape: 'ellipse',\r\n    });\r\n    edges.push({ source: 'challenge', target: 'decisions', directed: true });\r\n  }\r\n\r\n  // Assessment node if present\r\n  if (thought.assessment && includeMetrics) {\r\n    nodes.push({\r\n      id: 'assessment',\r\n      label: `${(thought.assessment.confidence * 100).toFixed(0)}% conf`,\r\n      x: 4,\r\n      y: -4,\r\n      type: 'success',\r\n      shape: 'ellipse',\r\n    });\r\n    edges.push({ source: 'challenge', target: 'assessment', style: 'dashed', directed: true });\r\n  }\r\n\r\n  return generateTikZ(nodes, edges, { title: `Engineering: ${thought.analysisType}` });\r\n}\r\n\r\n// =============================================================================\r\n// Modelica Export\r\n// =============================================================================\r\n\r\n/**\r\n * Sanitize identifier for Modelica (must start with letter, alphanumeric + underscore only)\r\n */\r\nfunction sanitizeModelicaId(id: string): string {\r\n  // Replace hyphens and spaces with underscores\r\n  let sanitized = id.replace(/[-\\s]/g, '_');\r\n  // Remove any non-alphanumeric characters except underscore\r\n  sanitized = sanitized.replace(/[^a-zA-Z0-9_]/g, '');\r\n  // Ensure it starts with a letter\r\n  if (!/^[a-zA-Z]/.test(sanitized)) {\r\n    sanitized = 'id_' + sanitized;\r\n  }\r\n  return sanitized;\r\n}\r\n\r\n/**\r\n * Escape string for Modelica string literals\r\n */\r\nfunction escapeModelicaString(str: string): string {\r\n  return str\r\n    .replace(/\\\\/g, '\\\\\\\\')\r\n    .replace(/\"/g, '\\\\\"')\r\n    .replace(/\\n/g, '\\\\n')\r\n    .replace(/\\r/g, '\\\\r')\r\n    .replace(/\\t/g, '\\\\t');\r\n}\r\n\r\nfunction engineeringToModelica(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true, modelicaPackageName, modelicaIncludeAnnotations = true } = options;\r\n  const packageName = modelicaPackageName || sanitizeModelicaId(thought.designChallenge.slice(0, 30)) || 'EngineeringAnalysis';\r\n  const lines: string[] = [];\r\n\r\n  // Package header\r\n  lines.push(`package ${packageName}`);\r\n  lines.push(`  \"Engineering Analysis: ${escapeModelicaString(thought.designChallenge)}\"`);\r\n  lines.push('');\r\n\r\n  // Requirements as a record type with constraints\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('  // Requirements Traceability');\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('');\r\n    lines.push('  record Requirements');\r\n    lines.push(`    \"Requirements traceability for ${escapeModelicaString(thought.designChallenge)}\"`);\r\n    lines.push('');\r\n\r\n    for (const req of thought.requirements.requirements) {\r\n      const reqId = sanitizeModelicaId(req.id);\r\n      const priority = req.priority.toUpperCase();\r\n      const status = req.status;\r\n      lines.push(`    // ${req.id}: ${escapeModelicaString(req.title)}`);\r\n      lines.push(`    parameter Boolean ${reqId}_satisfied = ${status === 'verified' || status === 'implemented' ? 'true' : 'false'}`);\r\n      if (modelicaIncludeAnnotations) {\r\n        lines.push(`      annotation(Dialog(group=\"${priority}\", tab=\"Requirements\"),`);\r\n        lines.push(`               Documentation(info=\"<html><p>${escapeModelicaString(req.description)}</p></html>\"));`);\r\n      } else {\r\n        lines.push('      ;');\r\n      }\r\n      lines.push('');\r\n    }\r\n\r\n    // Coverage metrics\r\n    if (includeMetrics) {\r\n      const cov = thought.requirements.coverage;\r\n      lines.push(`    // Coverage Metrics`);\r\n      lines.push(`    final parameter Integer totalRequirements = ${cov.total};`);\r\n      lines.push(`    final parameter Integer verifiedRequirements = ${cov.verified};`);\r\n      lines.push(`    final parameter Real coverageRatio = ${(cov.verified / Math.max(cov.total, 1)).toFixed(3)};`);\r\n      lines.push('');\r\n    }\r\n\r\n    lines.push('  end Requirements;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Trade Study as parameterized model\r\n  if (thought.tradeStudy) {\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('  // Trade Study');\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('');\r\n    lines.push('  model TradeStudy');\r\n    lines.push(`    \"${escapeModelicaString(thought.tradeStudy.title)}\"`);\r\n    lines.push('');\r\n\r\n    // Define alternatives as an enumeration\r\n    const altIds = thought.tradeStudy.alternatives.map(a => sanitizeModelicaId(a.id));\r\n    lines.push(`    type Alternative = enumeration(`);\r\n    for (let i = 0; i < altIds.length; i++) {\r\n      const alt = thought.tradeStudy.alternatives[i];\r\n      const comma = i < altIds.length - 1 ? ',' : '';\r\n      lines.push(`      ${altIds[i]} \"${escapeModelicaString(alt.name)}\"${comma}`);\r\n    }\r\n    lines.push('    );');\r\n    lines.push('');\r\n\r\n    // Recommended alternative\r\n    const recId = sanitizeModelicaId(thought.tradeStudy.recommendation);\r\n    lines.push(`    parameter Alternative selectedAlternative = Alternative.${recId}`);\r\n    lines.push(`      \"Selected alternative based on trade study\";`);\r\n    lines.push('');\r\n\r\n    // Criteria weights\r\n    lines.push('    // Criteria Weights (sum to 1.0)');\r\n    for (const crit of thought.tradeStudy.criteria) {\r\n      const critId = sanitizeModelicaId(crit.id);\r\n      lines.push(`    parameter Real weight_${critId} = ${crit.weight.toFixed(3)} \"${escapeModelicaString(crit.name)}\";`);\r\n    }\r\n    lines.push('');\r\n\r\n    // Scores for recommended alternative\r\n    lines.push('    // Scores for selected alternative');\r\n    const recScores = thought.tradeStudy.scores.filter(s => s.alternativeId === thought.tradeStudy!.recommendation);\r\n    for (const score of recScores) {\r\n      const critId = sanitizeModelicaId(score.criteriaId);\r\n      lines.push(`    final parameter Real score_${critId} = ${score.score};`);\r\n    }\r\n    lines.push('');\r\n\r\n    if (modelicaIncludeAnnotations) {\r\n      lines.push('    annotation(Documentation(info=\"<html>');\r\n      lines.push(`      <h3>Objective</h3><p>${escapeModelicaString(thought.tradeStudy.objective)}</p>`);\r\n      lines.push(`      <h3>Justification</h3><p>${escapeModelicaString(thought.tradeStudy.justification)}</p>`);\r\n      lines.push('    </html>\"));');\r\n    }\r\n\r\n    lines.push('  end TradeStudy;');\r\n    lines.push('');\r\n  }\r\n\r\n  // FMEA as failure mode records\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('  // Failure Mode and Effects Analysis (FMEA)');\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('');\r\n    lines.push('  model FMEA');\r\n    lines.push(`    \"FMEA for ${escapeModelicaString(thought.fmea.system)}\"`);\r\n    lines.push('');\r\n\r\n    // RPN threshold\r\n    lines.push(`    parameter Integer rpnThreshold = ${thought.fmea.rpnThreshold} \"Action required above this RPN\";`);\r\n    lines.push('');\r\n\r\n    // Failure modes as nested records\r\n    for (const fm of thought.fmea.failureModes) {\r\n      const fmId = sanitizeModelicaId(fm.id);\r\n      const isCritical = fm.rpn >= thought.fmea.rpnThreshold;\r\n      lines.push(`    // Failure Mode: ${fm.id}`);\r\n      lines.push(`    record ${fmId}`);\r\n      lines.push(`      \"${escapeModelicaString(fm.failureMode)}\"`);\r\n      lines.push(`      constant String component = \"${escapeModelicaString(fm.component)}\";`);\r\n      lines.push(`      constant String cause = \"${escapeModelicaString(fm.cause)}\";`);\r\n      lines.push(`      constant String effect = \"${escapeModelicaString(fm.effect)}\";`);\r\n      lines.push(`      constant Integer severity = ${fm.severity} \"1-10 scale\";`);\r\n      lines.push(`      constant Integer occurrence = ${fm.occurrence} \"1-10 scale\";`);\r\n      lines.push(`      constant Integer detection = ${fm.detection} \"1-10 scale\";`);\r\n      lines.push(`      constant Integer rpn = ${fm.rpn} \"Risk Priority Number\";`);\r\n      lines.push(`      constant Boolean isCritical = ${isCritical};`);\r\n      if (fm.mitigation) {\r\n        lines.push(`      constant String mitigation = \"${escapeModelicaString(fm.mitigation)}\";`);\r\n      }\r\n      lines.push(`    end ${fmId};`);\r\n      lines.push('');\r\n    }\r\n\r\n    // Summary metrics\r\n    if (includeMetrics) {\r\n      const sum = thought.fmea.summary;\r\n      lines.push('    // Summary Statistics');\r\n      lines.push(`    final parameter Integer totalModes = ${sum.totalModes};`);\r\n      lines.push(`    final parameter Integer criticalModes = ${sum.criticalModes};`);\r\n      lines.push(`    final parameter Real averageRpn = ${sum.averageRpn.toFixed(1)};`);\r\n      lines.push(`    final parameter Integer maxRpn = ${sum.maxRpn};`);\r\n      lines.push('');\r\n    }\r\n\r\n    lines.push('  end FMEA;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Design Decisions as documentation records\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('  // Design Decision Records');\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('');\r\n    lines.push('  package DesignDecisions');\r\n    if (thought.designDecisions.projectName) {\r\n      lines.push(`    \"Design decisions for ${escapeModelicaString(thought.designDecisions.projectName)}\"`);\r\n    }\r\n    lines.push('');\r\n\r\n    for (const dec of thought.designDecisions.decisions) {\r\n      const decId = sanitizeModelicaId(dec.id);\r\n      lines.push(`    record ${decId}`);\r\n      lines.push(`      \"${escapeModelicaString(dec.title)}\"`);\r\n      lines.push(`      constant String status = \"${dec.status}\";`);\r\n      lines.push(`      constant String context = \"${escapeModelicaString(dec.context.slice(0, 200))}\";`);\r\n      lines.push(`      constant String decision = \"${escapeModelicaString(dec.decision.slice(0, 200))}\";`);\r\n      lines.push(`      constant String rationale = \"${escapeModelicaString(dec.rationale.slice(0, 200))}\";`);\r\n      if (dec.date) {\r\n        lines.push(`      constant String date = \"${dec.date}\";`);\r\n      }\r\n      if (dec.supersededBy) {\r\n        lines.push(`      constant String supersededBy = \"${sanitizeModelicaId(dec.supersededBy)}\";`);\r\n      }\r\n\r\n      if (modelicaIncludeAnnotations && dec.consequences.length > 0) {\r\n        lines.push('      annotation(Documentation(info=\"<html>');\r\n        lines.push('        <h4>Consequences</h4><ul>');\r\n        for (const cons of dec.consequences) {\r\n          lines.push(`          <li>${escapeModelicaString(cons)}</li>`);\r\n        }\r\n        lines.push('        </ul></html>\"));');\r\n      }\r\n\r\n      lines.push(`    end ${decId};`);\r\n      lines.push('');\r\n    }\r\n\r\n    lines.push('  end DesignDecisions;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Assessment summary\r\n  if (thought.assessment && includeMetrics) {\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('  // Assessment');\r\n    lines.push('  // ==========================================================================');\r\n    lines.push('');\r\n    lines.push('  record Assessment');\r\n    lines.push('    \"Overall engineering assessment\"');\r\n    lines.push(`    constant Real confidence = ${thought.assessment.confidence.toFixed(3)};`);\r\n    lines.push(`    constant Integer keyRisksCount = ${thought.assessment.keyRisks.length};`);\r\n    lines.push(`    constant Integer openIssuesCount = ${thought.assessment.openIssues.length};`);\r\n\r\n    if (modelicaIncludeAnnotations) {\r\n      lines.push('    annotation(Documentation(info=\"<html>');\r\n      if (thought.assessment.keyRisks.length > 0) {\r\n        lines.push('      <h4>Key Risks</h4><ul>');\r\n        for (const risk of thought.assessment.keyRisks) {\r\n          lines.push(`        <li>${escapeModelicaString(risk)}</li>`);\r\n        }\r\n        lines.push('      </ul>');\r\n      }\r\n      if (thought.assessment.nextSteps.length > 0) {\r\n        lines.push('      <h4>Next Steps</h4><ul>');\r\n        for (const step of thought.assessment.nextSteps) {\r\n          lines.push(`        <li>${escapeModelicaString(step)}</li>`);\r\n        }\r\n        lines.push('      </ul>');\r\n      }\r\n      lines.push('    </html>\"));');\r\n    }\r\n\r\n    lines.push('  end Assessment;');\r\n    lines.push('');\r\n  }\r\n\r\n  // Package footer with annotation\r\n  if (modelicaIncludeAnnotations) {\r\n    lines.push(`  annotation(`);\r\n    lines.push(`    Documentation(info=\"<html>`);\r\n    lines.push(`      <h2>Engineering Analysis: ${escapeModelicaString(thought.analysisType)}</h2>`);\r\n    lines.push(`      <p><b>Design Challenge:</b> ${escapeModelicaString(thought.designChallenge)}</p>`);\r\n    lines.push(`      <p>Generated by DeepThinking MCP v7.1.0</p>`);\r\n    lines.push(`    </html>\"),`);\r\n    lines.push(`    version=\"1.0.0\"`);\r\n    lines.push(`  );`);\r\n  }\r\n\r\n  lines.push(`end ${packageName};`);\r\n\r\n  return lines.join('\\n');\r\n}\r\n\r\n// =============================================================================\r\n// HTML Export\r\n// =============================================================================\r\n\r\n/**\r\n * Export engineering analysis to HTML format\r\n */\r\nfunction engineeringToHTML(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Engineering Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Analysis type badge\r\n  const typeBadge = renderBadge(thought.analysisType, 'primary');\r\n  html += `<p>Analysis Type: ${typeBadge}</p>\\n`;\r\n\r\n  // Design challenge\r\n  html += renderSection('Design Challenge', `\r\n    <p class=\"text-primary\"><strong>${escapeHTML(thought.designChallenge)}</strong></p>\r\n  `, '');\r\n\r\n  // Requirements Traceability\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    if (includeMetrics) {\r\n      const cov = thought.requirements.coverage;\r\n      const coveragePercent = (cov.verified / Math.max(cov.total, 1)) * 100;\r\n      html += '<div class=\"metrics-grid\">';\r\n      html += renderMetricCard('Total Requirements', cov.total, 'primary');\r\n      html += renderMetricCard('Verified', cov.verified, 'success');\r\n      html += renderMetricCard('Traced to Source', cov.tracedToSource, 'info');\r\n      html += renderMetricCard('Allocated', cov.allocatedToDesign, 'warning');\r\n      html += '</div>\\n';\r\n      html += renderProgressBar(coveragePercent, 'success');\r\n    }\r\n\r\n    const reqRows = thought.requirements.requirements.map(req => {\r\n      const statusBadge = renderBadge(req.status,\r\n        req.status === 'verified' ? 'success' :\r\n        req.status === 'implemented' ? 'info' :\r\n        req.status === 'approved' ? 'primary' : 'secondary'\r\n      );\r\n      const priorityBadge = renderBadge(req.priority,\r\n        req.priority === 'must' ? 'danger' :\r\n        req.priority === 'should' ? 'warning' : 'secondary'\r\n      );\r\n      return [\r\n        req.id,\r\n        req.title,\r\n        priorityBadge,\r\n        statusBadge,\r\n        req.source,\r\n      ];\r\n    });\r\n    html += renderSection('Requirements Traceability', renderTable(\r\n      ['ID', 'Title', 'Priority', 'Status', 'Source'],\r\n      reqRows.map(row => row.map(cell => typeof cell === 'string' && cell.startsWith('<') ? cell : escapeHTML(String(cell))))\r\n    ), '');\r\n  }\r\n\r\n  // Trade Study\r\n  if (thought.tradeStudy) {\r\n    html += renderSection('Trade Study: ' + thought.tradeStudy.title, `\r\n      <p><strong>Objective:</strong> ${escapeHTML(thought.tradeStudy.objective)}</p>\r\n      <h4>Criteria</h4>\r\n    ` + renderTable(\r\n      ['Criterion', 'Weight', 'Description'],\r\n      thought.tradeStudy.criteria.map(c => [c.name, (c.weight * 100).toFixed(0) + '%', c.description || '-'])\r\n    ) + `\r\n      <h4>Alternatives</h4>\r\n    ` + renderTable(\r\n      ['Alternative', 'Description', 'Risk Level'],\r\n      thought.tradeStudy.alternatives.map(a => [\r\n        a.id === thought.tradeStudy!.recommendation ? ' ' + a.name : a.name,\r\n        a.description,\r\n        a.riskLevel || '-',\r\n      ])\r\n    ) + `\r\n      <div class=\"card\" style=\"margin-top: 1rem; border-color: var(--success-color);\">\r\n        <div class=\"card-header text-success\">Recommendation: ${escapeHTML(thought.tradeStudy.recommendation)}</div>\r\n        <p>${escapeHTML(thought.tradeStudy.justification)}</p>\r\n      </div>\r\n    `, '');\r\n  }\r\n\r\n  // FMEA\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    if (includeMetrics) {\r\n      html += '<div class=\"metrics-grid\">';\r\n      html += renderMetricCard('Failure Modes', thought.fmea.summary.totalModes, 'primary');\r\n      html += renderMetricCard('Critical Modes', thought.fmea.summary.criticalModes, 'danger');\r\n      html += renderMetricCard('Average RPN', thought.fmea.summary.averageRpn.toFixed(1), 'warning');\r\n      html += renderMetricCard('Max RPN', thought.fmea.summary.maxRpn, 'danger');\r\n      html += '</div>\\n';\r\n    }\r\n\r\n    const fmeaRows = thought.fmea.failureModes.map(fm => {\r\n      const isCritical = fm.rpn >= thought.fmea!.rpnThreshold;\r\n      const rpnBadge = renderBadge(fm.rpn.toString(), isCritical ? 'danger' : 'warning');\r\n      return [\r\n        fm.component,\r\n        fm.failureMode.substring(0, 40) + (fm.failureMode.length > 40 ? '...' : ''),\r\n        fm.severity.toString(),\r\n        fm.occurrence.toString(),\r\n        fm.detection.toString(),\r\n        rpnBadge,\r\n        fm.mitigation ? '' : '-',\r\n      ];\r\n    });\r\n    html += renderSection('Failure Mode Analysis (FMEA)', `\r\n      <p><strong>System:</strong> ${escapeHTML(thought.fmea.system)} | <strong>RPN Threshold:</strong> ${thought.fmea.rpnThreshold}</p>\r\n    ` + renderTable(\r\n      ['Component', 'Failure Mode', 'S', 'O', 'D', 'RPN', 'Mitigation'],\r\n      fmeaRows.map(row => row.map(cell => typeof cell === 'string' && cell.startsWith('<') ? cell : escapeHTML(String(cell))))\r\n    ), '');\r\n  }\r\n\r\n  // Design Decisions\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    const decisionsContent = thought.designDecisions.decisions.map(dec => {\r\n      const statusBadge = renderBadge(dec.status,\r\n        dec.status === 'accepted' ? 'success' :\r\n        dec.status === 'rejected' ? 'danger' :\r\n        dec.status === 'deprecated' ? 'warning' : 'secondary'\r\n      );\r\n      return `\r\n        <div class=\"card\">\r\n          <div class=\"card-header\">${escapeHTML(dec.id)}: ${escapeHTML(dec.title)} ${statusBadge}</div>\r\n          <p><strong>Context:</strong> ${escapeHTML(dec.context)}</p>\r\n          <p><strong>Decision:</strong> ${escapeHTML(dec.decision)}</p>\r\n          <p><strong>Rationale:</strong> ${escapeHTML(dec.rationale)}</p>\r\n          ${dec.consequences.length > 0 ? `\r\n            <p><strong>Consequences:</strong></p>\r\n            <ul class=\"list-styled\">\r\n              ${dec.consequences.map(c => `<li>${escapeHTML(c)}</li>`).join('')}\r\n            </ul>\r\n          ` : ''}\r\n        </div>\r\n      `;\r\n    }).join('\\n');\r\n    html += renderSection('Design Decisions', decisionsContent, '');\r\n  }\r\n\r\n  // Assessment\r\n  if (thought.assessment && includeMetrics) {\r\n    html += renderSection('Assessment', `\r\n      <div class=\"metrics-grid\">\r\n        ${renderMetricCard('Confidence', (thought.assessment.confidence * 100).toFixed(0) + '%', 'primary')}\r\n        ${renderMetricCard('Key Risks', thought.assessment.keyRisks.length, 'danger')}\r\n        ${renderMetricCard('Open Issues', thought.assessment.openIssues.length, 'warning')}\r\n      </div>\r\n      ${renderProgressBar(thought.assessment.confidence * 100, 'primary')}\r\n      ${thought.assessment.keyRisks.length > 0 ? `\r\n        <h4>Key Risks</h4>\r\n        <ul class=\"list-styled\">\r\n          ${thought.assessment.keyRisks.map(r => `<li class=\"text-danger\">${escapeHTML(r)}</li>`).join('')}\r\n        </ul>\r\n      ` : ''}\r\n      ${thought.assessment.nextSteps.length > 0 ? `\r\n        <h4>Next Steps</h4>\r\n        <ul class=\"list-styled\">\r\n          ${thought.assessment.nextSteps.map(s => `<li>${escapeHTML(s)}</li>`).join('')}\r\n        </ul>\r\n      ` : ''}\r\n    `, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n// =============================================================================\r\n// UML Export\r\n// =============================================================================\r\n\r\n/**\r\n * Export engineering analysis to UML/PlantUML format\r\n */\r\nfunction engineeringToUML(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const { umlTheme, umlDirection, includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Central challenge node\r\n  nodes.push({\r\n    id: 'challenge',\r\n    label: thought.designChallenge.substring(0, 50),\r\n    shape: 'component',\r\n    stereotype: thought.analysisType,\r\n  });\r\n\r\n  // Requirements section\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    nodes.push({\r\n      id: 'requirements',\r\n      label: includeLabels ? `Requirements (${thought.requirements.requirements.length})` : 'Requirements',\r\n      shape: 'folder',\r\n      color: 'lightyellow',\r\n    });\r\n    edges.push({\r\n      source: 'challenge',\r\n      target: 'requirements',\r\n      type: 'composition',\r\n    });\r\n\r\n    // Add individual requirements\r\n    for (const req of thought.requirements.requirements.slice(0, 5)) {\r\n      const reqId = sanitizeId(req.id);\r\n      nodes.push({\r\n        id: `req_${reqId}`,\r\n        label: includeLabels ? req.title.substring(0, 30) : req.id,\r\n        shape: 'class',\r\n        stereotype: req.priority,\r\n      });\r\n      edges.push({\r\n        source: 'requirements',\r\n        target: `req_${reqId}`,\r\n        type: 'aggregation',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Trade Study section\r\n  if (thought.tradeStudy) {\r\n    nodes.push({\r\n      id: 'tradeStudy',\r\n      label: includeLabels ? thought.tradeStudy.title.substring(0, 30) : 'Trade Study',\r\n      shape: 'package',\r\n      color: 'lightgreen',\r\n    });\r\n    edges.push({\r\n      source: 'challenge',\r\n      target: 'tradeStudy',\r\n      type: 'dependency',\r\n    });\r\n\r\n    // Add alternatives\r\n    for (const alt of thought.tradeStudy.alternatives.slice(0, 4)) {\r\n      const isRec = alt.id === thought.tradeStudy.recommendation;\r\n      nodes.push({\r\n        id: `alt_${sanitizeId(alt.id)}`,\r\n        label: alt.name.substring(0, 25),\r\n        shape: isRec ? 'entity' : 'rectangle',\r\n        stereotype: isRec ? 'recommended' : undefined,\r\n        color: isRec ? '90EE90' : undefined,\r\n      });\r\n      edges.push({\r\n        source: 'tradeStudy',\r\n        target: `alt_${sanitizeId(alt.id)}`,\r\n        type: 'association',\r\n      });\r\n    }\r\n  }\r\n\r\n  // FMEA section\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    nodes.push({\r\n      id: 'fmea',\r\n      label: includeMetrics ? `FMEA (${thought.fmea.summary.criticalModes} critical)` : 'FMEA',\r\n      shape: 'database',\r\n      color: 'mistyrose',\r\n    });\r\n    edges.push({\r\n      source: 'challenge',\r\n      target: 'fmea',\r\n      type: 'dependency',\r\n    });\r\n  }\r\n\r\n  // Design Decisions section\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    nodes.push({\r\n      id: 'decisions',\r\n      label: includeLabels ? `Decisions (${thought.designDecisions.decisions.length})` : 'Decisions',\r\n      shape: 'folder',\r\n      color: 'lavender',\r\n    });\r\n    edges.push({\r\n      source: 'challenge',\r\n      target: 'decisions',\r\n      type: 'dependency',\r\n    });\r\n  }\r\n\r\n  // Assessment\r\n  if (thought.assessment && includeMetrics) {\r\n    nodes.push({\r\n      id: 'assessment',\r\n      label: `Confidence: ${(thought.assessment.confidence * 100).toFixed(0)}%`,\r\n      shape: 'usecase',\r\n      color: thought.assessment.confidence > 0.7 ? '90EE90' : 'FFD700',\r\n    });\r\n    edges.push({\r\n      source: 'challenge',\r\n      target: 'assessment',\r\n      type: 'dashed',\r\n    });\r\n  }\r\n\r\n  return generateUmlDiagram(nodes, edges, {\r\n    title: `Engineering: ${thought.analysisType}`,\r\n    theme: umlTheme,\r\n    direction: umlDirection,\r\n  });\r\n}\r\n\r\n// =============================================================================\r\n// JSON Export\r\n// =============================================================================\r\n\r\n/**\r\n * Export engineering analysis to JSON format\r\n */\r\nfunction engineeringToJSON(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const { jsonPrettyPrint = true, jsonIndent = 2, includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph(`Engineering: ${thought.analysisType}`, 'engineering', {\r\n    prettyPrint: jsonPrettyPrint,\r\n    indent: jsonIndent,\r\n    includeMetrics,\r\n  });\r\n\r\n  // Add metadata\r\n  graph.metadata.analysisType = thought.analysisType;\r\n  graph.metadata.designChallenge = thought.designChallenge;\r\n\r\n  // Challenge node\r\n  addNode(graph, {\r\n    id: 'challenge',\r\n    label: thought.designChallenge,\r\n    type: 'challenge',\r\n    color: '#a8d5ff',\r\n    shape: 'stadium',\r\n    metadata: { analysisType: thought.analysisType },\r\n  });\r\n\r\n  // Requirements\r\n  if (thought.requirements) {\r\n    addNode(graph, {\r\n      id: 'requirements',\r\n      label: `Requirements (${thought.requirements.requirements.length})`,\r\n      type: 'requirements',\r\n      color: '#fff9c4',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        total: thought.requirements.coverage.total,\r\n        verified: thought.requirements.coverage.verified,\r\n        requirements: thought.requirements.requirements.map(r => ({\r\n          id: r.id,\r\n          title: r.title,\r\n          priority: r.priority,\r\n          status: r.status,\r\n        })),\r\n      },\r\n    });\r\n    addEdge(graph, {\r\n      id: 'edge_challenge_requirements',\r\n      source: 'challenge',\r\n      target: 'requirements',\r\n      type: 'has_requirements',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  // Trade Study\r\n  if (thought.tradeStudy) {\r\n    addNode(graph, {\r\n      id: 'tradeStudy',\r\n      label: thought.tradeStudy.title,\r\n      type: 'trade_study',\r\n      color: '#c8e6c9',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        objective: thought.tradeStudy.objective,\r\n        recommendation: thought.tradeStudy.recommendation,\r\n        justification: thought.tradeStudy.justification,\r\n        alternatives: thought.tradeStudy.alternatives.map(a => ({\r\n          id: a.id,\r\n          name: a.name,\r\n          riskLevel: a.riskLevel,\r\n        })),\r\n        criteria: thought.tradeStudy.criteria.map(c => ({\r\n          id: c.id,\r\n          name: c.name,\r\n          weight: c.weight,\r\n        })),\r\n      },\r\n    });\r\n    addEdge(graph, {\r\n      id: 'edge_challenge_tradeStudy',\r\n      source: 'challenge',\r\n      target: 'tradeStudy',\r\n      type: 'has_trade_study',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  // FMEA\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    addNode(graph, {\r\n      id: 'fmea',\r\n      label: `FMEA: ${thought.fmea.system}`,\r\n      type: 'fmea',\r\n      color: '#ffcdd2',\r\n      shape: 'diamond',\r\n      metadata: {\r\n        system: thought.fmea.system,\r\n        rpnThreshold: thought.fmea.rpnThreshold,\r\n        summary: thought.fmea.summary,\r\n        failureModes: thought.fmea.failureModes.map(fm => ({\r\n          id: fm.id,\r\n          component: fm.component,\r\n          failureMode: fm.failureMode,\r\n          rpn: fm.rpn,\r\n          severity: fm.severity,\r\n          occurrence: fm.occurrence,\r\n          detection: fm.detection,\r\n        })),\r\n      },\r\n    });\r\n    addEdge(graph, {\r\n      id: 'edge_challenge_fmea',\r\n      source: 'challenge',\r\n      target: 'fmea',\r\n      type: 'has_fmea',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  // Design Decisions\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    addNode(graph, {\r\n      id: 'decisions',\r\n      label: `Decisions (${thought.designDecisions.decisions.length})`,\r\n      type: 'design_decisions',\r\n      color: '#e1bee7',\r\n      shape: 'rectangle',\r\n      metadata: {\r\n        projectName: thought.designDecisions.projectName,\r\n        decisions: thought.designDecisions.decisions.map(d => ({\r\n          id: d.id,\r\n          title: d.title,\r\n          status: d.status,\r\n          decision: d.decision,\r\n        })),\r\n      },\r\n    });\r\n    addEdge(graph, {\r\n      id: 'edge_challenge_decisions',\r\n      source: 'challenge',\r\n      target: 'decisions',\r\n      type: 'has_decisions',\r\n      directed: true,\r\n    });\r\n  }\r\n\r\n  // Assessment\r\n  if (thought.assessment) {\r\n    addNode(graph, {\r\n      id: 'assessment',\r\n      label: `Assessment: ${(thought.assessment.confidence * 100).toFixed(0)}%`,\r\n      type: 'assessment',\r\n      color: thought.assessment.confidence > 0.7 ? '#a5d6a7' : '#ffe082',\r\n      shape: 'ellipse',\r\n      metadata: {\r\n        confidence: thought.assessment.confidence,\r\n        keyRisks: thought.assessment.keyRisks,\r\n        openIssues: thought.assessment.openIssues,\r\n        nextSteps: thought.assessment.nextSteps,\r\n      },\r\n    });\r\n    addEdge(graph, {\r\n      id: 'edge_challenge_assessment',\r\n      source: 'challenge',\r\n      target: 'assessment',\r\n      type: 'has_assessment',\r\n      directed: true,\r\n      style: 'dashed',\r\n    });\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics && graph.metrics) {\r\n    addMetric(graph, 'analysisType', thought.analysisType);\r\n    if (thought.requirements) {\r\n      addMetric(graph, 'requirementCount', thought.requirements.requirements.length);\r\n      addMetric(graph, 'verifiedRequirements', thought.requirements.coverage.verified);\r\n    }\r\n    if (thought.tradeStudy) {\r\n      addMetric(graph, 'alternativeCount', thought.tradeStudy.alternatives.length);\r\n      addMetric(graph, 'recommendation', thought.tradeStudy.recommendation);\r\n    }\r\n    if (thought.fmea) {\r\n      addMetric(graph, 'failureModeCount', thought.fmea.failureModes.length);\r\n      addMetric(graph, 'criticalModes', thought.fmea.summary.criticalModes);\r\n      addMetric(graph, 'maxRpn', thought.fmea.summary.maxRpn);\r\n    }\r\n    if (thought.designDecisions) {\r\n      addMetric(graph, 'decisionCount', thought.designDecisions.decisions.length);\r\n    }\r\n    if (thought.assessment) {\r\n      addMetric(graph, 'confidence', thought.assessment.confidence);\r\n      addMetric(graph, 'riskCount', thought.assessment.keyRisks.length);\r\n    }\r\n  }\r\n\r\n  return serializeGraph(graph, { prettyPrint: jsonPrettyPrint, indent: jsonIndent });\r\n}\r\n\r\n/**\r\n * Export engineering analysis to Markdown format\r\n */\r\nfunction engineeringToMarkdown(thought: EngineeringThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Overview section\r\n  const overviewContent = keyValueSection({\r\n    'Analysis Type': thought.analysisType.toUpperCase(),\r\n    'Design Challenge': thought.designChallenge.substring(0, 100) + (thought.designChallenge.length > 100 ? '...' : ''),\r\n  });\r\n  parts.push(section('Overview', overviewContent));\r\n\r\n  // Requirements Traceability section\r\n  if (thought.requirements && thought.requirements.requirements.length > 0) {\r\n    const reqRows = thought.requirements.requirements.map(req => [\r\n      req.id,\r\n      req.title.substring(0, 40) + (req.title.length > 40 ? '...' : ''),\r\n      req.priority,\r\n      req.status,\r\n      req.source,\r\n    ]);\r\n\r\n    let reqContent = table(['ID', 'Title', 'Priority', 'Status', 'Source'], reqRows);\r\n\r\n    if (includeMetrics) {\r\n      const cov = thought.requirements.coverage;\r\n      const coveragePercent = (cov.verified / Math.max(cov.total, 1)) * 100;\r\n      reqContent += '\\n\\n' + keyValueSection({\r\n        'Total Requirements': cov.total,\r\n        'Verified': cov.verified,\r\n        'Traced to Source': cov.tracedToSource,\r\n        'Allocated to Design': cov.allocatedToDesign,\r\n        'Coverage': `${coveragePercent.toFixed(1)}%`,\r\n      });\r\n      reqContent += '\\n\\n**Verification Progress:**\\n\\n' + progressBar(coveragePercent);\r\n    }\r\n\r\n    parts.push(section('Requirements Traceability', reqContent));\r\n  }\r\n\r\n  // Trade Study section\r\n  if (thought.tradeStudy) {\r\n    const criteriaRows = thought.tradeStudy.criteria.map(c => [\r\n      c.name,\r\n      `${(c.weight * 100).toFixed(0)}%`,\r\n      c.description || '-',\r\n    ]);\r\n\r\n    const altRows = thought.tradeStudy.alternatives.map(alt => [\r\n      alt.id === thought.tradeStudy!.recommendation ? ` ${alt.name}` : alt.name,\r\n      alt.description.substring(0, 60) + (alt.description.length > 60 ? '...' : ''),\r\n      alt.riskLevel || '-',\r\n      alt.estimatedCost?.toString() || '-',\r\n    ]);\r\n\r\n    let tradeContent = `**Objective:** ${thought.tradeStudy.objective}\\n\\n`;\r\n    tradeContent += '### Criteria\\n\\n';\r\n    tradeContent += table(['Criterion', 'Weight', 'Description'], criteriaRows);\r\n    tradeContent += '\\n\\n### Alternatives\\n\\n';\r\n    tradeContent += table(['Alternative', 'Description', 'Risk Level', 'Cost'], altRows);\r\n    tradeContent += '\\n\\n**Recommendation:** ' + thought.tradeStudy.recommendation;\r\n    tradeContent += '\\n\\n**Justification:**\\n\\n' + thought.tradeStudy.justification;\r\n\r\n    parts.push(section('Trade Study: ' + thought.tradeStudy.title, tradeContent));\r\n  }\r\n\r\n  // FMEA section\r\n  if (thought.fmea && thought.fmea.failureModes.length > 0) {\r\n    const fmeaRows = thought.fmea.failureModes.map(fm => {\r\n      const isCritical = fm.rpn >= thought.fmea!.rpnThreshold;\r\n      return [\r\n        fm.component,\r\n        fm.failureMode.substring(0, 40) + (fm.failureMode.length > 40 ? '...' : ''),\r\n        fm.severity.toString(),\r\n        fm.occurrence.toString(),\r\n        fm.detection.toString(),\r\n        `${fm.rpn}${isCritical ? ' ' : ''}`,\r\n        fm.mitigation ? '' : '-',\r\n      ];\r\n    });\r\n\r\n    let fmeaContent = `**System:** ${thought.fmea.system}\\n\\n`;\r\n    fmeaContent += table(\r\n      ['Component', 'Failure Mode', 'S', 'O', 'D', 'RPN', 'Mitigation'],\r\n      fmeaRows\r\n    );\r\n\r\n    if (includeMetrics) {\r\n      const sum = thought.fmea.summary;\r\n      fmeaContent += '\\n\\n' + keyValueSection({\r\n        'Total Modes': sum.totalModes,\r\n        'Critical Modes': sum.criticalModes,\r\n        'Average RPN': sum.averageRpn.toFixed(1),\r\n        'Max RPN': sum.maxRpn,\r\n        'RPN Threshold': thought.fmea.rpnThreshold,\r\n      });\r\n    }\r\n\r\n    parts.push(section('Failure Mode and Effects Analysis (FMEA)', fmeaContent));\r\n  }\r\n\r\n  // Design Decisions section\r\n  if (thought.designDecisions && thought.designDecisions.decisions.length > 0) {\r\n    let decisionsContent = '';\r\n\r\n    for (const dec of thought.designDecisions.decisions) {\r\n      decisionsContent += `### ${dec.id}: ${dec.title} (${dec.status})\\n\\n`;\r\n      decisionsContent += keyValueSection({\r\n        'Status': dec.status,\r\n        'Date': dec.date || '-',\r\n      });\r\n      decisionsContent += '\\n\\n**Context:**\\n\\n' + dec.context;\r\n      decisionsContent += '\\n\\n**Decision:**\\n\\n' + dec.decision;\r\n      decisionsContent += '\\n\\n**Rationale:**\\n\\n' + dec.rationale;\r\n\r\n      if (dec.consequences.length > 0) {\r\n        decisionsContent += '\\n\\n**Consequences:**\\n\\n' + list(dec.consequences);\r\n      }\r\n\r\n      if (dec.supersededBy) {\r\n        decisionsContent += `\\n\\n*Superseded by: ${dec.supersededBy}*`;\r\n      }\r\n\r\n      decisionsContent += '\\n\\n---\\n\\n';\r\n    }\r\n\r\n    parts.push(section('Design Decisions', decisionsContent));\r\n  }\r\n\r\n  // Assessment section\r\n  if (thought.assessment) {\r\n    let assessmentContent = keyValueSection({\r\n      'Confidence': `${(thought.assessment.confidence * 100).toFixed(1)}%`,\r\n      'Key Risks': thought.assessment.keyRisks.length,\r\n      'Open Issues': thought.assessment.openIssues.length,\r\n    });\r\n\r\n    assessmentContent += '\\n\\n**Confidence Level:**\\n\\n' + progressBar(thought.assessment.confidence * 100);\r\n\r\n    if (thought.assessment.keyRisks.length > 0) {\r\n      assessmentContent += '\\n\\n**Key Risks:**\\n\\n' + list(thought.assessment.keyRisks.map(r => ` ${r}`));\r\n    }\r\n\r\n    if (thought.assessment.openIssues.length > 0) {\r\n      assessmentContent += '\\n\\n**Open Issues:**\\n\\n' + list(thought.assessment.openIssues);\r\n    }\r\n\r\n    if (thought.assessment.nextSteps.length > 0) {\r\n      assessmentContent += '\\n\\n**Next Steps:**\\n\\n' + list(thought.assessment.nextSteps);\r\n    }\r\n\r\n    parts.push(section('Assessment', assessmentContent));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = engineeringToMermaid(thought, options);\r\n    parts.push(section('Visualization', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument(`Engineering Analysis: ${thought.analysisType}`, parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'engineering',\r\n      analysisType: thought.analysisType,\r\n      ...(thought.assessment?.confidence !== undefined ? { confidence: thought.assessment.confidence } : {}),\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Computability Visual Exporter (v7.2.0)\r\n * Phase 11: Turing machine diagrams, reduction chains, computation traces\r\n *\r\n * Inspired by Alan Turing's foundational work on computability (1936)\r\n * Exports reasoning about computability theory to visual formats\r\n */\r\n\r\nimport type { ComputabilityThought, TuringMachine, Reduction } from '../../../types/index.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateSVGHeader,\r\n  generateSVGFooter,\r\n  renderRectNode,\r\n  renderEllipseNode,\r\n  renderEdge,\r\n  renderMetricsPanel,\r\n  renderLegend,\r\n  getNodeColor,\r\n  DEFAULT_SVG_OPTIONS,\r\n  type SVGNodePosition,\r\n} from '../utils/svg.js';\r\nimport {\r\n  generateGraphML,\r\n  type GraphMLNode,\r\n  type GraphMLEdge,\r\n} from '../utils/graphml.js';\r\nimport {\r\n  generateTikZ,\r\n  type TikZNode,\r\n  type TikZEdge,\r\n} from '../utils/tikz.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderList,\r\n  renderBadge,\r\n} from '../utils/html.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  addLegendItem,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  list,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export computability thought to visual format\r\n */\r\nexport function exportComputability(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const { format } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return computabilityToMermaid(thought, options);\r\n    case 'dot':\r\n      return computabilityToDOT(thought, options);\r\n    case 'ascii':\r\n      return computabilityToASCII(thought);\r\n    case 'svg':\r\n      return computabilityToSVG(thought, options);\r\n    case 'graphml':\r\n      return computabilityToGraphML(thought, options);\r\n    case 'tikz':\r\n      return computabilityToTikZ(thought, options);\r\n    case 'html':\r\n      return computabilityToHTML(thought, options);\r\n    case 'json':\r\n      return computabilityToJSON(thought, options);\r\n    case 'markdown':\r\n      return computabilityToMarkdown(thought, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Export to Mermaid diagram\r\n */\r\nfunction computabilityToMermaid(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  // Decide what to visualize based on thought content\r\n  if (thought.currentMachine || (thought.machines && thought.machines.length > 0)) {\r\n    return turingMachineToMermaid(thought.currentMachine || thought.machines![0], includeLabels);\r\n  }\r\n\r\n  if (thought.reductions && thought.reductions.length > 0) {\r\n    return reductionChainToMermaid(thought.reductions, thought.reductionChain, includeLabels);\r\n  }\r\n\r\n  if (thought.decidabilityProof) {\r\n    return decidabilityProofToMermaid(thought, includeLabels);\r\n  }\r\n\r\n  // Default: show thought type and key insight\r\n  let mermaid = 'graph TD\\n';\r\n  mermaid += `  type[\"${thought.thoughtType}\"]\\n`;\r\n  if (thought.keyInsight) {\r\n    mermaid += `  insight[\"${thought.keyInsight.substring(0, 50)}...\"]\\n`;\r\n    mermaid += '  type --> insight\\n';\r\n  }\r\n  return mermaid;\r\n}\r\n\r\n/**\r\n * Turing machine to Mermaid state diagram\r\n */\r\nfunction turingMachineToMermaid(machine: TuringMachine, includeLabels: boolean): string {\r\n  let mermaid = 'stateDiagram-v2\\n';\r\n  mermaid += `  [*] --> ${sanitizeId(machine.initialState)}\\n`;\r\n\r\n  // Add transitions\r\n  for (const t of machine.transitions) {\r\n    const label = includeLabels ? `${t.readSymbol}/${t.writeSymbol},${t.direction}` : '';\r\n    mermaid += `  ${sanitizeId(t.fromState)} --> ${sanitizeId(t.toState)}`;\r\n    if (label) {\r\n      mermaid += `: ${label}`;\r\n    }\r\n    mermaid += '\\n';\r\n  }\r\n\r\n  // Mark accept states\r\n  for (const acceptState of machine.acceptStates) {\r\n    mermaid += `  ${sanitizeId(acceptState)} --> [*]\\n`;\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\n/**\r\n * Reduction chain to Mermaid\r\n */\r\nfunction reductionChainToMermaid(reductions: Reduction[], chain: string[] | undefined, includeLabels: boolean): string {\r\n  let mermaid = 'graph LR\\n';\r\n\r\n  if (chain && chain.length > 0) {\r\n    // Use the chain ordering\r\n    for (let i = 0; i < chain.length - 1; i++) {\r\n      const from = sanitizeId(chain[i]);\r\n      const to = sanitizeId(chain[i + 1]);\r\n      const reduction = reductions.find(r => r.fromProblem === chain[i] && r.toProblem === chain[i + 1]);\r\n      const label = includeLabels && reduction ? `${reduction.type === 'polynomial_time' ? 'p' : 'm'}` : '';\r\n      mermaid += `  ${from}[\"${chain[i]}\"] -->|${label}| ${to}[\"${chain[i + 1]}\"]\\n`;\r\n    }\r\n  } else {\r\n    // Show all reductions\r\n    for (const r of reductions) {\r\n      const from = sanitizeId(r.fromProblem);\r\n      const to = sanitizeId(r.toProblem);\r\n      const label = includeLabels ? `${r.type === 'polynomial_time' ? 'p' : 'm'}` : '';\r\n      mermaid += `  ${from}[\"${r.fromProblem}\"] -->|${label}| ${to}[\"${r.toProblem}\"]\\n`;\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\n/**\r\n * Decidability proof to Mermaid\r\n */\r\nfunction decidabilityProofToMermaid(thought: ComputabilityThought, _includeLabels: boolean): string {\r\n  const proof = thought.decidabilityProof!;\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  mermaid += `  problem[\"Problem: ${proof.problem}\"]\\n`;\r\n  mermaid += `  method[\"Method: ${proof.method}\"]\\n`;\r\n  mermaid += `  conclusion[\"${proof.conclusion.toUpperCase()}\"]\\n`;\r\n\r\n  mermaid += '  problem --> method\\n';\r\n  mermaid += '  method --> conclusion\\n';\r\n\r\n  // Style based on conclusion\r\n  if (proof.conclusion === 'undecidable') {\r\n    mermaid += '  style conclusion fill:#ffcccc,stroke:#ff0000\\n';\r\n  } else if (proof.conclusion === 'decidable') {\r\n    mermaid += '  style conclusion fill:#ccffcc,stroke:#00ff00\\n';\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\n/**\r\n * Export to DOT format\r\n */\r\nfunction computabilityToDOT(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const { includeLabels = true } = options;\r\n\r\n  if (thought.currentMachine || (thought.machines && thought.machines.length > 0)) {\r\n    return turingMachineToDOT(thought.currentMachine || thought.machines![0], includeLabels);\r\n  }\r\n\r\n  if (thought.reductions && thought.reductions.length > 0) {\r\n    return reductionChainToDOT(thought.reductions, thought.reductionChain, includeLabels);\r\n  }\r\n\r\n  // Default\r\n  let dot = 'digraph Computability {\\n';\r\n  dot += '  rankdir=TD;\\n';\r\n  dot += `  type [label=\"${thought.thoughtType}\"];\\n`;\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\n/**\r\n * Turing machine to DOT\r\n */\r\nfunction turingMachineToDOT(machine: TuringMachine, includeLabels: boolean): string {\r\n  let dot = `digraph TuringMachine {\\n`;\r\n  dot += '  rankdir=LR;\\n';\r\n  dot += '  node [shape=circle];\\n\\n';\r\n\r\n  // Initial state marker\r\n  dot += '  start [shape=point];\\n';\r\n  dot += `  start -> ${sanitizeId(machine.initialState)};\\n\\n`;\r\n\r\n  // States\r\n  for (const state of machine.states) {\r\n    const isAccept = machine.acceptStates.includes(state);\r\n    const isReject = machine.rejectStates.includes(state);\r\n    const shape = isAccept ? 'doublecircle' : isReject ? 'circle, style=filled, fillcolor=lightgray' : 'circle';\r\n    dot += `  ${sanitizeId(state)} [label=\"${state}\", shape=${shape}];\\n`;\r\n  }\r\n\r\n  dot += '\\n';\r\n\r\n  // Transitions\r\n  for (const t of machine.transitions) {\r\n    const label = includeLabels ? `${t.readSymbol}/${t.writeSymbol},${t.direction}` : '';\r\n    dot += `  ${sanitizeId(t.fromState)} -> ${sanitizeId(t.toState)}`;\r\n    if (label) {\r\n      dot += ` [label=\"${label}\"]`;\r\n    }\r\n    dot += ';\\n';\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\n/**\r\n * Reduction chain to DOT\r\n */\r\nfunction reductionChainToDOT(reductions: Reduction[], _chain: string[] | undefined, includeLabels: boolean): string {\r\n  let dot = 'digraph ReductionChain {\\n';\r\n  dot += '  rankdir=LR;\\n';\r\n  dot += '  node [shape=box, style=rounded];\\n\\n';\r\n\r\n  const problems = new Set<string>();\r\n  for (const r of reductions) {\r\n    problems.add(r.fromProblem);\r\n    problems.add(r.toProblem);\r\n  }\r\n\r\n  for (const p of problems) {\r\n    dot += `  ${sanitizeId(p)} [label=\"${p}\"];\\n`;\r\n  }\r\n\r\n  dot += '\\n';\r\n\r\n  for (const r of reductions) {\r\n    const label = includeLabels ? `${r.type === 'polynomial_time' ? 'p' : 'm'}` : '';\r\n    dot += `  ${sanitizeId(r.fromProblem)} -> ${sanitizeId(r.toProblem)}`;\r\n    if (label) {\r\n      dot += ` [label=\"${label}\"]`;\r\n    }\r\n    dot += ';\\n';\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\n/**\r\n * Export to ASCII art\r\n */\r\nfunction computabilityToASCII(thought: ComputabilityThought): string {\r\n  let ascii = 'COMPUTABILITY ANALYSIS\\n';\r\n  ascii += '='.repeat(50) + '\\n\\n';\r\n\r\n  ascii += `Type: ${thought.thoughtType}\\n`;\r\n\r\n  if (thought.keyInsight) {\r\n    ascii += `\\nKey Insight: ${thought.keyInsight}\\n`;\r\n  }\r\n\r\n  // Turing machine\r\n  if (thought.currentMachine) {\r\n    const m = thought.currentMachine;\r\n    ascii += `\\nTuring Machine: ${m.name}\\n`;\r\n    ascii += '-'.repeat(30) + '\\n';\r\n    ascii += `States: {${m.states.join(', ')}}\\n`;\r\n    ascii += `Initial: ${m.initialState}\\n`;\r\n    ascii += `Accept: {${m.acceptStates.join(', ')}}\\n`;\r\n    ascii += `Transitions: ${m.transitions.length}\\n`;\r\n  }\r\n\r\n  // Computation trace\r\n  if (thought.computationTrace) {\r\n    const trace = thought.computationTrace;\r\n    ascii += `\\nComputation Trace:\\n`;\r\n    ascii += '-'.repeat(30) + '\\n';\r\n    ascii += `Input: ${trace.input}\\n`;\r\n    ascii += `Steps: ${trace.totalSteps}\\n`;\r\n    ascii += `Result: ${trace.result.toUpperCase()}\\n`;\r\n\r\n    // Show first few steps\r\n    for (const step of trace.steps.slice(0, 5)) {\r\n      const head = ' '.repeat(step.headPosition) + 'v';\r\n      ascii += `  [${step.stepNumber}] ${step.state}: ${step.tapeContents}\\n`;\r\n      ascii += `       ${head}\\n`;\r\n    }\r\n    if (trace.steps.length > 5) {\r\n      ascii += `  ... (${trace.steps.length - 5} more steps)\\n`;\r\n    }\r\n  }\r\n\r\n  // Decidability proof\r\n  if (thought.decidabilityProof) {\r\n    const proof = thought.decidabilityProof;\r\n    ascii += `\\nDecidability Analysis:\\n`;\r\n    ascii += '-'.repeat(30) + '\\n';\r\n    ascii += `Problem: ${proof.problem}\\n`;\r\n    ascii += `Method: ${proof.method}\\n`;\r\n    ascii += `Conclusion: ${proof.conclusion.toUpperCase()}\\n`;\r\n\r\n    if (proof.proofSteps.length > 0) {\r\n      ascii += '\\nProof Steps:\\n';\r\n      for (let i = 0; i < Math.min(proof.proofSteps.length, 5); i++) {\r\n        ascii += `  ${i + 1}. ${proof.proofSteps[i]}\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  // Reductions\r\n  if (thought.reductions && thought.reductions.length > 0) {\r\n    ascii += `\\nReductions:\\n`;\r\n    ascii += '-'.repeat(30) + '\\n';\r\n    for (const r of thought.reductions) {\r\n      ascii += `  ${r.fromProblem} ${r.type === 'polynomial_time' ? 'p' : 'm'} ${r.toProblem}\\n`;\r\n    }\r\n  }\r\n\r\n  // Diagonalization\r\n  if (thought.diagonalization) {\r\n    const diag = thought.diagonalization;\r\n    ascii += `\\nDiagonalization Argument:\\n`;\r\n    ascii += '-'.repeat(30) + '\\n';\r\n    ascii += `Pattern: ${diag.pattern}\\n`;\r\n    ascii += `Enumeration: ${diag.enumeration.description}\\n`;\r\n    ascii += `Diagonal: ${diag.diagonalConstruction.description}\\n`;\r\n    ascii += `Contradiction: ${diag.contradiction.impossibility}\\n`;\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Export to SVG\r\n */\r\nfunction computabilityToSVG(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    includeMetrics = true,\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = 400,\r\n  } = options;\r\n\r\n  const title = thought.currentMachine?.name || 'Computability Analysis';\r\n\r\n  if (thought.currentMachine) {\r\n    return turingMachineToSVG(thought.currentMachine, { ...options, colorScheme, svgWidth, svgHeight });\r\n  }\r\n\r\n  // Default: show summary\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  positions.set('type', {\r\n    id: 'type',\r\n    x: svgWidth / 2 - 60,\r\n    y: 80,\r\n    width: 120,\r\n    height: 40,\r\n    label: thought.thoughtType,\r\n    type: 'type',\r\n  });\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, title);\r\n\r\n  svg += '\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n  for (const [, pos] of positions) {\r\n    svg += renderRectNode(pos, getNodeColor('primary', colorScheme));\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  if (includeMetrics) {\r\n    const metrics = [\r\n      { label: 'Type', value: thought.thoughtType },\r\n      { label: 'Uncertainty', value: thought.uncertainty.toFixed(2) },\r\n    ];\r\n    svg += renderMetricsPanel(svgWidth - 180, svgHeight - 80, metrics);\r\n  }\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Turing machine to SVG\r\n */\r\nfunction turingMachineToSVG(machine: TuringMachine, options: VisualExportOptions): string {\r\n  const {\r\n    colorScheme = 'default',\r\n    svgWidth = DEFAULT_SVG_OPTIONS.width,\r\n    svgHeight = 400,\r\n  } = options;\r\n\r\n  const positions = new Map<string, SVGNodePosition>();\r\n  const nodeRadius = 30;\r\n  const spacing = 120;\r\n\r\n  // Arrange states in a grid\r\n  const cols = Math.ceil(Math.sqrt(machine.states.length));\r\n  machine.states.forEach((state, i) => {\r\n    const row = Math.floor(i / cols);\r\n    const col = i % cols;\r\n    positions.set(state, {\r\n      id: state,\r\n      x: 100 + col * spacing,\r\n      y: 100 + row * spacing,\r\n      width: nodeRadius * 2,\r\n      height: nodeRadius * 2,\r\n      label: state,\r\n      type: machine.acceptStates.includes(state) ? 'accept' : machine.rejectStates.includes(state) ? 'reject' : 'state',\r\n    });\r\n  });\r\n\r\n  let svg = generateSVGHeader(svgWidth, svgHeight, machine.name);\r\n\r\n  // Render edges\r\n  svg += '\\n  <!-- Transitions -->\\n  <g class=\"edges\">';\r\n  for (const t of machine.transitions) {\r\n    const fromPos = positions.get(t.fromState);\r\n    const toPos = positions.get(t.toState);\r\n    if (fromPos && toPos) {\r\n      svg += renderEdge(fromPos, toPos, { label: `${t.readSymbol}/${t.writeSymbol}` });\r\n    }\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Render nodes\r\n  svg += '\\n\\n  <!-- States -->\\n  <g class=\"nodes\">';\r\n  for (const [, pos] of positions) {\r\n    const colors = pos.type === 'accept'\r\n      ? getNodeColor('success', colorScheme)\r\n      : pos.type === 'reject'\r\n        ? getNodeColor('danger', colorScheme)\r\n        : getNodeColor('neutral', colorScheme);\r\n    svg += renderEllipseNode(pos, colors);\r\n  }\r\n  svg += '\\n  </g>';\r\n\r\n  // Legend\r\n  const legendItems = [\r\n    { label: 'State', color: getNodeColor('neutral', colorScheme) },\r\n    { label: 'Accept', color: getNodeColor('success', colorScheme) },\r\n    { label: 'Reject', color: getNodeColor('danger', colorScheme) },\r\n  ];\r\n  svg += renderLegend(20, svgHeight - 80, legendItems);\r\n\r\n  svg += '\\n' + generateSVGFooter();\r\n  return svg;\r\n}\r\n\r\n/**\r\n * Export to GraphML\r\n */\r\nfunction computabilityToGraphML(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const nodes: GraphMLNode[] = [];\r\n  const edges: GraphMLEdge[] = [];\r\n  let edgeId = 0;\r\n\r\n  if (thought.currentMachine) {\r\n    const m = thought.currentMachine;\r\n\r\n    for (const state of m.states) {\r\n      nodes.push({\r\n        id: sanitizeId(state),\r\n        label: state,\r\n        type: m.acceptStates.includes(state) ? 'accept' : m.rejectStates.includes(state) ? 'reject' : 'state',\r\n      });\r\n    }\r\n\r\n    for (const t of m.transitions) {\r\n      edges.push({\r\n        id: `e${edgeId++}`,\r\n        source: sanitizeId(t.fromState),\r\n        target: sanitizeId(t.toState),\r\n        label: options.includeLabels ? `${t.readSymbol}/${t.writeSymbol},${t.direction}` : undefined,\r\n        directed: true,\r\n      });\r\n    }\r\n\r\n    return generateGraphML(nodes, edges, { graphName: m.name });\r\n  }\r\n\r\n  // Default\r\n  nodes.push({ id: 'root', label: thought.thoughtType, type: 'root' });\r\n  return generateGraphML(nodes, edges, { graphName: 'Computability Analysis' });\r\n}\r\n\r\n/**\r\n * Export to TikZ\r\n */\r\nfunction computabilityToTikZ(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const nodes: TikZNode[] = [];\r\n  const edges: TikZEdge[] = [];\r\n\r\n  if (thought.currentMachine) {\r\n    const m = thought.currentMachine;\r\n    const cols = Math.ceil(Math.sqrt(m.states.length));\r\n\r\n    m.states.forEach((state, i) => {\r\n      const row = Math.floor(i / cols);\r\n      const col = i % cols;\r\n      nodes.push({\r\n        id: sanitizeId(state),\r\n        label: state,\r\n        x: col * 3,\r\n        y: -row * 2,\r\n        shape: 'ellipse',\r\n        type: m.acceptStates.includes(state) ? 'success' : m.rejectStates.includes(state) ? 'danger' : 'neutral',\r\n      });\r\n    });\r\n\r\n    for (const t of m.transitions) {\r\n      edges.push({\r\n        source: sanitizeId(t.fromState),\r\n        target: sanitizeId(t.toState),\r\n        label: options.includeLabels ? `${t.readSymbol}/${t.writeSymbol}` : undefined,\r\n        directed: true,\r\n      });\r\n    }\r\n\r\n    return generateTikZ(nodes, edges, { title: m.name, colorScheme: options.colorScheme });\r\n  }\r\n\r\n  nodes.push({ id: 'root', label: thought.thoughtType, x: 0, y: 0, shape: 'rectangle', type: 'primary' });\r\n  return generateTikZ(nodes, edges, { title: 'Computability Analysis' });\r\n}\r\n\r\n/**\r\n * Export to HTML\r\n */\r\nfunction computabilityToHTML(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const {\r\n    htmlStandalone = true,\r\n    htmlTitle = 'Computability Analysis',\r\n    htmlTheme = 'light',\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  let html = generateHTMLHeader(htmlTitle, { standalone: htmlStandalone, theme: htmlTheme });\r\n  html += `<h1>${escapeHTML(htmlTitle)}</h1>\\n`;\r\n\r\n  // Type badge\r\n  const typeBadge = renderBadge(thought.thoughtType, 'primary');\r\n  html += `<p>Analysis Type: ${typeBadge}</p>\\n`;\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    html += '<div class=\"metrics-grid\">';\r\n    html += renderMetricCard('Thought Type', thought.thoughtType, 'primary');\r\n    html += renderMetricCard('Uncertainty', thought.uncertainty.toFixed(2), 'info');\r\n    if (thought.machines) {\r\n      html += renderMetricCard('Machines', thought.machines.length, 'info');\r\n    }\r\n    if (thought.reductions) {\r\n      html += renderMetricCard('Reductions', thought.reductions.length, 'info');\r\n    }\r\n    html += '</div>\\n';\r\n  }\r\n\r\n  // Turing machine\r\n  if (thought.currentMachine) {\r\n    const m = thought.currentMachine;\r\n    html += renderSection('Turing Machine', `\r\n      <p><strong>Name:</strong> ${escapeHTML(m.name)}</p>\r\n      <p><strong>Type:</strong> ${escapeHTML(m.type)}</p>\r\n      <p><strong>States:</strong> {${m.states.map(s => escapeHTML(s)).join(', ')}}</p>\r\n      <p><strong>Initial State:</strong> ${escapeHTML(m.initialState)}</p>\r\n      <p><strong>Accept States:</strong> {${m.acceptStates.map(s => escapeHTML(s)).join(', ')}}</p>\r\n      <p><strong>Transitions:</strong> ${m.transitions.length}</p>\r\n    `, '');\r\n  }\r\n\r\n  // Decidability proof\r\n  if (thought.decidabilityProof) {\r\n    const proof = thought.decidabilityProof;\r\n    const conclusionBadge = renderBadge(\r\n      proof.conclusion.toUpperCase(),\r\n      proof.conclusion === 'decidable' ? 'success' : proof.conclusion === 'undecidable' ? 'danger' : 'warning'\r\n    );\r\n    html += renderSection('Decidability Analysis', `\r\n      <p><strong>Problem:</strong> ${escapeHTML(proof.problem)}</p>\r\n      <p><strong>Method:</strong> ${escapeHTML(proof.method)}</p>\r\n      <p><strong>Conclusion:</strong> ${conclusionBadge}</p>\r\n      ${proof.proofSteps.length > 0 ? renderList(proof.proofSteps) : ''}\r\n    `, '');\r\n  }\r\n\r\n  // Reductions\r\n  if (thought.reductions && thought.reductions.length > 0) {\r\n    const rows = thought.reductions.map(r => [\r\n      escapeHTML(r.fromProblem),\r\n      `${r.type === 'polynomial_time' ? 'p' : 'm'}`,\r\n      escapeHTML(r.toProblem),\r\n    ]);\r\n    html += renderSection('Reductions', renderTable(['From', 'Type', 'To'], rows), '');\r\n  }\r\n\r\n  // Key insight\r\n  if (thought.keyInsight) {\r\n    html += renderSection('Key Insight', `<p>${escapeHTML(thought.keyInsight)}</p>`, '');\r\n  }\r\n\r\n  html += generateHTMLFooter(htmlStandalone);\r\n  return html;\r\n}\r\n\r\n/**\r\n * Export to JSON\r\n */\r\nfunction computabilityToJSON(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const { includeMetrics = true } = options;\r\n\r\n  const graph = createJsonGraph('Computability Analysis', 'computability');\r\n\r\n  addNode(graph, {\r\n    id: 'root',\r\n    label: thought.thoughtType,\r\n    type: 'thought-type',\r\n    metadata: {\r\n      uncertainty: thought.uncertainty,\r\n      keyInsight: thought.keyInsight,\r\n    },\r\n  });\r\n\r\n  let edgeId = 0;\r\n\r\n  // Add machines\r\n  if (thought.machines) {\r\n    for (const m of thought.machines) {\r\n      addNode(graph, {\r\n        id: sanitizeId(m.id),\r\n        label: m.name,\r\n        type: 'turing-machine',\r\n        metadata: {\r\n          states: m.states.length,\r\n          transitions: m.transitions.length,\r\n          type: m.type,\r\n        },\r\n      });\r\n      addEdge(graph, {\r\n        id: `e${edgeId++}`,\r\n        source: 'root',\r\n        target: sanitizeId(m.id),\r\n        type: 'contains',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add reductions\r\n  if (thought.reductions) {\r\n    for (const r of thought.reductions) {\r\n      addNode(graph, {\r\n        id: sanitizeId(r.id),\r\n        label: `${r.fromProblem}  ${r.toProblem}`,\r\n        type: 'reduction',\r\n        metadata: {\r\n          reductionType: r.type,\r\n          fromProblem: r.fromProblem,\r\n          toProblem: r.toProblem,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'Thought Type', thought.thoughtType);\r\n    addMetric(graph, 'Uncertainty', thought.uncertainty);\r\n    if (thought.machines) {\r\n      addMetric(graph, 'Machines', thought.machines.length);\r\n    }\r\n    if (thought.decidabilityProof) {\r\n      addMetric(graph, 'Conclusion', thought.decidabilityProof.conclusion);\r\n    }\r\n  }\r\n\r\n  // Legend\r\n  addLegendItem(graph, 'Turing Machine', '#4A90E2');\r\n  addLegendItem(graph, 'Reduction', '#50C878');\r\n  addLegendItem(graph, 'Decidable', '#28A745');\r\n  addLegendItem(graph, 'Undecidable', '#DC3545');\r\n\r\n  return serializeGraph(graph);\r\n}\r\n\r\n/**\r\n * Export to Markdown\r\n */\r\nfunction computabilityToMarkdown(thought: ComputabilityThought, options: VisualExportOptions): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Metrics\r\n  if (includeMetrics) {\r\n    parts.push(section('Analysis', keyValueSection({\r\n      'Type': thought.thoughtType,\r\n      'Uncertainty': thought.uncertainty.toFixed(2),\r\n      ...(thought.keyInsight ? { 'Key Insight': thought.keyInsight } : {}),\r\n    })));\r\n  }\r\n\r\n  // Turing machine\r\n  if (thought.currentMachine) {\r\n    const m = thought.currentMachine;\r\n    parts.push(section('Turing Machine', keyValueSection({\r\n      'Name': m.name,\r\n      'Type': m.type,\r\n      'States': `{${m.states.join(', ')}}`,\r\n      'Initial State': m.initialState,\r\n      'Accept States': `{${m.acceptStates.join(', ')}}`,\r\n      'Transitions': m.transitions.length.toString(),\r\n    })));\r\n\r\n    // Transition table\r\n    if (m.transitions.length > 0) {\r\n      const transitionRows = m.transitions.map(t => [\r\n        t.fromState,\r\n        t.readSymbol,\r\n        t.toState,\r\n        t.writeSymbol,\r\n        t.direction,\r\n      ]);\r\n      parts.push(section('Transition Function', table(\r\n        ['From State', 'Read', 'To State', 'Write', 'Move'],\r\n        transitionRows\r\n      )));\r\n    }\r\n  }\r\n\r\n  // Decidability proof\r\n  if (thought.decidabilityProof) {\r\n    const proof = thought.decidabilityProof;\r\n    parts.push(section('Decidability Analysis', keyValueSection({\r\n      'Problem': proof.problem,\r\n      'Method': proof.method,\r\n      'Conclusion': `**${proof.conclusion.toUpperCase()}**`,\r\n    })));\r\n\r\n    if (proof.proofSteps.length > 0) {\r\n      parts.push(section('Proof Steps', list(proof.proofSteps.map((s, i) => `${i + 1}. ${s}`))));\r\n    }\r\n  }\r\n\r\n  // Reductions\r\n  if (thought.reductions && thought.reductions.length > 0) {\r\n    const reductionRows = thought.reductions.map(r => [\r\n      r.fromProblem,\r\n      `${r.type === 'polynomial_time' ? 'p' : 'm'}`,\r\n      r.toProblem,\r\n    ]);\r\n    parts.push(section('Reductions', table(['From Problem', 'Reduction', 'To Problem'], reductionRows)));\r\n  }\r\n\r\n  // Diagonalization\r\n  if (thought.diagonalization) {\r\n    const d = thought.diagonalization;\r\n    parts.push(section('Diagonalization Argument', keyValueSection({\r\n      'Pattern': d.pattern,\r\n      'Enumeration': d.enumeration.description,\r\n      'Diagonal Construction': d.diagonalConstruction.description,\r\n      'Contradiction': d.contradiction.impossibility,\r\n    })));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = computabilityToMermaid(thought, { ...options, format: 'mermaid' });\r\n    parts.push(section('Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Computability Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'computability',\r\n      thoughtType: thought.thoughtType,\r\n      uncertainty: thought.uncertainty,\r\n    },\r\n  });\r\n}\r\n","/**\r\n * Proof Decomposition Visual Exporter (v7.0.0)\r\n * Phase 8 Sprint 4: Visual export for proof decomposition structures\r\n *\r\n * Exports ProofDecomposition to Mermaid, DOT, ASCII, and SVG formats\r\n * with styled nodes based on statement type:\r\n * - Axioms: green rounded\r\n * - Hypotheses: blue rectangle\r\n * - Derived: gray default\r\n * - Conclusions: purple diamond\r\n * - Gaps: red dashed\r\n */\r\n\r\nimport type { ProofDecomposition, AtomicStatement } from '../../../types/modes/mathematics.js';\r\nimport type { VisualExportOptions } from '../types.js';\r\nimport { sanitizeId } from '../utils.js';\r\nimport {\r\n  generateHTMLHeader,\r\n  generateHTMLFooter,\r\n  escapeHTML,\r\n  renderMetricCard,\r\n  renderSection,\r\n  renderTable,\r\n  renderProgressBar,\r\n} from '../utils/html.js';\r\nimport {\r\n  sanitizeModelicaId,\r\n  escapeModelicaString,\r\n} from '../utils/modelica.js';\r\nimport {\r\n  generateUmlDiagram,\r\n  type UmlNode,\r\n  type UmlEdge,\r\n} from '../utils/uml.js';\r\nimport {\r\n  createJsonGraph,\r\n  addNode,\r\n  addEdge,\r\n  addMetric,\r\n  serializeGraph,\r\n} from '../utils/json.js';\r\nimport {\r\n  section,\r\n  table,\r\n  keyValueSection,\r\n  mermaidBlock,\r\n  document as mdDocument,\r\n  progressBar,\r\n} from '../utils/markdown.js';\r\n\r\n/**\r\n * Export proof decomposition to visual format\r\n */\r\nexport function exportProofDecomposition(\r\n  decomposition: ProofDecomposition,\r\n  options: VisualExportOptions\r\n): string {\r\n  const {\r\n    format,\r\n    colorScheme = 'default',\r\n    includeLabels = true,\r\n    includeMetrics = true,\r\n    svgWidth = 800,\r\n    svgHeight = 600,\r\n    nodeSpacing = 120,\r\n  } = options;\r\n\r\n  switch (format) {\r\n    case 'mermaid':\r\n      return proofDecompositionToMermaid(decomposition, colorScheme, includeLabels, includeMetrics);\r\n    case 'dot':\r\n      return proofDecompositionToDOT(decomposition, includeLabels, includeMetrics);\r\n    case 'ascii':\r\n      return proofDecompositionToASCII(decomposition);\r\n    case 'svg':\r\n      return proofDecompositionToSVG(decomposition, colorScheme, includeLabels, includeMetrics, svgWidth, svgHeight, nodeSpacing);\r\n    case 'html':\r\n      return proofDecompositionToHTML(decomposition, options);\r\n    case 'modelica':\r\n      return proofDecompositionToModelica(decomposition, options);\r\n    case 'uml':\r\n      return proofDecompositionToUML(decomposition, options);\r\n    case 'json':\r\n      return proofDecompositionToJSON(decomposition, options);\r\n    case 'markdown':\r\n      return proofDecompositionToMarkdown(decomposition, options);\r\n    default:\r\n      throw new Error(`Unsupported format: ${format}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Get node shape for Mermaid based on statement type\r\n */\r\nfunction getMermaidShape(type: AtomicStatement['type']): [string, string] {\r\n  switch (type) {\r\n    case 'axiom':\r\n      return ['([', '])'];  // Stadium/rounded\r\n    case 'definition':\r\n      return ['[[', ']]'];  // Subroutine\r\n    case 'hypothesis':\r\n      return ['[', ']'];    // Rectangle\r\n    case 'lemma':\r\n      return ['{{', '}}'];  // Hexagon\r\n    case 'derived':\r\n      return ['(', ')'];    // Default rounded\r\n    case 'conclusion':\r\n      return ['{', '}'];    // Diamond shape via styling\r\n    default:\r\n      return ['(', ')'];\r\n  }\r\n}\r\n\r\n/**\r\n * Get color for statement type\r\n */\r\nfunction getNodeColor(type: AtomicStatement['type'], colorScheme: string): string {\r\n  if (colorScheme === 'monochrome') return '#ffffff';\r\n\r\n  const colors = colorScheme === 'pastel'\r\n    ? {\r\n        axiom: '#c8e6c9',      // Light green\r\n        definition: '#e1bee7',  // Light purple\r\n        hypothesis: '#bbdefb',  // Light blue\r\n        lemma: '#fff9c4',       // Light yellow\r\n        derived: '#e0e0e0',     // Light gray\r\n        conclusion: '#d1c4e9',  // Light purple\r\n      }\r\n    : {\r\n        axiom: '#81c784',      // Green\r\n        definition: '#ba68c8',  // Purple\r\n        hypothesis: '#64b5f6',  // Blue\r\n        lemma: '#ffd54f',       // Yellow\r\n        derived: '#bdbdbd',     // Gray\r\n        conclusion: '#9575cd',  // Purple\r\n      };\r\n\r\n  return colors[type] || colors.derived;\r\n}\r\n\r\n/**\r\n * Convert proof decomposition to Mermaid format\r\n */\r\nfunction proofDecompositionToMermaid(\r\n  decomposition: ProofDecomposition,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let mermaid = 'graph TD\\n';\r\n\r\n  // Add title\r\n  if (decomposition.theorem) {\r\n    mermaid += `  title[\"Proof: ${decomposition.theorem.substring(0, 50)}...\"]\\n`;\r\n    mermaid += '  style title fill:#f5f5f5,stroke:#333\\n\\n';\r\n  }\r\n\r\n  // Group atoms by type\r\n  const axioms = decomposition.atoms.filter((a) => a.type === 'axiom');\r\n  const hypotheses = decomposition.atoms.filter((a) => a.type === 'hypothesis');\r\n  const derived = decomposition.atoms.filter((a) => a.type === 'derived' || a.type === 'lemma');\r\n  const conclusions = decomposition.atoms.filter((a) => a.type === 'conclusion');\r\n\r\n  // Axioms subgraph\r\n  if (axioms.length > 0) {\r\n    mermaid += '  subgraph Axioms[\"Axioms\"]\\n';\r\n    for (const atom of axioms) {\r\n      const nodeId = sanitizeId(atom.id);\r\n      const label = includeLabels\r\n        ? atom.statement.substring(0, 40) + (atom.statement.length > 40 ? '...' : '')\r\n        : atom.id;\r\n      const [open, close] = getMermaidShape(atom.type);\r\n      mermaid += `    ${nodeId}${open}\"${label}\"${close}\\n`;\r\n    }\r\n    mermaid += '  end\\n\\n';\r\n  }\r\n\r\n  // Hypotheses subgraph\r\n  if (hypotheses.length > 0) {\r\n    mermaid += '  subgraph Hypotheses[\"Hypotheses\"]\\n';\r\n    for (const atom of hypotheses) {\r\n      const nodeId = sanitizeId(atom.id);\r\n      const label = includeLabels\r\n        ? atom.statement.substring(0, 40) + (atom.statement.length > 40 ? '...' : '')\r\n        : atom.id;\r\n      const [open, close] = getMermaidShape(atom.type);\r\n      mermaid += `    ${nodeId}${open}\"${label}\"${close}\\n`;\r\n    }\r\n    mermaid += '  end\\n\\n';\r\n  }\r\n\r\n  // Derived statements (no subgraph, just nodes)\r\n  for (const atom of derived) {\r\n    const nodeId = sanitizeId(atom.id);\r\n    const label = includeLabels\r\n      ? atom.statement.substring(0, 40) + (atom.statement.length > 40 ? '...' : '')\r\n      : atom.id;\r\n    const [open, close] = getMermaidShape(atom.type);\r\n    mermaid += `  ${nodeId}${open}\"${label}\"${close}\\n`;\r\n  }\r\n\r\n  // Conclusions subgraph\r\n  if (conclusions.length > 0) {\r\n    mermaid += '\\n  subgraph Conclusions[\"Conclusions\"]\\n';\r\n    for (const atom of conclusions) {\r\n      const nodeId = sanitizeId(atom.id);\r\n      const label = includeLabels\r\n        ? atom.statement.substring(0, 40) + (atom.statement.length > 40 ? '...' : '')\r\n        : atom.id;\r\n      mermaid += `    ${nodeId}{\"${label}\"}\\n`;  // Diamond shape\r\n    }\r\n    mermaid += '  end\\n\\n';\r\n  }\r\n\r\n  // Add edges from dependency graph\r\n  if (decomposition.dependencies && decomposition.dependencies.edges) {\r\n    for (const edge of decomposition.dependencies.edges) {\r\n      const fromId = sanitizeId(edge.from);\r\n      const toId = sanitizeId(edge.to);\r\n      const edgeLabel = edge.inferenceRule ? ` -->|${edge.inferenceRule}| ` : ' --> ';\r\n      mermaid += `  ${fromId}${edgeLabel}${toId}\\n`;\r\n    }\r\n  }\r\n\r\n  // Add gaps as dashed nodes\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    mermaid += '\\n  subgraph Gaps[\"Identified Gaps\"]\\n';\r\n    for (const gap of decomposition.gaps) {\r\n      const gapId = sanitizeId(gap.id);\r\n      const label = gap.description.substring(0, 30) + '...';\r\n      mermaid += `    ${gapId}[\"${label}\"]\\n`;\r\n      mermaid += `    ${sanitizeId(gap.location.from)} -.->|gap| ${gapId}\\n`;\r\n      mermaid += `    ${gapId} -.-> ${sanitizeId(gap.location.to)}\\n`;\r\n    }\r\n    mermaid += '  end\\n';\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    mermaid += '\\n  subgraph Metrics[\"Metrics\"]\\n';\r\n    mermaid += `    m1[\"Completeness: ${(decomposition.completeness * 100).toFixed(0)}%\"]\\n`;\r\n    mermaid += `    m2[\"Rigor: ${decomposition.rigorLevel}\"]\\n`;\r\n    mermaid += `    m3[\"Atoms: ${decomposition.atomCount}\"]\\n`;\r\n    mermaid += `    m4[\"Depth: ${decomposition.maxDependencyDepth}\"]\\n`;\r\n    mermaid += '  end\\n';\r\n  }\r\n\r\n  // Apply colors\r\n  if (colorScheme !== 'monochrome') {\r\n    mermaid += '\\n';\r\n    for (const atom of decomposition.atoms) {\r\n      const nodeId = sanitizeId(atom.id);\r\n      const color = getNodeColor(atom.type, colorScheme);\r\n      mermaid += `  style ${nodeId} fill:${color}\\n`;\r\n    }\r\n\r\n    // Style gaps as red dashed\r\n    if (decomposition.gaps) {\r\n      for (const gap of decomposition.gaps) {\r\n        const gapId = sanitizeId(gap.id);\r\n        mermaid += `  style ${gapId} fill:#ffcdd2,stroke:#e53935,stroke-dasharray: 5 5\\n`;\r\n      }\r\n    }\r\n  }\r\n\r\n  return mermaid;\r\n}\r\n\r\n/**\r\n * Get DOT node shape for statement type\r\n */\r\nfunction getDOTShape(type: AtomicStatement['type']): string {\r\n  switch (type) {\r\n    case 'axiom':\r\n      return 'ellipse';\r\n    case 'definition':\r\n      return 'box3d';\r\n    case 'hypothesis':\r\n      return 'box';\r\n    case 'lemma':\r\n      return 'hexagon';\r\n    case 'derived':\r\n      return 'box';\r\n    case 'conclusion':\r\n      return 'diamond';\r\n    default:\r\n      return 'box';\r\n  }\r\n}\r\n\r\n/**\r\n * Convert proof decomposition to DOT format\r\n */\r\nfunction proofDecompositionToDOT(\r\n  decomposition: ProofDecomposition,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean\r\n): string {\r\n  let dot = 'digraph ProofDecomposition {\\n';\r\n  dot += '  rankdir=TB;\\n';\r\n  dot += '  compound=true;\\n';\r\n  dot += '  node [style=\"rounded,filled\", fontname=\"Arial\"];\\n';\r\n  dot += '  edge [fontname=\"Arial\", fontsize=10];\\n\\n';\r\n\r\n  // Title\r\n  if (decomposition.theorem) {\r\n    dot += `  label=\"Proof: ${decomposition.theorem.substring(0, 60)}...\";\\n`;\r\n    dot += '  labelloc=t;\\n';\r\n    dot += '  fontsize=14;\\n\\n';\r\n  }\r\n\r\n  // Group atoms by type for clustering\r\n  const axioms = decomposition.atoms.filter((a) => a.type === 'axiom');\r\n  const hypotheses = decomposition.atoms.filter((a) => a.type === 'hypothesis');\r\n  const conclusions = decomposition.atoms.filter((a) => a.type === 'conclusion');\r\n\r\n  // Axioms cluster\r\n  if (axioms.length > 0) {\r\n    dot += '  subgraph cluster_axioms {\\n';\r\n    dot += '    label=\"Axioms\";\\n';\r\n    dot += '    style=filled;\\n';\r\n    dot += '    color=\"#e8f5e9\";\\n';\r\n    for (const atom of axioms) {\r\n      const nodeId = sanitizeId(atom.id);\r\n      const label = includeLabels\r\n        ? atom.statement.substring(0, 40).replace(/\"/g, '\\\\\"')\r\n        : atom.id;\r\n      dot += `    ${nodeId} [label=\"${label}\", shape=${getDOTShape(atom.type)}, fillcolor=\"#81c784\"];\\n`;\r\n    }\r\n    dot += '  }\\n\\n';\r\n  }\r\n\r\n  // Hypotheses cluster\r\n  if (hypotheses.length > 0) {\r\n    dot += '  subgraph cluster_hypotheses {\\n';\r\n    dot += '    label=\"Hypotheses\";\\n';\r\n    dot += '    style=filled;\\n';\r\n    dot += '    color=\"#e3f2fd\";\\n';\r\n    for (const atom of hypotheses) {\r\n      const nodeId = sanitizeId(atom.id);\r\n      const label = includeLabels\r\n        ? atom.statement.substring(0, 40).replace(/\"/g, '\\\\\"')\r\n        : atom.id;\r\n      dot += `    ${nodeId} [label=\"${label}\", shape=${getDOTShape(atom.type)}, fillcolor=\"#64b5f6\"];\\n`;\r\n    }\r\n    dot += '  }\\n\\n';\r\n  }\r\n\r\n  // Derived statements (middle layer)\r\n  const derived = decomposition.atoms.filter((a) => a.type === 'derived' || a.type === 'lemma');\r\n  for (const atom of derived) {\r\n    const nodeId = sanitizeId(atom.id);\r\n    const label = includeLabels\r\n      ? atom.statement.substring(0, 40).replace(/\"/g, '\\\\\"')\r\n      : atom.id;\r\n    const color = atom.type === 'lemma' ? '#ffd54f' : '#bdbdbd';\r\n    dot += `  ${nodeId} [label=\"${label}\", shape=${getDOTShape(atom.type)}, fillcolor=\"${color}\"];\\n`;\r\n  }\r\n  dot += '\\n';\r\n\r\n  // Conclusions cluster\r\n  if (conclusions.length > 0) {\r\n    dot += '  subgraph cluster_conclusions {\\n';\r\n    dot += '    label=\"Conclusions\";\\n';\r\n    dot += '    style=filled;\\n';\r\n    dot += '    color=\"#ede7f6\";\\n';\r\n    for (const atom of conclusions) {\r\n      const nodeId = sanitizeId(atom.id);\r\n      const label = includeLabels\r\n        ? atom.statement.substring(0, 40).replace(/\"/g, '\\\\\"')\r\n        : atom.id;\r\n      dot += `    ${nodeId} [label=\"${label}\", shape=${getDOTShape(atom.type)}, fillcolor=\"#9575cd\"];\\n`;\r\n    }\r\n    dot += '  }\\n\\n';\r\n  }\r\n\r\n  // Add edges\r\n  if (decomposition.dependencies && decomposition.dependencies.edges) {\r\n    for (const edge of decomposition.dependencies.edges) {\r\n      const fromId = sanitizeId(edge.from);\r\n      const toId = sanitizeId(edge.to);\r\n      const edgeLabel = edge.inferenceRule ? ` [label=\"${edge.inferenceRule}\"]` : '';\r\n      dot += `  ${fromId} -> ${toId}${edgeLabel};\\n`;\r\n    }\r\n  }\r\n\r\n  // Add gaps\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    dot += '\\n  // Gaps (dashed red)\\n';\r\n    for (const gap of decomposition.gaps) {\r\n      const gapId = sanitizeId(gap.id);\r\n      const label = gap.description.substring(0, 30).replace(/\"/g, '\\\\\"');\r\n      dot += `  ${gapId} [label=\"${label}\", shape=note, fillcolor=\"#ffcdd2\", style=\"dashed,filled\"];\\n`;\r\n      dot += `  ${sanitizeId(gap.location.from)} -> ${gapId} [style=dashed, color=red];\\n`;\r\n      dot += `  ${gapId} -> ${sanitizeId(gap.location.to)} [style=dashed, color=red];\\n`;\r\n    }\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    dot += '\\n  // Metrics\\n';\r\n    dot += '  subgraph cluster_metrics {\\n';\r\n    dot += '    label=\"Metrics\";\\n';\r\n    dot += '    style=filled;\\n';\r\n    dot += '    color=\"#f5f5f5\";\\n';\r\n    dot += `    metrics [label=\"Completeness: ${(decomposition.completeness * 100).toFixed(0)}%\\\\nRigor: ${decomposition.rigorLevel}\\\\nAtoms: ${decomposition.atomCount}\\\\nDepth: ${decomposition.maxDependencyDepth}\", shape=note];\\n`;\r\n    dot += '  }\\n';\r\n  }\r\n\r\n  dot += '}\\n';\r\n  return dot;\r\n}\r\n\r\n/**\r\n * Convert proof decomposition to ASCII format\r\n */\r\nfunction proofDecompositionToASCII(decomposition: ProofDecomposition): string {\r\n  let ascii = '';\r\n\r\n  // Title\r\n  ascii += '\\n';\r\n  ascii += '                    PROOF DECOMPOSITION                         \\n';\r\n  ascii += '\\n\\n';\r\n\r\n  if (decomposition.theorem) {\r\n    ascii += `Theorem: ${decomposition.theorem}\\n\\n`;\r\n  }\r\n\r\n  // Metrics summary\r\n  ascii += '\\n';\r\n  ascii += ' METRICS                                                         \\n';\r\n  ascii += '\\n';\r\n  ascii += ` Completeness: ${(decomposition.completeness * 100).toFixed(0)}%`.padEnd(66) + '\\n';\r\n  ascii += ` Rigor Level:  ${decomposition.rigorLevel}`.padEnd(66) + '\\n';\r\n  ascii += ` Atom Count:   ${decomposition.atomCount}`.padEnd(66) + '\\n';\r\n  ascii += ` Max Depth:    ${decomposition.maxDependencyDepth}`.padEnd(66) + '\\n';\r\n  ascii += '\\n\\n';\r\n\r\n  // Axioms\r\n  const axioms = decomposition.atoms.filter((a) => a.type === 'axiom');\r\n  if (axioms.length > 0) {\r\n    ascii += ' AXIOMS \\n';\r\n    for (const atom of axioms) {\r\n      const marker = '';  // Filled circle for axioms\r\n      const line = ` ${marker} [${atom.id}] ${atom.statement}`;\r\n      ascii += line.substring(0, 65).padEnd(66) + '\\n';\r\n    }\r\n    ascii += '\\n\\n';\r\n  }\r\n\r\n  // Hypotheses\r\n  const hypotheses = decomposition.atoms.filter((a) => a.type === 'hypothesis');\r\n  if (hypotheses.length > 0) {\r\n    ascii += ' HYPOTHESES \\n';\r\n    for (const atom of hypotheses) {\r\n      const marker = '';  // Diamond for hypotheses\r\n      const line = ` ${marker} [${atom.id}] ${atom.statement}`;\r\n      ascii += line.substring(0, 65).padEnd(66) + '\\n';\r\n    }\r\n    ascii += '\\n\\n';\r\n  }\r\n\r\n  // Derivation chain (derived statements with dependencies)\r\n  const derived = decomposition.atoms.filter((a) => a.type === 'derived' || a.type === 'lemma');\r\n  if (derived.length > 0) {\r\n    ascii += ' DERIVATION CHAIN \\n';\r\n    for (const atom of derived) {\r\n      const marker = atom.type === 'lemma' ? '' : '';\r\n      const deps = atom.derivedFrom && atom.derivedFrom.length > 0\r\n        ? `  [${atom.derivedFrom.join(', ')}]`\r\n        : '';\r\n      const line = ` ${marker} [${atom.id}] ${atom.statement}${deps}`;\r\n      ascii += line.substring(0, 65).padEnd(66) + '\\n';\r\n\r\n      // Show inference rule if present\r\n      if (atom.usedInferenceRule) {\r\n        ascii += `    Rule: ${atom.usedInferenceRule}`.padEnd(66) + '\\n';\r\n      }\r\n    }\r\n    ascii += '\\n\\n';\r\n  }\r\n\r\n  // Conclusions\r\n  const conclusions = decomposition.atoms.filter((a) => a.type === 'conclusion');\r\n  if (conclusions.length > 0) {\r\n    ascii += ' CONCLUSIONS \\n';\r\n    for (const atom of conclusions) {\r\n      const marker = '';  // Star for conclusions\r\n      const deps = atom.derivedFrom && atom.derivedFrom.length > 0\r\n        ? `  [${atom.derivedFrom.join(', ')}]`\r\n        : '';\r\n      const line = ` ${marker} [${atom.id}] ${atom.statement}${deps}`;\r\n      ascii += line.substring(0, 65).padEnd(66) + '\\n';\r\n    }\r\n    ascii += '\\n\\n';\r\n  }\r\n\r\n  // Gaps\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    ascii += ' GAPS (Missing Steps) \\n';\r\n    for (const gap of decomposition.gaps) {\r\n      const severityIcon = gap.severity === 'critical' ? '' : gap.severity === 'significant' ? '!' : '?';\r\n      ascii += ` ${severityIcon} [${gap.type}] ${gap.description}`.substring(0, 65).padEnd(66) + '\\n';\r\n      ascii += `   Between: ${gap.location.from}  ${gap.location.to}`.padEnd(66) + '\\n';\r\n      if (gap.suggestedFix) {\r\n        ascii += `   Fix: ${gap.suggestedFix}`.substring(0, 65).padEnd(66) + '\\n';\r\n      }\r\n    }\r\n    ascii += '\\n\\n';\r\n  }\r\n\r\n  // Implicit assumptions\r\n  if (decomposition.implicitAssumptions && decomposition.implicitAssumptions.length > 0) {\r\n    ascii += ' IMPLICIT ASSUMPTIONS \\n';\r\n    for (const assumption of decomposition.implicitAssumptions) {\r\n      ascii += `  [${assumption.type}]`.padEnd(66) + '\\n';\r\n      ascii += `   ${assumption.statement}`.substring(0, 65).padEnd(66) + '\\n';\r\n      if (assumption.shouldBeExplicit) {\r\n        ascii += `    Should be explicit`.padEnd(66) + '\\n';\r\n      }\r\n    }\r\n    ascii += '\\n\\n';\r\n  }\r\n\r\n  // Dependency tree visualization\r\n  if (decomposition.dependencies && decomposition.dependencies.edges.length > 0) {\r\n    ascii += ' DEPENDENCY TREE \\n';\r\n    ascii += '                                                                    \\n';\r\n\r\n    // Find roots (no incoming edges)\r\n    const roots = decomposition.dependencies.roots || [];\r\n    for (const rootId of roots) {\r\n      ascii += buildASCIITree(rootId, decomposition, 0, new Set());\r\n    }\r\n\r\n    ascii += '\\n';\r\n  }\r\n\r\n  return ascii;\r\n}\r\n\r\n/**\r\n * Build ASCII tree from a node\r\n */\r\nfunction buildASCIITree(\r\n  nodeId: string,\r\n  decomposition: ProofDecomposition,\r\n  depth: number,\r\n  visited: Set<string>\r\n): string {\r\n  if (visited.has(nodeId) || depth > 10) {\r\n    return '';\r\n  }\r\n  visited.add(nodeId);\r\n\r\n  const indent = '   '.repeat(depth);\r\n  const atom = decomposition.atoms.find((a) => a.id === nodeId);\r\n  if (!atom) return '';\r\n\r\n  const typeMarker = {\r\n    axiom: '',\r\n    hypothesis: '',\r\n    definition: '',\r\n    lemma: '',\r\n    derived: '',\r\n    conclusion: '',\r\n  }[atom.type] || '?';\r\n\r\n  let result = ` ${indent}${typeMarker} ${atom.id}\\n`;\r\n\r\n  // Find children (edges where this node is the 'from')\r\n  const children = decomposition.dependencies.edges\r\n    .filter((e) => e.from === nodeId)\r\n    .map((e) => e.to);\r\n\r\n  for (const childId of children) {\r\n    result += buildASCIITree(childId, decomposition, depth + 1, visited);\r\n  }\r\n\r\n  return result;\r\n}\r\n\r\n// ============================================================================\r\n// SVG Export Functions\r\n// ============================================================================\r\n\r\n/**\r\n * Node position for SVG layout\r\n */\r\ninterface NodePosition {\r\n  id: string;\r\n  x: number;\r\n  y: number;\r\n  width: number;\r\n  height: number;\r\n  type: AtomicStatement['type'];\r\n  label: string;\r\n}\r\n\r\n/**\r\n * Get SVG colors for statement type\r\n */\r\nfunction getSVGColors(type: AtomicStatement['type'], colorScheme: string): { fill: string; stroke: string } {\r\n  if (colorScheme === 'monochrome') {\r\n    return { fill: '#ffffff', stroke: '#333333' };\r\n  }\r\n\r\n  const colors = colorScheme === 'pastel'\r\n    ? {\r\n        axiom: { fill: '#c8e6c9', stroke: '#4caf50' },\r\n        definition: { fill: '#e1bee7', stroke: '#9c27b0' },\r\n        hypothesis: { fill: '#bbdefb', stroke: '#2196f3' },\r\n        lemma: { fill: '#fff9c4', stroke: '#ffc107' },\r\n        derived: { fill: '#e0e0e0', stroke: '#757575' },\r\n        conclusion: { fill: '#d1c4e9', stroke: '#673ab7' },\r\n      }\r\n    : {\r\n        axiom: { fill: '#81c784', stroke: '#388e3c' },\r\n        definition: { fill: '#ba68c8', stroke: '#7b1fa2' },\r\n        hypothesis: { fill: '#64b5f6', stroke: '#1976d2' },\r\n        lemma: { fill: '#ffd54f', stroke: '#ffa000' },\r\n        derived: { fill: '#bdbdbd', stroke: '#616161' },\r\n        conclusion: { fill: '#9575cd', stroke: '#512da8' },\r\n      };\r\n\r\n  return colors[type] || colors.derived;\r\n}\r\n\r\n/**\r\n * Escape text for SVG\r\n */\r\nfunction escapeSVGText(text: string): string {\r\n  return text\r\n    .replace(/&/g, '&amp;')\r\n    .replace(/</g, '&lt;')\r\n    .replace(/>/g, '&gt;')\r\n    .replace(/\"/g, '&quot;')\r\n    .replace(/'/g, '&#39;');\r\n}\r\n\r\n/**\r\n * Truncate text to fit within a width (approximate)\r\n */\r\nfunction truncateText(text: string, maxChars: number): string {\r\n  if (text.length <= maxChars) return text;\r\n  return text.substring(0, maxChars - 3) + '...';\r\n}\r\n\r\n/**\r\n * Render an SVG node based on type\r\n */\r\nfunction renderSVGNode(pos: NodePosition, colorScheme: string): string {\r\n  const colors = getSVGColors(pos.type, colorScheme);\r\n  const escapedLabel = escapeSVGText(truncateText(pos.label, 30));\r\n\r\n  switch (pos.type) {\r\n    case 'axiom':\r\n      // Rounded rectangle (like stadium shape)\r\n      return `\r\n    <g class=\"node node-axiom\" data-id=\"${sanitizeId(pos.id)}\">\r\n      <rect x=\"${pos.x}\" y=\"${pos.y}\" width=\"${pos.width}\" height=\"${pos.height}\"\r\n            rx=\"20\" ry=\"20\" fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${pos.x + pos.width / 2}\" y=\"${pos.y + pos.height / 2 + 5}\"\r\n            text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"12\">${escapedLabel}</text>\r\n    </g>`;\r\n\r\n    case 'hypothesis':\r\n      // Rectangle\r\n      return `\r\n    <g class=\"node node-hypothesis\" data-id=\"${sanitizeId(pos.id)}\">\r\n      <rect x=\"${pos.x}\" y=\"${pos.y}\" width=\"${pos.width}\" height=\"${pos.height}\"\r\n            rx=\"4\" ry=\"4\" fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${pos.x + pos.width / 2}\" y=\"${pos.y + pos.height / 2 + 5}\"\r\n            text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"12\">${escapedLabel}</text>\r\n    </g>`;\r\n\r\n    case 'conclusion': {\r\n      // Diamond shape\r\n      const cx = pos.x + pos.width / 2;\r\n      const cy = pos.y + pos.height / 2;\r\n      return `\r\n    <g class=\"node node-conclusion\" data-id=\"${sanitizeId(pos.id)}\">\r\n      <polygon points=\"${cx},${pos.y} ${pos.x + pos.width},${cy} ${cx},${pos.y + pos.height} ${pos.x},${cy}\"\r\n               fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${cx}\" y=\"${cy + 5}\"\r\n            text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"12\">${escapedLabel}</text>\r\n    </g>`;\r\n    }\r\n\r\n    case 'lemma': {\r\n      // Hexagon\r\n      const hx = pos.x + pos.width / 2;\r\n      const hy = pos.y + pos.height / 2;\r\n      const w = pos.width;\r\n      const h = pos.height;\r\n      return `\r\n    <g class=\"node node-lemma\" data-id=\"${sanitizeId(pos.id)}\">\r\n      <polygon points=\"${pos.x + w * 0.25},${pos.y} ${pos.x + w * 0.75},${pos.y} ${pos.x + w},${hy} ${pos.x + w * 0.75},${pos.y + h} ${pos.x + w * 0.25},${pos.y + h} ${pos.x},${hy}\"\r\n               fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${hx}\" y=\"${hy + 5}\"\r\n            text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"12\">${escapedLabel}</text>\r\n    </g>`;\r\n    }\r\n\r\n    case 'definition':\r\n      // Double-bordered rectangle\r\n      return `\r\n    <g class=\"node node-definition\" data-id=\"${sanitizeId(pos.id)}\">\r\n      <rect x=\"${pos.x}\" y=\"${pos.y}\" width=\"${pos.width}\" height=\"${pos.height}\"\r\n            rx=\"4\" ry=\"4\" fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <rect x=\"${pos.x + 4}\" y=\"${pos.y + 4}\" width=\"${pos.width - 8}\" height=\"${pos.height - 8}\"\r\n            rx=\"2\" ry=\"2\" fill=\"none\" stroke=\"${colors.stroke}\" stroke-width=\"1\"/>\r\n      <text x=\"${pos.x + pos.width / 2}\" y=\"${pos.y + pos.height / 2 + 5}\"\r\n            text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"12\">${escapedLabel}</text>\r\n    </g>`;\r\n\r\n    default:\r\n      // Default: rounded rectangle\r\n      return `\r\n    <g class=\"node node-derived\" data-id=\"${sanitizeId(pos.id)}\">\r\n      <rect x=\"${pos.x}\" y=\"${pos.y}\" width=\"${pos.width}\" height=\"${pos.height}\"\r\n            rx=\"8\" ry=\"8\" fill=\"${colors.fill}\" stroke=\"${colors.stroke}\" stroke-width=\"2\"/>\r\n      <text x=\"${pos.x + pos.width / 2}\" y=\"${pos.y + pos.height / 2 + 5}\"\r\n            text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"12\">${escapedLabel}</text>\r\n    </g>`;\r\n  }\r\n}\r\n\r\n/**\r\n * Render an SVG edge (arrow)\r\n */\r\nfunction renderSVGEdge(\r\n  fromPos: NodePosition,\r\n  toPos: NodePosition,\r\n  label: string | undefined,\r\n  isDashed: boolean = false,\r\n  color: string = '#333333'\r\n): string {\r\n  // Calculate edge points (from bottom of source to top of target)\r\n  const fromX = fromPos.x + fromPos.width / 2;\r\n  const fromY = fromPos.y + fromPos.height;\r\n  const toX = toPos.x + toPos.width / 2;\r\n  const toY = toPos.y;\r\n\r\n  // Create curved path\r\n  const midY = (fromY + toY) / 2;\r\n  const path = `M ${fromX} ${fromY} C ${fromX} ${midY}, ${toX} ${midY}, ${toX} ${toY - 8}`;\r\n\r\n  const dashStyle = isDashed ? 'stroke-dasharray=\"5,5\"' : '';\r\n  const labelElement = label\r\n    ? `<text x=\"${(fromX + toX) / 2}\" y=\"${midY - 5}\" text-anchor=\"middle\" font-family=\"Arial, sans-serif\" font-size=\"10\" fill=\"#666\">${escapeSVGText(label)}</text>`\r\n    : '';\r\n\r\n  return `\r\n    <g class=\"edge\">\r\n      <path d=\"${path}\" fill=\"none\" stroke=\"${color}\" stroke-width=\"2\" ${dashStyle} marker-end=\"url(#arrowhead)\"/>\r\n      ${labelElement}\r\n    </g>`;\r\n}\r\n\r\n/**\r\n * Convert proof decomposition to SVG format\r\n */\r\nfunction proofDecompositionToSVG(\r\n  decomposition: ProofDecomposition,\r\n  colorScheme: string,\r\n  includeLabels: boolean,\r\n  includeMetrics: boolean,\r\n  width: number,\r\n  height: number,\r\n  nodeSpacing: number\r\n): string {\r\n  const nodeWidth = 150;\r\n  const nodeHeight = 40;\r\n  const padding = 40;\r\n  const layerSpacing = nodeSpacing;\r\n\r\n  // Group atoms by type for layered layout\r\n  const axioms = decomposition.atoms.filter((a) => a.type === 'axiom');\r\n  const hypotheses = decomposition.atoms.filter((a) => a.type === 'hypothesis');\r\n  const derived = decomposition.atoms.filter((a) => a.type === 'derived' || a.type === 'lemma');\r\n  const conclusions = decomposition.atoms.filter((a) => a.type === 'conclusion');\r\n\r\n  // Calculate positions\r\n  const nodePositions = new Map<string, NodePosition>();\r\n  let currentY = padding;\r\n\r\n  // Position axioms in first row\r\n  const layer1 = [...axioms, ...hypotheses];\r\n  const layer1Width = layer1.length * (nodeWidth + 20) - 20;\r\n  let startX = (width - layer1Width) / 2;\r\n  for (const atom of layer1) {\r\n    const label = includeLabels ? atom.statement : atom.id;\r\n    nodePositions.set(atom.id, {\r\n      id: atom.id,\r\n      x: startX,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: atom.type,\r\n      label,\r\n    });\r\n    startX += nodeWidth + 20;\r\n  }\r\n  currentY += nodeHeight + layerSpacing;\r\n\r\n  // Position derived statements in middle rows\r\n  const derivedWidth = derived.length * (nodeWidth + 20) - 20;\r\n  startX = (width - derivedWidth) / 2;\r\n  for (const atom of derived) {\r\n    const label = includeLabels ? atom.statement : atom.id;\r\n    nodePositions.set(atom.id, {\r\n      id: atom.id,\r\n      x: startX,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: atom.type,\r\n      label,\r\n    });\r\n    startX += nodeWidth + 20;\r\n  }\r\n  currentY += nodeHeight + layerSpacing;\r\n\r\n  // Position conclusions in last row\r\n  const conclusionsWidth = conclusions.length * (nodeWidth + 20) - 20;\r\n  startX = (width - conclusionsWidth) / 2;\r\n  for (const atom of conclusions) {\r\n    const label = includeLabels ? atom.statement : atom.id;\r\n    nodePositions.set(atom.id, {\r\n      id: atom.id,\r\n      x: startX,\r\n      y: currentY,\r\n      width: nodeWidth,\r\n      height: nodeHeight,\r\n      type: atom.type,\r\n      label,\r\n    });\r\n    startX += nodeWidth + 20;\r\n  }\r\n  currentY += nodeHeight + padding;\r\n\r\n  // Calculate actual height needed\r\n  const actualHeight = Math.max(height, currentY);\r\n\r\n  // Build SVG\r\n  let svg = `<?xml version=\"1.0\" encoding=\"UTF-8\"?>\r\n<svg xmlns=\"http://www.w3.org/2000/svg\" viewBox=\"0 0 ${width} ${actualHeight}\" width=\"${width}\" height=\"${actualHeight}\">\r\n  <defs>\r\n    <marker id=\"arrowhead\" markerWidth=\"10\" markerHeight=\"7\" refX=\"9\" refY=\"3.5\" orient=\"auto\">\r\n      <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#333\"/>\r\n    </marker>\r\n    <marker id=\"arrowhead-red\" markerWidth=\"10\" markerHeight=\"7\" refX=\"9\" refY=\"3.5\" orient=\"auto\">\r\n      <polygon points=\"0 0, 10 3.5, 0 7\" fill=\"#e53935\"/>\r\n    </marker>\r\n  </defs>\r\n\r\n  <style>\r\n    .title { font-family: Arial, sans-serif; font-size: 16px; font-weight: bold; }\r\n    .section-label { font-family: Arial, sans-serif; font-size: 12px; fill: #666; font-style: italic; }\r\n    .metrics { font-family: Arial, sans-serif; font-size: 11px; fill: #444; }\r\n  </style>\r\n\r\n  <!-- Background -->\r\n  <rect width=\"100%\" height=\"100%\" fill=\"#fafafa\"/>\r\n`;\r\n\r\n  // Title\r\n  if (decomposition.theorem) {\r\n    svg += `\r\n  <!-- Title -->\r\n  <text x=\"${width / 2}\" y=\"25\" text-anchor=\"middle\" class=\"title\">Proof: ${escapeSVGText(truncateText(decomposition.theorem, 60))}</text>\r\n`;\r\n  }\r\n\r\n  // Render edges first (so they appear behind nodes)\r\n  if (decomposition.dependencies && decomposition.dependencies.edges) {\r\n    svg += '\\n  <!-- Edges -->\\n  <g class=\"edges\">';\r\n    for (const edge of decomposition.dependencies.edges) {\r\n      const fromPos = nodePositions.get(edge.from);\r\n      const toPos = nodePositions.get(edge.to);\r\n      if (fromPos && toPos) {\r\n        svg += renderSVGEdge(fromPos, toPos, edge.inferenceRule);\r\n      }\r\n    }\r\n    svg += '\\n  </g>\\n';\r\n  }\r\n\r\n  // Render gap edges (dashed red)\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    svg += '\\n  <!-- Gap Edges -->\\n  <g class=\"gap-edges\">';\r\n    for (const gap of decomposition.gaps) {\r\n      const fromPos = nodePositions.get(gap.location.from);\r\n      const toPos = nodePositions.get(gap.location.to);\r\n      if (fromPos && toPos) {\r\n        svg += renderSVGEdge(fromPos, toPos, 'GAP: ' + truncateText(gap.description, 20), true, '#e53935');\r\n      }\r\n    }\r\n    svg += '\\n  </g>\\n';\r\n  }\r\n\r\n  // Render nodes\r\n  svg += '\\n  <!-- Nodes -->\\n  <g class=\"nodes\">';\r\n  for (const [, pos] of nodePositions) {\r\n    svg += renderSVGNode(pos, colorScheme);\r\n  }\r\n  svg += '\\n  </g>\\n';\r\n\r\n  // Render metrics\r\n  if (includeMetrics) {\r\n    const metricsX = width - 180;\r\n    const metricsY = actualHeight - 100;\r\n    svg += `\r\n  <!-- Metrics -->\r\n  <g class=\"metrics-panel\">\r\n    <rect x=\"${metricsX}\" y=\"${metricsY}\" width=\"160\" height=\"90\" rx=\"8\" fill=\"#f5f5f5\" stroke=\"#ddd\" stroke-width=\"1\"/>\r\n    <text x=\"${metricsX + 10}\" y=\"${metricsY + 20}\" class=\"metrics\" font-weight=\"bold\">Metrics</text>\r\n    <text x=\"${metricsX + 10}\" y=\"${metricsY + 38}\" class=\"metrics\">Completeness: ${(decomposition.completeness * 100).toFixed(0)}%</text>\r\n    <text x=\"${metricsX + 10}\" y=\"${metricsY + 54}\" class=\"metrics\">Rigor: ${decomposition.rigorLevel}</text>\r\n    <text x=\"${metricsX + 10}\" y=\"${metricsY + 70}\" class=\"metrics\">Atoms: ${decomposition.atomCount}</text>\r\n    <text x=\"${metricsX + 10}\" y=\"${metricsY + 86}\" class=\"metrics\">Depth: ${decomposition.maxDependencyDepth}</text>\r\n  </g>\r\n`;\r\n  }\r\n\r\n  // Legend\r\n  svg += `\r\n  <!-- Legend -->\r\n  <g class=\"legend\" transform=\"translate(20, ${actualHeight - 100})\">\r\n    <text x=\"0\" y=\"0\" font-family=\"Arial, sans-serif\" font-size=\"11\" font-weight=\"bold\">Legend</text>\r\n    <rect x=\"0\" y=\"10\" width=\"20\" height=\"12\" rx=\"6\" fill=\"${getSVGColors('axiom', colorScheme).fill}\" stroke=\"${getSVGColors('axiom', colorScheme).stroke}\"/>\r\n    <text x=\"25\" y=\"20\" font-family=\"Arial, sans-serif\" font-size=\"10\">Axiom</text>\r\n    <rect x=\"0\" y=\"28\" width=\"20\" height=\"12\" rx=\"2\" fill=\"${getSVGColors('hypothesis', colorScheme).fill}\" stroke=\"${getSVGColors('hypothesis', colorScheme).stroke}\"/>\r\n    <text x=\"25\" y=\"38\" font-family=\"Arial, sans-serif\" font-size=\"10\">Hypothesis</text>\r\n    <rect x=\"0\" y=\"46\" width=\"20\" height=\"12\" rx=\"4\" fill=\"${getSVGColors('derived', colorScheme).fill}\" stroke=\"${getSVGColors('derived', colorScheme).stroke}\"/>\r\n    <text x=\"25\" y=\"56\" font-family=\"Arial, sans-serif\" font-size=\"10\">Derived</text>\r\n    <polygon points=\"10,64 20,70 10,76 0,70\" fill=\"${getSVGColors('conclusion', colorScheme).fill}\" stroke=\"${getSVGColors('conclusion', colorScheme).stroke}\"/>\r\n    <text x=\"25\" y=\"74\" font-family=\"Arial, sans-serif\" font-size=\"10\">Conclusion</text>\r\n  </g>\r\n`;\r\n\r\n  svg += '</svg>';\r\n\r\n  return svg;\r\n}\r\n\r\n// ============================================================================\r\n// HTML Export Functions\r\n// ============================================================================\r\n\r\n/**\r\n * Convert proof decomposition to HTML format\r\n */\r\nfunction proofDecompositionToHTML(\r\n  decomposition: ProofDecomposition,\r\n  options: VisualExportOptions\r\n): string {\r\n  const { colorScheme = 'default', includeLabels = true, includeMetrics = true } = options;\r\n  const theme = colorScheme === 'monochrome' ? 'light' : 'light';\r\n\r\n  let html = generateHTMLHeader('Proof Decomposition', { standalone: true, theme });\r\n\r\n  // Title section\r\n  if (decomposition.theorem) {\r\n    html += renderSection(\r\n      'Theorem',\r\n      `<p class=\"theorem-statement\">${escapeHTML(decomposition.theorem)}</p>`,\r\n      'info'\r\n    );\r\n  }\r\n\r\n  // Metrics section\r\n  if (includeMetrics) {\r\n    const metricsHTML = `\r\n      <div class=\"metrics-grid\">\r\n        ${renderMetricCard('Completeness', `${(decomposition.completeness * 100).toFixed(0)}%`, renderProgressBar(decomposition.completeness * 100))}\r\n        ${renderMetricCard('Rigor Level', decomposition.rigorLevel)}\r\n        ${renderMetricCard('Atom Count', decomposition.atomCount.toString())}\r\n        ${renderMetricCard('Max Depth', decomposition.maxDependencyDepth.toString())}\r\n      </div>\r\n    `;\r\n    html += renderSection('Metrics', metricsHTML);\r\n  }\r\n\r\n  // Axioms section\r\n  const axioms = decomposition.atoms.filter((a) => a.type === 'axiom');\r\n  if (axioms.length > 0) {\r\n    const axiomsRows = axioms.map((atom) => [\r\n      atom.id,\r\n      includeLabels ? atom.statement : atom.id,\r\n      atom.type,\r\n    ]);\r\n    html += renderSection('Axioms', renderTable(['ID', 'Statement', 'Type'], axiomsRows), 'success');\r\n  }\r\n\r\n  // Hypotheses section\r\n  const hypotheses = decomposition.atoms.filter((a) => a.type === 'hypothesis');\r\n  if (hypotheses.length > 0) {\r\n    const hypothesesRows = hypotheses.map((atom) => [\r\n      atom.id,\r\n      includeLabels ? atom.statement : atom.id,\r\n      atom.type,\r\n    ]);\r\n    html += renderSection('Hypotheses', renderTable(['ID', 'Statement', 'Type'], hypothesesRows), 'info');\r\n  }\r\n\r\n  // Derivation chain section\r\n  const derived = decomposition.atoms.filter((a) => a.type === 'derived' || a.type === 'lemma');\r\n  if (derived.length > 0) {\r\n    const derivedRows = derived.map((atom) => {\r\n      const deps = atom.derivedFrom && atom.derivedFrom.length > 0\r\n        ? atom.derivedFrom.join(', ')\r\n        : 'None';\r\n      const rule = atom.usedInferenceRule ? atom.usedInferenceRule : 'N/A';\r\n      return [\r\n        atom.id,\r\n        includeLabels ? atom.statement : atom.id,\r\n        atom.type,\r\n        deps,\r\n        rule,\r\n      ];\r\n    });\r\n    html += renderSection(\r\n      'Derivation Chain',\r\n      renderTable(['ID', 'Statement', 'Type', 'Derived From', 'Inference Rule'], derivedRows)\r\n    );\r\n  }\r\n\r\n  // Conclusions section\r\n  const conclusions = decomposition.atoms.filter((a) => a.type === 'conclusion');\r\n  if (conclusions.length > 0) {\r\n    const conclusionsRows = conclusions.map((atom) => {\r\n      const deps = atom.derivedFrom && atom.derivedFrom.length > 0\r\n        ? atom.derivedFrom.join(', ')\r\n        : 'None';\r\n      return [\r\n        atom.id,\r\n        includeLabels ? atom.statement : atom.id,\r\n        atom.type,\r\n        deps,\r\n      ];\r\n    });\r\n    html += renderSection('Conclusions', renderTable(['ID', 'Statement', 'Type', 'Derived From'], conclusionsRows), 'primary');\r\n  }\r\n\r\n  // Dependencies section\r\n  if (decomposition.dependencies && decomposition.dependencies.edges && decomposition.dependencies.edges.length > 0) {\r\n    const depsRows = decomposition.dependencies.edges.map((edge) => [\r\n      edge.from,\r\n      edge.to,\r\n      edge.inferenceRule ? edge.inferenceRule : 'Direct',\r\n    ]);\r\n    html += renderSection('Dependencies', renderTable(['From', 'To', 'Inference Rule'], depsRows));\r\n  }\r\n\r\n  // Gaps section\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    const gapsRows = decomposition.gaps.map((gap) => [\r\n      gap.id,\r\n      gap.type,\r\n      gap.severity,\r\n      gap.description,\r\n      `${gap.location.from}  ${gap.location.to}`,\r\n      gap.suggestedFix ? gap.suggestedFix : 'N/A',\r\n    ]);\r\n    html += renderSection('Gaps (Missing Steps)', renderTable(['ID', 'Type', 'Severity', 'Description', 'Location', 'Suggested Fix'], gapsRows), 'danger');\r\n  }\r\n\r\n  // Implicit assumptions section\r\n  if (decomposition.implicitAssumptions && decomposition.implicitAssumptions.length > 0) {\r\n    const assumptionsRows = decomposition.implicitAssumptions.map((assumption) => [\r\n      assumption.type,\r\n      assumption.statement,\r\n      assumption.shouldBeExplicit ? 'Yes' : 'No',\r\n      assumption.suggestedFormulation,\r\n    ]);\r\n    html += renderSection('Implicit Assumptions', renderTable(['Type', 'Statement', 'Should Be Explicit', 'Suggested Formulation'], assumptionsRows), 'warning');\r\n  }\r\n\r\n  html += generateHTMLFooter(true);\r\n  return html;\r\n}\r\n\r\n// ============================================================================\r\n// Modelica Export Functions\r\n// ============================================================================\r\n\r\n/**\r\n * Convert proof decomposition to Modelica format\r\n */\r\nfunction proofDecompositionToModelica(\r\n  decomposition: ProofDecomposition,\r\n  options: VisualExportOptions\r\n): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n  const packageName = 'ProofDecomposition';\r\n\r\n  let modelica = `package ${packageName}\\n`;\r\n  modelica += `  \"Proof decomposition structure for: ${escapeModelicaString(decomposition.theorem || 'theorem')}\"\\n\\n`;\r\n\r\n  // Add theorem record\r\n  if (decomposition.theorem) {\r\n    modelica += `  record Theorem \"Main theorem being proved\"\\n`;\r\n    modelica += `    String statement = \"${escapeModelicaString(decomposition.theorem)}\";\\n`;\r\n    modelica += `    Real completeness = ${decomposition.completeness};\\n`;\r\n    modelica += `    String rigorLevel = \"${escapeModelicaString(decomposition.rigorLevel)}\";\\n`;\r\n    modelica += `    Integer atomCount = ${decomposition.atomCount};\\n`;\r\n    modelica += `    Integer maxDepth = ${decomposition.maxDependencyDepth};\\n`;\r\n    modelica += `  end Theorem;\\n\\n`;\r\n  }\r\n\r\n  // Add atomic statement record\r\n  modelica += `  record AtomicStatement \"Individual statement in the proof\"\\n`;\r\n  modelica += `    String id \"Unique identifier\";\\n`;\r\n  modelica += `    String statementType \"Type: axiom, hypothesis, derived, lemma, conclusion, definition\";\\n`;\r\n  modelica += `    String statement \"The mathematical statement\";\\n`;\r\n  modelica += `  end AtomicStatement;\\n\\n`;\r\n\r\n  // Group atoms by type\r\n  const axioms = decomposition.atoms.filter((a) => a.type === 'axiom');\r\n  const hypotheses = decomposition.atoms.filter((a) => a.type === 'hypothesis');\r\n  const lemmas = decomposition.atoms.filter((a) => a.type === 'lemma');\r\n  const derived = decomposition.atoms.filter((a) => a.type === 'derived');\r\n  const conclusions = decomposition.atoms.filter((a) => a.type === 'conclusion');\r\n\r\n  // Axioms\r\n  if (axioms.length > 0) {\r\n    modelica += `  // Axioms (${axioms.length})\\n`;\r\n    for (const atom of axioms) {\r\n      const atomId = sanitizeModelicaId(atom.id);\r\n      const statement = includeLabels ? escapeModelicaString(atom.statement) : atom.id;\r\n      modelica += `  AtomicStatement ${atomId}(\\n`;\r\n      modelica += `    id=\"${escapeModelicaString(atom.id)}\",\\n`;\r\n      modelica += `    statementType=\"${atom.type}\",\\n`;\r\n      modelica += `    statement=\"${statement}\"\\n`;\r\n      modelica += `  );\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Hypotheses\r\n  if (hypotheses.length > 0) {\r\n    modelica += `  // Hypotheses (${hypotheses.length})\\n`;\r\n    for (const atom of hypotheses) {\r\n      const atomId = sanitizeModelicaId(atom.id);\r\n      const statement = includeLabels ? escapeModelicaString(atom.statement) : atom.id;\r\n      modelica += `  AtomicStatement ${atomId}(\\n`;\r\n      modelica += `    id=\"${escapeModelicaString(atom.id)}\",\\n`;\r\n      modelica += `    statementType=\"${atom.type}\",\\n`;\r\n      modelica += `    statement=\"${statement}\"\\n`;\r\n      modelica += `  );\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Lemmas\r\n  if (lemmas.length > 0) {\r\n    modelica += `  // Lemmas (${lemmas.length})\\n`;\r\n    for (const atom of lemmas) {\r\n      const atomId = sanitizeModelicaId(atom.id);\r\n      const statement = includeLabels ? escapeModelicaString(atom.statement) : atom.id;\r\n      modelica += `  AtomicStatement ${atomId}(\\n`;\r\n      modelica += `    id=\"${escapeModelicaString(atom.id)}\",\\n`;\r\n      modelica += `    statementType=\"${atom.type}\",\\n`;\r\n      modelica += `    statement=\"${statement}\"\\n`;\r\n      modelica += `  );\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Derived statements\r\n  if (derived.length > 0) {\r\n    modelica += `  // Derived Statements (${derived.length})\\n`;\r\n    for (const atom of derived) {\r\n      const atomId = sanitizeModelicaId(atom.id);\r\n      const statement = includeLabels ? escapeModelicaString(atom.statement) : atom.id;\r\n      modelica += `  AtomicStatement ${atomId}(\\n`;\r\n      modelica += `    id=\"${escapeModelicaString(atom.id)}\",\\n`;\r\n      modelica += `    statementType=\"${atom.type}\",\\n`;\r\n      modelica += `    statement=\"${statement}\"\\n`;\r\n      modelica += `  );\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Conclusions\r\n  if (conclusions.length > 0) {\r\n    modelica += `  // Conclusions (${conclusions.length})\\n`;\r\n    for (const atom of conclusions) {\r\n      const atomId = sanitizeModelicaId(atom.id);\r\n      const statement = includeLabels ? escapeModelicaString(atom.statement) : atom.id;\r\n      modelica += `  AtomicStatement ${atomId}(\\n`;\r\n      modelica += `    id=\"${escapeModelicaString(atom.id)}\",\\n`;\r\n      modelica += `    statementType=\"${atom.type}\",\\n`;\r\n      modelica += `    statement=\"${statement}\"\\n`;\r\n      modelica += `  );\\n`;\r\n    }\r\n    modelica += '\\n';\r\n  }\r\n\r\n  // Add dependency information as comments\r\n  if (decomposition.dependencies && decomposition.dependencies.edges && decomposition.dependencies.edges.length > 0) {\r\n    modelica += `  // Dependencies (${decomposition.dependencies.edges.length} edges)\\n`;\r\n    modelica += `  /* Proof structure:\\n`;\r\n    for (const edge of decomposition.dependencies.edges) {\r\n      const rule = edge.inferenceRule ? ` [${edge.inferenceRule}]` : '';\r\n      modelica += `   * ${edge.from} -> ${edge.to}${rule}\\n`;\r\n    }\r\n    modelica += `   */\\n\\n`;\r\n  }\r\n\r\n  // Add gaps as comments if present\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    modelica += `  // Identified Gaps (${decomposition.gaps.length})\\n`;\r\n    modelica += `  /* Gaps in proof:\\n`;\r\n    for (const gap of decomposition.gaps) {\r\n      modelica += `   * [${gap.severity}] ${gap.type}: ${gap.description}\\n`;\r\n      modelica += `   *   Location: ${gap.location.from} -> ${gap.location.to}\\n`;\r\n      if (gap.suggestedFix) {\r\n        modelica += `   *   Fix: ${gap.suggestedFix}\\n`;\r\n      }\r\n    }\r\n    modelica += `   */\\n\\n`;\r\n  }\r\n\r\n  // Add metrics as annotation\r\n  if (includeMetrics) {\r\n    modelica += `  annotation(\\n`;\r\n    modelica += `    Documentation(info=\"<html>\\n`;\r\n    modelica += `      <h3>Proof Metrics</h3>\\n`;\r\n    modelica += `      <ul>\\n`;\r\n    modelica += `        <li>Completeness: ${(decomposition.completeness * 100).toFixed(0)}%</li>\\n`;\r\n    modelica += `        <li>Rigor Level: ${decomposition.rigorLevel}</li>\\n`;\r\n    modelica += `        <li>Atom Count: ${decomposition.atomCount}</li>\\n`;\r\n    modelica += `        <li>Max Dependency Depth: ${decomposition.maxDependencyDepth}</li>\\n`;\r\n    modelica += `      </ul>\\n`;\r\n    modelica += `    </html>\")\\n`;\r\n    modelica += `  );\\n`;\r\n  }\r\n\r\n  modelica += `end ${packageName};\\n`;\r\n  return modelica;\r\n}\r\n\r\n// ============================================================================\r\n// UML Export Functions\r\n// ============================================================================\r\n\r\n/**\r\n * Convert proof decomposition to UML format\r\n */\r\nfunction proofDecompositionToUML(\r\n  decomposition: ProofDecomposition,\r\n  options: VisualExportOptions\r\n): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  const nodes: UmlNode[] = [];\r\n  const edges: UmlEdge[] = [];\r\n\r\n  // Create nodes for all atoms\r\n  for (const atom of decomposition.atoms) {\r\n    const label = includeLabels\r\n      ? atom.statement.substring(0, 40) + (atom.statement.length > 40 ? '...' : '')\r\n      : atom.id;\r\n\r\n    // Determine stereotype based on type\r\n    let stereotype = '';\r\n    switch (atom.type) {\r\n      case 'axiom':\r\n        stereotype = 'axiom';\r\n        break;\r\n      case 'hypothesis':\r\n        stereotype = 'hypothesis';\r\n        break;\r\n      case 'lemma':\r\n        stereotype = 'lemma';\r\n        break;\r\n      case 'conclusion':\r\n        stereotype = 'conclusion';\r\n        break;\r\n      case 'definition':\r\n        stereotype = 'definition';\r\n        break;\r\n      default:\r\n        stereotype = 'derived';\r\n    }\r\n\r\n    nodes.push({\r\n      id: atom.id,\r\n      label: `${stereotype}\\\\n${label}`,\r\n      shape: 'class', // Use class notation\r\n      stereotype: atom.type,\r\n    });\r\n  }\r\n\r\n  // Create edges from dependencies\r\n  if (decomposition.dependencies && decomposition.dependencies.edges) {\r\n    for (const edge of decomposition.dependencies.edges) {\r\n      edges.push({\r\n        source: edge.from,\r\n        target: edge.to,\r\n        label: edge.inferenceRule || 'derives',\r\n        type: 'dependency', // UML dependency arrow\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add gap edges\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    for (const gap of decomposition.gaps) {\r\n      edges.push({\r\n        source: gap.location.from,\r\n        target: gap.location.to,\r\n        label: `GAP: ${gap.description.substring(0, 20)}`,\r\n        type: 'dashed',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Generate UML diagram\r\n  let uml = generateUmlDiagram(nodes, edges, {\r\n    title: `Proof Structure: ${decomposition.theorem?.substring(0, 50) || 'Proof Decomposition'}`,\r\n    direction: 'top to bottom',\r\n  });\r\n\r\n  // Add notes for metrics\r\n  if (includeMetrics) {\r\n    uml += '\\n\\nnote right of diagram\\n';\r\n    uml += '  **Proof Metrics**\\n';\r\n    uml += `  Completeness: ${(decomposition.completeness * 100).toFixed(0)}%\\n`;\r\n    uml += `  Rigor: ${decomposition.rigorLevel}\\n`;\r\n    uml += `  Atoms: ${decomposition.atomCount}\\n`;\r\n    uml += `  Depth: ${decomposition.maxDependencyDepth}\\n`;\r\n    uml += 'end note\\n';\r\n  }\r\n\r\n  // Add legend for statement types\r\n  uml += '\\nlegend right\\n';\r\n  uml += '  |= Type |= Symbol |\\n';\r\n  uml += '  | Axiom | axiom |\\n';\r\n  uml += '  | Hypothesis | hypothesis |\\n';\r\n  uml += '  | Lemma | lemma |\\n';\r\n  uml += '  | Derived | derived |\\n';\r\n  uml += '  | Conclusion | conclusion |\\n';\r\n  uml += 'endlegend\\n';\r\n\r\n  return uml;\r\n}\r\n\r\n// ============================================================================\r\n// JSON Export Functions\r\n// ============================================================================\r\n\r\n/**\r\n * Convert proof decomposition to JSON format\r\n */\r\nfunction proofDecompositionToJSON(\r\n  decomposition: ProofDecomposition,\r\n  options: VisualExportOptions\r\n): string {\r\n  const { includeLabels = true, includeMetrics = true } = options;\r\n\r\n  // Create graph structure\r\n  const graph = createJsonGraph(\r\n    decomposition.theorem?.substring(0, 50) || 'Proof Decomposition',\r\n    'mathematics',\r\n    { includeMetrics, includeLayout: true }\r\n  );\r\n\r\n  // Add metadata to graph.metadata\r\n  if (decomposition.theorem) {\r\n    graph.metadata.theorem = decomposition.theorem;\r\n    graph.metadata.completeness = decomposition.completeness;\r\n    graph.metadata.rigorLevel = decomposition.rigorLevel;\r\n    graph.metadata.atomCount = decomposition.atomCount;\r\n    graph.metadata.maxDependencyDepth = decomposition.maxDependencyDepth;\r\n  }\r\n\r\n  // Add nodes for all atoms\r\n  for (const atom of decomposition.atoms) {\r\n    const label = includeLabels ? atom.statement : atom.id;\r\n    addNode(graph, {\r\n      id: atom.id,\r\n      label,\r\n      type: atom.type,\r\n      shape: atom.type === 'conclusion' ? 'diamond' : atom.type === 'axiom' ? 'stadium' : 'rectangle',\r\n      metadata: {\r\n        statement: atom.statement,\r\n        derivedFrom: atom.derivedFrom || [],\r\n        usedInferenceRule: atom.usedInferenceRule || null,\r\n      },\r\n    });\r\n  }\r\n\r\n  // Add edges from dependencies\r\n  if (decomposition.dependencies && decomposition.dependencies.edges) {\r\n    let edgeId = 0;\r\n    for (const edge of decomposition.dependencies.edges) {\r\n      addEdge(graph, {\r\n        id: `edge_${edgeId++}`,\r\n        source: edge.from,\r\n        target: edge.to,\r\n        label: edge.inferenceRule,\r\n        type: 'inference',\r\n        directed: true,\r\n        style: 'solid',\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add gap edges\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    let gapId = 0;\r\n    for (const gap of decomposition.gaps) {\r\n      addEdge(graph, {\r\n        id: `gap_${gapId++}`,\r\n        source: gap.location.from,\r\n        target: gap.location.to,\r\n        label: `GAP: ${gap.description.substring(0, 30)}`,\r\n        type: 'gap',\r\n        directed: true,\r\n        style: 'dashed',\r\n        metadata: {\r\n          gapType: gap.type,\r\n          severity: gap.severity,\r\n          description: gap.description,\r\n          suggestedFix: gap.suggestedFix || null,\r\n        },\r\n      });\r\n    }\r\n  }\r\n\r\n  // Add metrics\r\n  if (includeMetrics) {\r\n    addMetric(graph, 'completeness', decomposition.completeness);\r\n    addMetric(graph, 'rigorLevel', decomposition.rigorLevel);\r\n    addMetric(graph, 'atomCount', decomposition.atomCount);\r\n    addMetric(graph, 'maxDependencyDepth', decomposition.maxDependencyDepth);\r\n  }\r\n\r\n  // Add implicit assumptions to metadata\r\n  if (decomposition.implicitAssumptions && decomposition.implicitAssumptions.length > 0) {\r\n    graph.metadata.implicitAssumptions = decomposition.implicitAssumptions.map((assumption) => ({\r\n      type: assumption.type,\r\n      statement: assumption.statement,\r\n      shouldBeExplicit: assumption.shouldBeExplicit || false,\r\n      suggestedFormulation: assumption.suggestedFormulation || null,\r\n    }));\r\n  }\r\n\r\n  // Add gaps summary to metadata\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    graph.metadata.gaps = decomposition.gaps.map((gap) => ({\r\n      id: gap.id,\r\n      type: gap.type,\r\n      severity: gap.severity,\r\n      description: gap.description,\r\n      location: gap.location,\r\n      suggestedFix: gap.suggestedFix || null,\r\n    }));\r\n  }\r\n\r\n  return serializeGraph(graph, { prettyPrint: true });\r\n}\r\n\r\n/**\r\n * Export proof decomposition to Markdown format\r\n */\r\nfunction proofDecompositionToMarkdown(\r\n  decomposition: ProofDecomposition,\r\n  options: VisualExportOptions\r\n): string {\r\n  const {\r\n    markdownIncludeFrontmatter = false,\r\n    markdownIncludeToc = false,\r\n    markdownIncludeMermaid = true,\r\n    includeMetrics = true,\r\n  } = options;\r\n\r\n  const parts: string[] = [];\r\n\r\n  // Theorem section\r\n  if (decomposition.theorem) {\r\n    parts.push(section('Theorem', decomposition.theorem));\r\n  }\r\n\r\n  // Metrics section\r\n  if (includeMetrics) {\r\n    const metricsContent = keyValueSection({\r\n      'Completeness': `${(decomposition.completeness * 100).toFixed(0)}%`,\r\n      'Rigor Level': decomposition.rigorLevel,\r\n      'Atom Count': decomposition.atomCount,\r\n      'Max Dependency Depth': decomposition.maxDependencyDepth,\r\n    });\r\n\r\n    let metricsFull = metricsContent;\r\n    metricsFull += '\\n\\n**Completeness:**\\n\\n' + progressBar(decomposition.completeness * 100);\r\n\r\n    parts.push(section('Metrics', metricsFull));\r\n  }\r\n\r\n  // Axioms section\r\n  const axioms = decomposition.atoms.filter((a) => a.type === 'axiom');\r\n  if (axioms.length > 0) {\r\n    const axiomRows = axioms.map(atom => [\r\n      atom.id,\r\n      atom.statement.substring(0, 100) + (atom.statement.length > 100 ? '...' : ''),\r\n    ]);\r\n    parts.push(section('Axioms', table(['ID', 'Statement'], axiomRows)));\r\n  }\r\n\r\n  // Hypotheses section\r\n  const hypotheses = decomposition.atoms.filter((a) => a.type === 'hypothesis');\r\n  if (hypotheses.length > 0) {\r\n    const hypothesesRows = hypotheses.map(atom => [\r\n      atom.id,\r\n      atom.statement.substring(0, 100) + (atom.statement.length > 100 ? '...' : ''),\r\n    ]);\r\n    parts.push(section('Hypotheses', table(['ID', 'Statement'], hypothesesRows)));\r\n  }\r\n\r\n  // Definitions section\r\n  const definitions = decomposition.atoms.filter((a) => a.type === 'definition');\r\n  if (definitions.length > 0) {\r\n    const definitionsRows = definitions.map(atom => [\r\n      atom.id,\r\n      atom.statement.substring(0, 100) + (atom.statement.length > 100 ? '...' : ''),\r\n    ]);\r\n    parts.push(section('Definitions', table(['ID', 'Statement'], definitionsRows)));\r\n  }\r\n\r\n  // Lemmas section\r\n  const lemmas = decomposition.atoms.filter((a) => a.type === 'lemma');\r\n  if (lemmas.length > 0) {\r\n    const lemmasRows = lemmas.map(atom => [\r\n      atom.id,\r\n      atom.statement.substring(0, 80) + (atom.statement.length > 80 ? '...' : ''),\r\n      atom.derivedFrom ? atom.derivedFrom.join(', ') : '-',\r\n      atom.usedInferenceRule || '-',\r\n    ]);\r\n    parts.push(section('Lemmas', table(['ID', 'Statement', 'Derived From', 'Rule'], lemmasRows)));\r\n  }\r\n\r\n  // Derived statements section\r\n  const derived = decomposition.atoms.filter((a) => a.type === 'derived');\r\n  if (derived.length > 0) {\r\n    const derivedRows = derived.map(atom => [\r\n      atom.id,\r\n      atom.statement.substring(0, 80) + (atom.statement.length > 80 ? '...' : ''),\r\n      atom.derivedFrom ? atom.derivedFrom.join(', ') : '-',\r\n      atom.usedInferenceRule || '-',\r\n    ]);\r\n    parts.push(section('Derived Statements', table(['ID', 'Statement', 'Derived From', 'Rule'], derivedRows)));\r\n  }\r\n\r\n  // Conclusions section\r\n  const conclusions = decomposition.atoms.filter((a) => a.type === 'conclusion');\r\n  if (conclusions.length > 0) {\r\n    const conclusionsRows = conclusions.map(atom => [\r\n      atom.id,\r\n      atom.statement.substring(0, 100) + (atom.statement.length > 100 ? '...' : ''),\r\n      atom.derivedFrom ? atom.derivedFrom.join(', ') : '-',\r\n    ]);\r\n    parts.push(section('Conclusions', table(['ID', 'Statement', 'Derived From'], conclusionsRows)));\r\n  }\r\n\r\n  // Dependencies section\r\n  if (decomposition.dependencies && decomposition.dependencies.edges && decomposition.dependencies.edges.length > 0) {\r\n    const depsRows = decomposition.dependencies.edges.map(edge => [\r\n      edge.from,\r\n      edge.to,\r\n      edge.inferenceRule || 'Direct',\r\n    ]);\r\n    parts.push(section('Dependencies', table(['From', 'To', 'Inference Rule'], depsRows)));\r\n  }\r\n\r\n  // Gaps section\r\n  if (decomposition.gaps && decomposition.gaps.length > 0) {\r\n    const gapsRows = decomposition.gaps.map(gap => [\r\n      gap.id,\r\n      gap.type,\r\n      gap.severity,\r\n      gap.description.substring(0, 60) + (gap.description.length > 60 ? '...' : ''),\r\n      `${gap.location.from}  ${gap.location.to}`,\r\n      gap.suggestedFix ? gap.suggestedFix.substring(0, 40) : '-',\r\n    ]);\r\n    parts.push(section('Identified Gaps', table(\r\n      ['ID', 'Type', 'Severity', 'Description', 'Location', 'Suggested Fix'],\r\n      gapsRows\r\n    )));\r\n  }\r\n\r\n  // Implicit assumptions section\r\n  if (decomposition.implicitAssumptions && decomposition.implicitAssumptions.length > 0) {\r\n    const assumptionsRows = decomposition.implicitAssumptions.map(assumption => [\r\n      assumption.type,\r\n      assumption.statement.substring(0, 80) + (assumption.statement.length > 80 ? '...' : ''),\r\n      assumption.shouldBeExplicit ? 'Yes' : 'No',\r\n      assumption.suggestedFormulation ? assumption.suggestedFormulation.substring(0, 50) : '-',\r\n    ]);\r\n    parts.push(section('Implicit Assumptions', table(\r\n      ['Type', 'Statement', 'Should Be Explicit', 'Suggested Formulation'],\r\n      assumptionsRows\r\n    )));\r\n  }\r\n\r\n  // Mermaid diagram\r\n  if (markdownIncludeMermaid) {\r\n    const mermaidDiagram = proofDecompositionToMermaid(decomposition, 'default', true, true);\r\n    parts.push(section('Proof Structure Diagram', mermaidBlock(mermaidDiagram)));\r\n  }\r\n\r\n  return mdDocument('Proof Decomposition Analysis', parts.join('\\n'), {\r\n    includeFrontmatter: markdownIncludeFrontmatter,\r\n    includeTableOfContents: markdownIncludeToc,\r\n    metadata: {\r\n      mode: 'proof-decomposition',\r\n      completeness: decomposition.completeness,\r\n      rigorLevel: decomposition.rigorLevel,\r\n      atomCount: decomposition.atomCount,\r\n    },\r\n  });\r\n}\r\n","/**\n * Mode-Specific Visual Exporters\n * Each file exports functions for visualizing a specific reasoning mode\n */\n\n// Core modes\nexport { exportSequentialDependencyGraph } from './sequential.js';\nexport { exportShannonStageFlow } from './shannon.js';\nexport { exportMathematicsDerivation } from './mathematics.js';\nexport { exportPhysicsVisualization } from './physics.js';\nexport { exportHybridOrchestration } from './hybrid.js';\n\n// Causal/Temporal modes\nexport { exportCausalGraph } from './causal.js';\nexport { exportTemporalTimeline } from './temporal.js';\nexport { exportCounterfactualScenarios } from './counterfactual.js';\n\n// Probabilistic modes\nexport { exportBayesianNetwork } from './bayesian.js';\nexport { exportEvidentialBeliefs } from './evidential.js';\n\n// Strategic modes\nexport { exportGameTree } from './game-theory.js';\nexport { exportOptimizationSolution } from './optimization.js';\n\n// Analytical modes\nexport { exportAbductiveHypotheses } from './abductive.js';\nexport { exportAnalogicalMapping } from './analogical.js';\nexport { exportFirstPrinciplesDerivation } from './first-principles.js';\nexport { exportMetaReasoningVisualization } from './metareasoning.js';\n\n// Scientific modes\nexport { exportSystemsThinkingCausalLoops } from './systems-thinking.js';\nexport { exportScientificMethodExperiment } from './scientific-method.js';\nexport { exportFormalLogicProof } from './formal-logic.js';\n\n// Engineering modes\nexport { exportEngineeringAnalysis } from './engineering.js';\nexport { exportComputability } from './computability.js';\n\n// Proof decomposition\nexport { exportProofDecomposition } from './proof-decomposition.js';\n","/**\n * Visual Exporter Class (v8.3.0)\n * Unified Visual Exporter that delegates to mode-specific exporters\n * Separated to break circular dependency with utils/latex.ts\n */\n\nimport type {\n  CausalThought,\n  TemporalThought,\n  GameTheoryThought,\n  BayesianThought,\n  SequentialThought,\n  ShannonThought,\n  AbductiveThought,\n  CounterfactualThought,\n  AnalogicalThought,\n  EvidentialThought,\n  FirstPrinciplesThought,\n  SystemsThinkingThought,\n  ScientificMethodThought,\n  OptimizationThought,\n  FormalLogicThought,\n  HybridThought,\n} from '../../types/index.js';\nimport type { MathematicsThought, ProofDecomposition } from '../../types/modes/mathematics.js';\nimport type { PhysicsThought } from '../../types/modes/physics.js';\nimport type { MetaReasoningThought } from '../../types/modes/metareasoning.js';\nimport type { EngineeringThought } from '../../types/modes/engineering.js';\nimport type { ComputabilityThought } from '../../types/modes/computability.js';\n\nimport type { VisualExportOptions } from './types.js';\n\nimport {\n  exportCausalGraph,\n  exportTemporalTimeline,\n  exportGameTree,\n  exportBayesianNetwork,\n  exportSequentialDependencyGraph,\n  exportShannonStageFlow,\n  exportAbductiveHypotheses,\n  exportCounterfactualScenarios,\n  exportAnalogicalMapping,\n  exportEvidentialBeliefs,\n  exportFirstPrinciplesDerivation,\n  exportSystemsThinkingCausalLoops,\n  exportScientificMethodExperiment,\n  exportOptimizationSolution,\n  exportFormalLogicProof,\n  exportMathematicsDerivation,\n  exportPhysicsVisualization,\n  exportHybridOrchestration,\n  exportMetaReasoningVisualization,\n  exportProofDecomposition,\n  exportEngineeringAnalysis,\n  exportComputability,\n} from './modes/index.js';\n\n/**\n * Unified Visual Exporter for backward compatibility\n * Delegates to mode-specific exporters\n */\nexport class VisualExporter {\n  exportCausalGraph(thought: CausalThought, options: VisualExportOptions): string {\n    return exportCausalGraph(thought, options);\n  }\n\n  exportTemporalTimeline(thought: TemporalThought, options: VisualExportOptions): string {\n    return exportTemporalTimeline(thought, options);\n  }\n\n  exportGameTree(thought: GameTheoryThought, options: VisualExportOptions): string {\n    return exportGameTree(thought, options);\n  }\n\n  exportBayesianNetwork(thought: BayesianThought, options: VisualExportOptions): string {\n    return exportBayesianNetwork(thought, options);\n  }\n\n  exportSequentialDependencyGraph(thought: SequentialThought, options: VisualExportOptions): string {\n    return exportSequentialDependencyGraph(thought, options);\n  }\n\n  exportShannonStageFlow(thought: ShannonThought, options: VisualExportOptions): string {\n    return exportShannonStageFlow(thought, options);\n  }\n\n  exportAbductiveHypotheses(thought: AbductiveThought, options: VisualExportOptions): string {\n    return exportAbductiveHypotheses(thought, options);\n  }\n\n  exportCounterfactualScenarios(thought: CounterfactualThought, options: VisualExportOptions): string {\n    return exportCounterfactualScenarios(thought, options);\n  }\n\n  exportAnalogicalMapping(thought: AnalogicalThought, options: VisualExportOptions): string {\n    return exportAnalogicalMapping(thought, options);\n  }\n\n  exportEvidentialBeliefs(thought: EvidentialThought, options: VisualExportOptions): string {\n    return exportEvidentialBeliefs(thought, options);\n  }\n\n  exportFirstPrinciplesDerivation(thought: FirstPrinciplesThought, options: VisualExportOptions): string {\n    return exportFirstPrinciplesDerivation(thought, options);\n  }\n\n  exportSystemsThinkingCausalLoops(thought: SystemsThinkingThought, options: VisualExportOptions): string {\n    return exportSystemsThinkingCausalLoops(thought, options);\n  }\n\n  exportScientificMethodExperiment(thought: ScientificMethodThought, options: VisualExportOptions): string {\n    return exportScientificMethodExperiment(thought, options);\n  }\n\n  exportOptimizationSolution(thought: OptimizationThought, options: VisualExportOptions): string {\n    return exportOptimizationSolution(thought, options);\n  }\n\n  exportFormalLogicProof(thought: FormalLogicThought, options: VisualExportOptions): string {\n    return exportFormalLogicProof(thought, options);\n  }\n\n  exportMathematicsDerivation(thought: MathematicsThought, options: VisualExportOptions): string {\n    return exportMathematicsDerivation(thought, options);\n  }\n\n  exportPhysicsVisualization(thought: PhysicsThought, options: VisualExportOptions): string {\n    return exportPhysicsVisualization(thought, options);\n  }\n\n  exportHybridOrchestration(thought: HybridThought, options: VisualExportOptions): string {\n    return exportHybridOrchestration(thought, options);\n  }\n\n  exportMetaReasoningVisualization(thought: MetaReasoningThought, options: VisualExportOptions): string {\n    return exportMetaReasoningVisualization(thought, options);\n  }\n\n  exportProofDecomposition(decomposition: ProofDecomposition, options: VisualExportOptions): string {\n    return exportProofDecomposition(decomposition, options);\n  }\n\n  exportEngineeringAnalysis(thought: EngineeringThought, options: VisualExportOptions): string {\n    return exportEngineeringAnalysis(thought, options);\n  }\n\n  exportComputability(thought: ComputabilityThought, options: VisualExportOptions): string {\n    return exportComputability(thought, options);\n  }\n}\n","/**\n * LaTeX Export Module (v3.2.0)\n * Exports thinking sessions to LaTeX format for professional documentation\n */\n\nimport type { ThinkingSession } from '../../../types/session.js';\nimport type { Thought, MathematicsThought, PhysicsThought, CausalThought, BayesianThought, AnalogicalThought, TemporalThought, GameTheoryThought, EvidentialThought, FirstPrinciplesThought } from '../../../types/index.js';\nimport { VisualExporter } from '../visual-exporter.js';\n\n/**\n * LaTeX export options\n */\nexport interface LaTeXExportOptions {\n  // Document configuration\n  documentClass?: 'article' | 'report' | 'book' | 'memoir';\n  fontSize?: '10pt' | '11pt' | '12pt';\n  paperSize?: 'letter' | 'a4' | 'legal';\n\n  // Content options\n  includeMetadata?: boolean;\n  includeTOC?: boolean;\n  includeTimestamps?: boolean;\n  includeMetrics?: boolean;\n\n  // Formatting options\n  syntaxHighlighting?: boolean;\n  colorScheme?: 'default' | 'monochrome' | 'vibrant';\n\n  // Package options\n  packages?: string[];\n  customPreamble?: string;\n\n  // Mode-specific options\n  renderDiagrams?: boolean;\n  inlineMath?: boolean;\n}\n\n/**\n * LaTeX Exporter for converting thinking sessions to LaTeX documents\n */\nexport class LaTeXExporter {\n  private options: Required<LaTeXExportOptions>;\n  private visualExporter: VisualExporter;\n\n  constructor(options: LaTeXExportOptions = {}) {\n    // Set defaults\n    this.options = {\n      documentClass: options.documentClass || 'article',\n      fontSize: options.fontSize || '11pt',\n      paperSize: options.paperSize || 'letter',\n      includeMetadata: options.includeMetadata !== false,\n      includeTOC: options.includeTOC !== false,\n      includeTimestamps: options.includeTimestamps !== false,\n      includeMetrics: options.includeMetrics !== false,\n      syntaxHighlighting: options.syntaxHighlighting !== false,\n      colorScheme: options.colorScheme || 'default',\n      packages: options.packages || [],\n      customPreamble: options.customPreamble || '',\n      renderDiagrams: options.renderDiagrams !== false,\n      inlineMath: options.inlineMath === true,\n    };\n    this.visualExporter = new VisualExporter();\n  }\n\n  /**\n   * Generate LaTeX preamble with document setup\n   */\n  preamble(): string {\n    const packages = this.getRequiredPackages();\n    const colorSetup = this.getColorScheme();\n\n    return `\\\\documentclass[${this.options.fontSize},${this.options.paperSize}paper]{${this.options.documentClass}}\n\n% Core packages\n${packages.join('\\n')}\n\n% Color scheme setup\n${colorSetup}\n\n% Theorem environments\n\\\\newtheorem{theorem}{Theorem}[section]\n\\\\newtheorem{lemma}[theorem]{Lemma}\n\\\\newtheorem{corollary}[theorem]{Corollary}\n\\\\newtheorem{definition}[theorem]{Definition}\n\\\\newtheorem{proposition}[theorem]{Proposition}\n\n% Custom commands\n\\\\newcommand{\\\\thoughtsection}[2]{%\n  \\\\subsection{Thought #1: #2}%\n}\n\n\\\\newcommand{\\\\metadata}[2]{%\n  \\\\textbf{#1:} \\\\textit{#2}\\\\\\\\%\n}\n\n\\\\newcommand{\\\\uncertainty}[1]{%\n  \\\\textcolor{uncertaintycolor}{[Uncertainty: #1]}%\n}\n\n% Custom preamble\n${this.options.customPreamble}\n\n% Document metadata setup\n\\\\usepackage{fancyhdr}\n\\\\pagestyle{fancy}\n\\\\fancyhead[L]{DeepThinking Session}\n\\\\fancyhead[R]{\\\\today}\n\\\\fancyfoot[C]{\\\\thepage}\n\n% Hyperref should be last\n\\\\usepackage{hyperref}\n\\\\hypersetup{\n  colorlinks=true,\n  linkcolor=blue,\n  citecolor=blue,\n  urlcolor=blue,\n}\n`;\n  }\n\n  /**\n   * Get required LaTeX packages based on options\n   */\n  private getRequiredPackages(): string[] {\n    const packages = [\n      '\\\\usepackage[utf8]{inputenc}',\n      '\\\\usepackage[T1]{fontenc}',\n      '\\\\usepackage{amsmath}',\n      '\\\\usepackage{amssymb}',\n      '\\\\usepackage{amsthm}',\n      '\\\\usepackage{graphicx}',\n      '\\\\usepackage{xcolor}',\n      '\\\\usepackage{listings}',\n      '\\\\usepackage{geometry}',\n      '\\\\usepackage{enumitem}',\n      '\\\\usepackage{tikz}',\n      '\\\\usepackage{booktabs}',\n      '\\\\usepackage{longtable}',\n      '\\\\usepackage{multirow}',\n    ];\n\n    // Add TikZ libraries for diagrams\n    if (this.options.renderDiagrams) {\n      packages.push('\\\\usetikzlibrary{shapes,arrows,positioning,graphs,calc}');\n    }\n\n    // Add syntax highlighting\n    if (this.options.syntaxHighlighting) {\n      packages.push('\\\\usepackage{minted}');\n    }\n\n    // Add custom packages\n    this.options.packages.forEach(pkg => {\n      packages.push(`\\\\usepackage{${pkg}}`);\n    });\n\n    return packages;\n  }\n\n  /**\n   * Get color scheme definitions\n   */\n  private getColorScheme(): string {\n    const schemes = {\n      default: `% Default color scheme\n\\\\definecolor{thoughtcolor}{RGB}{52,73,94}\n\\\\definecolor{metacolor}{RGB}{127,140,141}\n\\\\definecolor{uncertaintycolor}{RGB}{231,76,60}\n\\\\definecolor{mathcolor}{RGB}{46,134,193}\n\\\\definecolor{physicscolor}{RGB}{142,68,173}\n\\\\definecolor{codebackground}{RGB}{247,247,247}`,\n\n      monochrome: `% Monochrome color scheme\n\\\\definecolor{thoughtcolor}{RGB}{0,0,0}\n\\\\definecolor{metacolor}{RGB}{80,80,80}\n\\\\definecolor{uncertaintycolor}{RGB}{120,120,120}\n\\\\definecolor{mathcolor}{RGB}{0,0,0}\n\\\\definecolor{physicscolor}{RGB}{0,0,0}\n\\\\definecolor{codebackground}{RGB}{245,245,245}`,\n\n      vibrant: `% Vibrant color scheme\n\\\\definecolor{thoughtcolor}{RGB}{26,188,156}\n\\\\definecolor{metacolor}{RGB}{52,152,219}\n\\\\definecolor{uncertaintycolor}{RGB}{231,76,60}\n\\\\definecolor{mathcolor}{RGB}{155,89,182}\n\\\\definecolor{physicscolor}{RGB}{243,156,18}\n\\\\definecolor{codebackground}{RGB}{236,240,241}`,\n    };\n\n    return schemes[this.options.colorScheme];\n  }\n\n  /**\n   * Export a complete thinking session to LaTeX\n   */\n  export(session: ThinkingSession): string {\n    const preamble = this.preamble();\n    const metadata = this.options.includeMetadata ? this.formatMetadata(session) : '';\n    const toc = this.options.includeTOC ? '\\\\tableofcontents\\n\\\\newpage\\n' : '';\n    const content = this.formatSession(session);\n\n    return `${preamble}\n\n\\\\begin{document}\n\n\\\\title{${this.escapeLatex(session.title)}}\n${session.author ? `\\\\author{${this.escapeLatex(session.author)}}` : ''}\n\\\\date{${this.formatDate(session.createdAt)}}\n\\\\maketitle\n\n${metadata}\n\n${toc}\n\n${content}\n\n\\\\end{document}`;\n  }\n\n  /**\n   * Format session metadata\n   */\n  private formatMetadata(session: ThinkingSession): string {\n    const meta: string[] = [];\n\n    meta.push('\\\\section*{Session Metadata}');\n    meta.push('\\\\begin{description}[leftmargin=3cm,style=nextline]');\n    meta.push(`  \\\\item[Session ID] \\\\texttt{${this.escapeLatex(session.id)}}`);\n    meta.push(`  \\\\item[Mode] \\\\texttt{${this.escapeLatex(session.mode)}}`);\n\n    if (session.domain) {\n      meta.push(`  \\\\item[Domain] ${this.escapeLatex(session.domain)}`);\n    }\n\n    if (this.options.includeTimestamps) {\n      meta.push(`  \\\\item[Created] ${this.formatDate(session.createdAt)}`);\n      meta.push(`  \\\\item[Updated] ${this.formatDate(session.updatedAt)}`);\n    }\n\n    if (this.options.includeMetrics && session.metrics) {\n      meta.push(`  \\\\item[Total Thoughts] ${session.metrics.totalThoughts}`);\n      meta.push(`  \\\\item[Revisions] ${session.metrics.revisionCount}`);\n      meta.push(`  \\\\item[Average Uncertainty] ${session.metrics.averageUncertainty.toFixed(3)}`);\n      if (session.metrics.timeSpent > 0) {\n        meta.push(`  \\\\item[Time Spent] ${this.formatDuration(session.metrics.timeSpent)}`);\n      }\n    }\n\n    if (session.tags && session.tags.length > 0) {\n      meta.push(`  \\\\item[Tags] ${session.tags.map(t => this.escapeLatex(t)).join(', ')}`);\n    }\n\n    meta.push('\\\\end{description}');\n    meta.push('\\\\newpage\\n');\n\n    return meta.join('\\n');\n  }\n\n  /**\n   * Format the session content (all thoughts)\n   */\n  private formatSession(session: ThinkingSession): string {\n    const sections: string[] = [];\n\n    sections.push('\\\\section{Reasoning Process}');\n    sections.push('');\n\n    session.thoughts.forEach((thought, index) => {\n      sections.push(this.formatThought(thought, index + 1));\n      sections.push(''); // Add spacing between thoughts\n    });\n\n    // Add summary if session is complete\n    if (session.isComplete) {\n      sections.push(this.formatSummary(session));\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format a single thought based on its mode\n   */\n  private formatThought(thought: Thought, number: number): string {\n    const sections: string[] = [];\n\n    // Thought header\n    const thoughtLabel = thought.isRevision ? 'Revision' : 'Thought';\n    sections.push(`\\\\thoughtsection{${number}}{${thoughtLabel}}`);\n\n    // Thought content\n    sections.push(`\\\\noindent ${this.escapeLatex(thought.content)}`);\n    sections.push('');\n\n    // Mode-specific formatting\n    switch (thought.mode) {\n      case 'mathematics':\n        sections.push(this.formatMathematicsThought(thought as MathematicsThought));\n        break;\n      case 'physics':\n        sections.push(this.formatPhysicsThought(thought as PhysicsThought));\n        break;\n      case 'causal':\n        sections.push(this.formatCausalThought(thought as CausalThought));\n        break;\n      case 'bayesian':\n        sections.push(this.formatBayesianThought(thought as BayesianThought));\n        break;\n      case 'analogical':\n        sections.push(this.formatAnalogicalThought(thought as AnalogicalThought));\n        break;\n      case 'temporal':\n        sections.push(this.formatTemporalThought(thought as TemporalThought));\n        break;\n      case 'gametheory':\n        sections.push(this.formatGameTheoryThought(thought as GameTheoryThought));\n        break;\n      case 'evidential':\n        sections.push(this.formatEvidentialThought(thought as EvidentialThought));\n        break;\n      case 'firstprinciples':\n        sections.push(this.formatFirstPrinciplesThought(thought as FirstPrinciplesThought));\n        break;\n      default:\n        // Generic formatting for other modes\n        sections.push(this.formatGenericThought(thought));\n        break;\n    }\n\n\n    // Embed Mermaid diagrams for visual modes\n    if (this.shouldIncludeDiagram(thought)) {\n      try {\n        let mermaid: string = '';\n        let caption: string = '';\n\n        switch (thought.mode) {\n          case 'causal':\n            mermaid = this.visualExporter.exportCausalGraph(\n              thought as CausalThought,\n              { format: 'mermaid', includeLabels: true, includeMetrics: true }\n            );\n            caption = `Causal Graph for Thought ${number}`;\n            break;\n          case 'temporal':\n            mermaid = this.visualExporter.exportTemporalTimeline(\n              thought as TemporalThought,\n              { format: 'mermaid', includeLabels: true }\n            );\n            caption = `Temporal Timeline for Thought ${number}`;\n            break;\n          case 'gametheory':\n            mermaid = this.visualExporter.exportGameTree(\n              thought as GameTheoryThought,\n              { format: 'mermaid', includeLabels: true, includeMetrics: true }\n            );\n            caption = `Game Tree for Thought ${number}`;\n            break;\n          case 'bayesian':\n            mermaid = this.visualExporter.exportBayesianNetwork(\n              thought as BayesianThought,\n              { format: 'mermaid', includeLabels: true, includeMetrics: true }\n            );\n            caption = `Bayesian Network for Thought ${number}`;\n            break;\n        }\n\n        if (mermaid) {\n          sections.push(this.embedMermaidDiagram(mermaid, caption));\n        }\n      } catch (error) {\n        // Silently skip diagram generation if it fails\n        console.warn(`Failed to generate diagram for thought ${number}:`, error);\n      }\n    }\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format Mathematics mode thought\n   */\n  private formatMathematicsThought(thought: MathematicsThought): string {\n    const sections: string[] = [];\n\n    // Handle simple equation property (for tests/legacy)\n    const thoughtAny = thought as any;\n    if (thoughtAny.equation && !thought.mathematicalModel) {\n      const mathDelim = this.options.inlineMath ? '$' : '\\\\[';\n      const mathEndDelim = this.options.inlineMath ? '$' : '\\\\]';\n      sections.push(`${mathDelim}${thoughtAny.equation}${mathEndDelim}`);\n      sections.push('');\n    }\n\n    // Assumptions\n    if (thought.assumptions && thought.assumptions.length > 0) {\n      sections.push('\\\\paragraph{Assumptions}');\n      sections.push('\\\\begin{itemize}');\n      thought.assumptions.forEach(assumption => {\n        sections.push(`  \\\\item ${this.escapeLatex(assumption)}`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Mathematical model with equation numbering\n    if (thought.mathematicalModel) {\n      sections.push('\\\\paragraph{Mathematical Model}');\n      sections.push('\\\\begin{equation}');\n      sections.push(`  \\\\label{eq:thought${thought.thoughtNumber}}`);\n      sections.push(`  ${thought.mathematicalModel.latex}`);\n      sections.push('\\\\end{equation}');\n\n      // Add symbolic representation if different\n      if (thought.mathematicalModel.symbolic && thought.mathematicalModel.symbolic !== thought.mathematicalModel.latex) {\n        sections.push(`\\\\textit{Symbolic form:} \\\\texttt{${this.escapeLatex(thought.mathematicalModel.symbolic)}}`);\n      }\n\n      // Add complexity and invariants if present\n      if (thought.mathematicalModel.complexity) {\n        sections.push(`\\\\textit{Complexity:} ${this.escapeLatex(thought.mathematicalModel.complexity)}`);\n      }\n\n      if (thought.mathematicalModel.invariants && thought.mathematicalModel.invariants.length > 0) {\n        sections.push('\\\\textit{Invariants:}');\n        sections.push('\\\\begin{itemize}');\n        thought.mathematicalModel.invariants.forEach(inv => {\n          sections.push(`  \\\\item ${this.escapeLatex(inv)}`);\n        });\n        sections.push('\\\\end{itemize}');\n      }\n\n      sections.push('');\n    }\n\n    // Theorems\n    if (thought.theorems && thought.theorems.length > 0) {\n      thought.theorems.forEach((theorem, index) => {\n        sections.push(this.formatTheorem(theorem, thought.thoughtNumber, index));\n      });\n    }\n\n    // Proof strategy with proof environment\n    if (thought.proofStrategy) {\n      sections.push(this.formatProof(thought.proofStrategy));\n    }\n\n    // Logical form\n    if (thought.logicalForm) {\n      sections.push(this.formatLogicalForm(thought.logicalForm));\n    }\n\n    // Dependencies\n    if (thought.dependencies && thought.dependencies.length > 0) {\n      sections.push('\\\\paragraph{Dependencies}');\n      sections.push('References thoughts: ' + thought.dependencies.join(', '));\n      sections.push('');\n    }\n\n    // Uncertainty\n    if (thought.uncertainty !== undefined) {\n      sections.push(`\\\\uncertainty{${(thought.uncertainty * 100).toFixed(1)}\\\\%}`);\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format a theorem\n   */\n  private formatTheorem(theorem: any, thoughtNum: number, index: number): string {\n    const sections: string[] = [];\n\n    sections.push(`\\\\begin{theorem}[${this.escapeLatex(theorem.name)}]`);\n    sections.push(`\\\\label{thm:thought${thoughtNum}-${index}}`);\n    sections.push(this.escapeLatex(theorem.statement));\n\n    if (theorem.hypotheses && theorem.hypotheses.length > 0) {\n      sections.push('\\\\\\\\\\\\textbf{Hypotheses:}');\n      sections.push('\\\\begin{enumerate}');\n      theorem.hypotheses.forEach((hyp: string) => {\n        sections.push(`  \\\\item ${this.escapeLatex(hyp)}`);\n      });\n      sections.push('\\\\end{enumerate}');\n    }\n\n    sections.push('\\\\end{theorem}');\n\n    if (theorem.proof) {\n      sections.push('\\\\begin{proof}');\n      sections.push(this.escapeLatex(theorem.proof));\n      sections.push('\\\\end{proof}');\n    }\n\n    sections.push('');\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format a proof strategy\n   */\n  private formatProof(proof: any): string {\n    const sections: string[] = [];\n\n    sections.push('\\\\begin{proof}');\n    sections.push(`\\\\textbf{Strategy:} ${proof.type}`);\n    sections.push('');\n\n    if (proof.steps && proof.steps.length > 0) {\n      proof.steps.forEach((step: string, i: number) => {\n        sections.push(`\\\\textbf{Step ${i + 1}:} ${this.escapeLatex(step)}`);\n        sections.push('');\n      });\n    }\n\n    if (proof.baseCase) {\n      sections.push(`\\\\textbf{Base Case:} ${this.escapeLatex(proof.baseCase)}`);\n      sections.push('');\n    }\n\n    if (proof.inductiveStep) {\n      sections.push(`\\\\textbf{Inductive Step:} ${this.escapeLatex(proof.inductiveStep)}`);\n      sections.push('');\n    }\n\n    if (proof.completeness !== undefined) {\n      sections.push(`\\\\textit{Completeness: ${(proof.completeness * 100).toFixed(0)}\\\\%}`);\n    }\n\n    sections.push('\\\\end{proof}');\n    sections.push('');\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format logical form\n   */\n  private formatLogicalForm(logic: any): string {\n    const sections: string[] = [];\n\n    sections.push('\\\\paragraph{Logical Form}');\n\n    if (logic.premises && logic.premises.length > 0) {\n      sections.push('\\\\textbf{Premises:}');\n      sections.push('\\\\begin{enumerate}');\n      logic.premises.forEach((premise: string) => {\n        sections.push(`  \\\\item ${this.escapeLatex(premise)}`);\n      });\n      sections.push('\\\\end{enumerate}');\n    }\n\n    if (logic.conclusion) {\n      sections.push(`\\\\textbf{Conclusion:} ${this.escapeLatex(logic.conclusion)}`);\n      sections.push('');\n    }\n\n    if (logic.rules && logic.rules.length > 0) {\n      sections.push('\\\\textbf{Inference Rules:}');\n      sections.push('\\\\begin{itemize}');\n      logic.rules.forEach((rule: string) => {\n        sections.push(`  \\\\item ${this.escapeLatex(rule)}`);\n      });\n      sections.push('\\\\end{itemize}');\n    }\n\n    sections.push('');\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format Physics mode thought\n   */\n  private formatPhysicsThought(thought: PhysicsThought): string {\n    const sections: string[] = [];\n\n    if (thought.tensorProperties) {\n      sections.push('\\\\paragraph{Tensor Properties}');\n      sections.push(`\\\\textbf{Rank:} $(${thought.tensorProperties.rank[0]}, ${thought.tensorProperties.rank[1]})$`);\n      sections.push('');\n      sections.push('\\\\begin{equation}');\n      sections.push(thought.tensorProperties.latex);\n      sections.push('\\\\end{equation}');\n      sections.push('');\n    }\n\n    if (thought.physicalInterpretation) {\n      sections.push('\\\\paragraph{Physical Interpretation}');\n      sections.push(`\\\\textbf{Quantity:} ${this.escapeLatex(thought.physicalInterpretation.quantity)}`);\n      sections.push(`\\\\textbf{Units:} ${this.escapeLatex(thought.physicalInterpretation.units)}`);\n\n      if (thought.physicalInterpretation.conservationLaws.length > 0) {\n        sections.push('\\\\textbf{Conservation Laws:}');\n        sections.push('\\\\begin{itemize}');\n        thought.physicalInterpretation.conservationLaws.forEach(law => {\n          sections.push(`  \\\\item ${this.escapeLatex(law)}`);\n        });\n        sections.push('\\\\end{itemize}');\n      }\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format Causal mode thought with TikZ diagrams\n   */\n  private formatCausalThought(thought: CausalThought): string {\n    const sections: string[] = [];\n\n    // Causal graph visualization (TikZ is native LaTeX, always render)\n    if (thought.causalGraph) {\n      sections.push(this.formatCausalGraph(thought.causalGraph, thought.thoughtNumber));\n    }\n\n    // Causal mechanisms\n    if (thought.mechanisms && thought.mechanisms.length > 0) {\n      sections.push('\\\\paragraph{Causal Mechanisms}');\n      sections.push('\\\\begin{itemize}');\n      thought.mechanisms.forEach(mechanism => {\n        const typeLabel = mechanism.type === 'direct' ? 'Direct' :\n                         mechanism.type === 'indirect' ? 'Indirect' : 'Feedback';\n        sections.push(`  \\\\item \\\\textbf{[${typeLabel}]} ${this.escapeLatex(mechanism.from)} $\\\\rightarrow$ ${this.escapeLatex(mechanism.to)}: ${this.escapeLatex(mechanism.description)}`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Interventions\n    if (thought.interventions && thought.interventions.length > 0) {\n      sections.push(this.formatInterventions(thought.interventions));\n    }\n\n    // Confounders\n    if (thought.confounders && thought.confounders.length > 0) {\n      sections.push('\\\\paragraph{Confounding Variables}');\n      sections.push('\\\\begin{itemize}');\n      thought.confounders.forEach(confounder => {\n        sections.push(`  \\\\item \\\\textbf{${this.escapeLatex(confounder.nodeId)}}: ${this.escapeLatex(confounder.description)}`);\n        if (confounder.affects && confounder.affects.length > 0) {\n          sections.push(`        \\\\\\\\\\\\textit{Affects:} ${confounder.affects.join(', ')}`);\n        }\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Counterfactuals\n    if (thought.counterfactuals && thought.counterfactuals.length > 0) {\n      sections.push('\\\\paragraph{Counterfactual Scenarios}');\n      thought.counterfactuals.forEach(cf => {\n        sections.push(`\\\\textbf{${this.escapeLatex(cf.description)}}`);\n        sections.push(`\\\\\\\\\\\\textit{Predicted outcome:} ${this.escapeLatex(cf.predictedOutcome)}`);\n        sections.push('');\n      });\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format causal graph as TikZ diagram\n   */\n  private formatCausalGraph(graph: any, thoughtNum: number): string {\n    const sections: string[] = [];\n\n    sections.push('\\\\begin{figure}[h]');\n    sections.push('\\\\centering');\n    sections.push('\\\\begin{tikzpicture}[');\n    sections.push('  node distance=2.5cm,');\n    sections.push('  auto,');\n    sections.push('  thick,');\n    sections.push('  main node/.style={circle,draw,font=\\\\sffamily\\\\small,minimum size=1cm}');\n    sections.push(']');\n    sections.push('');\n\n    // Calculate positions for nodes\n    const positions = this.calculateNodePositions(graph.nodes);\n\n    // Draw nodes\n    graph.nodes.forEach((node: any, i: number) => {\n      const pos = positions[i];\n      const style = this.getNodeStyle(node.type);\n      const label = this.escapeLatex(node.name).substring(0, 15); // Truncate long names\n      sections.push(`\\\\node[main node,${style}] (${node.id}) at (${pos.x},${pos.y}) {${label}};`);\n    });\n\n    sections.push('');\n\n    // Draw edges\n    graph.edges.forEach((edge: any) => {\n      const edgeStyle = this.getEdgeStyle(edge.strength);\n      const label = edge.strength >= 0\n        ? `${edge.strength.toFixed(2)}`\n        : `${edge.strength.toFixed(2)}`;\n\n      sections.push(`\\\\draw[${edgeStyle}] (${edge.from}) -- node[midway,above,sloped,font=\\\\tiny] {${label}} (${edge.to});`);\n    });\n\n    sections.push('');\n    sections.push('\\\\end{tikzpicture}');\n    sections.push(`\\\\caption{Causal Graph (Thought ${thoughtNum})}`);\n    sections.push(`\\\\label{fig:causal${thoughtNum}}`);\n    sections.push('\\\\end{figure}');\n    sections.push('');\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Calculate node positions using a layered layout\n   */\n  private calculateNodePositions(nodes: any[]): Array<{x: number, y: number}> {\n    // Group nodes by type\n    const causes = nodes.filter(n => n.type === 'cause');\n    const mediators = nodes.filter(n => n.type === 'mediator');\n    const effects = nodes.filter(n => n.type === 'effect');\n    const confounders = nodes.filter(n => n.type === 'confounder');\n\n    const positions: Array<{x: number, y: number}> = [];\n    const spacing = 3; // horizontal spacing between nodes\n\n    // Layout causes on the left (x=0)\n    causes.forEach((node, i) => {\n      const y = (i - (causes.length - 1) / 2) * spacing;\n      positions[nodes.indexOf(node)] = { x: 0, y };\n    });\n\n    // Layout mediators in the middle (x=spacing)\n    mediators.forEach((node, i) => {\n      const y = (i - (mediators.length - 1) / 2) * spacing;\n      positions[nodes.indexOf(node)] = { x: spacing, y };\n    });\n\n    // Layout effects on the right (x=spacing*2)\n    effects.forEach((node, i) => {\n      const y = (i - (effects.length - 1) / 2) * spacing;\n      positions[nodes.indexOf(node)] = { x: spacing * 2, y };\n    });\n\n    // Layout confounders above (y=spacing*1.5)\n    confounders.forEach((node, i) => {\n      const x = (i - (confounders.length - 1) / 2) * spacing + spacing;\n      positions[nodes.indexOf(node)] = { x, y: spacing * 1.5 };\n    });\n\n    return positions;\n  }\n\n  /**\n   * Get TikZ node style based on node type\n   */\n  private getNodeStyle(type: string): string {\n    const styles: Record<string, string> = {\n      cause: 'fill=blue!20',\n      effect: 'fill=red!20',\n      mediator: 'fill=green!20',\n      confounder: 'fill=yellow!20,dashed'\n    };\n    return styles[type] || 'fill=gray!20';\n  }\n\n  /**\n   * Get TikZ edge style based on strength\n   */\n  private getEdgeStyle(strength: number): string {\n    const absStrength = Math.abs(strength);\n    const direction = strength >= 0 ? '->' : '->,red';\n\n    if (absStrength > 0.7) {\n      return `${direction},very thick`;\n    } else if (absStrength > 0.4) {\n      return `${direction},thick`;\n    } else {\n      return `${direction},dashed`;\n    }\n  }\n\n  /**\n   * Format interventions\n   */\n  private formatInterventions(interventions: any[]): string {\n    const sections: string[] = [];\n\n    sections.push('\\\\paragraph{Interventions}');\n    sections.push('\\\\begin{enumerate}');\n\n    interventions.forEach(intervention => {\n      sections.push(`  \\\\item \\\\textbf{Action on ${this.escapeLatex(intervention.nodeId)}:} ${this.escapeLatex(intervention.action)}`);\n\n      if (intervention.expectedEffects && intervention.expectedEffects.length > 0) {\n        sections.push('        \\\\\\\\\\\\textit{Expected effects:}');\n        sections.push('        \\\\begin{itemize}');\n        intervention.expectedEffects.forEach((effect: any) => {\n          sections.push(`          \\\\item ${this.escapeLatex(effect.nodeId)}: ${this.escapeLatex(effect.expectedChange)} (confidence: ${(effect.confidence * 100).toFixed(0)}\\\\%)`);\n        });\n        sections.push('        \\\\end{itemize}');\n      }\n    });\n\n    sections.push('\\\\end{enumerate}');\n    sections.push('');\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format Bayesian mode thought with probability calculations\n   */\n  private formatBayesianThought(thought: BayesianThought): string {\n    const sections: string[] = [];\n\n    // Hypothesis\n    sections.push('\\\\paragraph{Hypothesis}');\n    sections.push(this.escapeLatex(thought.hypothesis.statement));\n    if (thought.hypothesis.alternatives && thought.hypothesis.alternatives.length > 0) {\n      sections.push('\\\\\\\\\\\\textit{Alternatives:}');\n      sections.push('\\\\begin{itemize}');\n      thought.hypothesis.alternatives.forEach(alt => {\n        sections.push(`  \\\\item ${this.escapeLatex(alt)}`);\n      });\n      sections.push('\\\\end{itemize}');\n    }\n    sections.push('');\n\n    // Prior probability\n    sections.push('\\\\paragraph{Prior Probability}');\n    sections.push('\\\\begin{equation}');\n    sections.push(`  P(H) = ${thought.prior.probability.toFixed(4)}`);\n    sections.push('\\\\end{equation}');\n    sections.push(`\\\\textit{Justification:} ${this.escapeLatex(thought.prior.justification)}`);\n    sections.push('');\n\n    // Evidence with likelihoods\n    if (thought.evidence && thought.evidence.length > 0) {\n      sections.push('\\\\paragraph{Evidence}');\n      sections.push('\\\\begin{itemize}');\n      thought.evidence.forEach(ev => {\n        sections.push(`  \\\\item \\\\textbf{${this.escapeLatex(ev.description)}}`);\n        sections.push('        \\\\begin{align*}');\n        sections.push(`          P(E|H) &= ${ev.likelihoodGivenHypothesis.toFixed(4)} \\\\\\\\`);\n        sections.push(`          P(E|\\\\neg H) &= ${ev.likelihoodGivenNotHypothesis.toFixed(4)}`);\n        sections.push('        \\\\end{align*}');\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Posterior probability\n    sections.push('\\\\paragraph{Posterior Probability}');\n    sections.push('\\\\begin{equation}');\n    sections.push(`  P(H|E) = ${thought.posterior.probability.toFixed(4)}`);\n    sections.push('\\\\end{equation}');\n    sections.push(`\\\\textit{Calculation:} ${this.escapeLatex(thought.posterior.calculation)}`);\n    if ((thought.posterior as any).confidence !== undefined) {\n      sections.push(`\\\\\\\\\\\\textit{Confidence:} ${((thought.posterior as any).confidence * 100).toFixed(1)}\\\\%`);\n    }\n    sections.push('');\n\n    // Bayes factor\n    if (thought.bayesFactor !== undefined) {\n      sections.push('\\\\paragraph{Bayes Factor}');\n      const interpretation = this.interpretBayesFactor(thought.bayesFactor);\n      sections.push(`\\\\textbf{BF} = ${thought.bayesFactor.toFixed(2)}`);\n      sections.push(`\\\\\\\\\\\\textit{Interpretation:} ${interpretation}`);\n      sections.push('');\n    }\n\n    // Sensitivity analysis\n    if (thought.sensitivity) {\n      sections.push('\\\\paragraph{Sensitivity Analysis}');\n      sections.push(`Prior range: [${thought.sensitivity.priorRange[0].toFixed(2)}, ${thought.sensitivity.priorRange[1].toFixed(2)}]`);\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Interpret Bayes factor strength\n   */\n  private interpretBayesFactor(bf: number): string {\n    if (bf > 100) return 'Extreme evidence for hypothesis';\n    if (bf > 30) return 'Very strong evidence for hypothesis';\n    if (bf > 10) return 'Strong evidence for hypothesis';\n    if (bf > 3) return 'Moderate evidence for hypothesis';\n    if (bf > 1) return 'Weak evidence for hypothesis';\n    if (bf === 1) return 'No evidence';\n    if (bf > 1/3) return 'Weak evidence against hypothesis';\n    if (bf > 1/10) return 'Moderate evidence against hypothesis';\n    if (bf > 1/30) return 'Strong evidence against hypothesis';\n    if (bf > 1/100) return 'Very strong evidence against hypothesis';\n    return 'Extreme evidence against hypothesis';\n  }\n\n  /**\n   * Format Analogical mode thought with domain mappings\n   */\n  private formatAnalogicalThought(thought: any): string {\n    const sections: string[] = [];\n\n    // Source domain\n    sections.push('\\\\paragraph{Source Domain}');\n    sections.push(`\\\\textbf{${this.escapeLatex(thought.sourceDomain.name)}}`);\n    sections.push(`\\\\\\\\${this.escapeLatex(thought.sourceDomain.description)}`);\n    sections.push('');\n\n    // Target domain\n    sections.push('\\\\paragraph{Target Domain}');\n    sections.push(`\\\\textbf{${this.escapeLatex(thought.targetDomain.name)}}`);\n    sections.push(`\\\\\\\\${this.escapeLatex(thought.targetDomain.description)}`);\n    sections.push('');\n\n    // Mappings\n    if (thought.mapping && thought.mapping.length > 0) {\n      sections.push('\\\\paragraph{Mappings}');\n      sections.push('\\\\begin{itemize}');\n      thought.mapping.forEach((m: any) => {\n        sections.push(`  \\\\item ${this.escapeLatex(m.sourceEntityId)} $\\\\mapsto$ ${this.escapeLatex(m.targetEntityId)}`);\n        sections.push(`        \\\\\\\\\\\\textit{Confidence:} ${(m.confidence * 100).toFixed(0)}\\\\%`);\n        sections.push(`        \\\\\\\\\\\\textit{Justification:} ${this.escapeLatex(m.justification)}`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Insights\n    if (thought.insights && thought.insights.length > 0) {\n      sections.push('\\\\paragraph{Insights}');\n      sections.push('\\\\begin{enumerate}');\n      thought.insights.forEach((insight: any) => {\n        sections.push(`  \\\\item ${this.escapeLatex(insight.description)}`);\n        sections.push(`        \\\\\\\\\\\\textit{Source evidence:} ${this.escapeLatex(insight.sourceEvidence)}`);\n        sections.push(`        \\\\\\\\\\\\textit{Target application:} ${this.escapeLatex(insight.targetApplication)}`);\n        sections.push(`        \\\\\\\\\\\\textit{Novelty:} ${(insight.novelty * 100).toFixed(0)}\\\\%`);\n      });\n      sections.push('\\\\end{enumerate}');\n      sections.push('');\n    }\n\n    // Inferences\n    if (thought.inferences && thought.inferences.length > 0) {\n      sections.push('\\\\paragraph{Inferences}');\n      sections.push('\\\\begin{enumerate}');\n      thought.inferences.forEach((inference: any) => {\n        sections.push(`  \\\\item ${this.escapeLatex(inference.description)}`);\n        sections.push(`        \\\\\\\\\\\\textit{Based on:} ${this.escapeLatex(inference.basedOn)}`);\n        sections.push(`        \\\\\\\\\\\\textit{Confidence:} ${(inference.confidence * 100).toFixed(0)}\\\\%`);\n        sections.push(`        \\\\\\\\\\\\textit{Testability:} ${this.escapeLatex(inference.testability)}`);\n      });\n      sections.push('\\\\end{enumerate}');\n      sections.push('');\n    }\n\n    // Analogy strength\n    sections.push('\\\\paragraph{Analogy Strength}');\n    const strengthPercent = (thought.analogyStrength * 100).toFixed(1);\n    const strengthLabel = thought.analogyStrength > 0.7 ? 'Strong' :\n                          thought.analogyStrength > 0.4 ? 'Moderate' : 'Weak';\n    sections.push(`${strengthPercent}\\\\% (${strengthLabel})`);\n    sections.push('');\n\n    // Limitations\n    if (thought.limitations && thought.limitations.length > 0) {\n      sections.push('\\\\paragraph{Limitations}');\n      sections.push('\\\\begin{itemize}');\n      thought.limitations.forEach((lim: string) => {\n        sections.push(`  \\\\item ${this.escapeLatex(lim)}`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format Temporal mode thought with timeline visualization\n   */\n  private formatTemporalThought(thought: TemporalThought): string {\n    const sections: string[] = [];\n\n    // Timeline information\n    if (thought.timeline) {\n      sections.push('\\\\paragraph{Timeline}');\n      sections.push(`\\\\textbf{${this.escapeLatex(thought.timeline.name)}}`);\n      sections.push(`\\\\\\\\Time Unit: ${this.escapeLatex(thought.timeline.timeUnit)}`);\n      if (thought.timeline.startTime !== undefined) {\n        sections.push(`\\\\\\\\Start: ${thought.timeline.startTime}`);\n      }\n      if (thought.timeline.endTime !== undefined) {\n        sections.push(`\\\\\\\\End: ${thought.timeline.endTime}`);\n      }\n      sections.push('');\n    }\n\n    // Events\n    if (thought.events && thought.events.length > 0) {\n      sections.push('\\\\paragraph{Events}');\n      sections.push('\\\\begin{itemize}');\n      thought.events.forEach(event => {\n        const eventType = event.type === 'instant' ? 'Instant' : 'Interval';\n        sections.push(`  \\\\item \\\\textbf{[${eventType}] ${this.escapeLatex(event.name)}} (t=${event.timestamp})`);\n        sections.push(`        \\\\\\\\${this.escapeLatex(event.description)}`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Temporal relations\n    if (thought.relations && thought.relations.length > 0) {\n      sections.push('\\\\paragraph{Temporal Relations}');\n      sections.push('\\\\begin{itemize}');\n      thought.relations.forEach(rel => {\n        const relType = rel.relationType.replace(/_/g, ' ');\n        sections.push(`  \\\\item ${this.escapeLatex(rel.from)} \\\\textit{${relType}} ${this.escapeLatex(rel.to)}`);\n        if (rel.delay) {\n          sections.push(`        \\\\\\\\Delay: ${rel.delay}`);\n        }\n        sections.push(`        \\\\\\\\Strength: ${(rel.strength * 100).toFixed(0)}\\\\%`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format Game Theory mode thought\n   */\n  private formatGameTheoryThought(thought: GameTheoryThought): string {\n    const sections: string[] = [];\n\n    // Game description\n    if (thought.game) {\n      sections.push('\\\\paragraph{Game}');\n      sections.push(`\\\\textbf{${this.escapeLatex(thought.game.name)}} (${thought.game.type})`);\n      sections.push(`\\\\\\\\Players: ${thought.game.numPlayers}`);\n      sections.push('');\n    }\n\n    // Players\n    if (thought.players && thought.players.length > 0) {\n      sections.push('\\\\paragraph{Players}');\n      sections.push('\\\\begin{itemize}');\n      thought.players.forEach(player => {\n        sections.push(`  \\\\item \\\\textbf{${this.escapeLatex(player.name)}}`);\n        if (player.role) {\n          sections.push(`        \\\\\\\\Role: ${this.escapeLatex(player.role)}`);\n        }\n        sections.push(`        \\\\\\\\Rational: ${player.isRational ? 'Yes' : 'No'}`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Strategies\n    if (thought.strategies && thought.strategies.length > 0) {\n      sections.push('\\\\paragraph{Strategies}');\n      sections.push('\\\\begin{itemize}');\n      thought.strategies.forEach(strategy => {\n        const stratType = strategy.isPure ? 'Pure' : 'Mixed';\n        sections.push(`  \\\\item \\\\textbf{[${stratType}] ${this.escapeLatex(strategy.name)}}`);\n        sections.push(`        \\\\\\\\${this.escapeLatex(strategy.description)}`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Nash equilibria\n    if (thought.nashEquilibria && thought.nashEquilibria.length > 0) {\n      sections.push('\\\\paragraph{Nash Equilibria}');\n      sections.push('\\\\begin{enumerate}');\n      thought.nashEquilibria.forEach(eq => {\n        const eqType = eq.type || 'Unknown';\n        sections.push(`  \\\\item \\\\textbf{[${eqType}]} ${eq.strategyProfile.join(', ')}`);\n        sections.push(`        \\\\\\\\Payoffs: (${eq.payoffs.join(', ')})`);\n        sections.push(`        \\\\\\\\Stability: ${eq.stability}`);\n      });\n      sections.push('\\\\end{enumerate}');\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format Evidential mode thought (Dempster-Shafer theory)\n   */\n  private formatEvidentialThought(thought: EvidentialThought): string {\n    const sections: string[] = [];\n\n    // Frame of discernment\n    if (thought.frameOfDiscernment && thought.frameOfDiscernment.length > 0) {\n      sections.push('\\\\paragraph{Frame of Discernment}');\n      sections.push(`$\\\\Theta = \\\\{${thought.frameOfDiscernment.map(h => this.escapeLatex(h)).join(', ')}\\\\}$`);\n      sections.push('');\n    }\n\n    // Hypotheses\n    if (thought.hypotheses && thought.hypotheses.length > 0) {\n      sections.push('\\\\paragraph{Hypotheses}');\n      sections.push('\\\\begin{itemize}');\n      thought.hypotheses.forEach(hyp => {\n        sections.push(`  \\\\item \\\\textbf{${this.escapeLatex(hyp.name)}}: ${this.escapeLatex(hyp.description)}`);\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    // Evidence\n    if (thought.evidence && thought.evidence.length > 0) {\n      sections.push('\\\\paragraph{Evidence}');\n      sections.push('\\\\begin{enumerate}');\n      thought.evidence.forEach(ev => {\n        sections.push(`  \\\\item \\\\textbf{${this.escapeLatex(ev.description)}}`);\n        sections.push(`        \\\\\\\\Source: ${this.escapeLatex(ev.source)}`);\n        sections.push(`        \\\\\\\\Reliability: ${(ev.reliability * 100).toFixed(0)}\\\\%`);\n      });\n      sections.push('\\\\end{enumerate}');\n      sections.push('');\n    }\n\n    // Belief functions\n    if (thought.beliefFunctions && thought.beliefFunctions.length > 0) {\n      sections.push('\\\\paragraph{Belief Functions}');\n      sections.push('\\\\begin{itemize}');\n      thought.beliefFunctions.forEach(bf => {\n        sections.push(`  \\\\item \\\\textbf{Source:} ${this.escapeLatex(bf.source)}`);\n        bf.massAssignments.forEach(ma => {\n          sections.push(`    - $m(\\\\{${ma.hypothesisSet.join(', ')}\\\\}) = ${ma.mass.toFixed(4)}$`);\n          sections.push(`      \\\\\\\\\\\\textit{${this.escapeLatex(ma.justification)}}`);\n        });\n      });\n      sections.push('\\\\end{itemize}');\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format First-Principles mode thought\n   */\n  private formatFirstPrinciplesThought(thought: FirstPrinciplesThought): string {\n    const sections: string[] = [];\n\n    if (thought.question) {\n      sections.push('\\\\paragraph{Question}');\n      sections.push(`\\\\textit{${this.escapeLatex(thought.question)}}`);\n      sections.push('');\n    }\n\n    if (thought.principles && thought.principles.length > 0) {\n      sections.push('\\\\paragraph{Foundational Principles}');\n      sections.push('\\\\begin{enumerate}');\n      thought.principles.forEach(principle => {\n        sections.push(`  \\\\item \\\\textbf{[${principle.type}]} ${this.escapeLatex(principle.statement)}`);\n        sections.push(`        \\\\\\\\\\\\textit{Justification:} ${this.escapeLatex(principle.justification)}`);\n      });\n      sections.push('\\\\end{enumerate}');\n      sections.push('');\n    }\n\n    if (thought.conclusion) {\n      sections.push('\\\\paragraph{Conclusion}');\n      sections.push(this.escapeLatex(thought.conclusion.statement));\n      sections.push(`\\\\\\\\\\\\textit{Certainty:} ${thought.conclusion.certainty}`);\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format generic thought (fallback for modes without specialized formatting)\n   */\n  private formatGenericThought(thought: Thought): string {\n    const sections: string[] = [];\n\n    if (this.options.includeTimestamps) {\n      sections.push(`\\\\textit{Timestamp:} ${this.formatDate(thought.timestamp)}`);\n      sections.push('');\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Format session summary\n   */\n  private formatSummary(session: ThinkingSession): string {\n    const sections: string[] = [];\n\n    sections.push('\\\\section{Summary}');\n    sections.push('');\n    sections.push(`This ${session.mode} reasoning session completed with ${session.thoughts.length} thoughts.`);\n\n    if (session.metrics.revisionCount > 0) {\n      sections.push(`The reasoning process included ${session.metrics.revisionCount} revisions, `);\n      sections.push(`demonstrating iterative refinement.`);\n    }\n\n    sections.push('');\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Escape special LaTeX characters\n   */\n  private escapeLatex(text: string): string {\n    if (!text) return '';\n\n    return text\n      .replace(/\\\\/g, '\\\\textbackslash{}')\n      .replace(/[&%$#_{}]/g, '\\\\$&')\n      .replace(/~/g, '\\\\textasciitilde{}')\n      .replace(/\\^/g, '\\\\textasciicircum{}');\n  }\n\n  /**\n   * Format date for LaTeX\n   */\n  private formatDate(date: Date | undefined): string {\n    if (!date) {\n      return new Date().toISOString().split('T')[0];\n    }\n    return date.toISOString().split('T')[0];\n  }\n\n  /**\n   * Format duration in human-readable form\n   */\n  private formatDuration(seconds: number): string {\n    const hours = Math.floor(seconds / 3600);\n    const minutes = Math.floor((seconds % 3600) / 60);\n    const secs = Math.floor(seconds % 60);\n\n    const parts: string[] = [];\n    if (hours > 0) parts.push(`${hours}h`);\n    if (minutes > 0) parts.push(`${minutes}m`);\n    if (secs > 0 || parts.length === 0) parts.push(`${secs}s`);\n\n    return parts.join(' ');\n  }\n\n  /**\n   * Determine if a thought should include a visual diagram\n   */\n  private shouldIncludeDiagram(thought: Thought): boolean {\n    if (!this.options.renderDiagrams) {\n      return false;\n    }\n\n    // Include diagrams for modes with rich visual representations\n    return thought.mode === 'causal' ||\n           thought.mode === 'temporal' ||\n           thought.mode === 'gametheory' ||\n           thought.mode === 'bayesian';\n  }\n\n  /**\n   * Embed a Mermaid diagram in LaTeX document\n   */\n  private embedMermaidDiagram(mermaid: string, caption: string): string {\n    const sections: string[] = [];\n\n    sections.push('\\\\begin{figure}[h]');\n    sections.push('\\\\centering');\n    sections.push('\\\\begin{verbatim}');\n    sections.push(mermaid);\n    sections.push('\\\\end{verbatim}');\n    sections.push(`\\\\caption{${this.escapeLatex(caption)}}`);\n    sections.push('\\\\end{figure}');\n    sections.push('');\n\n    return sections.join('\\n');\n  }\n}\n","/**\n * LaTeX-Mermaid Integration (v3.4.0)\n * Phase 4B Task 1.4b: Integrate Phase 3 Visual Exporter with LaTeX\n *\n * Embeds Mermaid diagrams into LaTeX documents using the mermaid-tikz package\n */\n\nimport type { ThinkingSession, Thought } from '../../../types/index.js';\nimport type { VisualExportOptions } from '../types.js';\nimport { VisualExporter } from '../visual-exporter.js';\n\n/**\n * Mermaid-LaTeX integration options\n */\nexport interface MermaidLatexOptions {\n  engine: 'mermaid-tikz' | 'external-svg' | 'inline-code';\n  width?: string; // e.g., '\\\\textwidth', '0.8\\\\linewidth'\n  caption?: boolean;\n  label?: boolean;\n  floatPlacement?: 'h' | 't' | 'b' | 'p' | 'H';\n  colorScheme?: 'default' | 'monochrome' | 'pastel';\n}\n\n/**\n * LaTeX-Mermaid integrator\n */\nexport class LatexMermaidIntegrator {\n  private visualExporter: VisualExporter;\n\n  constructor() {\n    this.visualExporter = new VisualExporter();\n  }\n\n  /**\n   * Generate LaTeX preamble for Mermaid support\n   */\n  generateMermaidPreamble(engine: 'mermaid-tikz' | 'external-svg' | 'inline-code'): string {\n    if (engine === 'mermaid-tikz') {\n      return `\n% Mermaid diagram support via TikZ\n\\\\usepackage{tikz}\n\\\\usetikzlibrary{shapes.geometric, arrows.meta, positioning, calc}\n\\\\usepackage{pgfplots}\n\\\\pgfplotsset{compat=1.18}\n\n% Mermaid-style colors\n\\\\definecolor{mermaidBlue}{RGB}{100,150,200}\n\\\\definecolor{mermaidGreen}{RGB}{100,200,150}\n\\\\definecolor{mermaidRed}{RGB}{200,100,100}\n\\\\definecolor{mermaidYellow}{RGB}{250,220,100}\n\\\\definecolor{mermaidPurple}{RGB}{180,130,200}\n\n% Mermaid diagram environment\n\\\\newenvironment{mermaiddiagram}[1][h]{\n  \\\\begin{figure}[#1]\n  \\\\centering\n}{\n  \\\\end{figure}\n}\n`;\n    } else if (engine === 'external-svg') {\n      return `\n% Mermaid diagram support via external SVG\n\\\\usepackage{graphicx}\n\\\\usepackage{svg}\n\n% Mermaid diagram from SVG\n\\\\newcommand{\\\\mermaidsvg}[2][width=\\\\textwidth]{\n  \\\\includesvg[#1]{#2}\n}\n\n\\\\newenvironment{mermaiddiagram}[1][h]{\n  \\\\begin{figure}[#1]\n  \\\\centering\n}{\n  \\\\end{figure}\n}\n`;\n    } else {\n      // inline-code: show Mermaid code in listings\n      return `\n% Mermaid code display\n\\\\usepackage{listings}\n\\\\usepackage{xcolor}\n\n\\\\lstdefinelanguage{mermaid}{\n  keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},\n  keywordstyle=\\\\color{blue}\\\\bfseries,\n  sensitive=true,\n  comment=[l]{\\\\%\\\\%},\n  commentstyle=\\\\color{gray}\\\\itshape,\n  stringstyle=\\\\color{red},\n  morestring=[b]\",\n  morestring=[b]'\n}\n\n\\\\lstset{\n  language=mermaid,\n  basicstyle=\\\\small\\\\ttfamily,\n  breaklines=true,\n  frame=single,\n  backgroundcolor=\\\\color{gray!10}\n}\n\n\\\\newenvironment{mermaidcode}{\n  \\\\begin{lstlisting}[language=mermaid]\n}{\n  \\\\end{lstlisting}\n}\n`;\n    }\n  }\n\n  /**\n   * Embed Mermaid diagram in LaTeX\n   */\n  embedMermaidDiagram(\n    mermaidCode: string,\n    caption: string,\n    label: string,\n    options: MermaidLatexOptions\n  ): string {\n    const {\n      engine = 'mermaid-tikz',\n      width = '\\\\textwidth',\n      caption: showCaption = true,\n      label: showLabel = true,\n      floatPlacement = 'h',\n    } = options;\n\n    let content = '';\n\n    if (engine === 'inline-code') {\n      // Just show the Mermaid code\n      content = `\\\\begin{mermaiddiagram}[${floatPlacement}]\n\\\\begin{mermaidcode}\n${mermaidCode}\n\\\\end{mermaidcode}\n${showCaption ? `\\\\caption{${caption}}` : ''}\n${showLabel ? `\\\\label{${label}}` : ''}\n\\\\end{mermaiddiagram}`;\n    } else if (engine === 'external-svg') {\n      // Reference external SVG (assumes SVG file exists)\n      const filename = label.replace(/:/g, '-');\n      content = `\\\\begin{mermaiddiagram}[${floatPlacement}]\n\\\\mermaidsvg[width=${width}]{diagrams/${filename}.svg}\n${showCaption ? `\\\\caption{${caption}}` : ''}\n${showLabel ? `\\\\label{${label}}` : ''}\n\\\\end{mermaiddiagram}`;\n    } else {\n      // Convert to TikZ (simplified - real implementation would parse Mermaid)\n      const tikzCode = this.convertMermaidToTikZ(mermaidCode);\n      content = `\\\\begin{mermaiddiagram}[${floatPlacement}]\n${tikzCode}\n${showCaption ? `\\\\caption{${caption}}` : ''}\n${showLabel ? `\\\\label{${label}}` : ''}\n\\\\end{mermaiddiagram}`;\n    }\n\n    return content;\n  }\n\n  /**\n   * Convert Mermaid code to TikZ (simplified implementation)\n   */\n  private convertMermaidToTikZ(mermaidCode: string): string {\n    // This is a simplified conversion - a full implementation would parse Mermaid AST\n    // For now, we'll just wrap it in a comment and provide a placeholder\n\n    return `% Mermaid diagram (requires manual conversion or mermaid-cli)\n% Original Mermaid code:\n${mermaidCode.split('\\n').map(line => `% ${line}`).join('\\n')}\n\n% Placeholder TikZ diagram\n\\\\begin{tikzpicture}[node distance=2cm, auto]\n  \\\\node[draw, rectangle, rounded corners] (placeholder) {Diagram rendered from Mermaid};\n  \\\\node[below=of placeholder, text width=6cm, text centered] {\n    \\\\small\\\\textit{Use mermaid-cli to generate SVG or compile with --shell-escape}\n  };\n\\\\end{tikzpicture}`;\n  }\n\n  /**\n   * Generate diagram for thought and embed in LaTeX\n   */\n  generateThoughtDiagram(thought: Thought, options: MermaidLatexOptions): string {\n    const visualOptions: VisualExportOptions = {\n      format: 'mermaid',\n      colorScheme: options.colorScheme || 'default',\n      includeLabels: true,\n      includeMetrics: true,\n    };\n\n    let mermaidCode = '';\n    let caption = '';\n    let label = '';\n\n    // Generate appropriate diagram based on thought type\n    if (thought.mode === 'causal' && 'graph' in thought) {\n      mermaidCode = this.visualExporter.exportCausalGraph(thought as any, visualOptions);\n      caption = 'Causal Graph';\n      label = `fig:causal-${thought.thoughtNumber}`;\n    } else if (thought.mode === 'temporal' && 'timeline' in thought) {\n      mermaidCode = this.visualExporter.exportTemporalTimeline(thought as any, visualOptions);\n      caption = 'Temporal Timeline';\n      label = `fig:temporal-${thought.thoughtNumber}`;\n    } else if (thought.mode === 'gametheory' && 'gameTree' in thought) {\n      mermaidCode = this.visualExporter.exportGameTree(thought as any, visualOptions);\n      caption = 'Game Theory Tree';\n      label = `fig:gametheory-${thought.thoughtNumber}`;\n    } else if (thought.mode === 'bayesian' && 'network' in thought) {\n      mermaidCode = this.visualExporter.exportBayesianNetwork(thought as any, visualOptions);\n      caption = 'Bayesian Network';\n      label = `fig:bayesian-${thought.thoughtNumber}`;\n    } else {\n      return ''; // No diagram for this thought type\n    }\n\n    return this.embedMermaidDiagram(mermaidCode, caption, label, options);\n  }\n\n  /**\n   * Generate all diagrams for session\n   */\n  generateSessionDiagrams(session: ThinkingSession, options: MermaidLatexOptions): string {\n    const diagrams: string[] = [];\n\n    for (const thought of session.thoughts) {\n      const diagram = this.generateThoughtDiagram(thought, options);\n      if (diagram) {\n        diagrams.push(diagram);\n        diagrams.push(''); // Blank line\n      }\n    }\n\n    return diagrams.join('\\n');\n  }\n\n  /**\n   * Create appendix with all Mermaid source code\n   */\n  generateMermaidAppendix(session: ThinkingSession): string {\n    const sections: string[] = [];\n\n    sections.push('\\\\section*{Appendix: Mermaid Diagrams Source Code}');\n    sections.push('\\\\addcontentsline{toc}{section}{Appendix: Mermaid Diagrams Source Code}');\n    sections.push('');\n    sections.push('This appendix contains the Mermaid source code for all diagrams in this document.');\n    sections.push('');\n\n    for (const thought of session.thoughts) {\n      const visualOptions: VisualExportOptions = {\n        format: 'mermaid',\n        includeLabels: true,\n        includeMetrics: true,\n      };\n\n      let mermaidCode = '';\n\n      if (thought.mode === 'causal' && 'graph' in thought) {\n        mermaidCode = this.visualExporter.exportCausalGraph(thought as any, visualOptions);\n        sections.push(`\\\\subsection*{Thought ${thought.thoughtNumber}: Causal Graph}`);\n      } else if (thought.mode === 'temporal' && 'timeline' in thought) {\n        mermaidCode = this.visualExporter.exportTemporalTimeline(thought as any, visualOptions);\n        sections.push(`\\\\subsection*{Thought ${thought.thoughtNumber}: Temporal Timeline}`);\n      } else if (thought.mode === 'gametheory' && 'gameTree' in thought) {\n        mermaidCode = this.visualExporter.exportGameTree(thought as any, visualOptions);\n        sections.push(`\\\\subsection*{Thought ${thought.thoughtNumber}: Game Theory Tree}`);\n      } else if (thought.mode === 'bayesian' && 'network' in thought) {\n        mermaidCode = this.visualExporter.exportBayesianNetwork(thought as any, visualOptions);\n        sections.push(`\\\\subsection*{Thought ${thought.thoughtNumber}: Bayesian Network}`);\n      }\n\n      if (mermaidCode) {\n        sections.push('');\n        sections.push('\\\\begin{lstlisting}[language=mermaid, caption={Mermaid source code}]');\n        sections.push(mermaidCode);\n        sections.push('\\\\end{lstlisting}');\n        sections.push('');\n      }\n    }\n\n    return sections.join('\\n');\n  }\n\n  /**\n   * Generate complete LaTeX document with integrated Mermaid diagrams\n   */\n  generateIntegratedDocument(\n    session: ThinkingSession,\n    options: MermaidLatexOptions & { includeAppendix?: boolean }\n  ): string {\n    const { engine = 'inline-code', includeAppendix = true } = options;\n\n    const doc: string[] = [];\n\n    // Document class\n    doc.push('\\\\documentclass[11pt]{article}');\n    doc.push('');\n\n    // Preamble\n    doc.push(this.generateMermaidPreamble(engine));\n    doc.push('');\n\n    // Title\n    doc.push(`\\\\title{${session.title || 'Thinking Session'}}`);\n    doc.push('\\\\author{DeepThinking MCP}');\n    doc.push('\\\\date{\\\\today}');\n    doc.push('');\n\n    // Document body\n    doc.push('\\\\begin{document}');\n    doc.push('\\\\maketitle');\n    doc.push('\\\\tableofcontents');\n    doc.push('\\\\newpage');\n    doc.push('');\n\n    // Thoughts with diagrams\n    doc.push('\\\\section{Reasoning Session}');\n    doc.push('');\n\n    for (const thought of session.thoughts) {\n      doc.push(`\\\\subsection{Thought ${thought.thoughtNumber}}`);\n      doc.push('');\n      doc.push(thought.content);\n      doc.push('');\n\n      // Add diagram if applicable\n      const diagram = this.generateThoughtDiagram(thought, options);\n      if (diagram) {\n        doc.push(diagram);\n        doc.push('');\n      }\n    }\n\n    // Appendix with Mermaid source\n    if (includeAppendix && engine !== 'inline-code') {\n      doc.push('\\\\newpage');\n      doc.push(this.generateMermaidAppendix(session));\n    }\n\n    doc.push('');\n    doc.push('\\\\end{document}');\n\n    return doc.join('\\n');\n  }\n}\n","/**\n * Visual Export Utilities\n * Format-specific utilities for visual exports\n */\n\n// Core format utilities\nexport * from './mermaid.js';\nexport * from './dot.js';\nexport * from './ascii.js';\nexport * from './svg.js';\nexport * from './graphml.js';\nexport * from './tikz.js';\nexport * from './html.js';\nexport * from './modelica.js';\nexport * from './uml.js';\nexport * from './json.js';\nexport * from './markdown.js';\n\n// LaTeX utilities\nexport * from './latex.js';\nexport * from './latex-mermaid-integration.js';\n","/**\r\n * Visual Export Module (v8.3.0)\r\n * Reorganized: utilities in utils/, mode exporters in modes/\r\n *\r\n * Exports thinking sessions to visual formats: Mermaid, DOT, ASCII, SVG, GraphML, TikZ, Modelica, HTML, UML, JSON\r\n */\r\n\r\n// Re-export types\r\nexport { type VisualFormat, type VisualExportOptions } from './types.js';\r\nexport { sanitizeId } from './utils.js';\r\n\r\n// Re-export VisualExporter class (separated to break circular dependency)\r\nexport { VisualExporter } from './visual-exporter.js';\r\n\r\n// Re-export all mode-specific exporters from modes/\r\nexport * from './modes/index.js';\r\n\r\n// Re-export all utilities from utils/ (AFTER modes to avoid circular deps)\r\n// Note: latex.ts and latex-mermaid-integration.ts import VisualExporter from visual-exporter.ts directly\r\nexport * from './utils/index.js';\r\n","/**\r\n * Export Service (v7.0.3)\r\n * Sprint 3 Task 3.3: Extract export logic from index.ts\r\n * Sprint 3 Task 3.2: Added dependency injection support\r\n * Phase 9: Added native SVG, GraphML, and TikZ export support\r\n *\r\n * Centralizes session export logic for multiple formats.\r\n * Handles conversion between internal session format and export formats.\r\n *\r\n * RESPONSIBILITY:\r\n * - Export sessions to various formats (JSON, Markdown, LaTeX, HTML, Jupyter)\r\n * - Handle visual exports (Mermaid, DOT, ASCII, SVG, GraphML, TikZ, Markdown)\r\n * - Apply proper escaping and formatting for each format\r\n *\r\n * EXTRACTED FROM: src/index.ts (handleExport, exportTo* functions)\r\n */\r\n\r\nimport {\r\n  ThinkingSession,\r\n  ThinkingMode,\r\n  CausalThought,\r\n  TemporalThought,\r\n  GameTheoryThought,\r\n  BayesianThought,\r\n  FirstPrinciplesThought,\r\n  isMetaReasoningThought,\r\n  HybridThought,\r\n  // Sprint 1: Visual export integration types\r\n  SequentialThought,\r\n  ShannonThought,\r\n  AbductiveThought,\r\n  CounterfactualThought,\r\n  AnalogicalThought,\r\n  EvidentialThought,\r\n  SystemsThinkingThought,\r\n  ScientificMethodThought,\r\n  OptimizationThought,\r\n  FormalLogicThought,\r\n} from '../types/index.js';\r\nimport type { MathematicsThought } from '../types/modes/mathematics.js';\r\nimport type { PhysicsThought } from '../types/modes/physics.js';\r\nimport type { MetaReasoningThought } from '../types/modes/metareasoning.js';\r\nimport type { EngineeringThought } from '../types/modes/engineering.js';\r\nimport { VisualExporter, type VisualFormat } from '../export/visual/index.js';\r\nimport { escapeHtml, escapeLatex } from '../utils/sanitization.js';\r\nimport { ILogger } from '../interfaces/ILogger.js';\r\nimport { createLogger, LogLevel } from '../utils/logger.js';\r\n\r\n/**\r\n * Export Service - Handles session exports to multiple formats\r\n *\r\n * Provides a unified interface for exporting thinking sessions to\r\n * various formats including text (JSON, Markdown), document (LaTeX, HTML),\r\n * notebook (Jupyter), and visual (Mermaid, DOT, ASCII).\r\n *\r\n * @example\r\n * ```typescript\r\n * const exportService = new ExportService();\r\n * const markdown = exportService.exportSession(session, 'markdown');\r\n * const jupyter = exportService.exportSession(session, 'jupyter');\r\n * ```\r\n */\r\nexport class ExportService {\r\n  private visualExporter: VisualExporter;\r\n  private logger: ILogger;\r\n\r\n  constructor(logger?: ILogger) {\r\n    this.visualExporter = new VisualExporter();\r\n    this.logger = logger || createLogger({ minLevel: LogLevel.INFO, enableConsole: true });\r\n  }\r\n\r\n  /**\r\n   * Export a session to the specified format\r\n   *\r\n   * Main export method that routes to format-specific exporters.\r\n   * Handles both standard formats (JSON, Markdown, etc.) and visual\r\n   * formats (Mermaid, DOT, ASCII).\r\n   *\r\n   * @param session - The session to export\r\n   * @param format - The desired export format\r\n   * @returns Formatted string in the requested format\r\n   * @throws {Error} If session has no thoughts for visual exports\r\n   *\r\n   * @example\r\n   * ```typescript\r\n   * const service = new ExportService();\r\n   * const exported = service.exportSession(session, 'markdown');\r\n   * ```\r\n   */\r\n  exportSession(\r\n    session: ThinkingSession,\r\n    format: 'json' | 'markdown' | 'latex' | 'html' | 'jupyter' | 'mermaid' | 'dot' | 'ascii' | 'svg' | 'graphml' | 'tikz' | 'modelica' | 'uml' | 'visual-json' | 'visual-markdown'\r\n  ): string {\r\n    const startTime = Date.now();\r\n    this.logger.debug('Export started', { sessionId: session.id, format, thoughtCount: session.thoughts.length });\r\n\r\n    // Handle visual formats (including SVG, GraphML, TikZ, Modelica, HTML, UML, JSON graph, Markdown)\r\n    if (format === 'mermaid' || format === 'dot' || format === 'ascii' || format === 'svg' || format === 'graphml' || format === 'tikz' || format === 'modelica' || format === 'html' || format === 'uml' || format === 'visual-json' || format === 'visual-markdown') {\r\n      // Map 'visual-json' and 'visual-markdown' to their VisualFormat equivalents\r\n      const visualFormat = format === 'visual-json' ? 'json' : format === 'visual-markdown' ? 'markdown' : format;\r\n      const result = this.exportVisual(session, visualFormat as VisualFormat);\r\n      this.logger.debug('Export completed', {\r\n        sessionId: session.id,\r\n        format,\r\n        duration: Date.now() - startTime,\r\n        outputSize: result.length,\r\n      });\r\n      return result;\r\n    }\r\n\r\n    // Handle standard formats\r\n    let result: string;\r\n    switch (format) {\r\n      case 'json':\r\n        result = this.exportToJSON(session);\r\n        break;\r\n      case 'markdown':\r\n        result = this.exportToMarkdown(session);\r\n        break;\r\n      case 'latex':\r\n        result = this.exportToLatex(session);\r\n        break;\r\n      case 'jupyter':\r\n        result = this.exportToJupyter(session);\r\n        break;\r\n      default:\r\n        // Fallback to JSON for unknown formats\r\n        result = this.exportToJSON(session);\r\n    }\r\n\r\n    this.logger.debug('Export completed', {\r\n      sessionId: session.id,\r\n      format,\r\n      duration: Date.now() - startTime,\r\n      outputSize: result.length,\r\n    });\r\n\r\n    return result;\r\n  }\r\n\r\n  /**\r\n   * Export session to visual format (Mermaid, DOT, ASCII)\r\n   *\r\n   * Uses VisualExporter to generate visual representations\r\n   * based on the session's thinking mode and thought structure.\r\n   *\r\n   * @param session - The session to export\r\n   * @param format - Visual format (mermaid, dot, ascii)\r\n   * @returns Visual representation as string\r\n   * @throws {Error} If session has no thoughts\r\n   */\r\n  private exportVisual(session: ThinkingSession, format: VisualFormat): string {\r\n    const lastThought = session.thoughts[session.thoughts.length - 1];\r\n\r\n    if (!lastThought) {\r\n      throw new Error('No thoughts in session to export');\r\n    }\r\n\r\n    // Determine which visual export method to use based on mode\r\n    if (lastThought.mode === 'causal' && 'causalGraph' in lastThought) {\r\n      return this.visualExporter.exportCausalGraph(lastThought as CausalThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === 'temporal' && 'timeline' in lastThought) {\r\n      return this.visualExporter.exportTemporalTimeline(lastThought as TemporalThought, {\r\n        format,\r\n        includeLabels: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === 'gametheory' && 'game' in lastThought) {\r\n      return this.visualExporter.exportGameTree(lastThought as GameTheoryThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === 'bayesian' && 'hypothesis' in lastThought) {\r\n      return this.visualExporter.exportBayesianNetwork(lastThought as BayesianThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.FIRSTPRINCIPLES && 'question' in lastThought) {\r\n      return this.visualExporter.exportFirstPrinciplesDerivation(lastThought as FirstPrinciplesThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n      });\r\n    }\r\n\r\n    // Sprint 1: Integration of 10 existing visual exporters\r\n\r\n    if (lastThought.mode === ThinkingMode.SEQUENTIAL && 'buildUpon' in lastThought) {\r\n      return this.visualExporter.exportSequentialDependencyGraph(lastThought as SequentialThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.SHANNON && 'stage' in lastThought) {\r\n      return this.visualExporter.exportShannonStageFlow(lastThought as ShannonThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.ABDUCTIVE && 'hypotheses' in lastThought) {\r\n      return this.visualExporter.exportAbductiveHypotheses(lastThought as AbductiveThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.COUNTERFACTUAL && 'scenarios' in lastThought) {\r\n      return this.visualExporter.exportCounterfactualScenarios(lastThought as CounterfactualThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.ANALOGICAL && 'sourceAnalogy' in lastThought) {\r\n      return this.visualExporter.exportAnalogicalMapping(lastThought as AnalogicalThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.EVIDENTIAL && 'frameOfDiscernment' in lastThought) {\r\n      return this.visualExporter.exportEvidentialBeliefs(lastThought as EvidentialThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.SYSTEMSTHINKING && 'systemComponents' in lastThought) {\r\n      return this.visualExporter.exportSystemsThinkingCausalLoops(lastThought as SystemsThinkingThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.SCIENTIFICMETHOD && 'hypothesis' in lastThought) {\r\n      return this.visualExporter.exportScientificMethodExperiment(lastThought as ScientificMethodThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.OPTIMIZATION && 'objectiveFunction' in lastThought) {\r\n      return this.visualExporter.exportOptimizationSolution(lastThought as OptimizationThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.FORMALLOGIC && 'premises' in lastThought) {\r\n      return this.visualExporter.exportFormalLogicProof(lastThought as FormalLogicThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    // Sprint 2: Integration of 4 new visual exporters\r\n\r\n    if (lastThought.mode === ThinkingMode.MATHEMATICS && 'proofStrategy' in lastThought) {\r\n      return this.visualExporter.exportMathematicsDerivation(lastThought as MathematicsThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.PHYSICS && 'tensorProperties' in lastThought) {\r\n      return this.visualExporter.exportPhysicsVisualization(lastThought as PhysicsThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.HYBRID && 'primaryMode' in lastThought) {\r\n      return this.visualExporter.exportHybridOrchestration(lastThought as HybridThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    if (lastThought.mode === ThinkingMode.METAREASONING && 'currentStrategy' in lastThought) {\r\n      return this.visualExporter.exportMetaReasoningVisualization(lastThought as MetaReasoningThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    // Phase 10: Engineering analysis visual export\r\n    if (lastThought.mode === ThinkingMode.ENGINEERING && 'analysisType' in lastThought) {\r\n      return this.visualExporter.exportEngineeringAnalysis(lastThought as EngineeringThought, {\r\n        format,\r\n        colorScheme: 'default',\r\n        includeLabels: true,\r\n        includeMetrics: true,\r\n      });\r\n    }\r\n\r\n    // Generic thought sequence export for modes without specific visual exporters\n    return this.exportGenericThoughtSequence(session, format);\n  }\n\n  /**\n   * Export a generic thought sequence diagram for any mode\n   * Creates a flowchart showing the thought progression\n   */\n  private exportGenericThoughtSequence(session: ThinkingSession, format: VisualFormat): string {\n    const thoughts = session.thoughts;\n    const title = (session.title || 'Thinking Session').replace(/\"/g, \"'\");\n    const mode = session.mode;\n\n    if (format === 'mermaid') {\n      let diagram = 'flowchart TD\\n';\n      diagram += `    subgraph \"${title}\"\\n`;\n      diagram += '    direction TB\\n';\n      diagram += `    SESSION[\"Session: ${mode}<br/>${thoughts.length} thoughts\"]\\n`;\n\n      for (let i = 0; i < thoughts.length; i++) {\n        const t = thoughts[i];\n        const truncated = t.content.length > 50\n          ? t.content.substring(0, 47).replace(/\"/g, \"'\").replace(/\\n/g, ' ') + '...'\n          : t.content.replace(/\"/g, \"'\").replace(/\\n/g, ' ');\n        const status = t.nextThoughtNeeded ? '...' : 'Done';\n        diagram += `    T${i + 1}[\"Thought ${i + 1} [${status}]<br/>${truncated}\"]\\n`;\n      }\n\n      diagram += '    SESSION --> T1\\n';\n      for (let i = 1; i < thoughts.length; i++) {\n        diagram += `    T${i} --> T${i + 1}\\n`;\n      }\n\n      const lastT = thoughts[thoughts.length - 1];\n      if (lastT && !lastT.nextThoughtNeeded) {\n        diagram += `    T${thoughts.length} --> COMPLETE[\"Complete\"]\\n`;\n      }\n\n      diagram += '    end\\n';\n      return diagram;\n    }\n\n    if (format === 'dot') {\n      let dot = 'digraph ThinkingSession {\\n';\n      dot += '    rankdir=TB;\\n';\n      dot += '    node [shape=box, style=rounded];\\n';\n      dot += `    label=\"${title} (${mode})\";\\n\\n`;\n\n      for (let i = 0; i < thoughts.length; i++) {\n        const t = thoughts[i];\n        const truncated = t.content.length > 40\n          ? t.content.substring(0, 37).replace(/\"/g, '\\\\\"').replace(/\\n/g, ' ') + '...'\n          : t.content.replace(/\"/g, '\\\\\"').replace(/\\n/g, ' ');\n        dot += `    T${i + 1} [label=\"Thought ${i + 1}\\\\n${truncated}\"];\\n`;\n      }\n\n      for (let i = 1; i < thoughts.length; i++) {\n        dot += `    T${i} -> T${i + 1};\\n`;\n      }\n\n      dot += '}\\n';\n      return dot;\n    }\n\n    if (format === 'ascii') {\n      const bar = ''.repeat(50);\n      let ascii = `${bar}\\n`;\n      ascii += ` ${title.substring(0, 48).padEnd(48)} \\n`;\n      ascii += ` Mode: ${mode.padEnd(42)} \\n`;\n      ascii += `${bar}\\n`;\n\n      for (let i = 0; i < thoughts.length; i++) {\n        const t = thoughts[i];\n        const status = t.nextThoughtNeeded ? '[]' : '[]';\n        const truncated = t.content.substring(0, 35).replace(/\\n/g, ' ');\n        ascii += ` ${status} Thought ${i + 1}: ${truncated.padEnd(35)} \\n`;\n        if (i < thoughts.length - 1) {\n          ascii += '                                                   \\n';\n          ascii += '                                                   \\n';\n        }\n      }\n\n      ascii += `${bar}\\n`;\n      return ascii;\n    }\n\n    // Fallback for other visual formats\n    const thoughtsText = thoughts.map((t, i) =>\n      `Thought ${i + 1} (${t.mode}):\\n${t.content}\\n`\n    ).join('\\n');\n\n    return `Session: ${title}\\nMode: ${mode}\\n\\n${thoughtsText}`;\n  }\n\r\n\r\n  /**\r\n   * Export session to JSON format\r\n   *\r\n   * Converts the session to JSON, handling Map serialization.\r\n   *\r\n   * @param session - The session to export\r\n   * @returns JSON string with pretty printing\r\n   */\r\n  private exportToJSON(session: ThinkingSession): string {\r\n    // Convert Map to Object for JSON serialization\r\n    const sessionWithCustomMetrics = {\r\n      ...session,\r\n      metrics: {\r\n        ...session.metrics,\r\n        customMetrics: Object.fromEntries(session.metrics.customMetrics),\r\n      },\r\n    };\r\n\r\n    return JSON.stringify(sessionWithCustomMetrics, null, 2);\r\n  }\r\n\r\n  /**\r\n   * Export session to Markdown format\r\n   *\r\n   * Creates a human-readable Markdown document with session details\r\n   * and all thoughts formatted as sections.\r\n   *\r\n   * @param session - The session to export\r\n   * @returns Markdown-formatted string\r\n   */\r\n  private exportToMarkdown(session: ThinkingSession): string {\r\n    const status = session.isComplete ? 'Complete' : 'In Progress';\r\n    let md = `# Thinking Session: ${session.title}\\n\\n`;\r\n    md += `**Mode**: ${session.mode}\\n`;\r\n    md += `**Created**: ${session.createdAt.toISOString()}\\n`;\r\n    md += `**Status**: ${status}\\n\\n`;\r\n    md += `## Thoughts\\n\\n`;\r\n\r\n    for (const thought of session.thoughts) {\r\n      md += `### Thought ${thought.thoughtNumber}/${session.thoughts.length}\\n\\n`;\r\n      md += `${thought.content}\\n\\n`;\r\n\r\n      // Display meta-reasoning insights if this is a meta-reasoning thought\r\n      if (isMetaReasoningThought(thought)) {\r\n        md += `####  Meta-Reasoning Analysis\\n\\n`;\r\n\r\n        // Current Strategy\r\n        md += `**Current Strategy:**\\n`;\r\n        md += `- Mode: ${thought.currentStrategy.mode}\\n`;\r\n        md += `- Approach: ${thought.currentStrategy.approach}\\n`;\r\n        md += `- Thoughts Spent: ${thought.currentStrategy.thoughtsSpent}\\n`;\r\n        if (thought.currentStrategy.progressIndicators.length > 0) {\r\n          md += `- Progress: ${thought.currentStrategy.progressIndicators.join(', ')}\\n`;\r\n        }\r\n        md += `\\n`;\r\n\r\n        // Strategy Evaluation\r\n        md += `**Strategy Evaluation:**\\n`;\r\n        md += `- Effectiveness: ${(thought.strategyEvaluation.effectiveness * 100).toFixed(1)}%\\n`;\r\n        md += `- Efficiency: ${(thought.strategyEvaluation.efficiency * 100).toFixed(1)}%\\n`;\r\n        md += `- Confidence: ${(thought.strategyEvaluation.confidence * 100).toFixed(1)}%\\n`;\r\n        md += `- Quality Score: ${(thought.strategyEvaluation.qualityScore * 100).toFixed(1)}%\\n`;\r\n        if (thought.strategyEvaluation.issues.length > 0) {\r\n          md += `- Issues: ${thought.strategyEvaluation.issues.join('; ')}\\n`;\r\n        }\r\n        if (thought.strategyEvaluation.strengths.length > 0) {\r\n          md += `- Strengths: ${thought.strategyEvaluation.strengths.join('; ')}\\n`;\r\n        }\r\n        md += `\\n`;\r\n\r\n        // Recommendation\r\n        md += `**Recommendation:** ${thought.recommendation.action}\\n`;\r\n        md += `- ${thought.recommendation.justification}\\n`;\r\n        md += `- Confidence: ${(thought.recommendation.confidence * 100).toFixed(1)}%\\n`;\r\n        md += `- Expected Improvement: ${thought.recommendation.expectedImprovement}\\n`;\r\n\r\n        // Alternative Strategies\r\n        if (thought.alternativeStrategies.length > 0) {\r\n          md += `\\n**Alternative Strategies:**\\n`;\r\n          for (const alt of thought.alternativeStrategies) {\r\n            md += `- **${alt.mode}** (score: ${(alt.recommendationScore * 100).toFixed(0)}%): ${alt.reasoning}\\n`;\r\n          }\r\n        }\r\n\r\n        // Quality Metrics\r\n        md += `\\n**Quality Metrics:**\\n`;\r\n        md += `- Logical Consistency: ${(thought.qualityMetrics.logicalConsistency * 100).toFixed(1)}%\\n`;\r\n        md += `- Evidence Quality: ${(thought.qualityMetrics.evidenceQuality * 100).toFixed(1)}%\\n`;\r\n        md += `- Completeness: ${(thought.qualityMetrics.completeness * 100).toFixed(1)}%\\n`;\r\n        md += `- Originality: ${(thought.qualityMetrics.originality * 100).toFixed(1)}%\\n`;\r\n        md += `- Clarity: ${(thought.qualityMetrics.clarity * 100).toFixed(1)}%\\n`;\r\n        md += `- Overall Quality: ${(thought.qualityMetrics.overallQuality * 100).toFixed(1)}%\\n`;\r\n        md += `\\n`;\r\n      }\r\n    }\r\n\r\n    return md;\r\n  }\r\n\r\n  /**\r\n   * Export session to LaTeX format\r\n   *\r\n   * Generates a LaTeX document with proper escaping for special characters.\r\n   * Ready for compilation with pdflatex.\r\n   *\r\n   * @param session - The session to export\r\n   * @returns LaTeX document as string\r\n   */\r\n  private exportToLatex(session: ThinkingSession): string {\r\n    const status = session.isComplete ? 'Complete' : 'In Progress';\r\n    const safeTitle = escapeLatex(session.title);\r\n    const safeMode = escapeLatex(session.mode);\r\n    const safeStatus = escapeLatex(status);\r\n\r\n    let latex = `\\\\documentclass{article}\\n`;\r\n    latex += `\\\\usepackage[utf8]{inputenc}\\n`;\r\n    latex += `\\\\title{${safeTitle}}\\n`;\r\n    latex += `\\\\begin{document}\\n`;\r\n    latex += `\\\\maketitle\\n\\n`;\r\n    latex += `\\\\section{Session Details}\\n`;\r\n    latex += `Mode: ${safeMode}\\\\\\\\\\n`;\r\n    latex += `Status: ${safeStatus}\\\\\\\\\\n\\n`;\r\n    latex += `\\\\section{Thoughts}\\n`;\r\n\r\n    for (const thought of session.thoughts) {\r\n      latex += `\\\\subsection{Thought ${thought.thoughtNumber}}\\n`;\r\n      latex += `${escapeLatex(thought.content)}\\n\\n`;\r\n    }\r\n\r\n    latex += `\\\\end{document}\\n`;\r\n    return latex;\r\n  }\r\n\r\n  /**\r\n   * Export session to HTML format\r\n   *\r\n   * Generates a standalone HTML page with XSS protection via escaping.\r\n   * Includes basic styling for readability.\r\n   *\r\n   * Note: Currently unused as HTML export is handled by visual exporters.\r\n   * Kept for potential future use as a session-level HTML export.\r\n   *\r\n   * @param session - The session to export\r\n   * @returns HTML document as string\r\n   */\r\n  // @ts-expect-error - Unused method kept for future use\r\n  private exportToHTML(session: ThinkingSession): string {\r\n    const status = session.isComplete ? 'Complete' : 'In Progress';\r\n    const safeTitle = escapeHtml(session.title);\r\n    const safeMode = escapeHtml(session.mode);\r\n    const safeStatus = escapeHtml(status);\r\n\r\n    let html = `<!DOCTYPE html>\\n<html>\\n<head>\\n`;\r\n    html += `  <meta charset=\"UTF-8\">\\n`;\r\n    html += `  <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\">\\n`;\r\n    html += `  <title>${safeTitle}</title>\\n`;\r\n    html += `  <style>body { font-family: Arial, sans-serif; max-width: 800px; margin: 50px auto; padding: 0 20px; }</style>\\n`;\r\n    html += `</head>\\n<body>\\n`;\r\n    html += `  <h1>${safeTitle}</h1>\\n`;\r\n    html += `  <p><strong>Mode:</strong> ${safeMode}</p>\\n`;\r\n    html += `  <p><strong>Status:</strong> ${safeStatus}</p>\\n`;\r\n    html += `  <h2>Thoughts</h2>\\n`;\r\n\r\n    for (const thought of session.thoughts) {\r\n      html += `  <div>\\n`;\r\n      html += `    <h3>Thought ${thought.thoughtNumber}/${session.thoughts.length}</h3>\\n`;\r\n      html += `    <p>${escapeHtml(thought.content)}</p>\\n`;\r\n      html += `  </div>\\n`;\r\n    }\r\n\r\n    html += `</body>\\n</html>\\n`;\r\n    return html;\r\n  }\r\n\r\n  /**\r\n   * Export session to Jupyter Notebook format\r\n   *\r\n   * Creates a .ipynb file structure with Markdown cells for each thought.\r\n   * Compatible with Jupyter Notebook and JupyterLab.\r\n   *\r\n   * @param session - The session to export\r\n   * @returns JSON string representing Jupyter notebook\r\n   */\r\n  private exportToJupyter(session: ThinkingSession): string {\r\n    const status = session.isComplete ? 'Complete' : 'In Progress';\r\n\r\n    interface JupyterCell {\r\n      cell_type: 'markdown' | 'code';\r\n      metadata: Record<string, unknown>;\r\n      source: string[];\r\n    }\r\n\r\n    interface JupyterNotebook {\r\n      cells: JupyterCell[];\r\n      metadata: Record<string, unknown>;\r\n      nbformat: number;\r\n      nbformat_minor: number;\r\n    }\r\n\r\n    const notebook: JupyterNotebook = {\r\n      cells: [],\r\n      metadata: {},\r\n      nbformat: 4,\r\n      nbformat_minor: 2,\r\n    };\r\n\r\n    // Add title cell\r\n    notebook.cells.push({\r\n      cell_type: 'markdown',\r\n      metadata: {},\r\n      source: [\r\n        `# Thinking Session: ${session.title}\\n`,\r\n        `\\n`,\r\n        `**Mode**: ${session.mode}\\n`,\r\n        `**Status**: ${status}\\n`,\r\n      ],\r\n    });\r\n\r\n    // Add thought cells\r\n    for (const thought of session.thoughts) {\r\n      notebook.cells.push({\r\n        cell_type: 'markdown',\r\n        metadata: {},\r\n        source: [\r\n          `## Thought ${thought.thoughtNumber}/${session.thoughts.length}\\n`,\r\n          `\\n`,\r\n          `${thought.content}\\n`,\r\n        ],\r\n      });\r\n    }\r\n\r\n    return JSON.stringify(notebook, null, 2);\r\n  }\r\n}\r\n","/**\n * Mode Router Service (v6.0.0)\n * Sprint 3 Task 3.3: Extract mode management logic from index.ts\n * Sprint 3 Task 3.2: Added dependency injection support\n * Phase 6 Sprint 2: Integrated with MetaMonitor for adaptive mode switching\n *\n * Handles thinking mode operations including mode switching and recommendations.\n * Provides intelligent mode selection based on problem characteristics.\n * Uses meta-reasoning insights to suggest optimal mode transitions.\n *\n * RESPONSIBILITY:\n * - Switch sessions between thinking modes with meta-reasoning evaluation\n * - Recommend optimal modes for problem types\n * - Provide adaptive mode switching suggestions based on session performance\n * - Format mode recommendation responses\n *\n * EXTRACTED FROM: src/index.ts (handleSwitchMode, handleRecommendMode)\n */\n\nimport { ThinkingMode, ModeRecommender, ProblemCharacteristics } from '../types/index.js';\nimport { SessionManager } from '../session/index.js';\nimport { ILogger } from '../interfaces/ILogger.js';\nimport { createLogger, LogLevel } from '../utils/logger.js';\nimport { metaMonitor, MetaMonitor } from './MetaMonitor.js';\n\n/**\n * Mode recommendation result for formatting\n */\nexport interface ModeRecommendation {\n  mode: string;\n  score: number;\n  reasoning: string;\n  strengths: string[];\n  limitations: string[];\n  examples: string[];\n}\n\n/**\n * Mode combination recommendation\n */\nexport interface ModeCombinationRecommendation {\n  modes: string[];\n  sequence: string;\n  rationale: string;\n  benefits: string[];\n  synergies: string[];\n}\n\n/**\n * Mode Router - Manages thinking mode operations\n *\n * Centralizes mode-related functionality including switching between\n * modes within a session and providing intelligent recommendations\n * based on problem characteristics.\n *\n * @example\n * ```typescript\n * const router = new ModeRouter(sessionManager);\n *\n * // Switch mode\n * await router.switchMode('session-123', ThinkingMode.MATHEMATICS, 'Better for this problem');\n *\n * // Get recommendations\n * const recommendations = router.recommendModes({ requiresProof: true, hasQuantities: true });\n * ```\n */\nexport class ModeRouter {\n  private sessionManager: SessionManager;\n  private recommender: ModeRecommender;\n  private logger: ILogger;\n  private monitor: MetaMonitor;\n\n  /**\n   * Create a new ModeRouter\n   *\n   * @param sessionManager - Session manager instance for mode switching\n   * @param logger - Optional logger for dependency injection\n   * @param monitor - Optional MetaMonitor instance for dependency injection\n   *\n   * @example\n   * ```typescript\n   * const router = new ModeRouter(sessionManager);\n   * // Or with DI:\n   * const router = new ModeRouter(sessionManager, customLogger, customMonitor);\n   * ```\n   */\n  constructor(sessionManager: SessionManager, logger?: ILogger, monitor?: MetaMonitor) {\n    this.sessionManager = sessionManager;\n    this.recommender = new ModeRecommender();\n    this.logger = logger || createLogger({ minLevel: LogLevel.INFO, enableConsole: true });\n    this.monitor = monitor || metaMonitor;\n  }\n\n  /**\n   * Switch a session to a new thinking mode\n   *\n   * Changes the thinking mode of an active session while preserving\n   * existing thoughts. Useful when the problem characteristics change\n   * or initial mode selection was suboptimal.\n   *\n   * @param sessionId - ID of the session to switch\n   * @param newMode - The new thinking mode to use\n   * @param reason - Reason for the mode switch (for logging)\n   * @returns The updated session\n   * @throws {Error} If session not found\n   *\n   * @example\n   * ```typescript\n   * const session = await router.switchMode(\n   *   'session-123',\n   *   ThinkingMode.MATHEMATICS,\n   *   'Problem requires mathematical proof'\n   * );\n   * ```\n   */\n  async switchMode(\n    sessionId: string,\n    newMode: ThinkingMode,\n    reason: string\n  ) {\n    this.logger.info('Switching mode', {\n      sessionId,\n      newMode,\n      reason,\n    });\n    const session = await this.sessionManager.switchMode(sessionId, newMode, reason);\n    this.logger.debug('Mode switch completed', {\n      sessionId,\n      newMode,\n      thoughtCount: session.thoughts.length,\n    });\n    return session;\n  }\n\n  /**\n   * Get quick mode recommendation based on problem type\n   *\n   * Provides a fast, single-mode recommendation based on a simple\n   * problem type string. Useful for quick suggestions without detailed\n   * problem analysis.\n   *\n   * @param problemType - Simple problem type description\n   * @returns Recommended thinking mode\n   *\n   * @example\n   * ```typescript\n   * const mode = router.quickRecommend('mathematical proof');\n   * // Returns: ThinkingMode.MATHEMATICS\n   * ```\n   */\n  quickRecommend(problemType: string): ThinkingMode {\n    this.logger.debug('Quick recommend requested', { problemType });\n    const mode = this.recommender.quickRecommend(problemType);\n    this.logger.debug('Quick recommend result', { problemType, recommendedMode: mode });\n    return mode;\n  }\n\n  /**\n   * Get comprehensive mode recommendations\n   *\n   * Analyzes problem characteristics and returns ranked recommendations\n   * for individual modes and optionally mode combinations.\n   *\n   * @param characteristics - Detailed problem characteristics\n   * @param includeCombinations - Whether to include mode combinations\n   * @returns Formatted recommendation response\n   *\n   * @example\n   * ```typescript\n   * const response = router.getRecommendations({\n   *   requiresProof: true,\n   *   hasQuantities: true,\n   *   hasUncertainty: false\n   * }, true);\n   * ```\n   */\n  getRecommendations(\n    characteristics: ProblemCharacteristics,\n    includeCombinations: boolean = false\n  ): string {\n    this.logger.debug('Getting mode recommendations', {\n      characteristics,\n      includeCombinations,\n    });\n\n    const modeRecs = this.recommender.recommendModes(characteristics);\n    const combinationRecs = includeCombinations\n      ? this.recommender.recommendCombinations(characteristics)\n      : [];\n\n    this.logger.debug('Recommendations generated', {\n      modeCount: modeRecs.length,\n      combinationCount: combinationRecs.length,\n      topMode: modeRecs[0]?.mode,\n      topScore: modeRecs[0]?.score,\n    });\n\n    let response = '# Mode Recommendations\\n\\n';\n\n    // Single mode recommendations\n    response += '## Individual Modes\\n\\n';\n    for (const rec of modeRecs) {\n      response += `### ${rec.mode} (Score: ${rec.score})\\n`;\n      response += `**Reasoning**: ${rec.reasoning}\\n\\n`;\n      response += `**Strengths**:\\n`;\n      for (const strength of rec.strengths) {\n        response += `- ${strength}\\n`;\n      }\n      response += `\\n**Limitations**:\\n`;\n      for (const limitation of rec.limitations) {\n        response += `- ${limitation}\\n`;\n      }\n      response += `\\n**Examples**: ${rec.examples.join(', ')}\\n\\n`;\n      response += '---\\n\\n';\n    }\n\n    // Mode combinations\n    if (combinationRecs.length > 0) {\n      response += '## Recommended Mode Combinations\\n\\n';\n      for (const combo of combinationRecs) {\n        response += `### ${combo.modes.join(' + ')} (${combo.sequence})\\n`;\n        response += `**Rationale**: ${combo.rationale}\\n\\n`;\n        response += `**Benefits**:\\n`;\n        for (const benefit of combo.benefits) {\n          response += `- ${benefit}\\n`;\n        }\n        response += `\\n**Synergies**:\\n`;\n        for (const synergy of combo.synergies) {\n          response += `- ${synergy}\\n`;\n        }\n        response += '\\n---\\n\\n';\n      }\n    }\n\n    return response;\n  }\n\n  /**\n   * Format a quick recommendation response\n   *\n   * Creates a formatted response for quick recommendations.\n   *\n   * @param problemType - The problem type that was analyzed\n   * @param recommendedMode - The recommended mode\n   * @returns Formatted response string\n   */\n  formatQuickRecommendation(problemType: string, recommendedMode: ThinkingMode): string {\n    return `Quick recommendation for \"${problemType}\":\\n\\n**Recommended Mode**: ${recommendedMode}\\n\\nFor more detailed recommendations, provide problemCharacteristics.`;\n  }\n\n  /**\n   * Evaluate current session and suggest mode switch if beneficial\n   *\n   * Uses meta-reasoning to evaluate the current strategy effectiveness\n   * and suggest alternative modes if the current approach is suboptimal.\n   *\n   * @param sessionId - Session to evaluate\n   * @param problemType - Optional problem type for context\n   * @returns Evaluation result with switch recommendation\n   *\n   * @example\n   * ```typescript\n   * const evaluation = await router.evaluateAndSuggestSwitch('session-123', 'debugging');\n   * if (evaluation.shouldSwitch) {\n   *   await router.switchMode(sessionId, evaluation.suggestedMode!, evaluation.reasoning);\n   * }\n   * ```\n   */\n  async evaluateAndSuggestSwitch(sessionId: string, problemType: string = 'general'): Promise<{\n    currentEvaluation: ReturnType<MetaMonitor['evaluateStrategy']>;\n    shouldSwitch: boolean;\n    suggestedMode?: ThinkingMode;\n    reasoning: string;\n    alternatives: ReturnType<MetaMonitor['suggestAlternatives']>;\n  }> {\n    this.logger.debug('Evaluating session for potential mode switch', { sessionId, problemType });\n\n    // Get current strategy evaluation\n    const evaluation = this.monitor.evaluateStrategy(sessionId);\n\n    // Get alternative strategies\n    const session = await this.sessionManager.getSession(sessionId);\n    const currentMode = session?.mode || ThinkingMode.SEQUENTIAL;\n    const alternatives = this.monitor.suggestAlternatives(sessionId, currentMode);\n\n    // Determine if switch is beneficial\n    // Switch if effectiveness < 0.4 OR (effectiveness < 0.6 AND alternatives score > 0.75)\n    const shouldSwitch =\n      evaluation.effectiveness < 0.4 ||\n      (evaluation.effectiveness < 0.6 && alternatives.length > 0 && alternatives[0].recommendationScore > 0.75);\n\n    const suggestedMode = shouldSwitch && alternatives.length > 0\n      ? alternatives[0].mode\n      : undefined;\n\n    const reasoning = shouldSwitch\n      ? `Current strategy effectiveness: ${(evaluation.effectiveness * 100).toFixed(1)}%. ${alternatives[0]?.reasoning || 'Consider switching modes.'}`\n      : `Current strategy performing adequately (effectiveness: ${(evaluation.effectiveness * 100).toFixed(1)}%). Continue with current mode.`;\n\n    this.logger.debug('Mode switch evaluation completed', {\n      sessionId,\n      shouldSwitch,\n      suggestedMode,\n      currentEffectiveness: evaluation.effectiveness,\n    });\n\n    return {\n      currentEvaluation: evaluation,\n      shouldSwitch,\n      suggestedMode,\n      reasoning,\n      alternatives,\n    };\n  }\n\n  /**\n   * Auto-switch mode if current strategy is failing\n   *\n   * Automatically evaluates and switches modes if the current approach\n   * is demonstrably ineffective (effectiveness < 0.3).\n   *\n   * @param sessionId - Session to evaluate\n   * @param problemType - Optional problem type for context\n   * @returns Switch result with details\n   *\n   * @example\n   * ```typescript\n   * const result = await router.autoSwitchIfNeeded('session-123', 'complex-problem');\n   * console.log(result.switched ? 'Switched to' + result.newMode : 'No switch needed');\n   * ```\n   */\n  async autoSwitchIfNeeded(sessionId: string, problemType: string = 'general'): Promise<{\n    switched: boolean;\n    oldMode?: ThinkingMode;\n    newMode?: ThinkingMode;\n    reasoning: string;\n    evaluation: ReturnType<MetaMonitor['evaluateStrategy']>;\n  }> {\n    this.logger.debug('Auto-switch evaluation', { sessionId, problemType });\n\n    const evaluation = await this.evaluateAndSuggestSwitch(sessionId, problemType);\n\n    // Only auto-switch if effectiveness is very low (< 0.3) to avoid thrashing\n    const autoSwitchThreshold = 0.3;\n    if (evaluation.currentEvaluation.effectiveness < autoSwitchThreshold && evaluation.suggestedMode) {\n      const session = await this.sessionManager.getSession(sessionId);\n      const oldMode = session?.mode || ThinkingMode.SEQUENTIAL;\n\n      await this.switchMode(sessionId, evaluation.suggestedMode, evaluation.reasoning);\n\n      this.logger.info('Auto-switched mode due to low effectiveness', {\n        sessionId,\n        oldMode,\n        newMode: evaluation.suggestedMode,\n        effectiveness: evaluation.currentEvaluation.effectiveness,\n      });\n\n      return {\n        switched: true,\n        oldMode,\n        newMode: evaluation.suggestedMode,\n        reasoning: evaluation.reasoning,\n        evaluation: evaluation.currentEvaluation,\n      };\n    }\n\n    this.logger.debug('Auto-switch not needed', {\n      sessionId,\n      effectiveness: evaluation.currentEvaluation.effectiveness,\n      threshold: autoSwitchThreshold,\n    });\n\n    return {\n      switched: false,\n      reasoning: evaluation.reasoning,\n      evaluation: evaluation.currentEvaluation,\n    };\n  }\n}\n","/**\n * Services module exports (v3.4.5)\n * Sprint 3 Task 3.3: Service layer for business logic\n *\n * Exports all service classes extracted from the main index.ts file.\n * Services encapsulate business logic and provide clean, testable interfaces.\n */\n\nexport { ThoughtFactory, ThoughtFactoryConfig } from './ThoughtFactory.js';\nexport { ExportService } from './ExportService.js';\nexport { ModeRouter } from './ModeRouter.js';\n","#!/usr/bin/env node\r\n\r\n/**\r\n * DeepThinking MCP Server (v8.0.0)\r\n *\r\n * 33 advanced reasoning modes with ModeHandler pattern, meta-reasoning,\r\n * taxonomy classifier, enterprise security, and visual export capabilities.\r\n *\r\n * Tools:\r\n * - deepthinking_core: inductive, deductive, abductive modes\r\n * - deepthinking_standard: sequential, shannon, hybrid modes\r\n * - deepthinking_mathematics: mathematics, physics, computability modes\r\n * - deepthinking_temporal: temporal reasoning\r\n * - deepthinking_probabilistic: bayesian, evidential modes\r\n * - deepthinking_causal: causal, counterfactual modes\r\n * - deepthinking_strategic: gametheory, optimization modes\r\n * - deepthinking_analytical: analogical, firstprinciples, metareasoning, cryptanalytic modes\r\n * - deepthinking_scientific: scientificmethod, systemsthinking, formallogic modes\r\n * - deepthinking_engineering: engineering, algorithmic modes\r\n * - deepthinking_academic: synthesis, argumentation, critique, analysis modes\r\n * - deepthinking_session: summarize, export, get_session, switch_mode, recommend_mode\r\n */\r\n\r\nimport { Server } from '@modelcontextprotocol/sdk/server/index.js';\r\nimport { StdioServerTransport } from '@modelcontextprotocol/sdk/server/stdio.js';\r\nimport {\r\n  CallToolRequestSchema,\r\n  ListToolsRequestSchema,\r\n} from '@modelcontextprotocol/sdk/types.js';\r\nimport { readFileSync } from 'fs';\r\nimport { fileURLToPath } from 'url';\r\nimport { dirname, join } from 'path';\r\n\r\n// Import package.json for version sync\r\nconst __filename = fileURLToPath(import.meta.url);\r\nconst __dirname = dirname(__filename);\r\nconst packageJson = JSON.parse(\r\n  readFileSync(join(__dirname, '../package.json'), 'utf-8')\r\n);\r\n\r\n// Import new tool definitions and schemas\r\nimport { toolList, toolSchemas, isValidTool, modeToToolMap } from './tools/definitions.js';\r\nimport { thinkingTool } from './tools/thinking.js'; // Legacy tool for backward compatibility\r\nimport type { SessionManager } from './session/index.js';\r\nimport { ThinkingMode, isFullyImplemented } from './types/index.js';\r\nimport type { ThoughtFactory, ExportService, ModeRouter } from './services/index.js';\r\nimport { ModeHandlerRegistry } from './modes/index.js';\r\n\r\n// Initialize server\r\nconst server = new Server(\r\n  {\r\n    name: packageJson.name,\r\n    version: packageJson.version,\r\n  },\r\n  {\r\n    capabilities: {\r\n      tools: {},\r\n    },\r\n  }\r\n);\r\n\r\n/**\r\n * Lazy Service Initialization (Sprint 9.1)\r\n * Services are loaded on first use to reduce startup time\r\n */\r\nlet _sessionManager: SessionManager | null = null;\r\nlet _thoughtFactory: ThoughtFactory | null = null;\r\nlet _exportService: ExportService | null = null;\r\nlet _modeRouter: ModeRouter | null = null;\r\n\r\nasync function getSessionManager(): Promise<SessionManager> {\r\n  if (!_sessionManager) {\r\n    const { SessionManager } = await import('./session/index.js');\r\n\r\n    // Check for SESSION_DIR environment variable for multi-instance support\r\n    const sessionDir = process.env.SESSION_DIR;\r\n\r\n    if (sessionDir) {\r\n      // Use file-based storage with shared directory for multi-instance support\r\n      const { FileSessionStore } = await import('./session/storage/file-store.js');\r\n      const storage = new FileSessionStore(sessionDir);\r\n      await storage.initialize();\r\n      _sessionManager = new SessionManager({}, undefined, storage);\r\n      console.error(`[deepthinking-mcp] Using file-based session storage: ${sessionDir}`);\r\n    } else {\r\n      // Default: in-memory only (single instance)\r\n      _sessionManager = new SessionManager();\r\n    }\r\n  }\r\n  return _sessionManager;\r\n}\r\n\r\nasync function getThoughtFactory(): Promise<ThoughtFactory> {\r\n  if (!_thoughtFactory) {\r\n    const { ThoughtFactory } = await import('./services/index.js');\r\n    _thoughtFactory = new ThoughtFactory();\r\n  }\r\n  return _thoughtFactory;\r\n}\r\n\r\nasync function getExportService(): Promise<ExportService> {\r\n  if (!_exportService) {\r\n    const { ExportService } = await import('./services/index.js');\r\n    _exportService = new ExportService();\r\n  }\r\n  return _exportService;\r\n}\r\n\r\nasync function getModeRouter(): Promise<ModeRouter> {\r\n  if (!_modeRouter) {\r\n    const { ModeRouter } = await import('./services/index.js');\r\n    const sessionManager = await getSessionManager();\r\n    _modeRouter = new ModeRouter(sessionManager);\r\n  }\r\n  return _modeRouter;\r\n}\r\n\r\n// Register tool list handler - now returns all 9 focused tools + legacy\r\nserver.setRequestHandler(ListToolsRequestSchema, async () => {\r\n  return {\r\n    tools: [\r\n      ...toolList,      // 9 new focused tools\r\n      thinkingTool,     // Legacy tool for backward compatibility\r\n    ],\r\n  };\r\n});\r\n\r\n// Register tool call handler\r\nserver.setRequestHandler(CallToolRequestSchema, async (request) => {\r\n  const { name, arguments: args } = request.params;\r\n\r\n  try {\r\n    // Handle new focused tools\r\n    if (isValidTool(name)) {\r\n      const schema = toolSchemas[name as keyof typeof toolSchemas];\r\n      const input = schema.parse(args);\r\n\r\n      // Session action tool\r\n      if (name === 'deepthinking_session') {\r\n        return await handleSessionAction(input);\r\n      }\r\n\r\n      // All other tools are for adding thoughts\r\n      return await handleAddThought(input, name);\r\n    }\r\n\r\n    // Handle legacy tool (backward compatibility)\r\n    if (name === 'deepthinking') {\r\n      const { ThinkingToolSchema } = await import('./tools/thinking.js');\r\n      const input = ThinkingToolSchema.parse(args);\r\n\r\n      // Add deprecation warning\r\n      const deprecationWarning = ' DEPRECATED: The \"deepthinking\" tool is deprecated. ' +\r\n        'Use the focused tools instead: deepthinking_core, deepthinking_mathematics, ' +\r\n        'deepthinking_temporal, deepthinking_probabilistic, deepthinking_causal, ' +\r\n        'deepthinking_strategic, deepthinking_analytical, deepthinking_scientific, ' +\r\n        'deepthinking_session. See docs/migration/v4.0-tool-splitting.md for details.\\n\\n';\r\n\r\n      switch (input.action) {\r\n        case 'add_thought': {\r\n          const result = await handleAddThought(input, modeToToolMap[input.mode || 'hybrid'] || 'deepthinking_core');\r\n          return prependWarning(result, deprecationWarning);\r\n        }\r\n        case 'summarize':\r\n        case 'export':\r\n        case 'switch_mode':\r\n        case 'get_session':\r\n        case 'recommend_mode': {\r\n          const result = await handleSessionAction(input);\r\n          return prependWarning(result, deprecationWarning);\r\n        }\r\n        default:\r\n          throw new Error(`Unknown action: ${input.action}`);\r\n      }\r\n    }\r\n\r\n    throw new Error(`Unknown tool: ${name}`);\r\n  } catch (error) {\r\n    return {\r\n      content: [\r\n        {\r\n          type: 'text',\r\n          text: `Error: ${error instanceof Error ? error.message : String(error)}`,\r\n        },\r\n      ],\r\n      isError: true,\r\n    };\r\n  }\r\n});\r\n\r\n/**\r\n * Prepend a warning message to a tool result\r\n */\r\nfunction prependWarning(result: any, warning: string) {\r\n  if (result.content && result.content[0] && result.content[0].type === 'text') {\r\n    result.content[0].text = warning + result.content[0].text;\r\n  }\r\n  return result;\r\n}\r\n\r\n/**\r\n * Handle add_thought action for any thinking mode\r\n */\r\nasync function handleAddThought(input: any, _toolName: string) {\r\n  const sessionManager = await getSessionManager();\r\n  const thoughtFactory = await getThoughtFactory();\r\n\r\n  let sessionId = input.sessionId;\r\n\r\n  // Determine mode from tool name or input\r\n  const mode: ThinkingMode = input.mode || ThinkingMode.HYBRID;\r\n\r\n  // Create session if none provided\r\n  if (!sessionId) {\r\n    const session = await sessionManager.createSession({\r\n      mode: mode,\r\n      title: `Thinking Session ${new Date().toISOString()}`,\r\n    });\r\n    sessionId = session.id;\r\n  }\r\n\r\n  // Use ThoughtFactory to create thought\r\n  const thought = thoughtFactory.createThought({ ...input, mode }, sessionId);\r\n\r\n  const session = await sessionManager.addThought(sessionId, thought);\r\n\r\n  // Build response with analysis results if present\r\n  const registry = ModeHandlerRegistry.getInstance();\r\n  const modeStatus = {\r\n    mode: thought.mode,\r\n    isFullyImplemented: isFullyImplemented(thought.mode),\r\n    hasSpecializedHandler: registry.hasSpecializedHandler(thought.mode),\r\n    note: !isFullyImplemented(thought.mode)\r\n      ? 'This mode is experimental with limited runtime implementation'\r\n      : registry.hasSpecializedHandler(thought.mode)\r\n        ? undefined\r\n        : 'Using generic handler - specialized validation not available',\r\n  };\r\n\r\n  const response: any = {\r\n    sessionId: session.id,\r\n    thoughtId: thought.id,\r\n    thoughtNumber: thought.thoughtNumber,\r\n    mode: thought.mode,\r\n    nextThoughtNeeded: thought.nextThoughtNeeded,\r\n    sessionComplete: session.isComplete,\r\n    totalThoughts: session.thoughts.length,\r\n    modeStatus, // Phase 10 Sprint 1: API transparency\r\n  };\r\n\r\n  // Include analysis results in response if available\r\n  if ((thought as any).decomposition) {\r\n    response.decomposition = (thought as any).decomposition;\r\n  }\r\n  if ((thought as any).consistencyReport) {\r\n    response.consistencyReport = (thought as any).consistencyReport;\r\n  }\r\n  if ((thought as any).gapAnalysis) {\r\n    response.gapAnalysis = (thought as any).gapAnalysis;\r\n  }\r\n\r\n  return {\r\n    content: [\r\n      {\r\n        type: 'text',\r\n        text: JSON.stringify(response, null, 2),\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\n/**\r\n * Handle session actions (summarize, export, switch_mode, get_session, recommend_mode, delete_session)\r\n */\r\nasync function handleSessionAction(input: any) {\r\n  const action = input.action;\r\n\r\n  switch (action) {\r\n    case 'summarize':\r\n      return await handleSummarize(input);\r\n    case 'export':\r\n      return await handleExport(input);\r\n    case 'switch_mode':\r\n      return await handleSwitchMode(input);\r\n    case 'get_session':\r\n      return await handleGetSession(input);\r\n    case 'recommend_mode':\r\n      return await handleRecommendMode(input);\r\n    case 'delete_session':\r\n      return await handleDeleteSession(input);\r\n    default:\r\n      throw new Error(`Unknown session action: ${action}`);\r\n  }\r\n}\r\n\r\n/**\r\n * Handle summarize action\r\n */\r\nasync function handleSummarize(input: any) {\r\n  if (!input.sessionId) {\r\n    throw new Error('sessionId required for summarize action');\r\n  }\r\n\r\n  const sessionManager = await getSessionManager();\r\n  const summary = await sessionManager.generateSummary(input.sessionId);\r\n\r\n  return {\r\n    content: [\r\n      {\r\n        type: 'text',\r\n        text: summary,\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\n/**\r\n * Handle export action\r\n */\r\nasync function handleExport(input: any) {\r\n  if (!input.sessionId) {\r\n    throw new Error('sessionId required for export action');\r\n  }\r\n\r\n  const sessionManager = await getSessionManager();\r\n  const exportService = await getExportService();\r\n\r\n  const session = await sessionManager.getSession(input.sessionId);\r\n  if (!session) {\r\n    throw new Error(`Session ${input.sessionId} not found`);\r\n  }\r\n\r\n  const format = input.exportFormat || 'json';\r\n  const exported = exportService.exportSession(session, format as any);\r\n\r\n  return {\r\n    content: [{\r\n      type: 'text' as const,\r\n      text: exported,\r\n    }],\r\n  };\r\n}\r\n\r\n/**\r\n * Handle switch_mode action\r\n */\r\nasync function handleSwitchMode(input: any) {\r\n  if (!input.sessionId || !input.newMode) {\r\n    throw new Error('sessionId and newMode required for switch_mode action');\r\n  }\r\n\r\n  const modeRouter = await getModeRouter();\r\n  const session = await modeRouter.switchMode(\r\n    input.sessionId,\r\n    input.newMode as ThinkingMode,\r\n    'User requested mode switch'\r\n  );\r\n\r\n  return {\r\n    content: [\r\n      {\r\n        type: 'text',\r\n        text: `Switched session ${session.id} to ${session.mode} mode`,\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\n/**\r\n * Handle get_session action\r\n */\r\nasync function handleGetSession(input: any) {\r\n  if (!input.sessionId) {\r\n    throw new Error('sessionId required for get_session action');\r\n  }\r\n\r\n  const sessionManager = await getSessionManager();\r\n  const session = await sessionManager.getSession(input.sessionId);\r\n  if (!session) {\r\n    throw new Error(`Session ${input.sessionId} not found`);\r\n  }\r\n\r\n  // Convert Map to object for JSON serialization\r\n  const metricsWithCustom = {\r\n    ...session.metrics,\r\n    customMetrics: Object.fromEntries(session.metrics.customMetrics),\r\n  };\r\n\r\n  return {\r\n    content: [\r\n      {\r\n        type: 'text',\r\n        text: JSON.stringify({\r\n          id: session.id,\r\n          title: session.title,\r\n          mode: session.mode,\r\n          thoughtCount: session.thoughts.length,\r\n          isComplete: session.isComplete,\r\n          metrics: metricsWithCustom,\r\n        }, null, 2),\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\n/**\r\n * Handle recommend_mode action\r\n */\r\nasync function handleRecommendMode(input: any) {\r\n  const modeRouter = await getModeRouter();\r\n\r\n  // Quick recommendation based on problem type\r\n  if (input.problemType && !input.problemCharacteristics) {\r\n    const recommendedMode = modeRouter.quickRecommend(input.problemType);\r\n    const response = modeRouter.formatQuickRecommendation(input.problemType, recommendedMode);\r\n\r\n    return {\r\n      content: [{\r\n        type: 'text' as const,\r\n        text: response\r\n      }],\r\n      isError: false,\r\n    };\r\n  }\r\n\r\n  // Comprehensive recommendations based on problem characteristics\r\n  if (input.problemCharacteristics) {\r\n    const response = modeRouter.getRecommendations(\r\n      input.problemCharacteristics,\r\n      input.includeCombinations || false\r\n    );\r\n\r\n    return {\r\n      content: [{\r\n        type: 'text' as const,\r\n        text: response\r\n      }],\r\n      isError: false,\r\n    };\r\n  }\r\n\r\n  // No valid input provided\r\n  return {\r\n    content: [{\r\n      type: 'text' as const,\r\n      text: 'Error: Please provide either problemType or problemCharacteristics for mode recommendations.'\r\n    }],\r\n    isError: true,\r\n  };\r\n}\r\n/**\r\n * Handle delete_session action\r\n */\r\nasync function handleDeleteSession(input: any) {\r\n  if (!input.sessionId) {\r\n    throw new Error('sessionId required for delete_session action');\r\n  }\r\n\r\n  const sessionManager = await getSessionManager();\r\n  const session = await sessionManager.getSession(input.sessionId);\r\n\r\n  if (!session) {\r\n    throw new Error(`Session ${input.sessionId} not found`);\r\n  }\r\n\r\n  await sessionManager.deleteSession(input.sessionId);\r\n\r\n  return {\r\n    content: [\r\n      {\r\n        type: 'text',\r\n        text: `Session ${input.sessionId} deleted successfully`,\r\n      },\r\n    ],\r\n  };\r\n}\r\n\r\n\r\n/**\r\n * Main server startup\r\n */\r\nasync function main() {\r\n  const transport = new StdioServerTransport();\r\n  await server.connect(transport);\r\n  console.error('DeepThinking MCP server running on stdio');\r\n}\r\n\r\nmain().catch((error) => {\r\n  console.error('Fatal error:', error);\r\n  process.exit(1);\r\n});\r\n","/**\r\n * Focused Tool Definitions (v7.5.0)\r\n * Sprint 5 Task 5.4: Split monolithic tool into focused tools\r\n * Phase 14: Added deepthinking_engineering and deepthinking_academic (12 total tools)\r\n *\r\n * REFACTORED: Now using hand-written JSON schemas like working MCP servers\r\n * - Follows pattern from sequential-thinking-mcp and memory-mcp\r\n * - Zod schemas kept for runtime validation only\r\n */\r\n\r\nimport { jsonSchemas } from './json-schemas.js';\r\nimport { SessionActionSchema } from './schemas/base.js';\r\nimport { CoreModeSchema, StandardSchema } from './schemas/modes/core.js';\r\nimport { MathSchema } from './schemas/modes/mathematics.js';\r\nimport { TemporalSchema } from './schemas/modes/temporal.js';\r\nimport { ProbabilisticSchema } from './schemas/modes/probabilistic.js';\r\nimport { CausalSchema } from './schemas/modes/causal.js';\r\nimport { StrategicSchema } from './schemas/modes/strategic.js';\r\nimport { AnalyticalSchema } from './schemas/modes/analytical.js';\r\nimport { ScientificSchema } from './schemas/modes/scientific.js';\r\nimport { EngineeringSchema } from './schemas/modes/engineering.js';\r\nimport { AcademicSchema } from './schemas/modes/academic.js';\r\n\r\n/**\r\n * 12 focused tools with hand-written JSON schemas (v7.5.0)\r\n * Zod schemas used only for runtime validation\r\n * Phase 5: Added deepthinking_core for fundamental reasoning\r\n * Phase 14: Added deepthinking_engineering and deepthinking_academic\r\n */\r\nexport const tools = {\r\n  deepthinking_core: jsonSchemas[0],\r\n  deepthinking_standard: jsonSchemas[1],\r\n  deepthinking_mathematics: jsonSchemas[2],\r\n  deepthinking_temporal: jsonSchemas[3],\r\n  deepthinking_probabilistic: jsonSchemas[4],\r\n  deepthinking_causal: jsonSchemas[5],\r\n  deepthinking_strategic: jsonSchemas[6],\r\n  deepthinking_analytical: jsonSchemas[7],\r\n  deepthinking_scientific: jsonSchemas[8],\r\n  deepthinking_engineering: jsonSchemas[9],\r\n  deepthinking_academic: jsonSchemas[10],\r\n  deepthinking_session: jsonSchemas[11],\r\n};\r\n\r\n/**\r\n * All tools as array for MCP ListTools\r\n */\r\nexport const toolList = jsonSchemas;\r\n\r\n/**\r\n * Tool name to schema mapping for validation\r\n * Phase 14: Added engineering and academic schemas\r\n */\r\nexport const toolSchemas = {\r\n  deepthinking_core: CoreModeSchema,\r\n  deepthinking_standard: StandardSchema,\r\n  deepthinking_mathematics: MathSchema,\r\n  deepthinking_temporal: TemporalSchema,\r\n  deepthinking_probabilistic: ProbabilisticSchema,\r\n  deepthinking_causal: CausalSchema,\r\n  deepthinking_strategic: StrategicSchema,\r\n  deepthinking_analytical: AnalyticalSchema,\r\n  deepthinking_scientific: ScientificSchema,\r\n  deepthinking_engineering: EngineeringSchema,\r\n  deepthinking_academic: AcademicSchema,\r\n  deepthinking_session: SessionActionSchema,\r\n} as const;\r\n\r\n/**\r\n * Mode to tool name mapping for routing\r\n * Phase 14: All 29 modes with dedicated thought types are now accessible\r\n */\r\nexport const modeToToolMap: Record<string, string> = {\r\n  // Core reasoning modes (fundamental)\r\n  inductive: 'deepthinking_core',\r\n  deductive: 'deepthinking_core',\r\n  abductive: 'deepthinking_core',\r\n\r\n  // Standard workflow modes\r\n  sequential: 'deepthinking_standard',\r\n  shannon: 'deepthinking_standard',\r\n  hybrid: 'deepthinking_standard',\r\n\r\n  // Math/Physics/Computability modes\r\n  mathematics: 'deepthinking_mathematics',\r\n  physics: 'deepthinking_mathematics',\r\n  computability: 'deepthinking_mathematics',\r\n\r\n  // Temporal mode\r\n  temporal: 'deepthinking_temporal',\r\n\r\n  // Probabilistic modes\r\n  bayesian: 'deepthinking_probabilistic',\r\n  evidential: 'deepthinking_probabilistic',\r\n\r\n  // Causal modes\r\n  causal: 'deepthinking_causal',\r\n  counterfactual: 'deepthinking_causal',\r\n\r\n  // Strategic modes\r\n  gametheory: 'deepthinking_strategic',\r\n  optimization: 'deepthinking_strategic',\r\n\r\n  // Analytical modes (includes cryptanalytic)\r\n  analogical: 'deepthinking_analytical',\r\n  firstprinciples: 'deepthinking_analytical',\r\n  metareasoning: 'deepthinking_analytical',\r\n  cryptanalytic: 'deepthinking_analytical',\r\n\r\n  // Scientific modes\r\n  scientificmethod: 'deepthinking_scientific',\r\n  systemsthinking: 'deepthinking_scientific',\r\n  formallogic: 'deepthinking_scientific',\r\n\r\n  // Engineering modes (Phase 14)\r\n  engineering: 'deepthinking_engineering',\r\n  algorithmic: 'deepthinking_engineering',\r\n\r\n  // Academic research modes (Phase 14)\r\n  synthesis: 'deepthinking_academic',\r\n  argumentation: 'deepthinking_academic',\r\n  critique: 'deepthinking_academic',\r\n  analysis: 'deepthinking_academic',\r\n};\r\n\r\n/**\r\n * Get the appropriate tool for a mode\r\n */\r\nexport function getToolForMode(mode: string): string {\r\n  const tool = modeToToolMap[mode];\r\n  if (!tool) {\r\n    // Default to standard for unknown modes\r\n    return 'deepthinking_standard';\r\n  }\r\n  return tool;\r\n}\r\n\r\n/**\r\n * Check if a tool name is valid\r\n */\r\nexport function isValidTool(toolName: string): boolean {\r\n  return toolName in toolSchemas;\r\n}\r\n\r\n/**\r\n * Get schema for a tool\r\n */\r\nexport function getSchemaForTool(toolName: string) {\r\n  if (!isValidTool(toolName)) {\r\n    throw new Error(`Unknown tool: ${toolName}`);\r\n  }\r\n  return toolSchemas[toolName as keyof typeof toolSchemas];\r\n}\r\n","/**\r\n * Hand-Written JSON Schemas for MCP Tools (v4.4.0)\r\n *\r\n * Following the pattern used by working MCP servers (sequential-thinking-mcp, memory-mcp):\r\n * - JSON schemas are hand-written as plain JavaScript objects\r\n * - Conforming to JSON Schema draft 2020-12\r\n * - Zod schemas remain for runtime validation only\r\n */\r\n\r\n/**\r\n * Base properties shared by all thought-adding tools\r\n */\r\nconst baseThoughtProperties = {\r\n  sessionId: {\r\n    type: \"string\",\r\n    description: \"Optional session ID. If not provided, a new session will be created.\"\r\n  },\r\n  thought: {\r\n    type: \"string\",\r\n    description: \"The current thought or reasoning step\",\r\n    minLength: 1\r\n  },\r\n  thoughtNumber: {\r\n    type: \"integer\",\r\n    description: \"Current thought number in sequence\",\r\n    minimum: 1\r\n  },\r\n  totalThoughts: {\r\n    type: \"integer\",\r\n    description: \"Estimated total number of thoughts needed\",\r\n    minimum: 1\r\n  },\r\n  nextThoughtNeeded: {\r\n    type: \"boolean\",\r\n    description: \"Whether another thought step is needed\"\r\n  },\r\n  isRevision: {\r\n    type: \"boolean\",\r\n    description: \"Whether this thought revises previous thinking\"\r\n  },\r\n  revisesThought: {\r\n    type: \"string\",\r\n    description: \"ID of the thought being revised\"\r\n  },\r\n  revisionReason: {\r\n    type: \"string\",\r\n    description: \"Explanation for why revision is needed\"\r\n  },\r\n  branchFrom: {\r\n    type: \"string\",\r\n    description: \"ID of thought to branch from for alternative reasoning path\"\r\n  },\r\n  branchId: {\r\n    type: \"string\",\r\n    description: \"Identifier for this reasoning branch\"\r\n  },\r\n  uncertainty: {\r\n    type: \"number\",\r\n    description: \"Confidence level (0-1, where 1 is highest confidence)\",\r\n    minimum: 0,\r\n    maximum: 1\r\n  },\r\n  dependencies: {\r\n    type: \"array\",\r\n    items: { type: \"string\" },\r\n    description: \"IDs of thoughts this one depends on\"\r\n  },\r\n  assumptions: {\r\n    type: \"array\",\r\n    items: { type: \"string\" },\r\n    description: \"Key assumptions made in this thought\"\r\n  }\r\n} as const;\r\n\r\nconst baseThoughtRequired = [\"thought\", \"thoughtNumber\", \"totalThoughts\", \"nextThoughtNeeded\"] as const;\r\n\r\n/**\r\n * deepthinking_core - Fundamental reasoning modes\r\n */\r\nexport const deepthinking_core_schema = {\r\n  name: \"deepthinking_core\",\r\n  description: \"Core reasoning: inductive, deductive, abductive\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"inductive\", \"deductive\", \"abductive\"],\r\n        description: \"Core reasoning mode\"\r\n      },\r\n      // Inductive properties\r\n      observations: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Specific cases observed (inductive/abductive)\"\r\n      },\r\n      pattern: {\r\n        type: \"string\",\r\n        description: \"Identified pattern (inductive)\"\r\n      },\r\n      generalization: {\r\n        type: \"string\",\r\n        description: \"General principle formed (inductive)\"\r\n      },\r\n      confidence: {\r\n        type: \"number\",\r\n        minimum: 0,\r\n        maximum: 1,\r\n        description: \"Strength of inference (inductive)\"\r\n      },\r\n      counterexamples: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Known exceptions (inductive)\"\r\n      },\r\n      sampleSize: {\r\n        type: \"integer\",\r\n        minimum: 1,\r\n        description: \"Number of observations (inductive)\"\r\n      },\r\n      // Deductive properties\r\n      premises: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"General principles (deductive)\"\r\n      },\r\n      conclusion: {\r\n        type: \"string\",\r\n        description: \"Specific conclusion (deductive)\"\r\n      },\r\n      logicForm: {\r\n        type: \"string\",\r\n        description: \"Logic form: modus ponens, modus tollens, etc. (deductive)\"\r\n      },\r\n      validityCheck: {\r\n        type: \"boolean\",\r\n        description: \"Is the deduction logically valid? (deductive)\"\r\n      },\r\n      soundnessCheck: {\r\n        type: \"boolean\",\r\n        description: \"Are the premises true? (deductive)\"\r\n      },\r\n      // Abductive properties\r\n      hypotheses: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            explanation: { type: \"string\" },\r\n            score: { type: \"number\" }\r\n          },\r\n          required: [\"id\", \"explanation\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Candidate explanations (abductive)\"\r\n      },\r\n      bestExplanation: {\r\n        type: \"object\",\r\n        properties: {\r\n          id: { type: \"string\" },\r\n          explanation: { type: \"string\" },\r\n          score: { type: \"number\" }\r\n        },\r\n        required: [\"id\", \"explanation\"],\r\n        additionalProperties: false,\r\n        description: \"Best explanation chosen (abductive)\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_standard - Sequential, Shannon, Hybrid modes\r\n */\r\nexport const deepthinking_standard_schema = {\r\n  name: \"deepthinking_standard\",\r\n  description: \"Standard workflows: sequential, shannon (5-stage), hybrid\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"sequential\", \"shannon\", \"hybrid\"],\r\n        description: \"Thinking mode to use\"\r\n      },\r\n      stage: {\r\n        type: \"string\",\r\n        enum: [\"problem_definition\", \"constraints\", \"model\", \"proof\", \"implementation\"],\r\n        description: \"Shannon methodology stage (only for shannon mode)\"\r\n      },\r\n      activeModes: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Active sub-modes for hybrid mode\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_mathematics - Mathematics, Physics, and Computability modes\r\n * Phase 8: Added proof decomposition fields\r\n * Phase 14: Added computability mode\r\n */\r\nexport const deepthinking_mathematics_schema = {\r\n  name: \"deepthinking_mathematics\",\r\n  description: \"Math/physics/computability: proofs, Turing machines, decidability, tensors, LaTeX, conservation laws\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"mathematics\", \"physics\", \"computability\"],\r\n        description: \"Mathematical reasoning mode\"\r\n      },\r\n      thoughtType: {\r\n        type: \"string\",\r\n        description: \"Specific thought type for mathematics mode. Use 'proof_decomposition', 'dependency_analysis', 'consistency_check', 'gap_identification', or 'assumption_trace' for proof analysis.\"\r\n      },\r\n      mathematicalModel: {\r\n        type: \"object\",\r\n        properties: {\r\n          latex: { type: \"string\", description: \"LaTeX representation\" },\r\n          symbolic: { type: \"string\", description: \"Symbolic notation\" },\r\n          ascii: { type: \"string\", description: \"ASCII math representation\" }\r\n        },\r\n        required: [\"latex\", \"symbolic\"],\r\n        additionalProperties: false,\r\n        description: \"Mathematical model representation\"\r\n      },\r\n      proofStrategy: {\r\n        type: \"object\",\r\n        properties: {\r\n          type: {\r\n            type: \"string\",\r\n            enum: [\"direct\", \"contradiction\", \"induction\", \"construction\", \"contrapositive\"],\r\n            description: \"Type of mathematical proof\"\r\n          },\r\n          steps: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n            description: \"Proof steps\"\r\n          }\r\n        },\r\n        required: [\"type\", \"steps\"],\r\n        additionalProperties: false,\r\n        description: \"Proof strategy being used\"\r\n      },\r\n      tensorProperties: {\r\n        type: \"object\",\r\n        properties: {\r\n          rank: {\r\n            type: \"array\",\r\n            items: { type: \"integer\" },\r\n            minItems: 2,\r\n            maxItems: 2,\r\n            description: \"Tensor rank as [contravariant, covariant]\"\r\n          },\r\n          components: { type: \"string\", description: \"Tensor components\" },\r\n          latex: { type: \"string\", description: \"LaTeX representation\" },\r\n          symmetries: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n            description: \"Symmetry properties\"\r\n          },\r\n          invariants: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n            description: \"Invariant quantities\"\r\n          },\r\n          transformation: {\r\n            type: \"string\",\r\n            enum: [\"covariant\", \"contravariant\", \"mixed\"],\r\n            description: \"Transformation type\"\r\n          }\r\n        },\r\n        required: [\"rank\", \"components\", \"latex\", \"transformation\"],\r\n        additionalProperties: false,\r\n        description: \"Tensor properties for physics calculations\"\r\n      },\r\n      physicalInterpretation: {\r\n        type: \"object\",\r\n        properties: {\r\n          quantity: { type: \"string\", description: \"Physical quantity being described\" },\r\n          units: { type: \"string\", description: \"Units of the quantity\" },\r\n          conservationLaws: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n            description: \"Conservation laws applicable\"\r\n          }\r\n        },\r\n        required: [\"quantity\", \"units\", \"conservationLaws\"],\r\n        additionalProperties: false,\r\n        description: \"Physical interpretation of the model\"\r\n      },\r\n      // Phase 8: Proof decomposition fields\r\n      proofSteps: {\r\n        type: \"array\",\r\n        description: \"Structured proof steps for decomposition analysis\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            stepNumber: { type: \"integer\", minimum: 1, description: \"Step number in the proof\" },\r\n            statement: { type: \"string\", description: \"The statement being made\" },\r\n            justification: { type: \"string\", description: \"Justification for this step\" },\r\n            latex: { type: \"string\", description: \"LaTeX representation of the statement\" },\r\n            referencesSteps: {\r\n              type: \"array\",\r\n              items: { type: \"integer\" },\r\n              description: \"Step numbers this step references\"\r\n            }\r\n          },\r\n          required: [\"stepNumber\", \"statement\"],\r\n          additionalProperties: false\r\n        }\r\n      },\r\n      theorem: {\r\n        type: \"string\",\r\n        description: \"The theorem being proved (for proof decomposition)\"\r\n      },\r\n      hypotheses: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Starting hypotheses for the proof\"\r\n      },\r\n      analysisDepth: {\r\n        type: \"string\",\r\n        enum: [\"shallow\", \"standard\", \"deep\"],\r\n        description: \"Depth of proof analysis\"\r\n      },\r\n      includeConsistencyCheck: {\r\n        type: \"boolean\",\r\n        description: \"Whether to run inconsistency detection\"\r\n      },\r\n      traceAssumptions: {\r\n        type: \"boolean\",\r\n        description: \"Whether to include assumption chain analysis\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_temporal - Temporal reasoning\r\n */\r\nexport const deepthinking_temporal_schema = {\r\n  name: \"deepthinking_temporal\",\r\n  description: \"Temporal: timelines, Allen intervals, event sequencing\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"temporal\"],\r\n        description: \"Temporal reasoning mode\"\r\n      },\r\n      timeline: {\r\n        type: \"object\",\r\n        properties: {\r\n          id: { type: \"string\", description: \"Timeline ID\" },\r\n          name: { type: \"string\", description: \"Timeline name\" },\r\n          timeUnit: {\r\n            type: \"string\",\r\n            enum: [\"milliseconds\", \"seconds\", \"minutes\", \"hours\", \"days\", \"months\", \"years\"],\r\n            description: \"Time unit\"\r\n          },\r\n          events: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n            description: \"Event IDs in this timeline\"\r\n          },\r\n          startTime: { type: \"number\", description: \"Timeline start time (optional)\" },\r\n          endTime: { type: \"number\", description: \"Timeline end time (optional)\" }\r\n        },\r\n        required: [\"id\", \"name\", \"timeUnit\", \"events\"],\r\n        additionalProperties: false,\r\n        description: \"Timeline definition\"\r\n      },\r\n      events: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            name: { type: \"string\" },\r\n            description: { type: \"string\" },\r\n            timestamp: { type: \"number\", description: \"Event timestamp as number\" },\r\n            type: {\r\n              type: \"string\",\r\n              enum: [\"instant\", \"interval\"],\r\n              description: \"Event type\"\r\n            },\r\n            duration: { type: \"number\", description: \"Event duration (optional)\" },\r\n            properties: {\r\n              type: \"object\",\r\n              additionalProperties: true,\r\n              description: \"Additional event properties\"\r\n            }\r\n          },\r\n          required: [\"id\", \"name\", \"description\", \"timestamp\", \"type\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Temporal events\"\r\n      },\r\n      constraints: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            type: {\r\n              type: \"string\",\r\n              enum: [\"before\", \"after\", \"during\", \"simultaneous\"],\r\n              description: \"Constraint type\"\r\n            },\r\n            subject: { type: \"string\", description: \"Subject event ID\" },\r\n            object: { type: \"string\", description: \"Object event ID\" },\r\n            confidence: { type: \"number\", minimum: 0, maximum: 1, description: \"Confidence in constraint\" }\r\n          },\r\n          required: [\"id\", \"type\", \"subject\", \"object\", \"confidence\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Temporal constraints\"\r\n      },\r\n      intervals: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            name: { type: \"string\" },\r\n            start: { type: \"number\", description: \"Interval start\" },\r\n            end: { type: \"number\", description: \"Interval end\" },\r\n            contains: {\r\n              type: \"array\",\r\n              items: { type: \"string\" },\r\n              description: \"Event IDs contained in this interval\"\r\n            },\r\n            overlaps: {\r\n              type: \"array\",\r\n              items: { type: \"string\" },\r\n              description: \"Interval IDs that overlap\"\r\n            }\r\n          },\r\n          required: [\"id\", \"name\", \"start\", \"end\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Temporal intervals\"\r\n      },\r\n      relations: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            from: { type: \"string\", description: \"Source event ID\" },\r\n            to: { type: \"string\", description: \"Target event ID\" },\r\n            relationType: {\r\n              type: \"string\",\r\n              enum: [\"before\", \"after\", \"during\", \"overlaps\", \"meets\", \"starts\", \"finishes\", \"equals\", \"causes\"],\r\n              description: \"Relation type (Allen's interval algebra)\"\r\n            },\r\n            strength: { type: \"number\", minimum: 0, maximum: 1, description: \"Relation strength\" },\r\n            delay: { type: \"number\", description: \"Temporal delay (optional)\" }\r\n          },\r\n          required: [\"id\", \"from\", \"to\", \"relationType\", \"strength\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Temporal relations between events\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_probabilistic - Bayesian and Evidential reasoning\r\n */\r\nexport const deepthinking_probabilistic_schema = {\r\n  name: \"deepthinking_probabilistic\",\r\n  description: \"Probabilistic: Bayesian updates, Dempster-Shafer belief\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"bayesian\", \"evidential\"],\r\n        description: \"Probabilistic reasoning mode\"\r\n      },\r\n      priorProbability: {\r\n        type: \"number\",\r\n        minimum: 0,\r\n        maximum: 1,\r\n        description: \"Prior probability before evidence\"\r\n      },\r\n      likelihood: {\r\n        type: \"number\",\r\n        minimum: 0,\r\n        maximum: 1,\r\n        description: \"Likelihood of evidence given hypothesis\"\r\n      },\r\n      posteriorProbability: {\r\n        type: \"number\",\r\n        minimum: 0,\r\n        maximum: 1,\r\n        description: \"Posterior probability after evidence\"\r\n      },\r\n      evidence: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Evidence considered\"\r\n      },\r\n      hypotheses: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            description: { type: \"string\" },\r\n            probability: { type: \"number\", minimum: 0, maximum: 1 }\r\n          },\r\n          required: [\"id\", \"description\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Hypotheses under consideration\"\r\n      },\r\n      frameOfDiscernment: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Frame of discernment for Dempster-Shafer theory\"\r\n      },\r\n      massFunction: {\r\n        type: \"object\",\r\n        additionalProperties: { type: \"number\", minimum: 0, maximum: 1 },\r\n        description: \"Mass function assignments\"\r\n      },\r\n      beliefFunction: {\r\n        type: \"object\",\r\n        additionalProperties: { type: \"number\", minimum: 0, maximum: 1 },\r\n        description: \"Belief function values\"\r\n      },\r\n      plausibilityFunction: {\r\n        type: \"object\",\r\n        additionalProperties: { type: \"number\", minimum: 0, maximum: 1 },\r\n        description: \"Plausibility function values\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_causal - Causal and Counterfactual reasoning\r\n */\r\nexport const deepthinking_causal_schema = {\r\n  name: \"deepthinking_causal\",\r\n  description: \"Causal: graphs, counterfactuals (abductive moved to core)\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"causal\", \"counterfactual\"],\r\n        description: \"Causal reasoning mode\"\r\n      },\r\n      nodes: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            name: { type: \"string\" },\r\n            description: { type: \"string\" }\r\n          },\r\n          required: [\"id\", \"name\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Nodes in the causal graph\"\r\n      },\r\n      edges: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            from: { type: \"string\" },\r\n            to: { type: \"string\" },\r\n            strength: { type: \"number\", minimum: 0, maximum: 1 },\r\n            type: { type: \"string\" }\r\n          },\r\n          required: [\"from\", \"to\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Causal edges in the graph\"\r\n      },\r\n      interventions: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            node: { type: \"string\" },\r\n            value: { type: \"string\" },\r\n            effect: { type: \"string\" }\r\n          },\r\n          required: [\"node\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Interventions applied to the causal graph\"\r\n      },\r\n      counterfactual: {\r\n        type: \"object\",\r\n        properties: {\r\n          actual: { type: \"string\" },\r\n          hypothetical: { type: \"string\" },\r\n          consequence: { type: \"string\" }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"Counterfactual scenario\"\r\n      },\r\n      observations: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Observed phenomena for abductive reasoning\"\r\n      },\r\n      explanations: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            hypothesis: { type: \"string\" },\r\n            plausibility: { type: \"number\", minimum: 0, maximum: 1 }\r\n          },\r\n          required: [\"hypothesis\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Candidate explanations\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_strategic - Game Theory and Optimization\r\n */\r\nexport const deepthinking_strategic_schema = {\r\n  name: \"deepthinking_strategic\",\r\n  description: \"Strategic: game theory, Nash equilibria, optimization\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"gametheory\", \"optimization\"],\r\n        description: \"Strategic reasoning mode\"\r\n      },\r\n      players: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            name: { type: \"string\" },\r\n            isRational: { type: \"boolean\", description: \"Whether player is rational\" },\r\n            availableStrategies: {\r\n              type: \"array\",\r\n              items: { type: \"string\" },\r\n              description: \"Strategy IDs available to this player\"\r\n            },\r\n            role: { type: \"string\", description: \"Player's role in the game\" }\r\n          },\r\n          required: [\"id\", \"name\", \"isRational\", \"availableStrategies\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Players in the game\"\r\n      },\r\n      strategies: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            playerId: { type: \"string\", description: \"ID of the player using this strategy\" },\r\n            name: { type: \"string\", description: \"Strategy name\" },\r\n            description: { type: \"string\", description: \"Strategy description\" },\r\n            isPure: { type: \"boolean\", description: \"Whether this is a pure strategy\" },\r\n            probability: { type: \"number\", minimum: 0, maximum: 1, description: \"Probability for mixed strategies\" }\r\n          },\r\n          required: [\"id\", \"playerId\", \"name\", \"description\", \"isPure\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Available strategies\"\r\n      },\r\n      payoffMatrix: {\r\n        type: \"object\",\r\n        properties: {\r\n          players: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n            description: \"Player IDs in the matrix\"\r\n          },\r\n          dimensions: {\r\n            type: \"array\",\r\n            items: { type: \"number\" },\r\n            description: \"Dimensions of the payoff matrix\"\r\n          },\r\n          payoffs: {\r\n            type: \"array\",\r\n            items: {\r\n              type: \"object\",\r\n              properties: {\r\n                strategyProfile: {\r\n                  type: \"array\",\r\n                  items: { type: \"string\" },\r\n                  description: \"Strategy IDs for this profile\"\r\n                },\r\n                payoffs: {\r\n                  type: \"array\",\r\n                  items: { type: \"number\" },\r\n                  description: \"Payoff values for each player\"\r\n                }\r\n              },\r\n              required: [\"strategyProfile\", \"payoffs\"],\r\n              additionalProperties: false\r\n            },\r\n            description: \"Payoff entries\"\r\n          }\r\n        },\r\n        required: [\"players\", \"dimensions\", \"payoffs\"],\r\n        additionalProperties: false,\r\n        description: \"Payoff matrix for the game\"\r\n      },\r\n      objectiveFunction: {\r\n        type: \"string\",\r\n        description: \"Function to optimize\"\r\n      },\r\n      constraints: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Optimization constraints\"\r\n      },\r\n      optimizationMethod: {\r\n        type: \"string\",\r\n        description: \"Method used for optimization\"\r\n      },\r\n      solution: {\r\n        type: \"object\",\r\n        properties: {\r\n          value: { type: \"string\" },\r\n          variables: {\r\n            type: \"object\",\r\n            additionalProperties: { type: \"number\" }\r\n          }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"Optimization solution\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_analytical - Analogical, First Principles, Meta-Reasoning, and Cryptanalytic\r\n * Phase 14: Added cryptanalytic mode\r\n */\r\nexport const deepthinking_analytical_schema = {\r\n  name: \"deepthinking_analytical\",\r\n  description: \"Analytical: analogical mapping, first principles, meta-reasoning, cryptanalytic (decibans)\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"analogical\", \"firstprinciples\", \"metareasoning\", \"cryptanalytic\"],\r\n        description: \"Analytical reasoning mode\"\r\n      },\r\n      sourceAnalogy: {\r\n        type: \"object\",\r\n        properties: {\r\n          domain: { type: \"string\" },\r\n          elements: {\r\n            type: \"array\",\r\n            items: { type: \"string\" }\r\n          },\r\n          relations: {\r\n            type: \"array\",\r\n            items: { type: \"string\" }\r\n          }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"Source domain for analogy\"\r\n      },\r\n      targetAnalogy: {\r\n        type: \"object\",\r\n        properties: {\r\n          domain: { type: \"string\" },\r\n          elements: {\r\n            type: \"array\",\r\n            items: { type: \"string\" }\r\n          },\r\n          relations: {\r\n            type: \"array\",\r\n            items: { type: \"string\" }\r\n          }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"Target domain for analogy\"\r\n      },\r\n      mappings: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            source: { type: \"string\" },\r\n            target: { type: \"string\" },\r\n            confidence: { type: \"number\", minimum: 0, maximum: 1 }\r\n          },\r\n          required: [\"source\", \"target\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Mappings between domains\"\r\n      },\r\n      fundamentals: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Fundamental truths or axioms\"\r\n      },\r\n      derivedInsights: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Insights derived from first principles\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_scientific - Scientific Method, Systems Thinking, Formal Logic\r\n */\r\nexport const deepthinking_scientific_schema = {\r\n  name: \"deepthinking_scientific\",\r\n  description: \"Scientific: hypothesis testing, systems thinking, formal logic\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"scientificmethod\", \"systemsthinking\", \"formallogic\"],\r\n        description: \"Scientific reasoning mode\"\r\n      },\r\n      hypothesis: {\r\n        type: \"string\",\r\n        description: \"Scientific hypothesis\"\r\n      },\r\n      predictions: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Testable predictions\"\r\n      },\r\n      experiments: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            description: { type: \"string\" },\r\n            result: { type: \"string\" }\r\n          },\r\n          required: [\"id\", \"description\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Experiments conducted\"\r\n      },\r\n      systemComponents: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            name: { type: \"string\" },\r\n            role: { type: \"string\" }\r\n          },\r\n          required: [\"id\", \"name\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Components of the system\"\r\n      },\r\n      interactions: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            from: { type: \"string\" },\r\n            to: { type: \"string\" },\r\n            type: { type: \"string\" }\r\n          },\r\n          required: [\"from\", \"to\", \"type\"],\r\n          additionalProperties: false\r\n        },\r\n        description: \"Interactions between components\"\r\n      },\r\n      feedbackLoops: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            type: {\r\n              type: \"string\",\r\n              enum: [\"positive\", \"negative\", \"neutral\"]\r\n            },\r\n            components: {\r\n              type: \"array\",\r\n              items: { type: \"string\" }\r\n            }\r\n          },\r\n          additionalProperties: false\r\n        },\r\n        description: \"Feedback loops in the system\"\r\n      },\r\n      premises: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Logical premises\"\r\n      },\r\n      conclusion: {\r\n        type: \"string\",\r\n        description: \"Logical conclusion\"\r\n      },\r\n      inference: {\r\n        type: \"string\",\r\n        description: \"Type of logical inference used\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_engineering - Engineering and Algorithmic modes\r\n * Phase 14: New tool for engineering-focused reasoning\r\n */\r\nexport const deepthinking_engineering_schema = {\r\n  name: \"deepthinking_engineering\",\r\n  description: \"Engineering: requirements, trade studies, FMEA, ADRs, algorithm design (CLRS)\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"engineering\", \"algorithmic\"],\r\n        description: \"Engineering reasoning mode\"\r\n      },\r\n      // Engineering-specific properties\r\n      requirementId: {\r\n        type: \"string\",\r\n        description: \"Requirement ID being analyzed\"\r\n      },\r\n      tradeStudy: {\r\n        type: \"object\",\r\n        properties: {\r\n          options: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n            description: \"Options being compared\"\r\n          },\r\n          criteria: {\r\n            type: \"array\",\r\n            items: { type: \"string\" },\r\n            description: \"Evaluation criteria\"\r\n          },\r\n          weights: {\r\n            type: \"object\",\r\n            additionalProperties: { type: \"number\" },\r\n            description: \"Criteria weights\"\r\n          }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"Trade study configuration\"\r\n      },\r\n      fmeaEntry: {\r\n        type: \"object\",\r\n        properties: {\r\n          failureMode: { type: \"string\" },\r\n          severity: { type: \"integer\", minimum: 1, maximum: 10 },\r\n          occurrence: { type: \"integer\", minimum: 1, maximum: 10 },\r\n          detection: { type: \"integer\", minimum: 1, maximum: 10 },\r\n          rpn: { type: \"integer\", description: \"Risk Priority Number = S * O * D\" }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"FMEA analysis entry\"\r\n      },\r\n      // Algorithmic-specific properties\r\n      algorithmName: {\r\n        type: \"string\",\r\n        description: \"Name of the algorithm being analyzed\"\r\n      },\r\n      designPattern: {\r\n        type: \"string\",\r\n        enum: [\"divide-and-conquer\", \"dynamic-programming\", \"greedy\", \"backtracking\", \"branch-and-bound\", \"randomized\", \"approximation\"],\r\n        description: \"Algorithm design pattern\"\r\n      },\r\n      complexityAnalysis: {\r\n        type: \"object\",\r\n        properties: {\r\n          timeComplexity: { type: \"string\", description: \"Time complexity (e.g., O(n log n))\" },\r\n          spaceComplexity: { type: \"string\", description: \"Space complexity (e.g., O(n))\" },\r\n          bestCase: { type: \"string\" },\r\n          averageCase: { type: \"string\" },\r\n          worstCase: { type: \"string\" }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"Complexity analysis\"\r\n      },\r\n      correctnessProof: {\r\n        type: \"object\",\r\n        properties: {\r\n          invariant: { type: \"string\", description: \"Loop invariant\" },\r\n          termination: { type: \"string\", description: \"Termination argument\" },\r\n          correctness: { type: \"string\", description: \"Correctness proof\" }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"Algorithm correctness proof\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_academic - Academic Research modes\r\n * Phase 14: New tool for academic research reasoning\r\n * Designed for PhD students and scientific paper writing\r\n */\r\nexport const deepthinking_academic_schema = {\r\n  name: \"deepthinking_academic\",\r\n  description: \"Academic: synthesis (literature review), argumentation (Toulmin), critique (peer review), analysis (qualitative)\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      ...baseThoughtProperties,\r\n      mode: {\r\n        type: \"string\",\r\n        enum: [\"synthesis\", \"argumentation\", \"critique\", \"analysis\"],\r\n        description: \"Academic research reasoning mode\"\r\n      },\r\n      // Synthesis-specific properties\r\n      sources: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            id: { type: \"string\" },\r\n            citation: { type: \"string\" },\r\n            keyFindings: { type: \"array\", items: { type: \"string\" } },\r\n            methodology: { type: \"string\" },\r\n            relevance: { type: \"number\", minimum: 0, maximum: 1 }\r\n          },\r\n          additionalProperties: false\r\n        },\r\n        description: \"Literature sources being synthesized\"\r\n      },\r\n      themes: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Identified themes across sources\"\r\n      },\r\n      researchGaps: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Identified gaps in the literature\"\r\n      },\r\n      // Argumentation-specific properties (Toulmin model)\r\n      claim: {\r\n        type: \"string\",\r\n        description: \"Main claim or thesis\"\r\n      },\r\n      data: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Evidence supporting the claim\"\r\n      },\r\n      warrant: {\r\n        type: \"string\",\r\n        description: \"Reasoning connecting data to claim\"\r\n      },\r\n      backing: {\r\n        type: \"string\",\r\n        description: \"Support for the warrant\"\r\n      },\r\n      qualifier: {\r\n        type: \"string\",\r\n        description: \"Degree of certainty (e.g., 'probably', 'likely')\"\r\n      },\r\n      rebuttal: {\r\n        type: \"string\",\r\n        description: \"Potential counter-arguments\"\r\n      },\r\n      // Critique-specific properties\r\n      strengths: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Identified strengths\"\r\n      },\r\n      weaknesses: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Identified weaknesses\"\r\n      },\r\n      methodologyAssessment: {\r\n        type: \"object\",\r\n        properties: {\r\n          validity: { type: \"string\" },\r\n          reliability: { type: \"string\" },\r\n          limitations: { type: \"array\", items: { type: \"string\" } }\r\n        },\r\n        additionalProperties: false,\r\n        description: \"Assessment of methodology\"\r\n      },\r\n      // Analysis-specific properties\r\n      analysisMethod: {\r\n        type: \"string\",\r\n        enum: [\"thematic\", \"grounded-theory\", \"discourse\", \"content\", \"narrative\", \"phenomenological\"],\r\n        description: \"Qualitative analysis method\"\r\n      },\r\n      codes: {\r\n        type: \"array\",\r\n        items: {\r\n          type: \"object\",\r\n          properties: {\r\n            code: { type: \"string\" },\r\n            description: { type: \"string\" },\r\n            examples: { type: \"array\", items: { type: \"string\" } }\r\n          },\r\n          additionalProperties: false\r\n        },\r\n        description: \"Coding scheme for analysis\"\r\n      },\r\n      categories: {\r\n        type: \"array\",\r\n        items: { type: \"string\" },\r\n        description: \"Categories derived from codes\"\r\n      }\r\n    },\r\n    required: [...baseThoughtRequired],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * deepthinking_session - Session management actions\r\n */\r\nexport const deepthinking_session_schema = {\r\n  name: \"deepthinking_session\",\r\n  description: \"Session: summarize, export, get, switch_mode, recommend, delete\",\r\n  inputSchema: {\r\n    type: \"object\",\r\n    properties: {\r\n      sessionId: {\r\n        type: \"string\",\r\n        description: \"Session ID (required for most actions except recommend_mode)\"\r\n      },\r\n      action: {\r\n        type: \"string\",\r\n        enum: [\"summarize\", \"export\", \"get_session\", \"switch_mode\", \"recommend_mode\", \"delete_session\"],\r\n        description: \"Session action to perform\"\r\n      },\r\n      exportFormat: {\r\n        type: \"string\",\r\n        enum: [\"markdown\", \"latex\", \"json\", \"html\", \"jupyter\", \"mermaid\", \"dot\", \"ascii\"],\r\n        description: \"Export format (for export action)\"\r\n      },\r\n      newMode: {\r\n        type: \"string\",\r\n        description: \"New thinking mode (for switch_mode action)\"\r\n      },\r\n      problemType: {\r\n        type: \"string\",\r\n        description: \"Quick problem type for mode recommendation\"\r\n      },\r\n      problemCharacteristics: {\r\n        type: \"object\",\r\n        properties: {\r\n          domain: { type: \"string\", description: \"Problem domain\" },\r\n          complexity: {\r\n            type: \"string\",\r\n            enum: [\"low\", \"medium\", \"high\"],\r\n            description: \"Problem complexity level\"\r\n          },\r\n          uncertainty: {\r\n            type: \"string\",\r\n            enum: [\"low\", \"medium\", \"high\"],\r\n            description: \"Uncertainty level\"\r\n          },\r\n          timeDependent: { type: \"boolean\", description: \"Whether problem involves time\" },\r\n          multiAgent: { type: \"boolean\", description: \"Whether problem involves multiple agents\" },\r\n          requiresProof: { type: \"boolean\", description: \"Whether formal proof is needed\" },\r\n          requiresQuantification: { type: \"boolean\", description: \"Whether quantitative analysis is needed\" },\r\n          hasIncompleteInfo: { type: \"boolean\", description: \"Whether information is incomplete\" },\r\n          requiresExplanation: { type: \"boolean\", description: \"Whether explanation is needed\" },\r\n          hasAlternatives: { type: \"boolean\", description: \"Whether alternative scenarios exist\" }\r\n        },\r\n        required: [\"domain\", \"complexity\", \"uncertainty\", \"timeDependent\", \"multiAgent\", \"requiresProof\", \"requiresQuantification\", \"hasIncompleteInfo\", \"requiresExplanation\", \"hasAlternatives\"],\r\n        additionalProperties: false,\r\n        description: \"Detailed problem characteristics for comprehensive recommendation\"\r\n      },\r\n      includeCombinations: {\r\n        type: \"boolean\",\r\n        description: \"Include mode combinations in recommendations\"\r\n      }\r\n    },\r\n    required: [\"action\"],\r\n    additionalProperties: false\r\n  }\r\n} as const;\r\n\r\n/**\r\n * All tool schemas as array (v7.5.0 - 12 tools)\r\n * Phase 14: Added deepthinking_engineering and deepthinking_academic\r\n */\r\nexport const jsonSchemas = [\r\n  deepthinking_core_schema,\r\n  deepthinking_standard_schema,\r\n  deepthinking_mathematics_schema,\r\n  deepthinking_temporal_schema,\r\n  deepthinking_probabilistic_schema,\r\n  deepthinking_causal_schema,\r\n  deepthinking_strategic_schema,\r\n  deepthinking_analytical_schema,\r\n  deepthinking_scientific_schema,\r\n  deepthinking_engineering_schema,\r\n  deepthinking_academic_schema,\r\n  deepthinking_session_schema,\r\n] as const;\r\n","/**\n * Base Thought Schema (v4.1.0)\n * Sprint 5 Task 5.2: Shared properties for all thinking modes\n * Sprint 7 Task 7.5: Use shared enums\n */\n\nimport { z } from 'zod';\nimport {\n  ConfidenceSchema,\n  PositiveIntSchema,\n  SessionActionEnum,\n  ExportFormatEnum,\n  LevelEnum,\n} from './shared.js';\n\n/**\n * Base schema with properties common to all thought types\n */\nexport const BaseThoughtSchema = z.object({\n  sessionId: z.string().optional(),\n  thought: z.string().min(1),\n  thoughtNumber: PositiveIntSchema,\n  totalThoughts: PositiveIntSchema,\n  nextThoughtNeeded: z.boolean(),\n  isRevision: z.boolean().optional(),\n  revisesThought: z.string().optional(),\n  revisionReason: z.string().optional(),\n  branchFrom: z.string().optional(),\n  branchId: z.string().optional(),\n  uncertainty: ConfidenceSchema.optional(),\n  dependencies: z.array(z.string()).optional(),\n  assumptions: z.array(z.string()).optional(),\n});\n\nexport type BaseThoughtInput = z.infer<typeof BaseThoughtSchema>;\n\n/**\n * Session action schema for non-thought operations\n */\nexport const SessionActionSchema = z.object({\n  sessionId: z.string().optional(),\n  action: SessionActionEnum,\n  exportFormat: ExportFormatEnum.optional(),\n  newMode: z.string().optional(),\n  problemType: z.string().optional(),\n  problemCharacteristics: z.object({\n    domain: z.string(),\n    complexity: LevelEnum,\n    uncertainty: LevelEnum,\n    timeDependent: z.boolean(),\n    multiAgent: z.boolean(),\n    requiresProof: z.boolean(),\n    requiresQuantification: z.boolean(),\n    hasIncompleteInfo: z.boolean(),\n    requiresExplanation: z.boolean(),\n    hasAlternatives: z.boolean(),\n  }).optional(),\n  includeCombinations: z.boolean().optional(),\n});\n\nexport type SessionActionInput = z.infer<typeof SessionActionSchema>;\n","/**\n * Shared Schema Components (v4.1.0)\n * Sprint 7 Task 7.5: Consolidate common schema patterns\n *\n * Reduces duplication across mode-specific schemas.\n * Import these shared components instead of redefining.\n */\n\nimport { z } from 'zod';\n\n// ============================================================\n// NUMERIC SCHEMAS\n// ============================================================\n\n/**\n * Confidence/probability value (0-1 range)\n * Used for: uncertainty, confidence, probability, strength, mass\n */\nexport const ConfidenceSchema = z.number().min(0).max(1);\n\n/**\n * Positive integer (1+)\n */\nexport const PositiveIntSchema = z.number().int().min(1);\n\n// ============================================================\n// COMMON ENUMS\n// ============================================================\n\n/**\n * Three-level scale (low/medium/high)\n * Used for: complexity, uncertainty, priority\n */\nexport const LevelEnum = z.enum(['low', 'medium', 'high']);\n\n/**\n * Impact assessment\n */\nexport const ImpactEnum = z.enum(['positive', 'negative', 'neutral']);\n\n/**\n * Export formats supported by DeepThinking MCP\n */\nexport const ExportFormatEnum = z.enum([\n  'markdown',\n  'latex',\n  'json',\n  'html',\n  'jupyter',\n  'mermaid',\n  'dot',\n  'ascii',\n]);\n\n/**\n * Session actions\n */\nexport const SessionActionEnum = z.enum([\n  'summarize',\n  'export',\n  'get_session',\n  'switch_mode',\n  'recommend_mode',\n  'delete_session',\n]);\n\n/**\n * Proof strategy types (mathematics mode)\n */\nexport const ProofTypeEnum = z.enum([\n  'direct',\n  'contradiction',\n  'induction',\n  'construction',\n  'contrapositive',\n]);\n\n/**\n * Time units\n */\nexport const TimeUnitEnum = z.enum([\n  'milliseconds',\n  'seconds',\n  'minutes',\n  'hours',\n  'days',\n  'months',\n  'years',\n]);\n\n/**\n * Temporal constraint types (Allen's interval algebra)\n */\nexport const TemporalConstraintEnum = z.enum([\n  'before',\n  'after',\n  'during',\n  'overlaps',\n  'meets',\n  'starts',\n  'finishes',\n  'equals',\n]);\n\n/**\n * Temporal relation types\n */\nexport const TemporalRelationEnum = z.enum([\n  'before',\n  'after',\n  'during',\n  'overlaps',\n  'meets',\n  'starts',\n  'finishes',\n  'equals',\n  'causes',\n]);\n\n/**\n * Event types\n */\nexport const EventTypeEnum = z.enum(['instant', 'interval']);\n\n/**\n * Tensor transformation types\n */\nexport const TransformationEnum = z.enum(['covariant', 'contravariant', 'mixed']);\n\n/**\n * Shannon methodology stages\n */\nexport const ShannonStageEnum = z.enum([\n  'problem_definition',\n  'constraints',\n  'model',\n  'proof',\n  'implementation',\n]);\n\n// ============================================================\n// REUSABLE OBJECT SCHEMAS\n// ============================================================\n\n/**\n * Basic entity with ID and name\n */\nexport const EntitySchema = z.object({\n  id: z.string(),\n  name: z.string(),\n});\n\n/**\n * Entity with description\n */\nexport const DescribedEntitySchema = EntitySchema.extend({\n  description: z.string(),\n});\n\n// ============================================================\n// TYPE EXPORTS\n// ============================================================\n\nexport type Confidence = z.infer<typeof ConfidenceSchema>;\nexport type Level = z.infer<typeof LevelEnum>;\nexport type Impact = z.infer<typeof ImpactEnum>;\nexport type ExportFormat = z.infer<typeof ExportFormatEnum>;\nexport type SessionAction = z.infer<typeof SessionActionEnum>;\nexport type ProofType = z.infer<typeof ProofTypeEnum>;\nexport type TimeUnit = z.infer<typeof TimeUnitEnum>;\nexport type TemporalConstraint = z.infer<typeof TemporalConstraintEnum>;\nexport type TemporalRelation = z.infer<typeof TemporalRelationEnum>;\nexport type EventType = z.infer<typeof EventTypeEnum>;\nexport type Transformation = z.infer<typeof TransformationEnum>;\nexport type ShannonStage = z.infer<typeof ShannonStageEnum>;\n","/**\n * Core Mode Schemas (v5.0.0)\n * Phase 5 Sprint 2: Renamed to reflect restructuring\n * - StandardSchema: Sequential, Shannon, Hybrid modes (was CoreSchema)\n * - CoreModeSchema: Inductive, Deductive, Abductive modes (NEW)\n */\n\nimport { z } from 'zod';\nimport { BaseThoughtSchema } from '../base.js';\nimport { ShannonStageEnum } from '../shared.js';\n\n/**\n * Standard workflow modes (sequential, shannon, hybrid)\n * Renamed from CoreSchema in v5.0.0\n */\nexport const StandardSchema = BaseThoughtSchema.extend({\n  mode: z.enum(['sequential', 'shannon', 'hybrid']),\n  stage: ShannonStageEnum.optional(),\n  activeModes: z.array(z.string()).optional(),\n});\n\n/**\n * Core reasoning modes (inductive, deductive, abductive)\n * NEW in v5.0.0\n */\nexport const CoreModeSchema = BaseThoughtSchema.extend({\n  mode: z.enum(['inductive', 'deductive', 'abductive']),\n  // Inductive properties\n  observations: z.array(z.string()).optional(),\n  pattern: z.string().optional(),\n  generalization: z.string().optional(),\n  confidence: z.number().min(0).max(1).optional(),\n  counterexamples: z.array(z.string()).optional(),\n  sampleSize: z.number().int().min(1).optional(),\n  // Deductive properties\n  premises: z.array(z.string()).optional(),\n  conclusion: z.string().optional(),\n  logicForm: z.string().optional(),\n  validityCheck: z.boolean().optional(),\n  soundnessCheck: z.boolean().optional(),\n  // Abductive properties\n  hypotheses: z.array(z.object({\n    id: z.string(),\n    explanation: z.string(),\n    score: z.number().optional(),\n  })).optional(),\n  bestExplanation: z.object({\n    id: z.string(),\n    explanation: z.string(),\n    score: z.number().optional(),\n  }).optional(),\n});\n\n// Backward compatibility export\nexport const CoreSchema = StandardSchema;\n\nexport type StandardInput = z.infer<typeof StandardSchema>;\nexport type CoreModeInput = z.infer<typeof CoreModeSchema>;\nexport type CoreInput = z.infer<typeof CoreSchema>;\n","/**\r\n * Mathematics Mode Schemas (v7.0.0)\r\n * Sprint 5 Task 5.3: Mathematics, Physics modes\r\n * Sprint 7 Task 7.5: Use shared enums\r\n * Phase 8 Sprint 4: Proof decomposition fields\r\n */\r\n\r\nimport { z } from 'zod';\r\nimport { BaseThoughtSchema } from '../base.js';\r\nimport { ProofTypeEnum, TransformationEnum } from '../shared.js';\r\n\r\nconst ProofStrategySchema = z.object({\r\n  type: ProofTypeEnum,\r\n  steps: z.array(z.string()),\r\n});\r\n\r\nconst MathematicalModelSchema = z.object({\r\n  latex: z.string(),\r\n  symbolic: z.string(),\r\n  ascii: z.string().optional(),\r\n});\r\n\r\nconst TensorPropertiesSchema = z.object({\r\n  rank: z.tuple([z.number(), z.number()]),\r\n  components: z.string(),\r\n  latex: z.string(),\r\n  symmetries: z.array(z.string()),\r\n  invariants: z.array(z.string()),\r\n  transformation: TransformationEnum,\r\n});\r\n\r\nconst PhysicalInterpretationSchema = z.object({\r\n  quantity: z.string(),\r\n  units: z.string(),\r\n  conservationLaws: z.array(z.string()),\r\n});\r\n\r\n/**\r\n * Phase 8: Proof step input for decomposition\r\n */\r\nconst ProofStepInputSchema = z.object({\r\n  stepNumber: z.number().int().positive(),\r\n  statement: z.string(),\r\n  justification: z.string().optional(),\r\n  latex: z.string().optional(),\r\n  referencesSteps: z.array(z.number()).optional(),\r\n});\r\n\r\nexport const MathSchema = BaseThoughtSchema.extend({\r\n  mode: z.enum(['mathematics', 'physics', 'computability']),\r\n  thoughtType: z.string().optional(),\r\n  proofStrategy: ProofStrategySchema.optional(),\r\n  mathematicalModel: MathematicalModelSchema.optional(),\r\n  tensorProperties: TensorPropertiesSchema.optional(),\r\n  physicalInterpretation: PhysicalInterpretationSchema.optional(),\r\n\r\n  // Phase 8: Proof decomposition fields\r\n  proofSteps: z.array(ProofStepInputSchema).optional(),\r\n  theorem: z.string().optional(),\r\n  hypotheses: z.array(z.string()).optional(),\r\n  analysisDepth: z.enum(['shallow', 'standard', 'deep']).optional(),\r\n  includeConsistencyCheck: z.boolean().optional(),\r\n  traceAssumptions: z.boolean().optional(),\r\n});\r\n\r\nexport type MathInput = z.infer<typeof MathSchema>;\r\n","/**\n * Temporal Mode Schema (v4.1.0)\n * Sprint 5 Task 5.3: Temporal reasoning with Allen's interval algebra\n * Sprint 7 Task 7.5: Use shared enums\n */\n\nimport { z } from 'zod';\nimport { BaseThoughtSchema } from '../base.js';\nimport {\n  ConfidenceSchema,\n  TimeUnitEnum,\n  TemporalConstraintEnum,\n  TemporalRelationEnum,\n  EventTypeEnum,\n} from '../shared.js';\n\nconst TimelineSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  timeUnit: TimeUnitEnum,\n  events: z.array(z.string()),\n  startTime: z.number().optional(),\n  endTime: z.number().optional(),\n});\n\nconst TemporalEventSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  description: z.string(),\n  timestamp: z.number(),\n  type: EventTypeEnum,\n  duration: z.number().optional(),\n  properties: z.record(z.string(), z.unknown()).optional(),\n});\n\nconst TemporalConstraintSchema = z.object({\n  id: z.string(),\n  type: TemporalConstraintEnum,\n  subject: z.string(),\n  object: z.string(),\n  confidence: ConfidenceSchema,\n});\n\nconst TemporalIntervalSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  start: z.number(),\n  end: z.number(),\n  contains: z.array(z.string()).optional(),\n  overlaps: z.array(z.string()).optional(),\n});\n\nconst TemporalRelationSchema = z.object({\n  id: z.string(),\n  from: z.string(),\n  to: z.string(),\n  relationType: TemporalRelationEnum,\n  strength: ConfidenceSchema,\n  delay: z.number().optional(),\n});\n\n/**\n * Temporal reasoning schema\n */\nexport const TemporalSchema = BaseThoughtSchema.extend({\n  mode: z.literal('temporal'),\n  timeline: TimelineSchema.optional(),\n  events: z.array(TemporalEventSchema).optional(),\n  constraints: z.array(TemporalConstraintSchema).optional(),\n  intervals: z.array(TemporalIntervalSchema).optional(),\n  relations: z.array(TemporalRelationSchema).optional(),\n});\n\nexport type TemporalInput = z.infer<typeof TemporalSchema>;\n","/**\n * Probabilistic Mode Schemas (v4.1.0)\n * Sprint 5 Task 5.3: Bayesian, Evidential modes\n * Sprint 7 Task 7.5: Use shared schemas\n */\n\nimport { z } from 'zod';\nimport { BaseThoughtSchema } from '../base.js';\nimport { ConfidenceSchema } from '../shared.js';\n\nconst BeliefMassSchema = z.object({\n  hypothesisSet: z.array(z.string()),\n  mass: ConfidenceSchema,\n  justification: z.string(),\n});\n\n/**\n * Probabilistic reasoning schema (Bayesian + Evidential)\n */\nexport const ProbabilisticSchema = BaseThoughtSchema.extend({\n  mode: z.enum(['bayesian', 'evidential']),\n\n  // Evidential (Dempster-Shafer) specific\n  frameOfDiscernment: z.array(z.string()).optional(),\n  beliefMasses: z.array(BeliefMassSchema).optional(),\n});\n\nexport type ProbabilisticInput = z.infer<typeof ProbabilisticSchema>;\n","/**\n * Causal Mode Schemas (v4.1.0)\n * Sprint 5 Task 5.3: Causal, Counterfactual, Abductive modes\n * v6.1.2: Added nodes/edges for causal graph support\n */\n\nimport { z } from 'zod';\nimport { BaseThoughtSchema } from '../base.js';\n\n/**\n * Causal node schema\n */\nconst CausalNodeSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  description: z.string().optional(),\n  type: z.enum(['cause', 'effect', 'mediator', 'confounder']).optional(),\n});\n\n/**\n * Causal edge schema\n */\nconst CausalEdgeSchema = z.object({\n  from: z.string(),\n  to: z.string(),\n  type: z.string().optional(),\n  strength: z.number().min(0).max(1).optional(),\n});\n\n/**\n * Counterfactual scenario schema\n */\nconst CounterfactualSchema = z.object({\n  actual: z.string().optional(),\n  hypothetical: z.string().optional(),\n  consequence: z.string().optional(),\n});\n\n/**\n * Intervention schema\n */\nconst InterventionSchema = z.object({\n  node: z.string(),\n  value: z.string().optional(),\n  effect: z.string().optional(),\n});\n\nexport const CausalSchema = BaseThoughtSchema.extend({\n  mode: z.enum(['causal', 'counterfactual', 'abductive']),\n  // Causal graph properties (top-level for JSON schema compatibility)\n  nodes: z.array(CausalNodeSchema).optional(),\n  edges: z.array(CausalEdgeSchema).optional(),\n  // Nested causalGraph for backwards compatibility\n  causalGraph: z.object({\n    nodes: z.array(CausalNodeSchema),\n    edges: z.array(CausalEdgeSchema),\n  }).optional(),\n  // Counterfactual properties\n  counterfactual: CounterfactualSchema.optional(),\n  // Intervention properties\n  interventions: z.array(InterventionSchema).optional(),\n  // Observations for abductive reasoning\n  observations: z.array(z.string()).optional(),\n  explanations: z.array(z.object({\n    hypothesis: z.string(),\n    plausibility: z.number().min(0).max(1).optional(),\n  })).optional(),\n});\n\nexport type CausalInput = z.infer<typeof CausalSchema>;\n","/**\n * Strategic Mode Schemas (v4.1.0)\n * Sprint 5 Task 5.3: Game Theory, Optimization modes\n * Sprint 7 Task 7.5: Use shared schemas\n */\n\nimport { z } from 'zod';\nimport { BaseThoughtSchema } from '../base.js';\nimport { ConfidenceSchema } from '../shared.js';\n\nconst PlayerSchema = z.object({\n  id: z.string(),\n  name: z.string(),\n  isRational: z.boolean(),\n  availableStrategies: z.array(z.string()),\n  role: z.string().optional(),\n});\n\nconst StrategySchema = z.object({\n  id: z.string(),\n  playerId: z.string(),\n  name: z.string(),\n  description: z.string(),\n  isPure: z.boolean(),\n  probability: ConfidenceSchema.optional(),\n});\n\n/**\n * Payoff entry\n */\nconst PayoffEntrySchema = z.object({\n  strategyProfile: z.array(z.string()),\n  payoffs: z.array(z.number()),\n});\n\n/**\n * Payoff matrix\n */\nconst PayoffMatrixSchema = z.object({\n  players: z.array(z.string()),\n  dimensions: z.array(z.number()),\n  payoffs: z.array(PayoffEntrySchema),\n});\n\n/**\n * Strategic reasoning schema (Game Theory + Optimization)\n */\nexport const StrategicSchema = BaseThoughtSchema.extend({\n  mode: z.enum(['gametheory', 'optimization']),\n\n  // Game theory specific\n  players: z.array(PlayerSchema).optional(),\n  strategies: z.array(StrategySchema).optional(),\n  payoffMatrix: PayoffMatrixSchema.optional(),\n});\n\nexport type StrategicInput = z.infer<typeof StrategicSchema>;\n","/**\r\n * Analytical Mode Schemas (v6.0.0)\r\n * Sprint 5 Task 5.3: Analogical, First Principles modes\r\n * Phase 6: Added Meta-Reasoning mode\r\n */\r\n\r\nimport { z } from 'zod';\r\nimport { BaseThoughtSchema } from '../base.js';\r\n\r\nexport const AnalyticalSchema = BaseThoughtSchema.extend({\r\n  mode: z.enum(['analogical', 'firstprinciples', 'metareasoning', 'cryptanalytic']),\r\n});\r\n\r\nexport type AnalyticalInput = z.infer<typeof AnalyticalSchema>;\r\n","/**\n * Scientific Mode Schemas (v4.1.0)\n * Sprint 5 Task 5.3: Scientific Method, Systems Thinking, Formal Logic modes\n */\n\nimport { z } from 'zod';\nimport { BaseThoughtSchema } from '../base.js';\n\nexport const ScientificSchema = BaseThoughtSchema.extend({\n  mode: z.enum(['scientificmethod', 'systemsthinking', 'formallogic']),\n});\n\nexport type ScientificInput = z.infer<typeof ScientificSchema>;\n","/**\r\n * Engineering Mode Schemas (v7.5.0)\r\n * Phase 14: Engineering and Algorithmic modes accessible via MCP tools\r\n */\r\n\r\nimport { z } from 'zod';\r\nimport { BaseThoughtSchema } from '../base.js';\r\n\r\nexport const EngineeringSchema = BaseThoughtSchema.extend({\r\n  mode: z.enum(['engineering', 'algorithmic']),\r\n});\r\n\r\nexport type EngineeringInput = z.infer<typeof EngineeringSchema>;\r\n","/**\r\n * Academic Mode Schema (v7.5.0)\r\n * Phase 14: Academic research modes accessible via MCP tools\r\n * Designed for PhD students and scientific paper writing\r\n * Zod validation schema for synthesis, argumentation, critique, analysis modes\r\n */\r\n\r\nimport { z } from 'zod';\r\nimport { BaseThoughtSchema } from '../base.js';\r\nimport { ConfidenceSchema } from '../shared.js';\r\n\r\n/**\r\n * Academic mode enum\r\n */\r\nexport const AcademicModeEnum = z.enum(['synthesis', 'argumentation', 'critique', 'analysis']);\r\n\r\n/**\r\n * Source schema for synthesis mode\r\n */\r\nconst SourceSchema = z.object({\r\n  id: z.string(),\r\n  type: z.string().optional(),\r\n  title: z.string(),\r\n  authors: z.array(z.string()).optional(),\r\n  year: z.number().int().optional(),\r\n  venue: z.string().optional(),\r\n  doi: z.string().optional(),\r\n  relevance: ConfidenceSchema.optional(),\r\n});\r\n\r\n/**\r\n * Theme schema for synthesis mode\r\n */\r\nconst ThemeSchema = z.object({\r\n  id: z.string(),\r\n  name: z.string(),\r\n  description: z.string().optional(),\r\n  sourceIds: z.array(z.string()).optional(),\r\n  strength: ConfidenceSchema.optional(),\r\n  consensus: z.enum(['strong', 'moderate', 'weak', 'contested']).optional(),\r\n});\r\n\r\n/**\r\n * Gap schema for synthesis mode\r\n */\r\nconst GapSchema = z.object({\r\n  id: z.string(),\r\n  description: z.string(),\r\n  type: z.enum(['empirical', 'theoretical', 'methodological', 'population', 'contextual']).optional(),\r\n  importance: z.enum(['critical', 'significant', 'moderate', 'minor']).optional(),\r\n});\r\n\r\n/**\r\n * Claim schema for argumentation mode (Toulmin)\r\n */\r\nconst ClaimSchema = z.object({\r\n  id: z.string(),\r\n  statement: z.string(),\r\n  type: z.enum(['fact', 'value', 'policy', 'definition', 'cause']).optional(),\r\n  strength: z.enum(['strong', 'moderate', 'tentative']).optional(),\r\n});\r\n\r\n/**\r\n * Grounds schema for argumentation mode\r\n */\r\nconst GroundsSchema = z.object({\r\n  id: z.string(),\r\n  type: z.enum(['empirical', 'statistical', 'testimonial', 'analogical', 'logical', 'textual']).optional(),\r\n  content: z.string(),\r\n  source: z.string().optional(),\r\n  reliability: ConfidenceSchema.optional(),\r\n});\r\n\r\n/**\r\n * Warrant schema for argumentation mode\r\n */\r\nconst WarrantSchema = z.object({\r\n  id: z.string(),\r\n  statement: z.string(),\r\n  type: z.enum(['generalization', 'analogy', 'causal', 'authority', 'principle', 'definition']).optional(),\r\n  groundsIds: z.array(z.string()).optional(),\r\n  claimId: z.string().optional(),\r\n});\r\n\r\n/**\r\n * Rebuttal schema for argumentation mode\r\n */\r\nconst RebuttalSchema = z.object({\r\n  id: z.string(),\r\n  objection: z.string(),\r\n  type: z.enum(['factual', 'logical', 'ethical', 'practical', 'definitional']).optional(),\r\n  strength: z.enum(['strong', 'moderate', 'weak']).optional(),\r\n  response: z.string().optional(),\r\n});\r\n\r\n/**\r\n * Critiqued work schema\r\n */\r\nconst CritiquedWorkSchema = z.object({\r\n  id: z.string().optional(),\r\n  title: z.string(),\r\n  authors: z.array(z.string()).optional(),\r\n  year: z.number().int().optional(),\r\n  type: z.string().optional(),\r\n  field: z.string().optional(),\r\n});\r\n\r\n/**\r\n * Qualitative code schema for analysis mode\r\n */\r\nconst CodeSchema = z.object({\r\n  id: z.string(),\r\n  label: z.string(),\r\n  definition: z.string().optional(),\r\n  type: z.enum(['descriptive', 'in_vivo', 'process', 'initial', 'focused', 'axial', 'theoretical', 'emotion', 'value']).optional(),\r\n  frequency: z.number().int().optional(),\r\n  examples: z.array(z.string()).optional(),\r\n});\r\n\r\n/**\r\n * Memo schema for analysis mode\r\n */\r\nconst MemoSchema = z.object({\r\n  id: z.string(),\r\n  type: z.enum(['analytical', 'theoretical', 'methodological', 'reflexive', 'code', 'operational']).optional(),\r\n  content: z.string(),\r\n  relatedCodes: z.array(z.string()).optional(),\r\n});\r\n\r\n/**\r\n * Academic research schema - combines all 4 modes\r\n */\r\nexport const AcademicSchema = BaseThoughtSchema.extend({\r\n  mode: AcademicModeEnum,\r\n  thoughtType: z.string().optional(),\r\n\r\n  // Synthesis properties\r\n  sources: z.array(SourceSchema).optional(),\r\n  themes: z.array(ThemeSchema).optional(),\r\n  gaps: z.array(GapSchema).optional(),\r\n\r\n  // Argumentation properties (Toulmin model)\r\n  claims: z.array(ClaimSchema).optional(),\r\n  grounds: z.array(GroundsSchema).optional(),\r\n  warrants: z.array(WarrantSchema).optional(),\r\n  rebuttals: z.array(RebuttalSchema).optional(),\r\n  argumentStrength: ConfidenceSchema.optional(),\r\n\r\n  // Critique properties\r\n  critiquedWork: CritiquedWorkSchema.optional(),\r\n  strengths: z.array(z.string()).optional(),\r\n  weaknesses: z.array(z.string()).optional(),\r\n  suggestions: z.array(z.string()).optional(),\r\n\r\n  // Analysis properties (qualitative)\r\n  methodology: z.enum([\r\n    'thematic_analysis',\r\n    'grounded_theory',\r\n    'discourse_analysis',\r\n    'content_analysis',\r\n    'phenomenological',\r\n    'narrative_analysis',\r\n    'framework_analysis',\r\n    'template_analysis',\r\n    'mixed_qualitative',\r\n  ]).optional(),\r\n  dataSources: z.array(z.object({\r\n    id: z.string(),\r\n    type: z.string(),\r\n    description: z.string().optional(),\r\n    participantId: z.string().optional(),\r\n  })).optional(),\r\n  codes: z.array(CodeSchema).optional(),\r\n  memos: z.array(MemoSchema).optional(),\r\n  saturationReached: z.boolean().optional(),\r\n\r\n  // Shared\r\n  keyInsight: z.string().optional(),\r\n});\r\n\r\nexport type AcademicInput = z.infer<typeof AcademicSchema>;\r\n"]}