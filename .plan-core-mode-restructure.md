# Plan: Rename deepthinking_core ‚Üí deepthinking_standard & Create New deepthinking_core

## Executive Summary

**Goal**: Restructure the core reasoning modes to better reflect their purpose:
1. **Rename** `deepthinking_core` ‚Üí `deepthinking_standard` (keeps sequential, shannon, hybrid)
2. **Create new** `deepthinking_core` with fundamental reasoning types: inductive, deductive, abductive
3. **Move** abductive from `deepthinking_causal` tool to new `deepthinking_core`

**Rationale**:
- "Core" should contain fundamental reasoning types (inductive/deductive/abductive)
- Current "core" modes (sequential/shannon/hybrid) are better described as "standard" workflows
- Consolidates basic logical reasoning into one tool

**Impact**: Breaking change requiring version bump to v5.0.0

---

## Current State Analysis

### Current `deepthinking_core` Tool
**File**: `src/tools/json-schemas.ts:79-109`
**Handles 3 modes**:
- `sequential` - Iterative reasoning with revision/branching
- `shannon` - 5-stage methodology (problem ‚Üí constraints ‚Üí model ‚Üí proof ‚Üí implementation)
- `hybrid` - Combines multiple modes based on problem characteristics

**Current Location in Tools**:
```typescript
// src/tools/definitions.ts
export const tools = {
  deepthinking_core: jsonSchemas[0],  // Sequential, Shannon, Hybrid
  // ... 8 other tools
};

export const modeToToolMap: Record<string, string> = {
  sequential: 'deepthinking_core',
  shannon: 'deepthinking_core',
  hybrid: 'deepthinking_core',
  // ...
};
```

### Current `abductive` Mode
**Currently in**: `deepthinking_causal` tool
**File**: `src/tools/json-schemas.ts` (around line 400+)
**Grouped with**: causal, counterfactual modes

**Type Definition**: EXISTS in `src/types/modes/` (need to verify structure)
**Status**: Experimental mode with limited runtime implementation

---

## Proposed New Structure

### New `deepthinking_core` Tool
**Purpose**: Fundamental logical reasoning types
**Modes**: 3 basic reasoning patterns
1. **Inductive** - Specific observations ‚Üí General principles (NEW)
2. **Deductive** - General principles ‚Üí Specific conclusions (NEW)
3. **Abductive** - Observations ‚Üí Best explanation (MOVED from causal tool)

**Tool Name**: `deepthinking_core`
**Description**: "Core reasoning: inductive (specific‚Üígeneral), deductive (general‚Üíspecific), abductive (inference to best explanation)"

### Renamed `deepthinking_standard` Tool
**Purpose**: Standard workflow modes
**Modes**: 3 workflow patterns (unchanged functionality)
1. **Sequential** - Iterative reasoning with revision/branching
2. **Shannon** - 5-stage systematic methodology
3. **Hybrid** - Intelligent multi-mode combination

**Tool Name**: `deepthinking_standard`
**Description**: "Standard workflows: sequential (iterative), shannon (5-stage), hybrid (multi-mode)"

---

## Implementation Plan

### Phase 1: Design New Mode Types (Inductive & Deductive)

#### Task 1.1: Create InductiveThought Type
**File**: `src/types/modes/inductive.ts` (NEW)
**Structure**:
```typescript
export interface InductiveThought extends BaseThought {
  mode: ThinkingMode.INDUCTIVE;

  thoughtType?:
    | 'observation'        // Specific observations
    | 'pattern_detection'  // Identifying patterns
    | 'generalization'     // Forming general principle
    | 'hypothesis'         // Proposed general rule
    | 'validation';        // Testing generalization

  // Observations collected
  observations?: Observation[];

  // Patterns identified
  patterns?: Pattern[];

  // Generalization formed
  generalization?: {
    principle: string;
    confidence: number;      // 0-1
    supportingEvidence: string[];
    counterExamples?: string[];
  };

  // Inductive strength
  inductiveStrength?: number;  // 0-1 (how strong is the inference)
}

export interface Observation {
  id: string;
  description: string;
  context?: string;
  timestamp?: number;
}

export interface Pattern {
  id: string;
  description: string;
  observations: string[];  // IDs of supporting observations
  frequency?: number;      // How often pattern appears
}
```

#### Task 1.2: Create DeductiveThought Type
**File**: `src/types/modes/deductive.ts` (NEW)
**Structure**:
```typescript
export interface DeductiveThought extends BaseThought {
  mode: ThinkingMode.DEDUCTIVE;

  thoughtType?:
    | 'premise'            // Establishing general principle
    | 'inference_rule'     // Defining inference rule
    | 'application'        // Applying to specific case
    | 'conclusion'         // Specific conclusion
    | 'verification';      // Checking logical validity

  // Premises (general principles)
  premises?: Premise[];

  // Inference rules applied
  inferenceRules?: InferenceRule[];

  // Specific case being analyzed
  specificCase?: {
    description: string;
    context?: Record<string, unknown>;
  };

  // Deductive conclusion
  conclusion?: {
    statement: string;
    validity: 'valid' | 'invalid' | 'unknown';
    derivation: string[];  // Steps in reasoning
  };

  // Logical form
  logicalForm?: string;  // e.g., "All A are B, X is A, therefore X is B"
}

export interface Premise {
  id: string;
  statement: string;
  type: 'major' | 'minor' | 'supporting';
  certainty: number;  // 0-1
}

export interface InferenceRule {
  id: string;
  name: string;  // e.g., "Modus Ponens", "Modus Tollens", "Syllogism"
  form: string;  // Logical form
}
```

#### Task 1.3: Review/Update AbductiveThought Type
**File**: `src/types/modes/abductive.ts` (VERIFY EXISTS)
**Action**: Review current structure, ensure it fits with inductive/deductive
**Expected Structure**:
```typescript
export interface AbductiveThought extends BaseThought {
  mode: ThinkingMode.ABDUCTIVE;

  thoughtType?:
    | 'observation'
    | 'hypothesis_generation'
    | 'evaluation'
    | 'best_explanation';

  observations?: string[];
  hypotheses?: Hypothesis[];
  evaluationCriteria?: {
    simplicity?: number;
    explanatoryPower?: number;
    consistency?: number;
  };
  bestExplanation?: {
    hypothesis: string;
    score: number;
    reasoning: string;
  };
}
```

**Estimated Time**: 4-6 hours

---

### Phase 2: Update Core Type System

#### Task 2.1: Add INDUCTIVE and DEDUCTIVE to ThinkingMode Enum
**File**: `src/types/core.ts`
**Changes**:
```typescript
export enum ThinkingMode {
  // ===== Core Reasoning Types (NEW) =====
  INDUCTIVE = 'inductive',     // NEW
  DEDUCTIVE = 'deductive',     // NEW
  ABDUCTIVE = 'abductive',     // MOVED from experimental

  // ===== Standard Workflow Modes (RENAMED GROUP) =====
  SEQUENTIAL = 'sequential',   // Was in "Fully Implemented"
  SHANNON = 'shannon',         // Was in "Fully Implemented"
  HYBRID = 'hybrid',           // Was in "Fully Implemented"

  // ===== Advanced Modes =====
  MATHEMATICS = 'mathematics',
  PHYSICS = 'physics',
  // ... rest unchanged
}
```

#### Task 2.2: Update Mode Categories
**File**: `src/types/core.ts`
**Changes**:
```typescript
/**
 * Core reasoning types - fundamental logical reasoning patterns
 */
export const CORE_REASONING_MODES: ReadonlyArray<ThinkingMode> = [
  ThinkingMode.INDUCTIVE,
  ThinkingMode.DEDUCTIVE,
  ThinkingMode.ABDUCTIVE,
];

/**
 * Standard workflow modes - general-purpose iterative methodologies
 */
export const STANDARD_WORKFLOW_MODES: ReadonlyArray<ThinkingMode> = [
  ThinkingMode.SEQUENTIAL,
  ThinkingMode.SHANNON,
  ThinkingMode.HYBRID,
];

/**
 * Advanced specialized modes
 */
export const ADVANCED_MODES: ReadonlyArray<ThinkingMode> = [
  ThinkingMode.MATHEMATICS,
  ThinkingMode.PHYSICS,
  ThinkingMode.METAREASONING,
  // ... etc
];

/**
 * All fully implemented modes
 */
export const FULLY_IMPLEMENTED_MODES: ReadonlyArray<ThinkingMode> = [
  ...CORE_REASONING_MODES,
  ...STANDARD_WORKFLOW_MODES,
  ...ADVANCED_MODES,
];

// Remove ABDUCTIVE from EXPERIMENTAL_MODES
export const EXPERIMENTAL_MODES: ReadonlyArray<ThinkingMode> = [
  // ThinkingMode.ABDUCTIVE,  // REMOVED - now in CORE_REASONING_MODES
  ThinkingMode.CAUSAL,
  ThinkingMode.BAYESIAN,
  // ... rest unchanged
];
```

#### Task 2.3: Add to Thought Union Type
**File**: `src/types/core.ts`
**Changes**:
```typescript
import type { InductiveThought } from './modes/inductive.js';
import type { DeductiveThought } from './modes/deductive.js';
import type { AbductiveThought } from './modes/abductive.js';

export type Thought =
  | InductiveThought   // NEW
  | DeductiveThought   // NEW
  | AbductiveThought   // MOVED from experimental
  | SequentialThought
  | ShannonThought
  // ... rest unchanged
```

**Estimated Time**: 2 hours

---

### Phase 3: Create Validation Schemas

#### Task 3.1: Create Zod Schemas
**File**: `src/validation/schemas.ts`

**InductiveSchema**:
```typescript
export const InductiveSchema = BaseThoughtSchema.extend({
  mode: z.literal('inductive'),
  thoughtType: z.enum(['observation', 'pattern_detection', 'generalization', 'hypothesis', 'validation']).optional(),
  observations: z.array(z.object({
    id: z.string(),
    description: z.string(),
    context: z.string().optional(),
    timestamp: z.number().optional(),
  })).optional(),
  patterns: z.array(z.object({
    id: z.string(),
    description: z.string(),
    observations: z.array(z.string()),
    frequency: z.number().optional(),
  })).optional(),
  generalization: z.object({
    principle: z.string(),
    confidence: ConfidenceSchema,
    supportingEvidence: z.array(z.string()),
    counterExamples: z.array(z.string()).optional(),
  }).optional(),
  inductiveStrength: ConfidenceSchema.optional(),
});
```

**DeductiveSchema**:
```typescript
export const DeductiveSchema = BaseThoughtSchema.extend({
  mode: z.literal('deductive'),
  thoughtType: z.enum(['premise', 'inference_rule', 'application', 'conclusion', 'verification']).optional(),
  premises: z.array(z.object({
    id: z.string(),
    statement: z.string(),
    type: z.enum(['major', 'minor', 'supporting']),
    certainty: ConfidenceSchema,
  })).optional(),
  inferenceRules: z.array(z.object({
    id: z.string(),
    name: z.string(),
    form: z.string(),
  })).optional(),
  specificCase: z.object({
    description: z.string(),
    context: z.record(z.string(), z.unknown()).optional(),
  }).optional(),
  conclusion: z.object({
    statement: z.string(),
    validity: z.enum(['valid', 'invalid', 'unknown']),
    derivation: z.array(z.string()),
  }).optional(),
  logicalForm: z.string().optional(),
});
```

**Update AbductiveSchema** (if needed)

#### Task 3.2: Create Validators
**Files**:
- `src/validation/validators/modes/inductive.ts` (NEW)
- `src/validation/validators/modes/deductive.ts` (NEW)
- Review `src/validation/validators/modes/abductive.ts` (if exists)

**Validation Logic**:
- Inductive: Check observation count, pattern frequency, generalization confidence
- Deductive: Check premise validity, inference rule application, logical form
- Abductive: Ensure hypotheses ranked by plausibility

#### Task 3.3: Register Validators
**File**: `src/validation/validator.ts`
**Changes**:
```typescript
import { InductiveValidator } from './validators/modes/inductive.js';
import { DeductiveValidator } from './validators/modes/deductive.js';

// In ValidatorFactory.getValidator():
case 'inductive':
  return new InductiveValidator();
case 'deductive':
  return new DeductiveValidator();
case 'abductive':
  return new AbductiveValidator();  // Ensure registered
```

**Estimated Time**: 6-8 hours

---

### Phase 4: Create JSON Schemas for MCP Tools

#### Task 4.1: Create deepthinking_standard Schema (Renamed from core)
**File**: `src/tools/json-schemas.ts`
**Action**: Copy current `deepthinking_core_schema`, rename, update description

**New Schema**:
```typescript
export const deepthinking_standard_schema = {
  name: "deepthinking_standard",
  description: "Standard workflow modes for general-purpose reasoning. " +
    "Sequential: Iterative step-by-step thinking with revision and branching support. " +
    "Shannon: 5-stage systematic methodology (problem‚Üíconstraints‚Üímodel‚Üíproof‚Üíimplementation). " +
    "Hybrid: Intelligently combines multiple modes based on problem characteristics. " +
    "Use for: General problem-solving, systematic analysis, complex multi-faceted problems.",
  inputSchema: {
    type: "object",
    properties: {
      ...baseThoughtProperties,
      mode: {
        type: "string",
        enum: ["sequential", "shannon", "hybrid"],
        description: "Workflow mode to use"
      },
      // ... rest of current deepthinking_core properties
    },
    required: baseThoughtRequired,
    additionalProperties: false,
  },
};
```

#### Task 4.2: Create NEW deepthinking_core Schema
**File**: `src/tools/json-schemas.ts`
**New Schema**:
```typescript
export const deepthinking_core_schema = {
  name: "deepthinking_core",
  description: "Core reasoning types - fundamental logical reasoning patterns. " +
    "Inductive: Reasoning from specific observations to general principles (pattern recognition, generalization). " +
    "Deductive: Reasoning from general principles to specific conclusions (logical inference, syllogisms). " +
    "Abductive: Inference to the best explanation (hypothesis generation, diagnostic reasoning). " +
    "Use for: Logical analysis, scientific reasoning, hypothesis testing, diagnostic thinking.",
  inputSchema: {
    type: "object",
    properties: {
      ...baseThoughtProperties,
      mode: {
        type: "string",
        enum: ["inductive", "deductive", "abductive"],
        description: "Core reasoning type to use"
      },
      thoughtType: {
        type: "string",
        enum: [
          // Inductive types
          "observation", "pattern_detection", "generalization", "hypothesis", "validation",
          // Deductive types
          "premise", "inference_rule", "application", "conclusion", "verification",
          // Abductive types
          "observation", "hypothesis_generation", "evaluation", "best_explanation"
        ],
        description: "Type of reasoning step within the mode"
      },

      // Inductive properties
      observations: {
        type: "array",
        items: {
          type: "object",
          properties: {
            id: { type: "string" },
            description: { type: "string" },
            context: { type: "string" },
            timestamp: { type: "number" },
          },
          required: ["id", "description"],
        },
        description: "Specific observations for inductive reasoning"
      },
      patterns: {
        type: "array",
        items: {
          type: "object",
          properties: {
            id: { type: "string" },
            description: { type: "string" },
            observations: { type: "array", items: { type: "string" } },
            frequency: { type: "number" },
          },
          required: ["id", "description", "observations"],
        },
        description: "Patterns identified in observations"
      },
      generalization: {
        type: "object",
        properties: {
          principle: { type: "string" },
          confidence: { type: "number", minimum: 0, maximum: 1 },
          supportingEvidence: { type: "array", items: { type: "string" } },
          counterExamples: { type: "array", items: { type: "string" } },
        },
        required: ["principle", "confidence", "supportingEvidence"],
        description: "General principle derived from observations"
      },
      inductiveStrength: {
        type: "number",
        minimum: 0,
        maximum: 1,
        description: "Strength of inductive inference (0-1)"
      },

      // Deductive properties
      premises: {
        type: "array",
        items: {
          type: "object",
          properties: {
            id: { type: "string" },
            statement: { type: "string" },
            type: { type: "string", enum: ["major", "minor", "supporting"] },
            certainty: { type: "number", minimum: 0, maximum: 1 },
          },
          required: ["id", "statement", "type", "certainty"],
        },
        description: "Premises for deductive reasoning"
      },
      inferenceRules: {
        type: "array",
        items: {
          type: "object",
          properties: {
            id: { type: "string" },
            name: { type: "string" },
            form: { type: "string" },
          },
          required: ["id", "name", "form"],
        },
        description: "Logical inference rules applied"
      },
      specificCase: {
        type: "object",
        properties: {
          description: { type: "string" },
          context: { type: "object" },
        },
        required: ["description"],
        description: "Specific case for deductive application"
      },
      conclusion: {
        type: "object",
        properties: {
          statement: { type: "string" },
          validity: { type: "string", enum: ["valid", "invalid", "unknown"] },
          derivation: { type: "array", items: { type: "string" } },
        },
        required: ["statement", "validity", "derivation"],
        description: "Deductive conclusion"
      },
      logicalForm: {
        type: "string",
        description: "Logical form of the argument"
      },

      // Abductive properties (move from causal tool)
      hypotheses: {
        type: "array",
        items: {
          type: "object",
          properties: {
            id: { type: "string" },
            description: { type: "string" },
            plausibility: { type: "number", minimum: 0, maximum: 1 },
          },
          required: ["id", "description"],
        },
        description: "Candidate explanations for abductive reasoning"
      },
      evaluationCriteria: {
        type: "object",
        properties: {
          simplicity: { type: "number", minimum: 0, maximum: 1 },
          explanatoryPower: { type: "number", minimum: 0, maximum: 1 },
          consistency: { type: "number", minimum: 0, maximum: 1 },
        },
        description: "Criteria for evaluating hypotheses"
      },
      bestExplanation: {
        type: "object",
        properties: {
          hypothesis: { type: "string" },
          score: { type: "number", minimum: 0, maximum: 1 },
          reasoning: { type: "string" },
        },
        required: ["hypothesis", "score", "reasoning"],
        description: "Best explanation selected"
      },
    },
    required: baseThoughtRequired,
    additionalProperties: false,
  },
};
```

#### Task 4.3: Update jsonSchemas Export Array
**File**: `src/tools/json-schemas.ts`
**Changes**:
```typescript
export const jsonSchemas = [
  deepthinking_core_schema,      // Index 0 - NEW CONTENT (inductive/deductive/abductive)
  deepthinking_standard_schema,  // Index 1 - NEW (sequential/shannon/hybrid)
  deepthinking_math_schema,      // Index 2 - unchanged
  deepthinking_temporal_schema,  // Index 3 - unchanged
  // ... rest shifted by +1 index
];
```

**CRITICAL**: All subsequent indices shift by +1!

**Estimated Time**: 6-8 hours

---

### Phase 5: Update Tool Definitions & Mappings

#### Task 5.1: Update Tool Definitions
**File**: `src/tools/definitions.ts`
**Changes**:
```typescript
export const tools = {
  deepthinking_core: jsonSchemas[0],       // NEW - inductive/deductive/abductive
  deepthinking_standard: jsonSchemas[1],   // NEW - sequential/shannon/hybrid
  deepthinking_math: jsonSchemas[2],       // Index +1
  deepthinking_temporal: jsonSchemas[3],   // Index +1
  deepthinking_probabilistic: jsonSchemas[4],  // Index +1
  deepthinking_causal: jsonSchemas[5],     // Index +1 - REMOVE abductive from description
  deepthinking_strategic: jsonSchemas[6],  // Index +1
  deepthinking_analytical: jsonSchemas[7], // Index +1
  deepthinking_scientific: jsonSchemas[8], // Index +1
  deepthinking_session: jsonSchemas[9],    // Index +1

  // Legacy tool (backward compatibility)
  deepthinking: legacyThinkingTool,
};
```

#### Task 5.2: Update Mode-to-Tool Mapping
**File**: `src/tools/definitions.ts`
**Changes**:
```typescript
export const modeToToolMap: Record<string, string> = {
  // Core reasoning types ‚Üí deepthinking_core
  inductive: 'deepthinking_core',    // NEW
  deductive: 'deepthinking_core',    // NEW
  abductive: 'deepthinking_core',    // MOVED from deepthinking_causal

  // Standard workflows ‚Üí deepthinking_standard
  sequential: 'deepthinking_standard',  // CHANGED from deepthinking_core
  shannon: 'deepthinking_standard',     // CHANGED from deepthinking_core
  hybrid: 'deepthinking_standard',      // CHANGED from deepthinking_core

  // Math modes ‚Üí deepthinking_math
  mathematics: 'deepthinking_math',
  physics: 'deepthinking_math',

  // Temporal ‚Üí deepthinking_temporal
  temporal: 'deepthinking_temporal',

  // Probabilistic ‚Üí deepthinking_probabilistic
  bayesian: 'deepthinking_probabilistic',
  evidential: 'deepthinking_probabilistic',

  // Causal ‚Üí deepthinking_causal
  causal: 'deepthinking_causal',
  counterfactual: 'deepthinking_causal',
  // abductive: REMOVED from here

  // ... rest unchanged
};
```

#### Task 5.3: Update Zod Schema Exports
**File**: `src/tools/definitions.ts`
**Changes**:
```typescript
export const toolSchemas = {
  deepthinking_core: CoreSchema,       // UPDATE - now for inductive/deductive/abductive
  deepthinking_standard: StandardSchema,  // NEW
  deepthinking_math: MathSchema,
  // ... rest unchanged
};
```

Where `CoreSchema` and `StandardSchema` need to be created in `src/validation/schemas.ts`:
```typescript
// Union of core reasoning schemas
export const CoreSchema = z.union([
  InductiveSchema,
  DeductiveSchema,
  AbductiveSchema,
]);

// Union of standard workflow schemas
export const StandardSchema = z.union([
  SequentialSchema,
  ShannonSchema,
  HybridSchema,
]);
```

**Estimated Time**: 3-4 hours

---

### Phase 6: Update ThoughtFactory

#### Task 6.1: Add Inductive Case
**File**: `src/services/ThoughtFactory.ts`
**Changes**:
```typescript
import {
  // ... existing imports
  InductiveThought,
  DeductiveThought,
} from '../types/index.js';

// In createThought() method:
case 'inductive':
  return {
    ...baseThought,
    mode: ThinkingMode.INDUCTIVE,
    thoughtType: toExtendedThoughtType(input.thoughtType, 'observation'),
    observations: input.observations || [],
    patterns: input.patterns || [],
    generalization: input.generalization,
    inductiveStrength: input.inductiveStrength,
  } as InductiveThought;
```

#### Task 6.2: Add Deductive Case
```typescript
case 'deductive':
  return {
    ...baseThought,
    mode: ThinkingMode.DEDUCTIVE,
    thoughtType: toExtendedThoughtType(input.thoughtType, 'premise'),
    premises: input.premises || [],
    inferenceRules: input.inferenceRules || [],
    specificCase: input.specificCase,
    conclusion: input.conclusion,
    logicalForm: input.logicalForm,
  } as DeductiveThought;
```

#### Task 6.3: Update Abductive Case (if needed)
Ensure abductive case exists and is properly typed.

**Estimated Time**: 2-3 hours

---

### Phase 7: Update deepthinking_causal Tool

#### Task 7.1: Remove Abductive from Causal Tool Schema
**File**: `src/tools/json-schemas.ts`
**Find**: `deepthinking_causal_schema`
**Changes**:
```typescript
export const deepthinking_causal_schema = {
  name: "deepthinking_causal",
  description: "Causal: graphs, counterfactual, abductive", // OLD
  description: "Causal reasoning: causal graphs, interventions, counterfactual scenarios", // NEW
  inputSchema: {
    type: "object",
    properties: {
      ...baseThoughtProperties,
      mode: {
        type: "string",
        enum: ["causal", "counterfactual", "abductive"], // OLD
        enum: ["causal", "counterfactual"],              // NEW - remove abductive
        description: "Causal reasoning mode to use"
      },
      // Remove abductive-specific properties
    },
    // ...
  },
};
```

**Estimated Time**: 1 hour

---

### Phase 8: Update Documentation

#### Task 8.1: Update README.md
**File**: `README.md`
**Changes**:

**Section: Reasoning Modes**
```markdown
### Core Reasoning Types

#### Inductive (NEW)
Reason from specific observations to general principles.

\`\`\`typescript
mode: 'inductive'
// Use for: Pattern recognition, scientific discovery, generalization
// Example: Observing multiple swans ‚Üí "All swans are white"
\`\`\`

#### Deductive (NEW)
Reason from general principles to specific conclusions.

\`\`\`typescript
mode: 'deductive'
// Use for: Logical inference, mathematical proofs, syllogisms
// Example: "All humans are mortal, Socrates is human ‚Üí Socrates is mortal"
\`\`\`

#### Abductive (MOVED)
Inference to the best explanation for observations.

\`\`\`typescript
mode: 'abductive'
// Use for: Debugging, diagnosis, hypothesis generation
// Example: "Car won't start, battery is dead ‚Üí Best explanation: dead battery"
\`\`\`

### Standard Workflow Modes (RENAMED)

#### Sequential
Iterative step-by-step reasoning with revision support.

\`\`\`typescript
mode: 'sequential'
// Use for: General problem-solving, systematic analysis
\`\`\`

[... Shannon and Hybrid sections - update to reflect rename]
```

**Section: MCP Tools**
```markdown
## MCP Tools

The server provides 10 specialized tools:

### Core Reasoning
- \`deepthinking_core\` - Fundamental reasoning: inductive, deductive, abductive (NEW)

### Standard Workflows
- \`deepthinking_standard\` - General workflows: sequential, shannon, hybrid (RENAMED)

### Specialized Modes
- \`deepthinking_math\` - Mathematics and physics reasoning
- \`deepthinking_temporal\` - Temporal logic and timeline analysis
- \`deepthinking_probabilistic\` - Bayesian and evidential reasoning
- \`deepthinking_causal\` - Causal graphs and counterfactuals
- \`deepthinking_strategic\` - Game theory and optimization
- \`deepthinking_analytical\` - Analogical and first principles
- \`deepthinking_scientific\` - Scientific method and systems thinking

### Session Management
- \`deepthinking_session\` - Session operations (export, summarize, etc.)
```

#### Task 8.2: Update CHANGELOG.md
**File**: `CHANGELOG.md`
**Add version 5.0.0**:
```markdown
## [5.0.0] - 2025-MM-DD

### üö® BREAKING CHANGES

#### Tool Restructuring: Core & Standard Modes
Major reorganization of fundamental reasoning modes for better clarity and purpose.

**What Changed:**
1. **deepthinking_core tool** - RENAMED to `deepthinking_standard`
   - Still handles: sequential, shannon, hybrid modes
   - Purpose: General-purpose workflow modes
   - No functionality changes, just better naming

2. **deepthinking_core tool** - NEW IMPLEMENTATION
   - Now handles fundamental reasoning: inductive, deductive, abductive
   - Purpose: Core logical reasoning types
   - Consolidates basic reasoning patterns

3. **abductive mode** - MOVED
   - From: `deepthinking_causal` tool
   - To: `deepthinking_core` tool (new)
   - Rationale: Better fit with fundamental reasoning types

**Migration Guide:**

For users of the old `deepthinking_core` tool:
\`\`\`typescript
// OLD (v4.x)
{
  "tool": "deepthinking_core",
  "arguments": {
    "mode": "sequential",
    // ...
  }
}

// NEW (v5.0+)
{
  "tool": "deepthinking_standard",  // ‚Üê Tool renamed
  "arguments": {
    "mode": "sequential",  // Mode unchanged
    // ...
  }
}
\`\`\`

For users of abductive mode:
\`\`\`typescript
// OLD (v4.x)
{
  "tool": "deepthinking_causal",
  "arguments": {
    "mode": "abductive",
    // ...
  }
}

// NEW (v5.0+)
{
  "tool": "deepthinking_core",  // ‚Üê Tool changed
  "arguments": {
    "mode": "abductive",  // Mode unchanged
    // ...
  }
}
\`\`\`

### ‚ú® Added

#### New Reasoning Modes
- **Inductive Reasoning** - Specific observations ‚Üí General principles
  - Pattern detection and generalization
  - Scientific discovery and hypothesis formation
  - Observation tracking with confidence scoring

- **Deductive Reasoning** - General principles ‚Üí Specific conclusions
  - Logical inference with formal rules
  - Premise-based argument construction
  - Validity checking and logical form analysis

#### New MCP Tool
- **deepthinking_standard** - Renamed from deepthinking_core
  - Handles sequential, shannon, hybrid modes
  - No functional changes, improved naming clarity

### üîÑ Changed

#### Tool Mappings
- `deepthinking_core` now maps to: inductive, deductive, abductive
- `deepthinking_standard` now maps to: sequential, shannon, hybrid
- `deepthinking_causal` no longer includes abductive mode

#### Type System
- Added `InductiveThought`, `DeductiveThought` interfaces
- Moved `AbductiveThought` from experimental to core
- Updated `CORE_REASONING_MODES`, `STANDARD_WORKFLOW_MODES` arrays
- Updated `Thought` union type

### üóëÔ∏è Removed

#### From deepthinking_causal
- Removed abductive mode (moved to deepthinking_core)

### üìä Impact

**Backward Compatibility:** ‚ùå Breaking changes
- Tool name change: `deepthinking_core` ‚Üí `deepthinking_standard` for sequential/shannon/hybrid
- Mode migration: abductive from causal to core tool
- Requires client code updates

**Version Bump:** Major (4.x ‚Üí 5.0.0)

**Upgrade Path:**
1. Update tool names in MCP client configurations
2. Update abductive mode tool mapping
3. Test all workflows
4. Update documentation references

---
```

#### Task 8.3: Update CLAUDE.md
**File**: `CLAUDE.md`
**Section: The 18 Reasoning Modes**
Update to reflect new categorization:
```markdown
## The 19 Reasoning Modes

**Core Reasoning (3 modes - fundamental logic)**:
- Inductive, Deductive, Abductive

**Standard Workflows (3 modes - general-purpose)**:
- Sequential, Shannon, Hybrid

**Advanced Specialized (13 modes)**:
- Mathematics, Physics, Metareasoning, Recursive, Modal, Stochastic,
  Constraint, Optimization, Temporal, Causal, Bayesian, Counterfactual, etc.
```

#### Task 8.4: Update Tool Listing Comments
**File**: `src/index.ts`
**Lines 7-17**:
```typescript
/**
 * Tools:
 * - deepthinking_core: inductive, deductive, abductive modes       // UPDATED
 * - deepthinking_standard: sequential, shannon, hybrid modes       // NEW
 * - deepthinking_math: mathematics, physics modes
 * - deepthinking_temporal: temporal reasoning
 * - deepthinking_probabilistic: bayesian, evidential modes
 * - deepthinking_causal: causal, counterfactual modes              // UPDATED (removed abductive)
 * - deepthinking_strategic: gametheory, optimization modes
 * - deepthinking_analytical: analogical, firstprinciples modes
 * - deepthinking_scientific: scientificmethod, systemsthinking, formallogic modes
 * - deepthinking_session: summarize, export, get_session, switch_mode, recommend_mode
 */
```

**Estimated Time**: 4-5 hours

---

### Phase 9: Testing

#### Task 9.1: Create Unit Tests for New Modes
**Files**:
- `tests/unit/types/inductive.test.ts`
- `tests/unit/types/deductive.test.ts`
- `tests/unit/validation/validators/inductive.test.ts`
- `tests/unit/validation/validators/deductive.test.ts`

**Test Coverage**:
- Type guards work correctly
- Validators catch invalid inputs
- Zod schemas parse correctly
- Factory creates proper thought objects

#### Task 9.2: Create Integration Tests
**File**: `tests/integration/core-modes.test.ts`
**Tests**:
- Create inductive session, add observations, form generalization
- Create deductive session, establish premises, derive conclusion
- Create abductive session, generate hypotheses, select best explanation
- Verify tool mapping works correctly

#### Task 9.3: Update Existing Tests
**Files to review**:
- Any tests referencing `deepthinking_core` tool expecting sequential/shannon/hybrid
- Update to use `deepthinking_standard`

**Search pattern**:
```bash
grep -r "deepthinking_core" tests/
grep -r "'sequential'" tests/
```

#### Task 9.4: Manual MCP Client Testing
**Test scenarios**:
1. Use new `deepthinking_core` with inductive mode
2. Use new `deepthinking_core` with deductive mode
3. Use new `deepthinking_core` with abductive mode
4. Use renamed `deepthinking_standard` with sequential mode
5. Use renamed `deepthinking_standard` with shannon mode
6. Use renamed `deepthinking_standard` with hybrid mode
7. Verify `deepthinking_causal` no longer accepts abductive mode

**Estimated Time**: 8-10 hours

---

### Phase 10: Migration & Backward Compatibility

#### Task 10.1: Create Migration Guide
**File**: `docs/MIGRATION_V5.md`
**Contents**:
- Detailed before/after examples
- Tool mapping table
- Breaking changes summary
- Step-by-step upgrade instructions
- Common pitfalls

#### Task 10.2: Consider Deprecation Period (Optional)
**Option A**: Hard break (v5.0.0 immediate)
- Pros: Clean break, forces proper usage
- Cons: May break existing integrations

**Option B**: Deprecation warnings (v4.5.0 ‚Üí v5.0.0)
- Add deprecated `deepthinking_core` alias pointing to `deepthinking_standard`
- Log warnings when old tool names used
- Remove in v5.0.0

**Recommendation**: Hard break with thorough documentation

#### Task 10.3: Update Templates
**File**: `templates/mode-scaffolding/example-mode.type.ts`
Update comments to reflect new structure

**Estimated Time**: 3-4 hours

---

## Summary of Changes

### Files to Create (6 new files)
1. `src/types/modes/inductive.ts`
2. `src/types/modes/deductive.ts`
3. `src/validation/validators/modes/inductive.ts`
4. `src/validation/validators/modes/deductive.ts`
5. `tests/integration/core-modes.test.ts`
6. `docs/MIGRATION_V5.md`

### Files to Modify (15+ files)
1. `src/types/core.ts` - Add modes, update enums, update union type
2. `src/validation/schemas.ts` - Add Inductive/Deductive schemas, create union schemas
3. `src/validation/validator.ts` - Register new validators
4. `src/tools/json-schemas.ts` - Create standard schema, replace core schema, update causal schema
5. `src/tools/definitions.ts` - Update tool exports, mode mappings, schema exports
6. `src/services/ThoughtFactory.ts` - Add inductive/deductive cases
7. `src/index.ts` - Update tool listing comments
8. `README.md` - Document new modes, update tool list
9. `CHANGELOG.md` - Add v5.0.0 entry
10. `CLAUDE.md` - Update mode count and categories
11. `package.json` - Bump version to 5.0.0
12. Plus test files...

### Breaking Changes
1. ‚ùå `deepthinking_core` tool renamed ‚Üí `deepthinking_standard`
2. ‚ùå `deepthinking_core` tool repurposed ‚Üí inductive/deductive/abductive
3. ‚ùå `abductive` mode moved from `deepthinking_causal` ‚Üí `deepthinking_core`

### Non-Breaking Additions
1. ‚úÖ New `inductive` mode
2. ‚úÖ New `deductive` mode
3. ‚úÖ Total modes: 18 ‚Üí 19

---

## Estimated Total Time

| Phase | Description | Hours |
|-------|-------------|-------|
| Phase 1 | Design new mode types | 4-6 |
| Phase 2 | Update core type system | 2 |
| Phase 3 | Create validation schemas | 6-8 |
| Phase 4 | Create JSON schemas | 6-8 |
| Phase 5 | Update tool definitions | 3-4 |
| Phase 6 | Update ThoughtFactory | 2-3 |
| Phase 7 | Update causal tool | 1 |
| Phase 8 | Update documentation | 4-5 |
| Phase 9 | Testing | 8-10 |
| Phase 10 | Migration guide | 3-4 |
| **TOTAL** | **Full implementation** | **39-55 hours** |

**Estimated Calendar Time**: 1-2 weeks full-time development

---

## Risk Assessment

### High Risk
1. **Breaking changes** - All clients using old tool names will break
2. **Index shifting** - jsonSchemas array indices all shift by +1
3. **Mode migration** - Abductive users must update their code

### Medium Risk
1. **Type complexity** - New modes add significant type surface area
2. **Validation coverage** - Must ensure all edge cases covered
3. **Documentation accuracy** - Must be perfectly clear for users

### Low Risk
1. **Performance** - No expected performance impact
2. **Build** - TypeScript should catch most issues
3. **Testing** - Existing test infrastructure robust

---

## Rollback Plan

If critical issues discovered:
1. Revert commit with `git revert`
2. Publish v4.4.1 hotfix
3. Address issues before re-attempting v5.0.0

**Recommendation**:
- Thorough testing in v5.0.0-alpha, v5.0.0-beta before stable release
- Consider feature flag for gradual rollout

---

## Next Steps

1. **Review this plan** - Get approval on approach
2. **Decide on timeline** - When to start implementation
3. **Choose strategy** - Hard break vs deprecation period
4. **Create branch** - `feature/v5-core-restructure`
5. **Begin Phase 1** - Start with type definitions

---

## Questions for Decision

1. **Hard break vs deprecation?**
   - Immediate v5.0.0 or v4.5.0 deprecation warnings first?

2. **Mode naming?**
   - Happy with inductive/deductive/abductive for core?
   - Happy with sequential/shannon/hybrid for standard?

3. **Scope creep?**
   - Should we add any other fundamental reasoning types to core?
   - Analogical reasoning? Lateral thinking?

4. **Beta testing?**
   - Want alpha/beta releases before v5.0.0 stable?

5. **Timeline?**
   - Start immediately or after other priorities?

---

End of Plan
