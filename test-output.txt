
> deepthinking-mcp@3.1.0 test
> vitest


[7m[1m[34m DEV [39m[22m[27m [34mv1.6.1[39m [90mC:/mcp-servers/deepthinking-mcp[39m

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mMultiple Session Management[2m > [22m[2mshould create and manage multiple sessions independently[22m[39m
[2025-11-23T20:57:04.911Z] INFO: Session created
  Context: {
  "sessionId": "1bd515e2-361a-4c76-8c6f-2a74c4034766",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.914Z] INFO: Session created
  Context: {
  "sessionId": "32f6e11b-209a-4f17-a119-08abe8327b39",
  "title": "Session 2",
  "mode": "shannon"
}
[2025-11-23T20:57:04.914Z] INFO: Session created
  Context: {
  "sessionId": "c50fefcf-9328-4b3e-be40-e0e73a73cf2d",
  "title": "Session 3",
  "mode": "mathematics"
}
[2025-11-23T20:57:04.915Z] INFO: Session created
  Context: {
  "sessionId": "af97e220-8594-491b-a464-f2202aff11bb",
  "title": "Session 4",
  "mode": "physics"
}
[2025-11-23T20:57:04.915Z] INFO: Session created
  Context: {
  "sessionId": "9c8648e6-eb37-45bf-a50e-d4f9e4e9c613",
  "title": "Session 5",
  "mode": "hybrid"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mMultiple Session Management[2m > [22m[2mshould maintain session isolation (changes in one do not affect others)[22m[39m
[2025-11-23T20:57:04.923Z] INFO: Session created
  Context: {
  "sessionId": "1f282f47-64e1-4bf3-8175-e55ec2fd6d02",
  "title": "Isolated Session 1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.924Z] INFO: Session created
  Context: {
  "sessionId": "d212785d-51d0-4bfd-bcd2-ac0eabe37425",
  "title": "Isolated Session 2",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mMultiple Session Management[2m > [22m[2mshould handle mode switching independently across sessions[22m[39m
[2025-11-23T20:57:04.928Z] INFO: Session created
  Context: {
  "sessionId": "b8a3e7b2-eb07-41fe-aa41-6cd41fb2d0fc",
  "title": "S1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.929Z] INFO: Session created
  Context: {
  "sessionId": "cd77b1ee-cca0-4242-8284-43197a008603",
  "title": "S2",
  "mode": "sequential"
}
[2025-11-23T20:57:04.929Z] INFO: Session created
  Context: {
  "sessionId": "f83c77ad-8c62-40f6-8cf2-4f461df4bc92",
  "title": "S3",
  "mode": "sequential"
}
[2025-11-23T20:57:04.931Z] INFO: Session mode switched
  Context: {
  "sessionId": "b8a3e7b2-eb07-41fe-aa41-6cd41fb2d0fc",
  "oldMode": "sequential",
  "newMode": "mathematics",
  "reason": "Switch to math"
}
[2025-11-23T20:57:04.931Z] INFO: Session mode switched
  Context: {
  "sessionId": "cd77b1ee-cca0-4242-8284-43197a008603",
  "oldMode": "sequential",
  "newMode": "physics",
  "reason": "Switch to physics"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mMultiple Session Management[2m > [22m[2mshould handle completion status independently across sessions[22m[39m
[2025-11-23T20:57:04.934Z] INFO: Session created
  Context: {
  "sessionId": "511fb985-f66a-4afd-b098-2a9fb109cd6e",
  "title": "S1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.934Z] INFO: Session created
  Context: {
  "sessionId": "3bded74e-914f-431a-8d35-d1cbab05d99c",
  "title": "S2",
  "mode": "sequential"
}
[2025-11-23T20:57:04.934Z] INFO: Session completed
  Context: {
  "sessionId": "511fb985-f66a-4afd-b098-2a9fb109cd6e",
  "title": "S1",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mConcurrent Operations on Same Session[2m > [22m[2mshould handle concurrent thought additions to same session[22m[39m
[2025-11-23T20:57:04.939Z] INFO: Session created
  Context: {
  "sessionId": "f092c837-d07a-44cc-a7b8-9e7eb173dc6b",
  "title": "Concurrent Test",
  "mode": "sequential"
}
[2025-11-23T20:57:04.939Z] INFO: Session completed
  Context: {
  "sessionId": "f092c837-d07a-44cc-a7b8-9e7eb173dc6b",
  "title": "Concurrent Test",
  "totalThoughts": 3
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mConcurrent Operations on Same Session[2m > [22m[2mshould handle concurrent retrieval of same session[22m[39m
[2025-11-23T20:57:04.941Z] INFO: Session created
  Context: {
  "sessionId": "403b0fd7-84eb-4567-a9d9-1f18f5101880",
  "title": "Concurrent Retrieval",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mConcurrent Operations on Same Session[2m > [22m[2mshould handle concurrent mode switches on same session[22m[39m
[2025-11-23T20:57:04.943Z] INFO: Session created
  Context: {
  "sessionId": "abb5c170-d3b3-449e-a076-77189c655446",
  "title": "Mode Switch Race",
  "mode": "sequential"
}
[2025-11-23T20:57:04.943Z] INFO: Session mode switched
  Context: {
  "sessionId": "abb5c170-d3b3-449e-a076-77189c655446",
  "oldMode": "sequential",
  "newMode": "mathematics",
  "reason": "Switch 1"
}
[2025-11-23T20:57:04.943Z] INFO: Session mode switched
  Context: {
  "sessionId": "abb5c170-d3b3-449e-a076-77189c655446",
  "oldMode": "mathematics",
  "newMode": "physics",
  "reason": "Switch 2"
}
[2025-11-23T20:57:04.943Z] INFO: Session mode switched
  Context: {
  "sessionId": "abb5c170-d3b3-449e-a076-77189c655446",
  "oldMode": "physics",
  "newMode": "hybrid",
  "reason": "Switch 3"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mConcurrent Operations Across Different Sessions[2m > [22m[2mshould handle concurrent operations on different sessions[22m[39m
[2025-11-23T20:57:04.946Z] INFO: Session created
  Context: {
  "sessionId": "4629d465-0014-4000-91a7-49e007f766e9",
  "title": "S1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.946Z] INFO: Session created
  Context: {
  "sessionId": "9a93b716-ac00-4ebb-adbd-e782a4e6a2b8",
  "title": "S2",
  "mode": "shannon"
}
[2025-11-23T20:57:04.946Z] INFO: Session created
  Context: {
  "sessionId": "7b2f120f-af69-4d61-844d-860043366b6a",
  "title": "S3",
  "mode": "mathematics"
}
[2025-11-23T20:57:04.946Z] INFO: Session completed
  Context: {
  "sessionId": "4629d465-0014-4000-91a7-49e007f766e9",
  "title": "S1",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.947Z] INFO: Session mode switched
  Context: {
  "sessionId": "9a93b716-ac00-4ebb-adbd-e782a4e6a2b8",
  "oldMode": "shannon",
  "newMode": "physics",
  "reason": "Switch mode"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mConcurrent Operations Across Different Sessions[2m > [22m[2mshould handle concurrent session creation[22m[39m
[2025-11-23T20:57:04.949Z] INFO: Session created
  Context: {
  "sessionId": "2a7dd6b5-09c1-404d-8e78-d98370aeb5ee",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.950Z] INFO: Session created
  Context: {
  "sessionId": "eca32eaf-394d-482c-89dd-a46322c1bab4",
  "title": "Session 2",
  "mode": "sequential"
}
[2025-11-23T20:57:04.950Z] INFO: Session created
  Context: {
  "sessionId": "fa9f1ba0-b5fe-485c-bd8e-920d3f8bf2fe",
  "title": "Session 3",
  "mode": "sequential"
}
[2025-11-23T20:57:04.950Z] INFO: Session created
  Context: {
  "sessionId": "d5c49dd4-8186-4d85-8954-847eace11db0",
  "title": "Session 4",
  "mode": "sequential"
}
[2025-11-23T20:57:04.950Z] INFO: Session created
  Context: {
  "sessionId": "876a5107-e91e-40cf-9df1-545435a1fb0a",
  "title": "Session 5",
  "mode": "sequential"
}
[2025-11-23T20:57:04.950Z] INFO: Session created
  Context: {
  "sessionId": "b1bef9ae-5201-4530-8f6c-45d1b236e41e",
  "title": "Session 6",
  "mode": "sequential"
}
[2025-11-23T20:57:04.950Z] INFO: Session created
  Context: {
  "sessionId": "5d2ed11c-ce32-4765-a647-ebd798af147c",
  "title": "Session 7",
  "mode": "sequential"
}
[2025-11-23T20:57:04.950Z] INFO: Session created
  Context: {
  "sessionId": "790b521d-8b54-4903-abfc-a97902883631",
  "title": "Session 8",
  "mode": "sequential"
}
[2025-11-23T20:57:04.950Z] INFO: Session created
  Context: {
  "sessionId": "c3c087a7-1e97-4de3-ab0d-adc67cb50957",
  "title": "Session 9",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "0fa46ee5-d240-4332-b787-f0867a66a175",
  "title": "Session 10",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "daaa44c0-cfa7-4334-aafa-ab5645bdb393",
  "title": "Session 11",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "b3ebbc9c-c5e2-41a2-ba87-fc8aeb50709c",
  "title": "Session 12",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "aa1fef74-d8e0-474a-96dc-33a94ca3a4d5",
  "title": "Session 13",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "e3b7adf9-8acc-428e-aeea-9eb07c8df74d",
  "title": "Session 14",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "148d67d7-206c-461e-9a16-9742e83f231a",
  "title": "Session 15",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "6a3770c9-b776-424a-b8fa-57a7d4e23e2a",
  "title": "Session 16",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "41e0d529-477d-4cea-bfd9-f3f0b68cd059",
  "title": "Session 17",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "2fa2bf85-ca42-44f8-92e6-688ccd24b68f",
  "title": "Session 18",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "5171cc56-d587-4b2d-93ac-da72ffbf1b69",
  "title": "Session 19",
  "mode": "sequential"
}
[2025-11-23T20:57:04.951Z] INFO: Session created
  Context: {
  "sessionId": "6645f61a-9e70-4feb-926c-1c611ed594f6",
  "title": "Session 20",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mConcurrent Operations Across Different Sessions[2m > [22m[2mshould handle concurrent summary generation for different sessions[22m[39m
[2025-11-23T20:57:04.953Z] INFO: Session created
  Context: {
  "sessionId": "0bd869a0-ef08-44a6-98fa-4b67b77869f7",
  "title": "S1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.953Z] INFO: Session created
  Context: {
  "sessionId": "fe04d071-a526-4f12-8f76-99fa7f5217ce",
  "title": "S2",
  "mode": "sequential"
}
[2025-11-23T20:57:04.954Z] INFO: Session created
  Context: {
  "sessionId": "2103322f-bf28-4387-a6c4-8f0a1dd65533",
  "title": "S3",
  "mode": "sequential"
}
[2025-11-23T20:57:04.954Z] INFO: Session completed
  Context: {
  "sessionId": "0bd869a0-ef08-44a6-98fa-4b67b77869f7",
  "title": "S1",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.954Z] INFO: Session completed
  Context: {
  "sessionId": "fe04d071-a526-4f12-8f76-99fa7f5217ce",
  "title": "S2",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.954Z] INFO: Session completed
  Context: {
  "sessionId": "2103322f-bf28-4387-a6c4-8f0a1dd65533",
  "title": "S3",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mResource Management with Many Sessions[2m > [22m[2mshould handle creation of many sessions[22m[39m
[2025-11-23T20:57:04.957Z] INFO: Session created
  Context: {
  "sessionId": "6958f0d3-e713-45ff-a8ec-1a9c8bea975f",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.957Z] INFO: Session created
  Context: {
  "sessionId": "0f6bf5c3-fdc3-44f8-bbcf-6ba5f8109b46",
  "title": "Session 2",
  "mode": "sequential"
}
[2025-11-23T20:57:04.957Z] INFO: Session created
  Context: {
  "sessionId": "9acd3d4e-5d0b-42ea-8b05-d3a12f97dbfd",
  "title": "Session 3",
  "mode": "sequential"
}
[2025-11-23T20:57:04.957Z] INFO: Session created
  Context: {
  "sessionId": "7ba6d1d7-6e19-4e14-b5f4-7f2aa57aa3a2",
  "title": "Session 4",
  "mode": "sequential"
}
[2025-11-23T20:57:04.957Z] INFO: Session created
  Context: {
  "sessionId": "36c8d1a9-fe4e-4009-bf32-47a3601a33be",
  "title": "Session 5",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "64917b49-b98c-4422-8c83-5522deb89748",
  "title": "Session 6",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "92376bce-2fb5-4d53-bb1c-05599dcf7398",
  "title": "Session 7",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "afe6d3d3-eeda-4282-b82e-7afed51d8ef3",
  "title": "Session 8",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "3970a0fd-9d2c-4d45-b97b-9e984599d06a",
  "title": "Session 9",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "f95fc04e-7251-49e9-8550-008b3297dc39",
  "title": "Session 10",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "2dc34658-a054-4660-9569-a5f529531874",
  "title": "Session 11",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "00f97ee7-3497-41af-b25c-bf9a8d5768df",
  "title": "Session 12",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "e42c446b-c6da-4d7e-9d3e-54dc395924ca",
  "title": "Session 13",
  "mode": "sequential"
}
[2025-11-23T20:57:04.958Z] INFO: Session created
  Context: {
  "sessionId": "c787daa7-1a7a-4e87-866a-1e5dc2577db0",
  "title": "Session 14",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "b50452e7-d715-43e3-8cf7-826ecfc7d054",
  "title": "Session 15",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "494bb2b1-b442-480c-8364-89bdb295fca4",
  "title": "Session 16",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "a50be6d0-5901-49f9-a9db-42824a4a1a62",
  "title": "Session 17",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "6c3bfcf2-1367-4f6d-a4c4-bfc047d7a5d9",
  "title": "Session 18",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "0f840828-22a4-4b31-8c4f-71e0204c5780",
  "title": "Session 19",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "a4cdfcbf-0edf-4656-9073-eee5bccf2b78",
  "title": "Session 20",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "4d9db5ba-bf88-4ad7-8cb1-f5a0aba34a94",
  "title": "Session 21",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "4361d33a-da7f-4248-89b8-7a609b610e8b",
  "title": "Session 22",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "bbe214f8-3bd0-464b-9113-79fe0b44bcc0",
  "title": "Session 23",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "7b824db6-364f-4d99-8e1a-46b1543c69f0",
  "title": "Session 24",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "7e1eaa21-3cdf-4714-9372-a0a1d32c260f",
  "title": "Session 25",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "c2b1c015-5774-4fe4-aeae-9573e3624c76",
  "title": "Session 26",
  "mode": "sequential"
}
[2025-11-23T20:57:04.959Z] INFO: Session created
  Context: {
  "sessionId": "f84a829f-afc2-44c1-8d5a-4ef8e74e6a88",
  "title": "Session 27",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "37388d09-f374-4b50-b2b1-90bc62e51f3b",
  "title": "Session 28",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "37f96c9f-9493-4200-b160-26eedd252f08",
  "title": "Session 29",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "93d3df3a-d3a7-4f21-9d26-b27dbd1b0b87",
  "title": "Session 30",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "dabd9989-9bd3-4220-9684-307dc70a1bac",
  "title": "Session 31",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "177563b7-5831-4008-a522-43dfbea8f6c3",
  "title": "Session 32",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "c50d4624-4255-4ddf-9747-27a6f28deba7",
  "title": "Session 33",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "592bbd3c-30a0-4f04-b340-2cd518f9cb57",
  "title": "Session 34",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "d98f2d6e-f93a-49dc-9fbd-63758e2f213f",
  "title": "Session 35",
  "mode": "sequential"
}
[2025-11-23T20:57:04.960Z] INFO: Session created
  Context: {
  "sessionId": "ac874787-16d6-4fff-bb43-a30bc233ebc2",
  "title": "Session 36",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "227625a6-0ba8-4b97-b903-260ad8a0d2b5",
  "title": "Session 37",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "b6835266-8c47-49ce-92a7-e48419845f94",
  "title": "Session 38",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "334624db-e94a-47ee-8557-8a564e910b31",
  "title": "Session 39",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "9da2f66d-775a-4f8b-850e-cef853cfc625",
  "title": "Session 40",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "1643097b-9953-415b-b50e-1951a050592b",
  "title": "Session 41",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "c389cfa3-4cfb-4caf-9443-2b97dded13a3",
  "title": "Session 42",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "bab199a6-41b2-4b8d-8361-ba6020d9c113",
  "title": "Session 43",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "7a0c69cc-6940-41f6-813c-4c277cc2e19c",
  "title": "Session 44",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "0c89b52c-c037-41c9-921e-119ba774fe6b",
  "title": "Session 45",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "73f89b59-2957-4cb2-b3ef-4f5fa6831b4f",
  "title": "Session 46",
  "mode": "sequential"
}
[2025-11-23T20:57:04.961Z] INFO: Session created
  Context: {
  "sessionId": "868aaf95-73b7-4f80-bd5d-f082e23d7314",
  "title": "Session 47",
  "mode": "sequential"
}
[2025-11-23T20:57:04.962Z] INFO: Session created
  Context: {
  "sessionId": "c1c14809-984c-4186-80ac-f9e669647a01",
  "title": "Session 48",
  "mode": "sequential"
}
[2025-11-23T20:57:04.962Z] INFO: Session created
  Context: {
  "sessionId": "5c0fdb00-65fd-4280-904c-671aa20c05b0",
  "title": "Session 49",
  "mode": "sequential"
}
[2025-11-23T20:57:04.962Z] INFO: Session created
  Context: {
  "sessionId": "5c688502-e744-411a-b55e-5cd66d6a3eb7",
  "title": "Session 50",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mResource Management with Many Sessions[2m > [22m[2mshould retrieve sessions efficiently with many active sessions[22m[39m
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "d81266ba-0c7b-4d15-893e-b71ef6210d40",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "bb9156f9-a745-4b55-8379-e7b07157c4ab",
  "title": "Session 2",
  "mode": "sequential"
}
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "a8f6d252-608a-4e0e-939a-b5e618371183",
  "title": "Session 3",
  "mode": "sequential"
}
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "0c1c7fa7-962d-4776-8a23-1f95773651bb",
  "title": "Session 4",
  "mode": "sequential"
}
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "ce26e8f5-a97d-46a1-ba32-020c24f0f607",
  "title": "Session 5",
  "mode": "sequential"
}
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "c3713acb-6871-41bb-894c-a7a517566bcd",
  "title": "Session 6",
  "mode": "sequential"
}
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "cf2fbfc9-304b-4bb5-ac2a-fb85afbd65c8",
  "title": "Session 7",
  "mode": "sequential"
}
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "a351b3d4-8863-4b01-9777-894ce4a9666c",
  "title": "Session 8",
  "mode": "sequential"
}
[2025-11-23T20:57:04.964Z] INFO: Session created
  Context: {
  "sessionId": "7d29c7da-e283-4ed9-96bf-b00d9431694a",
  "title": "Session 9",
  "mode": "sequential"
}
[2025-11-23T20:57:04.965Z] INFO: Session created
  Context: {
  "sessionId": "29b8a9b2-0c79-4462-b09f-011bffd76ae7",
  "title": "Session 10",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mResource Management with Many Sessions[2m > [22m[2mshould list all sessions when many exist[22m[39m
[2025-11-23T20:57:04.967Z] INFO: Session created
  Context: {
  "sessionId": "c641ab51-7aa2-4adc-8302-ff3c2bae06bb",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-23T20:57:04.967Z] INFO: Session created
  Context: {
  "sessionId": "0e21ad80-d915-4104-b143-2c258b3c8760",
  "title": "Session 2",
  "mode": "sequential"
}
[2025-11-23T20:57:04.967Z] INFO: Session created
  Context: {
  "sessionId": "5498ca4a-a0a0-480b-9a87-a4131cbfd79d",
  "title": "Session 3",
  "mode": "sequential"
}
[2025-11-23T20:57:04.967Z] INFO: Session created
  Context: {
  "sessionId": "1afc9e9e-766c-4721-83bb-12f3e75f9a81",
  "title": "Session 4",
  "mode": "sequential"
}
[2025-11-23T20:57:04.967Z] INFO: Session created
  Context: {
  "sessionId": "4d8ec976-d266-4f3a-933a-482b58e63438",
  "title": "Session 5",
  "mode": "sequential"
}
[2025-11-23T20:57:04.967Z] INFO: Session created
  Context: {
  "sessionId": "1097f0b8-7351-4db8-9f06-8787e3b4b3a8",
  "title": "Session 6",
  "mode": "sequential"
}
[2025-11-23T20:57:04.967Z] INFO: Session created
  Context: {
  "sessionId": "8a9ae997-8f3b-4ce6-9fcf-9b4ce26671ab",
  "title": "Session 7",
  "mode": "sequential"
}
[2025-11-23T20:57:04.967Z] INFO: Session created
  Context: {
  "sessionId": "38931ed0-359d-4385-9521-4c24decadd01",
  "title": "Session 8",
  "mode": "sequential"
}
[2025-11-23T20:57:04.968Z] INFO: Session created
  Context: {
  "sessionId": "45088fd7-d109-438e-984b-1aaa3f4c215f",
  "title": "Session 9",
  "mode": "sequential"
}
[2025-11-23T20:57:04.968Z] INFO: Session created
  Context: {
  "sessionId": "7bd045dc-58c7-4590-8f24-9cc6a3396048",
  "title": "Session 10",
  "mode": "sequential"
}
[2025-11-23T20:57:04.968Z] INFO: Session created
  Context: {
  "sessionId": "725b34a5-2765-4154-82b1-d5b4617ea6e1",
  "title": "Session 11",
  "mode": "sequential"
}
[2025-11-23T20:57:04.968Z] INFO: Session created
  Context: {
  "sessionId": "ada6aa73-b3e2-449d-82c8-018af1a74129",
  "title": "Session 12",
  "mode": "sequential"
}
[2025-11-23T20:57:04.968Z] INFO: Session created
  Context: {
  "sessionId": "5b63a865-fada-483e-b6d6-8b3996eaa342",
  "title": "Session 13",
  "mode": "sequential"
}
[2025-11-23T20:57:04.968Z] INFO: Session created
  Context: {
  "sessionId": "a403597e-13e1-4b8d-9fab-a864af2f9345",
  "title": "Session 14",
  "mode": "sequential"
}
[2025-11-23T20:57:04.968Z] INFO: Session created
  Context: {
  "sessionId": "8687b56f-0227-4552-8b43-f61636618023",
  "title": "Session 15",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mSession State Consistency[2m > [22m[2mshould maintain consistent thought count across concurrent additions[22m[39m
[2025-11-23T20:57:04.970Z] INFO: Session created
  Context: {
  "sessionId": "10c6ef5d-46f7-4b72-9a2b-882d4e0a705a",
  "title": "Consistency Test",
  "mode": "sequential"
}
[2025-11-23T20:57:04.971Z] INFO: Session completed
  Context: {
  "sessionId": "10c6ef5d-46f7-4b72-9a2b-882d4e0a705a",
  "title": "Consistency Test",
  "totalThoughts": 10
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mSession State Consistency[2m > [22m[2mshould maintain correct status after concurrent operations[22m[39m
[2025-11-23T20:57:04.972Z] INFO: Session created
  Context: {
  "sessionId": "6ff2a3f9-85f2-4bfb-8abc-25a4dc6a554d",
  "title": "Status Test",
  "mode": "sequential"
}
[2025-11-23T20:57:04.972Z] INFO: Session completed
  Context: {
  "sessionId": "6ff2a3f9-85f2-4bfb-8abc-25a4dc6a554d",
  "title": "Status Test",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mSession State Consistency[2m > [22m[2mshould handle concurrent thought additions with proper sequencing[22m[39m
[2025-11-23T20:57:04.973Z] INFO: Session created
  Context: {
  "sessionId": "0e16f10c-c48f-417f-ab90-730744833d0b",
  "title": "Sequence Test",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/multi-session.test.ts[2m > [22m[2mMulti-Session and Concurrent Scenarios[2m > [22m[2mError Handling in Concurrent Scenarios[2m > [22m[2mshould handle mixed success/failure scenarios gracefully[22m[39m
[2025-11-23T20:57:04.977Z] INFO: Session created
  Context: {
  "sessionId": "5f079d21-fb03-4155-9f2b-1e7d79ae2d41",
  "title": "Mixed Test",
  "mode": "sequential"
}

 [32mâœ“[39m tests/integration/multi-session.test.ts [2m ([22m[2m18 tests[22m[2m)[22m[90m 76[2mms[22m[39m
[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleAddThought()[2m > [22m[2mshould create new session if sessionId not provided[22m[39m
[2025-11-23T20:57:04.963Z] INFO: Session created
  Context: {
  "sessionId": "2ca72da4-a3b8-4274-8b09-85f7f2fba172",
  "title": "Test Session",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleAddThought()[2m > [22m[2mshould add thought to existing session[22m[39m
[2025-11-23T20:57:04.968Z] INFO: Session created
  Context: {
  "sessionId": "b106c311-852c-4b32-ac14-5bc0e6f08a8d",
  "title": "Test Session",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleAddThought()[2m > [22m[2mshould handle all 13 modes in add_thought[22m[39m
[2025-11-23T20:57:04.972Z] INFO: Session created
  Context: {
  "sessionId": "987a6693-3fe1-49ee-aa30-72c9c8f83996",
  "title": "Test sequential",
  "mode": "sequential"
}
[2025-11-23T20:57:04.972Z] INFO: Session completed
  Context: {
  "sessionId": "987a6693-3fe1-49ee-aa30-72c9c8f83996",
  "title": "Test sequential",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.972Z] INFO: Session created
  Context: {
  "sessionId": "989fcc04-dc0f-4fb4-9649-031bc8c8a6f9",
  "title": "Test shannon",
  "mode": "shannon"
}
[2025-11-23T20:57:04.973Z] INFO: Session completed
  Context: {
  "sessionId": "989fcc04-dc0f-4fb4-9649-031bc8c8a6f9",
  "title": "Test shannon",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.973Z] INFO: Session created
  Context: {
  "sessionId": "29ca5d64-c698-4cc4-896c-2e72a0971551",
  "title": "Test mathematics",
  "mode": "mathematics"
}
[2025-11-23T20:57:04.973Z] INFO: Session completed
  Context: {
  "sessionId": "29ca5d64-c698-4cc4-896c-2e72a0971551",
  "title": "Test mathematics",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.974Z] INFO: Session created
  Context: {
  "sessionId": "76f96379-e866-4b64-b2db-699ee2877b91",
  "title": "Test physics",
  "mode": "physics"
}
[2025-11-23T20:57:04.974Z] INFO: Session completed
  Context: {
  "sessionId": "76f96379-e866-4b64-b2db-699ee2877b91",
  "title": "Test physics",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.975Z] INFO: Session created
  Context: {
  "sessionId": "692eafbe-cb2b-4727-9409-b05444169fb5",
  "title": "Test hybrid",
  "mode": "hybrid"
}
[2025-11-23T20:57:04.975Z] INFO: Session completed
  Context: {
  "sessionId": "692eafbe-cb2b-4727-9409-b05444169fb5",
  "title": "Test hybrid",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.976Z] INFO: Session created
  Context: {
  "sessionId": "592fc4a4-5007-46c3-a24d-67d5efb25645",
  "title": "Test abductive",
  "mode": "abductive"
}
[2025-11-23T20:57:04.976Z] INFO: Session completed
  Context: {
  "sessionId": "592fc4a4-5007-46c3-a24d-67d5efb25645",
  "title": "Test abductive",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.976Z] INFO: Session created
  Context: {
  "sessionId": "5e8e79d5-c44f-445d-a913-d3ea6407dc8b",
  "title": "Test causal",
  "mode": "causal"
}
[2025-11-23T20:57:04.976Z] INFO: Session completed
  Context: {
  "sessionId": "5e8e79d5-c44f-445d-a913-d3ea6407dc8b",
  "title": "Test causal",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.977Z] INFO: Session created
  Context: {
  "sessionId": "a54ba269-9e00-4887-a646-facb7ade7712",
  "title": "Test bayesian",
  "mode": "bayesian"
}
[2025-11-23T20:57:04.977Z] INFO: Session completed
  Context: {
  "sessionId": "a54ba269-9e00-4887-a646-facb7ade7712",
  "title": "Test bayesian",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.978Z] INFO: Session created
  Context: {
  "sessionId": "c07bf6d9-06ac-44bd-b7ab-20e34b792e32",
  "title": "Test counterfactual",
  "mode": "counterfactual"
}
[2025-11-23T20:57:04.978Z] INFO: Session completed
  Context: {
  "sessionId": "c07bf6d9-06ac-44bd-b7ab-20e34b792e32",
  "title": "Test counterfactual",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.978Z] INFO: Session created
  Context: {
  "sessionId": "109f76e1-1191-458d-8139-752ba3ad3f02",
  "title": "Test analogical",
  "mode": "analogical"
}
[2025-11-23T20:57:04.979Z] INFO: Session completed
  Context: {
  "sessionId": "109f76e1-1191-458d-8139-752ba3ad3f02",
  "title": "Test analogical",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.979Z] INFO: Session created
  Context: {
  "sessionId": "aad61b95-3656-4dc8-958c-8a60ef9abc30",
  "title": "Test temporal",
  "mode": "temporal"
}
[2025-11-23T20:57:04.980Z] INFO: Session completed
  Context: {
  "sessionId": "aad61b95-3656-4dc8-958c-8a60ef9abc30",
  "title": "Test temporal",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.980Z] INFO: Session created
  Context: {
  "sessionId": "1ff46737-fa09-4874-9995-0d7db7535a88",
  "title": "Test gametheory",
  "mode": "gametheory"
}
[2025-11-23T20:57:04.981Z] INFO: Session completed
  Context: {
  "sessionId": "1ff46737-fa09-4874-9995-0d7db7535a88",
  "title": "Test gametheory",
  "totalThoughts": 1
}
[2025-11-23T20:57:04.982Z] INFO: Session created
  Context: {
  "sessionId": "a90d95b8-9849-44c8-b9dc-828e787eb159",
  "title": "Test evidential",
  "mode": "evidential"
}
[2025-11-23T20:57:04.983Z] INFO: Session completed
  Context: {
  "sessionId": "a90d95b8-9849-44c8-b9dc-828e787eb159",
  "title": "Test evidential",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleSummarize()[2m > [22m[2mshould generate summary for session with thoughts[22m[39m
[2025-11-23T20:57:04.989Z] INFO: Session created
  Context: {
  "sessionId": "436d7af2-5d7e-4914-afc8-d9123a977bb0",
  "title": "Test Session",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleSummarize()[2m > [22m[2mshould generate summary for empty session[22m[39m
[2025-11-23T20:57:04.991Z] INFO: Session created
  Context: {
  "sessionId": "f7d7ebd0-781c-446a-bc99-9b92cc761265",
  "title": "Empty Session",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleSwitchMode()[2m > [22m[2mshould switch mode successfully[22m[39m
[2025-11-23T20:57:04.994Z] INFO: Session created
  Context: {
  "sessionId": "0f9a68cf-9542-4458-aeb4-cd00e067da44",
  "title": "Test Session",
  "mode": "sequential"
}
[2025-11-23T20:57:04.994Z] INFO: Session mode switched
  Context: {
  "sessionId": "0f9a68cf-9542-4458-aeb4-cd00e067da44",
  "oldMode": "sequential",
  "newMode": "shannon",
  "reason": "User requested mode switch"
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleSwitchMode()[2m > [22m[2mshould switch between all 13 modes[22m[39m
[2025-11-23T20:57:04.995Z] INFO: Session created
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "title": "Multi-mode Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:04.995Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "hybrid",
  "newMode": "sequential",
  "reason": "Switching to sequential"
}
[2025-11-23T20:57:04.995Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "sequential",
  "newMode": "shannon",
  "reason": "Switching to shannon"
}
[2025-11-23T20:57:04.995Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "shannon",
  "newMode": "mathematics",
  "reason": "Switching to mathematics"
}
[2025-11-23T20:57:04.995Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "mathematics",
  "newMode": "physics",
  "reason": "Switching to physics"
}
[2025-11-23T20:57:04.996Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "physics",
  "newMode": "abductive",
  "reason": "Switching to abductive"
}
[2025-11-23T20:57:04.996Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "abductive",
  "newMode": "causal",
  "reason": "Switching to causal"
}
[2025-11-23T20:57:04.996Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "causal",
  "newMode": "bayesian",
  "reason": "Switching to bayesian"
}
[2025-11-23T20:57:04.996Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "bayesian",
  "newMode": "counterfactual",
  "reason": "Switching to counterfactual"
}
[2025-11-23T20:57:04.996Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "counterfactual",
  "newMode": "analogical",
  "reason": "Switching to analogical"
}
[2025-11-23T20:57:04.996Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "analogical",
  "newMode": "temporal",
  "reason": "Switching to temporal"
}
[2025-11-23T20:57:04.996Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "temporal",
  "newMode": "gametheory",
  "reason": "Switching to gametheory"
}
[2025-11-23T20:57:04.997Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "gametheory",
  "newMode": "evidential",
  "reason": "Switching to evidential"
}
[2025-11-23T20:57:04.997Z] INFO: Session mode switched
  Context: {
  "sessionId": "381bf9d0-1e11-4d3c-ba84-65bd68fcf800",
  "oldMode": "evidential",
  "newMode": "hybrid",
  "reason": "Switching to hybrid"
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleGetSession()[2m > [22m[2mshould retrieve session with all properties[22m[39m
[2025-11-23T20:57:05.000Z] INFO: Session created
  Context: {
  "sessionId": "5cc0d33c-2af8-4c54-92e8-68fe696c3398",
  "title": "Test Session",
  "mode": "sequential"
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleGetSession()[2m > [22m[2mshould retrieve session with thoughts[22m[39m
[2025-11-23T20:57:05.001Z] INFO: Session created
  Context: {
  "sessionId": "b539ccd4-d9e5-4ce6-916b-8484ef48be7e",
  "title": "Session with Thoughts",
  "mode": "sequential"
}
[2025-11-23T20:57:05.001Z] INFO: Session completed
  Context: {
  "sessionId": "b539ccd4-d9e5-4ce6-916b-8484ef48be7e",
  "title": "Session with Thoughts",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/index-handlers.test.ts[2m > [22m[2mIndex.ts Handler Functions[2m > [22m[2mHandler Functions[2m > [22m[2mhandleExport()[2m > [22m[2mshould export session in JSON format[22m[39m
[2025-11-23T20:57:05.003Z] INFO: Session created
  Context: {
  "sessionId": "6eeacf21-77b3-4909-938f-592c8c6c0358",
  "title": "Export Test",
  "mode": "sequential"
}
[2025-11-23T20:57:05.003Z] INFO: Session completed
  Context: {
  "sessionId": "6eeacf21-77b3-4909-938f-592c8c6c0358",
  "title": "Export Test",
  "totalThoughts": 1
}

 [32mâœ“[39m tests/integration/index-handlers.test.ts [2m ([22m[2m33 tests[22m[2m)[22m[90m 103[2mms[22m[39m
 [32mâœ“[39m tests/integration/mcp-protocol.test.ts [2m ([22m[2m43 tests[22m[2m)[22m[90m 215[2mms[22m[39m
[90mstdout[2m | tests/integration/mcp-protocol.test.ts[2m > [22m[2mMCP Protocol Compliance[2m > [22m[2mMCP Response Format Compliance[2m > [22m[2mshould return MCP-compliant response for successful operation[22m[39m
[2025-11-23T20:57:05.362Z] INFO: Session created
  Context: {
  "sessionId": "260c1165-13dd-4d14-a3a2-06f504608531",
  "title": "Test Session",
  "mode": "sequential"
}

 [32mâœ“[39m tests/unit/evidential.test.ts [2m ([22m[2m16 tests[22m[2m)[22m[90m 50[2mms[22m[39m
 [32mâœ“[39m tests/unit/temporal.test.ts [2m ([22m[2m19 tests[22m[2m)[22m[90m 62[2mms[22m[39m
 [32mâœ“[39m tests/unit/gametheory.test.ts [2m ([22m[2m17 tests[22m[2m)[22m[90m 49[2mms[22m[39m
 [32mâœ“[39m tests/unit/recommendations.test.ts [2m ([22m[2m15 tests[22m[2m)[22m[90m 65[2mms[22m[39m
[90mstderr[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mInvalid Session Operations[2m > [22m[2mshould throw error for non-existent session ID[22m[39m
[2025-11-23T20:57:08.043Z] ERROR: Session not found
  Context: {
  "sessionId": "00000000-0000-4000-8000-000000000000"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mInvalid Session Operations[2m > [22m[2mshould handle session deletion idempotently[22m[39m
[2025-11-23T20:57:08.053Z] INFO: Session created
  Context: {
  "sessionId": "56f44b2e-954c-4b92-93f4-2cfe56b92156",
  "title": "Test",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.054Z] INFO: Session deleted
  Context: {
  "sessionId": "56f44b2e-954c-4b92-93f4-2cfe56b92156",
  "title": "Test",
  "thoughtCount": 0
}

[90mstderr[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mInvalid Session Operations[2m > [22m[2mshould handle session deletion idempotently[22m[39m
[2025-11-23T20:57:08.054Z] WARN: Attempted to delete non-existent session from memory
  Context: {
  "sessionId": "56f44b2e-954c-4b92-93f4-2cfe56b92156"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mValidation Errors[2m > [22m[2mshould accept thoughts with missing fields (lenient validation)[22m[39m
[2025-11-23T20:57:08.057Z] INFO: Session created
  Context: {
  "sessionId": "95518a8b-4f27-4fd6-afe1-cd884771145b",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.059Z] INFO: Session completed
  Context: {
  "sessionId": "95518a8b-4f27-4fd6-afe1-cd884771145b",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mValidation Errors[2m > [22m[2mshould accept invalid uncertainty values (lenient validation)[22m[39m
[2025-11-23T20:57:08.061Z] INFO: Session created
  Context: {
  "sessionId": "b233bfbe-cafe-4212-83d3-a7614c42656b",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.061Z] INFO: Session completed
  Context: {
  "sessionId": "b233bfbe-cafe-4212-83d3-a7614c42656b",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mValidation Errors[2m > [22m[2mshould accept negative thought numbers (lenient validation)[22m[39m
[2025-11-23T20:57:08.063Z] INFO: Session created
  Context: {
  "sessionId": "be478b47-186d-41f7-aa85-57a571126dc3",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.063Z] INFO: Session completed
  Context: {
  "sessionId": "be478b47-186d-41f7-aa85-57a571126dc3",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mValidation Errors[2m > [22m[2mshould accept zero thought numbers (lenient validation)[22m[39m
[2025-11-23T20:57:08.064Z] INFO: Session created
  Context: {
  "sessionId": "152eae8e-f0c0-446f-aa92-1fc77557b22a",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.065Z] INFO: Session completed
  Context: {
  "sessionId": "152eae8e-f0c0-446f-aa92-1fc77557b22a",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mValidation Errors[2m > [22m[2mshould accept invalid mode values (lenient validation)[22m[39m
[2025-11-23T20:57:08.067Z] INFO: Session created
  Context: {
  "sessionId": "f3a07619-b271-4b3f-a123-0b591ba6a623",
  "title": "Untitled Session",
  "mode": "invalid_mode"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mValidation Errors[2m > [22m[2mshould accept invalid Shannon stage (lenient validation)[22m[39m
[2025-11-23T20:57:08.070Z] INFO: Session created
  Context: {
  "sessionId": "9196b38c-fb69-4e44-a64c-0db069ee2569",
  "title": "Untitled Session",
  "mode": "shannon"
}
[2025-11-23T20:57:08.070Z] INFO: Session completed
  Context: {
  "sessionId": "9196b38c-fb69-4e44-a64c-0db069ee2569",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mBoundary Conditions[2m > [22m[2mshould handle uncertainty = 0 (perfect certainty)[22m[39m
[2025-11-23T20:57:08.072Z] INFO: Session created
  Context: {
  "sessionId": "aa2c491c-d65e-4c22-ab23-34d9efd2fc30",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.072Z] INFO: Session completed
  Context: {
  "sessionId": "aa2c491c-d65e-4c22-ab23-34d9efd2fc30",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mBoundary Conditions[2m > [22m[2mshould handle uncertainty = 1 (complete uncertainty)[22m[39m
[2025-11-23T20:57:08.073Z] INFO: Session created
  Context: {
  "sessionId": "0b4d4062-314e-45e4-a0b9-ae1ffd048b3f",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.073Z] INFO: Session completed
  Context: {
  "sessionId": "0b4d4062-314e-45e4-a0b9-ae1ffd048b3f",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mBoundary Conditions[2m > [22m[2mshould handle very large thoughtNumber[22m[39m
[2025-11-23T20:57:08.074Z] INFO: Session created
  Context: {
  "sessionId": "2241e4de-e812-4427-9f65-c8c7934bdb2c",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.075Z] INFO: Session completed
  Context: {
  "sessionId": "2241e4de-e812-4427-9f65-c8c7934bdb2c",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mBoundary Conditions[2m > [22m[2mshould handle totalThoughts = thoughtNumber (single thought)[22m[39m
[2025-11-23T20:57:08.076Z] INFO: Session created
  Context: {
  "sessionId": "7222625c-1eb3-45bf-93a2-b43cdd8f431c",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.076Z] INFO: Session completed
  Context: {
  "sessionId": "7222625c-1eb3-45bf-93a2-b43cdd8f431c",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Empty Data[2m > [22m[2mshould handle empty thought content[22m[39m
[2025-11-23T20:57:08.080Z] INFO: Session created
  Context: {
  "sessionId": "05053b3a-6569-4d20-8e51-75e35262a6b4",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.081Z] INFO: Session completed
  Context: {
  "sessionId": "05053b3a-6569-4d20-8e51-75e35262a6b4",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Empty Data[2m > [22m[2mshould handle empty session title with default[22m[39m
[2025-11-23T20:57:08.083Z] INFO: Session created
  Context: {
  "sessionId": "d0c4631a-40f0-49dd-9f47-1f52f3822ea3",
  "title": "Untitled Session",
  "mode": "hybrid"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Empty Data[2m > [22m[2mshould handle empty arrays for optional fields[22m[39m
[2025-11-23T20:57:08.083Z] INFO: Session created
  Context: {
  "sessionId": "eafccc90-dbd7-4b64-825e-a557d8272da7",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.084Z] INFO: Session completed
  Context: {
  "sessionId": "eafccc90-dbd7-4b64-825e-a557d8272da7",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Empty Data[2m > [22m[2mshould handle session with no thoughts[22m[39m
[2025-11-23T20:57:08.085Z] INFO: Session created
  Context: {
  "sessionId": "5e353cb1-5091-4bdf-ac1f-0cb469211500",
  "title": "Untitled Session",
  "mode": "hybrid"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Special Characters[2m > [22m[2mshould handle Unicode characters in thought content[22m[39m
[2025-11-23T20:57:08.087Z] INFO: Session created
  Context: {
  "sessionId": "1bb7616a-5dc0-4330-8d0d-9942e75dc11d",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.087Z] INFO: Session completed
  Context: {
  "sessionId": "1bb7616a-5dc0-4330-8d0d-9942e75dc11d",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Special Characters[2m > [22m[2mshould handle special characters in session title[22m[39m
[2025-11-23T20:57:08.088Z] INFO: Session created
  Context: {
  "sessionId": "639fc763-8ad9-41a3-984f-66fe97a939a9",
  "title": "<script>alert(\"xss\")</script>",
  "mode": "hybrid"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Special Characters[2m > [22m[2mshould handle LaTeX with special characters[22m[39m
[2025-11-23T20:57:08.089Z] INFO: Session created
  Context: {
  "sessionId": "be60c254-bf87-43ce-a001-e7e279651026",
  "title": "Untitled Session",
  "mode": "mathematics"
}
[2025-11-23T20:57:08.089Z] INFO: Session completed
  Context: {
  "sessionId": "be60c254-bf87-43ce-a001-e7e279651026",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Special Characters[2m > [22m[2mshould handle newlines and tabs in thought content[22m[39m
[2025-11-23T20:57:08.090Z] INFO: Session created
  Context: {
  "sessionId": "c086e6a7-3864-4a96-a187-0b95b72e49a8",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.091Z] INFO: Session completed
  Context: {
  "sessionId": "c086e6a7-3864-4a96-a187-0b95b72e49a8",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Large Data[2m > [22m[2mshould handle very long thought content[22m[39m
[2025-11-23T20:57:08.092Z] INFO: Session created
  Context: {
  "sessionId": "39aea66b-2577-4e7a-affe-5c2ce3b3f733",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.092Z] INFO: Session completed
  Context: {
  "sessionId": "39aea66b-2577-4e7a-affe-5c2ce3b3f733",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Large Data[2m > [22m[2mshould handle sessions with many thoughts[22m[39m
[2025-11-23T20:57:08.093Z] INFO: Session created
  Context: {
  "sessionId": "dedd8737-5c07-45ae-ae2b-cc361a619384",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.095Z] INFO: Session completed
  Context: {
  "sessionId": "dedd8737-5c07-45ae-ae2b-cc361a619384",
  "title": "Untitled Session",
  "totalThoughts": 100
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mEdge Cases - Large Data[2m > [22m[2mshould handle large dependency arrays[22m[39m
[2025-11-23T20:57:08.096Z] INFO: Session created
  Context: {
  "sessionId": "0e9f48bd-8058-4194-94a3-7c15ee202b0e",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.097Z] INFO: Session completed
  Context: {
  "sessionId": "0e9f48bd-8058-4194-94a3-7c15ee202b0e",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mError Recovery[2m > [22m[2mshould maintain session integrity even with lenient validation[22m[39m
[2025-11-23T20:57:08.099Z] INFO: Session created
  Context: {
  "sessionId": "2df81dc1-292f-4ad7-8b42-d243348e16bd",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.099Z] INFO: Session completed
  Context: {
  "sessionId": "2df81dc1-292f-4ad7-8b42-d243348e16bd",
  "title": "Untitled Session",
  "totalThoughts": 1
}
[2025-11-23T20:57:08.100Z] INFO: Session completed
  Context: {
  "sessionId": "2df81dc1-292f-4ad7-8b42-d243348e16bd",
  "title": "Untitled Session",
  "totalThoughts": 2
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mError Recovery[2m > [22m[2mshould allow mode switch even after adding invalid data[22m[39m
[2025-11-23T20:57:08.101Z] INFO: Session created
  Context: {
  "sessionId": "9dbded92-fb51-4ee4-a68d-ee5bb502953e",
  "title": "Untitled Session",
  "mode": "sequential"
}
[2025-11-23T20:57:08.101Z] INFO: Session completed
  Context: {
  "sessionId": "9dbded92-fb51-4ee4-a68d-ee5bb502953e",
  "title": "Untitled Session",
  "totalThoughts": 1
}
[2025-11-23T20:57:08.102Z] INFO: Session mode switched
  Context: {
  "sessionId": "9dbded92-fb51-4ee4-a68d-ee5bb502953e",
  "oldMode": "sequential",
  "newMode": "shannon"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mSummary Generation Edge Cases[2m > [22m[2mshould generate summary for empty session[22m[39m
[2025-11-23T20:57:08.103Z] INFO: Session created
  Context: {
  "sessionId": "e07b48be-0812-47e8-8248-3ee5d7b3cd74",
  "title": "Empty Session",
  "mode": "hybrid"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mSummary Generation Edge Cases[2m > [22m[2mshould generate summary for single thought session[22m[39m
[2025-11-23T20:57:08.104Z] INFO: Session created
  Context: {
  "sessionId": "016f0e98-29ab-4640-b069-9f49e192c4c4",
  "title": "Single Thought",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.105Z] INFO: Session completed
  Context: {
  "sessionId": "016f0e98-29ab-4640-b069-9f49e192c4c4",
  "title": "Single Thought",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mSummary Generation Edge Cases[2m > [22m[2mshould handle summary for session with very long thoughts[22m[39m
[2025-11-23T20:57:08.106Z] INFO: Session created
  Context: {
  "sessionId": "7df34619-ddc5-4134-b766-479fd90c4eaf",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.106Z] INFO: Session completed
  Context: {
  "sessionId": "7df34619-ddc5-4134-b766-479fd90c4eaf",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mConcurrent Session Management[2m > [22m[2mshould handle rapid session creation[22m[39m
[2025-11-23T20:57:08.107Z] INFO: Session created
  Context: {
  "sessionId": "c00a511e-66be-4d69-b862-aad92be0f6fe",
  "title": "Session 0",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "0c1552a6-2456-4801-82c8-e357d045af7e",
  "title": "Session 1",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "390fbd78-f226-495b-9e37-f26478b97adf",
  "title": "Session 2",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "6a846679-b38a-42c7-a5ce-d07c6282e649",
  "title": "Session 3",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "4af0e409-3fd4-46a7-a0e7-f5aa03c29759",
  "title": "Session 4",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "96a42eec-c99a-4ccf-acd1-0852ebe76041",
  "title": "Session 5",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "c6c87629-4b9d-4cb1-bd36-40db85afe9b6",
  "title": "Session 6",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "282cf16e-bda7-420f-95f7-243234838b10",
  "title": "Session 7",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "de7810ae-3ce5-4b66-bb05-1875bd9a896a",
  "title": "Session 8",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.108Z] INFO: Session created
  Context: {
  "sessionId": "4c1877ac-7e7a-4fb1-8cb7-8c24dfcdb5cd",
  "title": "Session 9",
  "mode": "hybrid"
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mConcurrent Session Management[2m > [22m[2mshould handle concurrent thought additions to same session[22m[39m
[2025-11-23T20:57:08.109Z] INFO: Session created
  Context: {
  "sessionId": "4d386145-36ac-431a-98f1-6e1d73af50bf",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.109Z] INFO: Session completed
  Context: {
  "sessionId": "4d386145-36ac-431a-98f1-6e1d73af50bf",
  "title": "Untitled Session",
  "totalThoughts": 5
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mConcurrent Session Management[2m > [22m[2mshould maintain independence of multiple sessions[22m[39m
[2025-11-23T20:57:08.110Z] INFO: Session created
  Context: {
  "sessionId": "5a023d84-6478-4790-9adf-1f092d39eb7e",
  "title": "Session 1",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.110Z] INFO: Session created
  Context: {
  "sessionId": "b3e9571a-495b-49e9-be95-fcb2a25789e0",
  "title": "Session 2",
  "mode": "hybrid"
}
[2025-11-23T20:57:08.110Z] INFO: Session completed
  Context: {
  "sessionId": "5a023d84-6478-4790-9adf-1f092d39eb7e",
  "title": "Session 1",
  "totalThoughts": 1
}
[2025-11-23T20:57:08.111Z] INFO: Session completed
  Context: {
  "sessionId": "b3e9571a-495b-49e9-be95-fcb2a25789e0",
  "title": "Session 2",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mMode-Specific Edge Cases[2m > [22m[2mshould handle mathematics mode with missing optional fields[22m[39m
[2025-11-23T20:57:08.112Z] INFO: Session created
  Context: {
  "sessionId": "9b9ee9ca-0621-49cb-be22-492f404a1188",
  "title": "Untitled Session",
  "mode": "mathematics"
}
[2025-11-23T20:57:08.112Z] INFO: Session completed
  Context: {
  "sessionId": "9b9ee9ca-0621-49cb-be22-492f404a1188",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mMode-Specific Edge Cases[2m > [22m[2mshould handle Shannon mode without explicit stage[22m[39m
[2025-11-23T20:57:08.113Z] INFO: Session created
  Context: {
  "sessionId": "3c81eb7d-a21e-4605-a5ba-783e2f817d99",
  "title": "Untitled Session",
  "mode": "shannon"
}
[2025-11-23T20:57:08.113Z] INFO: Session completed
  Context: {
  "sessionId": "3c81eb7d-a21e-4605-a5ba-783e2f817d99",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/error-handling.test.ts[2m > [22m[2mError Handling and Edge Cases[2m > [22m[2mMode-Specific Edge Cases[2m > [22m[2mshould handle temporal mode with minimal event data[22m[39m
[2025-11-23T20:57:08.115Z] INFO: Session created
  Context: {
  "sessionId": "fcec039e-16fb-4d35-b44a-e4802c506803",
  "title": "Untitled Session",
  "mode": "temporal"
}
[2025-11-23T20:57:08.115Z] INFO: Session completed
  Context: {
  "sessionId": "fcec039e-16fb-4d35-b44a-e4802c506803",
  "title": "Untitled Session",
  "totalThoughts": 1
}

 [32mâœ“[39m tests/integration/error-handling.test.ts [2m ([22m[2m36 tests[22m[2m)[22m[90m 83[2mms[22m[39m
[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2minitialization[2m > [22m[2mshould create necessary directories[22m[39m
[2025-11-23T20:57:08.383Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-b2e8560d-da23-4624-86a9-0591dc07fecd",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2minitialization[2m > [22m[2mshould create necessary directories[22m[39m
[2025-11-23T20:57:08.391Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2minitialization[2m > [22m[2mshould handle multiple initialization calls[22m[39m
[2025-11-23T20:57:08.413Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-60e1c3b2-2fe9-4811-99e3-353033b71dd5",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}
[2025-11-23T20:57:08.414Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2msaveSession[2m > [22m[2mshould save a session to disk[22m[39m
[2025-11-23T20:57:08.429Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-9ebfdc45-3831-498d-8e04-7c3145ffab95",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2msaveSession[2m > [22m[2mshould save a session to disk[22m[39m
[2025-11-23T20:57:08.452Z] INFO: FileSessionStore closed

 [32mâœ“[39m tests/unit/analogical.test.ts [2m ([22m[2m9 tests[22m[2m)[22m[90m 32[2mms[22m[39m
[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2msaveSession[2m > [22m[2mshould save session with correct content[22m[39m
[2025-11-23T20:57:08.469Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-94b6b446-17aa-4a33-82c9-923cef7197e9",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2msaveSession[2m > [22m[2mshould save session with correct content[22m[39m
[2025-11-23T20:57:08.481Z] INFO: FileSessionStore closed

 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 147[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m
[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2msaveSession[2m > [22m[2mshould update metadata index[22m[39m
[2025-11-23T20:57:08.495Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-15aab1f7-9416-401f-82a8-c98098a44620",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2msaveSession[2m > [22m[2mshould update metadata index[22m[39m
[2025-11-23T20:57:08.507Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2msaveSession[2m > [22m[2mshould overwrite existing session[22m[39m
[2025-11-23T20:57:08.525Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-25f805ef-78a3-4c3d-a40b-3226dbe45bfe",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2msaveSession[2m > [22m[2mshould overwrite existing session[22m[39m
[2025-11-23T20:57:08.550Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mloadSession[2m > [22m[2mshould load an existing session[22m[39m
[2025-11-23T20:57:08.570Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-4bbcd5f4-9b29-4fba-9475-efcbdf3454c2",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mloadSession[2m > [22m[2mshould load an existing session[22m[39m
[2025-11-23T20:57:08.581Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mloadSession[2m > [22m[2mshould return null for non-existent session[22m[39m
[2025-11-23T20:57:08.606Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-0b57bb4b-e439-43da-b03f-86a9ce4d78c4",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mloadSession[2m > [22m[2mshould return null for non-existent session[22m[39m
[2025-11-23T20:57:08.608Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mloadSession[2m > [22m[2mshould preserve Date objects[22m[39m
[2025-11-23T20:57:08.622Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-02441144-2a1e-46b8-90bf-06e6b624a626",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mloadSession[2m > [22m[2mshould preserve Date objects[22m[39m
[2025-11-23T20:57:08.636Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mloadSession[2m > [22m[2mshould preserve Map objects[22m[39m
[2025-11-23T20:57:08.649Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-19eeacfa-cc15-4a32-8422-52b48d300b1a",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mloadSession[2m > [22m[2mshould preserve Map objects[22m[39m
[2025-11-23T20:57:08.662Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mdeleteSession[2m > [22m[2mshould delete an existing session[22m[39m
[2025-11-23T20:57:08.679Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-58f17d5e-63d0-49c5-a8dc-11b66d3afd5f",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mdeleteSession[2m > [22m[2mshould delete an existing session[22m[39m
[2025-11-23T20:57:08.696Z] INFO: Session deleted
  Context: {
  "sessionId": "2aa0446f-bb66-403b-b10a-66ee7084d915"
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mdeleteSession[2m > [22m[2mshould delete an existing session[22m[39m
[2025-11-23T20:57:08.701Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mdeleteSession[2m > [22m[2mshould return false for non-existent session[22m[39m
[2025-11-23T20:57:08.730Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-04c35941-0e9e-4b1b-aec4-3c798dff8238",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mdeleteSession[2m > [22m[2mshould return false for non-existent session[22m[39m
[2025-11-23T20:57:08.734Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mdeleteSession[2m > [22m[2mshould update metadata index after deletion[22m[39m
[2025-11-23T20:57:08.746Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-5d085f2d-a8ef-4407-9e24-33e7b7047216",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mdeleteSession[2m > [22m[2mshould update metadata index after deletion[22m[39m
[2025-11-23T20:57:08.767Z] INFO: Session deleted
  Context: {
  "sessionId": "70c67ca5-90d1-4dec-b043-8ae88c9e8c5b"
}
[2025-11-23T20:57:08.770Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mlistSessions[2m > [22m[2mshould list all sessions[22m[39m
[2025-11-23T20:57:08.794Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-60b7277a-4999-4865-8c14-6ee7d19ad24b",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mlistSessions[2m > [22m[2mshould list all sessions[22m[39m
[2025-11-23T20:57:08.840Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mlistSessions[2m > [22m[2mshould return empty array when no sessions exist[22m[39m
[2025-11-23T20:57:08.891Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-705e801d-a7a5-4f1d-bf86-c2742859722d",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}
[2025-11-23T20:57:08.892Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mlistSessions[2m > [22m[2mshould include correct metadata fields[22m[39m
[2025-11-23T20:57:08.911Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-6d48520d-9393-4e79-a8dd-c42509566447",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mlistSessions[2m > [22m[2mshould include correct metadata fields[22m[39m
[2025-11-23T20:57:08.931Z] INFO: FileSessionStore closed

 [33mâ¯[39m tests/taxonomy/taxonomy-system.test.ts [2m ([22m[2m37 tests[22m [2m|[22m [31m15 failed[39m[2m)[22m[90m 243[2mms[22m[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Database[2m > [22mshould have 110+ reasoning types[39m
[31m     â†’ expected 69 to be greater than or equal to 70[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Database[2m > [22mshould have all required fields for each type[39m
[31m     â†’ expected { id: 'deductive_syllogism', â€¦(14) } to have property "definition"[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Database[2m > [22mshould have valid difficulty levels[39m
[31m     â†’ expected [ Array(4) ] to include 'beginner'[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Lookup[2m > [22mshould search by category[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould query by difficulty[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould query by keyword[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould explore reasoning type[39m
[31m     â†’ Cannot read properties of undefined (reading 'id')[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould find path between types[39m
[31m     â†’ Cannot read properties of undefined (reading 'prerequisites')[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould recommend based on problem[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mSuggestion Engine[2m > [22mshould suggest for problem characteristics[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mSuggestion Engine[2m > [22mshould analyze session[39m
[31m     â†’ expected undefined to be 1 // Object.is equality[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mAdaptive Mode Selector[2m > [22mshould select mode with best_match strategy[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mAdaptive Mode Selector[2m > [22mshould select mode with multi_modal strategy[39m
[31m     â†’ Cannot read properties of undefined (reading 'toLowerCase')[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mIntegration Tests[2m > [22mshould work end-to-end: problem -> suggestion -> selection[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mIntegration Tests[2m > [22mshould handle session with multiple modes[39m
[31m     â†’ expected undefined to be 4 // Object.is equality[39m
[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mexists[2m > [22m[2mshould return true for existing session[22m[39m
[2025-11-23T20:57:08.963Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-00cc11bd-d98e-4f5d-90ba-9d45978edbee",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mexists[2m > [22m[2mshould return true for existing session[22m[39m
[2025-11-23T20:57:08.972Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mexists[2m > [22m[2mshould return false for non-existent session[22m[39m
[2025-11-23T20:57:08.994Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-1c0fe2fe-7c5d-4cb0-8512-a16fc671608e",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}
[2025-11-23T20:57:08.996Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mgetStats[2m > [22m[2mshould return storage statistics[22m[39m
[2025-11-23T20:57:09.012Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-3db8869a-e4ee-498e-81bc-e5715a964163",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mgetStats[2m > [22m[2mshould return storage statistics[22m[39m
[2025-11-23T20:57:09.030Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mgetStats[2m > [22m[2mshould calculate total thoughts correctly[22m[39m
[2025-11-23T20:57:09.059Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-04f9e36a-5584-496b-8228-71ddd8957f9d",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mgetStats[2m > [22m[2mshould calculate total thoughts correctly[22m[39m
[2025-11-23T20:57:09.109Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mgetStats[2m > [22m[2mshould identify storage health status[22m[39m
[2025-11-23T20:57:09.124Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-b67f2d45-76d5-455e-8452-8d36f562d49a",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mgetStats[2m > [22m[2mshould identify storage health status[22m[39m
[2025-11-23T20:57:09.146Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-b67f2d45-76d5-455e-8452-8d36f562d49a",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 10,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mgetStats[2m > [22m[2mshould identify storage health status[22m[39m
[2025-11-23T20:57:09.568Z] INFO: FileSessionStore closed
[2025-11-23T20:57:09.586Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mcleanup[2m > [22m[2mshould clean up old sessions[22m[39m
[2025-11-23T20:57:09.720Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-7adb0426-3b1d-42d1-96c6-ed2d4176e335",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mcleanup[2m > [22m[2mshould clean up old sessions[22m[39m
[2025-11-23T20:57:09.804Z] INFO: Session deleted
  Context: {
  "sessionId": "c641490a-c20b-4bed-a6cc-506a7453d09b"
}
[2025-11-23T20:57:09.805Z] INFO: Cleanup completed
  Context: {
  "cleanedCount": 1,
  "maxAgeMs": 604800000,
  "remaining": 1
}
[2025-11-23T20:57:09.806Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mcleanup[2m > [22m[2mshould return 0 when no sessions need cleanup[22m[39m
[2025-11-23T20:57:09.838Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-ea763a90-e446-4f89-92ef-d3c269552a1e",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mcleanup[2m > [22m[2mshould return 0 when no sessions need cleanup[22m[39m
[2025-11-23T20:57:09.859Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mconcurrent operations[2m > [22m[2mshould handle concurrent saves[22m[39m
[2025-11-23T20:57:09.914Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-6b7be7e3-38c3-4509-9efb-431bec85c4ee",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mconcurrent operations[2m > [22m[2mshould handle concurrent saves[22m[39m
[2025-11-23T20:57:09.954Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mconcurrent operations[2m > [22m[2mshould handle concurrent reads[22m[39m
[2025-11-23T20:57:10.055Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-269c9bc2-bf68-4a02-aba8-b4f2a11b14b6",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2mconcurrent operations[2m > [22m[2mshould handle concurrent reads[22m[39m
[2025-11-23T20:57:10.077Z] INFO: FileSessionStore closed

 [32mâœ“[39m tests/unit/types.test.ts [2m ([22m[2m14 tests[22m[2m)[22m[90m 117[2mms[22m[39m
[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2merror handling[2m > [22m[2mshould handle invalid session data gracefully[22m[39m
[2025-11-23T20:57:10.121Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-accdc6a3-aabc-4b2a-9601-570dc85c4ec4",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstderr[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2merror handling[2m > [22m[2mshould handle invalid session data gracefully[22m[39m
[2025-11-23T20:57:10.161Z] ERROR: Failed to load session
  Context: {
  "sessionId": "e49732e9-bdb1-4d5d-9301-86ebfa705a4a"
}
  Error: Unexpected token 'i', "invalid json {{{" is not valid JSON
  Stack: SyntaxError: Unexpected token 'i', "invalid json {{{" is not valid JSON
    at JSON.parse (<anonymous>)
    at FileSessionStore.loadSession (C:\mcp-servers\deepthinking-mcp\src\session\storage\file-store.ts:124:27)
    at C:\mcp-servers\deepthinking-mcp\tests\unit\file-store.test.ts:455:22
    at runTest (file:///C:/mcp-servers/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///C:/mcp-servers/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///C:/mcp-servers/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///C:/mcp-servers/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///C:/mcp-servers/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///C:/mcp-servers/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///C:/mcp-servers/deepthinking-mcp/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2merror handling[2m > [22m[2mshould handle invalid session data gracefully[22m[39m
[2025-11-23T20:57:10.188Z] INFO: FileSessionStore closed

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2merror handling[2m > [22m[2mshould handle operations before initialization[22m[39m
[2025-11-23T20:57:10.205Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-fdcc5b3b-8940-4b8d-9be9-0b5bf893b64d",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2merror handling[2m > [22m[2mshould handle operations before initialization[22m[39m
[2025-11-23T20:57:10.210Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "C:\\Users\\danie\\AppData\\Local\\Temp\\deepthinking-test-fdcc5b3b-8940-4b8d-9be9-0b5bf893b64d",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

[90mstdout[2m | tests/unit/file-store.test.ts[2m > [22m[2mFileSessionStore[2m > [22m[2merror handling[2m > [22m[2mshould handle operations before initialization[22m[39m
[2025-11-23T20:57:10.220Z] INFO: FileSessionStore closed
[2025-11-23T20:57:10.220Z] INFO: FileSessionStore closed

 [32mâœ“[39m tests/unit/file-store.test.ts [2m ([22m[2m27 tests[22m[2m)[22m[33m 1873[2mms[22m[39m
 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 81[2mms[22m[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m17 failed[39m[2m)[22m[90m 122[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould include table of contents when enabled[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould exclude table of contents when disabled[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould include metadata when enabled[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould format theorem environments[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDiagram Integration[2m > [22mshould include diagrams when enabled[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDiagram Integration[2m > [22mshould exclude diagrams when disabled[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate thought diagram[39m
[31m     â†’ Cannot read properties of undefined (reading 'nodes')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate session diagrams[39m
[31m     â†’ Cannot read properties of undefined (reading 'nodes')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate Mermaid appendix[39m
[31m     â†’ Cannot read properties of undefined (reading 'nodes')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ Cannot read properties of undefined (reading 'nodes')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mExport Options[2m > [22mshould respect document class option[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mExport Options[2m > [22mshould respect font size option[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mExport Options[2m > [22mshould respect paper size option[39m
[31m     â†’ Cannot read properties of undefined (reading 'totalThoughts')[39m
[90mstdout[2m | tests/integration/session-workflow.test.ts[2m > [22m[2mSession Workflow Integration[2m > [22m[2mshould complete full sequential thinking workflow[22m[39m
[2025-11-23T20:57:11.058Z] INFO: Session created
  Context: {
  "sessionId": "86d5d6b6-c2f6-4e70-89e0-f2fa4679ce82",
  "title": "Solve Prime Factorization Problem",
  "mode": "sequential"
}
[2025-11-23T20:57:11.074Z] INFO: Session completed
  Context: {
  "sessionId": "86d5d6b6-c2f6-4e70-89e0-f2fa4679ce82",
  "title": "Solve Prime Factorization Problem",
  "totalThoughts": 5
}

[90mstdout[2m | tests/integration/session-workflow.test.ts[2m > [22m[2mSession Workflow Integration[2m > [22m[2mshould handle mathematics mode with validation[22m[39m
[2025-11-23T20:57:11.081Z] INFO: Session created
  Context: {
  "sessionId": "97c746c6-b923-4568-b6c8-0926ed1d8751",
  "title": "Prove Fundamental Theorem",
  "mode": "mathematics"
}
[2025-11-23T20:57:11.081Z] INFO: Session completed
  Context: {
  "sessionId": "97c746c6-b923-4568-b6c8-0926ed1d8751",
  "title": "Prove Fundamental Theorem",
  "totalThoughts": 3
}

[90mstdout[2m | tests/integration/session-workflow.test.ts[2m > [22m[2mSession Workflow Integration[2m > [22m[2mshould handle mode switching mid-session[22m[39m
[2025-11-23T20:57:11.083Z] INFO: Session created
  Context: {
  "sessionId": "8981ef7b-a878-4cf9-8972-bcedd18273ff",
  "title": "Problem Solving Session",
  "mode": "sequential"
}
[2025-11-23T20:57:11.084Z] INFO: Session mode switched
  Context: {
  "sessionId": "8981ef7b-a878-4cf9-8972-bcedd18273ff",
  "oldMode": "sequential",
  "newMode": "shannon",
  "reason": "Need more structure"
}
[2025-11-23T20:57:11.085Z] INFO: Session completed
  Context: {
  "sessionId": "8981ef7b-a878-4cf9-8972-bcedd18273ff",
  "title": "Problem Solving Session",
  "totalThoughts": 3
}

[90mstdout[2m | tests/integration/session-workflow.test.ts[2m > [22m[2mSession Workflow Integration[2m > [22m[2mshould track validation cache statistics[22m[39m
[2025-11-23T20:57:11.087Z] INFO: Session created
  Context: {
  "sessionId": "d05eab98-148c-4697-be7d-9fb32e1a9da4",
  "title": "Cache Test Session",
  "mode": "sequential"
}
[2025-11-23T20:57:11.087Z] INFO: Session completed
  Context: {
  "sessionId": "d05eab98-148c-4697-be7d-9fb32e1a9da4",
  "title": "Cache Test Session",
  "totalThoughts": 3
}

[90mstdout[2m | tests/integration/session-workflow.test.ts[2m > [22m[2mSession Workflow Integration[2m > [22m[2mshould handle multiple concurrent sessions[22m[39m
[2025-11-23T20:57:11.092Z] INFO: Session created
  Context: {
  "sessionId": "6a1c41ce-19b2-48ef-84bb-53ace3275c06",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-23T20:57:11.093Z] INFO: Session created
  Context: {
  "sessionId": "ad0cc7c9-fa10-4d58-85ed-86b9c764393d",
  "title": "Session 2",
  "mode": "mathematics"
}
[2025-11-23T20:57:11.093Z] INFO: Session created
  Context: {
  "sessionId": "dc77ea0e-47f6-402a-9329-e650287895a9",
  "title": "Session 3",
  "mode": "shannon"
}
[2025-11-23T20:57:11.093Z] INFO: Session completed
  Context: {
  "sessionId": "6a1c41ce-19b2-48ef-84bb-53ace3275c06",
  "title": "Session 1",
  "totalThoughts": 1
}
[2025-11-23T20:57:11.093Z] INFO: Session completed
  Context: {
  "sessionId": "ad0cc7c9-fa10-4d58-85ed-86b9c764393d",
  "title": "Session 2",
  "totalThoughts": 1
}
[2025-11-23T20:57:11.094Z] INFO: Session completed
  Context: {
  "sessionId": "dc77ea0e-47f6-402a-9329-e650287895a9",
  "title": "Session 3",
  "totalThoughts": 1
}

[90mstdout[2m | tests/integration/session-workflow.test.ts[2m > [22m[2mSession Workflow Integration[2m > [22m[2mshould handle session deletion[22m[39m
[2025-11-23T20:57:11.105Z] INFO: Session created
  Context: {
  "sessionId": "748af4dc-0d9e-4e74-bbb3-f3fe42dffa79",
  "title": "Temporary Session",
  "mode": "sequential"
}
[2025-11-23T20:57:11.105Z] INFO: Session completed
  Context: {
  "sessionId": "748af4dc-0d9e-4e74-bbb3-f3fe42dffa79",
  "title": "Temporary Session",
  "totalThoughts": 1
}
[2025-11-23T20:57:11.106Z] INFO: Session deleted
  Context: {
  "sessionId": "748af4dc-0d9e-4e74-bbb3-f3fe42dffa79",
  "title": "Temporary Session",
  "thoughtCount": 1
}

[90mstdout[2m | tests/integration/session-workflow.test.ts[2m > [22m[2mSession Workflow Integration[2m > [22m[2mshould maintain metrics accuracy across workflow[22m[39m
[2025-11-23T20:57:11.111Z] INFO: Session created
  Context: {
  "sessionId": "9b2ef6a8-aca0-449d-847d-1ad51a207943",
  "title": "Metrics Test",
  "mode": "sequential"
}
[2025-11-23T20:57:11.113Z] INFO: Session completed
  Context: {
  "sessionId": "9b2ef6a8-aca0-449d-847d-1ad51a207943",
  "title": "Metrics Test",
  "totalThoughts": 5
}

 [32mâœ“[39m tests/integration/session-workflow.test.ts [2m ([22m[2m7 tests[22m[2m)[22m[90m 65[2mms[22m[39m
 [32mâœ“[39m tests/integration/mcp-compliance.test.ts [2m ([22m[2m21 tests[22m[2m)[22m[90m 157[2mms[22m[39m
 [32mâœ“[39m tests/unit/causal.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 51[2mms[22m[39m
 [32mâœ“[39m tests/unit/abductive.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 34[2mms[22m[39m
[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mcreateSession[2m > [22m[2mshould create a new session with default values[22m[39m
[2025-11-23T20:57:14.023Z] INFO: Session created
  Context: {
  "sessionId": "3789071d-f68d-42e8-83f4-bfb16d263476",
  "title": "Untitled Session",
  "mode": "hybrid"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mcreateSession[2m > [22m[2mshould create a session with custom options[22m[39m
[2025-11-23T20:57:14.038Z] INFO: Session created
  Context: {
  "sessionId": "4ffb61a5-fbf1-4020-a056-e79a2672c641",
  "title": "My Problem",
  "mode": "mathematics",
  "domain": "number_theory",
  "author": "Test User"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mcreateSession[2m > [22m[2mshould initialize metrics correctly[22m[39m
[2025-11-23T20:57:14.040Z] INFO: Session created
  Context: {
  "sessionId": "5d94afa6-3534-4e5d-97eb-88a0de86df2f",
  "title": "Untitled Session",
  "mode": "hybrid"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mgetSession[2m > [22m[2mshould retrieve an existing session[22m[39m
[2025-11-23T20:57:14.043Z] INFO: Session created
  Context: {
  "sessionId": "7fc5c97e-da9b-4e95-b8d7-3ffd08fa3ad5",
  "title": "Test Session",
  "mode": "hybrid"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2maddThought[2m > [22m[2mshould add a sequential thought to session[22m[39m
[2025-11-23T20:57:14.048Z] INFO: Session created
  Context: {
  "sessionId": "5a62260b-614c-4a0d-badd-22d37ef2f273",
  "title": "Untitled Session",
  "mode": "sequential"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2maddThought[2m > [22m[2mshould mark session as complete when nextThoughtNeeded is false[22m[39m
[2025-11-23T20:57:14.055Z] INFO: Session created
  Context: {
  "sessionId": "5212c17c-c5a5-44d8-8bea-6059ac4cb6e3",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:14.056Z] INFO: Session completed
  Context: {
  "sessionId": "5212c17c-c5a5-44d8-8bea-6059ac4cb6e3",
  "title": "Untitled Session",
  "totalThoughts": 1
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2maddThought[2m > [22m[2mshould track revisions in metrics[22m[39m
[2025-11-23T20:57:14.057Z] INFO: Session created
  Context: {
  "sessionId": "24cb50bf-f4db-4494-828e-8410995f483b",
  "title": "Untitled Session",
  "mode": "hybrid"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2maddThought[2m > [22m[2mshould calculate average uncertainty for Shannon thoughts[22m[39m
[2025-11-23T20:57:14.059Z] INFO: Session created
  Context: {
  "sessionId": "320b8079-2462-4a7e-a208-410c3849cf86",
  "title": "Untitled Session",
  "mode": "shannon"
}

[90mstderr[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2maddThought[2m > [22m[2mshould throw error for non-existent session[22m[39m
[2025-11-23T20:57:14.079Z] ERROR: Session not found
  Context: {
  "sessionId": "00000000-0000-4000-8000-000000000000"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mswitchMode[2m > [22m[2mshould switch session mode[22m[39m
[2025-11-23T20:57:14.092Z] INFO: Session created
  Context: {
  "sessionId": "c25d3baa-c169-4441-92f3-6573d7e03930",
  "title": "Untitled Session",
  "mode": "sequential"
}
[2025-11-23T20:57:14.093Z] INFO: Session mode switched
  Context: {
  "sessionId": "c25d3baa-c169-4441-92f3-6573d7e03930",
  "oldMode": "sequential",
  "newMode": "shannon",
  "reason": "Need systematic approach"
}

[90mstderr[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mswitchMode[2m > [22m[2mshould throw error for non-existent session[22m[39m
[2025-11-23T20:57:14.094Z] ERROR: Session not found
  Context: {
  "sessionId": "00000000-0000-4000-8000-000000000000"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mlistSessions[2m > [22m[2mshould list all sessions[22m[39m
[2025-11-23T20:57:14.096Z] INFO: Session created
  Context: {
  "sessionId": "be045e8f-9d25-4377-bff7-ff6193b4e196",
  "title": "Session 1",
  "mode": "hybrid"
}
[2025-11-23T20:57:14.096Z] INFO: Session created
  Context: {
  "sessionId": "af35a3ac-2c6c-4264-a043-a740e61ce71d",
  "title": "Session 2",
  "mode": "hybrid"
}
[2025-11-23T20:57:14.096Z] INFO: Session created
  Context: {
  "sessionId": "0b728ec9-3760-4b6e-a7de-eac8263b8c9f",
  "title": "Session 3",
  "mode": "hybrid"
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mdeleteSession[2m > [22m[2mshould delete a session[22m[39m
[2025-11-23T20:57:14.104Z] INFO: Session created
  Context: {
  "sessionId": "45117df8-5413-4d4f-bf32-9ee048292627",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-23T20:57:14.104Z] INFO: Session deleted
  Context: {
  "sessionId": "45117df8-5413-4d4f-bf32-9ee048292627",
  "title": "Untitled Session",
  "thoughtCount": 0
}

[90mstdout[2m | tests/unit/session-manager.test.ts[2m > [22m[2mSessionManager[2m > [22m[2mgenerateSummary[2m > [22m[2mshould generate a summary of session[22m[39m
[2025-11-23T20:57:14.107Z] INFO: Session created
  Context: {
  "sessionId": "0494a3f1-e4b2-48d1-a932-6c46c46ef9d5",
  "title": "Test Problem",
  "mode": "hybrid"
}
[2025-11-23T20:57:14.107Z] INFO: Session completed
  Context: {
  "sessionId": "0494a3f1-e4b2-48d1-a932-6c46c46ef9d5",
  "title": "Test Problem",
  "totalThoughts": 1
}

 [32mâœ“[39m tests/unit/session-manager.test.ts [2m ([22m[2m16 tests[22m[2m)[22m[90m 94[2mms[22m[39m
 [32mâœ“[39m tests/unit/bayesian.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 49[2mms[22m[39m
 [32mâœ“[39m tests/unit/sanitization.test.ts [2m ([22m[2m26 tests[22m[2m)[22m[90m 47[2mms[22m[39m
 [32mâœ“[39m tests/unit/counterfactual.test.ts [2m ([22m[2m8 tests[22m[2m)[22m[90m 123[2mms[22m[39m
 [33mâ¯[39m tests/benchmarks/validation-performance.test.ts [2m ([22m[2m3 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[33m 1026[2mms[22m[39m
[31m   [33mâ¯[31m tests/benchmarks/validation-performance.test.ts[2m > [22mValidation Performance Benchmark[2m > [22mshould handle high cache hit rates efficiently[39m
[31m     â†’ expected 0.26257356551577854 to be greater than 1.4[39m
[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould show significant performance improvement for cache hits[22m[39m

ðŸ“Š Validation Cache Benchmark: Testing cache performance

ðŸ”´ First validation (cache miss):
   Time: 38.2270ms
   Valid: true
   Confidence: 0.70

ðŸŸ¢ Second validation (cache hit):
   Time: 0.2597ms
   Valid: true
   Confidence: 0.70

ðŸ“ˆ Performance Analysis:
   Cache miss time: 38.2270ms
   Cache hit time: 0.2597ms
   Speedup: 147.20x
   Hit rate: 50.0%

ðŸŽ¯ Result: EXCELLENT (â‰¥10x)

[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould maintain O(1) lookup complexity regardless of cache size[22m[39m

ðŸ“ˆ Complexity Analysis: Testing O(1) cache lookup
   Cache size 10: 0.1433ms per lookup
   Cache size 50: 0.1782ms per lookup
   Cache size 100: 0.0656ms per lookup

   Min: 0.0656ms, Max: 0.1782ms, Ratio: 2.72x
   Complexity: O(1) âœ…

[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould handle high cache hit rates efficiently[22m[39m

ðŸ“Š High-Volume Test: Simulating realistic usage patterns
   Running 100 validations (5 unique thoughts, repeated pattern)...

ðŸ“ˆ Results:
   Total validations: 100
   Cache misses: 5 (avg 0.3541ms)
   Cache hits: 95 (avg 1.3484ms)
   Average speedup: 0.26x
   Hit rate: 95.0%
   Cache size: 5/1000

 [32mâœ“[39m tests/unit/errors.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 63[2mms[22m[39m
 [32mâœ“[39m tests/unit/logger.test.ts [2m ([22m[2m11 tests[22m[2m)[22m[90m 44[2mms[22m[39m
 [32mâœ“[39m tests/benchmarks/metrics-performance.test.ts [2m ([22m[2m2 tests[22m[2m)[22m[90m 63[2mms[22m[39m
[90mstdout[2m | tests/benchmarks/metrics-performance.test.ts[2m > [22m[2mMetrics Performance Benchmark[2m > [22m[2mshould show performance improvement with incremental calculation[22m[39m
[2025-11-23T20:57:16.174Z] INFO: Session created
  Context: {
  "sessionId": "ef53f028-5d8a-46ad-9090-49d1918f4407",
  "title": "Performance Test",
  "mode": "sequential"
}

ðŸ“Š Benchmark: Adding 1000 thoughts with uncertainty tracking
[2025-11-23T20:57:16.196Z] INFO: Session completed
  Context: {
  "sessionId": "ef53f028-5d8a-46ad-9090-49d1918f4407",
  "title": "Performance Test",
  "totalThoughts": 1000
}
âœ… Total time: 18.09ms
âœ… Average time per thought: 0.0181ms
âœ… Expected average uncertainty: 0.485744
âœ… Actual average uncertainty: 0.485744
âœ… Accuracy verified: PASS

ðŸŽ¯ Performance: EXCELLENT

[90mstdout[2m | tests/benchmarks/metrics-performance.test.ts[2m > [22m[2mMetrics Performance Benchmark[2m > [22m[2mshould maintain O(1) complexity regardless of session size[22m[39m

ðŸ“ˆ Complexity Analysis: Testing O(1) behavior
[2025-11-23T20:57:16.208Z] INFO: Session created
  Context: {
  "sessionId": "424d754b-aa53-42c7-8f74-bda427e8962a",
  "title": "Test Session 100",
  "mode": "sequential"
}
[2025-11-23T20:57:16.210Z] INFO: Session completed
  Context: {
  "sessionId": "424d754b-aa53-42c7-8f74-bda427e8962a",
  "title": "Test Session 100",
  "totalThoughts": 100
}
  Session size 100: 0.0202ms per thought
[2025-11-23T20:57:16.211Z] INFO: Session created
  Context: {
  "sessionId": "3384b6d1-4c3b-4828-a158-f11f5c3cf577",
  "title": "Test Session 500",
  "mode": "sequential"
}
[2025-11-23T20:57:16.215Z] INFO: Session completed
  Context: {
  "sessionId": "3384b6d1-4c3b-4828-a158-f11f5c3cf577",
  "title": "Test Session 500",
  "totalThoughts": 500
}
  Session size 500: 0.0096ms per thought
[2025-11-23T20:57:16.215Z] INFO: Session created
  Context: {
  "sessionId": "aa314ddd-872e-49f6-afda-c497b40a66fe",
  "title": "Test Session 1000",
  "mode": "sequential"
}
[2025-11-23T20:57:16.223Z] INFO: Session completed
  Context: {
  "sessionId": "aa314ddd-872e-49f6-afda-c497b40a66fe",
  "title": "Test Session 1000",
  "totalThoughts": 1000
}
  Session size 1000: 0.0077ms per thought

  Min: 0.0077ms, Max: 0.0202ms, Overall Ratio: 2.61x
  Ratio (500 vs 1000): 1.24x
  Complexity: O(1) âœ…


[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 34 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/benchmarks/validation-performance.test.ts[2m > [22mValidation Performance Benchmark[2m > [22mshould handle high cache hit rates efficiently
[31m[1mAssertionError[22m: expected 0.26257356551577854 to be greater than 1.4[39m
[36m [2mâ¯[22m tests/benchmarks/validation-performance.test.ts:[2m235:21[22m[39m
    [90m233| [39m
    [90m234| [39m    [90m// Verify speedup (adjusted to 1.4x for modular architecture in v3[39mâ€¦
    [90m235| [39m    [34mexpect[39m(speedup)[33m.[39m[34mtoBeGreaterThan[39m([34m1.4[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m236| [39m
    [90m237| [39m    console[33m.[39m[34mlog[39m([32m`\nðŸŽ¯ Overall Performance: [39m[36m${[39mspeedup [33m>=[39m [34m5[39m [33m?[39m [32m'EXCELLENT'[0mâ€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould include table of contents when enabled
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m83:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould exclude table of contents when disabled
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m90:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould include metadata when enabled
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m97:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m116:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m135:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould format theorem environments
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m152:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDiagram Integration[2m > [22mshould include diagrams when enabled
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m174:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDiagram Integration[2m > [22mshould exclude diagrams when disabled
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m194:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate thought diagram
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'nodes')[39m
[36m [2mâ¯[22m VisualExporter.causalGraphToMermaid src/export/visual.ts:[2m120:44[22m[39m
    [90m118| [39m
    [90m119| [39m    [90m// Add nodes with appropriate shapes[39m
    [90m120| [39m    [35mfor[39m ([35mconst[39m node [35mof[39m thought[33m.[39mcausalGraph[33m.[39mnodes) {
    [90m   | [39m                                           [31m^[39m
    [90m121| [39m      [35mconst[39m nodeId [33m=[39m [35mthis[39m[33m.[39m[34msanitizeId[39m(node[33m.[39mid)[33m;[39m
    [90m122| [39m      [35mconst[39m label [33m=[39m includeLabels [33m?[39m node[33m.[39mname [33m:[39m nodeId[33m;[39m
[90m [2mâ¯[22m VisualExporter.exportCausalGraph src/export/visual.ts:[2m45:21[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateThoughtDiagram src/export/latex-mermaid-integration.ts:[2m199:41[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m268:34[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate session diagrams
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'nodes')[39m
[36m [2mâ¯[22m VisualExporter.causalGraphToMermaid src/export/visual.ts:[2m120:44[22m[39m
    [90m118| [39m
    [90m119| [39m    [90m// Add nodes with appropriate shapes[39m
    [90m120| [39m    [35mfor[39m ([35mconst[39m node [35mof[39m thought[33m.[39mcausalGraph[33m.[39mnodes) {
    [90m   | [39m                                           [31m^[39m
    [90m121| [39m      [35mconst[39m nodeId [33m=[39m [35mthis[39m[33m.[39m[34msanitizeId[39m(node[33m.[39mid)[33m;[39m
    [90m122| [39m      [35mconst[39m label [33m=[39m includeLabels [33m?[39m node[33m.[39mname [33m:[39m nodeId[33m;[39m
[90m [2mâ¯[22m VisualExporter.exportCausalGraph src/export/visual.ts:[2m45:21[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateThoughtDiagram src/export/latex-mermaid-integration.ts:[2m199:41[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateSessionDiagrams src/export/latex-mermaid-integration.ts:[2m228:28[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m287:35[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate Mermaid appendix
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'nodes')[39m
[36m [2mâ¯[22m VisualExporter.causalGraphToMermaid src/export/visual.ts:[2m120:44[22m[39m
    [90m118| [39m
    [90m119| [39m    [90m// Add nodes with appropriate shapes[39m
    [90m120| [39m    [35mfor[39m ([35mconst[39m node [35mof[39m thought[33m.[39mcausalGraph[33m.[39mnodes) {
    [90m   | [39m                                           [31m^[39m
    [90m121| [39m      [35mconst[39m nodeId [33m=[39m [35mthis[39m[33m.[39m[34msanitizeId[39m(node[33m.[39mid)[33m;[39m
    [90m122| [39m      [35mconst[39m label [33m=[39m includeLabels [33m?[39m node[33m.[39mname [33m:[39m nodeId[33m;[39m
[90m [2mâ¯[22m VisualExporter.exportCausalGraph src/export/visual.ts:[2m45:21[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateMermaidAppendix src/export/latex-mermaid-integration.ts:[2m260:43[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m306:35[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'nodes')[39m
[36m [2mâ¯[22m VisualExporter.causalGraphToMermaid src/export/visual.ts:[2m120:44[22m[39m
    [90m118| [39m
    [90m119| [39m    [90m// Add nodes with appropriate shapes[39m
    [90m120| [39m    [35mfor[39m ([35mconst[39m node [35mof[39m thought[33m.[39mcausalGraph[33m.[39mnodes) {
    [90m   | [39m                                           [31m^[39m
    [90m121| [39m      [35mconst[39m nodeId [33m=[39m [35mthis[39m[33m.[39m[34msanitizeId[39m(node[33m.[39mid)[33m;[39m
    [90m122| [39m      [35mconst[39m label [33m=[39m includeLabels [33m?[39m node[33m.[39mname [33m:[39m nodeId[33m;[39m
[90m [2mâ¯[22m VisualExporter.exportCausalGraph src/export/visual.ts:[2m45:21[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateThoughtDiagram src/export/latex-mermaid-integration.ts:[2m199:41[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateIntegratedDocument src/export/latex-mermaid-integration.ts:[2m328:28[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m326:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mExport Options[2m > [22mshould respect document class option
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m360:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mExport Options[2m > [22mshould respect font size option
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m367:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mExport Options[2m > [22mshould respect paper size option
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'totalThoughts')[39m
[36m [2mâ¯[22m LaTeXExporter.formatMetadata src/export/latex.ts:[2m241:61[22m[39m
    [90m239| [39m
    [90m240| [39m    [35mif[39m ([35mthis[39m[33m.[39moptions[33m.[39mincludeMetrics) {
    [90m241| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Total Thoughts] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mtotalThougâ€¦
    [90m   | [39m                                                            [31m^[39m
    [90m242| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Revisions] [39m[36m${[39msession[33m.[39mmetrics[33m.[39mrevisionCount[36m}[39m[32m`[39mâ€¦
    [90m243| [39m      meta[33m.[39m[34mpush[39m([32m`  \\item[Average Uncertainty] [39m[36m${[39msession[33m.[39mmetrics[33m.[39maveraâ€¦
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m198:58[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m374:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Database[2m > [22mshould have 110+ reasoning types
[31m[1mAssertionError[22m: expected 69 to be greater than or equal to 70[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m17:41[22m[39m
    [90m 15| [39m  [34mdescribe[39m([32m'Taxonomy Database'[39m[33m,[39m () [33m=>[39m {
    [90m 16| [39m    [34mit[39m([32m'should have 110+ reasoning types'[39m[33m,[39m () [33m=>[39m {
    [90m 17| [39m      [34mexpect[39m([33mREASONING_TAXONOMY[39m[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m70[39m)[33m;[39m [90m//[39mâ€¦
    [90m   | [39m                                        [31m^[39m
    [90m 18| [39m    })[33m;[39m
    [90m 19| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Database[2m > [22mshould have all required fields for each type
[31m[1mAssertionError[22m: expected { id: 'deductive_syllogism', â€¦(14) } to have property "definition"[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m26:22[22m[39m
    [90m 24| [39m        [34mexpect[39m(type)[33m.[39m[34mtoHaveProperty[39m([32m'category'[39m)[33m;[39m
    [90m 25| [39m        [34mexpect[39m(type)[33m.[39m[34mtoHaveProperty[39m([32m'description'[39m)[33m;[39m
    [90m 26| [39m        [34mexpect[39m(type)[33m.[39m[34mtoHaveProperty[39m([32m'definition'[39m)[33m;[39m
    [90m   | [39m                     [31m^[39m
    [90m 27| [39m        [34mexpect[39m(type)[33m.[39m[34mtoHaveProperty[39m([32m'difficulty'[39m)[33m;[39m
    [90m 28| [39m        [34mexpect[39m(type)[33m.[39m[34mtoHaveProperty[39m([32m'usageFrequency'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Database[2m > [22mshould have valid difficulty levels
[31m[1mAssertionError[22m: expected [ Array(4) ] to include 'beginner'[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m54:35[22m[39m
    [90m 52| [39m
    [90m 53| [39m      [35mfor[39m ([35mconst[39m type [35mof[39m [33mREASONING_TAXONOMY[39m) {
    [90m 54| [39m        [34mexpect[39m(validDifficulties)[33m.[39m[34mtoContain[39m(type[33m.[39mdifficulty)[33m;[39m
    [90m   | [39m                                  [31m^[39m
    [90m 55| [39m      }
    [90m 56| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Lookup[2m > [22mshould search by category
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m79:30[22m[39m
    [90m 77| [39m    [34mit[39m([32m'should search by category'[39m[33m,[39m () [33m=>[39m {
    [90m 78| [39m      [35mconst[39m results [33m=[39m [34msearchReasoningTypes[39m([32m'deductive'[39m)[33m;[39m
    [90m 79| [39m      [34mexpect[39m(results[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 80| [39m      [34mexpect[39m(results[33m.[39m[34mevery[39m(r [33m=>[39m r[33m.[39mcategory [33m===[39m [32m'deductive'[39m))[33m.[39m[34mtoBe[39m([35mtrue[39mâ€¦
    [90m 81| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[22/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould query by difficulty
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m104:30[22m[39m
    [90m102| [39m    [34mit[39m([32m'should query by difficulty'[39m[33m,[39m () [33m=>[39m {
    [90m103| [39m      [35mconst[39m results [33m=[39m navigator[33m.[39m[34mquery[39m({ difficulties[33m:[39m [[32m'easy'[39m] })[33m;[39m
    [90m104| [39m      [34mexpect[39m(results[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m105| [39m      [34mexpect[39m(results[33m.[39m[34mevery[39m(r [33m=>[39m r[33m.[39mtype[33m.[39mdifficulty [33m===[39m [32m'easy'[39m))[33m.[39m[34mtoBe[39m([35mtr[39mâ€¦
    [90m106| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[23/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould query by keyword
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m110:30[22m[39m
    [90m108| [39m    [34mit[39m([32m'should query by keyword'[39m[33m,[39m () [33m=>[39m {
    [90m109| [39m      [35mconst[39m results [33m=[39m navigator[33m.[39m[34mquery[39m({ keywords[33m:[39m [[32m'proof'[39m] })[33m;[39m
    [90m110| [39m      [34mexpect[39m(results[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m111| [39m    })[33m;[39m
    [90m112| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[24/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould explore reasoning type
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'id')[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m124:27[22m[39m
    [90m122| [39m      [35mconst[39m exploration [33m=[39m navigator[33m.[39m[34mexplore[39m([32m'deductive_modus_ponens'[39m)[33m;[39m
    [90m123| [39m      [34mexpect[39m(exploration)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m124| [39m      [34mexpect[39m(exploration[33m?.[39mtype[33m.[39mid)[33m.[39m[34mtoBe[39m([32m'deductive_modus_ponens'[39m)[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m125| [39m      [34mexpect[39m(exploration[33m?.[39mrelated[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m0[39m)[33m;[39m
    [90m126| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[25/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould find path between types
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'prerequisites')[39m
[36m [2mâ¯[22m TaxonomyNavigator.findPath src/taxonomy/navigator.ts:[2m407:38[22m[39m
    [90m405| [39m
    [90m406| [39m      [90m// Prerequisites[39m
    [90m407| [39m      [35mfor[39m ([35mconst[39m prereqId [35mof[39m current[33m.[39mprerequisites) {
    [90m   | [39m                                     [31m^[39m
    [90m408| [39m        [35mif[39m ([33m![39mvisited[33m.[39m[34mhas[39m(prereqId)) {
    [90m409| [39m          neighbors[33m.[39m[34mpush[39m({ id[33m:[39m prereqId[33m,[39m relationship[33m:[39m [32m'prerequisite'[39m[33m,[39mâ€¦
[90m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m129:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[26/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mTaxonomy Navigator[2m > [22mshould recommend based on problem
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m136:38[22m[39m
    [90m134| [39m    [34mit[39m([32m'should recommend based on problem'[39m[33m,[39m () [33m=>[39m {
    [90m135| [39m      [35mconst[39m recommendations [33m=[39m navigator[33m.[39m[34mrecommend[39m([32m'proving a mathemati[39mâ€¦
    [90m136| [39m      [34mexpect[39m(recommendations[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m137| [39m    })[33m;[39m
    [90m138| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[27/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mSuggestion Engine[2m > [22mshould suggest for problem characteristics
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m163:34[22m[39m
    [90m161| [39m      })[33m;[39m
    [90m162| [39m
    [90m163| [39m      [34mexpect[39m(suggestions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m164| [39m    })[33m;[39m
    [90m165| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[28/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mSuggestion Engine[2m > [22mshould analyze session
[31m[1mAssertionError[22m: expected undefined to be 1 // Object.is equality[39m

[32m- Expected:[39m 
1

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m180:38[22m[39m
    [90m178| [39m      [35mconst[39m analysis [33m=[39m engine[33m.[39m[34manalyzeSession[39m(session)[33m;[39m
    [90m179| [39m      [34mexpect[39m(analysis)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m180| [39m      [34mexpect[39m(analysis[33m.[39mtotalThoughts)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m181| [39m      [34mexpect[39m(analysis[33m.[39maverageQualityMetrics)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m182| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[29/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mAdaptive Mode Selector[2m > [22mshould select mode with best_match strategy
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m281:38[22m[39m
    [90m279| [39m      )[33m;[39m
    [90m280| [39m
    [90m281| [39m      [34mexpect[39m(recommendations[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m282| [39m    })[33m;[39m
    [90m283| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[30/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mAdaptive Mode Selector[2m > [22mshould select mode with multi_modal strategy
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toLowerCase')[39m
[36m [2mâ¯[22m MultiModalAnalyzer.calculatePatternRelevance src/taxonomy/multi-modal-analyzer.ts:[2m520:45[22m[39m
    [90m518| [39m
    [90m519| [39m    [90m// Check use case match[39m
    [90m520| [39m    [35mconst[39m lowerProblem [33m=[39m problemDescription[33m.[39m[34mtoLowerCase[39m()[33m;[39m
    [90m   | [39m                                            [31m^[39m
    [90m521| [39m    [35mfor[39m ([35mconst[39m useCase [35mof[39m pattern[33m.[39museCases) {
    [90m522| [39m      [35mif[39m (lowerProblem[33m.[39m[34mincludes[39m(useCase[33m.[39m[34mtoLowerCase[39m())) {
[90m [2mâ¯[22m MultiModalAnalyzer.recommendPatterns src/taxonomy/multi-modal-analyzer.ts:[2m488:30[22m[39m
[90m [2mâ¯[22m AdaptiveModeSelector.selectMultiModal src/taxonomy/adaptive-selector.ts:[2m164:46[22m[39m
[90m [2mâ¯[22m AdaptiveModeSelector.selectMode src/taxonomy/adaptive-selector.ts:[2m110:21[22m[39m
[90m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m285:40[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[31/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mIntegration Tests[2m > [22mshould work end-to-end: problem -> suggestion -> selection
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m356:41[22m[39m
    [90m354| [39m      [90m// Step 1: Get recommendations from taxonomy[39m
    [90m355| [39m      [35mconst[39m navRecommendations [33m=[39m navigator[33m.[39m[34mrecommend[39m([32m'proving mathemat[39mâ€¦
    [90m356| [39m      [34mexpect[39m(navRecommendations[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m357| [39m
    [90m358| [39m      [90m// Step 2: Get suggestions from engine[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[32/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/taxonomy/taxonomy-system.test.ts[2m > [22mReasoning Taxonomy[2m > [22mIntegration Tests[2m > [22mshould handle session with multiple modes
[31m[1mAssertionError[22m: expected undefined to be 4 // Object.is equality[39m

[32m- Expected:[39m 
4

[31m+ Received:[39m 
undefined

[36m [2mâ¯[22m tests/taxonomy/taxonomy-system.test.ts:[2m401:38[22m[39m
    [90m399| [39m
    [90m400| [39m      [35mconst[39m analysis [33m=[39m engine[33m.[39m[34manalyzeSession[39m(session)[33m;[39m
    [90m401| [39m      [34mexpect[39m(analysis[33m.[39mtotalThoughts)[33m.[39m[34mtoBe[39m([34m4[39m)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m402| [39m      [34mexpect[39m(analysis[33m.[39muniqueModes)[33m.[39m[34mtoBe[39m([34m4[39m)[33m;[39m
    [90m403| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[33/34]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[34/34]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m4 failed[39m[22m[2m | [22m[1m[32m23 passed[39m[22m[90m (27)[39m
[2m      Tests [22m [1m[31m34 failed[39m[22m[2m | [22m[1m[32m450 passed[39m[22m[90m (484)[39m
[2m   Start at [22m 14:57:00
[2m   Duration [22m 16.00s[2m (transform 10.68s, setup 10ms, collect 23.93s, tests 5.13s, environment 26ms, prepare 30.46s)[22m


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/latex.ts[22m

 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 113[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m8 failed[39m[2m)[22m[90m 133[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate thought diagram[39m
[31m     â†’ Cannot read properties of undefined (reading 'nodes')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate session diagrams[39m
[31m     â†’ Cannot read properties of undefined (reading 'nodes')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate Mermaid appendix[39m
[31m     â†’ Cannot read properties of undefined (reading 'nodes')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ Cannot read properties of undefined (reading 'nodes')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[90mstderr[2m | tests/export/latex-export.test.ts[2m > [22m[2mLaTeX Exporter[2m > [22m[2mDiagram Integration[2m > [22m[2mshould include diagrams when enabled[22m[39m
Failed to generate diagram for thought 1: TypeError: Cannot read properties of undefined (reading 'nodes')
    at VisualExporter.causalGraphToMermaid [90m(C:\mcp-servers\deepthinking-mcp\[39msrc\export\visual.ts:120:44[90m)[39m
    at VisualExporter.exportCausalGraph [90m(C:\mcp-servers\deepthinking-mcp\[39msrc\export\visual.ts:45:21[90m)[39m
    at LaTeXExporter.formatThought [90m(C:\mcp-servers\deepthinking-mcp\[39msrc\export\latex.ts:339:43[90m)[39m
    at [90mC:\mcp-servers\deepthinking-mcp\[39msrc\export\latex.ts:269:26
    at Array.forEach (<anonymous>)
    at LaTeXExporter.formatSession [90m(C:\mcp-servers\deepthinking-mcp\[39msrc\export\latex.ts:268:22[90m)[39m
    at LaTeXExporter.export [90m(C:\mcp-servers\deepthinking-mcp\[39msrc\export\latex.ts:200:26[90m)[39m
    at [90mC:\mcp-servers\deepthinking-mcp\[39mtests\export\latex-export.test.ts:174:30
    at [90mfile:///C:/mcp-servers/deepthinking-mcp/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:135:14
    at [90mfile:///C:/mcp-servers/deepthinking-mcp/[39mnode_modules/[4m@vitest/runner[24m/dist/index.js:60:26


[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 9 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-23}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-23[39m
[31m+   \item[Updated] 2025-11-23[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-23}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-23[39m
[31m+   \item[Updated] 2025-11-23[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate thought diagram
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'nodes')[39m
[36m [2mâ¯[22m VisualExporter.causalGraphToMermaid src/export/visual.ts:[2m120:44[22m[39m
    [90m118| [39m
    [90m119| [39m    [90m// Add nodes with appropriate shapes[39m
    [90m120| [39m    [35mfor[39m ([35mconst[39m node [35mof[39m thought[33m.[39mcausalGraph[33m.[39mnodes) {
    [90m   | [39m                                           [31m^[39m
    [90m121| [39m      [35mconst[39m nodeId [33m=[39m [35mthis[39m[33m.[39m[34msanitizeId[39m(node[33m.[39mid)[33m;[39m
    [90m122| [39m      [35mconst[39m label [33m=[39m includeLabels [33m?[39m node[33m.[39mname [33m:[39m nodeId[33m;[39m
[90m [2mâ¯[22m VisualExporter.exportCausalGraph src/export/visual.ts:[2m45:21[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateThoughtDiagram src/export/latex-mermaid-integration.ts:[2m199:41[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m268:34[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate session diagrams
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'nodes')[39m
[36m [2mâ¯[22m VisualExporter.causalGraphToMermaid src/export/visual.ts:[2m120:44[22m[39m
    [90m118| [39m
    [90m119| [39m    [90m// Add nodes with appropriate shapes[39m
    [90m120| [39m    [35mfor[39m ([35mconst[39m node [35mof[39m thought[33m.[39mcausalGraph[33m.[39mnodes) {
    [90m   | [39m                                           [31m^[39m
    [90m121| [39m      [35mconst[39m nodeId [33m=[39m [35mthis[39m[33m.[39m[34msanitizeId[39m(node[33m.[39mid)[33m;[39m
    [90m122| [39m      [35mconst[39m label [33m=[39m includeLabels [33m?[39m node[33m.[39mname [33m:[39m nodeId[33m;[39m
[90m [2mâ¯[22m VisualExporter.exportCausalGraph src/export/visual.ts:[2m45:21[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateThoughtDiagram src/export/latex-mermaid-integration.ts:[2m199:41[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateSessionDiagrams src/export/latex-mermaid-integration.ts:[2m228:28[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m287:35[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate Mermaid appendix
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'nodes')[39m
[36m [2mâ¯[22m VisualExporter.causalGraphToMermaid src/export/visual.ts:[2m120:44[22m[39m
    [90m118| [39m
    [90m119| [39m    [90m// Add nodes with appropriate shapes[39m
    [90m120| [39m    [35mfor[39m ([35mconst[39m node [35mof[39m thought[33m.[39mcausalGraph[33m.[39mnodes) {
    [90m   | [39m                                           [31m^[39m
    [90m121| [39m      [35mconst[39m nodeId [33m=[39m [35mthis[39m[33m.[39m[34msanitizeId[39m(node[33m.[39mid)[33m;[39m
    [90m122| [39m      [35mconst[39m label [33m=[39m includeLabels [33m?[39m node[33m.[39mname [33m:[39m nodeId[33m;[39m
[90m [2mâ¯[22m VisualExporter.exportCausalGraph src/export/visual.ts:[2m45:21[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateMermaidAppendix src/export/latex-mermaid-integration.ts:[2m260:43[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m306:35[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'nodes')[39m
[36m [2mâ¯[22m VisualExporter.causalGraphToMermaid src/export/visual.ts:[2m120:44[22m[39m
    [90m118| [39m
    [90m119| [39m    [90m// Add nodes with appropriate shapes[39m
    [90m120| [39m    [35mfor[39m ([35mconst[39m node [35mof[39m thought[33m.[39mcausalGraph[33m.[39mnodes) {
    [90m   | [39m                                           [31m^[39m
    [90m121| [39m      [35mconst[39m nodeId [33m=[39m [35mthis[39m[33m.[39m[34msanitizeId[39m(node[33m.[39mid)[33m;[39m
    [90m122| [39m      [35mconst[39m label [33m=[39m includeLabels [33m?[39m node[33m.[39mname [33m:[39m nodeId[33m;[39m
[90m [2mâ¯[22m VisualExporter.exportCausalGraph src/export/visual.ts:[2m45:21[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateThoughtDiagram src/export/latex-mermaid-integration.ts:[2m199:41[22m[39m
[90m [2mâ¯[22m LatexMermaidIntegrator.generateIntegratedDocument src/export/latex-mermaid-integration.ts:[2m328:28[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m326:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/9]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/9]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m9 failed[39m[22m[2m | [22m[1m[32m41 passed[39m[22m[90m (50)[39m
[2m   Start at [22m 15:05:19
[2m   Duration [22m 838ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 111[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 50[2mms[22m[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 173[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-23}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-23[39m
[31m+   \item[Updated] 2025-11-23[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-23}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-23[39m
[31m+   \item[Updated] 2025-11-23[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 15:06:49
[2m   Duration [22m 1.53s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m tests/integration/production-features.test.ts[22m [34mx1[39m

 [33mâ¯[39m tests/integration/production-features.test.ts [2m ([22m[2m0 test[22m[2m)[22m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Suites 1 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts [2m[ tests/integration/production-features.test.ts ][22m
[31m[1mError[22m: Failed to load url ../taxonomy/classifier.js (resolved id: ../taxonomy/classifier.js) in C:/mcp-servers/deepthinking-mcp/src/search/index.ts. Does the file exist?[39m
[90m [2mâ¯[22m loadAndTransform node_modules/vite/dist/node/chunks/dep-BK3b2jBa.js:[2m51969:17[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 15:27:06
[2m   Duration [22m 1ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/search/index.ts[22m [34mx2[39m

 [33mâ¯[39m tests/integration/production-features.test.ts [2m ([22m[2m26 tests[22m [2m|[22m [31m24 failed[39m[2m)[22m[90m 84[2mms[22m[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions[39m
[31m     â†’ comparator.compareMultiple is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache[39m
[31m     â†’ backupManager.backup is not a function[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 24 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'map')[39m
[36m [2mâ¯[22m SearchIndex.indexSession src/search/index.ts:[2m32:43[22m[39m
    [90m 30| [39m  [34mindexSession[39m(session[33m:[39m [33mThinkingSession[39m)[33m:[39m [35mvoid[39m {
    [90m 31| [39m    [90m// Extract all thought texts[39m
    [90m 32| [39m    [35mconst[39m thoughtTexts [33m=[39m session[33m.[39mcontents[33m.[39m[34mmap[39m(t [33m=>[39m t[33m.[39mthought)[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m 33| [39m    [35mconst[39m allText [33m=[39m [session[33m.[39mtitle [33m||[39m [32m''[39m[33m,[39m [33m...[39mthoughtTexts][33m.[39m[34mjoin[39m([32m' '[39m)[33m;[39m
    [90m 34| [39m
[90m [2mâ¯[22m SearchEngine.indexSession src/search/engine.ts:[2m36:16[22m[39m
[90m [2mâ¯[22m tests/integration/production-features.test.ts:[2m51:22[22m[39m
[90m [2mâ¯[22m tests/integration/production-features.test.ts:[2m50:20[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m112:41[22m[39m
    [90m110| [39m
    [90m111| [39m    [34mit[39m([32m'should list built-in templates'[39m[33m,[39m () [33m=>[39m {
    [90m112| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m113| [39m
    [90m114| [39m      [34mexpect[39m(templates[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m7[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m119:41[22m[39m
    [90m117| [39m
    [90m118| [39m    [34mit[39m([32m'should filter templates by category'[39m[33m,[39m () [33m=>[39m {
    [90m119| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m120| [39m        category[33m:[39m [32m'problem-solving'[39m[33m,[39m
    [90m121| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m128:41[22m[39m
    [90m126| [39m
    [90m127| [39m    [34mit[39m([32m'should filter templates by difficulty'[39m[33m,[39m () [33m=>[39m {
    [90m128| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m129| [39m        difficulty[33m:[39m [32m'beginner'[39m[33m,[39m
    [90m130| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m137:41[22m[39m
    [90m135| [39m
    [90m136| [39m    [34mit[39m([32m'should instantiate template to session'[39m[33m,[39m () [33m=>[39m {
    [90m137| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m138| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m151:41[22m[39m
    [90m149| [39m
    [90m150| [39m    [34mit[39m([32m'should track template usage statistics'[39m[33m,[39m () [33m=>[39m {
    [90m151| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m152| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m153| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m173:42[22m[39m
    [90m171| [39m
    [90m172| [39m    [34mit[39m([32m'should process batch export job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m173| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m174| [39m        type[33m:[39m [32m'export'[39m[33m,[39m
    [90m175| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m187:42[22m[39m
    [90m185| [39m
    [90m186| [39m    [34mit[39m([32m'should process batch validation job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m187| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m188| [39m        type[33m:[39m [32m'validate'[39m[33m,[39m
    [90m189| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m203:44[22m[39m
    [90m201| [39m      [90m// Submit more jobs than the concurrency limit[39m
    [90m202| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m [34m10[39m[33m;[39m i[33m++[39m) {
    [90m203| [39m        [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                           [31m^[39m
    [90m204| [39m          type[33m:[39m [32m'export'[39m[33m,[39m
    [90m205| [39m          sessionIds[33m:[39m [testSessions[[34m0[39m][33m.[39mid][33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'create')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m225:28[22m[39m
    [90m223| [39m
    [90m224| [39m    [34mbeforeEach[39m(() [33m=>[39m {
    [90m225| [39m      cache [33m=[39m [33mCacheFactory[39m[33m.[39m[34mcreate[39m([32m'lru'[39m[33m,[39m { maxSize[33m:[39m [34m100[39m })[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m226| [39m    })[33m;[39m
    [90m227| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m281:44[22m[39m
    [90m279| [39m
    [90m280| [39m    [34mit[39m([32m'should create backup of session'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m281| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m282| [39m
    [90m283| [39m      [34mexpect[39m(backupId)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m288:27[22m[39m
    [90m286| [39m
    [90m287| [39m    [34mit[39m([32m'should list available backups'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m288| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m298:44[22m[39m
    [90m296| [39m    [34mit[39m([32m'should restore session from backup'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m297| [39m      [35mconst[39m originalSession [33m=[39m testSessions[[34m0[39m][33m;[39m
    [90m298| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(originalSession)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m299| [39m
    [90m300| [39m      [35mconst[39m restored [33m=[39m [35mawait[39m backupManager[33m.[39m[34mrestore[39m(backupId)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m337:58[22m[39m
    [90m335| [39m
    [90m336| [39m      [34mexpect[39m(comparison[33m.[39msimilarity)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m337| [39m      [34mexpect[39m(comparison[33m.[39mmetrics[33m?.[39mthoughtCountSimilarity)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                                         [31m^[39m
    [90m338| [39m    })[33m;[39m
    [90m339| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions
[31m[1mTypeError[22m: comparator.compareMultiple is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m341:38[22m[39m
    [90m339| [39m
    [90m340| [39m    [34mit[39m([32m'should compare multiple sessions'[39m[33m,[39m () [33m=>[39m {
    [90m341| [39m      [35mconst[39m comparisons [33m=[39m comparator[33m.[39m[34mcompareMultiple[39m(testSessions)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m342| [39m
    [90m343| [39m      [34mexpect[39m(comparisons)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m353:41[22m[39m
    [90m351| [39m      [90m// 1. Create sessions from templates[39m
    [90m352| [39m      [35mconst[39m templateManager [33m=[39m [35mnew[39m [33mTemplateManager[39m()[33m;[39m
    [90m353| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m354| [39m      [35mconst[39m session1 [33m=[39m templateManager[33m.[39m[34minstantiateTemplate[39m(templates[[34m0[39mâ€¦
    [90m355| [39m        title[33m:[39m [32m'E2E Test Session 1'[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m388:43[22m[39m
    [90m386| [39m      })[33m;[39m
    [90m387| [39m
    [90m388| [39m      [35mconst[39m backup1 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m389| [39m      [35mconst[39m backup2 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m390| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/24]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m24 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (26)[39m
[2m   Start at [22m 15:29:45
[2m   Duration [22m 603ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x2[39m
[2K[1A[2K[G       [90mrerun x2[39m
[2K[1A[2K[G       [2m[90mrerun x2[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/search/index.ts[22m [34mx3[39m

 [33mâ¯[39m tests/integration/production-features.test.ts [2m ([22m[2m26 tests[22m [2m|[22m [31m24 failed[39m[2m)[22m[90m 84[2mms[22m[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions[39m
[31m     â†’ Cannot read properties of undefined (reading 'map')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions[39m
[31m     â†’ comparator.compareMultiple is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache[39m
[31m     â†’ backupManager.backup is not a function[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 24 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'map')[39m
[36m [2mâ¯[22m SearchIndex.indexSession src/search/index.ts:[2m32:43[22m[39m
    [90m 30| [39m  [34mindexSession[39m(session[33m:[39m [33mThinkingSession[39m)[33m:[39m [35mvoid[39m {
    [90m 31| [39m    [90m// Extract all thought texts[39m
    [90m 32| [39m    [35mconst[39m thoughtTexts [33m=[39m session[33m.[39mcontents[33m.[39m[34mmap[39m(t [33m=>[39m t[33m.[39mthought)[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m 33| [39m    [35mconst[39m allText [33m=[39m [session[33m.[39mtitle [33m||[39m [32m''[39m[33m,[39m [33m...[39mthoughtTexts][33m.[39m[34mjoin[39m([32m' '[39m)[33m;[39m
    [90m 34| [39m
[90m [2mâ¯[22m SearchEngine.indexSession src/search/engine.ts:[2m36:16[22m[39m
[90m [2mâ¯[22m tests/integration/production-features.test.ts:[2m51:22[22m[39m
[90m [2mâ¯[22m tests/integration/production-features.test.ts:[2m50:20[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m112:41[22m[39m
    [90m110| [39m
    [90m111| [39m    [34mit[39m([32m'should list built-in templates'[39m[33m,[39m () [33m=>[39m {
    [90m112| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m113| [39m
    [90m114| [39m      [34mexpect[39m(templates[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m7[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m119:41[22m[39m
    [90m117| [39m
    [90m118| [39m    [34mit[39m([32m'should filter templates by category'[39m[33m,[39m () [33m=>[39m {
    [90m119| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m120| [39m        category[33m:[39m [32m'problem-solving'[39m[33m,[39m
    [90m121| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m128:41[22m[39m
    [90m126| [39m
    [90m127| [39m    [34mit[39m([32m'should filter templates by difficulty'[39m[33m,[39m () [33m=>[39m {
    [90m128| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m129| [39m        difficulty[33m:[39m [32m'beginner'[39m[33m,[39m
    [90m130| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m137:41[22m[39m
    [90m135| [39m
    [90m136| [39m    [34mit[39m([32m'should instantiate template to session'[39m[33m,[39m () [33m=>[39m {
    [90m137| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m138| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m151:41[22m[39m
    [90m149| [39m
    [90m150| [39m    [34mit[39m([32m'should track template usage statistics'[39m[33m,[39m () [33m=>[39m {
    [90m151| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m152| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m153| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m173:42[22m[39m
    [90m171| [39m
    [90m172| [39m    [34mit[39m([32m'should process batch export job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m173| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m174| [39m        type[33m:[39m [32m'export'[39m[33m,[39m
    [90m175| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m187:42[22m[39m
    [90m185| [39m
    [90m186| [39m    [34mit[39m([32m'should process batch validation job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m187| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m188| [39m        type[33m:[39m [32m'validate'[39m[33m,[39m
    [90m189| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m203:44[22m[39m
    [90m201| [39m      [90m// Submit more jobs than the concurrency limit[39m
    [90m202| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m [34m10[39m[33m;[39m i[33m++[39m) {
    [90m203| [39m        [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                           [31m^[39m
    [90m204| [39m          type[33m:[39m [32m'export'[39m[33m,[39m
    [90m205| [39m          sessionIds[33m:[39m [testSessions[[34m0[39m][33m.[39mid][33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'create')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m225:28[22m[39m
    [90m223| [39m
    [90m224| [39m    [34mbeforeEach[39m(() [33m=>[39m {
    [90m225| [39m      cache [33m=[39m [33mCacheFactory[39m[33m.[39m[34mcreate[39m([32m'lru'[39m[33m,[39m { maxSize[33m:[39m [34m100[39m })[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m226| [39m    })[33m;[39m
    [90m227| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m281:44[22m[39m
    [90m279| [39m
    [90m280| [39m    [34mit[39m([32m'should create backup of session'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m281| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m282| [39m
    [90m283| [39m      [34mexpect[39m(backupId)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m288:27[22m[39m
    [90m286| [39m
    [90m287| [39m    [34mit[39m([32m'should list available backups'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m288| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m298:44[22m[39m
    [90m296| [39m    [34mit[39m([32m'should restore session from backup'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m297| [39m      [35mconst[39m originalSession [33m=[39m testSessions[[34m0[39m][33m;[39m
    [90m298| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(originalSession)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m299| [39m
    [90m300| [39m      [35mconst[39m restored [33m=[39m [35mawait[39m backupManager[33m.[39m[34mrestore[39m(backupId)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m337:58[22m[39m
    [90m335| [39m
    [90m336| [39m      [34mexpect[39m(comparison[33m.[39msimilarity)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m337| [39m      [34mexpect[39m(comparison[33m.[39mmetrics[33m?.[39mthoughtCountSimilarity)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                                         [31m^[39m
    [90m338| [39m    })[33m;[39m
    [90m339| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions
[31m[1mTypeError[22m: comparator.compareMultiple is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m341:38[22m[39m
    [90m339| [39m
    [90m340| [39m    [34mit[39m([32m'should compare multiple sessions'[39m[33m,[39m () [33m=>[39m {
    [90m341| [39m      [35mconst[39m comparisons [33m=[39m comparator[33m.[39m[34mcompareMultiple[39m(testSessions)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m342| [39m
    [90m343| [39m      [34mexpect[39m(comparisons)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m353:41[22m[39m
    [90m351| [39m      [90m// 1. Create sessions from templates[39m
    [90m352| [39m      [35mconst[39m templateManager [33m=[39m [35mnew[39m [33mTemplateManager[39m()[33m;[39m
    [90m353| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m354| [39m      [35mconst[39m session1 [33m=[39m templateManager[33m.[39m[34minstantiateTemplate[39m(templates[[34m0[39mâ€¦
    [90m355| [39m        title[33m:[39m [32m'E2E Test Session 1'[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m388:43[22m[39m
    [90m386| [39m      })[33m;[39m
    [90m387| [39m
    [90m388| [39m      [35mconst[39m backup1 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m389| [39m      [35mconst[39m backup2 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m390| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/24]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m24 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (26)[39m
[2m   Start at [22m 15:30:54
[2m   Duration [22m 236ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x3[39m
[2K[1A[2K[G       [90mrerun x3[39m
[2K[1A[2K[G       [2m[90mrerun x3[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/search/index.ts[22m [34mx4[39m

 [33mâ¯[39m tests/integration/production-features.test.ts [2m ([22m[2m26 tests[22m [2m|[22m [31m24 failed[39m[2m)[22m[90m 82[2mms[22m[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions[39m
[31m     â†’ comparator.compareMultiple is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache[39m
[31m     â†’ backupManager.backup is not a function[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 24 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m61:32[22m[39m
    [90m 59| [39m      })[33m;[39m
    [90m 60| [39m
    [90m 61| [39m      [34mexpect[39m(results[33m.[39msessions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m 62| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m 63| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mid)[33m.[39m[34mtoBe[39m([32m'session-1'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m71:31[22m[39m
    [90m 69| [39m      })[33m;[39m
    [90m 70| [39m
    [90m 71| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 72| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mmode)[33m.[39m[34mtoBe[39m([32m'mathematics'[39m)[33m;[39m
    [90m 73| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m80:31[22m[39m
    [90m 78| [39m      })[33m;[39m
    [90m 79| [39m
    [90m 80| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 81| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mtags)[33m.[39m[34mtoContain[39m([32m'proof'[39m)[33m;[39m
    [90m 82| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m90:30[22m[39m
    [90m 88| [39m      })[33m;[39m
    [90m 89| [39m
    [90m 90| [39m      [34mexpect[39m(results[33m.[39mfacets)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 91| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mmode)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 92| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mtags)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m99:34[22m[39m
    [90m 97| [39m
    [90m 98| [39m      [34mexpect[39m(suggestions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 99| [39m      [34mexpect[39m(suggestions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m100| [39m      [34mexpect[39m(suggestions[33m.[39m[34msome[39m(s [33m=>[39m s[33m.[39m[34mtoLowerCase[39m()[33m.[39m[34mincludes[39m([32m'rea'[39m)))[33m.[39m[34mt[39mâ€¦
    [90m101| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m112:41[22m[39m
    [90m110| [39m
    [90m111| [39m    [34mit[39m([32m'should list built-in templates'[39m[33m,[39m () [33m=>[39m {
    [90m112| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m113| [39m
    [90m114| [39m      [34mexpect[39m(templates[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m7[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m119:41[22m[39m
    [90m117| [39m
    [90m118| [39m    [34mit[39m([32m'should filter templates by category'[39m[33m,[39m () [33m=>[39m {
    [90m119| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m120| [39m        category[33m:[39m [32m'problem-solving'[39m[33m,[39m
    [90m121| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m128:41[22m[39m
    [90m126| [39m
    [90m127| [39m    [34mit[39m([32m'should filter templates by difficulty'[39m[33m,[39m () [33m=>[39m {
    [90m128| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m129| [39m        difficulty[33m:[39m [32m'beginner'[39m[33m,[39m
    [90m130| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m137:41[22m[39m
    [90m135| [39m
    [90m136| [39m    [34mit[39m([32m'should instantiate template to session'[39m[33m,[39m () [33m=>[39m {
    [90m137| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m138| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m151:41[22m[39m
    [90m149| [39m
    [90m150| [39m    [34mit[39m([32m'should track template usage statistics'[39m[33m,[39m () [33m=>[39m {
    [90m151| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m152| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m153| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m173:42[22m[39m
    [90m171| [39m
    [90m172| [39m    [34mit[39m([32m'should process batch export job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m173| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m174| [39m        type[33m:[39m [32m'export'[39m[33m,[39m
    [90m175| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m187:42[22m[39m
    [90m185| [39m
    [90m186| [39m    [34mit[39m([32m'should process batch validation job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m187| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m188| [39m        type[33m:[39m [32m'validate'[39m[33m,[39m
    [90m189| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m203:44[22m[39m
    [90m201| [39m      [90m// Submit more jobs than the concurrency limit[39m
    [90m202| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m [34m10[39m[33m;[39m i[33m++[39m) {
    [90m203| [39m        [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                           [31m^[39m
    [90m204| [39m          type[33m:[39m [32m'export'[39m[33m,[39m
    [90m205| [39m          sessionIds[33m:[39m [testSessions[[34m0[39m][33m.[39mid][33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'create')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m225:28[22m[39m
    [90m223| [39m
    [90m224| [39m    [34mbeforeEach[39m(() [33m=>[39m {
    [90m225| [39m      cache [33m=[39m [33mCacheFactory[39m[33m.[39m[34mcreate[39m([32m'lru'[39m[33m,[39m { maxSize[33m:[39m [34m100[39m })[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m226| [39m    })[33m;[39m
    [90m227| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m281:44[22m[39m
    [90m279| [39m
    [90m280| [39m    [34mit[39m([32m'should create backup of session'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m281| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m282| [39m
    [90m283| [39m      [34mexpect[39m(backupId)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m288:27[22m[39m
    [90m286| [39m
    [90m287| [39m    [34mit[39m([32m'should list available backups'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m288| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m298:44[22m[39m
    [90m296| [39m    [34mit[39m([32m'should restore session from backup'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m297| [39m      [35mconst[39m originalSession [33m=[39m testSessions[[34m0[39m][33m;[39m
    [90m298| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(originalSession)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m299| [39m
    [90m300| [39m      [35mconst[39m restored [33m=[39m [35mawait[39m backupManager[33m.[39m[34mrestore[39m(backupId)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m337:58[22m[39m
    [90m335| [39m
    [90m336| [39m      [34mexpect[39m(comparison[33m.[39msimilarity)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m337| [39m      [34mexpect[39m(comparison[33m.[39mmetrics[33m?.[39mthoughtCountSimilarity)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                                         [31m^[39m
    [90m338| [39m    })[33m;[39m
    [90m339| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions
[31m[1mTypeError[22m: comparator.compareMultiple is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m341:38[22m[39m
    [90m339| [39m
    [90m340| [39m    [34mit[39m([32m'should compare multiple sessions'[39m[33m,[39m () [33m=>[39m {
    [90m341| [39m      [35mconst[39m comparisons [33m=[39m comparator[33m.[39m[34mcompareMultiple[39m(testSessions)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m342| [39m
    [90m343| [39m      [34mexpect[39m(comparisons)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m353:41[22m[39m
    [90m351| [39m      [90m// 1. Create sessions from templates[39m
    [90m352| [39m      [35mconst[39m templateManager [33m=[39m [35mnew[39m [33mTemplateManager[39m()[33m;[39m
    [90m353| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m354| [39m      [35mconst[39m session1 [33m=[39m templateManager[33m.[39m[34minstantiateTemplate[39m(templates[[34m0[39mâ€¦
    [90m355| [39m        title[33m:[39m [32m'E2E Test Session 1'[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m388:43[22m[39m
    [90m386| [39m      })[33m;[39m
    [90m387| [39m
    [90m388| [39m      [35mconst[39m backup1 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m389| [39m      [35mconst[39m backup2 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m390| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/24]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m24 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (26)[39m
[2m   Start at [22m 15:31:32
[2m   Duration [22m 234ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x4[39m
[2K[1A[2K[G       [90mrerun x4[39m
[2K[1A[2K[G       [2m[90mrerun x4[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m tests/unit/ml/pattern-recognition.test.ts[22m [34mx1[39m

 [33mâ¯[39m tests/unit/ml/pattern-recognition.test.ts [2m ([22m[2m20 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 48[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould generate insights[39m
[31m     â†’ expected undefined not to be undefined[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 1 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould generate insights
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m74:46[22m[39m
    [90m 72| [39m
    [90m 73| [39m      [34mexpect[39m(result[33m.[39minsights)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 74| [39m      [34mexpect[39m(result[33m.[39minsights[33m.[39mmostCommonType)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                             [31m^[39m
    [90m 75| [39m      [34mexpect[39m(result[33m.[39minsights[33m.[39mhighestConfidencePattern)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 76| [39m      [34mexpect[39m(result[33m.[39minsights[33m.[39maverageFrequency)[33m.[39m[34mtoBeGreaterThanOrEqual[39m(â€¦

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m19 passed[39m[22m[90m (20)[39m
[2m   Start at [22m 19:18:24
[2m   Duration [22m 142ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m tests/unit/ml/pattern-recognition.test.ts[22m [34mx2[39m

 [32mâœ“[39m tests/unit/ml/pattern-recognition.test.ts [2m ([22m[2m20 tests[22m[2m)[22m[90m 47[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m20 passed[39m[22m[90m (20)[39m
[2m   Start at [22m 19:23:41
[2m   Duration [22m 122ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x2[39m
[2K[1A[2K[G       [90mrerun x2[39m
[2K[1A[2K[G       [2m[90mrerun x2[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m tests/unit/ml/success-metrics.test.ts[22m [34mx1[39m

 [33mâ¯[39m tests/unit/ml/success-metrics.test.ts [2m ([22m[2m32 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 90[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/ml/success-metrics.test.ts[2m > [22mSuccessMetricsAnalyzer[2m > [22manalyzeSession[2m > [22mshould include comparison to average with enough data[39m
[31m     â†’ expected NaN to be greater than or equal to 0[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 1 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/success-metrics.test.ts[2m > [22mSuccessMetricsAnalyzer[2m > [22manalyzeSession[2m > [22mshould include comparison to average with enough data
[31m[1mAssertionError[22m: expected NaN to be greater than or equal to 0[39m
[36m [2mâ¯[22m tests/unit/ml/success-metrics.test.ts:[2m105:56[22m[39m
    [90m103| [39m
    [90m104| [39m      [34mexpect[39m(analysis[33m.[39mcomparisonToAverage)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m105| [39m      [34mexpect[39m(analysis[33m.[39mcomparisonToAverage[33m?.[39mpercentile)[33m.[39m[34mtoBeGreaterThan[39mâ€¦
    [90m   | [39m                                                       [31m^[39m
    [90m106| [39m      [34mexpect[39m(analysis[33m.[39mcomparisonToAverage[33m?.[39mpercentile)[33m.[39m[34mtoBeLessThanOrE[39mâ€¦
    [90m107| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m31 passed[39m[22m[90m (32)[39m
[2m   Start at [22m 19:29:24
[2m   Duration [22m 263ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/ml/success-metrics.ts[22m [34mx2[39m

 [32mâœ“[39m tests/unit/ml/success-metrics.test.ts [2m ([22m[2m32 tests[22m[2m)[22m[90m 80[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m32 passed[39m[22m[90m (32)[39m
[2m   Start at [22m 19:30:22
[2m   Duration [22m 208ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x2[39m
[2K[1A[2K[G       [90mrerun x2[39m
[2K[1A[2K[G       [2m[90mrerun x2[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m tests/unit/ml/recommendation-engine.test.ts[22m [34mx1[39m

 [33mâ¯[39m tests/unit/ml/recommendation-engine.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[33m 335[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate mode recommendations[39m
[31m     â†’ expected false to be true // Object.is equality[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 1 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate mode recommendations
[31m[1mAssertionError[22m: expected false to be true // Object.is equality[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- true[39m
[31m+ false[39m

[36m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m126:67[22m[39m
    [90m124| [39m      })[33m;[39m
    [90m125| [39m
    [90m126| [39m      [34mexpect[39m(result[33m.[39mrecommendations[33m.[39m[34msome[39m(r [33m=>[39m r[33m.[39mtype [33m===[39m [32m'mode'[39m))[33m.[39m[34mtoBe[39mâ€¦
    [90m   | [39m                                                                  [31m^[39m
    [90m127| [39m    })[33m;[39m
    [90m128| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m26 passed[39m[22m[90m (27)[39m
[2m   Start at [22m 19:36:00
[2m   Duration [22m 690ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x1[39m
[2K[1A[2K[G       [90mrerun x1[39m
[2K[1A[2K[G       [2m[90mrerun x1[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m tests/unit/ml/recommendation-engine.test.ts[22m [34mx2[39m

 [32mâœ“[39m tests/unit/ml/recommendation-engine.test.ts [2m ([22m[2m27 tests[22m[2m)[22m[90m 139[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m27 passed[39m[22m[90m (27)[39m
[2m   Start at [22m 19:36:58
[2m   Duration [22m 312ms


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x2[39m
[2K[1A[2K[G       [90mrerun x2[39m
[2K[1A[2K[G       [2m[90mrerun x2[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/validation/validators/modes/constraint.ts[22m

 [32mâœ“[39m tests/unit/counterfactual.test.ts [2m ([22m[2m8 tests[22m[2m)[22m[90m 39[2mms[22m[39m
 [32mâœ“[39m tests/unit/causal.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 58[2mms[22m[39m
 [32mâœ“[39m tests/unit/temporal.test.ts [2m ([22m[2m19 tests[22m[2m)[22m[90m 66[2mms[22m[39m
[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould show significant performance improvement for cache hits[22m[39m

ðŸ“Š Validation Cache Benchmark: Testing cache performance

ðŸ”´ First validation (cache miss):
   Time: 13.5852ms
   Valid: true
   Confidence: 0.70

ðŸŸ¢ Second validation (cache hit):
   Time: 5.8782ms
   Valid: true
   Confidence: 0.70

ðŸ“ˆ Performance Analysis:
   Cache miss time: 13.5852ms
   Cache hit time: 5.8782ms
   Speedup: 2.31x
   Hit rate: 50.0%

ðŸŽ¯ Result: GOOD (â‰¥2x)

[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould maintain O(1) lookup complexity regardless of cache size[22m[39m

ðŸ“ˆ Complexity Analysis: Testing O(1) cache lookup
   Cache size 10: 0.0831ms per lookup
   Cache size 50: 0.0689ms per lookup
   Cache size 100: 0.4241ms per lookup

   Min: 0.0689ms, Max: 0.4241ms, Ratio: 6.16x
   Complexity: O(n) âŒ

[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould handle high cache hit rates efficiently[22m[39m

ðŸ“Š High-Volume Test: Simulating realistic usage patterns
   Running 100 validations (5 unique thoughts, repeated pattern)...

ðŸ“ˆ Results:
   Total validations: 100
   Cache misses: 5 (avg 1.1305ms)
   Cache hits: 95 (avg 0.2867ms)
   Average speedup: 3.94x
   Hit rate: 95.0%
   Cache size: 5/1000

ðŸŽ¯ Overall Performance: GOOD

 [33mâ¯[39m tests/benchmarks/validation-performance.test.ts [2m ([22m[2m3 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[33m 390[2mms[22m[39m
[31m   [33mâ¯[31m tests/benchmarks/validation-performance.test.ts[2m > [22mValidation Performance Benchmark[2m > [22mshould maintain O(1) lookup complexity regardless of cache size[39m
[31m     â†’ expected 6.159622347439109 to be less than 4[39m
 [32mâœ“[39m tests/unit/evidential.test.ts [2m ([22m[2m16 tests[22m[2m)[22m[90m 119[2mms[22m[39m
 [32mâœ“[39m tests/unit/gametheory.test.ts [2m ([22m[2m17 tests[22m[2m)[22m[90m 193[2mms[22m[39m
 [32mâœ“[39m tests/unit/bayesian.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 42[2mms[22m[39m
 [32mâœ“[39m tests/unit/abductive.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 48[2mms[22m[39m
 [32mâœ“[39m tests/unit/analogical.test.ts [2m ([22m[2m9 tests[22m[2m)[22m[90m 48[2mms[22m[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 1 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/benchmarks/validation-performance.test.ts[2m > [22mValidation Performance Benchmark[2m > [22mshould maintain O(1) lookup complexity regardless of cache size
[31m[1mAssertionError[22m: expected 6.159622347439109 to be less than 4[39m
[36m [2mâ¯[22m tests/benchmarks/validation-performance.test.ts:[2m173:19[22m[39m
    [90m171| [39m
    [90m172| [39m    [90m// If truly O(1), ratio should be close to 1 (allowing for system [39mâ€¦
    [90m173| [39m    [34mexpect[39m(ratio)[33m.[39m[34mtoBeLessThan[39m([34m4.0[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m174| [39m  })[33m;[39m
    [90m175| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/1]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m8 passed[39m[22m[90m (9)[39m
[2m      Tests [22m [1m[31m1 failed[39m[22m[2m | [22m[1m[32m101 passed[39m[22m[90m (102)[39m
[2m   Start at [22m 19:53:32
[2m   Duration [22m 7.24s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/validation/validators/modes/recursive.ts[22m

[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould show significant performance improvement for cache hits[22m[39m

ðŸ“Š Validation Cache Benchmark: Testing cache performance

ðŸ”´ First validation (cache miss):
   Time: 8.0582ms
   Valid: true
   Confidence: 0.70

ðŸŸ¢ Second validation (cache hit):
   Time: 0.2392ms
   Valid: true
   Confidence: 0.70

ðŸ“ˆ Performance Analysis:
   Cache miss time: 8.0582ms
   Cache hit time: 0.2392ms
   Speedup: 33.69x
   Hit rate: 50.0%

ðŸŽ¯ Result: EXCELLENT (â‰¥10x)

[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould maintain O(1) lookup complexity regardless of cache size[22m[39m

ðŸ“ˆ Complexity Analysis: Testing O(1) cache lookup
   Cache size 10: 0.0674ms per lookup
   Cache size 50: 0.0674ms per lookup
   Cache size 100: 0.0488ms per lookup

   Min: 0.0488ms, Max: 0.0674ms, Ratio: 1.38x
   Complexity: O(1) âœ…

[90mstdout[2m | tests/benchmarks/validation-performance.test.ts[2m > [22m[2mValidation Performance Benchmark[2m > [22m[2mshould handle high cache hit rates efficiently[22m[39m

ðŸ“Š High-Volume Test: Simulating realistic usage patterns
   Running 100 validations (5 unique thoughts, repeated pattern)...

ðŸ“ˆ Results:
   Total validations: 100
   Cache misses: 5 (avg 0.6654ms)
   Cache hits: 95 (avg 0.1780ms)
   Average speedup: 3.74x
   Hit rate: 95.0%
   Cache size: 5/1000

ðŸŽ¯ Overall Performance: GOOD

 [32mâœ“[39m tests/benchmarks/validation-performance.test.ts [2m ([22m[2m3 tests[22m[2m)[22m[90m 96[2mms[22m[39m
 [32mâœ“[39m tests/unit/temporal.test.ts [2m ([22m[2m19 tests[22m[2m)[22m[90m 64[2mms[22m[39m
 [32mâœ“[39m tests/unit/analogical.test.ts [2m ([22m[2m9 tests[22m[2m)[22m[90m 32[2mms[22m[39m
 [32mâœ“[39m tests/unit/causal.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 50[2mms[22m[39m
 [32mâœ“[39m tests/unit/evidential.test.ts [2m ([22m[2m16 tests[22m[2m)[22m[90m 60[2mms[22m[39m
 [32mâœ“[39m tests/unit/gametheory.test.ts [2m ([22m[2m17 tests[22m[2m)[22m[90m 185[2mms[22m[39m
 [32mâœ“[39m tests/unit/abductive.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 27[2mms[22m[39m
 [32mâœ“[39m tests/unit/bayesian.test.ts [2m ([22m[2m10 tests[22m[2m)[22m[90m 44[2mms[22m[39m
 [32mâœ“[39m tests/unit/counterfactual.test.ts [2m ([22m[2m8 tests[22m[2m)[22m[90m 31[2mms[22m[39m

[2m Test Files [22m [1m[32m9 passed[39m[22m[90m (9)[39m
[2m      Tests [22m [1m[32m102 passed[39m[22m[90m (102)[39m
[2m   Start at [22m 19:53:37
[2m   Duration [22m 4.25s


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/latex.ts[22m

 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 158[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 199[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m44 passed[39m[22m[90m (50)[39m
[2m   Start at [22m 20:07:33
[2m   Duration [22m 835ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/latex.ts[22m

 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 83[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 78[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m44 passed[39m[22m[90m (50)[39m
[2m   Start at [22m 20:07:35
[2m   Duration [22m 321ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 42[2mms[22m[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 98[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 93[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 20:08:46
[2m   Duration [22m 1.80s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m0 test[22m[2m)[22m
 [33mâ¯[39m tests/unit/visual.test.ts [2m ([22m[2m0 test[22m[2m)[22m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m0 test[22m[2m)[22m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Suites 3 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts [2m[ tests/unit/export/latex.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts [2m[ tests/export/latex-export.test.ts ][22m
[31m[1m[7m FAIL [27m[22m[39m tests/unit/visual.test.ts [2m[ tests/unit/visual.test.ts ][22m
[31m[1mError[22m: Transform failed with 1 error:
C:/mcp-servers/deepthinking-mcp/src/export/visual.ts:1312:10: ERROR: Expected ";" but found "evidentialToDOT"[39m
[90m [2mâ¯[22m failureErrorWithLog node_modules/vite/node_modules/esbuild/lib/main.js:[2m1472:15[22m[39m
[90m [2mâ¯[22m node_modules/vite/node_modules/esbuild/lib/main.js:[2m755:50[22m[39m
[90m [2mâ¯[22m responseCallbacks.<computed> node_modules/vite/node_modules/esbuild/lib/main.js:[2m622:9[22m[39m
[90m [2mâ¯[22m handleIncomingPacket node_modules/vite/node_modules/esbuild/lib/main.js:[2m677:12[22m[39m
[90m [2mâ¯[22m Socket.readFromStdout node_modules/vite/node_modules/esbuild/lib/main.js:[2m600:7[22m[39m
[90m [2mâ¯[22m Socket.emit node:events:[2m508:28[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/3]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m3 failed[39m[22m[90m (3)[39m
[2m      Tests [22m [2mno tests[22m
[2m   Start at [22m 20:10:13
[2m   Duration [22m 3ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 34[2mms[22m[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 131[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 148[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 20:12:01
[2m   Duration [22m 1.46s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 51[2mms[22m[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 122[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 118[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 20:13:17
[2m   Duration [22m 1.50s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 44[2mms[22m[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 128[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 121[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 20:14:43
[2m   Duration [22m 1.14s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 44[2mms[22m[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 97[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 152[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 20:17:32
[2m   Duration [22m 1.72s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 32[2mms[22m[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 102[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 97[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 20:19:47
[2m   Duration [22m 1.58s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 41[2mms[22m[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 109[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 105[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 20:21:23
[2m   Duration [22m 2.22s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/batch/processor.ts[22m [34mx5[39m

 [33mâ¯[39m tests/integration/production-features.test.ts [2m ([22m[2m26 tests[22m [2m|[22m [31m24 failed[39m[2m)[22m[90m 114[2mms[22m[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions[39m
[31m     â†’ comparator.compareMultiple is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache[39m
[31m     â†’ backupManager.backup is not a function[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 24 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m61:32[22m[39m
    [90m 59| [39m      })[33m;[39m
    [90m 60| [39m
    [90m 61| [39m      [34mexpect[39m(results[33m.[39msessions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m 62| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m 63| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mid)[33m.[39m[34mtoBe[39m([32m'session-1'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m71:31[22m[39m
    [90m 69| [39m      })[33m;[39m
    [90m 70| [39m
    [90m 71| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 72| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mmode)[33m.[39m[34mtoBe[39m([32m'mathematics'[39m)[33m;[39m
    [90m 73| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m80:31[22m[39m
    [90m 78| [39m      })[33m;[39m
    [90m 79| [39m
    [90m 80| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 81| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mtags)[33m.[39m[34mtoContain[39m([32m'proof'[39m)[33m;[39m
    [90m 82| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m90:30[22m[39m
    [90m 88| [39m      })[33m;[39m
    [90m 89| [39m
    [90m 90| [39m      [34mexpect[39m(results[33m.[39mfacets)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 91| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mmode)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 92| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mtags)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m99:34[22m[39m
    [90m 97| [39m
    [90m 98| [39m      [34mexpect[39m(suggestions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 99| [39m      [34mexpect[39m(suggestions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m100| [39m      [34mexpect[39m(suggestions[33m.[39m[34msome[39m(s [33m=>[39m s[33m.[39m[34mtoLowerCase[39m()[33m.[39m[34mincludes[39m([32m'rea'[39m)))[33m.[39m[34mt[39mâ€¦
    [90m101| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m112:41[22m[39m
    [90m110| [39m
    [90m111| [39m    [34mit[39m([32m'should list built-in templates'[39m[33m,[39m () [33m=>[39m {
    [90m112| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m113| [39m
    [90m114| [39m      [34mexpect[39m(templates[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m7[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m119:41[22m[39m
    [90m117| [39m
    [90m118| [39m    [34mit[39m([32m'should filter templates by category'[39m[33m,[39m () [33m=>[39m {
    [90m119| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m120| [39m        category[33m:[39m [32m'problem-solving'[39m[33m,[39m
    [90m121| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m128:41[22m[39m
    [90m126| [39m
    [90m127| [39m    [34mit[39m([32m'should filter templates by difficulty'[39m[33m,[39m () [33m=>[39m {
    [90m128| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m129| [39m        difficulty[33m:[39m [32m'beginner'[39m[33m,[39m
    [90m130| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m137:41[22m[39m
    [90m135| [39m
    [90m136| [39m    [34mit[39m([32m'should instantiate template to session'[39m[33m,[39m () [33m=>[39m {
    [90m137| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m138| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m151:41[22m[39m
    [90m149| [39m
    [90m150| [39m    [34mit[39m([32m'should track template usage statistics'[39m[33m,[39m () [33m=>[39m {
    [90m151| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m152| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m153| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m173:42[22m[39m
    [90m171| [39m
    [90m172| [39m    [34mit[39m([32m'should process batch export job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m173| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m174| [39m        type[33m:[39m [32m'export'[39m[33m,[39m
    [90m175| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m187:42[22m[39m
    [90m185| [39m
    [90m186| [39m    [34mit[39m([32m'should process batch validation job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m187| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m188| [39m        type[33m:[39m [32m'validate'[39m[33m,[39m
    [90m189| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m203:44[22m[39m
    [90m201| [39m      [90m// Submit more jobs than the concurrency limit[39m
    [90m202| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m [34m10[39m[33m;[39m i[33m++[39m) {
    [90m203| [39m        [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                           [31m^[39m
    [90m204| [39m          type[33m:[39m [32m'export'[39m[33m,[39m
    [90m205| [39m          sessionIds[33m:[39m [testSessions[[34m0[39m][33m.[39mid][33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'create')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m225:28[22m[39m
    [90m223| [39m
    [90m224| [39m    [34mbeforeEach[39m(() [33m=>[39m {
    [90m225| [39m      cache [33m=[39m [33mCacheFactory[39m[33m.[39m[34mcreate[39m([32m'lru'[39m[33m,[39m { maxSize[33m:[39m [34m100[39m })[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m226| [39m    })[33m;[39m
    [90m227| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m281:44[22m[39m
    [90m279| [39m
    [90m280| [39m    [34mit[39m([32m'should create backup of session'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m281| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m282| [39m
    [90m283| [39m      [34mexpect[39m(backupId)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m288:27[22m[39m
    [90m286| [39m
    [90m287| [39m    [34mit[39m([32m'should list available backups'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m288| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m298:44[22m[39m
    [90m296| [39m    [34mit[39m([32m'should restore session from backup'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m297| [39m      [35mconst[39m originalSession [33m=[39m testSessions[[34m0[39m][33m;[39m
    [90m298| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(originalSession)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m299| [39m
    [90m300| [39m      [35mconst[39m restored [33m=[39m [35mawait[39m backupManager[33m.[39m[34mrestore[39m(backupId)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m337:58[22m[39m
    [90m335| [39m
    [90m336| [39m      [34mexpect[39m(comparison[33m.[39msimilarity)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m337| [39m      [34mexpect[39m(comparison[33m.[39mmetrics[33m?.[39mthoughtCountSimilarity)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                                         [31m^[39m
    [90m338| [39m    })[33m;[39m
    [90m339| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions
[31m[1mTypeError[22m: comparator.compareMultiple is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m341:38[22m[39m
    [90m339| [39m
    [90m340| [39m    [34mit[39m([32m'should compare multiple sessions'[39m[33m,[39m () [33m=>[39m {
    [90m341| [39m      [35mconst[39m comparisons [33m=[39m comparator[33m.[39m[34mcompareMultiple[39m(testSessions)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m342| [39m
    [90m343| [39m      [34mexpect[39m(comparisons)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m353:41[22m[39m
    [90m351| [39m      [90m// 1. Create sessions from templates[39m
    [90m352| [39m      [35mconst[39m templateManager [33m=[39m [35mnew[39m [33mTemplateManager[39m()[33m;[39m
    [90m353| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m354| [39m      [35mconst[39m session1 [33m=[39m templateManager[33m.[39m[34minstantiateTemplate[39m(templates[[34m0[39mâ€¦
    [90m355| [39m        title[33m:[39m [32m'E2E Test Session 1'[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m388:43[22m[39m
    [90m386| [39m      })[33m;[39m
    [90m387| [39m
    [90m388| [39m      [35mconst[39m backup1 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m389| [39m      [35mconst[39m backup2 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m390| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/24]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m24 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (26)[39m
[2m   Start at [22m 20:23:59
[2m   Duration [22m 780ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x5[39m
[2K[1A[2K[G       [90mrerun x5[39m
[2K[1A[2K[G       [2m[90mrerun x5[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/backup/providers/gcs.ts[22m [34mx6[39m

 [33mâ¯[39m tests/integration/production-features.test.ts [2m ([22m[2m26 tests[22m [2m|[22m [31m24 failed[39m[2m)[22m[90m 157[2mms[22m[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions[39m
[31m     â†’ comparator.compareMultiple is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache[39m
[31m     â†’ backupManager.backup is not a function[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 24 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m61:32[22m[39m
    [90m 59| [39m      })[33m;[39m
    [90m 60| [39m
    [90m 61| [39m      [34mexpect[39m(results[33m.[39msessions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m 62| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m 63| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mid)[33m.[39m[34mtoBe[39m([32m'session-1'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m71:31[22m[39m
    [90m 69| [39m      })[33m;[39m
    [90m 70| [39m
    [90m 71| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 72| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mmode)[33m.[39m[34mtoBe[39m([32m'mathematics'[39m)[33m;[39m
    [90m 73| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m80:31[22m[39m
    [90m 78| [39m      })[33m;[39m
    [90m 79| [39m
    [90m 80| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 81| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mtags)[33m.[39m[34mtoContain[39m([32m'proof'[39m)[33m;[39m
    [90m 82| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m90:30[22m[39m
    [90m 88| [39m      })[33m;[39m
    [90m 89| [39m
    [90m 90| [39m      [34mexpect[39m(results[33m.[39mfacets)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 91| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mmode)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 92| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mtags)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m99:34[22m[39m
    [90m 97| [39m
    [90m 98| [39m      [34mexpect[39m(suggestions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 99| [39m      [34mexpect[39m(suggestions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m100| [39m      [34mexpect[39m(suggestions[33m.[39m[34msome[39m(s [33m=>[39m s[33m.[39m[34mtoLowerCase[39m()[33m.[39m[34mincludes[39m([32m'rea'[39m)))[33m.[39m[34mt[39mâ€¦
    [90m101| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m112:41[22m[39m
    [90m110| [39m
    [90m111| [39m    [34mit[39m([32m'should list built-in templates'[39m[33m,[39m () [33m=>[39m {
    [90m112| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m113| [39m
    [90m114| [39m      [34mexpect[39m(templates[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m7[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m119:41[22m[39m
    [90m117| [39m
    [90m118| [39m    [34mit[39m([32m'should filter templates by category'[39m[33m,[39m () [33m=>[39m {
    [90m119| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m120| [39m        category[33m:[39m [32m'problem-solving'[39m[33m,[39m
    [90m121| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m128:41[22m[39m
    [90m126| [39m
    [90m127| [39m    [34mit[39m([32m'should filter templates by difficulty'[39m[33m,[39m () [33m=>[39m {
    [90m128| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m129| [39m        difficulty[33m:[39m [32m'beginner'[39m[33m,[39m
    [90m130| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m137:41[22m[39m
    [90m135| [39m
    [90m136| [39m    [34mit[39m([32m'should instantiate template to session'[39m[33m,[39m () [33m=>[39m {
    [90m137| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m138| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m151:41[22m[39m
    [90m149| [39m
    [90m150| [39m    [34mit[39m([32m'should track template usage statistics'[39m[33m,[39m () [33m=>[39m {
    [90m151| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m152| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m153| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m173:42[22m[39m
    [90m171| [39m
    [90m172| [39m    [34mit[39m([32m'should process batch export job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m173| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m174| [39m        type[33m:[39m [32m'export'[39m[33m,[39m
    [90m175| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m187:42[22m[39m
    [90m185| [39m
    [90m186| [39m    [34mit[39m([32m'should process batch validation job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m187| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m188| [39m        type[33m:[39m [32m'validate'[39m[33m,[39m
    [90m189| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m203:44[22m[39m
    [90m201| [39m      [90m// Submit more jobs than the concurrency limit[39m
    [90m202| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m [34m10[39m[33m;[39m i[33m++[39m) {
    [90m203| [39m        [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                           [31m^[39m
    [90m204| [39m          type[33m:[39m [32m'export'[39m[33m,[39m
    [90m205| [39m          sessionIds[33m:[39m [testSessions[[34m0[39m][33m.[39mid][33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'create')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m225:28[22m[39m
    [90m223| [39m
    [90m224| [39m    [34mbeforeEach[39m(() [33m=>[39m {
    [90m225| [39m      cache [33m=[39m [33mCacheFactory[39m[33m.[39m[34mcreate[39m([32m'lru'[39m[33m,[39m { maxSize[33m:[39m [34m100[39m })[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m226| [39m    })[33m;[39m
    [90m227| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m281:44[22m[39m
    [90m279| [39m
    [90m280| [39m    [34mit[39m([32m'should create backup of session'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m281| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m282| [39m
    [90m283| [39m      [34mexpect[39m(backupId)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m288:27[22m[39m
    [90m286| [39m
    [90m287| [39m    [34mit[39m([32m'should list available backups'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m288| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m298:44[22m[39m
    [90m296| [39m    [34mit[39m([32m'should restore session from backup'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m297| [39m      [35mconst[39m originalSession [33m=[39m testSessions[[34m0[39m][33m;[39m
    [90m298| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(originalSession)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m299| [39m
    [90m300| [39m      [35mconst[39m restored [33m=[39m [35mawait[39m backupManager[33m.[39m[34mrestore[39m(backupId)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m337:58[22m[39m
    [90m335| [39m
    [90m336| [39m      [34mexpect[39m(comparison[33m.[39msimilarity)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m337| [39m      [34mexpect[39m(comparison[33m.[39mmetrics[33m?.[39mthoughtCountSimilarity)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                                         [31m^[39m
    [90m338| [39m    })[33m;[39m
    [90m339| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions
[31m[1mTypeError[22m: comparator.compareMultiple is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m341:38[22m[39m
    [90m339| [39m
    [90m340| [39m    [34mit[39m([32m'should compare multiple sessions'[39m[33m,[39m () [33m=>[39m {
    [90m341| [39m      [35mconst[39m comparisons [33m=[39m comparator[33m.[39m[34mcompareMultiple[39m(testSessions)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m342| [39m
    [90m343| [39m      [34mexpect[39m(comparisons)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m353:41[22m[39m
    [90m351| [39m      [90m// 1. Create sessions from templates[39m
    [90m352| [39m      [35mconst[39m templateManager [33m=[39m [35mnew[39m [33mTemplateManager[39m()[33m;[39m
    [90m353| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m354| [39m      [35mconst[39m session1 [33m=[39m templateManager[33m.[39m[34minstantiateTemplate[39m(templates[[34m0[39mâ€¦
    [90m355| [39m        title[33m:[39m [32m'E2E Test Session 1'[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m388:43[22m[39m
    [90m386| [39m      })[33m;[39m
    [90m387| [39m
    [90m388| [39m      [35mconst[39m backup1 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m389| [39m      [35mconst[39m backup2 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m390| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/24]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m24 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (26)[39m
[2m   Start at [22m 20:48:08
[2m   Duration [22m 365ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x6[39m
[2K[1A[2K[G       [90mrerun x6[39m
[2K[1A[2K[G       [2m[90mrerun x6[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/export/visual.ts[22m

 [32mâœ“[39m tests/unit/visual.test.ts [2m ([22m[2m13 tests[22m[2m)[22m[90m 44[2mms[22m[39m
 [33mâ¯[39m tests/unit/export/latex.test.ts [2m ([22m[2m23 tests[22m [2m|[22m [31m1 failed[39m[2m)[22m[90m 98[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m
 [33mâ¯[39m tests/export/latex-export.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m5 failed[39m[2m)[22m[90m 103[2mms[22m[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode[39m
[31m     â†’ expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document[39m
[31m     â†’ expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m
[31m   [33mâ¯[31m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters[39m
[31m     â†’ Cannot read properties of undefined (reading 'toISOString')[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 6 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/export/latex.test.ts[2m > [22mLaTeX Export[2m > [22mDiagram Embedding[2m > [22mshould not embed diagrams when renderDiagrams is false
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '\begin{tikzpicture}'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- \begin{tikzpicture}[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-01-01}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session-1}[39m
[31m+   \item[Mode] \texttt{sequential}[39m
[31m+   \item[Created] 2025-01-01[39m
[31m+   \item[Updated] 2025-01-01[39m
[31m+   \item[Total Thoughts] 1[39m
[31m+   \item[Revisions] 0[39m
[31m+   \item[Average Uncertainty] 0.300[39m
[31m+   \item[Time Spent] 1h[39m
[31m+   \item[Tags] test[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent Causal without diagrams[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/unit/export/latex.test.ts:[2m563:21[22m[39m
    [90m561| [39m
    [90m562| [39m      [90m// Should contain TikZ but not Mermaid verbatim blocks for causa[39mâ€¦
    [90m563| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\begin{tikzpicture}'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m564| [39m      [35mconst[39m verbatimCount [33m=[39m (latex[33m.[39m[34mmatch[39m([36m/\\begin{verbatim}/g[39m) [33m||[39m [])[33m.[39mâ€¦
    [90m565| [39m      [34mexpect[39m(verbatimCount)[33m.[39m[34mtoBe[39m([34m0[39m)[33m;[39m [90m// No Mermaid diagrams[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mDocument Structure[2m > [22mshould export complete document
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m73:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould export mathematical equations
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain 'x^2 + y^2 = z^2'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- x^2 + y^2 = z^2[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m118:21[22m[39m
    [90m116| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m117| [39m
    [90m118| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'x^2 + y^2 = z^2'[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m119| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\['[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$$'[39m)[33m;[39m
    [90m120| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mMathematics Mode Export[2m > [22mshould handle inline math mode
[31m[1mAssertionError[22m: expected '\documentclass[11pt,letterpaper]{artiâ€¦' to contain '$'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- $[39m
[31m+ \documentclass[11pt,letterpaper]{article}[39m
[31m+[39m
[31m+ % Core packages[39m
[31m+ \usepackage[utf8]{inputenc}[39m
[31m+ \usepackage[T1]{fontenc}[39m
[31m+ \usepackage{amsmath}[39m
[31m+ \usepackage{amssymb}[39m
[31m+ \usepackage{amsthm}[39m
[31m+ \usepackage{graphicx}[39m
[31m+ \usepackage{xcolor}[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{geometry}[39m
[31m+ \usepackage{enumitem}[39m
[31m+ \usepackage{tikz}[39m
[31m+ \usepackage{booktabs}[39m
[31m+ \usepackage{longtable}[39m
[31m+ \usepackage{multirow}[39m
[31m+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}[39m
[31m+ \usepackage{minted}[39m
[31m+[39m
[31m+ % Color scheme setup[39m
[31m+ % Default color scheme[39m
[31m+ \definecolor{thoughtcolor}{RGB}{52,73,94}[39m
[31m+ \definecolor{metacolor}{RGB}{127,140,141}[39m
[31m+ \definecolor{uncertaintycolor}{RGB}{231,76,60}[39m
[31m+ \definecolor{mathcolor}{RGB}{46,134,193}[39m
[31m+ \definecolor{physicscolor}{RGB}{142,68,173}[39m
[31m+ \definecolor{codebackground}{RGB}{247,247,247}[39m
[31m+[39m
[31m+ % Theorem environments[39m
[31m+ \newtheorem{theorem}{Theorem}[section][39m
[31m+ \newtheorem{lemma}[theorem]{Lemma}[39m
[31m+ \newtheorem{corollary}[theorem]{Corollary}[39m
[31m+ \newtheorem{definition}[theorem]{Definition}[39m
[31m+ \newtheorem{proposition}[theorem]{Proposition}[39m
[31m+[39m
[31m+ % Custom commands[39m
[31m+ \newcommand{\thoughtsection}[2]{%[39m
[31m+   \subsection{Thought #1: #2}%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\metadata}[2]{%[39m
[31m+   \textbf{#1:} \textit{#2}\\%[39m
[31m+ }[39m
[31m+[39m
[31m+ \newcommand{\uncertainty}[1]{%[39m
[31m+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%[39m
[31m+ }[39m
[31m+[39m
[31m+ % Custom preamble[39m
[31m+[39m
[31m+[39m
[31m+ % Document metadata setup[39m
[31m+ \usepackage{fancyhdr}[39m
[31m+ \pagestyle{fancy}[39m
[31m+ \fancyhead[L]{DeepThinking Session}[39m
[31m+ \fancyhead[R]{\today}[39m
[31m+ \fancyfoot[C]{\thepage}[39m
[31m+[39m
[31m+ % Hyperref should be last[39m
[31m+ \usepackage{hyperref}[39m
[31m+ \hypersetup{[39m
[31m+   colorlinks=true,[39m
[31m+   linkcolor=blue,[39m
[31m+   citecolor=blue,[39m
[31m+   urlcolor=blue,[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+[39m
[31m+ \date{2025-11-24}[39m
[31m+ \maketitle[39m
[31m+[39m
[31m+ \section*{Session Metadata}[39m
[31m+ \begin{description}[leftmargin=3cm,style=nextline][39m
[31m+   \item[Session ID] \texttt{test-session}[39m
[31m+   \item[Mode] \texttt{mathematics}[39m
[31m+   \item[Created] 2025-11-24[39m
[31m+   \item[Updated] 2025-11-24[39m
[31m+ \end{description}[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+[39m
[31m+ \section{Reasoning Process}[39m
[31m+[39m
[31m+ \thoughtsection{1}{Thought}[39m
[31m+ \noindent [39m
[31m+[39m
[31m+ \begin{proof}[39m
[31m+ \textbf{Strategy:} direct[39m
[31m+[39m
[31m+ \end{proof}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m137:21[22m[39m
    [90m135| [39m      [35mconst[39m latex [33m=[39m exporter[33m.[39m[35mexport[39m(session)[33m;[39m
    [90m136| [39m
    [90m137| [39m      [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'$'[39m) [33m||[39m [34mexpect[39m(latex)[33m.[39m[34mtoContain[39m([32m'\\('[39m)[33m;[39m
    [90m   | [39m                    [31m^[39m
    [90m138| [39m    })[33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mLaTeX-Mermaid Integration[2m > [22mshould generate complete integrated document
[31m[1mAssertionError[22m: expected '\documentclass[11pt]{article}\n\n\n% â€¦' to contain 'Causal analysis'[39m

[32m- Expected[39m
[31m+ Received[39m

[32m- Causal analysis[39m
[31m+ \documentclass[11pt]{article}[39m
[31m+[39m
[31m+[39m
[31m+ % Mermaid code display[39m
[31m+ \usepackage{listings}[39m
[31m+ \usepackage{xcolor}[39m
[31m+[39m
[31m+ \lstdefinelanguage{mermaid}{[39m
[31m+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},[39m
[31m+   keywordstyle=\color{blue}\bfseries,[39m
[31m+   sensitive=true,[39m
[31m+   comment=[l]{\%\%},[39m
[31m+   commentstyle=\color{gray}\itshape,[39m
[31m+   stringstyle=\color{red},[39m
[31m+   morestring=[b]",[39m
[31m+   morestring=[b]'[39m
[31m+ }[39m
[31m+[39m
[31m+ \lstset{[39m
[31m+   language=mermaid,[39m
[31m+   basicstyle=\small\ttfamily,[39m
[31m+   breaklines=true,[39m
[31m+   frame=single,[39m
[31m+   backgroundcolor=\color{gray!10}[39m
[31m+ }[39m
[31m+[39m
[31m+ \newenvironment{mermaidcode}{[39m
[31m+   \begin{lstlisting}[language=mermaid][39m
[31m+ }{[39m
[31m+   \end{lstlisting}[39m
[31m+ }[39m
[31m+[39m
[31m+[39m
[31m+ \title{Test Session}[39m
[31m+ \author{DeepThinking MCP}[39m
[31m+ \date{\today}[39m
[31m+[39m
[31m+ \begin{document}[39m
[31m+ \maketitle[39m
[31m+ \tableofcontents[39m
[31m+ \newpage[39m
[31m+[39m
[31m+ \section{Reasoning Session}[39m
[31m+[39m
[31m+ \subsection{Thought 1}[39m
[31m+[39m
[31m+[39m
[31m+[39m
[31m+ \begin{mermaiddiagram}[h][39m
[31m+ \begin{mermaidcode}[39m
[31m+ graph TB[39m
[31m+   NoData["No causal graph data"][39m
[31m+[39m
[31m+ \end{mermaidcode}[39m
[31m+ \caption{Causal Graph}[39m
[31m+ \label{fig:causal-1}[39m
[31m+ \end{mermaiddiagram}[39m
[31m+[39m
[31m+[39m
[31m+ \end{document}[39m

[36m [2mâ¯[22m tests/export/latex-export.test.ts:[2m334:19[22m[39m
    [90m332| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\begin{document}'[39m)[33m;[39m
    [90m333| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'\\end{document}'[39m)[33m;[39m
    [90m334| [39m      [34mexpect[39m(doc)[33m.[39m[34mtoContain[39m([32m'Causal analysis'[39m)[33m;[39m
    [90m   | [39m                  [31m^[39m
    [90m335| [39m    })[33m;[39m
    [90m336| [39m  })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/6]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/export/latex-export.test.ts[2m > [22mLaTeX Exporter[2m > [22mSpecial Characters Escaping[2m > [22mshould escape LaTeX special characters
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'toISOString')[39m
[36m [2mâ¯[22m LaTeXExporter.formatDate src/export/latex.ts:[2m1221:17[22m[39m
    [90m1219| [39m   */[39m
    [90m1220| [39m  [35mprivate[39m [34mformatDate[39m(date[33m:[39m [33mDate[39m)[33m:[39m string {
    [90m1221| [39m    [35mreturn[39m date[33m.[39m[34mtoISOString[39m()[33m.[39m[34msplit[39m([32m'T'[39m)[[34m0[39m][33m;[39m
    [90m   | [39m                [31m^[39m
    [90m1222| [39m  }
    [90m1223| [39m
[90m [2mâ¯[22m LaTeXExporter.formatGenericThought src/export/latex.ts:[2m1177:50[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatThought src/export/latex.ts:[2m326:28[22m[39m
[90m [2mâ¯[22m src/export/latex.ts:[2m269:26[22m[39m
[90m [2mâ¯[22m LaTeXExporter.formatSession src/export/latex.ts:[2m268:22[22m[39m
[90m [2mâ¯[22m LaTeXExporter.export src/export/latex.ts:[2m200:26[22m[39m
[90m [2mâ¯[22m tests/export/latex-export.test.ts:[2m349:30[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/6]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[2m | [22m[1m[32m1 passed[39m[22m[90m (3)[39m
[2m      Tests [22m [1m[31m6 failed[39m[22m[2m | [22m[1m[32m57 passed[39m[22m[90m (63)[39m
[2m   Start at [22m 20:54:53
[2m   Duration [22m 1.09s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/backup/providers/gcs.ts[22m [34mx7[39m

 [33mâ¯[39m tests/integration/production-features.test.ts [2m ([22m[2m26 tests[22m [2m|[22m [31m24 failed[39m[2m)[22m[90m 92[2mms[22m[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions[39m
[31m     â†’ comparator.compareMultiple is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache[39m
[31m     â†’ backupManager.backup is not a function[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 24 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m61:32[22m[39m
    [90m 59| [39m      })[33m;[39m
    [90m 60| [39m
    [90m 61| [39m      [34mexpect[39m(results[33m.[39msessions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m 62| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m 63| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mid)[33m.[39m[34mtoBe[39m([32m'session-1'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m71:31[22m[39m
    [90m 69| [39m      })[33m;[39m
    [90m 70| [39m
    [90m 71| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 72| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mmode)[33m.[39m[34mtoBe[39m([32m'mathematics'[39m)[33m;[39m
    [90m 73| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m80:31[22m[39m
    [90m 78| [39m      })[33m;[39m
    [90m 79| [39m
    [90m 80| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 81| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mtags)[33m.[39m[34mtoContain[39m([32m'proof'[39m)[33m;[39m
    [90m 82| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m90:30[22m[39m
    [90m 88| [39m      })[33m;[39m
    [90m 89| [39m
    [90m 90| [39m      [34mexpect[39m(results[33m.[39mfacets)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 91| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mmode)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 92| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mtags)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m99:34[22m[39m
    [90m 97| [39m
    [90m 98| [39m      [34mexpect[39m(suggestions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 99| [39m      [34mexpect[39m(suggestions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m100| [39m      [34mexpect[39m(suggestions[33m.[39m[34msome[39m(s [33m=>[39m s[33m.[39m[34mtoLowerCase[39m()[33m.[39m[34mincludes[39m([32m'rea'[39m)))[33m.[39m[34mt[39mâ€¦
    [90m101| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m112:41[22m[39m
    [90m110| [39m
    [90m111| [39m    [34mit[39m([32m'should list built-in templates'[39m[33m,[39m () [33m=>[39m {
    [90m112| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m113| [39m
    [90m114| [39m      [34mexpect[39m(templates[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m7[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m119:41[22m[39m
    [90m117| [39m
    [90m118| [39m    [34mit[39m([32m'should filter templates by category'[39m[33m,[39m () [33m=>[39m {
    [90m119| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m120| [39m        category[33m:[39m [32m'problem-solving'[39m[33m,[39m
    [90m121| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m128:41[22m[39m
    [90m126| [39m
    [90m127| [39m    [34mit[39m([32m'should filter templates by difficulty'[39m[33m,[39m () [33m=>[39m {
    [90m128| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m129| [39m        difficulty[33m:[39m [32m'beginner'[39m[33m,[39m
    [90m130| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m137:41[22m[39m
    [90m135| [39m
    [90m136| [39m    [34mit[39m([32m'should instantiate template to session'[39m[33m,[39m () [33m=>[39m {
    [90m137| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m138| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m151:41[22m[39m
    [90m149| [39m
    [90m150| [39m    [34mit[39m([32m'should track template usage statistics'[39m[33m,[39m () [33m=>[39m {
    [90m151| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m152| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m153| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m173:42[22m[39m
    [90m171| [39m
    [90m172| [39m    [34mit[39m([32m'should process batch export job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m173| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m174| [39m        type[33m:[39m [32m'export'[39m[33m,[39m
    [90m175| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m187:42[22m[39m
    [90m185| [39m
    [90m186| [39m    [34mit[39m([32m'should process batch validation job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m187| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m188| [39m        type[33m:[39m [32m'validate'[39m[33m,[39m
    [90m189| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m203:44[22m[39m
    [90m201| [39m      [90m// Submit more jobs than the concurrency limit[39m
    [90m202| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m [34m10[39m[33m;[39m i[33m++[39m) {
    [90m203| [39m        [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                           [31m^[39m
    [90m204| [39m          type[33m:[39m [32m'export'[39m[33m,[39m
    [90m205| [39m          sessionIds[33m:[39m [testSessions[[34m0[39m][33m.[39mid][33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'create')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m225:28[22m[39m
    [90m223| [39m
    [90m224| [39m    [34mbeforeEach[39m(() [33m=>[39m {
    [90m225| [39m      cache [33m=[39m [33mCacheFactory[39m[33m.[39m[34mcreate[39m([32m'lru'[39m[33m,[39m { maxSize[33m:[39m [34m100[39m })[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m226| [39m    })[33m;[39m
    [90m227| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m281:44[22m[39m
    [90m279| [39m
    [90m280| [39m    [34mit[39m([32m'should create backup of session'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m281| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m282| [39m
    [90m283| [39m      [34mexpect[39m(backupId)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m288:27[22m[39m
    [90m286| [39m
    [90m287| [39m    [34mit[39m([32m'should list available backups'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m288| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m298:44[22m[39m
    [90m296| [39m    [34mit[39m([32m'should restore session from backup'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m297| [39m      [35mconst[39m originalSession [33m=[39m testSessions[[34m0[39m][33m;[39m
    [90m298| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(originalSession)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m299| [39m
    [90m300| [39m      [35mconst[39m restored [33m=[39m [35mawait[39m backupManager[33m.[39m[34mrestore[39m(backupId)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m337:58[22m[39m
    [90m335| [39m
    [90m336| [39m      [34mexpect[39m(comparison[33m.[39msimilarity)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m337| [39m      [34mexpect[39m(comparison[33m.[39mmetrics[33m?.[39mthoughtCountSimilarity)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                                         [31m^[39m
    [90m338| [39m    })[33m;[39m
    [90m339| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions
[31m[1mTypeError[22m: comparator.compareMultiple is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m341:38[22m[39m
    [90m339| [39m
    [90m340| [39m    [34mit[39m([32m'should compare multiple sessions'[39m[33m,[39m () [33m=>[39m {
    [90m341| [39m      [35mconst[39m comparisons [33m=[39m comparator[33m.[39m[34mcompareMultiple[39m(testSessions)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m342| [39m
    [90m343| [39m      [34mexpect[39m(comparisons)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m353:41[22m[39m
    [90m351| [39m      [90m// 1. Create sessions from templates[39m
    [90m352| [39m      [35mconst[39m templateManager [33m=[39m [35mnew[39m [33mTemplateManager[39m()[33m;[39m
    [90m353| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m354| [39m      [35mconst[39m session1 [33m=[39m templateManager[33m.[39m[34minstantiateTemplate[39m(templates[[34m0[39mâ€¦
    [90m355| [39m        title[33m:[39m [32m'E2E Test Session 1'[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m388:43[22m[39m
    [90m386| [39m      })[33m;[39m
    [90m387| [39m
    [90m388| [39m      [35mconst[39m backup1 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m389| [39m      [35mconst[39m backup2 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m390| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/24]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m24 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (26)[39m
[2m   Start at [22m 21:05:47
[2m   Duration [22m 254ms


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x7[39m
[2K[1A[2K[G       [90mrerun x7[39m
[2K[1A[2K[G       [2m[90mrerun x7[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/ml/recommendation-engine.ts[22m [34mx3[39m

 [32mâœ“[39m tests/unit/ml/recommendation-engine.test.ts [2m ([22m[2m27 tests[22m[2m)[22m[33m 1536[2mms[22m[39m

[2m Test Files [22m [1m[32m1 passed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[32m27 passed[39m[22m[90m (27)[39m
[2m   Start at [22m 21:38:49
[2m   Duration [22m 4.03s


[1m[7m[32m PASS [39m[27m[22m[32m Waiting for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x3[39m
[2K[1A[2K[G       [90mrerun x3[39m
[2K[1A[2K[G       [2m[90mrerun x3[39m[22m
[2K[1A[2K[G[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/ml/pattern-recognition.ts[22m

 [33mâ¯[39m tests/unit/ml/pattern-recognition.test.ts [2m ([22m[2m20 tests[22m [2m|[22m [31m10 failed[39m[2m)[22m[90m 97[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould extract patterns from sessions[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould generate insights[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mrecognize[2m > [22mshould recognize patterns in new session[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mrecognize[2m > [22mshould return patterns sorted by confidence[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPatterns[2m > [22mshould return all patterns[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPattern[2m > [22mshould retrieve pattern by ID[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPatternsByType[2m > [22mshould filter patterns by type[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mcalculateSimilarity[2m > [22mshould calculate similarity between patterns[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mpattern types[2m > [22mshould extract sequence patterns[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mpattern types[2m > [22mshould extract structure patterns[39m
[31m     â†’ pattern is not defined[39m
 [33mâ¯[39m tests/unit/ml/recommendation-engine.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m26 failed[39m[2m)[22m[33m 623[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mtrain[2m > [22mshould train on sessions[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mtrain[2m > [22mshould collect training statistics[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould generate recommendations without session[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould generate recommendations for session[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould respect recommendation limit[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould filter by recommendation types[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould provide domain-specific recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould respect mode preferences[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate mode recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate structure recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate behavior recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate template recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate continuation recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate improvement recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould include confidence scores[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould include rationale[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould provide actionable recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould estimate expected improvement[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould reference basis for recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msorting and filtering[2m > [22mshould sort recommendations by confidence[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msorting and filtering[2m > [22mshould count high confidence recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest mathematics mode for math domain[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest physics mode for physics domain[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest scientific mode for science domain[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msummary generation[2m > [22mshould generate meaningful summary[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msummary generation[2m > [22mshould mention count in summary[39m
[31m     â†’ pattern is not defined[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 36 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould extract patterns from sessions
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m59:33[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould generate insights
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m71:33[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mrecognize[2m > [22mshould recognize patterns in new session
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m98:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mrecognize[2m > [22mshould return patterns sorted by confidence
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m109:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPatterns[2m > [22mshould return all patterns
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m127:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPattern[2m > [22mshould retrieve pattern by ID
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m142:33[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPatternsByType[2m > [22mshould filter patterns by type
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m160:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mcalculateSimilarity[2m > [22mshould calculate similarity between patterns
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m176:33[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mpattern types[2m > [22mshould extract sequence patterns
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m204:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mpattern types[2m > [22mshould extract structure patterns
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m227:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mtrain[2m > [22mshould train on sessions
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m36:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mtrain[2m > [22mshould collect training statistics
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m45:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould generate recommendations without session
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould generate recommendations for session
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould respect recommendation limit
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould filter by recommendation types
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould provide domain-specific recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould respect mode preferences
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m58:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate mode recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate structure recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate behavior recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate template recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate continuation recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate improvement recommendations
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m118:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould include confidence scores
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould include rationale
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould provide actionable recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould estimate expected improvement
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould reference basis for recommendations
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m184:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msorting and filtering[2m > [22mshould sort recommendations by confidence
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msorting and filtering[2m > [22mshould count high confidence recommendations
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m249:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest mathematics mode for math domain
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest physics mode for physics domain
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest scientific mode for science domain
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m274:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msummary generation[2m > [22mshould generate meaningful summary
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msummary generation[2m > [22mshould mention count in summary
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m313:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/36]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m36 failed[39m[22m[2m | [22m[1m[32m11 passed[39m[22m[90m (47)[39m
[2m   Start at [22m 21:58:12
[2m   Duration [22m 2.08s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/ml/pattern-recognition.ts[22m

 [33mâ¯[39m tests/unit/ml/recommendation-engine.test.ts [2m ([22m[2m27 tests[22m [2m|[22m [31m26 failed[39m[2m)[22m[90m 245[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mtrain[2m > [22mshould train on sessions[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mtrain[2m > [22mshould collect training statistics[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould generate recommendations without session[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould generate recommendations for session[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould respect recommendation limit[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould filter by recommendation types[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould provide domain-specific recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould respect mode preferences[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate mode recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate structure recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate behavior recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate template recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate continuation recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate improvement recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould include confidence scores[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould include rationale[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould provide actionable recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould estimate expected improvement[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould reference basis for recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msorting and filtering[2m > [22mshould sort recommendations by confidence[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msorting and filtering[2m > [22mshould count high confidence recommendations[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest mathematics mode for math domain[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest physics mode for physics domain[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest scientific mode for science domain[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msummary generation[2m > [22mshould generate meaningful summary[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msummary generation[2m > [22mshould mention count in summary[39m
[31m     â†’ pattern is not defined[39m
 [33mâ¯[39m tests/unit/ml/pattern-recognition.test.ts [2m ([22m[2m20 tests[22m [2m|[22m [31m10 failed[39m[2m)[22m[33m 688[2mms[22m[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould extract patterns from sessions[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould generate insights[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mrecognize[2m > [22mshould recognize patterns in new session[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mrecognize[2m > [22mshould return patterns sorted by confidence[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPatterns[2m > [22mshould return all patterns[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPattern[2m > [22mshould retrieve pattern by ID[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPatternsByType[2m > [22mshould filter patterns by type[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mcalculateSimilarity[2m > [22mshould calculate similarity between patterns[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mpattern types[2m > [22mshould extract sequence patterns[39m
[31m     â†’ pattern is not defined[39m
[31m   [33mâ¯[31m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mpattern types[2m > [22mshould extract structure patterns[39m
[31m     â†’ pattern is not defined[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 36 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould extract patterns from sessions
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m59:33[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mtrain[2m > [22mshould generate insights
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m71:33[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mrecognize[2m > [22mshould recognize patterns in new session
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m98:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mrecognize[2m > [22mshould return patterns sorted by confidence
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m109:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPatterns[2m > [22mshould return all patterns
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m127:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPattern[2m > [22mshould retrieve pattern by ID
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m142:33[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mgetPatternsByType[2m > [22mshould filter patterns by type
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m160:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mcalculateSimilarity[2m > [22mshould calculate similarity between patterns
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m176:33[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mpattern types[2m > [22mshould extract sequence patterns
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m204:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/pattern-recognition.test.ts[2m > [22mPatternRecognizer[2m > [22mpattern types[2m > [22mshould extract structure patterns
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m tests/unit/ml/pattern-recognition.test.ts:[2m227:18[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mtrain[2m > [22mshould train on sessions
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m36:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mtrain[2m > [22mshould collect training statistics
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m45:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould generate recommendations without session
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould generate recommendations for session
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould respect recommendation limit
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould filter by recommendation types
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould provide domain-specific recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mgetRecommendations[2m > [22mshould respect mode preferences
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m58:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate mode recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate structure recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate behavior recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate template recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate continuation recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation types[2m > [22mshould generate improvement recommendations
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m118:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould include confidence scores
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould include rationale
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould provide actionable recommendations
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould estimate expected improvement
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mrecommendation quality[2m > [22mshould reference basis for recommendations
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m184:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msorting and filtering[2m > [22mshould sort recommendations by confidence
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msorting and filtering[2m > [22mshould count high confidence recommendations
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m249:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest mathematics mode for math domain
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest physics mode for physics domain
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22mdomain-specific recommendations[2m > [22mshould suggest scientific mode for science domain
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m274:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/36]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msummary generation[2m > [22mshould generate meaningful summary
[31m[1m[7m FAIL [27m[22m[39m tests/unit/ml/recommendation-engine.test.ts[2m > [22mRecommendationEngine[2m > [22msummary generation[2m > [22mshould mention count in summary
[31m[1mReferenceError[22m: pattern is not defined[39m
[36m [2mâ¯[22m PatternRecognizer.matchesPattern src/ml/pattern-recognition.ts:[2m552:5[22m[39m
    [90m550| [39m   */[39m
    [90m551| [39m  [35mprivate[39m [34mmatchesPattern[39m(session[33m:[39m [33mThinkingSession[39m[33m,[39m _pattern[33m:[39m [33mPattern[39m)[33m:[39mâ€¦
    [90m552| [39m    [35mswitch[39m (pattern[33m.[39mtype) {
    [90m   | [39m    [31m^[39m
    [90m553| [39m      [35mcase[39m [32m'sequence'[39m[33m:[39m
    [90m554| [39m        [35mreturn[39m [35mthis[39m[33m.[39m[34mmatchesSequencePattern[39m(session[33m,[39m pattern)[33m;[39m
[90m [2mâ¯[22m PatternRecognizer.recognize src/ml/pattern-recognition.ts:[2m148:16[22m[39m
[90m [2mâ¯[22m PatternRecognizer.calculateCoverage src/ml/pattern-recognition.ts:[2m499:36[22m[39m
[90m [2mâ¯[22m PatternRecognizer.train src/ml/pattern-recognition.ts:[2m127:27[22m[39m
[90m [2mâ¯[22m RecommendationEngine.train src/ml/recommendation-engine.ts:[2m101:28[22m[39m
[90m [2mâ¯[22m tests/unit/ml/recommendation-engine.test.ts:[2m313:14[22m[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/36]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m2 failed[39m[22m[90m (2)[39m
[2m      Tests [22m [1m[31m36 failed[39m[22m[2m | [22m[1m[32m11 passed[39m[22m[90m (47)[39m
[2m   Start at [22m 22:26:30
[2m   Duration [22m 3.17s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
[3Jc
[7m[1m[34m RERUN [39m[22m[27m[2m src/backup/backup-manager.ts[22m [34mx8[39m

 [33mâ¯[39m tests/integration/production-features.test.ts [2m ([22m[2m26 tests[22m [2m|[22m [31m24 failed[39m[2m)[22m[33m 561[2mms[22m[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags[39m
[31m     â†’ Cannot read properties of undefined (reading 'length')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions[39m
[31m     â†’ expected 0 to be greater than 0[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs[39m
[31m     â†’ batchProcessor.submitJob is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache[39m
[31m     â†’ Cannot read properties of undefined (reading 'create')[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup[39m
[31m     â†’ backupManager.backup is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity[39m
[31m     â†’ expected undefined not to be undefined[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions[39m
[31m     â†’ comparator.compareMultiple is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch[39m
[31m     â†’ templateManager.listTemplates is not a function[39m
[31m   [33mâ¯[31m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache[39m
[31m     â†’ backupManager.backup is not a function[39m

[31mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1m[7m Failed Tests 24 [27m[22mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould index and search sessions by content
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m61:32[22m[39m
    [90m 59| [39m      })[33m;[39m
    [90m 60| [39m
    [90m 61| [39m      [34mexpect[39m(results[33m.[39msessions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                               [31m^[39m
    [90m 62| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m 63| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mid)[33m.[39m[34mtoBe[39m([32m'session-1'[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[1/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by mode
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m71:31[22m[39m
    [90m 69| [39m      })[33m;[39m
    [90m 70| [39m
    [90m 71| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 72| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mmode)[33m.[39m[34mtoBe[39m([32m'mathematics'[39m)[33m;[39m
    [90m 73| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[2/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould filter by tags
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'length')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m80:31[22m[39m
    [90m 78| [39m      })[33m;[39m
    [90m 79| [39m
    [90m 80| [39m      [34mexpect[39m(results[33m.[39msessions[33m.[39mlength)[33m.[39m[34mtoBe[39m([34m1[39m)[33m;[39m
    [90m   | [39m                              [31m^[39m
    [90m 81| [39m      [34mexpect[39m(results[33m.[39msessions[[34m0[39m][33m.[39mtags)[33m.[39m[34mtoContain[39m([32m'proof'[39m)[33m;[39m
    [90m 82| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[3/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould support faceted search
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m90:30[22m[39m
    [90m 88| [39m      })[33m;[39m
    [90m 89| [39m
    [90m 90| [39m      [34mexpect[39m(results[33m.[39mfacets)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                             [31m^[39m
    [90m 91| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mmode)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 92| [39m      [34mexpect[39m(results[33m.[39mfacets[33m?.[39mtags)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[4/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSearch System Integration[2m > [22mshould provide autocomplete suggestions
[31m[1mAssertionError[22m: expected 0 to be greater than 0[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m99:34[22m[39m
    [90m 97| [39m
    [90m 98| [39m      [34mexpect[39m(suggestions)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m 99| [39m      [34mexpect[39m(suggestions[33m.[39mlength)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m   | [39m                                 [31m^[39m
    [90m100| [39m      [34mexpect[39m(suggestions[33m.[39m[34msome[39m(s [33m=>[39m s[33m.[39m[34mtoLowerCase[39m()[33m.[39m[34mincludes[39m([32m'rea'[39m)))[33m.[39m[34mt[39mâ€¦
    [90m101| [39m    })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[5/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould list built-in templates
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m112:41[22m[39m
    [90m110| [39m
    [90m111| [39m    [34mit[39m([32m'should list built-in templates'[39m[33m,[39m () [33m=>[39m {
    [90m112| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m113| [39m
    [90m114| [39m      [34mexpect[39m(templates[33m.[39mlength)[33m.[39m[34mtoBeGreaterThanOrEqual[39m([34m7[39m)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[6/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by category
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m119:41[22m[39m
    [90m117| [39m
    [90m118| [39m    [34mit[39m([32m'should filter templates by category'[39m[33m,[39m () [33m=>[39m {
    [90m119| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m120| [39m        category[33m:[39m [32m'problem-solving'[39m[33m,[39m
    [90m121| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[7/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould filter templates by difficulty
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m128:41[22m[39m
    [90m126| [39m
    [90m127| [39m    [34mit[39m([32m'should filter templates by difficulty'[39m[33m,[39m () [33m=>[39m {
    [90m128| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m({
    [90m   | [39m                                        [31m^[39m
    [90m129| [39m        difficulty[33m:[39m [32m'beginner'[39m[33m,[39m
    [90m130| [39m      })[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[8/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould instantiate template to session
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m137:41[22m[39m
    [90m135| [39m
    [90m136| [39m    [34mit[39m([32m'should instantiate template to session'[39m[33m,[39m () [33m=>[39m {
    [90m137| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m138| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m139| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[9/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mTemplate System Integration[2m > [22mshould track template usage statistics
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m151:41[22m[39m
    [90m149| [39m
    [90m150| [39m    [34mit[39m([32m'should track template usage statistics'[39m[33m,[39m () [33m=>[39m {
    [90m151| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m152| [39m      [35mconst[39m template [33m=[39m templates[[34m0[39m][33m;[39m
    [90m153| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[10/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch export job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m173:42[22m[39m
    [90m171| [39m
    [90m172| [39m    [34mit[39m([32m'should process batch export job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m173| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m174| [39m        type[33m:[39m [32m'export'[39m[33m,[39m
    [90m175| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[11/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould process batch validation job
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m187:42[22m[39m
    [90m185| [39m
    [90m186| [39m    [34mit[39m([32m'should process batch validation job'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m187| [39m      [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                         [31m^[39m
    [90m188| [39m        type[33m:[39m [32m'validate'[39m[33m,[39m
    [90m189| [39m        sessionIds[33m:[39m testSessions[33m.[39m[34mmap[39m(s [33m=>[39m s[33m.[39mid)[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[12/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBatch Processing Integration[2m > [22mshould limit concurrent jobs
[31m[1mTypeError[22m: batchProcessor.submitJob is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m203:44[22m[39m
    [90m201| [39m      [90m// Submit more jobs than the concurrency limit[39m
    [90m202| [39m      [35mfor[39m ([35mlet[39m i [33m=[39m [34m0[39m[33m;[39m i [33m<[39m [34m10[39m[33m;[39m i[33m++[39m) {
    [90m203| [39m        [35mconst[39m jobId [33m=[39m [35mawait[39m batchProcessor[33m.[39m[34msubmitJob[39m({
    [90m   | [39m                                           [31m^[39m
    [90m204| [39m          type[33m:[39m [32m'export'[39m[33m,[39m
    [90m205| [39m          sessionIds[33m:[39m [testSessions[[34m0[39m][33m.[39mid][33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[13/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould cache and retrieve values
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould respect LRU eviction policy
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould report cache statistics
[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mCache System Integration[2m > [22mshould clear cache
[31m[1mTypeError[22m: Cannot read properties of undefined (reading 'create')[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m225:28[22m[39m
    [90m223| [39m
    [90m224| [39m    [34mbeforeEach[39m(() [33m=>[39m {
    [90m225| [39m      cache [33m=[39m [33mCacheFactory[39m[33m.[39m[34mcreate[39m([32m'lru'[39m[33m,[39m { maxSize[33m:[39m [34m100[39m })[33m;[39m
    [90m   | [39m                           [31m^[39m
    [90m226| [39m    })[33m;[39m
    [90m227| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[14/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould create backup of session
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m281:44[22m[39m
    [90m279| [39m
    [90m280| [39m    [34mit[39m([32m'should create backup of session'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m281| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m282| [39m
    [90m283| [39m      [34mexpect[39m(backupId)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[15/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould list available backups
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m288:27[22m[39m
    [90m286| [39m
    [90m287| [39m    [34mit[39m([32m'should list available backups'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m288| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                          [31m^[39m
    [90m289| [39m      [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m290| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[16/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mBackup and Restore Integration[2m > [22mshould restore session from backup
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m298:44[22m[39m
    [90m296| [39m    [34mit[39m([32m'should restore session from backup'[39m[33m,[39m [35masync[39m () [33m=>[39m {
    [90m297| [39m      [35mconst[39m originalSession [33m=[39m testSessions[[34m0[39m][33m;[39m
    [90m298| [39m      [35mconst[39m backupId [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(originalSession)[33m;[39m
    [90m   | [39m                                           [31m^[39m
    [90m299| [39m
    [90m300| [39m      [35mconst[39m restored [33m=[39m [35mawait[39m backupManager[33m.[39m[34mrestore[39m(backupId)[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[17/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould calculate thought count similarity
[31m[1mAssertionError[22m: expected undefined not to be undefined[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m337:58[22m[39m
    [90m335| [39m
    [90m336| [39m      [34mexpect[39m(comparison[33m.[39msimilarity)[33m.[39m[34mtoBeGreaterThan[39m([34m0[39m)[33m;[39m
    [90m337| [39m      [34mexpect[39m(comparison[33m.[39mmetrics[33m?.[39mthoughtCountSimilarity)[33m.[39m[34mtoBeDefined[39m()[33m;[39m
    [90m   | [39m                                                         [31m^[39m
    [90m338| [39m    })[33m;[39m
    [90m339| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[18/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mSession Comparison Integration[2m > [22mshould compare multiple sessions
[31m[1mTypeError[22m: comparator.compareMultiple is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m341:38[22m[39m
    [90m339| [39m
    [90m340| [39m    [34mit[39m([32m'should compare multiple sessions'[39m[33m,[39m () [33m=>[39m {
    [90m341| [39m      [35mconst[39m comparisons [33m=[39m comparator[33m.[39m[34mcompareMultiple[39m(testSessions)[33m;[39m
    [90m   | [39m                                     [31m^[39m
    [90m342| [39m
    [90m343| [39m      [34mexpect[39m(comparisons)[33m.[39m[34mtoBeDefined[39m()[33m;[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[19/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate search + templates + batch
[31m[1mTypeError[22m: templateManager.listTemplates is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m353:41[22m[39m
    [90m351| [39m      [90m// 1. Create sessions from templates[39m
    [90m352| [39m      [35mconst[39m templateManager [33m=[39m [35mnew[39m [33mTemplateManager[39m()[33m;[39m
    [90m353| [39m      [35mconst[39m templates [33m=[39m templateManager[33m.[39m[34mlistTemplates[39m()[33m;[39m
    [90m   | [39m                                        [31m^[39m
    [90m354| [39m      [35mconst[39m session1 [33m=[39m templateManager[33m.[39m[34minstantiateTemplate[39m(templates[[34m0[39mâ€¦
    [90m355| [39m        title[33m:[39m [32m'E2E Test Session 1'[39m[33m,[39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[20/24]âŽ¯[22m[39m

[31m[1m[7m FAIL [27m[22m[39m tests/integration/production-features.test.ts[2m > [22mProduction Features Integration Tests[2m > [22mEnd-to-End Feature Integration[2m > [22mshould integrate backup + comparison + cache
[31m[1mTypeError[22m: backupManager.backup is not a function[39m
[36m [2mâ¯[22m tests/integration/production-features.test.ts:[2m388:43[22m[39m
    [90m386| [39m      })[33m;[39m
    [90m387| [39m
    [90m388| [39m      [35mconst[39m backup1 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m0[39m])[33m;[39m
    [90m   | [39m                                          [31m^[39m
    [90m389| [39m      [35mconst[39m backup2 [33m=[39m [35mawait[39m backupManager[33m.[39m[34mbackup[39m(testSessions[[34m1[39m])[33m;[39m
    [90m390| [39m

[31m[2mâŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯âŽ¯[21/24]âŽ¯[22m[39m

[2m Test Files [22m [1m[31m1 failed[39m[22m[90m (1)[39m
[2m      Tests [22m [1m[31m24 failed[39m[22m[2m | [22m[1m[32m2 passed[39m[22m[90m (26)[39m
[2m   Start at [22m 22:42:49
[2m   Duration [22m 2.53s


[1m[7m[31m FAIL [39m[27m[22m[31m Tests failed. Watching for file changes...[39m
       [2mpress [22m[1mh[22m[2m to show help[22m[2m, [22m[2mpress [22m[1mq[22m[2m to quit[22m
       [34mrerun x8[39m
[2K[1A[2K[G       [90mrerun x8[39m
[2K[1A[2K[G       [2m[90mrerun x8[39m[22m
[2K[1A[2K[G