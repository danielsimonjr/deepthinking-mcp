
> deepthinking-mcp@3.4.3 test
> vitest


 DEV  v1.6.1 /home/user/deepthinking-mcp

 ✓ tests/unit/export/latex.test.ts  (23 tests) 15ms
stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleAddThought() > should create new session if sessionId not provided
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "d9478dee-bcdd-4fd8-a289-32bf6235b0e2",
  "title": "Test Session",
  "mode": "sequential"
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleAddThought() > should add thought to existing session
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "62f7a9f1-8b9c-420a-8e70-e81d483a8991",
  "title": "Test Session",
  "mode": "sequential"
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleAddThought() > should handle all 13 modes in add_thought
[2025-11-24T20:07:12.593Z] INFO: Session created
  Context: {
  "sessionId": "dd65ea28-3cca-46d1-915f-ace7d8c498d7",
  "title": "Test sequential",
  "mode": "sequential"
}
[2025-11-24T20:07:12.594Z] INFO: Session completed
  Context: {
  "sessionId": "dd65ea28-3cca-46d1-915f-ace7d8c498d7",
  "title": "Test sequential",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.594Z] INFO: Session created
  Context: {
  "sessionId": "c6e81910-4169-4e91-b37b-c911e943ed4a",
  "title": "Test shannon",
  "mode": "shannon"
}
[2025-11-24T20:07:12.594Z] INFO: Session completed
  Context: {
  "sessionId": "c6e81910-4169-4e91-b37b-c911e943ed4a",
  "title": "Test shannon",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.595Z] INFO: Session created
  Context: {
  "sessionId": "d70dd93c-bf87-4371-8e8a-9e4678cdef17",
  "title": "Test mathematics",
  "mode": "mathematics"
}
[2025-11-24T20:07:12.595Z] INFO: Session completed
  Context: {
  "sessionId": "d70dd93c-bf87-4371-8e8a-9e4678cdef17",
  "title": "Test mathematics",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.595Z] INFO: Session created
  Context: {
  "sessionId": "e3d25df1-a56f-4992-ab10-72b33e1ba4b4",
  "title": "Test physics",
  "mode": "physics"
}
[2025-11-24T20:07:12.595Z] INFO: Session completed
  Context: {
  "sessionId": "e3d25df1-a56f-4992-ab10-72b33e1ba4b4",
  "title": "Test physics",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.595Z] INFO: Session created
  Context: {
  "sessionId": "68b33482-bf65-4617-be4e-41b46900b0d2",
  "title": "Test hybrid",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.595Z] INFO: Session completed
  Context: {
  "sessionId": "68b33482-bf65-4617-be4e-41b46900b0d2",
  "title": "Test hybrid",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.596Z] INFO: Session created
  Context: {
  "sessionId": "3959fe72-da0b-46bc-a2aa-7f0700ae4b8a",
  "title": "Test abductive",
  "mode": "abductive"
}
[2025-11-24T20:07:12.596Z] INFO: Session completed
  Context: {
  "sessionId": "3959fe72-da0b-46bc-a2aa-7f0700ae4b8a",
  "title": "Test abductive",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.596Z] INFO: Session created
  Context: {
  "sessionId": "987e3b1e-a6fb-4af0-88d6-9e5bdfb15fd6",
  "title": "Test causal",
  "mode": "causal"
}
[2025-11-24T20:07:12.596Z] INFO: Session completed
  Context: {
  "sessionId": "987e3b1e-a6fb-4af0-88d6-9e5bdfb15fd6",
  "title": "Test causal",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.596Z] INFO: Session created
  Context: {
  "sessionId": "ef5ec049-b392-4674-ba36-3dc9e7af495c",
  "title": "Test bayesian",
  "mode": "bayesian"
}
[2025-11-24T20:07:12.596Z] INFO: Session completed
  Context: {
  "sessionId": "ef5ec049-b392-4674-ba36-3dc9e7af495c",
  "title": "Test bayesian",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.597Z] INFO: Session created
  Context: {
  "sessionId": "927d9fa3-b4e9-4696-9a11-43ac16450c61",
  "title": "Test counterfactual",
  "mode": "counterfactual"
}
[2025-11-24T20:07:12.597Z] INFO: Session completed
  Context: {
  "sessionId": "927d9fa3-b4e9-4696-9a11-43ac16450c61",
  "title": "Test counterfactual",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.597Z] INFO: Session created
  Context: {
  "sessionId": "4917cff1-b840-4abc-a9a1-bdbcca402480",
  "title": "Test analogical",
  "mode": "analogical"
}
[2025-11-24T20:07:12.597Z] INFO: Session completed
  Context: {
  "sessionId": "4917cff1-b840-4abc-a9a1-bdbcca402480",
  "title": "Test analogical",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.597Z] INFO: Session created
  Context: {
  "sessionId": "b2c4b192-40a3-4ac2-af5c-2fea9162dc0a",
  "title": "Test temporal",
  "mode": "temporal"
}
[2025-11-24T20:07:12.597Z] INFO: Session completed
  Context: {
  "sessionId": "b2c4b192-40a3-4ac2-af5c-2fea9162dc0a",
  "title": "Test temporal",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.597Z] INFO: Session created
  Context: {
  "sessionId": "b152d504-2a2e-4f60-b060-1363c523ab7c",
  "title": "Test gametheory",
  "mode": "gametheory"
}
[2025-11-24T20:07:12.597Z] INFO: Session completed
  Context: {
  "sessionId": "b152d504-2a2e-4f60-b060-1363c523ab7c",
  "title": "Test gametheory",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.597Z] INFO: Session created
  Context: {
  "sessionId": "d7ea16cd-a528-4468-909f-8e4ed94c3002",
  "title": "Test evidential",
  "mode": "evidential"
}
[2025-11-24T20:07:12.598Z] INFO: Session completed
  Context: {
  "sessionId": "d7ea16cd-a528-4468-909f-8e4ed94c3002",
  "title": "Test evidential",
  "totalThoughts": 1
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleSummarize() > should generate summary for session with thoughts
[2025-11-24T20:07:12.599Z] INFO: Session created
  Context: {
  "sessionId": "942ddc8c-bdda-49ed-9bfd-5562de0d3f6b",
  "title": "Test Session",
  "mode": "sequential"
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleSummarize() > should generate summary for empty session
[2025-11-24T20:07:12.600Z] INFO: Session created
  Context: {
  "sessionId": "813f369b-f11c-43d7-be4f-79f38f26c459",
  "title": "Empty Session",
  "mode": "sequential"
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleSwitchMode() > should switch mode successfully
[2025-11-24T20:07:12.600Z] INFO: Session created
  Context: {
  "sessionId": "117c1a1b-9134-43c8-9ae3-bbc7f32e520d",
  "title": "Test Session",
  "mode": "sequential"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "117c1a1b-9134-43c8-9ae3-bbc7f32e520d",
  "oldMode": "sequential",
  "newMode": "shannon",
  "reason": "User requested mode switch"
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleSwitchMode() > should switch between all 13 modes
[2025-11-24T20:07:12.601Z] INFO: Session created
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "title": "Multi-mode Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "hybrid",
  "newMode": "sequential",
  "reason": "Switching to sequential"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "sequential",
  "newMode": "shannon",
  "reason": "Switching to shannon"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "shannon",
  "newMode": "mathematics",
  "reason": "Switching to mathematics"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "mathematics",
  "newMode": "physics",
  "reason": "Switching to physics"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "physics",
  "newMode": "abductive",
  "reason": "Switching to abductive"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "abductive",
  "newMode": "causal",
  "reason": "Switching to causal"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "causal",
  "newMode": "bayesian",
  "reason": "Switching to bayesian"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "bayesian",
  "newMode": "counterfactual",
  "reason": "Switching to counterfactual"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "counterfactual",
  "newMode": "analogical",
  "reason": "Switching to analogical"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "analogical",
  "newMode": "temporal",
  "reason": "Switching to temporal"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "temporal",
  "newMode": "gametheory",
  "reason": "Switching to gametheory"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "gametheory",
  "newMode": "evidential",
  "reason": "Switching to evidential"
}
[2025-11-24T20:07:12.601Z] INFO: Session mode switched
  Context: {
  "sessionId": "e0cb1532-0538-4989-8c34-146da703e853",
  "oldMode": "evidential",
  "newMode": "hybrid",
  "reason": "Switching to hybrid"
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleGetSession() > should retrieve session with all properties
[2025-11-24T20:07:12.602Z] INFO: Session created
  Context: {
  "sessionId": "0d642e4e-10ff-4130-a444-a4bf77533717",
  "title": "Test Session",
  "mode": "sequential"
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleGetSession() > should retrieve session with thoughts
[2025-11-24T20:07:12.602Z] INFO: Session created
  Context: {
  "sessionId": "fb1551a8-a675-4064-8183-8d5815a7a5e4",
  "title": "Session with Thoughts",
  "mode": "sequential"
}
[2025-11-24T20:07:12.602Z] INFO: Session completed
  Context: {
  "sessionId": "fb1551a8-a675-4064-8183-8d5815a7a5e4",
  "title": "Session with Thoughts",
  "totalThoughts": 1
}

stdout | tests/integration/index-handlers.test.ts > Index.ts Handler Functions > Handler Functions > handleExport() > should export session in JSON format
[2025-11-24T20:07:12.603Z] INFO: Session created
  Context: {
  "sessionId": "f142a59c-aee2-4d82-8cd2-9949b705af77",
  "title": "Export Test",
  "mode": "sequential"
}
[2025-11-24T20:07:12.603Z] INFO: Session completed
  Context: {
  "sessionId": "f142a59c-aee2-4d82-8cd2-9949b705af77",
  "title": "Export Test",
  "totalThoughts": 1
}

 ✓ tests/integration/index-handlers.test.ts  (33 tests) 29ms
stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Multiple Session Management > should create and manage multiple sessions independently
[2025-11-24T20:07:12.580Z] INFO: Session created
  Context: {
  "sessionId": "27107dad-fa69-4824-87f8-2cb86941cb76",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.581Z] INFO: Session created
  Context: {
  "sessionId": "beba9c7f-98f3-47bd-a9a0-ef70ac165152",
  "title": "Session 2",
  "mode": "shannon"
}
[2025-11-24T20:07:12.581Z] INFO: Session created
  Context: {
  "sessionId": "3898578c-07c1-422e-9118-abc145da26bd",
  "title": "Session 3",
  "mode": "mathematics"
}
[2025-11-24T20:07:12.581Z] INFO: Session created
  Context: {
  "sessionId": "3aea8cb0-3ce0-4f3a-b21c-599734bcfaf4",
  "title": "Session 4",
  "mode": "physics"
}
[2025-11-24T20:07:12.581Z] INFO: Session created
  Context: {
  "sessionId": "ef48eaad-60e4-42d7-a923-d890824965f0",
  "title": "Session 5",
  "mode": "hybrid"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Multiple Session Management > should maintain session isolation (changes in one do not affect others)
[2025-11-24T20:07:12.583Z] INFO: Session created
  Context: {
  "sessionId": "ab3f12f2-7221-4474-9f3f-953a09a1fc96",
  "title": "Isolated Session 1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.583Z] INFO: Session created
  Context: {
  "sessionId": "f4c5062a-5cc0-47ce-b26d-70df3ddb02c3",
  "title": "Isolated Session 2",
  "mode": "sequential"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Multiple Session Management > should handle mode switching independently across sessions
[2025-11-24T20:07:12.584Z] INFO: Session created
  Context: {
  "sessionId": "b26361ae-2d91-4649-a486-57c86165a5c4",
  "title": "S1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.584Z] INFO: Session created
  Context: {
  "sessionId": "db829f80-4f37-4483-ad5f-29daa0f414d1",
  "title": "S2",
  "mode": "sequential"
}
[2025-11-24T20:07:12.585Z] INFO: Session created
  Context: {
  "sessionId": "f95a0f69-a158-43f6-acf4-947eff1751b1",
  "title": "S3",
  "mode": "sequential"
}
[2025-11-24T20:07:12.586Z] INFO: Session mode switched
  Context: {
  "sessionId": "b26361ae-2d91-4649-a486-57c86165a5c4",
  "oldMode": "sequential",
  "newMode": "mathematics",
  "reason": "Switch to math"
}
[2025-11-24T20:07:12.586Z] INFO: Session mode switched
  Context: {
  "sessionId": "db829f80-4f37-4483-ad5f-29daa0f414d1",
  "oldMode": "sequential",
  "newMode": "physics",
  "reason": "Switch to physics"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Multiple Session Management > should handle completion status independently across sessions
[2025-11-24T20:07:12.586Z] INFO: Session created
  Context: {
  "sessionId": "20b6ea6b-75c1-44e4-b928-4a36ab01d63a",
  "title": "S1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.586Z] INFO: Session created
  Context: {
  "sessionId": "061f3afb-0972-4e39-8ce1-8938c94606e5",
  "title": "S2",
  "mode": "sequential"
}
[2025-11-24T20:07:12.586Z] INFO: Session completed
  Context: {
  "sessionId": "20b6ea6b-75c1-44e4-b928-4a36ab01d63a",
  "title": "S1",
  "totalThoughts": 1
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Concurrent Operations on Same Session > should handle concurrent thought additions to same session
[2025-11-24T20:07:12.587Z] INFO: Session created
  Context: {
  "sessionId": "a630896e-7179-4310-bcd5-ed3ff07e4c13",
  "title": "Concurrent Test",
  "mode": "sequential"
}
[2025-11-24T20:07:12.587Z] INFO: Session completed
  Context: {
  "sessionId": "a630896e-7179-4310-bcd5-ed3ff07e4c13",
  "title": "Concurrent Test",
  "totalThoughts": 3
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Concurrent Operations on Same Session > should handle concurrent retrieval of same session
[2025-11-24T20:07:12.587Z] INFO: Session created
  Context: {
  "sessionId": "4cde30aa-b535-4c97-a32c-315bf7d8d31b",
  "title": "Concurrent Retrieval",
  "mode": "sequential"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Concurrent Operations on Same Session > should handle concurrent mode switches on same session
[2025-11-24T20:07:12.587Z] INFO: Session created
  Context: {
  "sessionId": "1bcdbb10-9a8b-4967-8f8a-64c7740936bf",
  "title": "Mode Switch Race",
  "mode": "sequential"
}
[2025-11-24T20:07:12.587Z] INFO: Session mode switched
  Context: {
  "sessionId": "1bcdbb10-9a8b-4967-8f8a-64c7740936bf",
  "oldMode": "sequential",
  "newMode": "mathematics",
  "reason": "Switch 1"
}
[2025-11-24T20:07:12.587Z] INFO: Session mode switched
  Context: {
  "sessionId": "1bcdbb10-9a8b-4967-8f8a-64c7740936bf",
  "oldMode": "mathematics",
  "newMode": "physics",
  "reason": "Switch 2"
}
[2025-11-24T20:07:12.587Z] INFO: Session mode switched
  Context: {
  "sessionId": "1bcdbb10-9a8b-4967-8f8a-64c7740936bf",
  "oldMode": "physics",
  "newMode": "hybrid",
  "reason": "Switch 3"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Concurrent Operations Across Different Sessions > should handle concurrent operations on different sessions
[2025-11-24T20:07:12.588Z] INFO: Session created
  Context: {
  "sessionId": "2dba5315-edea-446f-b843-cf0dcee45bf5",
  "title": "S1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.588Z] INFO: Session created
  Context: {
  "sessionId": "8fdb3361-a2a6-4c2a-812c-fed07f4a1421",
  "title": "S2",
  "mode": "shannon"
}
[2025-11-24T20:07:12.588Z] INFO: Session created
  Context: {
  "sessionId": "f15b87e6-083a-466a-8946-c37b25c05529",
  "title": "S3",
  "mode": "mathematics"
}
[2025-11-24T20:07:12.588Z] INFO: Session completed
  Context: {
  "sessionId": "2dba5315-edea-446f-b843-cf0dcee45bf5",
  "title": "S1",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.588Z] INFO: Session mode switched
  Context: {
  "sessionId": "8fdb3361-a2a6-4c2a-812c-fed07f4a1421",
  "oldMode": "shannon",
  "newMode": "physics",
  "reason": "Switch mode"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Concurrent Operations Across Different Sessions > should handle concurrent session creation
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "3f6b1a65-dbcb-40a1-8d27-d73526e96dea",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "6af30727-1322-49a2-82a9-3f22b0fa6361",
  "title": "Session 2",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "a863d832-2701-45bb-a502-dc6f03f01501",
  "title": "Session 3",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "6a681ba3-4e2c-435e-81d5-644e25e4020d",
  "title": "Session 4",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "e28c1796-1814-440b-a240-272d19fa6e20",
  "title": "Session 5",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "02df8565-cabb-4053-9933-a04aaf534619",
  "title": "Session 6",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "f70b95ec-9a03-43b1-a5a7-81f9f4456502",
  "title": "Session 7",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "cebd7f72-1297-4a95-b3ad-d4bff8c0f660",
  "title": "Session 8",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "dfdf0500-f083-498e-a587-4a76bfba683c",
  "title": "Session 9",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "c62da64d-f31b-4c56-9272-85836dbb0600",
  "title": "Session 10",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "8da8f602-e813-41d4-b905-efa4b0f1f133",
  "title": "Session 11",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "7c89573e-cebf-4b2b-aeb6-070377112bf8",
  "title": "Session 12",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "d1f32d50-4f70-472e-81d1-1b6588c0093f",
  "title": "Session 13",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "7d1c9c91-e022-4bfb-beda-aa8858218a9d",
  "title": "Session 14",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "29c93663-f536-4953-a4c2-dca1955fad25",
  "title": "Session 15",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "f3148ca0-2262-4315-99a6-d629b046eb8a",
  "title": "Session 16",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "c5ef97ba-3827-4877-8cf5-0591094c64d7",
  "title": "Session 17",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "1ef24b3d-9a45-42ac-b86d-b87141af1e1f",
  "title": "Session 18",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "690033ec-c2f1-44fb-a0ad-c5b420c356d8",
  "title": "Session 19",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "6c154db9-e4fb-430e-aa6c-22bea8a63811",
  "title": "Session 20",
  "mode": "sequential"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Concurrent Operations Across Different Sessions > should handle concurrent summary generation for different sessions
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "064da047-ca69-4bc7-96d3-af6ea2c8d2b0",
  "title": "S1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "824bf2a7-c76a-4ca5-876a-370488d2644a",
  "title": "S2",
  "mode": "sequential"
}
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "3e02fe10-8b27-46fc-86d1-c3ecc4b5177d",
  "title": "S3",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session completed
  Context: {
  "sessionId": "064da047-ca69-4bc7-96d3-af6ea2c8d2b0",
  "title": "S1",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.590Z] INFO: Session completed
  Context: {
  "sessionId": "824bf2a7-c76a-4ca5-876a-370488d2644a",
  "title": "S2",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.590Z] INFO: Session completed
  Context: {
  "sessionId": "3e02fe10-8b27-46fc-86d1-c3ecc4b5177d",
  "title": "S3",
  "totalThoughts": 1
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Resource Management with Many Sessions > should handle creation of many sessions
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "a6fc4967-23a1-43bf-9074-473dbfd8d19a",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "33179e62-3e98-4608-b413-75f3260a14be",
  "title": "Session 2",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "772336ec-69dd-4c9b-b262-b965c9e7b10e",
  "title": "Session 3",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "a0d1edbb-67e1-4877-871a-5bced5348133",
  "title": "Session 4",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "b950a2c2-fc7c-4473-ae81-e24ee52ec50e",
  "title": "Session 5",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "100c8b3e-d913-4395-9729-c2313a76567a",
  "title": "Session 6",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "bf596934-2784-4e1c-bc72-9c5d0aae849c",
  "title": "Session 7",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "ddc2f8cb-4cd1-4e15-81f1-d574fb31b782",
  "title": "Session 8",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "467093cb-32d4-48b2-9b8d-512aa055d6bb",
  "title": "Session 9",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "5646a17e-cee8-4385-8aaa-211566e0a293",
  "title": "Session 10",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "a2551f31-e4a7-4a8f-9a95-b49a07cf43e7",
  "title": "Session 11",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "59e04c81-b3fe-47cc-9d64-9c44c7069d08",
  "title": "Session 12",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "94a071ef-3544-422e-a80f-08b34e8b8ea9",
  "title": "Session 13",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "7ebaf658-cc5c-435b-bb36-520242e62aac",
  "title": "Session 14",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "7758ce28-0729-49bc-875e-844297661d1b",
  "title": "Session 15",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "964e7d96-fa7d-4c64-90e6-06158dcbb2b9",
  "title": "Session 16",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "381b70a6-b33b-4c27-91ab-7e85b99aa4e0",
  "title": "Session 17",
  "mode": "sequential"
}
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "858564ad-f8bd-4c34-891c-8b8960389cc6",
  "title": "Session 18",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "1fd00ab0-4703-48d6-bda9-46275103314d",
  "title": "Session 19",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "bebeb4b0-726d-4b78-abd2-848061863e00",
  "title": "Session 20",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "1ae5a089-5894-4639-9238-e1f59fc6a87b",
  "title": "Session 21",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "78645f98-bded-4b97-92f6-0dc7bc6554b6",
  "title": "Session 22",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "6047370c-ea2f-4579-aa6f-2773549ffee9",
  "title": "Session 23",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "acf00826-2ac6-428f-a13f-021e3a8c4a78",
  "title": "Session 24",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "52e5339e-6f34-49db-a024-f417a6e61ed1",
  "title": "Session 25",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "d312fa66-2db0-4b4b-a65f-f14d618d18f8",
  "title": "Session 26",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "f965099a-8979-4aae-8a04-94358295674e",
  "title": "Session 27",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "66bfda5b-fdb5-4c3e-a030-70ab976e5212",
  "title": "Session 28",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "8036cfae-1d8f-472c-85e6-ecdaca090055",
  "title": "Session 29",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "6ef64f9a-5543-472a-8701-76e26ca54455",
  "title": "Session 30",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "21237c1c-6afe-446d-a84d-d5917ffc1848",
  "title": "Session 31",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "3366f45c-ae2a-4de1-b547-320a2b8ba222",
  "title": "Session 32",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "883c2abf-f436-42a5-b868-e04a1108ca68",
  "title": "Session 33",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "68088013-82d2-4192-b7ca-06fccbab6399",
  "title": "Session 34",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "ca076ade-21f2-4ddb-b5d5-c587d450db73",
  "title": "Session 35",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "cea5c001-d3b1-4a0c-881f-4eece95a837d",
  "title": "Session 36",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "52685744-26e2-4228-81da-1499034e1643",
  "title": "Session 37",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "b94ec10e-39ac-4cbb-8165-fca416f2c3bb",
  "title": "Session 38",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "7c23c486-e433-44ef-8ab3-12070cec7b58",
  "title": "Session 39",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "c65b2b09-31f1-415b-9ec4-d9dbfb2ddc2b",
  "title": "Session 40",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "e0887ee6-6d82-4918-8889-9e19d64632e1",
  "title": "Session 41",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "99b6a752-774c-4031-8854-ab44b5fa2fa9",
  "title": "Session 42",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "c24cb3f8-52d3-46bc-acd6-f69d9ce632b5",
  "title": "Session 43",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "db4f8827-f898-456a-91f6-e526edabccab",
  "title": "Session 44",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "da64b52f-2f28-428c-9751-efb5607df7fb",
  "title": "Session 45",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "26d68575-d236-439c-a0f1-8b6ebb36a03f",
  "title": "Session 46",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "9c74b20f-31a8-4a04-a3a1-7db7261a8220",
  "title": "Session 47",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "84c8b1ac-96fb-4c07-8a2f-46368a41d672",
  "title": "Session 48",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "8eb812d4-2a87-4c9d-8625-87430671ec8c",
  "title": "Session 49",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "f5c4f822-79ce-4c99-9cfe-7a522781a13f",
  "title": "Session 50",
  "mode": "sequential"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Resource Management with Many Sessions > should retrieve sessions efficiently with many active sessions
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "212048dc-273a-4f5d-a670-e17fe5a1c1c4",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "a32ec5a2-5cb4-4205-b985-7d3fc1dca352",
  "title": "Session 2",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "62ed7e15-0f23-4087-82ad-cc436c1baf13",
  "title": "Session 3",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "32df1180-467c-4aa1-934c-1e02415db58a",
  "title": "Session 4",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "c09a393b-8bad-495f-ae76-ba391307764a",
  "title": "Session 5",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "560316a9-ed1c-40a0-b28b-cdd376d334a1",
  "title": "Session 6",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "214d6275-7ae3-4870-ad06-fdfc89fd8d1a",
  "title": "Session 7",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "8694d04f-b133-4e3b-9716-f6981cfef9e5",
  "title": "Session 8",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "e7948050-f4f6-4b6b-ad37-5a59ed8bbe3b",
  "title": "Session 9",
  "mode": "sequential"
}
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "256d0681-fa44-41d5-81d8-c099a6e54d77",
  "title": "Session 10",
  "mode": "sequential"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Resource Management with Many Sessions > should list all sessions when many exist
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "cad048ac-d7c7-491c-981d-6ef5cd45f79c",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "ab7a3609-abe9-41d7-939e-f1fa8681a261",
  "title": "Session 2",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "905dbd64-fa77-4f92-ab81-369bee60678a",
  "title": "Session 3",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "d10ae6ea-3545-4b8d-bddd-c0c949d77729",
  "title": "Session 4",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "81f2b0d1-5108-4050-a959-316cf4aaea68",
  "title": "Session 5",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "cddb8aa6-762a-4f71-b2bd-d8405ee1926c",
  "title": "Session 6",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "d6c5a989-b1a9-4e1c-b17c-ddc79c66d62b",
  "title": "Session 7",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "844eb45e-e83d-481d-b75e-f4312172f595",
  "title": "Session 8",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "e70e19a8-2aa4-4d9d-ab97-cc394344d62d",
  "title": "Session 9",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "e51707a3-33af-4374-8498-5dca6c557182",
  "title": "Session 10",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "4fc37c87-8a27-470a-9858-6b9e7f3bd30f",
  "title": "Session 11",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "0649c414-1004-4622-b941-96eaf69a5d59",
  "title": "Session 12",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "115ef91b-7c05-4c22-99da-0e6a59f98df5",
  "title": "Session 13",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "7b33005f-8ba1-4573-9034-3afee2507816",
  "title": "Session 14",
  "mode": "sequential"
}
[2025-11-24T20:07:12.592Z] INFO: Session created
  Context: {
  "sessionId": "fc8d6c4a-0919-44e8-88a0-7f9ddcac7deb",
  "title": "Session 15",
  "mode": "sequential"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Session State Consistency > should maintain consistent thought count across concurrent additions
[2025-11-24T20:07:12.593Z] INFO: Session created
  Context: {
  "sessionId": "bd9a633d-b9b0-4bcf-9e96-aacab077fe21",
  "title": "Consistency Test",
  "mode": "sequential"
}
[2025-11-24T20:07:12.593Z] INFO: Session completed
  Context: {
  "sessionId": "bd9a633d-b9b0-4bcf-9e96-aacab077fe21",
  "title": "Consistency Test",
  "totalThoughts": 10
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Session State Consistency > should maintain correct status after concurrent operations
[2025-11-24T20:07:12.593Z] INFO: Session created
  Context: {
  "sessionId": "6bde27e5-f9a1-4bd5-b3a9-008721818535",
  "title": "Status Test",
  "mode": "sequential"
}
[2025-11-24T20:07:12.593Z] INFO: Session completed
  Context: {
  "sessionId": "6bde27e5-f9a1-4bd5-b3a9-008721818535",
  "title": "Status Test",
  "totalThoughts": 1
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Session State Consistency > should handle concurrent thought additions with proper sequencing
[2025-11-24T20:07:12.593Z] INFO: Session created
  Context: {
  "sessionId": "c2d32254-29f4-4d5c-9937-6ce9be48e657",
  "title": "Sequence Test",
  "mode": "sequential"
}

stdout | tests/integration/multi-session.test.ts > Multi-Session and Concurrent Scenarios > Error Handling in Concurrent Scenarios > should handle mixed success/failure scenarios gracefully
[2025-11-24T20:07:12.594Z] INFO: Session created
  Context: {
  "sessionId": "14a70e2d-a02c-41df-8c70-d8f59f2c12f7",
  "title": "Mixed Test",
  "mode": "sequential"
}

 ✓ tests/integration/multi-session.test.ts  (18 tests) 18ms
stderr | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Invalid Session Operations > should throw error for non-existent session ID
[2025-11-24T20:07:12.579Z] ERROR: Session not found
  Context: {
  "sessionId": "00000000-0000-4000-8000-000000000000"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Invalid Session Operations > should handle session deletion idempotently
[2025-11-24T20:07:12.582Z] INFO: Session created
  Context: {
  "sessionId": "df925f35-b927-4d55-b457-d81c73709984",
  "title": "Test",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.582Z] INFO: Session deleted
  Context: {
  "sessionId": "df925f35-b927-4d55-b457-d81c73709984",
  "title": "Test",
  "thoughtCount": 0
}

stderr | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Invalid Session Operations > should handle session deletion idempotently
[2025-11-24T20:07:12.582Z] WARN: Attempted to delete non-existent session from memory
  Context: {
  "sessionId": "df925f35-b927-4d55-b457-d81c73709984"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Validation Errors > should accept thoughts with missing fields (lenient validation)
[2025-11-24T20:07:12.583Z] INFO: Session created
  Context: {
  "sessionId": "9b4c9ee1-7585-4e83-ad93-c85be9277d29",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.583Z] INFO: Session completed
  Context: {
  "sessionId": "9b4c9ee1-7585-4e83-ad93-c85be9277d29",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Validation Errors > should accept invalid uncertainty values (lenient validation)
[2025-11-24T20:07:12.584Z] INFO: Session created
  Context: {
  "sessionId": "902490a9-4c5c-4877-be39-11c2172252f1",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.584Z] INFO: Session completed
  Context: {
  "sessionId": "902490a9-4c5c-4877-be39-11c2172252f1",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Validation Errors > should accept negative thought numbers (lenient validation)
[2025-11-24T20:07:12.584Z] INFO: Session created
  Context: {
  "sessionId": "81022327-51cb-4877-9ea8-30daf864dc8b",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.585Z] INFO: Session completed
  Context: {
  "sessionId": "81022327-51cb-4877-9ea8-30daf864dc8b",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Validation Errors > should accept zero thought numbers (lenient validation)
[2025-11-24T20:07:12.585Z] INFO: Session created
  Context: {
  "sessionId": "a33d9cd6-0ee2-43ad-bf88-5665c5e4de4d",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.585Z] INFO: Session completed
  Context: {
  "sessionId": "a33d9cd6-0ee2-43ad-bf88-5665c5e4de4d",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Validation Errors > should accept invalid mode values (lenient validation)
[2025-11-24T20:07:12.586Z] INFO: Session created
  Context: {
  "sessionId": "8535fa48-7cf7-4458-a3e2-a2f2ae40eb50",
  "title": "Untitled Session",
  "mode": "invalid_mode"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Validation Errors > should accept invalid Shannon stage (lenient validation)
[2025-11-24T20:07:12.586Z] INFO: Session created
  Context: {
  "sessionId": "705da316-4516-4855-9e80-023470788e10",
  "title": "Untitled Session",
  "mode": "shannon"
}
[2025-11-24T20:07:12.586Z] INFO: Session completed
  Context: {
  "sessionId": "705da316-4516-4855-9e80-023470788e10",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Boundary Conditions > should handle uncertainty = 0 (perfect certainty)
[2025-11-24T20:07:12.587Z] INFO: Session created
  Context: {
  "sessionId": "3e92c75d-7c04-4aac-b794-6b1c5cf4cc51",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.587Z] INFO: Session completed
  Context: {
  "sessionId": "3e92c75d-7c04-4aac-b794-6b1c5cf4cc51",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Boundary Conditions > should handle uncertainty = 1 (complete uncertainty)
[2025-11-24T20:07:12.587Z] INFO: Session created
  Context: {
  "sessionId": "9215d490-6f5c-4458-8cd9-e9d498608eab",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.587Z] INFO: Session completed
  Context: {
  "sessionId": "9215d490-6f5c-4458-8cd9-e9d498608eab",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Boundary Conditions > should handle very large thoughtNumber
[2025-11-24T20:07:12.587Z] INFO: Session created
  Context: {
  "sessionId": "11eb8264-75ed-476a-829f-57f9030e013b",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.588Z] INFO: Session completed
  Context: {
  "sessionId": "11eb8264-75ed-476a-829f-57f9030e013b",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Boundary Conditions > should handle totalThoughts = thoughtNumber (single thought)
[2025-11-24T20:07:12.588Z] INFO: Session created
  Context: {
  "sessionId": "fbae005d-01ec-4d7b-829b-914461013492",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.588Z] INFO: Session completed
  Context: {
  "sessionId": "fbae005d-01ec-4d7b-829b-914461013492",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Empty Data > should handle empty thought content
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "d90e685d-9b7b-4c85-a048-d55dfd7d2e1c",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.589Z] INFO: Session completed
  Context: {
  "sessionId": "d90e685d-9b7b-4c85-a048-d55dfd7d2e1c",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Empty Data > should handle empty session title with default
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "1a90e573-003b-47ac-844e-68db1f6e6e57",
  "title": "Untitled Session",
  "mode": "hybrid"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Empty Data > should handle empty arrays for optional fields
[2025-11-24T20:07:12.589Z] INFO: Session created
  Context: {
  "sessionId": "ab18d926-a5bd-4b15-b5eb-c24218ca81cf",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.589Z] INFO: Session completed
  Context: {
  "sessionId": "ab18d926-a5bd-4b15-b5eb-c24218ca81cf",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Empty Data > should handle session with no thoughts
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "50d3aa85-6c96-47b3-b7cb-f30ad52a0bf5",
  "title": "Untitled Session",
  "mode": "hybrid"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Special Characters > should handle Unicode characters in thought content
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "44aaea19-7eff-4e91-9d7e-99036a46f44e",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.590Z] INFO: Session completed
  Context: {
  "sessionId": "44aaea19-7eff-4e91-9d7e-99036a46f44e",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Special Characters > should handle special characters in session title
[2025-11-24T20:07:12.590Z] INFO: Session created
  Context: {
  "sessionId": "319a12e8-4840-486e-aa2e-731edc487314",
  "title": "<script>alert(\"xss\")</script>",
  "mode": "hybrid"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Special Characters > should handle LaTeX with special characters
[2025-11-24T20:07:12.591Z] INFO: Session created
  Context: {
  "sessionId": "4d1e63cc-dee9-4859-a034-3d586bd2014d",
  "title": "Untitled Session",
  "mode": "mathematics"
}
[2025-11-24T20:07:12.591Z] INFO: Session completed
  Context: {
  "sessionId": "4d1e63cc-dee9-4859-a034-3d586bd2014d",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Special Characters > should handle newlines and tabs in thought content
[2025-11-24T20:07:12.593Z] INFO: Session created
  Context: {
  "sessionId": "6fe32250-29b6-442c-81e3-2b5863703d0a",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.593Z] INFO: Session completed
  Context: {
  "sessionId": "6fe32250-29b6-442c-81e3-2b5863703d0a",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Large Data > should handle very long thought content
[2025-11-24T20:07:12.594Z] INFO: Session created
  Context: {
  "sessionId": "c5f70dc9-f443-47c1-b15d-2f0925227a18",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.594Z] INFO: Session completed
  Context: {
  "sessionId": "c5f70dc9-f443-47c1-b15d-2f0925227a18",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Large Data > should handle sessions with many thoughts
[2025-11-24T20:07:12.595Z] INFO: Session created
  Context: {
  "sessionId": "3bae5bdd-2e70-4387-80dc-06aad7b1f216",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.595Z] INFO: Session completed
  Context: {
  "sessionId": "3bae5bdd-2e70-4387-80dc-06aad7b1f216",
  "title": "Untitled Session",
  "totalThoughts": 100
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Edge Cases - Large Data > should handle large dependency arrays
[2025-11-24T20:07:12.596Z] INFO: Session created
  Context: {
  "sessionId": "eb43bf9b-6d89-4ca8-b1be-499956c20c3c",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.596Z] INFO: Session completed
  Context: {
  "sessionId": "eb43bf9b-6d89-4ca8-b1be-499956c20c3c",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Error Recovery > should maintain session integrity even with lenient validation
[2025-11-24T20:07:12.596Z] INFO: Session created
  Context: {
  "sessionId": "3ce8ac60-4c62-439c-8f5b-95cfc14c9f87",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.596Z] INFO: Session completed
  Context: {
  "sessionId": "3ce8ac60-4c62-439c-8f5b-95cfc14c9f87",
  "title": "Untitled Session",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.596Z] INFO: Session completed
  Context: {
  "sessionId": "3ce8ac60-4c62-439c-8f5b-95cfc14c9f87",
  "title": "Untitled Session",
  "totalThoughts": 2
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Error Recovery > should allow mode switch even after adding invalid data
[2025-11-24T20:07:12.597Z] INFO: Session created
  Context: {
  "sessionId": "eca77993-cb86-4d84-92cb-d34232cfb067",
  "title": "Untitled Session",
  "mode": "sequential"
}
[2025-11-24T20:07:12.597Z] INFO: Session completed
  Context: {
  "sessionId": "eca77993-cb86-4d84-92cb-d34232cfb067",
  "title": "Untitled Session",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.597Z] INFO: Session mode switched
  Context: {
  "sessionId": "eca77993-cb86-4d84-92cb-d34232cfb067",
  "oldMode": "sequential",
  "newMode": "shannon"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Summary Generation Edge Cases > should generate summary for empty session
[2025-11-24T20:07:12.597Z] INFO: Session created
  Context: {
  "sessionId": "49be888f-64c2-4b0c-9fc5-6cb05e95fe40",
  "title": "Empty Session",
  "mode": "hybrid"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Summary Generation Edge Cases > should generate summary for single thought session
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "c4e83003-1641-4b5b-9f64-f974b4037d6e",
  "title": "Single Thought",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session completed
  Context: {
  "sessionId": "c4e83003-1641-4b5b-9f64-f974b4037d6e",
  "title": "Single Thought",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Summary Generation Edge Cases > should handle summary for session with very long thoughts
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "84ed767f-3ec3-4cf1-a857-9313c200ee88",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session completed
  Context: {
  "sessionId": "84ed767f-3ec3-4cf1-a857-9313c200ee88",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Concurrent Session Management > should handle rapid session creation
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "dd46e358-d21d-46e1-90a6-59817997b046",
  "title": "Session 0",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "e03a2e4a-320d-4f0b-bc10-86b56b28a860",
  "title": "Session 1",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "d41a53dd-595e-4f34-a2fa-be9175e1101b",
  "title": "Session 2",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "e18a3e0b-79b7-4cef-a7c0-bbf3ee4dab25",
  "title": "Session 3",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "917b57ec-4c7d-4e36-b88f-4be366273ccb",
  "title": "Session 4",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "64fb7143-33bd-4d49-954f-8e48d50821c8",
  "title": "Session 5",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "d740fdfd-1980-4160-88f0-870789505f51",
  "title": "Session 6",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "28a7ef11-3716-4f53-9a3e-08fd51b57dec",
  "title": "Session 7",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "3d4a6cc7-92e8-473b-bb41-abbdbbd53f25",
  "title": "Session 8",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.598Z] INFO: Session created
  Context: {
  "sessionId": "5c7a88be-6cfe-46fb-adad-97e3ef278fe9",
  "title": "Session 9",
  "mode": "hybrid"
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Concurrent Session Management > should handle concurrent thought additions to same session
[2025-11-24T20:07:12.599Z] INFO: Session created
  Context: {
  "sessionId": "cbc3217a-6669-4041-a864-a75a53906859",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.599Z] INFO: Session completed
  Context: {
  "sessionId": "cbc3217a-6669-4041-a864-a75a53906859",
  "title": "Untitled Session",
  "totalThoughts": 5
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Concurrent Session Management > should maintain independence of multiple sessions
[2025-11-24T20:07:12.599Z] INFO: Session created
  Context: {
  "sessionId": "c85248e9-2b82-417e-a7d0-4b684186c277",
  "title": "Session 1",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.599Z] INFO: Session created
  Context: {
  "sessionId": "aad9fe75-8e71-48b9-8961-51c3f8c657f7",
  "title": "Session 2",
  "mode": "hybrid"
}
[2025-11-24T20:07:12.599Z] INFO: Session completed
  Context: {
  "sessionId": "c85248e9-2b82-417e-a7d0-4b684186c277",
  "title": "Session 1",
  "totalThoughts": 1
}
[2025-11-24T20:07:12.599Z] INFO: Session completed
  Context: {
  "sessionId": "aad9fe75-8e71-48b9-8961-51c3f8c657f7",
  "title": "Session 2",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Mode-Specific Edge Cases > should handle mathematics mode with missing optional fields
[2025-11-24T20:07:12.600Z] INFO: Session created
  Context: {
  "sessionId": "aaf390de-9584-463b-b0be-765eb21fc959",
  "title": "Untitled Session",
  "mode": "mathematics"
}
[2025-11-24T20:07:12.600Z] INFO: Session completed
  Context: {
  "sessionId": "aaf390de-9584-463b-b0be-765eb21fc959",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Mode-Specific Edge Cases > should handle Shannon mode without explicit stage
[2025-11-24T20:07:12.600Z] INFO: Session created
  Context: {
  "sessionId": "e52f665c-855b-45bd-8fc4-347fba9ef301",
  "title": "Untitled Session",
  "mode": "shannon"
}
[2025-11-24T20:07:12.600Z] INFO: Session completed
  Context: {
  "sessionId": "e52f665c-855b-45bd-8fc4-347fba9ef301",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/integration/error-handling.test.ts > Error Handling and Edge Cases > Mode-Specific Edge Cases > should handle temporal mode with minimal event data
[2025-11-24T20:07:12.600Z] INFO: Session created
  Context: {
  "sessionId": "522f8c28-08e6-4c2c-b8f0-9af3e7740d40",
  "title": "Untitled Session",
  "mode": "temporal"
}
[2025-11-24T20:07:12.600Z] INFO: Session completed
  Context: {
  "sessionId": "522f8c28-08e6-4c2c-b8f0-9af3e7740d40",
  "title": "Untitled Session",
  "totalThoughts": 1
}

 ✓ tests/integration/error-handling.test.ts  (36 tests) 23ms
 ✓ tests/integration/mcp-protocol.test.ts  (43 tests) 33ms
stdout | tests/integration/mcp-protocol.test.ts > MCP Protocol Compliance > MCP Response Format Compliance > should return MCP-compliant response for successful operation
[2025-11-24T20:07:12.709Z] INFO: Session created
  Context: {
  "sessionId": "95222249-f120-4e4b-8627-32457fc254cc",
  "title": "Test Session",
  "mode": "sequential"
}

 ✓ tests/unit/temporal.test.ts  (19 tests) 16ms
 ✓ tests/unit/evidential.test.ts  (16 tests) 15ms
 ✓ tests/unit/gametheory.test.ts  (17 tests) 13ms
 ✓ tests/unit/recommendations.test.ts  (15 tests) 19ms
stdout | tests/unit/file-store.test.ts > FileSessionStore > initialization > should create necessary directories
[2025-11-24T20:07:13.907Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-206f6858-9199-4a89-a2b1-b3b180083568",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > initialization > should create necessary directories
[2025-11-24T20:07:13.910Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > initialization > should handle multiple initialization calls
[2025-11-24T20:07:13.915Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-50d9c47a-5345-414d-9326-c15153f665a0",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}
[2025-11-24T20:07:13.915Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > saveSession > should save a session to disk
[2025-11-24T20:07:13.920Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-beac8fcc-9fc6-435e-9bf7-d0654674fece",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > saveSession > should save a session to disk
[2025-11-24T20:07:13.929Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > saveSession > should save session with correct content
[2025-11-24T20:07:13.936Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-3a65d21e-76c5-494a-958a-c0cc7a15ed0b",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > saveSession > should save session with correct content
[2025-11-24T20:07:13.940Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > saveSession > should update metadata index
[2025-11-24T20:07:13.947Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-9688d9dd-673e-4d3e-8cb1-dd648efaebe0",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > saveSession > should update metadata index
[2025-11-24T20:07:13.950Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > saveSession > should overwrite existing session
[2025-11-24T20:07:13.957Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-94c0bcdc-ffed-4735-a3a7-47044b2f060a",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

 ✓ tests/unit/analogical.test.ts  (9 tests) 8ms
stdout | tests/unit/file-store.test.ts > FileSessionStore > saveSession > should overwrite existing session
[2025-11-24T20:07:13.962Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > loadSession > should load an existing session
[2025-11-24T20:07:13.969Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-f3db00a8-1e79-4cba-8c74-15606d9b54b9",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > loadSession > should load an existing session
[2025-11-24T20:07:13.979Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > loadSession > should return null for non-existent session
[2025-11-24T20:07:13.991Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-149a4ea6-e5dd-45ef-b6a9-ab2c6543b702",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}
[2025-11-24T20:07:13.991Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > loadSession > should preserve Date objects
[2025-11-24T20:07:13.996Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-9bc7c5c2-474f-4a25-b528-781dde9b43c8",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > loadSession > should preserve Date objects
[2025-11-24T20:07:13.999Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > loadSession > should preserve Map objects
[2025-11-24T20:07:14.005Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-8cd64791-eb50-4e63-8e85-7b7f36532f31",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > loadSession > should preserve Map objects
[2025-11-24T20:07:14.008Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > deleteSession > should delete an existing session
[2025-11-24T20:07:14.014Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-2c538f6b-f791-475c-84cc-957f73a73df9",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > deleteSession > should delete an existing session
[2025-11-24T20:07:14.018Z] INFO: Session deleted
  Context: {
  "sessionId": "0791d8b9-f5f8-4a69-a88c-879a99577132"
}
[2025-11-24T20:07:14.019Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > deleteSession > should return false for non-existent session
[2025-11-24T20:07:14.025Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-d2632966-3931-4dd0-b310-d3eb5869e7ae",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > deleteSession > should return false for non-existent session
[2025-11-24T20:07:14.026Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > deleteSession > should update metadata index after deletion
[2025-11-24T20:07:14.059Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-ee704d4c-cddf-4289-9a59-89858df56b18",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > deleteSession > should update metadata index after deletion
[2025-11-24T20:07:14.065Z] INFO: Session deleted
  Context: {
  "sessionId": "1c74780b-ae1c-46a0-96b6-eeae1736c043"
}
[2025-11-24T20:07:14.065Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > listSessions > should list all sessions
[2025-11-24T20:07:14.073Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-3e2d68de-19d7-4a95-8d7f-8a67b2ea4dae",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > listSessions > should list all sessions
[2025-11-24T20:07:14.110Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > listSessions > should return empty array when no sessions exist
[2025-11-24T20:07:14.121Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-d3e7caaa-843d-4597-8eb8-35095263d543",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}
[2025-11-24T20:07:14.122Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > listSessions > should include correct metadata fields
[2025-11-24T20:07:14.128Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-fccd1723-405d-41f1-ae88-9fa429153c56",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > listSessions > should include correct metadata fields
[2025-11-24T20:07:14.130Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > exists > should return true for existing session
[2025-11-24T20:07:14.137Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-d4b818be-885c-4ea6-9784-964981ae11fa",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > exists > should return true for existing session
[2025-11-24T20:07:14.139Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > exists > should return false for non-existent session
[2025-11-24T20:07:14.146Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-b64b09b9-3388-4684-b080-b96ea2f2449f",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}
[2025-11-24T20:07:14.146Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > getStats > should return storage statistics
[2025-11-24T20:07:14.150Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-05a3f67b-40eb-4e75-9e75-c01218784d3f",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > getStats > should return storage statistics
[2025-11-24T20:07:14.157Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > getStats > should calculate total thoughts correctly
[2025-11-24T20:07:14.165Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-a86a3dbe-d293-48d1-9cdb-077d2bd0ed20",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > getStats > should calculate total thoughts correctly
[2025-11-24T20:07:14.170Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > getStats > should identify storage health status
[2025-11-24T20:07:14.176Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-1f481c44-96d5-4de2-9e69-c3fdaed19f0e",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > getStats > should identify storage health status
[2025-11-24T20:07:14.177Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-1f481c44-96d5-4de2-9e69-c3fdaed19f0e",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 10,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > getStats > should identify storage health status
[2025-11-24T20:07:14.192Z] INFO: FileSessionStore closed
[2025-11-24T20:07:14.192Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > cleanup > should clean up old sessions
[2025-11-24T20:07:14.199Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-6885bdc9-dbda-4dd5-b958-86c1e1d3c169",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > cleanup > should clean up old sessions
[2025-11-24T20:07:14.204Z] INFO: Session deleted
  Context: {
  "sessionId": "9bccb191-b6a4-4d51-a02e-08a864004bd0"
}
[2025-11-24T20:07:14.204Z] INFO: Cleanup completed
  Context: {
  "cleanedCount": 1,
  "maxAgeMs": 604800000,
  "remaining": 1
}
[2025-11-24T20:07:14.204Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > cleanup > should return 0 when no sessions need cleanup
[2025-11-24T20:07:14.209Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-96c60455-07df-48f4-9011-7bcd44b3f81f",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > cleanup > should return 0 when no sessions need cleanup
[2025-11-24T20:07:14.236Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > concurrent operations > should handle concurrent saves
[2025-11-24T20:07:14.246Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-d4df4544-ab0f-47ea-92f7-bec63db462da",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > concurrent operations > should handle concurrent saves
[2025-11-24T20:07:14.255Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > concurrent operations > should handle concurrent reads
[2025-11-24T20:07:14.266Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-a950957f-1456-4344-9b45-3ca2a93b645d",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > concurrent operations > should handle concurrent reads
[2025-11-24T20:07:14.275Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > error handling > should handle invalid session data gracefully
[2025-11-24T20:07:14.313Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-e4caff7f-5b8d-48c4-b90e-7f19c1ec353f",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stderr | tests/unit/file-store.test.ts > FileSessionStore > error handling > should handle invalid session data gracefully
[2025-11-24T20:07:14.318Z] ERROR: Failed to load session
  Context: {
  "sessionId": "e6f78fdb-db49-4b23-a5b7-8beb16128269"
}
  Error: Unexpected token 'i', "invalid json {{{" is not valid JSON
  Stack: SyntaxError: Unexpected token 'i', "invalid json {{{" is not valid JSON
    at JSON.parse (<anonymous>)
    at FileSessionStore.loadSession (/home/user/deepthinking-mcp/src/session/storage/file-store.ts:124:27)
    at /home/user/deepthinking-mcp/tests/unit/file-store.test.ts:455:22
    at runTest (file:///home/user/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:781:11)
    at runSuite (file:///home/user/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///home/user/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:909:15)
    at runSuite (file:///home/user/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:909:15)
    at runFiles (file:///home/user/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:958:5)
    at startTests (file:///home/user/deepthinking-mcp/node_modules/@vitest/runner/dist/index.js:967:3)
    at file:///home/user/deepthinking-mcp/node_modules/vitest/dist/chunks/runtime-runBaseTests.oAvMKtQC.js:116:7

stdout | tests/unit/file-store.test.ts > FileSessionStore > error handling > should handle invalid session data gracefully
[2025-11-24T20:07:14.329Z] INFO: FileSessionStore closed

stdout | tests/unit/file-store.test.ts > FileSessionStore > error handling > should handle operations before initialization
[2025-11-24T20:07:14.338Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-ec44185c-6bfc-4f93-9a36-0089c98bec2f",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > error handling > should handle operations before initialization
[2025-11-24T20:07:14.339Z] INFO: FileSessionStore initialized
  Context: {
  "baseDir": "/tmp/deepthinking-test-ec44185c-6bfc-4f93-9a36-0089c98bec2f",
  "config": {
    "autoSave": true,
    "autoSaveDelay": 1000,
    "enableCompression": false,
    "maxSessions": 1000,
    "maxSessionAge": 2592000000,
    "enableEncryption": false,
    "serialization": {
      "prettyPrint": false,
      "includeMetadata": true
    }
  }
}

stdout | tests/unit/file-store.test.ts > FileSessionStore > error handling > should handle operations before initialization
[2025-11-24T20:07:14.341Z] INFO: FileSessionStore closed
[2025-11-24T20:07:14.341Z] INFO: FileSessionStore closed

 ✓ tests/unit/file-store.test.ts  (27 tests) 444ms
 ✓ tests/unit/types.test.ts  (14 tests) 9ms
 ❯ tests/taxonomy/taxonomy-system.test.ts  (37 tests | 12 failed) 73ms
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Lookup > should search by category
     → expected 0 to be greater than 0
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should query by difficulty
     → expected 0 to be greater than 0
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should query by keyword
     → expected 0 to be greater than 0
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should explore reasoning type
     → Cannot read properties of undefined (reading 'id')
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should find path between types
     → Cannot read properties of undefined (reading 'prerequisites')
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should recommend based on problem
     → expected 0 to be greater than 0
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Suggestion Engine > should suggest for problem characteristics
     → expected 0 to be greater than 0
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Suggestion Engine > should analyze session
     → expected undefined to be 1 // Object.is equality
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Adaptive Mode Selector > should select mode with best_match strategy
     → expected 0 to be greater than 0
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Adaptive Mode Selector > should select mode with multi_modal strategy
     → Cannot read properties of undefined (reading 'toLowerCase')
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Integration Tests > should work end-to-end: problem -> suggestion -> selection
     → expected 0 to be greater than 0
   ❯ tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Integration Tests > should handle session with multiple modes
     → expected undefined to be 4 // Object.is equality
 ❯ tests/integration/production-features.test.ts  (26 tests | 11 failed) 44ms
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Search System Integration > should index and search sessions by content
     → expected 0 to be greater than 0
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Search System Integration > should support faceted search
     → expected undefined not to be undefined
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Search System Integration > should provide autocomplete suggestions
     → expected 0 to be greater than 0
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Template System Integration > should track template usage statistics
     → actual value must be number or bigint, received "undefined"
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Cache System Integration > should report cache statistics
     → expected 50 to be close to 0.5, received difference is 49.5, but expected 0.005
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Backup and Restore Integration > should create backup of session
     → Cannot read properties of undefined (reading 'provider')
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Backup and Restore Integration > should list available backups
     → Cannot read properties of undefined (reading 'provider')
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Backup and Restore Integration > should restore session from backup
     → Cannot read properties of undefined (reading 'provider')
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > Session Comparison Integration > should calculate thought count similarity
     → expected undefined not to be undefined
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > End-to-End Feature Integration > should integrate search + templates + batch
     → expected +0 to be 2 // Object.is equality
   ❯ tests/integration/production-features.test.ts > Production Features Integration Tests > End-to-End Feature Integration > should integrate backup + comparison + cache
     → Cannot read properties of undefined (reading 'provider')
 ✓ tests/unit/ml/success-metrics.test.ts  (32 tests) 53ms
 ✓ tests/unit/ml/recommendation-engine.test.ts  (27 tests) 81ms
 ✓ tests/integration/session-workflow.test.ts  (7 tests) 11ms
stdout | tests/integration/session-workflow.test.ts > Session Workflow Integration > should complete full sequential thinking workflow
[2025-11-24T20:07:15.195Z] INFO: Session created
  Context: {
  "sessionId": "19254f22-b20f-46b9-b57b-f6ad0554e090",
  "title": "Solve Prime Factorization Problem",
  "mode": "sequential"
}
[2025-11-24T20:07:15.198Z] INFO: Session completed
  Context: {
  "sessionId": "19254f22-b20f-46b9-b57b-f6ad0554e090",
  "title": "Solve Prime Factorization Problem",
  "totalThoughts": 5
}

stdout | tests/integration/session-workflow.test.ts > Session Workflow Integration > should handle mathematics mode with validation
[2025-11-24T20:07:15.199Z] INFO: Session created
  Context: {
  "sessionId": "1d9e1b77-034a-4742-a114-781318ae565c",
  "title": "Prove Fundamental Theorem",
  "mode": "mathematics"
}
[2025-11-24T20:07:15.199Z] INFO: Session completed
  Context: {
  "sessionId": "1d9e1b77-034a-4742-a114-781318ae565c",
  "title": "Prove Fundamental Theorem",
  "totalThoughts": 3
}

stdout | tests/integration/session-workflow.test.ts > Session Workflow Integration > should handle mode switching mid-session
[2025-11-24T20:07:15.199Z] INFO: Session created
  Context: {
  "sessionId": "88d0efa4-d7be-4cd3-bbf8-3b9b12d214b4",
  "title": "Problem Solving Session",
  "mode": "sequential"
}
[2025-11-24T20:07:15.200Z] INFO: Session mode switched
  Context: {
  "sessionId": "88d0efa4-d7be-4cd3-bbf8-3b9b12d214b4",
  "oldMode": "sequential",
  "newMode": "shannon",
  "reason": "Need more structure"
}
[2025-11-24T20:07:15.200Z] INFO: Session completed
  Context: {
  "sessionId": "88d0efa4-d7be-4cd3-bbf8-3b9b12d214b4",
  "title": "Problem Solving Session",
  "totalThoughts": 3
}

stdout | tests/integration/session-workflow.test.ts > Session Workflow Integration > should track validation cache statistics
[2025-11-24T20:07:15.200Z] INFO: Session created
  Context: {
  "sessionId": "8033b40a-b271-4ce3-b652-588d2726c996",
  "title": "Cache Test Session",
  "mode": "sequential"
}
[2025-11-24T20:07:15.200Z] INFO: Session completed
  Context: {
  "sessionId": "8033b40a-b271-4ce3-b652-588d2726c996",
  "title": "Cache Test Session",
  "totalThoughts": 3
}

stdout | tests/integration/session-workflow.test.ts > Session Workflow Integration > should handle multiple concurrent sessions
[2025-11-24T20:07:15.202Z] INFO: Session created
  Context: {
  "sessionId": "ac0a95d1-ee4e-4178-b4ac-bd700360e60b",
  "title": "Session 1",
  "mode": "sequential"
}
[2025-11-24T20:07:15.202Z] INFO: Session created
  Context: {
  "sessionId": "ab94039b-0512-4c0e-9af7-77080943b13b",
  "title": "Session 2",
  "mode": "mathematics"
}
[2025-11-24T20:07:15.202Z] INFO: Session created
  Context: {
  "sessionId": "47bbf777-66db-4e6b-ae81-62ea5af9d2a1",
  "title": "Session 3",
  "mode": "shannon"
}
[2025-11-24T20:07:15.202Z] INFO: Session completed
  Context: {
  "sessionId": "ac0a95d1-ee4e-4178-b4ac-bd700360e60b",
  "title": "Session 1",
  "totalThoughts": 1
}
[2025-11-24T20:07:15.202Z] INFO: Session completed
  Context: {
  "sessionId": "ab94039b-0512-4c0e-9af7-77080943b13b",
  "title": "Session 2",
  "totalThoughts": 1
}
[2025-11-24T20:07:15.202Z] INFO: Session completed
  Context: {
  "sessionId": "47bbf777-66db-4e6b-ae81-62ea5af9d2a1",
  "title": "Session 3",
  "totalThoughts": 1
}

stdout | tests/integration/session-workflow.test.ts > Session Workflow Integration > should handle session deletion
[2025-11-24T20:07:15.203Z] INFO: Session created
  Context: {
  "sessionId": "676717a8-7dd6-4e31-99a7-a83c0ffda985",
  "title": "Temporary Session",
  "mode": "sequential"
}
[2025-11-24T20:07:15.203Z] INFO: Session completed
  Context: {
  "sessionId": "676717a8-7dd6-4e31-99a7-a83c0ffda985",
  "title": "Temporary Session",
  "totalThoughts": 1
}
[2025-11-24T20:07:15.203Z] INFO: Session deleted
  Context: {
  "sessionId": "676717a8-7dd6-4e31-99a7-a83c0ffda985",
  "title": "Temporary Session",
  "thoughtCount": 1
}

stdout | tests/integration/session-workflow.test.ts > Session Workflow Integration > should maintain metrics accuracy across workflow
[2025-11-24T20:07:15.204Z] INFO: Session created
  Context: {
  "sessionId": "29997b86-57e8-41c1-804c-e1c37445e294",
  "title": "Metrics Test",
  "mode": "sequential"
}
[2025-11-24T20:07:15.204Z] INFO: Session completed
  Context: {
  "sessionId": "29997b86-57e8-41c1-804c-e1c37445e294",
  "title": "Metrics Test",
  "totalThoughts": 5
}

 ❯ tests/export/latex-export.test.ts  (27 tests | 5 failed) 30ms
   ❯ tests/export/latex-export.test.ts > LaTeX Exporter > Document Structure > should export complete document
     → expected '\documentclass[11pt,letterpaper]{arti…' to contain 'Test thought'
   ❯ tests/export/latex-export.test.ts > LaTeX Exporter > Mathematics Mode Export > should export mathematical equations
     → expected '\documentclass[11pt,letterpaper]{arti…' to contain 'x^2 + y^2 = z^2'
   ❯ tests/export/latex-export.test.ts > LaTeX Exporter > Mathematics Mode Export > should handle inline math mode
     → expected '\documentclass[11pt,letterpaper]{arti…' to contain '$'
   ❯ tests/export/latex-export.test.ts > LaTeX Exporter > LaTeX-Mermaid Integration > should generate complete integrated document
     → expected '\documentclass[11pt]{article}\n\n\n% …' to contain 'Causal analysis'
   ❯ tests/export/latex-export.test.ts > LaTeX Exporter > Special Characters Escaping > should escape LaTeX special characters
     → expected '\documentclass[11pt,letterpaper]{arti…' to contain '\$'
 ✓ tests/unit/visual.test.ts  (13 tests) 38ms
 ✓ tests/unit/ml/pattern-recognition.test.ts  (20 tests) 87ms
 ✓ tests/unit/causal.test.ts  (10 tests) 8ms
 ✓ tests/unit/abductive.test.ts  (10 tests) 9ms
 ✓ tests/unit/counterfactual.test.ts  (8 tests) 7ms
 ✓ tests/integration/mcp-compliance.test.ts  (21 tests) 17ms
 ✓ tests/unit/bayesian.test.ts  (10 tests) 8ms
stdout | tests/benchmarks/validation-performance.test.ts > Validation Performance Benchmark > should show significant performance improvement for cache hits

📊 Validation Cache Benchmark: Testing cache performance

🔴 First validation (cache miss):
   Time: 0.8917ms
   Valid: true
   Confidence: 0.70

🟢 Second validation (cache hit):
   Time: 0.0488ms
   Valid: true
   Confidence: 0.70

📈 Performance Analysis:
   Cache miss time: 0.8917ms
   Cache hit time: 0.0488ms
   Speedup: 18.28x
   Hit rate: 50.0%

🎯 Result: EXCELLENT (≥10x)

stdout | tests/benchmarks/validation-performance.test.ts > Validation Performance Benchmark > should maintain O(1) lookup complexity regardless of cache size

📈 Complexity Analysis: Testing O(1) cache lookup
   Cache size 10: 0.0098ms per lookup
   Cache size 50: 0.0498ms per lookup
   Cache size 100: 0.0145ms per lookup

   Min: 0.0098ms, Max: 0.0498ms, Ratio: 5.10x
   Complexity: O(n) ❌

stdout | tests/benchmarks/validation-performance.test.ts > Validation Performance Benchmark > should handle high cache hit rates efficiently

📊 High-Volume Test: Simulating realistic usage patterns
   Running 100 validations (5 unique thoughts, repeated pattern)...

📈 Results:
   Total validations: 100
   Cache misses: 5 (avg 0.0789ms)
   Cache hits: 95 (avg 0.0246ms)
   Average speedup: 3.21x
   Hit rate: 95.0%
   Cache size: 5/1000

🎯 Overall Performance: GOOD

 ❯ tests/benchmarks/validation-performance.test.ts  (3 tests | 1 failed) 56ms
   ❯ tests/benchmarks/validation-performance.test.ts > Validation Performance Benchmark > should maintain O(1) lookup complexity regardless of cache size
     → expected 5.099134491464061 to be less than 4
 ✓ tests/unit/session-manager.test.ts  (16 tests) 18ms
stdout | tests/unit/session-manager.test.ts > SessionManager > createSession > should create a new session with default values
[2025-11-24T20:07:16.794Z] INFO: Session created
  Context: {
  "sessionId": "fe1b470f-50a5-489a-928f-7ae4b6fb41d7",
  "title": "Untitled Session",
  "mode": "hybrid"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > createSession > should create a session with custom options
[2025-11-24T20:07:16.797Z] INFO: Session created
  Context: {
  "sessionId": "1bd92945-baa2-47c7-9406-44319d2db00e",
  "title": "My Problem",
  "mode": "mathematics",
  "domain": "number_theory",
  "author": "Test User"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > createSession > should initialize metrics correctly
[2025-11-24T20:07:16.797Z] INFO: Session created
  Context: {
  "sessionId": "37c0bf98-0308-4f2d-a420-0dc3eb04c36f",
  "title": "Untitled Session",
  "mode": "hybrid"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > getSession > should retrieve an existing session
[2025-11-24T20:07:16.798Z] INFO: Session created
  Context: {
  "sessionId": "72c1b910-faa6-485d-87d0-739d3c01192f",
  "title": "Test Session",
  "mode": "hybrid"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > addThought > should add a sequential thought to session
[2025-11-24T20:07:16.799Z] INFO: Session created
  Context: {
  "sessionId": "e34c6fef-fe6f-4af6-9d4c-c8e2d8a7ba00",
  "title": "Untitled Session",
  "mode": "sequential"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > addThought > should mark session as complete when nextThoughtNeeded is false
[2025-11-24T20:07:16.799Z] INFO: Session created
  Context: {
  "sessionId": "48aa9a44-99d4-41da-82bb-6b680fac6837",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:16.800Z] INFO: Session completed
  Context: {
  "sessionId": "48aa9a44-99d4-41da-82bb-6b680fac6837",
  "title": "Untitled Session",
  "totalThoughts": 1
}

stdout | tests/unit/session-manager.test.ts > SessionManager > addThought > should track revisions in metrics
[2025-11-24T20:07:16.800Z] INFO: Session created
  Context: {
  "sessionId": "e0292bd7-0fcb-4d95-baf5-d5c399a120f8",
  "title": "Untitled Session",
  "mode": "hybrid"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > addThought > should calculate average uncertainty for Shannon thoughts
[2025-11-24T20:07:16.801Z] INFO: Session created
  Context: {
  "sessionId": "3988df68-1b9d-4d1a-9d52-4588cb215982",
  "title": "Untitled Session",
  "mode": "shannon"
}

stderr | tests/unit/session-manager.test.ts > SessionManager > addThought > should throw error for non-existent session
[2025-11-24T20:07:16.801Z] ERROR: Session not found
  Context: {
  "sessionId": "00000000-0000-4000-8000-000000000000"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > switchMode > should switch session mode
[2025-11-24T20:07:16.803Z] INFO: Session created
  Context: {
  "sessionId": "b37f809b-1818-430c-a00d-65411027fb2b",
  "title": "Untitled Session",
  "mode": "sequential"
}
[2025-11-24T20:07:16.803Z] INFO: Session mode switched
  Context: {
  "sessionId": "b37f809b-1818-430c-a00d-65411027fb2b",
  "oldMode": "sequential",
  "newMode": "shannon",
  "reason": "Need systematic approach"
}

stderr | tests/unit/session-manager.test.ts > SessionManager > switchMode > should throw error for non-existent session
[2025-11-24T20:07:16.803Z] ERROR: Session not found
  Context: {
  "sessionId": "00000000-0000-4000-8000-000000000000"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > listSessions > should list all sessions
[2025-11-24T20:07:16.804Z] INFO: Session created
  Context: {
  "sessionId": "54e06a66-7e7b-4f3d-b8e9-27c2c37d32a1",
  "title": "Session 1",
  "mode": "hybrid"
}
[2025-11-24T20:07:16.804Z] INFO: Session created
  Context: {
  "sessionId": "5f0aa9c5-e12f-42c4-9f87-9ff619d78d0f",
  "title": "Session 2",
  "mode": "hybrid"
}
[2025-11-24T20:07:16.804Z] INFO: Session created
  Context: {
  "sessionId": "fddd85f1-6b95-4a95-a768-a5af3765380c",
  "title": "Session 3",
  "mode": "hybrid"
}

stdout | tests/unit/session-manager.test.ts > SessionManager > deleteSession > should delete a session
[2025-11-24T20:07:16.809Z] INFO: Session created
  Context: {
  "sessionId": "594e6f31-eb04-4c5c-8925-fc5e4088f030",
  "title": "Untitled Session",
  "mode": "hybrid"
}
[2025-11-24T20:07:16.810Z] INFO: Session deleted
  Context: {
  "sessionId": "594e6f31-eb04-4c5c-8925-fc5e4088f030",
  "title": "Untitled Session",
  "thoughtCount": 0
}

stdout | tests/unit/session-manager.test.ts > SessionManager > generateSummary > should generate a summary of session
[2025-11-24T20:07:16.810Z] INFO: Session created
  Context: {
  "sessionId": "5432cf03-507f-4947-b29a-94abb4cc864f",
  "title": "Test Problem",
  "mode": "hybrid"
}
[2025-11-24T20:07:16.810Z] INFO: Session completed
  Context: {
  "sessionId": "5432cf03-507f-4947-b29a-94abb4cc864f",
  "title": "Test Problem",
  "totalThoughts": 1
}

 ✓ tests/unit/sanitization.test.ts  (26 tests) 10ms
 ✓ tests/unit/logger.test.ts  (11 tests) 8ms
 ✓ tests/unit/errors.test.ts  (13 tests) 11ms
 ✓ tests/benchmarks/metrics-performance.test.ts  (2 tests) 51ms
stdout | tests/benchmarks/metrics-performance.test.ts > Metrics Performance Benchmark > should show performance improvement with incremental calculation
[2025-11-24T20:07:16.878Z] INFO: Session created
  Context: {
  "sessionId": "b9f02881-bdf6-4641-96f2-dc7e43596b64",
  "title": "Performance Test",
  "mode": "sequential"
}

📊 Benchmark: Adding 1000 thoughts with uncertainty tracking
[2025-11-24T20:07:16.918Z] INFO: Session completed
  Context: {
  "sessionId": "b9f02881-bdf6-4641-96f2-dc7e43596b64",
  "title": "Performance Test",
  "totalThoughts": 1000
}
✅ Total time: 39.54ms
✅ Average time per thought: 0.0395ms
✅ Expected average uncertainty: 0.511790
✅ Actual average uncertainty: 0.511790
✅ Accuracy verified: PASS

🎯 Performance: EXCELLENT

stdout | tests/benchmarks/metrics-performance.test.ts > Metrics Performance Benchmark > should maintain O(1) complexity regardless of session size

📈 Complexity Analysis: Testing O(1) behavior
[2025-11-24T20:07:16.923Z] INFO: Session created
  Context: {
  "sessionId": "1d65c92f-ba82-4708-a64c-68db27643501",
  "title": "Test Session 100",
  "mode": "sequential"
}
[2025-11-24T20:07:16.923Z] INFO: Session completed
  Context: {
  "sessionId": "1d65c92f-ba82-4708-a64c-68db27643501",
  "title": "Test Session 100",
  "totalThoughts": 100
}
  Session size 100: 0.0056ms per thought
[2025-11-24T20:07:16.923Z] INFO: Session created
  Context: {
  "sessionId": "fbf82d30-a68b-4bf8-8cf1-78e8bffd0212",
  "title": "Test Session 500",
  "mode": "sequential"
}
[2025-11-24T20:07:16.924Z] INFO: Session completed
  Context: {
  "sessionId": "fbf82d30-a68b-4bf8-8cf1-78e8bffd0212",
  "title": "Test Session 500",
  "totalThoughts": 500
}
  Session size 500: 0.0022ms per thought
[2025-11-24T20:07:16.924Z] INFO: Session created
  Context: {
  "sessionId": "cea5fbc0-4f36-4e8c-aac9-07cc75c45880",
  "title": "Test Session 1000",
  "mode": "sequential"
}
[2025-11-24T20:07:16.927Z] INFO: Session completed
  Context: {
  "sessionId": "cea5fbc0-4f36-4e8c-aac9-07cc75c45880",
  "title": "Test Session 1000",
  "totalThoughts": 1000
}
  Session size 1000: 0.0039ms per thought

  Min: 0.0022ms, Max: 0.0056ms, Overall Ratio: 2.61x
  Ratio (500 vs 1000): 1.79x
  Complexity: O(1) ✅


⎯⎯⎯⎯⎯⎯ Failed Tests 29 ⎯⎯⎯⎯⎯⎯⎯

 FAIL  tests/benchmarks/validation-performance.test.ts > Validation Performance Benchmark > should maintain O(1) lookup complexity regardless of cache size
AssertionError: expected 5.099134491464061 to be less than 4
 ❯ tests/benchmarks/validation-performance.test.ts:173:19
    171| 
    172|     // If truly O(1), ratio should be close to 1 (allowing for system …
    173|     expect(ratio).toBeLessThan(4.0);
       |                   ^
    174|   });
    175| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[1/29]⎯

 FAIL  tests/export/latex-export.test.ts > LaTeX Exporter > Document Structure > should export complete document
AssertionError: expected '\documentclass[11pt,letterpaper]{arti…' to contain 'Test thought'

- Expected
+ Received

- Test thought
+ \documentclass[11pt,letterpaper]{article}
+
+ % Core packages
+ \usepackage[utf8]{inputenc}
+ \usepackage[T1]{fontenc}
+ \usepackage{amsmath}
+ \usepackage{amssymb}
+ \usepackage{amsthm}
+ \usepackage{graphicx}
+ \usepackage{xcolor}
+ \usepackage{listings}
+ \usepackage{geometry}
+ \usepackage{enumitem}
+ \usepackage{tikz}
+ \usepackage{booktabs}
+ \usepackage{longtable}
+ \usepackage{multirow}
+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}
+ \usepackage{minted}
+
+ % Color scheme setup
+ % Default color scheme
+ \definecolor{thoughtcolor}{RGB}{52,73,94}
+ \definecolor{metacolor}{RGB}{127,140,141}
+ \definecolor{uncertaintycolor}{RGB}{231,76,60}
+ \definecolor{mathcolor}{RGB}{46,134,193}
+ \definecolor{physicscolor}{RGB}{142,68,173}
+ \definecolor{codebackground}{RGB}{247,247,247}
+
+ % Theorem environments
+ \newtheorem{theorem}{Theorem}[section]
+ \newtheorem{lemma}[theorem]{Lemma}
+ \newtheorem{corollary}[theorem]{Corollary}
+ \newtheorem{definition}[theorem]{Definition}
+ \newtheorem{proposition}[theorem]{Proposition}
+
+ % Custom commands
+ \newcommand{\thoughtsection}[2]{%
+   \subsection{Thought #1: #2}%
+ }
+
+ \newcommand{\metadata}[2]{%
+   \textbf{#1:} \textit{#2}\\%
+ }
+
+ \newcommand{\uncertainty}[1]{%
+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%
+ }
+
+ % Custom preamble
+
+
+ % Document metadata setup
+ \usepackage{fancyhdr}
+ \pagestyle{fancy}
+ \fancyhead[L]{DeepThinking Session}
+ \fancyhead[R]{\today}
+ \fancyfoot[C]{\thepage}
+
+ % Hyperref should be last
+ \usepackage{hyperref}
+ \hypersetup{
+   colorlinks=true,
+   linkcolor=blue,
+   citecolor=blue,
+   urlcolor=blue,
+ }
+
+
+ \begin{document}
+
+ \title{Test Session}
+
+ \date{2025-11-24}
+ \maketitle
+
+ \section*{Session Metadata}
+ \begin{description}[leftmargin=3cm,style=nextline]
+   \item[Session ID] \texttt{test-session}
+   \item[Mode] \texttt{mathematics}
+   \item[Created] 2025-11-24
+   \item[Updated] 2025-11-24
+ \end{description}
+ \newpage
+
+
+ \tableofcontents
+ \newpage
+
+
+ \section{Reasoning Process}
+
+ \thoughtsection{1}{Thought}
+ \noindent 
+
+ \textit{Timestamp:} 2025-11-24
+
+
+
+ \end{document}

 ❯ tests/export/latex-export.test.ts:78:21
     76|       expect(latex).toContain('\\end{document}');
     77|       expect(latex).toContain('Test Session');
     78|       expect(latex).toContain('Test thought');
       |                     ^
     79|     });
     80| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[2/29]⎯

 FAIL  tests/export/latex-export.test.ts > LaTeX Exporter > Mathematics Mode Export > should export mathematical equations
AssertionError: expected '\documentclass[11pt,letterpaper]{arti…' to contain 'x^2 + y^2 = z^2'

- Expected
+ Received

- x^2 + y^2 = z^2
+ \documentclass[11pt,letterpaper]{article}
+
+ % Core packages
+ \usepackage[utf8]{inputenc}
+ \usepackage[T1]{fontenc}
+ \usepackage{amsmath}
+ \usepackage{amssymb}
+ \usepackage{amsthm}
+ \usepackage{graphicx}
+ \usepackage{xcolor}
+ \usepackage{listings}
+ \usepackage{geometry}
+ \usepackage{enumitem}
+ \usepackage{tikz}
+ \usepackage{booktabs}
+ \usepackage{longtable}
+ \usepackage{multirow}
+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}
+ \usepackage{minted}
+
+ % Color scheme setup
+ % Default color scheme
+ \definecolor{thoughtcolor}{RGB}{52,73,94}
+ \definecolor{metacolor}{RGB}{127,140,141}
+ \definecolor{uncertaintycolor}{RGB}{231,76,60}
+ \definecolor{mathcolor}{RGB}{46,134,193}
+ \definecolor{physicscolor}{RGB}{142,68,173}
+ \definecolor{codebackground}{RGB}{247,247,247}
+
+ % Theorem environments
+ \newtheorem{theorem}{Theorem}[section]
+ \newtheorem{lemma}[theorem]{Lemma}
+ \newtheorem{corollary}[theorem]{Corollary}
+ \newtheorem{definition}[theorem]{Definition}
+ \newtheorem{proposition}[theorem]{Proposition}
+
+ % Custom commands
+ \newcommand{\thoughtsection}[2]{%
+   \subsection{Thought #1: #2}%
+ }
+
+ \newcommand{\metadata}[2]{%
+   \textbf{#1:} \textit{#2}\\%
+ }
+
+ \newcommand{\uncertainty}[1]{%
+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%
+ }
+
+ % Custom preamble
+
+
+ % Document metadata setup
+ \usepackage{fancyhdr}
+ \pagestyle{fancy}
+ \fancyhead[L]{DeepThinking Session}
+ \fancyhead[R]{\today}
+ \fancyfoot[C]{\thepage}
+
+ % Hyperref should be last
+ \usepackage{hyperref}
+ \hypersetup{
+   colorlinks=true,
+   linkcolor=blue,
+   citecolor=blue,
+   urlcolor=blue,
+ }
+
+
+ \begin{document}
+
+ \title{Test Session}
+
+ \date{2025-11-24}
+ \maketitle
+
+ \section*{Session Metadata}
+ \begin{description}[leftmargin=3cm,style=nextline]
+   \item[Session ID] \texttt{test-session}
+   \item[Mode] \texttt{mathematics}
+   \item[Created] 2025-11-24
+   \item[Updated] 2025-11-24
+ \end{description}
+ \newpage
+
+
+ \tableofcontents
+ \newpage
+
+
+ \section{Reasoning Process}
+
+ \thoughtsection{1}{Thought}
+ \noindent 
+
+ \begin{proof}
+ \textbf{Strategy:} direct
+
+ \end{proof}
+
+
+
+ \end{document}

 ❯ tests/export/latex-export.test.ts:118:21
    116|       const latex = exporter.export(session);
    117| 
    118|       expect(latex).toContain('x^2 + y^2 = z^2');
       |                     ^
    119|       expect(latex).toContain('\\[') || expect(latex).toContain('$$');
    120|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[3/29]⎯

 FAIL  tests/export/latex-export.test.ts > LaTeX Exporter > Mathematics Mode Export > should handle inline math mode
AssertionError: expected '\documentclass[11pt,letterpaper]{arti…' to contain '$'

- Expected
+ Received

- $
+ \documentclass[11pt,letterpaper]{article}
+
+ % Core packages
+ \usepackage[utf8]{inputenc}
+ \usepackage[T1]{fontenc}
+ \usepackage{amsmath}
+ \usepackage{amssymb}
+ \usepackage{amsthm}
+ \usepackage{graphicx}
+ \usepackage{xcolor}
+ \usepackage{listings}
+ \usepackage{geometry}
+ \usepackage{enumitem}
+ \usepackage{tikz}
+ \usepackage{booktabs}
+ \usepackage{longtable}
+ \usepackage{multirow}
+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}
+ \usepackage{minted}
+
+ % Color scheme setup
+ % Default color scheme
+ \definecolor{thoughtcolor}{RGB}{52,73,94}
+ \definecolor{metacolor}{RGB}{127,140,141}
+ \definecolor{uncertaintycolor}{RGB}{231,76,60}
+ \definecolor{mathcolor}{RGB}{46,134,193}
+ \definecolor{physicscolor}{RGB}{142,68,173}
+ \definecolor{codebackground}{RGB}{247,247,247}
+
+ % Theorem environments
+ \newtheorem{theorem}{Theorem}[section]
+ \newtheorem{lemma}[theorem]{Lemma}
+ \newtheorem{corollary}[theorem]{Corollary}
+ \newtheorem{definition}[theorem]{Definition}
+ \newtheorem{proposition}[theorem]{Proposition}
+
+ % Custom commands
+ \newcommand{\thoughtsection}[2]{%
+   \subsection{Thought #1: #2}%
+ }
+
+ \newcommand{\metadata}[2]{%
+   \textbf{#1:} \textit{#2}\\%
+ }
+
+ \newcommand{\uncertainty}[1]{%
+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%
+ }
+
+ % Custom preamble
+
+
+ % Document metadata setup
+ \usepackage{fancyhdr}
+ \pagestyle{fancy}
+ \fancyhead[L]{DeepThinking Session}
+ \fancyhead[R]{\today}
+ \fancyfoot[C]{\thepage}
+
+ % Hyperref should be last
+ \usepackage{hyperref}
+ \hypersetup{
+   colorlinks=true,
+   linkcolor=blue,
+   citecolor=blue,
+   urlcolor=blue,
+ }
+
+
+ \begin{document}
+
+ \title{Test Session}
+
+ \date{2025-11-24}
+ \maketitle
+
+ \section*{Session Metadata}
+ \begin{description}[leftmargin=3cm,style=nextline]
+   \item[Session ID] \texttt{test-session}
+   \item[Mode] \texttt{mathematics}
+   \item[Created] 2025-11-24
+   \item[Updated] 2025-11-24
+ \end{description}
+ \newpage
+
+
+ \tableofcontents
+ \newpage
+
+
+ \section{Reasoning Process}
+
+ \thoughtsection{1}{Thought}
+ \noindent 
+
+ \begin{proof}
+ \textbf{Strategy:} direct
+
+ \end{proof}
+
+
+
+ \end{document}

 ❯ tests/export/latex-export.test.ts:137:21
    135|       const latex = exporter.export(session);
    136| 
    137|       expect(latex).toContain('$') || expect(latex).toContain('\\(');
       |                     ^
    138|     });
    139| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[4/29]⎯

 FAIL  tests/export/latex-export.test.ts > LaTeX Exporter > LaTeX-Mermaid Integration > should generate complete integrated document
AssertionError: expected '\documentclass[11pt]{article}\n\n\n% …' to contain 'Causal analysis'

- Expected
+ Received

- Causal analysis
+ \documentclass[11pt]{article}
+
+
+ % Mermaid code display
+ \usepackage{listings}
+ \usepackage{xcolor}
+
+ \lstdefinelanguage{mermaid}{
+   keywords={graph, subgraph, flowchart, sequenceDiagram, classDiagram, stateDiagram, gantt, pie},
+   keywordstyle=\color{blue}\bfseries,
+   sensitive=true,
+   comment=[l]{\%\%},
+   commentstyle=\color{gray}\itshape,
+   stringstyle=\color{red},
+   morestring=[b]",
+   morestring=[b]'
+ }
+
+ \lstset{
+   language=mermaid,
+   basicstyle=\small\ttfamily,
+   breaklines=true,
+   frame=single,
+   backgroundcolor=\color{gray!10}
+ }
+
+ \newenvironment{mermaidcode}{
+   \begin{lstlisting}[language=mermaid]
+ }{
+   \end{lstlisting}
+ }
+
+
+ \title{Test Session}
+ \author{DeepThinking MCP}
+ \date{\today}
+
+ \begin{document}
+ \maketitle
+ \tableofcontents
+ \newpage
+
+ \section{Reasoning Session}
+
+ \subsection{Thought 1}
+
+
+
+ \begin{mermaiddiagram}[h]
+ \begin{mermaidcode}
+ graph TB
+   NoData["No causal graph data"]
+
+ \end{mermaidcode}
+ \caption{Causal Graph}
+ \label{fig:causal-1}
+ \end{mermaiddiagram}
+
+
+ \end{document}

 ❯ tests/export/latex-export.test.ts:334:19
    332|       expect(doc).toContain('\\begin{document}');
    333|       expect(doc).toContain('\\end{document}');
    334|       expect(doc).toContain('Causal analysis');
       |                   ^
    335|     });
    336|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[5/29]⎯

 FAIL  tests/export/latex-export.test.ts > LaTeX Exporter > Special Characters Escaping > should escape LaTeX special characters
AssertionError: expected '\documentclass[11pt,letterpaper]{arti…' to contain '\$'

- Expected
+ Received

- \$
+ \documentclass[11pt,letterpaper]{article}
+
+ % Core packages
+ \usepackage[utf8]{inputenc}
+ \usepackage[T1]{fontenc}
+ \usepackage{amsmath}
+ \usepackage{amssymb}
+ \usepackage{amsthm}
+ \usepackage{graphicx}
+ \usepackage{xcolor}
+ \usepackage{listings}
+ \usepackage{geometry}
+ \usepackage{enumitem}
+ \usepackage{tikz}
+ \usepackage{booktabs}
+ \usepackage{longtable}
+ \usepackage{multirow}
+ \usetikzlibrary{shapes,arrows,positioning,graphs,calc}
+ \usepackage{minted}
+
+ % Color scheme setup
+ % Default color scheme
+ \definecolor{thoughtcolor}{RGB}{52,73,94}
+ \definecolor{metacolor}{RGB}{127,140,141}
+ \definecolor{uncertaintycolor}{RGB}{231,76,60}
+ \definecolor{mathcolor}{RGB}{46,134,193}
+ \definecolor{physicscolor}{RGB}{142,68,173}
+ \definecolor{codebackground}{RGB}{247,247,247}
+
+ % Theorem environments
+ \newtheorem{theorem}{Theorem}[section]
+ \newtheorem{lemma}[theorem]{Lemma}
+ \newtheorem{corollary}[theorem]{Corollary}
+ \newtheorem{definition}[theorem]{Definition}
+ \newtheorem{proposition}[theorem]{Proposition}
+
+ % Custom commands
+ \newcommand{\thoughtsection}[2]{%
+   \subsection{Thought #1: #2}%
+ }
+
+ \newcommand{\metadata}[2]{%
+   \textbf{#1:} \textit{#2}\\%
+ }
+
+ \newcommand{\uncertainty}[1]{%
+   \textcolor{uncertaintycolor}{[Uncertainty: #1]}%
+ }
+
+ % Custom preamble
+
+
+ % Document metadata setup
+ \usepackage{fancyhdr}
+ \pagestyle{fancy}
+ \fancyhead[L]{DeepThinking Session}
+ \fancyhead[R]{\today}
+ \fancyfoot[C]{\thepage}
+
+ % Hyperref should be last
+ \usepackage{hyperref}
+ \hypersetup{
+   colorlinks=true,
+   linkcolor=blue,
+   citecolor=blue,
+   urlcolor=blue,
+ }
+
+
+ \begin{document}
+
+ \title{Test Session}
+
+ \date{2025-11-24}
+ \maketitle
+
+ \section*{Session Metadata}
+ \begin{description}[leftmargin=3cm,style=nextline]
+   \item[Session ID] \texttt{test-session}
+   \item[Mode] \texttt{mathematics}
+   \item[Created] 2025-11-24
+   \item[Updated] 2025-11-24
+ \end{description}
+ \newpage
+
+
+ \tableofcontents
+ \newpage
+
+
+ \section{Reasoning Process}
+
+ \thoughtsection{1}{Thought}
+ \noindent 
+
+ \textit{Timestamp:} 2025-11-24
+
+
+
+ \end{document}

 ❯ tests/export/latex-export.test.ts:351:21
    349|       const latex = exporter.export(session);
    350| 
    351|       expect(latex).toContain('\\$') || expect(latex).toContain('\\tex…
       |                     ^
    352|       expect(latex).toContain('\\%');
    353|       expect(latex).toContain('\\&');

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[6/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Lookup > should search by category
AssertionError: expected 0 to be greater than 0
 ❯ tests/taxonomy/taxonomy-system.test.ts:79:30
     77|     it('should search by category', () => {
     78|       const results = searchReasoningTypes('deductive');
     79|       expect(results.length).toBeGreaterThan(0);
       |                              ^
     80|       expect(results.every(r => r.category === 'deductive')).toBe(true…
     81|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[7/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should query by difficulty
AssertionError: expected 0 to be greater than 0
 ❯ tests/taxonomy/taxonomy-system.test.ts:104:30
    102|     it('should query by difficulty', () => {
    103|       const results = navigator.query({ difficulties: ['easy'] });
    104|       expect(results.length).toBeGreaterThan(0);
       |                              ^
    105|       expect(results.every(r => r.type.difficulty === 'easy')).toBe(tr…
    106|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[8/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should query by keyword
AssertionError: expected 0 to be greater than 0
 ❯ tests/taxonomy/taxonomy-system.test.ts:110:30
    108|     it('should query by keyword', () => {
    109|       const results = navigator.query({ keywords: ['proof'] });
    110|       expect(results.length).toBeGreaterThan(0);
       |                              ^
    111|     });
    112| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[9/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should explore reasoning type
TypeError: Cannot read properties of undefined (reading 'id')
 ❯ tests/taxonomy/taxonomy-system.test.ts:124:27
    122|       const exploration = navigator.explore('deductive_modus_ponens');
    123|       expect(exploration).toBeDefined();
    124|       expect(exploration?.type.id).toBe('deductive_modus_ponens');
       |                           ^
    125|       expect(exploration?.related.length).toBeGreaterThanOrEqual(0);
    126|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[10/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should find path between types
TypeError: Cannot read properties of undefined (reading 'prerequisites')
 ❯ TaxonomyNavigator.findPath src/taxonomy/navigator.ts:405:38
    403| 
    404|       // Prerequisites
    405|       for (const prereqId of current.prerequisites) {
       |                                      ^
    406|         if (!visited.has(prereqId)) {
    407|           neighbors.push({ id: prereqId, relationship: 'prerequisite',…
 ❯ tests/taxonomy/taxonomy-system.test.ts:129:30

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[11/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Taxonomy Navigator > should recommend based on problem
AssertionError: expected 0 to be greater than 0
 ❯ tests/taxonomy/taxonomy-system.test.ts:136:38
    134|     it('should recommend based on problem', () => {
    135|       const recommendations = navigator.recommend('proving a mathemati…
    136|       expect(recommendations.length).toBeGreaterThan(0);
       |                                      ^
    137|     });
    138|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[12/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Suggestion Engine > should suggest for problem characteristics
AssertionError: expected 0 to be greater than 0
 ❯ tests/taxonomy/taxonomy-system.test.ts:163:34
    161|       });
    162| 
    163|       expect(suggestions.length).toBeGreaterThan(0);
       |                                  ^
    164|     });
    165| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[13/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Suggestion Engine > should analyze session
AssertionError: expected undefined to be 1 // Object.is equality

- Expected: 
1

+ Received: 
undefined

 ❯ tests/taxonomy/taxonomy-system.test.ts:180:38
    178|       const analysis = engine.analyzeSession(session);
    179|       expect(analysis).toBeDefined();
    180|       expect(analysis.totalThoughts).toBe(1);
       |                                      ^
    181|       expect(analysis.averageQualityMetrics).toBeDefined();
    182|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[14/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Adaptive Mode Selector > should select mode with best_match strategy
AssertionError: expected 0 to be greater than 0
 ❯ tests/taxonomy/taxonomy-system.test.ts:281:38
    279|       );
    280| 
    281|       expect(recommendations.length).toBeGreaterThan(0);
       |                                      ^
    282|     });
    283| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[15/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Adaptive Mode Selector > should select mode with multi_modal strategy
TypeError: Cannot read properties of undefined (reading 'toLowerCase')
 ❯ MultiModalAnalyzer.calculatePatternRelevance src/taxonomy/multi-modal-analyzer.ts:522:45
    520| 
    521|     // Check use case match
    522|     const lowerProblem = problemDescription.toLowerCase();
       |                                             ^
    523|     for (const useCase of pattern.useCases) {
    524|       if (lowerProblem.includes(useCase.toLowerCase())) {
 ❯ MultiModalAnalyzer.recommendPatterns src/taxonomy/multi-modal-analyzer.ts:490:30
 ❯ AdaptiveModeSelector.selectMultiModal src/taxonomy/adaptive-selector.ts:166:46
 ❯ AdaptiveModeSelector.selectMode src/taxonomy/adaptive-selector.ts:112:21
 ❯ tests/taxonomy/taxonomy-system.test.ts:285:40

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[16/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Integration Tests > should work end-to-end: problem -> suggestion -> selection
AssertionError: expected 0 to be greater than 0
 ❯ tests/taxonomy/taxonomy-system.test.ts:356:41
    354|       // Step 1: Get recommendations from taxonomy
    355|       const navRecommendations = navigator.recommend('proving mathemat…
    356|       expect(navRecommendations.length).toBeGreaterThan(0);
       |                                         ^
    357| 
    358|       // Step 2: Get suggestions from engine

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[17/29]⎯

 FAIL  tests/taxonomy/taxonomy-system.test.ts > Reasoning Taxonomy > Integration Tests > should handle session with multiple modes
AssertionError: expected undefined to be 4 // Object.is equality

- Expected: 
4

+ Received: 
undefined

 ❯ tests/taxonomy/taxonomy-system.test.ts:401:38
    399| 
    400|       const analysis = engine.analyzeSession(session);
    401|       expect(analysis.totalThoughts).toBe(4);
       |                                      ^
    402|       expect(analysis.uniqueModes).toBe(4);
    403|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[18/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Search System Integration > should index and search sessions by content
AssertionError: expected 0 to be greater than 0
 ❯ tests/integration/production-features.test.ts:62:39
     60| 
     61|       expect(results.sessions).toBeDefined();
     62|       expect(results.sessions.length).toBeGreaterThan(0);
       |                                       ^
     63|       expect(results.sessions[0].id).toBe('session-1');
     64|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[19/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Search System Integration > should support faceted search
AssertionError: expected undefined not to be undefined
 ❯ tests/integration/production-features.test.ts:90:30
     88|       });
     89| 
     90|       expect(results.facets).toBeDefined();
       |                              ^
     91|       expect(results.facets?.mode).toBeDefined();
     92|       expect(results.facets?.tags).toBeDefined();

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[20/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Search System Integration > should provide autocomplete suggestions
AssertionError: expected 0 to be greater than 0
 ❯ tests/integration/production-features.test.ts:99:34
     97| 
     98|       expect(suggestions).toBeDefined();
     99|       expect(suggestions.length).toBeGreaterThan(0);
       |                                  ^
    100|       expect(suggestions.some(s => s.toLowerCase().includes('rea'))).t…
    101|     });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[21/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Template System Integration > should track template usage statistics
TypeError: actual value must be number or bigint, received "undefined"
 ❯ tests/integration/production-features.test.ts:161:31
    159| 
    160|       expect(stats).toBeDefined();
    161|       expect(stats.timesUsed).toBeGreaterThanOrEqual(2);
       |                               ^
    162|     });
    163|   });

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[22/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Cache System Integration > should report cache statistics
AssertionError: expected 50 to be close to 0.5, received difference is 49.5, but expected 0.005
 ❯ tests/integration/production-features.test.ts:255:29
    253|       expect(stats.hits).toBe(1);
    254|       expect(stats.misses).toBe(1);
    255|       expect(stats.hitRate).toBeCloseTo(0.5, 2);
       |                             ^
    256|     });
    257| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[23/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Backup and Restore Integration > should create backup of session
TypeError: Cannot read properties of undefined (reading 'provider')
 ❯ BackupManager.create src/backup/backup-manager.ts:79:36
     77| 
     78|     // Register provider if not already registered
     79|     if (!this.providers.has(config.provider)) {
       |                                    ^
     80|       this.registerProvider(config.provider, providerOptions);
     81|     }
 ❯ BackupManager.backup src/backup/backup-manager.ts:181:17
 ❯ tests/integration/production-features.test.ts:281:44

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[24/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Backup and Restore Integration > should list available backups
TypeError: Cannot read properties of undefined (reading 'provider')
 ❯ BackupManager.create src/backup/backup-manager.ts:79:36
     77| 
     78|     // Register provider if not already registered
     79|     if (!this.providers.has(config.provider)) {
       |                                    ^
     80|       this.registerProvider(config.provider, providerOptions);
     81|     }
 ❯ BackupManager.backup src/backup/backup-manager.ts:181:17
 ❯ tests/integration/production-features.test.ts:288:27

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[25/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Backup and Restore Integration > should restore session from backup
TypeError: Cannot read properties of undefined (reading 'provider')
 ❯ BackupManager.create src/backup/backup-manager.ts:79:36
     77| 
     78|     // Register provider if not already registered
     79|     if (!this.providers.has(config.provider)) {
       |                                    ^
     80|       this.registerProvider(config.provider, providerOptions);
     81|     }
 ❯ BackupManager.backup src/backup/backup-manager.ts:181:17
 ❯ tests/integration/production-features.test.ts:298:44

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[26/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > Session Comparison Integration > should calculate thought count similarity
AssertionError: expected undefined not to be undefined
 ❯ tests/integration/production-features.test.ts:337:58
    335| 
    336|       expect(comparison.similarity).toBeGreaterThan(0);
    337|       expect(comparison.metrics?.thoughtCountSimilarity).toBeDefined();
       |                                                          ^
    338|     });
    339| 

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[27/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > End-to-End Feature Integration > should integrate search + templates + batch
AssertionError: expected +0 to be 2 // Object.is equality

- Expected
+ Received

- 2
+ 0

 ❯ tests/integration/production-features.test.ts:368:45
    366|       // 3. Search for them
    367|       const searchResults = searchEngine.search({ query: 'E2E' });
    368|       expect(searchResults.sessions.length).toBe(2);
       |                                             ^
    369| 
    370|       // 4. Batch export the search results

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[28/29]⎯

 FAIL  tests/integration/production-features.test.ts > Production Features Integration Tests > End-to-End Feature Integration > should integrate backup + comparison + cache
TypeError: Cannot read properties of undefined (reading 'provider')
 ❯ BackupManager.create src/backup/backup-manager.ts:79:36
     77| 
     78|     // Register provider if not already registered
     79|     if (!this.providers.has(config.provider)) {
       |                                    ^
     80|       this.registerProvider(config.provider, providerOptions);
     81|     }
 ❯ BackupManager.backup src/backup/backup-manager.ts:181:17
 ❯ tests/integration/production-features.test.ts:388:43

⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯⎯[29/29]⎯

 Test Files  4 failed | 27 passed (31)
      Tests  29 failed | 560 passed (589)
   Start at  20:07:10
   Duration  5.97s (transform 3.53s, setup 1ms, collect 9.16s, tests 1.26s, environment 7ms, prepare 15.79s)


 FAIL  Tests failed. Watching for file changes...
       press h to show help, press q to quit
