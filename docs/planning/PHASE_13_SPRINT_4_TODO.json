{
  "phase": 13,
  "sprint": 4,
  "title": "Builder Integration & Testing",
  "week": "Week 2-3",
  "effort": "5-6 hours",
  "status": "pending",
  "description": "Complete builder infrastructure with JSDoc documentation, index exports, integration tests, and baseline snapshot generation",
  "tasks": [
    {
      "id": "13.4.1",
      "category": "Documentation",
      "description": "Add JSDoc documentation to all 11 builder classes",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "medium",
      "details": [
        "Add class-level JSDoc with description and @example for each builder",
        "Document all public methods with @param and @returns",
        "Include usage examples showing before/after refactoring pattern",
        "Document fluent API chaining pattern",
        "Add @see references to underlying utility functions"
      ],
      "files": [
        "src/export/visual/utils/dot.ts",
        "src/export/visual/utils/mermaid.ts",
        "src/export/visual/utils/graphml.ts",
        "src/export/visual/utils/ascii.ts",
        "src/export/visual/utils/svg.ts",
        "src/export/visual/utils/tikz.ts",
        "src/export/visual/utils/uml.ts",
        "src/export/visual/utils/html.ts",
        "src/export/visual/utils/markdown.ts",
        "src/export/visual/utils/modelica.ts",
        "src/export/visual/utils/json.ts"
      ],
      "notes": "Consistent documentation pattern across all 11 builders"
    },
    {
      "id": "13.4.2",
      "category": "Index Export",
      "description": "Update utils/index.ts to export all builder classes",
      "status": "pending",
      "estimatedHours": 0.5,
      "priority": "high",
      "details": [
        "Add exports for all 11 builder classes",
        "Verify all builders are accessible via @export/visual/utils",
        "Ensure no naming conflicts with existing exports",
        "Update any type re-exports needed"
      ],
      "files": [
        "src/export/visual/utils/index.ts"
      ],
      "notes": "Ensures all builders are easily importable by mode exporters"
    },
    {
      "id": "13.4.3",
      "category": "Integration Tests",
      "description": "Create integration tests for builder usage patterns",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "high",
      "details": [
        "Create tests/integration/export/visual/builders-integration.test.ts",
        "Test complete workflow: create builder -> add elements -> render",
        "Test builder output matches direct function call output",
        "Test combining multiple builders for complex exports",
        "Test error handling for invalid inputs",
        "Verify all 11 builders integrate correctly"
      ],
      "files": [
        "tests/integration/export/visual/builders-integration.test.ts"
      ],
      "notes": "NEW FILE - Integration tests verify builders work end-to-end"
    },
    {
      "id": "13.4.4",
      "category": "Baseline Snapshots",
      "description": "Generate baseline snapshot tests for all mode exporters",
      "status": "pending",
      "estimatedHours": 2.0,
      "priority": "high",
      "details": [
        "Create tests/unit/export/visual/modes/__snapshots__/ directory",
        "Create tests/unit/export/visual/modes/snapshot-baseline.test.ts",
        "Generate DOT output snapshots for all 21 mode exporters",
        "Generate Mermaid output snapshots for all 21 mode exporters",
        "Generate ASCII output snapshots for all 21 mode exporters",
        "These snapshots will verify refactoring doesn't change output"
      ],
      "files": [
        "tests/unit/export/visual/modes/snapshot-baseline.test.ts",
        "tests/unit/export/visual/modes/__snapshots__/snapshot-baseline.test.ts.snap"
      ],
      "notes": "NEW FILES - Critical for verifying Sprints 5-9 don't break visual output. Must run BEFORE refactoring."
    }
  ],
  "successCriteria": [
    "All 11 builder classes have JSDoc documentation",
    "All builders exported from utils/index.ts",
    "Integration tests pass",
    "Baseline snapshots generated for all 21 mode exporters",
    "Full test suite passes",
    "TypeScript compilation succeeds"
  ],
  "filesCreated": [
    "tests/integration/export/visual/builders-integration.test.ts",
    "tests/unit/export/visual/modes/snapshot-baseline.test.ts",
    "tests/unit/export/visual/modes/__snapshots__/snapshot-baseline.test.ts.snap"
  ],
  "filesModified": [
    "src/export/visual/utils/index.ts"
  ],
  "totalEstimatedHours": 5.5,
  "notes": "Complete builder infrastructure. CRITICAL: Baseline snapshots must be generated BEFORE Sprint 5 begins to verify refactoring preserves output."
}
