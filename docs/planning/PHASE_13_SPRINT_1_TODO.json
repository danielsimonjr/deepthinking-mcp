{
  "phase": 13,
  "sprint": 1,
  "title": "Core Graph Builders",
  "week": "Week 1",
  "effort": "5-6 hours",
  "status": "pending",
  "description": "Add fluent API builder classes for core graph formats (DOT, Mermaid, GraphML) with unit tests",
  "tasks": [
    {
      "id": "13.1.1",
      "category": "DOT Builder",
      "description": "Add DOTGraphBuilder class to utils/dot.ts",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "high",
      "details": [
        "Create DOTGraphBuilder class with fluent API",
        "Implement addNode(node: DotNode): this method",
        "Implement addEdge(edge: DotEdge): this method",
        "Implement addSubgraph(subgraph: DotSubgraph): this method",
        "Implement setOptions(options: DotOptions): this method",
        "Implement render(): string method using existing generateDotGraph()",
        "Add DotSubgraph interface if not present",
        "Export DOTGraphBuilder from utils/dot.ts"
      ],
      "files": [
        "src/export/visual/utils/dot.ts"
      ],
      "notes": "Critical for mode refactoring - wraps existing generateDotGraph(), renderDotNode(), etc."
    },
    {
      "id": "13.1.2",
      "category": "Mermaid Builder",
      "description": "Add MermaidGraphBuilder class to utils/mermaid.ts",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "high",
      "details": [
        "Create MermaidGraphBuilder class with fluent API",
        "Implement addNode(node: MermaidNode): this method",
        "Implement addEdge(edge: MermaidEdge): this method",
        "Implement addSubgraph(id: string, label: string, nodes: MermaidNode[]): this method",
        "Implement setOptions(options: MermaidOptions): this method",
        "Implement render(): string method using existing generateMermaidFlowchart()",
        "Export MermaidGraphBuilder from utils/mermaid.ts"
      ],
      "files": [
        "src/export/visual/utils/mermaid.ts"
      ],
      "notes": "Critical for mode refactoring - all 21 files have inline Mermaid string building"
    },
    {
      "id": "13.1.3",
      "category": "GraphML Builder",
      "description": "Add GraphMLBuilder class to utils/graphml.ts",
      "status": "pending",
      "estimatedHours": 1.0,
      "priority": "medium",
      "details": [
        "Create GraphMLBuilder class with fluent API",
        "Implement addNode(id: string, label: string, attributes?: Record<string, string>): this method",
        "Implement addEdge(source: string, target: string, attributes?: Record<string, string>): this method",
        "Implement defineNodeAttribute(name: string, type: string): this method",
        "Implement defineEdgeAttribute(name: string, type: string): this method",
        "Implement render(): string method",
        "Export GraphMLBuilder from utils/graphml.ts"
      ],
      "files": [
        "src/export/visual/utils/graphml.ts"
      ],
      "notes": "GraphML already has 95% adoption - builder provides cleaner API"
    },
    {
      "id": "13.1.4",
      "category": "Unit Tests",
      "description": "Write unit tests for core graph builders",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "high",
      "details": [
        "Create tests/unit/export/visual/utils/graph-builders.test.ts",
        "Test DOTGraphBuilder: nodes, edges, subgraphs, options, render",
        "Test MermaidGraphBuilder: nodes, edges, subgraphs, render",
        "Test GraphMLBuilder: nodes, edges, attributes, render",
        "Verify builder output matches existing function output"
      ],
      "files": [
        "tests/unit/export/visual/utils/graph-builders.test.ts"
      ],
      "notes": "Each builder should have 5-10 test cases"
    }
  ],
  "successCriteria": [
    "DOTGraphBuilder class is exported and functional",
    "MermaidGraphBuilder class is exported and functional",
    "GraphMLBuilder class is exported and functional",
    "All unit tests pass",
    "No breaking changes to existing utility exports"
  ],
  "filesCreated": [
    "tests/unit/export/visual/utils/graph-builders.test.ts"
  ],
  "filesModified": [
    "src/export/visual/utils/dot.ts",
    "src/export/visual/utils/mermaid.ts",
    "src/export/visual/utils/graphml.ts"
  ],
  "totalEstimatedHours": 5.5,
  "notes": "Core graph builders - DOT and Mermaid are critical for Sprint 5-7 refactoring"
}
