{
  "phase": 13,
  "sprint": 2,
  "title": "Visual Format Builders",
  "week": "Week 1-2",
  "effort": "5-6 hours",
  "status": "pending",
  "description": "Add fluent API builder classes for visual formats (ASCII, SVG, TikZ) with unit tests",
  "tasks": [
    {
      "id": "13.2.1",
      "category": "ASCII Builder",
      "description": "Add ASCIIDocBuilder class to utils/ascii.ts",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "high",
      "details": [
        "Create ASCIIDocBuilder class with fluent API",
        "Implement addHeader(title: string, style?: HeaderStyle): this method",
        "Implement addSection(title: string): this method",
        "Implement addBulletList(items: string[]): this method",
        "Implement addNumberedList(items: string[]): this method",
        "Implement addBox(content: string, width?: number): this method",
        "Implement addTree(root: TreeNode): this method",
        "Implement addTable(headers: string[], rows: string[][]): this method",
        "Implement render(): string method",
        "Export ASCIIDocBuilder from utils/ascii.ts"
      ],
      "files": [
        "src/export/visual/utils/ascii.ts"
      ],
      "notes": "Critical for mode refactoring - wraps generateAsciiHeader(), generateAsciiBulletList(), generateAsciiTree(), etc."
    },
    {
      "id": "13.2.2",
      "category": "SVG Builder",
      "description": "Add SVGBuilder class to utils/svg.ts",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "medium",
      "details": [
        "Create SVGBuilder class with fluent API",
        "Implement setDimensions(width: number, height: number): this method",
        "Implement addRect(x, y, width, height, options?): this method",
        "Implement addCircle(cx, cy, r, options?): this method",
        "Implement addText(x, y, text, options?): this method",
        "Implement addLine(x1, y1, x2, y2, options?): this method",
        "Implement addPath(d: string, options?): this method",
        "Implement addGroup(id?: string): SVGGroupBuilder method",
        "Implement render(): string method",
        "Export SVGBuilder from utils/svg.ts"
      ],
      "files": [
        "src/export/visual/utils/svg.ts"
      ],
      "notes": "SVG already has 95% adoption - builder improves consistency"
    },
    {
      "id": "13.2.3",
      "category": "TikZ Builder",
      "description": "Add TikZBuilder class to utils/tikz.ts",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "medium",
      "details": [
        "Create TikZBuilder class with fluent API",
        "Implement addNode(id: string, label: string, options?: TikZNodeOptions): this method",
        "Implement addEdge(from: string, to: string, options?: TikZEdgeOptions): this method",
        "Implement addStyle(name: string, style: string): this method",
        "Implement setOptions(options: TikZOptions): this method",
        "Implement beginScope(options?: string): this method",
        "Implement endScope(): this method",
        "Implement render(): string method",
        "Export TikZBuilder from utils/tikz.ts"
      ],
      "files": [
        "src/export/visual/utils/tikz.ts"
      ],
      "notes": "TikZ has 100% adoption - builder simplifies complex diagram construction"
    },
    {
      "id": "13.2.4",
      "category": "Unit Tests",
      "description": "Write unit tests for visual format builders",
      "status": "pending",
      "estimatedHours": 1.5,
      "priority": "high",
      "details": [
        "Create tests/unit/export/visual/utils/visual-builders.test.ts",
        "Test ASCIIDocBuilder: headers, lists, boxes, trees, tables",
        "Test SVGBuilder: shapes, text, groups, dimensions",
        "Test TikZBuilder: nodes, edges, styles, scopes",
        "Verify builder output matches existing function output"
      ],
      "files": [
        "tests/unit/export/visual/utils/visual-builders.test.ts"
      ],
      "notes": "Each builder should have 5-10 test cases"
    }
  ],
  "successCriteria": [
    "ASCIIDocBuilder class is exported and functional",
    "SVGBuilder class is exported and functional",
    "TikZBuilder class is exported and functional",
    "All unit tests pass",
    "No breaking changes to existing utility exports"
  ],
  "filesCreated": [
    "tests/unit/export/visual/utils/visual-builders.test.ts"
  ],
  "filesModified": [
    "src/export/visual/utils/ascii.ts",
    "src/export/visual/utils/svg.ts",
    "src/export/visual/utils/tikz.ts"
  ],
  "totalEstimatedHours": 6.0,
  "notes": "Visual format builders - ASCII is critical for Sprint 5-7 refactoring"
}
