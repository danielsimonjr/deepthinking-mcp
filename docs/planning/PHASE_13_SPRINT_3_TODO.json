{
  "phase": 13,
  "sprint": 3,
  "title": "Document Format Builders",
  "week": "Week 2",
  "effort": "5-6 hours",
  "status": "completed",
  "completedDate": "2025-12-26",
  "description": "Add fluent API builder classes for document formats (UML, HTML, Markdown, Modelica, JSON) with unit tests",
  "tasks": [
    {
      "id": "13.3.1",
      "category": "UML Builder",
      "description": "Add UMLBuilder class to utils/uml.ts",
      "status": "completed",
      "estimatedHours": 1.0,
      "priority": "medium",
      "details": [
        "Create UMLBuilder class with fluent API for PlantUML",
        "Implement addClass(name: string, members?: string[], methods?: string[]): this method",
        "Implement addInterface(name: string, methods?: string[]): this method",
        "Implement addRelation(from: string, to: string, type: UMLRelationType): this method",
        "Implement addNote(text: string, position?: string): this method",
        "Implement beginPackage(name: string): this method",
        "Implement endPackage(): this method",
        "Implement render(): string method",
        "Export UMLBuilder from utils/uml.ts"
      ],
      "files": [
        "src/export/visual/utils/uml.ts"
      ],
      "notes": "UML utility for PlantUML syntax generation"
    },
    {
      "id": "13.3.2",
      "category": "HTML Builder",
      "description": "Add HTMLDocBuilder class to utils/html.ts",
      "status": "completed",
      "estimatedHours": 1.0,
      "priority": "medium",
      "details": [
        "Create HTMLDocBuilder class with fluent API",
        "Implement setTitle(title: string): this method",
        "Implement addStyle(css: string): this method",
        "Implement addHeading(level: 1-6, text: string): this method",
        "Implement addParagraph(text: string): this method",
        "Implement addList(items: string[], ordered?: boolean): this method",
        "Implement addTable(headers: string[], rows: string[][]): this method",
        "Implement addDiv(content: string, className?: string): this method",
        "Implement render(): string method with full HTML document structure",
        "Export HTMLDocBuilder from utils/html.ts"
      ],
      "files": [
        "src/export/visual/utils/html.ts"
      ],
      "notes": "HTML already has 95% adoption - builder simplifies document assembly"
    },
    {
      "id": "13.3.3",
      "category": "Markdown Builder",
      "description": "Add MarkdownBuilder class to utils/markdown.ts",
      "status": "completed",
      "estimatedHours": 0.75,
      "priority": "medium",
      "details": [
        "Create MarkdownBuilder class with fluent API",
        "Implement addHeading(level: 1-6, text: string): this method",
        "Implement addParagraph(text: string): this method",
        "Implement addBulletList(items: string[]): this method",
        "Implement addNumberedList(items: string[]): this method",
        "Implement addCodeBlock(code: string, language?: string): this method",
        "Implement addTable(headers: string[], rows: string[][]): this method",
        "Implement addBlockquote(text: string): this method",
        "Implement addHorizontalRule(): this method",
        "Implement render(): string method",
        "Export MarkdownBuilder from utils/markdown.ts"
      ],
      "files": [
        "src/export/visual/utils/markdown.ts"
      ],
      "notes": "Markdown commonly used for documentation export"
    },
    {
      "id": "13.3.4",
      "category": "Modelica & JSON Builders",
      "description": "Add ModelicaBuilder and JSONExportBuilder classes",
      "status": "completed",
      "estimatedHours": 1.25,
      "priority": "low",
      "details": [
        "Create ModelicaBuilder class with fluent API",
        "Implement beginModel(), addParameter(), addVariable(), addEquation(), addConnection(), endModel(), render()",
        "Export ModelicaBuilder from utils/modelica.ts",
        "Create JSONExportBuilder class with fluent API",
        "Implement setMetadata(), addSection(), addArraySection(), setFormatting(), render()",
        "Export JSONExportBuilder from utils/json.ts"
      ],
      "files": [
        "src/export/visual/utils/modelica.ts",
        "src/export/visual/utils/json.ts"
      ],
      "notes": "Lower priority builders combined into single task"
    },
    {
      "id": "13.3.5",
      "category": "Unit Tests",
      "description": "Create unit tests for document format builders",
      "status": "completed",
      "estimatedHours": 1.5,
      "priority": "high",
      "details": [
        "Create tests/unit/export/visual/utils/document-builders.test.ts",
        "Test UMLBuilder: classes, interfaces, relations, packages, notes",
        "Test HTMLDocBuilder: structure, elements, styling, full document render",
        "Test MarkdownBuilder: headings, lists, code blocks, tables, blockquotes",
        "Test ModelicaBuilder: models, parameters, equations, connections",
        "Test JSONExportBuilder: sections, metadata, formatting options",
        "Verify builder output matches expected format for each builder"
      ],
      "files": [
        "tests/unit/export/visual/utils/document-builders.test.ts"
      ],
      "notes": "NEW FILE - No existing tests for document builders. Each builder should have 5-8 test cases."
    }
  ],
  "successCriteria": [
    "UMLBuilder class is exported and functional",
    "HTMLDocBuilder class is exported and functional",
    "MarkdownBuilder class is exported and functional",
    "ModelicaBuilder class is exported and functional",
    "JSONExportBuilder class is exported and functional",
    "All unit tests pass (25+ new tests)",
    "No breaking changes to existing utility exports"
  ],
  "filesCreated": [
    "tests/unit/export/visual/utils/document-builders.test.ts"
  ],
  "filesModified": [
    "src/export/visual/utils/uml.ts",
    "src/export/visual/utils/html.ts",
    "src/export/visual/utils/markdown.ts",
    "src/export/visual/utils/modelica.ts",
    "src/export/visual/utils/json.ts"
  ],
  "totalEstimatedHours": 5.5,
  "notes": "Document format builders with unit tests - completes all 11 builder classes"
}
