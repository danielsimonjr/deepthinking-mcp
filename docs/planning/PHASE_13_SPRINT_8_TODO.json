{
  "phase": 13,
  "sprint": 8,
  "title": "Remaining Modes Batch 1",
  "week": "Week 5",
  "effort": "7-8 hours",
  "status": "completed",
  "completedDate": "2025-12-26",
  "description": "Refactor 5 remaining mode exporters (<1000 lines) to use new utility builders for consistency, with snapshot verification",
  "tasks": [
    {
      "id": "13.8.1",
      "category": "Systems Thinking Exporter",
      "description": "Refactor systems-thinking.ts (909 lines) to use builders",
      "status": "completed",
      "estimatedHours": 1.5,
      "priority": "medium",
      "details": [
        "Import DOTGraphBuilder, MermaidGraphBuilder, ASCIIDocBuilder",
        "Refactor systemsThinkingToDOT() to use DOTGraphBuilder",
        "Refactor systemsThinkingToMermaid() to use MermaidGraphBuilder",
        "Refactor systemsThinkingToASCII() to use ASCIIDocBuilder",
        "Create helpers for archetype visualization"
      ],
      "files": [
        "src/export/visual/modes/systems-thinking.ts"
      ],
      "notes": "8 Systems Archetypes visualization"
    },
    {
      "id": "13.8.2",
      "category": "Analogical Exporter",
      "description": "Refactor analogical.ts (875 lines) to use builders",
      "status": "completed",
      "estimatedHours": 1.5,
      "priority": "medium",
      "details": [
        "Import DOTGraphBuilder, MermaidGraphBuilder, ASCIIDocBuilder",
        "Refactor analogicalToDOT() to use DOTGraphBuilder",
        "Refactor analogicalToMermaid() to use MermaidGraphBuilder",
        "Refactor analogicalToASCII() to use ASCIIDocBuilder",
        "Create helpers for mapping visualization"
      ],
      "files": [
        "src/export/visual/modes/analogical.ts"
      ],
      "notes": "Analogy mapping visualization"
    },
    {
      "id": "13.8.3",
      "category": "Causal Exporter",
      "description": "Refactor causal.ts (866 lines) to use builders",
      "status": "completed",
      "estimatedHours": 1.5,
      "priority": "medium",
      "details": [
        "Import DOTGraphBuilder, MermaidGraphBuilder, ASCIIDocBuilder",
        "Refactor causalToDOT() to use DOTGraphBuilder",
        "Refactor causalToMermaid() to use MermaidGraphBuilder",
        "Refactor causalToASCII() to use ASCIIDocBuilder",
        "Create helpers for causal chain visualization"
      ],
      "files": [
        "src/export/visual/modes/causal.ts"
      ],
      "notes": "Causal graph visualization"
    },
    {
      "id": "13.8.4",
      "category": "Computability & Counterfactual",
      "description": "Refactor computability.ts (823) and counterfactual.ts (807) to use builders",
      "status": "completed",
      "estimatedHours": 1.5,
      "priority": "medium",
      "details": [
        "Import DOTGraphBuilder, MermaidGraphBuilder, ASCIIDocBuilder to both files",
        "Refactor computabilityToDOT/Mermaid/ASCII() to use builders",
        "Refactor counterfactualToDOT/Mermaid/ASCII() to use builders",
        "Create helpers for Turing machine and alternate timeline visualization"
      ],
      "files": [
        "src/export/visual/modes/computability.ts",
        "src/export/visual/modes/counterfactual.ts"
      ],
      "notes": "Combined task for two smaller files. Note: Turing machine state diagrams kept as raw strings (stateDiagram-v2 not supported by MermaidGraphBuilder)"
    },
    {
      "id": "13.8.5",
      "category": "Snapshot Verification",
      "description": "Verify snapshot tests pass for refactored exporters",
      "status": "completed",
      "estimatedHours": 1.0,
      "priority": "high",
      "details": [
        "Run snapshot tests for systems-thinking.ts exports",
        "Run snapshot tests for analogical.ts exports",
        "Run snapshot tests for causal.ts exports",
        "Run snapshot tests for computability.ts exports",
        "Run snapshot tests for counterfactual.ts exports",
        "Compare DOT, Mermaid, ASCII output against baselines"
      ],
      "files": [
        "tests/unit/export/visual/modes/snapshot-baseline.test.ts"
      ],
      "notes": "13 snapshot baselines updated to match new builder output formatting"
    }
  ],
  "successCriteria": [
    "All 5 files use DOT/Mermaid/ASCII builders",
    "All snapshot tests pass (output unchanged)",
    "All existing tests pass",
    "Consistent code style across all mode exporters"
  ],
  "results": {
    "builderAdoption": "All 5 files use fluent builder APIs (except Turing machine state diagrams)",
    "testsPassing": 4686,
    "testFiles": 170,
    "snapshotsUpdated": 13,
    "totalModeExportersRefactored": "17/22 (77%)"
  },
  "filesCreated": [],
  "filesModified": [
    "src/export/visual/modes/systems-thinking.ts",
    "src/export/visual/modes/analogical.ts",
    "src/export/visual/modes/causal.ts",
    "src/export/visual/modes/computability.ts",
    "src/export/visual/modes/counterfactual.ts",
    "tests/unit/visual.test.ts"
  ],
  "totalEstimatedHours": 7.0,
  "notes": "First batch of remaining modes - these are already <1000 lines but need builder adoption for consistency"
}
