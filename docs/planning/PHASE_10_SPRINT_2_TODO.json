{
  "phase": 10,
  "sprint": 2,
  "title": "ModeHandler Migration - Core Modes",
  "week": "Week 2",
  "effort": "5-6 hours",
  "status": "pending",
  "tasks": [
    {
      "id": "10.2.1",
      "category": "Migration",
      "description": "Migrate CausalHandler - Full ModeHandler implementation with semantic validation, validates causal graph structure, detects cycles, propagates interventions",
      "status": "pending",
      "estimatedHours": 1.5,
      "files": [
        "src/modes/handlers/CausalHandler.ts",
        "tests/unit/modes/handlers/CausalHandler.test.ts"
      ]
    },
    {
      "id": "10.2.2",
      "category": "Migration",
      "description": "Migrate BayesianHandler - Implements automatic posterior calculation from prior and likelihood, validates probability values sum to 1",
      "status": "pending",
      "estimatedHours": 1.5,
      "files": [
        "src/modes/handlers/BayesianHandler.ts",
        "tests/unit/modes/handlers/BayesianHandler.test.ts"
      ]
    },
    {
      "id": "10.2.3",
      "category": "Migration",
      "description": "Migrate GameTheoryHandler - Validates payoff matrix dimensions, checks player/strategy consistency, computes basic Nash equilibria",
      "status": "pending",
      "estimatedHours": 1.0,
      "files": [
        "src/modes/handlers/GameTheoryHandler.ts",
        "tests/unit/modes/handlers/GameTheoryHandler.test.ts"
      ]
    },
    {
      "id": "10.2.4",
      "category": "Integration",
      "description": "Update ThoughtFactory to Use Registry - Wire RefactoredThoughtFactory into index.ts, register migrated handlers, verify incremental migration works",
      "status": "pending",
      "estimatedHours": 1.0,
      "files": [
        "src/index.ts",
        "src/services/ThoughtFactory.ts"
      ]
    },
    {
      "id": "10.2.5",
      "category": "Testing",
      "description": "Add Handler Integration Tests - Test that factory correctly delegates to handlers, test fallback to GenericModeHandler for non-migrated modes",
      "status": "pending",
      "estimatedHours": 0.5,
      "files": [
        "tests/integration/mode-handler-delegation.test.ts"
      ]
    }
  ],
  "successCriteria": [
    "3 modes migrated to handler pattern (Causal, Bayesian, GameTheory)",
    "Each handler has specialized validation logic that adds value",
    "Factory delegates to handlers for migrated modes",
    "All 791+ tests pass"
  ],
  "filesCreated": [
    "src/modes/handlers/CausalHandler.ts",
    "src/modes/handlers/BayesianHandler.ts",
    "src/modes/handlers/GameTheoryHandler.ts",
    "tests/unit/modes/handlers/CausalHandler.test.ts",
    "tests/unit/modes/handlers/BayesianHandler.test.ts",
    "tests/unit/modes/handlers/GameTheoryHandler.test.ts",
    "tests/integration/mode-handler-delegation.test.ts"
  ],
  "filesModified": [
    "src/index.ts",
    "src/services/ThoughtFactory.ts"
  ],
  "totalEstimatedHours": 5.5,
  "notes": "Reduced from 5 handlers to 3 per PACKAGE_SUMMARY recommendation of ~2 handlers per week. Counterfactual and Synthesis moved to Sprint 2B."
}
